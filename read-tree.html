<!DOCTYPE html>
<html lang="en">

<head>
<!--__RIM_REDIRECT__-->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Quicksand:wght@300..700&display=swap" rel="stylesheet">

<title>Read tree</title>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
<meta name="HandheldFriendly" content="True"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<link rel="canonical" href="https://rimstone-lang.com/read-tree.html" />
<style>


body, html {
    font-family: Quicksand,monospace,Helvetica, Arial, sans-serif;
    line-height: 150%;
    font-size:16px;
}

body {
    padding-left:1vw;
    padding-right:1vw;
}
    
.ncode {
    letter-spacing: 0px;
    font-family: monospace;
    font-size:83%;
    display:inline-block;
    max-width:99%;
    min-width:90%;
    margin:0;
    padding:0;
    padding-left:5px;
    padding-top:3px;
    padding-bottom:3px;
    margin-bottom:8px;
    margin-top:8px;
    border: 2px solid #d6d6d6;
    background-color:#f5f7f4;
    white-space:nowrap;
}

.shcode {
    letter-spacing: 0px;
    font-family: monospace;
    font-size:83%;
    display:inline-block;
    max-width:99%;
    min-width:90%;
    margin:0;
    padding:0;
    padding-left:5px;
    padding-top:3px;
    padding-bottom:3px;
    margin-bottom:8px;
    margin-top:8px;
    border: 2px solid #d6d6d6;
    background-color:#f5f7f4;
    white-space:nowrap;
}

.sqlcode {
    letter-spacing: 0px;
    font-family: monospace;
    font-size:83%;
    display:inline-block;
    max-width:99%;
    min-width:90%;
    margin:0;
    padding:0;
    padding-left:5px;
    padding-top:3px;
    padding-bottom:3px;
    margin-bottom:8px;
    margin-top:8px;
    border: 2px solid #d6d6d6;
    background-color:#f5f7f4;
    white-space:nowrap;
}

.htmlcode {
    letter-spacing: 0px;
    font-family: monospace;
    font-size:83%;
    display:inline-block;
    max-width:99%;
    min-width:90%;
    margin:0;
    padding:0;
    padding-left:5px;
    padding-top:3px;
    padding-bottom:3px;
    margin-bottom:8px;
    margin-top:8px;
    border: 2px solid #d6d6d6;
    background-color:#f5f7f4;
    white-space:nowrap;
}

.code {
    letter-spacing: 0px;
    font-family: monospace;
    font-size:83%;
    display:inline-block;
    max-width:99%;
    min-width:90%;
    margin:0;
    padding:0;
    padding-left:5px;
    padding-top:3px;
    padding-bottom:3px;
    margin-bottom:8px;
    margin-top:8px;
    border: 2px solid #d6d6d6;
    background-color:#f5f7f4;
    white-space:nowrap;
}

/*Just like h1 but for pdf conversion it would be indented this way it's not*/
.vhub {
    display: block;
   font-size: 1.6em;
   margin-top: 0.63em;
   margin-bottom: 0.63em;
   margin-left: 0;
   margin-right: 0;
   font-weight: bold;
}

/*Just like h2 but for pdf conversion it would be indented this way it's not*/
.vsub {
    display: block;
   font-size: 1.25em;
   margin-top: 0.53em;
   margin-bottom: 0.53em;
   margin-left: 0;
   margin-right: 0;
   font-weight: bold;
}

ul {
  margin-left: 0.75vw;
  padding-left: 0;
}
li {
  margin-left: 0.75vw;
  padding-left: 0;
}

/* this must be last, as it overrides previous settings, for mobile */
@media (hover: none) {
a {
   display: inline-block;
   padding-top: 3px;
   padding-bottom: 2px;
}
body {
    padding-left:2vw;
    padding-right:2vw;
    letter-spacing: 1px;
}
}

/*The following is for code snippets that are highlighted by 2html vim*/
pre { overflow-x: scroll; margin:0; padding:0; font-family:monospace; }
.Identifier { color: #008b8b; }
.Statement { color: #af5f00; }
.PreProc { color: #5fd7ff; }
.Type { color: #005f00; }
.Comment { color: blue ; }
.Constant { color: #ff00ff; }
/*end of highlighted snippets*/

a {
    text-decoration:none;
    padding-bottom: 0px; 
    color:inherit;
    border-bottom: 2px solid #6cb8f0;
}
a:hover {
    text-decoration: none;
    color:black;
    border-bottom: 1px solid red;
}
/*do not underline links nor should they be active*/
pre a {
    text-decoration:none;
    color:black;
    border-bottom: none;
    pointer-events: none;
    cursor: default;
}


.golfSnippet {display:none;}

ul {
  list-style-type:square;
  list-style-position: outside;
}

</style>


</head>
<body>
<div id="google_translate_element" style='float:right'></div>
<script type="text/javascript" src="//translate.google.com/translate_a/element.js?cb=googleTranslateElementInit"></script>
<script>
function rim_copy(gt, eid, gc) {
  gt.textContent = eid.textContent;
  gt.select();
  document.execCommand("copy");
  gc.style.visibility="visible"
  setTimeout(()=>{ gc.style.visibility="hidden"; }, 1000);
}
function googleTranslateElementInit() {
   new google.translate.TranslateElement({pageLanguage: 'en'}, 'google_translate_element');
}

</script>

<!--RIMMENU13-->

<!--RIMENDMENU13-->



<!--BEGVDOC90-->
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:left;background-color:white;'><a href='https://rimstone-lang.com' style='border-bottom:0px'><img src='https://rimstone-lang.com/rimstone.png' style='width:180px;height:auto'/></a></div><div class='vhub' style='margin-top:10px;'>Read tree</div><hr/><span style="font-weight:bold;">Purpose</span>: Search/update a tree.<br/>
<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_928' class=notranslate>
<span class="Statement">read-tree</span> &lt;tree&gt; \
    (<span class="Identifier"> equal</span> &lt;search key&gt; |<span class="Identifier"> lesser</span> &lt;search key&gt; |<span class="Identifier"> greater</span> &lt;search key&gt; | \
       <span class="Identifier"> lesser-equal</span> &lt;search key&gt; |<span class="Identifier"> greater-equal</span> &lt;search key&gt; | \
       <span class="Identifier"> min-key</span> |<span class="Identifier"> max-key</span> ) \
    [<span class="Type"> value</span> &lt;value&gt; ] \
    [<span class="Identifier"> update-value</span> &lt;update value&gt; ] \
    [<span class="Type"> key</span> &lt;key&gt; ] \
    [<span class="Type"> status</span> &lt;status&gt; ] \
    [<span class="Type"> new-cursor</span> &lt;cursor&gt; ]</pre>
<span id=rimstone_copied_928 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_928' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_928, code_928, rimstone_copied_928)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
read-tree will search &lt;tree&gt; (created with <a href='https://rimstone-lang.com/new-tree.html'>new-tree</a>) for a node with the string key that is:<br/>
<ul><li>equal to &lt;search key&gt; ("equal" clause)<br/>
</li><li>lesser than &lt;search key&gt; ("lesser" clause)<br/>
</li><li>greater than &lt;search key&gt; ("greater" clause)<br/>
</li><li>lesser or equal than &lt;search key&gt; ("lesser-equal" clause)<br/>
</li><li>greater or equal than &lt;search key&gt; ("greater-equal" clause)<br/>
</li><li>a minimum key in the tree ("min-key" clause)<br/>
</li><li>a maximum key in the tree ("max-key" clause)</li></ul>
The &lt;status&gt; in "status" clause will be RIM_OKAY if a key conforming to one of these criteria is found, and RIM_ERR_EXIST if not. <br/>
<br/>
If a key is found, the value associated with the key can be obtained with "value" clause in &lt;value&gt;; an existing key used to originally insert this value into the tree can be obtained with "key" clause in string &lt;key&gt;. If a key is not found, both &lt;value&gt; and &lt;key&gt; are unchanged. <br/>
<br/>
You can update the value associated with a found key with "update-value" clause by specifying &lt;update value&gt; string. This update is performed after &lt;value&gt; has been retrieved, allowing you to obtain the previous value in the same statement. <br/>
<br/>
If you'd like to iterate the ordered list of keys in a tree, create a &lt;cursor&gt; by using "new-cursor" clause, in which case &lt;cursor&gt; will be positioned on a found tree node. See <a href='https://rimstone-lang.com/use-cursor.html'>use-cursor</a> for more on using cursors. Cursors are useful in range searches; typically you'd find a key that is an upper or lower bound of a range and then keep iterating to a lesser or greater value until some criteria is met, such as when the opposite bound is found. RimStone treees are by default constructed so that such iterations are O(1) in complexity, meaning each is a single tree node access (see <a href='https://rimstone-lang.com/new-tree.html'>new-tree</a>). <br/>
<div class="vsub"><a id="Examples"></a>Examples</div>
In this example, a million key/value pairs are inserted into a tree, and then each of them is searched for and then displayed back (see <a href='https://rimstone-lang.com/write-tree.html'>write-tree</a> for more on inserting into a tree). Both the key and the data are a numerical value of a key:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_929' class=notranslate>
<span class="Statement">%%</span> /tree-example<span class="Identifier"> public</span>

<span class="Statement">    new-tree</span> mytree<span class="Identifier"> key-as</span> <span class="Constant">&quot;positive integer&quot;</span> <span class="Comment">// create new tree</span>

<span class="Statement">    set-number</span> i
<span class="Statement">    start-loop</span><span class="Type"> use</span> i<span class="Identifier"> start-with</span> <span class="Constant">0</span><span class="Identifier"> repeat</span> <span class="Constant">1000000</span>
<span class="Statement">        number-string</span> i<span class="Type"> to</span> key
<span class="Statement">        set-string</span> data=key
<span class="Statement">        write-tree</span> mytree<span class="Identifier"> key</span> (key)<span class="Identifier"> value</span> data <span class="Comment">// insert key/data to the tree</span>
<span class="Statement">    end-loop</span>

<span class="Statement">    start-loop</span><span class="Type"> use</span> i<span class="Identifier"> start-with</span> <span class="Constant">0</span><span class="Identifier"> repeat</span> <span class="Constant">1000000</span>
<span class="Statement">        number-string</span> i<span class="Type"> to</span> key
        <span class="Comment">// search tree for each key previously inserted</span>
<span class="Statement">        read-tree</span> mytree<span class="Identifier"> equal</span> (key)<span class="Type"> status</span> st<span class="Type"> value</span> data
<span class="Statement">        if-true</span> st<span class="Identifier"> not-equal</span> RIM_OKAY
<span class="Statement">            @</span>Could not find key <span class="Statement">&lt;&lt;print-out</span> key<span class="Statement">&gt;&gt;</span>
<span class="Statement">        else-if</span>
<span class="Statement">            @</span>Found data <span class="Statement">&lt;&lt;print-out</span> data<span class="Statement">&gt;&gt;</span> associated with key <span class="Statement">&lt;&lt;print-out</span> key<span class="Statement">&gt;&gt;</span>
<span class="Statement">        end-if</span>
<span class="Statement">        delete-string</span> key
<span class="Statement">    end-loop</span>
<span class="Statement">%%</span></pre>
<span id=rimstone_copied_929 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_929' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_929, code_929, rimstone_copied_929)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<div class="vsub"><a id="See also"></a>See also</div>
 <a name='Tree'></a><span style="font-weight:bold;">Tree</span><br/>
<a href='https://rimstone-lang.com/delete-tree.html'>delete-tree</a> &nbsp;<br/>
<a href='https://rimstone-lang.com/get-tree.html'>get-tree</a> &nbsp;<br/>
<a href='https://rimstone-lang.com/new-tree.html'>new-tree</a> &nbsp;<br/>
<a href='https://rimstone-lang.com/purge-tree.html'>purge-tree</a> &nbsp;<br/>
<a href='https://rimstone-lang.com/read-tree.html'>read-tree</a> &nbsp;<br/>
<a href='https://rimstone-lang.com/use-cursor.html'>use-cursor</a> &nbsp;<br/>
<a href='https://rimstone-lang.com/write-tree.html'>write-tree</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='https://rimstone-lang.com/documentation.html'>documentation</a><br/>
<!--ENDVDOC90-->
<br/><div style='width:100%;clear:both;'>
<hr/>
<!--GOLFFOOT77--><span style='font-size:80%'><a href="https://rimstone-lang.com/copyright.html">Copyright</a> (c) 2019-2025 Gliim LLC. All contents on this web site is "AS IS" without warranties or guarantees of any kind.</span>
</div><br/></body></html>


