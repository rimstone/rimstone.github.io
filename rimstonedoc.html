<!DOCTYPE html>
<html lang="en">

<head>
<!--__RIM_REDIRECT__-->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Quicksand:wght@300..700&display=swap" rel="stylesheet">

<title>Single page documentation - RimStone</title>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
<meta name="HandheldFriendly" content="True"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<link rel="canonical" href="__RIM_URL__" />
<style>


body, html {
    font-family: Quicksand,monospace,Helvetica, Arial, sans-serif;
    line-height: 150%;
    font-size:16px;
}

body {
    padding-left:1vw;
    padding-right:1vw;
}
    
.ncode {
    letter-spacing: 0px;
    font-family: monospace;
    font-size:83%;
    display:inline-block;
    max-width:99%;
    min-width:90%;
    margin:0;
    padding:0;
    padding-left:5px;
    padding-top:3px;
    padding-bottom:3px;
    margin-bottom:8px;
    margin-top:8px;
    border: 2px solid #d6d6d6;
    background-color:#f5f7f4;
    white-space:nowrap;
}

.shcode {
    letter-spacing: 0px;
    font-family: monospace;
    font-size:83%;
    display:inline-block;
    max-width:99%;
    min-width:90%;
    margin:0;
    padding:0;
    padding-left:5px;
    padding-top:3px;
    padding-bottom:3px;
    margin-bottom:8px;
    margin-top:8px;
    border: 2px solid #d6d6d6;
    background-color:#f5f7f4;
    white-space:nowrap;
}

.sqlcode {
    letter-spacing: 0px;
    font-family: monospace;
    font-size:83%;
    display:inline-block;
    max-width:99%;
    min-width:90%;
    margin:0;
    padding:0;
    padding-left:5px;
    padding-top:3px;
    padding-bottom:3px;
    margin-bottom:8px;
    margin-top:8px;
    border: 2px solid #d6d6d6;
    background-color:#f5f7f4;
    white-space:nowrap;
}

.htmlcode {
    letter-spacing: 0px;
    font-family: monospace;
    font-size:83%;
    display:inline-block;
    max-width:99%;
    min-width:90%;
    margin:0;
    padding:0;
    padding-left:5px;
    padding-top:3px;
    padding-bottom:3px;
    margin-bottom:8px;
    margin-top:8px;
    border: 2px solid #d6d6d6;
    background-color:#f5f7f4;
    white-space:nowrap;
}

.code {
    letter-spacing: 0px;
    font-family: monospace;
    font-size:83%;
    display:inline-block;
    max-width:99%;
    min-width:90%;
    margin:0;
    padding:0;
    padding-left:5px;
    padding-top:3px;
    padding-bottom:3px;
    margin-bottom:8px;
    margin-top:8px;
    border: 2px solid #d6d6d6;
    background-color:#f5f7f4;
    white-space:nowrap;
}

/*Just like h1 but for pdf conversion it would be indented this way it's not*/
.vhub {
    display: block;
   font-size: 1.6em;
   margin-top: 0.63em;
   margin-bottom: 0.63em;
   margin-left: 0;
   margin-right: 0;
   font-weight: bold;
}

/*Just like h2 but for pdf conversion it would be indented this way it's not*/
.vsub {
    display: block;
   font-size: 1.25em;
   margin-top: 0.53em;
   margin-bottom: 0.53em;
   margin-left: 0;
   margin-right: 0;
   font-weight: bold;
}

ul {
  margin-left: 0.75vw;
  padding-left: 0;
}
li {
  margin-left: 0.75vw;
  padding-left: 0;
}

/* this must be last, as it overrides previous settings, for mobile */
@media (hover: none) {
a {
   display: inline-block;
   padding-top: 3px;
   padding-bottom: 2px;
}
body {
    padding-left:2vw;
    padding-right:2vw;
    letter-spacing: 1px;
}
}

/*The following is for code snippets that are highlighted by 2html vim*/
pre { overflow-x: scroll; margin:0; padding:0; font-family:monospace; }
.Identifier { color: #008b8b; }
.Statement { color: #af5f00; }
.PreProc { color: #5fd7ff; }
.Type { color: #005f00; }
.Comment { color: blue ; }
.Constant { color: #ff00ff; }
/*end of highlighted snippets*/

a {
    text-decoration:none;
    padding-bottom: 0px; 
    color:inherit;
    border-bottom: 2px solid #6cb8f0;
}
a:hover {
    text-decoration: none;
    color:black;
    border-bottom: 1px solid red;
}
/*do not underline links nor should they be active*/
pre a {
    text-decoration:none;
    color:black;
    border-bottom: none;
    pointer-events: none;
    cursor: default;
}


.golfSnippet {display:none;}

ul {
  list-style-type:square;
  list-style-position: outside;
}

</style>


</head>
<body>
<div id="google_translate_element" style='float:right'></div>
<script type="text/javascript" src="//translate.google.com/translate_a/element.js?cb=googleTranslateElementInit"></script>
<script>
function rim_copy(gt, eid, gc) {
  gt.textContent = eid.textContent;
  gt.select();
  document.execCommand("copy");
  gc.style.visibility="visible"
  setTimeout(()=>{ gc.style.visibility="hidden"; }, 1000);
}
function googleTranslateElementInit() {
   new google.translate.TranslateElement({pageLanguage: 'en'}, 'google_translate_element');
}

</script>

<!--RIMMENU13-->

<!--RIMENDMENU13-->



<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:left;background-color:white;'><a href='https://rimstone-lang.com' style='border-bottom:0px'><img src='https://rimstone-lang.com/rimstone.png' style='width:180px;height:auto'/></a></div>
<div class='vhub'>RimStone Single-Page Documentation for version 4.3.1</div><hr/>
This page contains all of RimStone documentation topics combined into one. It may be easier to search. You can also download this page (or the entire site) and use it locally. <!--RIMBEGDOC39--><br/><br/>
<a href='#123-hello-world.html'>123-hello-world</a><br/>
<a href='#abd.html'>abd</a><br/>
<a href='#abn.html'>abn</a><br/>
<a href='#about-rimstone.html'>about-rimstone</a><br/>
<a href='#abs-double.html'>abs-double</a><br/>
<a href='#abs-number.html'>abs-number</a><br/>
<a href='#acosh.html'>acosh</a><br/>
<a href='#acos.html'>acos</a><br/>
<a href='#after-handler.html'>after-handler</a><br/>
<a href='#application-setup.html'>application-setup</a><br/>
<a href='#article-capi.html'>article-capi</a><br/>
<a href='#article-cookies.html'>article-cookies</a><br/>
<a href='#article-debug.html'>article-debug</a><br/>
<a href='#article-distributed.html'>article-distributed</a><br/>
<a href='#article-encryption.html'>article-encryption</a><br/>
<a href='#article-fetch-web-page.html'>article-fetch-web-page</a><br/>
<a href='#article-fifo.html'>article-fifo</a><br/>
<a href='#article-file-manager.html'>article-file-manager</a><br/>
<a href='#article-hello-server.html'>article-hello-server</a><br/>
<a href='#article-hello-world.html'>article-hello-world</a><br/>
<a href='#article-hello-world-service.html'>article-hello-world-service</a><br/>
<a href='#article-hello-world-service-web.html'>article-hello-world-service-web</a><br/>
<a href='#article-how-to-create-rimstone-application.html'>article-how-to-create-rimstone-application</a><br/>
<a href='#article-installing-rimstone.html'>article-installing-rimstone</a><br/>
<a href='#article-json.html'>article-json</a><br/>
<a href='#article-language.html'>article-language</a><br/>
<a href='#article-mariadb.html'>article-mariadb</a><br/>
<a href='#article-memory-safety.html'>article-memory-safety</a><br/>
<a href='#article-memory-safety-web.html'>article-memory-safety-web</a><br/>
<a href='#article-messaging-from-client.html'>article-messaging-from-client</a><br/>
<a href='#article-mortgage.html'>article-mortgage</a><br/>
<a href='#article-notes-postgres.html'>article-notes-postgres</a><br/>
<a href='#article-random.html'>article-random</a><br/>
<a href='#article-record-temperature-mariadb.html'>article-record-temperature-mariadb</a><br/>
<a href='#article-record-temperature-postgres.html'>article-record-temperature-postgres</a><br/>
<a href='#article-record-temperature-sqlite.html'>article-record-temperature-sqlite</a><br/>
<a href='#article-recursion-factorial.html'>article-recursion-factorial</a><br/>
<a href='#article-recursion-reverse-string.html'>article-recursion-reverse-string</a><br/>
<a href='#article-regex.html'>article-regex</a><br/>
<a href='#article-remote-call.html'>article-remote-call</a><br/>
<a href='#article-request-function.html'>article-request-function</a><br/>
<a href='#article-security.html'>article-security</a><br/>
<a href='#article-sendmail.html'>article-sendmail</a><br/>
<a href='#article-server.html'>article-server</a><br/>
<a href='#article-shopping.html'>article-shopping</a><br/>
<a href='#article-sqlite.html'>article-sqlite</a><br/>
<a href='#article-statements.html'>article-statements</a><br/>
<a href='#article-status-check.html'>article-status-check</a><br/>
<a href='#article-tree.html'>article-tree</a><br/>
<a href='#article-tree-web.html'>article-tree-web</a><br/>
<a href='#article-vim-coloring.html'>article-vim-coloring</a><br/>
<a href='#article-web-framework-for-c-programming-language.html'>article-web-framework-for-c-programming-language</a><br/>
<a href='#article-what-if-toolkit-library-missing.html'>article-what-if-toolkit-library-missing</a><br/>
<a href='#article-what-is-rimstone.html'>article-what-is-rimstone</a><br/>
<a href='#article-what-is-web-service.html'>article-what-is-web-service</a><br/>
<a href='#asinh.html'>asinh</a><br/>
<a href='#asin.html'>asin</a><br/>
<a href='#atan2.html'>atan2</a><br/>
<a href='#atanh.html'>atanh</a><br/>
<a href='#atan.html'>atan</a><br/>
<a href='#before-handler.html'>before-handler</a><br/>
<a href='#begin-handler.html'>begin-handler</a><br/>
<a href='#begin-transaction.html'>begin-transaction</a><br/>
<a href='#boolean-expressions.html'>boolean-expressions</a><br/>
<a href='#break-loop.html'>break-loop</a><br/>
<a href='#call-extended.html'>call-extended</a><br/>
<a href='#call-handler.html'>call-handler</a><br/>
<a href='#call-remote.html'>call-remote</a><br/>
<a href='#call-web.html'>call-web</a><br/>
<a href='#cbrt.html'>cbrt</a><br/>
<a href='#ceil.html'>ceil</a><br/>
<a href='#CGI.html'>CGI</a><br/>
<a href='#change-dir.html'>change-dir</a><br/>
<a href='#change-mode.html'>change-mode</a><br/>
<a href='#Client-API-and-messaging.html'>Client-API-and-messaging</a><br/>
<a href='#Client-API.html'>Client-API</a><br/>
<a href='#close-file.html'>close-file</a><br/>
<a href='#code-blocks.html'>code-blocks</a><br/>
<a href='#command-line.html'>command-line</a><br/>
<a href='#commit-transaction.html'>commit-transaction</a><br/>
<a href='#connect-apache-tcp-socket.html'>connect-apache-tcp-socket</a><br/>
<a href='#connect-apache-unix-socket.html'>connect-apache-unix-socket</a><br/>
<a href='#connect-haproxy-tcp-socket.html'>connect-haproxy-tcp-socket</a><br/>
<a href='#connect-nginx-tcp-socket.html'>connect-nginx-tcp-socket</a><br/>
<a href='#connect-nginx-unix-socket.html'>connect-nginx-unix-socket</a><br/>
<a href='#continue-loop.html'>continue-loop</a><br/>
<a href='#copy-file.html'>copy-file</a><br/>
<a href='#copysign.html'>copysign</a><br/>
<a href='#copy-string.html'>copy-string</a><br/>
<a href='#cosh.html'>cosh</a><br/>
<a href='#cos.html'>cos</a><br/>
<a href='#count-substring.html'>count-substring</a><br/>
<a href='#current-row.html'>current-row</a><br/>
<a href='#database-config-file.html'>database-config-file</a><br/>
<a href='#db-error.html'>db-error</a><br/>
<a href='#dbl.html'>dbl</a><br/>
<a href='#debugging.html'>debugging</a><br/>
<a href='#decode-base64.html'>decode-base64</a><br/>
<a href='#decode-hex.html'>decode-hex</a><br/>
<a href='#decode-url.html'>decode-url</a><br/>
<a href='#decode-web.html'>decode-web</a><br/>
<a href='#decrypt-data.html'>decrypt-data</a><br/>
<a href='#delete-cookie.html'>delete-cookie</a><br/>
<a href='#delete-dir.html'>delete-dir</a><br/>
<a href='#delete-fifo.html'>delete-fifo</a><br/>
<a href='#delete-file.html'>delete-file</a><br/>
<a href='#delete-lifo.html'>delete-lifo</a><br/>
<a href='#delete-list.html'>delete-list</a><br/>
<a href='#delete-string.html'>delete-string</a><br/>
<a href='#delete-tree.html'>delete-tree</a><br/>
<a href='#derive-key.html'>derive-key</a><br/>
<a href='#devel-versus-release.html'>devel-versus-release</a><br/>
<a href='#directories.html'>directories</a><br/>
<a href='#documentation.html'>documentation</a><br/>
<a href='#do-once.html'>do-once</a><br/>
<a href='#double-expressions.html'>double-expressions</a><br/>
<a href='#double-string.html'>double-string</a><br/>
<a href='#encode-base64.html'>encode-base64</a><br/>
<a href='#encode-hex.html'>encode-hex</a><br/>
<a href='#encode-url.html'>encode-url</a><br/>
<a href='#encode-web.html'>encode-web</a><br/>
<a href='#encrypt-data.html'>encrypt-data</a><br/>
<a href='#erfc.html'>erfc</a><br/>
<a href='#erf.html'>erf</a><br/>
<a href='#error-code.html'>error-code</a><br/>
<a href='#error-handling.html'>error-handling</a><br/>
<a href='#examples.html'>examples</a><br/>
<a href='#exec-program.html'>exec-program</a><br/>
<a href='#exit-handler.html'>exit-handler</a><br/>
<a href='#exit-status.html'>exit-status</a><br/>
<a href='#exp2.html'>exp2</a><br/>
<a href='#exp.html'>exp</a><br/>
<a href='#extended-mode.html'>extended-mode</a><br/>
<a href='#file-position.html'>file-position</a><br/>
<a href='#file-storage.html'>file-storage</a><br/>
<a href='#file-uploading.html'>file-uploading</a><br/>
<a href='#finish-output.html'>finish-output</a><br/>
<a href='#floor.html'>floor</a><br/>
<a href='#flush-output.html'>flush-output</a><br/>
<a href='#fmod.html'>fmod</a><br/>
<a href='#get-app.html'>get-app</a><br/>
<a href='#get-cookie.html'>get-cookie</a><br/>
<a href='#get-hash.html'>get-hash</a><br/>
<a href='#get-lifo.html'>get-lifo</a><br/>
<a href='#get-list.html'>get-list</a><br/>
<a href='#get-message.html'>get-message</a><br/>
<a href='#get-param.html'>get-param</a><br/>
<a href='#get-req.html'>get-req</a><br/>
<a href='#get-sys.html'>get-sys</a><br/>
<a href='#get-time.html'>get-time</a><br/>
<a href='#get-tree.html'>get-tree</a><br/>
<a href='#get-upload.html'>get-upload</a><br/>
<a href='#hash-string.html'>hash-string</a><br/>
<a href='#hmac-string.html'>hmac-string</a><br/>
<a href='#hypot.html'>hypot</a><br/>
<a href='#if-defined.html'>if-defined</a><br/>
<a href='#if-true.html'>if-true</a><br/>
<a href='#inline-code.html'>inline-code</a><br/>
<a href='#input-output-parameters.html'>input-output-parameters</a><br/>
<a href='#install-package.html'>install-package</a><br/>
<a href='#install-rimstone.html'>install-rimstone</a><br/>
<a href='#isinf.html'>isinf</a><br/>
<a href='#isnan.html'>isnan</a><br/>
<a href='#json-doc.html'>json-doc</a><br/>
<a href='#ldexp.html'>ldexp</a><br/>
<a href='#lgamma.html'>lgamma</a><br/>
<a href='#lock-file.html'>lock-file</a><br/>
<a href='#log10.html'>log10</a><br/>
<a href='#log2.html'>log2</a><br/>
<a href='#log.html'>log</a><br/>
<a href='#lower-string.html'>lower-string</a><br/>
<a href='#mariadb-database.html'>mariadb-database</a><br/>
<a href='#match-regex.html'>match-regex</a><br/>
<a href='#math-functions.html'>math-functions</a><br/>
<a href='#memory-handling.html'>memory-handling</a><br/>
<a href='#mixing-doubles-and-numbers.html'>mixing-doubles-and-numbers</a><br/>
<a href='#mrim.html'>mrim</a><br/>
<a href='#new-array.html'>new-array</a><br/>
<a href='#new-dir.html'>new-dir</a><br/>
<a href='#new-fifo.html'>new-fifo</a><br/>
<a href='#new-hash.html'>new-hash</a><br/>
<a href='#new-lifo.html'>new-lifo</a><br/>
<a href='#new-list.html'>new-list</a><br/>
<a href='#new-message.html'>new-message</a><br/>
<a href='#new-remote.html'>new-remote</a><br/>
<a href='#new-string.html'>new-string</a><br/>
<a href='#new-tree.html'>new-tree</a><br/>
<a href='#nextafter.html'>nextafter</a><br/>
<a href='#number-expressions.html'>number-expressions</a><br/>
<a href='#number-string.html'>number-string</a><br/>
<a href='#num.html'>num</a><br/>
<a href='#open-file.html'>open-file</a><br/>
<a href='#out-header.html'>out-header</a><br/>
<a href='#output-statement.html'>output-statement</a><br/>
<a href='#pause-program.html'>pause-program</a><br/>
<a href='#permissions.html'>permissions</a><br/>
<a href='#position-list.html'>position-list</a><br/>
<a href='#postgresql-database.html'>postgresql-database</a><br/>
<a href='#pow.html'>pow</a><br/>
<a href='#print-format.html'>print-format</a><br/>
<a href='#print-out.html'>print-out</a><br/>
<a href='#print-path.html'>print-path</a><br/>
<a href='#purge-array.html'>purge-array</a><br/>
<a href='#purge-fifo.html'>purge-fifo</a><br/>
<a href='#purge-hash.html'>purge-hash</a><br/>
<a href='#purge-lifo.html'>purge-lifo</a><br/>
<a href='#purge-list.html'>purge-list</a><br/>
<a href='#purge-tree.html'>purge-tree</a><br/>
<a href='#quit-process.html'>quit-process</a><br/>
<a href='#random-crypto.html'>random-crypto</a><br/>
<a href='#random-string.html'>random-string</a><br/>
<a href='#read-array.html'>read-array</a><br/>
<a href='#read-fifo.html'>read-fifo</a><br/>
<a href='#read-file.html'>read-file</a><br/>
<a href='#read-hash.html'>read-hash</a><br/>
<a href='#read-json.html'>read-json</a><br/>
<a href='#read-lifo.html'>read-lifo</a><br/>
<a href='#read-line.html'>read-line</a><br/>
<a href='#read-list.html'>read-list</a><br/>
<a href='#read-message.html'>read-message</a><br/>
<a href='#read-remote.html'>read-remote</a><br/>
<a href='#read-split.html'>read-split</a><br/>
<a href='#read-tree.html'>read-tree</a><br/>
<a href='#read-xml.html'>read-xml</a><br/>
<a href='#rename-file.html'>rename-file</a><br/>
<a href='#replace-string.html'>replace-string</a><br/>
<a href='#report-error.html'>report-error</a><br/>
<a href='#request-body.html'>request-body</a><br/>
<a href='#request.html'>request</a><br/>
<a href='#resize-hash.html'>resize-hash</a><br/>
<a href='#return-handler.html'>return-handler</a><br/>
<a href='#rewind-fifo.html'>rewind-fifo</a><br/>
<a href='#rewind-lifo.html'>rewind-lifo</a><br/>
<a href='#rimcli.html'>rimcli</a><br/>
<a href='#rim.html'>rim</a><br/>
<a href='#rimstone-license.html'>rimstone-license</a><br/>
<a href='#rollback-transaction.html'>rollback-transaction</a><br/>
<a href='#round.html'>round</a><br/>
<a href='#run-query.html'>run-query</a><br/>
<a href='#run-remote.html'>run-remote</a><br/>
<a href='#scan-string.html'>scan-string</a><br/>
<a href='#SELinux.html'>SELinux</a><br/>
<a href='#SEMI.html'>SEMI</a><br/>
<a href='#send-file.html'>send-file</a><br/>
<a href='#Server-API.html'>Server-API</a><br/>
<a href='#service.html'>service</a><br/>
<a href='#set-app.html'>set-app</a><br/>
<a href='#set-bool.html'>set-bool</a><br/>
<a href='#set-cookie.html'>set-cookie</a><br/>
<a href='#set-double.html'>set-double</a><br/>
<a href='#set-number.html'>set-number</a><br/>
<a href='#set-param.html'>set-param</a><br/>
<a href='#set-string.html'>set-string</a><br/>
<a href='#silent-header.html'>silent-header</a><br/>
<a href='#sinh.html'>sinh</a><br/>
<a href='#sin.html'>sin</a><br/>
<a href='#split-string.html'>split-string</a><br/>
<a href='#sqlite-database.html'>sqlite-database</a><br/>
<a href='#sqrt.html'>sqrt</a><br/>
<a href='#start-loop.html'>start-loop</a><br/>
<a href='#statements.html'>statements</a><br/>
<a href='#stat-file.html'>stat-file</a><br/>
<a href='#string-double.html'>string-double</a><br/>
<a href='#string-expressions.html'>string-expressions</a><br/>
<a href='#string-length.html'>string-length</a><br/>
<a href='#string-number.html'>string-number</a><br/>
<a href='#syntax-highlighting.html'>syntax-highlighting</a><br/>
<a href='#tanh.html'>tanh</a><br/>
<a href='#tan.html'>tan</a><br/>
<a href='#temporary-file.html'>temporary-file</a><br/>
<a href='#text-utf.html'>text-utf</a><br/>
<a href='#trim-string.html'>trim-string</a><br/>
<a href='#trunc.html'>trunc</a><br/>
<a href='#uninstall.html'>uninstall</a><br/>
<a href='#uniq-file.html'>uniq-file</a><br/>
<a href='#unlock-file.html'>unlock-file</a><br/>
<a href='#unused-var.html'>unused-var</a><br/>
<a href='#upper-string.html'>upper-string</a><br/>
<a href='#use-cursor.html'>use-cursor</a><br/>
<a href='#utf-text.html'>utf-text</a><br/>
<a href='#variable-scope.html'>variable-scope</a><br/>
<a href='#web-framework-for-C-programming-language.html'>web-framework-for-C-programming-language</a><br/>
<a href='#write-array.html'>write-array</a><br/>
<a href='#write-fifo.html'>write-fifo</a><br/>
<a href='#write-file.html'>write-file</a><br/>
<a href='#write-hash.html'>write-hash</a><br/>
<a href='#write-lifo.html'>write-lifo</a><br/>
<a href='#write-list.html'>write-list</a><br/>
<a href='#write-message.html'>write-message</a><br/>
<a href='#write-string.html'>write-string</a><br/>
<a href='#write-tree.html'>write-tree</a><br/>
<a href='#xml-doc.html'>xml-doc</a><br/>
<a id='123-hello-world.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:left;background-color:white;'><a href='https://rimstone-lang.com' style='border-bottom:0px'><img src='https://rimstone-lang.com/rimstone.png' style='width:180px;height:auto'/></a></div><div class='vhub' style='margin-top:10px;'>123 hello world</div><hr/><div class="vsub"><a id="Step 1: Install RimStone"></a>Step 1: Install RimStone</div>
First, <a href='/index.html'>install RimStone</a>.<br/>
<div class="vsub"><a id="Step 2: Build it"></a>Step 2: Build it</div>
Create Hello World source file (hello.rim) in a new directory; note it's all one bash command:<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_2' class=notranslate>
<span class="Statement">echo</span><span class="Constant"> </span><span class="Statement">'</span><span class="Constant">begin-handler /hello public</span>
<span class="Constant">    @Hello World!</span>
<span class="Constant">end-handler</span><span class="Statement">'</span><span class="Constant"> </span><span class="Statement">&gt;</span> hello.rim</pre>
<span id=rimstone_copied_2 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_2' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_2, code_2, rimstone_copied_2)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Create Hello World application:<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_3' class=notranslate>
rim <span class="Special">-k</span> helloworld</pre>
<span id=rimstone_copied_3 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_3' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_3, code_3, rimstone_copied_3)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Make Hello World application:<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_4' class=notranslate>
rim <span class="Special">-q</span></pre>
<span id=rimstone_copied_4 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_4' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_4, code_4, rimstone_copied_4)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<div class="vsub"><a id="Step 3: Run it"></a>Step 3: Run it</div>
You can run Hello World both as a service and from command line:<br/>
<ul><li>As a service, first start your Hello World application server:<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_5' class=notranslate>
mrim <span class="Special">-w</span> <span class="Constant">3</span> helloworld</pre>
<span id=rimstone_copied_5 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_5' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_5, code_5, rimstone_copied_5)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
then connect to the <a href='/service.html'>service</a>:<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_6' class=notranslate>
rim <span class="Special">-r</span> <span class="Special">--req</span><span class="Statement">=</span><span class="Statement">&quot;</span><span class="Constant">/hello</span><span class="Statement">&quot;</span> <span class="Special">--silent-header</span> <span class="Special">--service</span> <span class="Special">--exec</span></pre>
<span id=rimstone_copied_6 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_6' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_6, code_6, rimstone_copied_6)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
</li><li>Execute as <a href='/command-line.html'>command-line</a> program:<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_7' class=notranslate>
rim <span class="Special">-r</span> <span class="Special">--req</span><span class="Statement">=</span><span class="Statement">&quot;</span><span class="Constant">/hello</span><span class="Statement">&quot;</span> <span class="Special">--silent-header</span> <span class="Special">--exec</span></pre>
<span id=rimstone_copied_7 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_7' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_7, code_7, rimstone_copied_7)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
</li></ul>
<div class="vsub"><a id="Expected result"></a>Expected result</div>
<div class='ncode' style='position:relative;padding-right:16px;'>
<pre id='code_1' class=notranslate>
Hello World!</pre>
<span id=rimstone_copied_1 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_1' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_1, code_1, rimstone_copied_1)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<div class="vsub"><a id="See also"></a>See also</div>
 <a name='Quick start'></a><span style="font-weight:bold;">Quick start</span><br/>
<a href='/123-hello-world.html'>123-hello-world</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='/documentation.html'>documentation</a><br/>
<a id='abd.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:left;background-color:white;'><a href='https://rimstone-lang.com' style='border-bottom:0px'><img src='https://rimstone-lang.com/rimstone.png' style='width:180px;height:auto'/></a></div><div class='vhub' style='margin-top:10px;'>Abd</div><hr/><span style="font-weight:bold;">Purpose</span>: Absolute value of a double.<br/>
<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_8' class=notranslate>
abd( &lt;var&gt; )</pre>
<span id=rimstone_copied_8 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_8' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_8, code_8, rimstone_copied_8)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
abd returns the absolute value of a double. &lt;var&gt; is a number or a double and the result is a double.<br/>
<div class="vsub"><a id="Examples"></a>Examples</div>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_9' class=notranslate>
<span class="Statement">set-double</span> d = abd(-<span class="Constant">1</span>) + <span class="Constant">1</span></pre>
<span id=rimstone_copied_9 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_9' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_9, code_9, rimstone_copied_9)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<div class="vsub"><a id="See also"></a>See also</div>
 <a name='Math functions'></a><span style="font-weight:bold;">Math functions</span><br/>
<a href='/abd.html'>abd</a> &nbsp;<br/>
<a href='/abn.html'>abn</a> &nbsp;<br/>
<a href='/acos.html'>acos</a> &nbsp;<br/>
<a href='/acosh.html'>acosh</a> &nbsp;<br/>
<a href='/asin.html'>asin</a> &nbsp;<br/>
<a href='/asinh.html'>asinh</a> &nbsp;<br/>
<a href='/atan.html'>atan</a> &nbsp;<br/>
<a href='/atan2.html'>atan2</a> &nbsp;<br/>
<a href='/atanh.html'>atanh</a> &nbsp;<br/>
<a href='/cbrt.html'>cbrt</a> &nbsp;<br/>
<a href='/ceil.html'>ceil</a> &nbsp;<br/>
<a href='/copysign.html'>copysign</a> &nbsp;<br/>
<a href='/cos.html'>cos</a> &nbsp;<br/>
<a href='/cosh.html'>cosh</a> &nbsp;<br/>
<a href='/dbl.html'>dbl</a> &nbsp;<br/>
<a href='/erf.html'>erf</a> &nbsp;<br/>
<a href='/erfc.html'>erfc</a> &nbsp;<br/>
<a href='/exp.html'>exp</a> &nbsp;<br/>
<a href='/exp2.html'>exp2</a> &nbsp;<br/>
<a href='/floor.html'>floor</a> &nbsp;<br/>
<a href='/fmod.html'>fmod</a> &nbsp;<br/>
<a href='/hypot.html'>hypot</a> &nbsp;<br/>
<a href='/isinf.html'>isinf</a> &nbsp;<br/>
<a href='/isnan.html'>isnan</a> &nbsp;<br/>
<a href='/ldexp.html'>ldexp</a> &nbsp;<br/>
<a href='/lgamma.html'>lgamma</a> &nbsp;<br/>
<a href='/log.html'>log</a> &nbsp;<br/>
<a href='/log10.html'>log10</a> &nbsp;<br/>
<a href='/log2.html'>log2</a> &nbsp;<br/>
<a href='/math-functions.html'>math-functions</a> &nbsp;<br/>
<a href='/nextafter.html'>nextafter</a> &nbsp;<br/>
<a href='/num.html'>num</a> &nbsp;<br/>
<a href='/pow.html'>pow</a> &nbsp;<br/>
<a href='/round.html'>round</a> &nbsp;<br/>
<a href='/sin.html'>sin</a> &nbsp;<br/>
<a href='/sinh.html'>sinh</a> &nbsp;<br/>
<a href='/sqrt.html'>sqrt</a> &nbsp;<br/>
<a href='/tan.html'>tan</a> &nbsp;<br/>
<a href='/tanh.html'>tanh</a> &nbsp;<br/>
<a href='/trunc.html'>trunc</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='/documentation.html'>documentation</a><br/>
<a id='abn.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:left;background-color:white;'><a href='https://rimstone-lang.com' style='border-bottom:0px'><img src='https://rimstone-lang.com/rimstone.png' style='width:180px;height:auto'/></a></div><div class='vhub' style='margin-top:10px;'>Abn</div><hr/><span style="font-weight:bold;">Purpose</span>: Absolute number function.<br/>
<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_10' class=notranslate>
abn( &lt;number&gt; )</pre>
<span id=rimstone_copied_10 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_10' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_10, code_10, rimstone_copied_10)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
abn returns the absolute value of a &lt;number&gt; as a number.<br/>
<div class="vsub"><a id="Examples"></a>Examples</div>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_11' class=notranslate>
<span class="Statement">set-number</span> n = abn(-<span class="Constant">1</span>) + <span class="Constant">1</span></pre>
<span id=rimstone_copied_11 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_11' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_11, code_11, rimstone_copied_11)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<div class="vsub"><a id="See also"></a>See also</div>
 <a name='Math functions'></a><span style="font-weight:bold;">Math functions</span><br/>
<a href='/abd.html'>abd</a> &nbsp;<br/>
<a href='/abn.html'>abn</a> &nbsp;<br/>
<a href='/acos.html'>acos</a> &nbsp;<br/>
<a href='/acosh.html'>acosh</a> &nbsp;<br/>
<a href='/asin.html'>asin</a> &nbsp;<br/>
<a href='/asinh.html'>asinh</a> &nbsp;<br/>
<a href='/atan.html'>atan</a> &nbsp;<br/>
<a href='/atan2.html'>atan2</a> &nbsp;<br/>
<a href='/atanh.html'>atanh</a> &nbsp;<br/>
<a href='/cbrt.html'>cbrt</a> &nbsp;<br/>
<a href='/ceil.html'>ceil</a> &nbsp;<br/>
<a href='/copysign.html'>copysign</a> &nbsp;<br/>
<a href='/cos.html'>cos</a> &nbsp;<br/>
<a href='/cosh.html'>cosh</a> &nbsp;<br/>
<a href='/dbl.html'>dbl</a> &nbsp;<br/>
<a href='/erf.html'>erf</a> &nbsp;<br/>
<a href='/erfc.html'>erfc</a> &nbsp;<br/>
<a href='/exp.html'>exp</a> &nbsp;<br/>
<a href='/exp2.html'>exp2</a> &nbsp;<br/>
<a href='/floor.html'>floor</a> &nbsp;<br/>
<a href='/fmod.html'>fmod</a> &nbsp;<br/>
<a href='/hypot.html'>hypot</a> &nbsp;<br/>
<a href='/isinf.html'>isinf</a> &nbsp;<br/>
<a href='/isnan.html'>isnan</a> &nbsp;<br/>
<a href='/ldexp.html'>ldexp</a> &nbsp;<br/>
<a href='/lgamma.html'>lgamma</a> &nbsp;<br/>
<a href='/log.html'>log</a> &nbsp;<br/>
<a href='/log10.html'>log10</a> &nbsp;<br/>
<a href='/log2.html'>log2</a> &nbsp;<br/>
<a href='/math-functions.html'>math-functions</a> &nbsp;<br/>
<a href='/nextafter.html'>nextafter</a> &nbsp;<br/>
<a href='/num.html'>num</a> &nbsp;<br/>
<a href='/pow.html'>pow</a> &nbsp;<br/>
<a href='/round.html'>round</a> &nbsp;<br/>
<a href='/sin.html'>sin</a> &nbsp;<br/>
<a href='/sinh.html'>sinh</a> &nbsp;<br/>
<a href='/sqrt.html'>sqrt</a> &nbsp;<br/>
<a href='/tan.html'>tan</a> &nbsp;<br/>
<a href='/tanh.html'>tanh</a> &nbsp;<br/>
<a href='/trunc.html'>trunc</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='/documentation.html'>documentation</a><br/>
<a id='about-rimstone.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:left;background-color:white;'><a href='https://rimstone-lang.com' style='border-bottom:0px'><img src='https://rimstone-lang.com/rimstone.png' style='width:180px;height:auto'/></a></div><div class='vhub' style='margin-top:10px;'>About rimstone</div><hr/><div class="vsub"><a id="What is it"></a>What is it</div>
RimStone is a domain-specific language for back-end web development. It is also a general purpose programming language.<br/>
<br/>
RimStone's main purpose is easy and rapid development and deployment of high-performance applications on Linux. It is a memory-safe programming language and application server, that creates native compiled executables. It is declarative, functional and service oriented.<br/>
<br/>
RimStone is built with industry-standard Free Open Source libraries, extensible with C programming language, and licensed under <a href='/rimstone-license.html'>Apache 2</a> Free Open Source.<br/>
<div class="vsub"><a id="Declarative and functional"></a>Declarative and functional</div>
RimStone is both declarative and functional language. For important tasks that real-world applications are made of, you'd specify (typically in a single line) what you need done, like for instance in SQL, with the exception that RimStone creates native executables for performance. At the same time, RimStone is functional with all the necessary constructs you're used to in most other languages. What's missing is complexity.<br/>
<div class="vsub"><a id="How it works"></a>How it works</div>
All RimStone programs are translated into C programming language, which is considered the <a href='https://www.sciencedirect.com/science/article/pii/S0167642321000022'>fastest and most efficient programming language</a>. RimStone's goal is to be easy to work with and quick to produce the functionality you want, yet also to create C code that would be comparable to that of an experienced C programmer. This synergy can produce the best performance with memory safety along with very simple yet powerful language statements.<br/>
<div class="vsub"><a id="Service oriented"></a>Service oriented</div>
A RimStone program works as a service provider, meaning it handles service <a href='/request.html'>request</a>s by providing a reply. It can be either a <a href='/service.html'>service</a> or a <a href='/command-line.html'>command-line</a> program that processes GET, POST, PUT, PATCH, DELETE or any other HTTP requests. <br/>
<br/>
The URL for a request must state the application name, and a also request name which is the source file handling it. So, "/app-name/my-request" means that application name is "app-name" and that "request_name.rim" file will implement a request handler. A request executes in this order:<br/>
<ul><li>An optional before-handler handler executes (see <a href='/before-handler.html'>before-handler</a>). <br/>
</li><li>RimStone's <a href='/request.html'>request dispatcher</a> executes a <a href='/request.html'>request</a> handler. <br/>
</li><li>An optional after-handler handler executes (see <a href='/after-handler.html'>after-handler</a>).</li></ul>
<div class="vsub"><a id="Running as a service"></a>Running as a service</div>
A RimStone service is served by either<br/>
<ul><li>a fixed number of service processes, or<br/>
</li><li>a dynamic number based on the request load, from 0 to any maximum number specified.</li></ul>Each RimStone service process handles one request at a time, and all such processes work in parallel. This means you do not need to worry about thread-safety with RimStone. Server processes generally stay up across any number of requests, increasing response time. The balance between the number of processes and the memory usage during high request loads can be achieved with adaptive feature of <a href='/mrim.html'>mrim</a>, RimStone's service process manager. <br/>
<br/>
A service can be requested by:<br/>
<ul><li>reverse proxies, such as Apache, Nginx, HAProxy etc.,<br/>
</li><li>programs written in any language using <a href='/Client-API.html'>Client-API</a>,<br/>
</li><li>RimStone's own <a href='/rim.html'>rim</a> utility (see -r option), or <a href='/rimcli.html'>rimcli</a> command-line client.<br/>
</li><li>another RimStone service by means of <a href='/call-remote.html'>call-remote</a> (on secure networks) and <a href='/call-web.html'>call-web</a> (on the web via SSL/TSL secure connections).<br/>
</li><li>standard web utilities like <a href='https://curl.se/'>curl</a>.</li></ul>
With <a href='/call-remote.html'>call-remote</a>, you can execute remote requests in parallel, and get results, error messages and exit status in a single statement. This makes it easy to distribute and parallelize your application logic and/or build application tiers on a local or any number of remote machines, without having to write any multi-threaded code.<br/>
<div class="vsub"><a id="Command-line program"></a>Command-line program</div>
A <a href='/command-line.html'>command-line</a> program handles a single request before it exits. This may be suitable for batch jobs, for use in shell scripts, for testing/mocking, as well as any other situation where it is more useful or convenient to execute a command-line program. Note that a command-line program can double as <a href='/CGI.html'>CGI</a> (Common Gateway Interface) as well.<br/>
<div class="vsub"><a id="Usage"></a>Usage</div>
RimStone services and command-line programs can implement most back-end application layers, including <br/>
<ul><li>presentation (eg. building a web page), <br/>
</li><li>application logic,<br/>
</li><li>data (eg. database) layers, and any others.</li></ul>
<div class="vsub"><a id="Language and safety"></a>Language and safety</div>
RimStone programming language is memory-safe, meaning it will prevent you from accidentally overwriting memory or freeing it when it shouldn't be. RimStone's <a href='/memory-handling.html'>memory-handling</a> is not limited to just memory safety; it also includes automatic freeing of memory at the end of a request, preventing memory leaks which can be fatal to long running processes. Similarly, files open with file-handling statements are automatically closed at the end of each request, serving the same purpose. <br/>
<br/>
RimStone goes a step further from memory safety. It also enforces status checking for statements that may cause serious application logic errors. This is done by checking for negative status outcome at run-time, but only if your code does not check for status, and by stopping the application if it happens. This provides for much safer application run-time because it prevents further execution of the program if such outcome happens, and it also forces the developer to add necessary status checks when needed. This feature is automatic and has an extremely low impact on performance.<br/>
<div class="vsub"><a id="Types"></a>Types</div>
RimStone is a strongly-typed language, with only four primitive types (numbers, doubles, strings and booleans) and a number of structured types (array, message, split-string, hash, tree, tree-cursor, fifo, lifo, list, file and service). RimStone is a declarative language, with a few lines of code implementing large functionalities. RimStone is also very simple, as it's designed to achieve application goals with less coding.<br/>
<br/>
The number type is a signed 64-bit integer (as a decimal, octal or hexadecimal C notation). The double type is a signed double precision 64-bit floating point numeric value. The boolean type evaluates to true (non-zero) or false (zero). The string type evaluates to any sequence of bytes (binary or text) that is always trailed with a null character regardless, which is not counted in string's length. All constants follow C rules of formatting.<br/>
<div class="vsub"><a id="Statements"></a>Statements</div>
RimStone <a href='/statements.html'>statements</a> are designed for safety, ease of use, and ability to write stable code. Most statements typically perform common complex tasks with options to easily customize them; such options are processed at compile-time whenever possible, increasing run-time performance.<br/>
<div class="vsub"><a id="Variables, scope"></a>Variables, scope</div>
A variable is created the first time it's encountered in any given scope, and is never created again in the same or inner scopes, which avoids common bugs involving more than one variable with the same name in related scopes. You can still of course create variables with the same name in unrelated scopes (see <a href='/code-blocks.html'>code-blocks</a>). <br/>
<br/>
Some structured types (hash, tree, list) as well as primitive types (numbers, doubles, strings and booleans) can be created with process-scope, meaning their value persists throughout any requests served by the same process. This is useful for making data-server services that allow keeping and fast querying of data (such as caches or data services).<br/>
<br/>
Numbers and booleans are assigned by value, while strings are assigned by reference (for obvious reason to avoid unnecessary copying).<br/>
<div class="vsub"><a id="Infrastructure"></a>Infrastructure</div>
RimStone includes request-processing and all the necessary infrastructure, such as for process management, files, networking, service protocols, database, string processing etc.<br/>
<div class="vsub"><a id="Performance"></a>Performance</div>
RimStone is a compiled language. RimStone applications are native executables by design, hence no byte-code, interpreters and similar. Since RimStone is declarative, just a few <a href='/statements.html'>statements</a> are needed to implement lots of functionality. These statements are implemented in pure C, and are not slowed down by memory checks as they are safe internally by implementation. Only developer-facing RimStone code needs additional logic to enforce memory safety, and that's a very small part of overall run-time cost. <br/>
<div class="vsub"><a id="Database access"></a>Database access</div>
RimStone provides access to a number of popular databases, such as MariaDB/mySQL, PostgreSQL and SQLite. (see <a href='/database-config-file.html'>database-config-file</a>):<br/>
<ul><li>transactional support (begin, commit, rollback),<br/>
</li><li>protection against SQL injections for safety, <br/>
</li><li>automatic and persistent database connections with unlimited reuse across all SQL queries.<br/>
</li><li>prepared SQL statements.</li></ul>
<div class="vsub"><a id="Proven libraries"></a>Proven libraries</div>
RimStone uses well-known and widely used Free Open Source libraries like cURL, openSSL, crypto, libbacktrace, fastcgi, standard database-connectivity libraries from MariaDB, PostgreSQL, SQLite etc., for compliance, performance and reliability.<br/>
<div class="vsub"><a id="Web framework for C programming language"></a>Web framework for C programming language</div>
In extended mode, RimStone is also a <a href='/web-framework-for-C-programming-language.html'>web-framework-for-C-programming-language</a>.<br/>
<div class="vsub"><a id="Names of objects"></a>Names of objects</div>
Do not use object names (such as variables and request names) that start with "_rim_" or "rim_" (including upper-case variations) as those are reserved by RimStone.<br/>
<div class="vsub"><a id="Contributions"></a>Contributions</div>
See <a href='/contributions.html'>contributions</a> for more information.<br/>
<div class="vsub"><a id="Author"></a>Author</div>
RimStone programming language (or rimstone-lang) is created and written by Serge Miatovich (hello@rimstone-lang.com). <br/>
<div class="vsub"><a id="See also"></a>See also</div>
 <a name='General'></a><span style="font-weight:bold;">General</span><br/>
<a href='/about-rimstone.html'>about-rimstone</a> &nbsp;<br/>
<a href='/devel-versus-release.html'>devel-versus-release</a> &nbsp;<br/>
<a href='/directories.html'>directories</a> &nbsp;<br/>
<a href='/permissions.html'>permissions</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='/documentation.html'>documentation</a><br/>
<a id='abs-double.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:left;background-color:white;'><a href='https://rimstone-lang.com' style='border-bottom:0px'><img src='https://rimstone-lang.com/rimstone.png' style='width:180px;height:auto'/></a></div><div class='vhub' style='margin-top:10px;'>Abs double</div><hr/><span style="font-weight:bold;">Purpose</span>: Get absolute value of a double.<br/>
<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_12' class=notranslate>
<span class="Statement">abs-double</span> &lt;<span class="Type">double</span>&gt;<span class="Type"> to</span> &lt;absolute <span class="Type">double</span>&gt;</pre>
<span id=rimstone_copied_12 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_12' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_12, code_12, rimstone_copied_12)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
abs-double will store absolute value of &lt;double&gt; to &lt;absolute double&gt;. For example, absolute value of -3.4 is 3.4, and absolute value of 3.4 is 3.4.<br/>
<div class="vsub"><a id="Examples"></a>Examples</div>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_13' class=notranslate>
<span class="Statement">set-double</span> my_dbl = -<span class="Constant">10</span><span class="Constant">.5</span>
<span class="Statement">abs-double</span> my_dbl<span class="Type"> to</span> abs_dbl
<span class="Statement">print-out</span> abs_dbl<span class="Identifier"> new-line</span></pre>
<span id=rimstone_copied_13 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_13' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_13, code_13, rimstone_copied_13)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
The result is 10.5.<br/>
<div class="vsub"><a id="See also"></a>See also</div>
 <a name='Doubles'></a><span style="font-weight:bold;">Doubles</span><br/>
<a href='/abs-double.html'>abs-double</a> &nbsp;<br/>
<a href='/double-expressions.html'>double-expressions</a> &nbsp;<br/>
<a href='/double-string.html'>double-string</a> &nbsp;<br/>
<a href='/mixing-doubles-and-numbers.html'>mixing-doubles-and-numbers</a> &nbsp;<br/>
<a href='/set-double.html'>set-double</a> &nbsp;<br/>
<a href='/string-double.html'>string-double</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='/documentation.html'>documentation</a><br/>
<a id='abs-number.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:left;background-color:white;'><a href='https://rimstone-lang.com' style='border-bottom:0px'><img src='https://rimstone-lang.com/rimstone.png' style='width:180px;height:auto'/></a></div><div class='vhub' style='margin-top:10px;'>Abs number</div><hr/><span style="font-weight:bold;">Purpose</span>: Get absolute value of a number.<br/>
<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_14' class=notranslate>
<span class="Statement">abs-number</span> &lt;number&gt;<span class="Type"> to</span> &lt;absolute number&gt;</pre>
<span id=rimstone_copied_14 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_14' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_14, code_14, rimstone_copied_14)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
abs-number will store absolute value of &lt;number&gt; to &lt;absolute number&gt;. For example, absolute value of -3 is 3, and absolute value of 3 is 3.<br/>
<div class="vsub"><a id="Examples"></a>Examples</div>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_15' class=notranslate>
<span class="Statement">set-number</span> my_num = -<span class="Constant">10</span>
<span class="Statement">abs-number</span> my_num<span class="Type"> to</span> abs_num
<span class="Statement">print-out</span> abs_num<span class="Identifier"> new-line</span></pre>
<span id=rimstone_copied_15 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_15' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_15, code_15, rimstone_copied_15)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
The result is 10.<br/>
<div class="vsub"><a id="See also"></a>See also</div>
 <a name='Numbers'></a><span style="font-weight:bold;">Numbers</span><br/>
<a href='/abs-number.html'>abs-number</a> &nbsp;<br/>
<a href='/mixing-doubles-and-numbers.html'>mixing-doubles-and-numbers</a> &nbsp;<br/>
<a href='/number-expressions.html'>number-expressions</a> &nbsp;<br/>
<a href='/number-string.html'>number-string</a> &nbsp;<br/>
<a href='/set-number.html'>set-number</a> &nbsp;<br/>
<a href='/string-number.html'>string-number</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='/documentation.html'>documentation</a><br/>
<a id='acosh.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:left;background-color:white;'><a href='https://rimstone-lang.com' style='border-bottom:0px'><img src='https://rimstone-lang.com/rimstone.png' style='width:180px;height:auto'/></a></div><div class='vhub' style='margin-top:10px;'>Acosh</div><hr/><span style="font-weight:bold;">Purpose</span>: Arc hyperbolic cosine function.<br/>
<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_18' class=notranslate>
acosh( &lt;var&gt; )</pre>
<span id=rimstone_copied_18 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_18' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_18, code_18, rimstone_copied_18)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
acosh returns arc hyperbolic cosine of &lt;var&gt;, such that result's hyperbolic cosine is &lt;var&gt; (see <a href='/cosh.html'>cosh</a>). &lt;var&gt; is a number or a double and the result is a double.<br/>
<div class="vsub"><a id="Examples"></a>Examples</div>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_19' class=notranslate>
<span class="Statement">set-double</span> d = acos(<span class="Constant">1</span>) + <span class="Constant">1</span></pre>
<span id=rimstone_copied_19 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_19' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_19, code_19, rimstone_copied_19)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<div class="vsub"><a id="See also"></a>See also</div>
 <a name='Math functions'></a><span style="font-weight:bold;">Math functions</span><br/>
<a href='/abd.html'>abd</a> &nbsp;<br/>
<a href='/abn.html'>abn</a> &nbsp;<br/>
<a href='/acos.html'>acos</a> &nbsp;<br/>
<a href='/acosh.html'>acosh</a> &nbsp;<br/>
<a href='/asin.html'>asin</a> &nbsp;<br/>
<a href='/asinh.html'>asinh</a> &nbsp;<br/>
<a href='/atan.html'>atan</a> &nbsp;<br/>
<a href='/atan2.html'>atan2</a> &nbsp;<br/>
<a href='/atanh.html'>atanh</a> &nbsp;<br/>
<a href='/cbrt.html'>cbrt</a> &nbsp;<br/>
<a href='/ceil.html'>ceil</a> &nbsp;<br/>
<a href='/copysign.html'>copysign</a> &nbsp;<br/>
<a href='/cos.html'>cos</a> &nbsp;<br/>
<a href='/cosh.html'>cosh</a> &nbsp;<br/>
<a href='/dbl.html'>dbl</a> &nbsp;<br/>
<a href='/erf.html'>erf</a> &nbsp;<br/>
<a href='/erfc.html'>erfc</a> &nbsp;<br/>
<a href='/exp.html'>exp</a> &nbsp;<br/>
<a href='/exp2.html'>exp2</a> &nbsp;<br/>
<a href='/floor.html'>floor</a> &nbsp;<br/>
<a href='/fmod.html'>fmod</a> &nbsp;<br/>
<a href='/hypot.html'>hypot</a> &nbsp;<br/>
<a href='/isinf.html'>isinf</a> &nbsp;<br/>
<a href='/isnan.html'>isnan</a> &nbsp;<br/>
<a href='/ldexp.html'>ldexp</a> &nbsp;<br/>
<a href='/lgamma.html'>lgamma</a> &nbsp;<br/>
<a href='/log.html'>log</a> &nbsp;<br/>
<a href='/log10.html'>log10</a> &nbsp;<br/>
<a href='/log2.html'>log2</a> &nbsp;<br/>
<a href='/math-functions.html'>math-functions</a> &nbsp;<br/>
<a href='/nextafter.html'>nextafter</a> &nbsp;<br/>
<a href='/num.html'>num</a> &nbsp;<br/>
<a href='/pow.html'>pow</a> &nbsp;<br/>
<a href='/round.html'>round</a> &nbsp;<br/>
<a href='/sin.html'>sin</a> &nbsp;<br/>
<a href='/sinh.html'>sinh</a> &nbsp;<br/>
<a href='/sqrt.html'>sqrt</a> &nbsp;<br/>
<a href='/tan.html'>tan</a> &nbsp;<br/>
<a href='/tanh.html'>tanh</a> &nbsp;<br/>
<a href='/trunc.html'>trunc</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='/documentation.html'>documentation</a><br/>
<a id='acos.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:left;background-color:white;'><a href='https://rimstone-lang.com' style='border-bottom:0px'><img src='https://rimstone-lang.com/rimstone.png' style='width:180px;height:auto'/></a></div><div class='vhub' style='margin-top:10px;'>Acos</div><hr/><span style="font-weight:bold;">Purpose</span>: Arc cosine function.<br/>
<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_16' class=notranslate>
acos( &lt;var&gt; )</pre>
<span id=rimstone_copied_16 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_16' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_16, code_16, rimstone_copied_16)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
acos returns arc cosine of &lt;var&gt;, such that result's cosine is &lt;var&gt; (see <a href='/cos.html'>cos</a>). &lt;var&gt; is a number or a double and the result is a double.<br/>
<div class="vsub"><a id="Examples"></a>Examples</div>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_17' class=notranslate>
<span class="Statement">set-double</span> d = acos(<span class="Constant">1</span>) + <span class="Constant">1</span></pre>
<span id=rimstone_copied_17 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_17' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_17, code_17, rimstone_copied_17)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<div class="vsub"><a id="See also"></a>See also</div>
 <a name='Math functions'></a><span style="font-weight:bold;">Math functions</span><br/>
<a href='/abd.html'>abd</a> &nbsp;<br/>
<a href='/abn.html'>abn</a> &nbsp;<br/>
<a href='/acos.html'>acos</a> &nbsp;<br/>
<a href='/acosh.html'>acosh</a> &nbsp;<br/>
<a href='/asin.html'>asin</a> &nbsp;<br/>
<a href='/asinh.html'>asinh</a> &nbsp;<br/>
<a href='/atan.html'>atan</a> &nbsp;<br/>
<a href='/atan2.html'>atan2</a> &nbsp;<br/>
<a href='/atanh.html'>atanh</a> &nbsp;<br/>
<a href='/cbrt.html'>cbrt</a> &nbsp;<br/>
<a href='/ceil.html'>ceil</a> &nbsp;<br/>
<a href='/copysign.html'>copysign</a> &nbsp;<br/>
<a href='/cos.html'>cos</a> &nbsp;<br/>
<a href='/cosh.html'>cosh</a> &nbsp;<br/>
<a href='/dbl.html'>dbl</a> &nbsp;<br/>
<a href='/erf.html'>erf</a> &nbsp;<br/>
<a href='/erfc.html'>erfc</a> &nbsp;<br/>
<a href='/exp.html'>exp</a> &nbsp;<br/>
<a href='/exp2.html'>exp2</a> &nbsp;<br/>
<a href='/floor.html'>floor</a> &nbsp;<br/>
<a href='/fmod.html'>fmod</a> &nbsp;<br/>
<a href='/hypot.html'>hypot</a> &nbsp;<br/>
<a href='/isinf.html'>isinf</a> &nbsp;<br/>
<a href='/isnan.html'>isnan</a> &nbsp;<br/>
<a href='/ldexp.html'>ldexp</a> &nbsp;<br/>
<a href='/lgamma.html'>lgamma</a> &nbsp;<br/>
<a href='/log.html'>log</a> &nbsp;<br/>
<a href='/log10.html'>log10</a> &nbsp;<br/>
<a href='/log2.html'>log2</a> &nbsp;<br/>
<a href='/math-functions.html'>math-functions</a> &nbsp;<br/>
<a href='/nextafter.html'>nextafter</a> &nbsp;<br/>
<a href='/num.html'>num</a> &nbsp;<br/>
<a href='/pow.html'>pow</a> &nbsp;<br/>
<a href='/round.html'>round</a> &nbsp;<br/>
<a href='/sin.html'>sin</a> &nbsp;<br/>
<a href='/sinh.html'>sinh</a> &nbsp;<br/>
<a href='/sqrt.html'>sqrt</a> &nbsp;<br/>
<a href='/tan.html'>tan</a> &nbsp;<br/>
<a href='/tanh.html'>tanh</a> &nbsp;<br/>
<a href='/trunc.html'>trunc</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='/documentation.html'>documentation</a><br/>
<a id='after-handler.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:left;background-color:white;'><a href='https://rimstone-lang.com' style='border-bottom:0px'><img src='https://rimstone-lang.com/rimstone.png' style='width:180px;height:auto'/></a></div><div class='vhub' style='margin-top:10px;'>After handler</div><hr/><span style="font-weight:bold;">Purpose</span>: Execute your code after a request is handled.<br/>
<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_20' class=notranslate>
<span class="Statement">after-handler</span>
<span class="Statement">.</span>..
<span class="Statement">end-after-handler</span></pre>
<span id=rimstone_copied_20 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_20' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_20, code_20, rimstone_copied_20)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Every RimStone request goes through a request dispatcher (see <a href='/request.html'>request</a>()). In order to specify your code to execute after a request is handled, create source file "after-handler.rim" and implement a handler that starts with "after-handler" and ends with "end-after-handler", which will be automatically picked up and compiled with your application. <br/>
<br/>
If no request executes (for example if your application does not handle a given <a href='/request.html'>request</a>), after-handler handler does not execute either. If you use <a href='/exit-handler.html'>exit-handler</a> to exit current request handling, after-handler handler still executes.<br/>
<div class="vsub"><a id="Examples"></a>Examples</div>
Here is a simple implementation of after-handler handler that just outputs "Hi there!!":<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_21' class=notranslate>
<span class="Statement">after-handler</span>
<span class="Statement">     @</span>Hi there!!
<span class="Statement">end-after-handler</span></pre>
<span id=rimstone_copied_21 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_21' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_21, code_21, rimstone_copied_21)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<div class="vsub"><a id="See also"></a>See also</div>
 <a name='Service processing'></a><span style="font-weight:bold;">Service processing</span><br/>
<a href='/after-handler.html'>after-handler</a> &nbsp;<br/>
<a href='/before-handler.html'>before-handler</a> &nbsp;<br/>
<a href='/begin-handler.html'>begin-handler</a> &nbsp;<br/>
<a href='/call-handler.html'>call-handler</a> &nbsp;<br/>
<a href='/input-output-parameters.html'>input-output-parameters</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='/documentation.html'>documentation</a><br/>
<a id='application-setup.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:left;background-color:white;'><a href='https://rimstone-lang.com' style='border-bottom:0px'><img src='https://rimstone-lang.com/rimstone.png' style='width:180px;height:auto'/></a></div><div class='vhub' style='margin-top:10px;'>Application setup</div><hr/><div class="vsub"><a id="Initialize application"></a>Initialize application</div>
A RimStone application must be initialized first. This means creating a directory structure owned by application owner, which can be any Operating System user. To initialize application &lt;app name&gt; while logged-in as application owner: <br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_24' class=notranslate>
rim <span class="Special">-k</span> <span class="Statement">&lt;</span>app name<span class="Statement">&gt;</span></pre>
<span id=rimstone_copied_24 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_24' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_24, code_24, rimstone_copied_24)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<div class="vsub"><a id="Setup database(s)"></a>Setup database(s)</div>
If your application does not use database(s), you can skip this part.<br/>
<br/>
You can setup your database(s) in any way you see fit, and this includes creating the database objects (such as tables or indexes) used by your application; all RimStone needs to know is the connection parameters, which include database login information (but can include other things as well). For each database in use, you must provide a <a href='/database-config-file.html'>database-config-file</a> in the same directory as your RimStone source code. This file contains the database connection parameters - these parameters are database-specific. For example, if your code has statements like:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_23' class=notranslate>
<span class="Statement">run-query</span> @mydb = ...

<span class="Comment">//or</span>

<span class="Statement">begin-transaction</span> @sales_db</pre>
<span id=rimstone_copied_23 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_23' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_23, code_23, rimstone_copied_23)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
then you must have files "mydb" and "sales_db" present. For example, MariaDB config file might look like:<br/>
<div class='ncode' style='position:relative;padding-right:16px;'>
<pre id='code_22' class=notranslate>
[client]
user=myuser
password=pwd
database=mydb
protocol=TCP
host=127.0.0.1
port=3306</pre>
<span id=rimstone_copied_22 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_22' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_22, code_22, rimstone_copied_22)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
or for PostgreSQL:<br/>
<div class='ncode' style='position:relative;padding-right:16px;'>
<pre id='code_25' class=notranslate>
user=myuser password=mypwd dbname=mydb</pre>
<span id=rimstone_copied_25 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_25' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_25, code_25, rimstone_copied_25)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<div class="vsub"><a id="Make application"></a>Make application</div>
To compile and link the application that doesn't use database(s):<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_26' class=notranslate>
rim <span class="Special">-q</span></pre>
<span id=rimstone_copied_26 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_26' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_26, code_26, rimstone_copied_26)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
When you have database(s) in use, for instance assuming in above example that "mydb" is MariaDB database, "sales_db" is PostgreSQL, and "contacts" is SQLite database:<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_27' class=notranslate>
rim <span class="Special">-q</span> <span class="Special">--db</span><span class="Statement">=</span><span class="Statement">&quot;</span><span class="Constant">mariadb:mydb postgres:sales_db sqlite:contacts</span><span class="Statement">&quot;</span></pre>
<span id=rimstone_copied_27 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_27' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_27, code_27, rimstone_copied_27)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
See <a href='/rim.html'>rim</a> for more options.<br/>
<div class="vsub"><a id="Start application"></a>Start application</div>
Stop the application first in case it was running, then start the application - for example:<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_28' class=notranslate>
mrim <span class="Special">-m</span> quit <span class="Statement">&lt;</span>app name<span class="Statement">&gt;</span>
mrim <span class="Special">-w</span> <span class="Constant">3</span> <span class="Statement">&lt;</span>app name<span class="Statement">&gt;</span></pre>
<span id=rimstone_copied_28 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_28' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_28, code_28, rimstone_copied_28)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
See <a href='/mrim.html'>mrim</a> for more details.<br/>
<div class="vsub"><a id="Running application"></a>Running application</div>
You can run your application as <a href='/service.html'>service</a>, <a href='/CGI.html'>CGI</a> or <a href='/command-line.html'>command-line</a>.<br/>
<div class="vsub"><a id="See also"></a>See also</div>
 <a name='Running application'></a><span style="font-weight:bold;">Running application</span><br/>
<a href='/application-setup.html'>application-setup</a> &nbsp;<br/>
<a href='/CGI.html'>CGI</a> &nbsp;<br/>
<a href='/command-line.html'>command-line</a> &nbsp;<br/>
<a href='/service.html'>service</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='/documentation.html'>documentation</a><br/>
<a id='article-capi.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:left;background-color:white;'><a href='https://rimstone-lang.com' style='border-bottom:0px'><img src='https://rimstone-lang.com/rimstone.png' style='width:180px;height:auto'/></a></div><div class='vhub' style='margin-top:10px;'>Use C language API to talk to RimStone Server</div><hr/><br/>
RimStone application server can be accessed via C API. Most programming languages allow for C linkage, so this makes it easy to talk to RimStone server from anywhere. The <a href='/Client-API.html'>Client-API</a> is very simple with just a few functions and a single data type. It's also MT-safe (i.e. safe for multi-threaded applications).<br/>
<br/>
In this example, a RimStone server will use a tree object to store key/value pairs, which can be added, queried and deleted for as long as the server is running (i.e. it's an in-memory database, or a cache server). Client will insert the key/value pairs, query and delete them.<br/>
<div class="vsub"><a id="Create a server and start it"></a>Create a server and start it</div>
To get started, create a directory for this example and position in it:<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_31' class=notranslate>
<span class="Statement">mkdir</span> <span class="Special">-p</span> c-api
<span class="Statement">cd</span> c-api</pre>
<span id=rimstone_copied_31 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_31' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_31, code_31, rimstone_copied_31)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Create file "srv.rim":<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_30' class=notranslate>
cat &lt;&lt; '<span class="Constant">EOF</span>' &gt; srv.rim
<span class="Statement">begin-handler</span> /srv<span class="Identifier"> public</span>
<span class="Statement">    silent-header</span>
<span class="Statement">    do-once</span>
<span class="Statement">        new-tree</span> ind<span class="Identifier"> process-scope</span>
<span class="Statement">    end-do-once</span>
<span class="Statement">    get-param</span> op
<span class="Statement">    get-param</span> key<span class="Identifier"> default-value</span> <span class="Constant">&quot;&quot;</span>
<span class="Statement">    get-param</span> data<span class="Identifier"> default-value</span> <span class="Constant">&quot;&quot;</span>
<span class="Statement">    if-true</span> op<span class="Identifier"> equal</span> <span class="Constant">&quot;add&quot;</span>
<span class="Statement">        write-tree</span> ind<span class="Identifier"> key</span> (key)<span class="Identifier"> value</span> data<span class="Type"> status</span> st
<span class="Statement">        if-true</span> st<span class="Identifier"> equal</span> RIM_ERR_EXIST
<span class="Statement">            @</span>Key exists [<span class="Statement">&lt;&lt;print-out</span> key<span class="Statement">&gt;&gt;</span>]
<span class="Statement">        else-if</span>
<span class="Statement">            @</span>Added [<span class="Statement">&lt;&lt;print-out</span> key<span class="Statement">&gt;&gt;</span>]
<span class="Statement">        end-if</span>
<span class="Statement">    else-if</span> op<span class="Identifier"> equal</span> <span class="Constant">&quot;delete&quot;</span>
<span class="Statement">        delete-tree</span> ind<span class="Identifier"> key</span> (key)<span class="Type"> value</span> val<span class="Type"> status</span> st
<span class="Statement">        if-true</span> st<span class="Identifier"> equal</span> RIM_ERR_EXIST
<span class="Statement">            @</span>Not found [<span class="Statement">&lt;&lt;print-out</span> key<span class="Statement">&gt;&gt;</span>]
<span class="Statement">        else-if</span>
<span class="Statement">            @</span>Deleted, old value was [<span class="Statement">&lt;&lt;print-out</span> val<span class="Statement">&gt;&gt;</span>]
<span class="Statement">        end-if</span>
<span class="Statement">    else-if</span> op<span class="Identifier"> equal</span> <span class="Constant">&quot;query&quot;</span>
<span class="Statement">        read-tree</span> ind<span class="Identifier"> equal</span> (key)<span class="Type"> value</span> val<span class="Type"> status</span> st
<span class="Statement">        if-true</span> st<span class="Identifier"> equal</span> RIM_ERR_EXIST
<span class="Statement">            @</span>Not found, queried [<span class="Statement">&lt;&lt;print-out</span> key<span class="Statement">&gt;&gt;</span>]
<span class="Statement">        else-if</span>
<span class="Statement">            @</span>Value [<span class="Statement">&lt;&lt;print-out</span> val<span class="Statement">&gt;&gt;</span>]
<span class="Statement">        end-if</span>
<span class="Statement">    end-if</span>
<span class="Statement">end-handler</span>
<span class="Constant">EOF</span></pre>
<span id=rimstone_copied_30 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_30' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_30, code_30, rimstone_copied_30)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Create "index" application ("-k"):<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_33' class=notranslate>
rim <span class="Special">-k</span> index</pre>
<span id=rimstone_copied_33 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_33' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_33, code_33, rimstone_copied_33)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Compile the server - this also demonstrates excluding directories from compilation (since RimStone will by default try to compile the RimStone and C code in all subdirectories). In this case, we're excluding subdirectory "client", which we will create in just a sec and place a C client program in it:<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_34' class=notranslate>
rim <span class="Special">-q</span> <span class="Special">--exclude-dir</span><span class="Statement">=</span>client</pre>
<span id=rimstone_copied_34 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_34' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_34, code_34, rimstone_copied_34)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Start the server, with a single server process running:<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_35' class=notranslate>
mrim <span class="Special">-w</span> <span class="Constant">1</span> index</pre>
<span id=rimstone_copied_35 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_35' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_35, code_35, rimstone_copied_35)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<div class="vsub"><a id="Create a client in C"></a>Create a client in C</div>
Create directory for a C API client, and switch to it:<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_36' class=notranslate>
<span class="Statement">mkdir</span> client
<span class="Statement">cd</span> client</pre>
<span id=rimstone_copied_36 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_36' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_36, code_36, rimstone_copied_36)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Next is the C code for your client. It simply inserts key/value pair, queries it, and then deletes it. Nice little program as a way of demonstration. Create file "cli.c" with this:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_32' class=notranslate>
cat &lt;&lt; '<span class="Constant">EOF</span>' &gt; cli.c
<span class="PreProc">#include </span><span class="Constant">&quot;rcli.h&quot;</span>

<span class="Type">int</span> rim_client (rim_cli *req, <span class="Type">char</span> *connection, <span class="Type">char</span> *method, <span class="Type">char</span> *app_path, <span class="Type">char</span> *request, <span class="Type">char</span> *url_params);

<span class="Comment">// Send request to RimStone server and receive reply</span>
<span class="Type">int</span> rim_client (rim_cli *req, <span class="Type">char</span> *connection, <span class="Type">char</span> *method, <span class="Type">char</span> *app_path, <span class="Type">char</span> *request, <span class="Type">char</span> *url_params)
<span class="Statement">{</span>
    memset ((<span class="Type">char</span>*)req, <span class="Constant">0</span>, <span class="Statement">sizeof</span>(rim_cli));
    req-&gt;server = connection;
    req-&gt;req_method = method;
    req-&gt;app_path = app_path;
    req-&gt;req = request;
    req-&gt;url_params = url_params;
    <span class="Statement">return</span> rim_cli_request (req);
<span class="Statement">}</span>

<span class="Type">void</span> main ()
<span class="Statement">{</span>
    <span class="Type">int</span> res;
    <span class="Type">char</span> *urlreq, *data;
    rim_cli req;

    <span class="Type">char</span> dir[RIM_MAX_OS_UDIR_LEN];
    rim_dir (RIM_DIR_SOCKFILE, dir, <span class="Statement">sizeof</span>(dir), <span class="Constant">&quot;index&quot;</span>, <span class="Constant">NULL</span>); <span class="Comment">// socket for application</span>
                                                               <span class="Comment">//</span>
    urlreq = <span class="Constant">&quot;/op=add/key=some_key/data=some_data&quot;</span>; <span class="Comment">// Add data</span>
    res = rim_client (&amp;req, dir, <span class="Constant">&quot;GET&quot;</span>, <span class="Constant">&quot;/index&quot;</span>, <span class="Constant">&quot;/srv&quot;</span>, urlreq);
    <span class="Statement">if</span> (res != RIM_OKAY) printf(<span class="Constant">&quot;Request failed [</span><span class="Special">%d</span><span class="Constant">] [</span><span class="Special">%s</span><span class="Constant">]</span><span class="Special">\n</span><span class="Constant">&quot;</span>, res, req.errm); <span class="Statement">else</span> printf(<span class="Constant">&quot;</span><span class="Special">%s</span><span class="Constant">&quot;</span>, rim_cli_data(&amp;req));
    rim_cli_delete(&amp;req);

    urlreq = <span class="Constant">&quot;/op=query/key=some_key&quot;</span>; <span class="Comment">// Query data</span>
    res = rim_client (&amp;req, dir, <span class="Constant">&quot;GET&quot;</span>, <span class="Constant">&quot;/index&quot;</span>, <span class="Constant">&quot;/srv&quot;</span>, urlreq);
    <span class="Statement">if</span> (res != RIM_OKAY) printf(<span class="Constant">&quot;Request failed [</span><span class="Special">%d</span><span class="Constant">] [</span><span class="Special">%s</span><span class="Constant">]</span><span class="Special">\n</span><span class="Constant">&quot;</span>, res, req.errm); <span class="Statement">else</span> printf(<span class="Constant">&quot;</span><span class="Special">%s</span><span class="Constant">&quot;</span>,<span class="Identifier"> data</span> = rim_cli_data(&amp;req));
    rim_cli_delete(&amp;req);

    urlreq = <span class="Constant">&quot;/op=delete/key=some_key&quot;</span>; <span class="Comment">// Delete data</span>
    res = rim_client (&amp;req, dir, <span class="Constant">&quot;GET&quot;</span>, <span class="Constant">&quot;/index&quot;</span>, <span class="Constant">&quot;/srv&quot;</span>, urlreq);
    <span class="Statement">if</span> (res != RIM_OKAY) printf(<span class="Constant">&quot;Request failed [</span><span class="Special">%d</span><span class="Constant">] [</span><span class="Special">%s</span><span class="Constant">]</span><span class="Special">\n</span><span class="Constant">&quot;</span>, res, req.errm); <span class="Statement">else</span> printf(<span class="Constant">&quot;</span><span class="Special">%s</span><span class="Constant">&quot;</span>, data=rim_cli_data(&amp;req));
    rim_cli_delete(&amp;req);
<span class="Statement">}</span>
<span class="Constant">EOF</span></pre>
<span id=rimstone_copied_32 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_32' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_32, code_32, rimstone_copied_32)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Compile C program:<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_37' class=notranslate>
gcc <span class="Special">-o</span> cli cli.c <span class="PreProc">$(</span><span class="Special">rim </span><span class="Special">-i</span><span class="PreProc">)</span></pre>
<span id=rimstone_copied_37 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_37' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_37, code_37, rimstone_copied_37)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<div class="vsub"><a id="Run your C client"></a>Run your C client</div>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_38' class=notranslate>
./cli</pre>
<span id=rimstone_copied_38 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_38' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_38, code_38, rimstone_copied_38)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
The result is:<br/>
<div class='ncode' style='position:relative;padding-right:16px;'>
<pre id='code_29' class=notranslate>
Added [some_key]
Value [some_data]
Deleted, old value was [some_data]</pre>
<span id=rimstone_copied_29 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_29' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_29, code_29, rimstone_copied_29)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<a id='article-cookies.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:left;background-color:white;'><a href='https://rimstone-lang.com' style='border-bottom:0px'><img src='https://rimstone-lang.com/rimstone.png' style='width:180px;height:auto'/></a></div><div class='vhub' style='margin-top:10px;'>Cookies in RimStone applications, plus HAProxy</div><hr/><br/>
Cookies are used in web development to remember the state of your application on a client device. This way, your end-user on this client device doesn't have to provide the same (presumably fairly constant) information all the time. A "client device" can be just a plain web browser, or it can be anything else, such as any internet connected device.<br/>
<br/>
In practicality, cookies are used to remember user name, session state, preferences and any other information that a web application wishes to keep on a client device. <br/>
<br/>
So cookies are quite important for any web application or service. In this example, we'll set a single cookie (name of the user), and then we will retrieve it later. Very simple, but it's the foundation of what you'd need to do in pretty much any application.<br/>
<br/>
First, in a separate directory, create an application "yum" (as in cookies are delicious):<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_41' class=notranslate>
<span class="Statement">mkdir</span> cookies
<span class="Statement">cd</span> cookies
rim <span class="Special">-k</span> yum</pre>
<span id=rimstone_copied_41 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_41' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_41, code_41, rimstone_copied_41)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Next, create this source code file "biscuit.rim" (for everyone outside the US who feels it should have been "biscuit" instead of "cookie"):<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_40' class=notranslate>
cat &lt;&lt; '<span class="Constant">EOF</span>' &gt; biscuit.rim
<span class="Statement">begin-handler</span> /biscuit
<span class="Statement">    get-param</span> action

<span class="Statement">    if-true</span> action<span class="Identifier"> equal</span> <span class="Constant">&quot;enter-cookie&quot;</span>
        <span class="Comment">// Display a form to get cookie value</span>
<span class="Statement">        @</span>&lt;h2&gt;Enter your name&lt;/h2&gt;
<span class="Statement">        @</span>&lt;form action=&quot;<span class="Statement">&lt;&lt;print-path</span> <span class="Constant">&quot;/biscuit&quot;</span><span class="Statement">&gt;&gt;</span>&quot; method=&quot;POST&quot;&gt;
<span class="Statement">        @</span>    &lt;input type=&quot;hidden&quot; name=&quot;action&quot; value=&quot;save-cookie&quot;&gt;
<span class="Statement">        @</span>    &lt;label for=&quot;cookie-value&quot;&gt;Your name:&lt;/label&gt;&lt;br/&gt;
<span class="Statement">        @</span>    &lt;input type=&quot;text&quot; name=&quot;cookie-value&quot; value=&quot;&quot;&gt;&lt;br/&gt;
<span class="Statement">        @</span>    &lt;br/&gt;
<span class="Statement">        @</span>    &lt;input type=&quot;submit&quot; value=&quot;Submit&quot;&gt;
<span class="Statement">        @</span>&lt;/form&gt;

<span class="Statement">    else-if</span> action<span class="Identifier"> equal</span> <span class="Constant">&quot;save-cookie&quot;</span>
        <span class="Comment">// Submittal of form: save the cookie through response to the browser</span>
<span class="Statement">        get-param</span> cookie_value
<span class="Statement">        get-time</span><span class="Type"> to</span> cookie_expiration<span class="Identifier"> year</span> <span class="Constant">1</span><span class="Identifier"> timezone</span> <span class="Constant">&quot;GMT&quot;</span>
<span class="Statement">        set-cookie</span> <span class="Constant">&quot;customer-name&quot;</span> = cookie_value <span class="Identifier"> expires</span> cookie_expiration <span class="Identifier"> path</span> <span class="Constant">&quot;/&quot;</span>
<span class="Statement">        @</span>Cookie sent to browser!
<span class="Statement">        @</span>&lt;hr/&gt;

<span class="Statement">    else-if</span> action<span class="Identifier"> equal</span> <span class="Constant">&quot;query-cookie&quot;</span>
        <span class="Comment">// Web request that delivers cookie value back here (to server); display it.</span>
<span class="Statement">        get-cookie</span> name=<span class="Constant">&quot;customer-name&quot;</span>
<span class="Statement">        @</span>Customer name is <span class="Statement">&lt;&lt;print-out</span> name<span class="Statement"> web-encode&gt;&gt;</span>
<span class="Statement">        @</span>&lt;hr/&gt;

<span class="Statement">    else-if</span>
<span class="Statement">        @</span>Unrecognized action&lt;hr/&gt;
<span class="Statement">    end-if</span>
<span class="Statement">end-handler</span>
<span class="Constant">EOF</span></pre>
<span id=rimstone_copied_40 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_40' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_40, code_40, rimstone_copied_40)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
The code is pretty easy: if "action" URL parameter is "enter-cookie", you can enter your name. Then, when you submit this web form (passing back "action" parameter with value "save-cookie"), the cookie named "customer-name" is saved with the value you entered, and the cookie expiration is set 1 year into the future. Then you'll query the cookie value in another request ("query-cookie" as "action" parameter), and you'll get your name back because it was saved on the client.<br/>
<br/>
Okay, so compile the application (with all request handlers public):<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_43' class=notranslate>
rim <span class="Special">-q</span> <span class="Special">--public</span></pre>
<span id=rimstone_copied_43 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_43' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_43, code_43, rimstone_copied_43)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Now, start the RimStone server to serve up your yummy application:<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_44' class=notranslate>
mrim <span class="Special">-p</span> <span class="Constant">3000</span> yum</pre>
<span id=rimstone_copied_44 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_44' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_44, code_44, rimstone_copied_44)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
"-p 3000" means it will run on socket port 3000, and the reason for that will become apparent momentarily.<br/>
<br/>
We'll use HAProxy as a web server in this instance to demostrate that you can use RimStone with pretty much any web server or load balancer. To set it up, here is the simple config file (typically in "/etc/haproxy/haproxy.cfg"). Note that "frontend", "fcgi-app" and "backend" sections are relevant to us here; the rest can be as it is by default in whatever configuration file you have (substitute "your-user" for your OS user name):<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_45' class=notranslate>
frontend front_server
    mode http
    bind *:<span class="Constant">90</span>
    use_backend backend_servers <span class="Statement">if </span><span class="Special">{</span> path_reg <span class="Special">-i</span> ^.*<span class="Special">\/</span>yum<span class="Special">\/</span>.*$ <span class="Special">}</span>
    option forwardfor


fcgi-app rim-fcgi
    log-stderr global
    docroot /home/your-user/.rimstone/apps/yum/app
    path-info ^.+<span class="PreProc">(</span>/yum<span class="PreProc">)(</span>/.+<span class="PreProc">)</span>$

backend backend_servers
    mode http
    filter fcgi-app rim-fcgi
    use-fcgi-app rim-fcgi
    server s1 <span class="Constant">127</span>.<span class="Constant">0</span>.<span class="Constant">0</span>.<span class="Constant">1</span>:<span class="Constant">3000</span> proto fcgi</pre>
<span id=rimstone_copied_45 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_45' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_45, code_45, rimstone_copied_45)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
So, the HAProxy server will respond on port 90 from the web. We specify that it will redirect any URL starting with "/yum/" to your RimStone application. Obviously, if you change your application name from "yum" to something else, change "yum" here too. Then we specify we'd like to use FastCGI protocol, which RimStone uses because it's very fast and capable. And finally, we tell HAProxy we'd like to communicate with our server on port 3000. So that's why we used "-p 3000" above when starting the server!<br/>
<br/>
Restart HAProxy for this to take effect:<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_46' class=notranslate>
sudo systemctl restart haproxy</pre>
<span id=rimstone_copied_46 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_46' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_46, code_46, rimstone_copied_46)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Now you can test your application server. Open a browser, and point it to your server where all the above code took place. If you're testing this on your own local machine, then just use "127.0.0.1" - and that's what we'll do here:<br/>
<div class='ncode' style='position:relative;padding-right:16px;'>
<pre id='code_39' class=notranslate>
http://127.0.0.1:90/yum/biscuit/action=enter-cookie</pre>
<span id=rimstone_copied_39 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_39' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_39, code_39, rimstone_copied_39)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
You'd get something like this:<br/>
<br/><div class='vimg'><img class='imgs' src='cookies_enter.png' alt='RimStone'></img>
</div><br/>
Enter the name, and click Submit, and you'll get the message that the cookie is saved:<br/>
<br/><div class='vimg'><img class='imgs' src='cookies_sent.png' alt='RimStone'></img>
</div><br/>
Now, enter this URL to query the cookie you set:<br/>
<div class='ncode' style='position:relative;padding-right:16px;'>
<pre id='code_42' class=notranslate>
http://127.0.0.1:90/yum/biscuit/action=query-cookie</pre>
<span id=rimstone_copied_42 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_42' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_42, code_42, rimstone_copied_42)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
And you'll see:<br/>
<br/><div class='vimg'><img class='imgs' src='cookies_show.png' alt='RimStone'></img>
</div><br/>
So now you've learned how to use cookies in RimStone, and how to use HAProxy too. Of course, you could have used Apache, Nginx or some other web server as well.<br/>
<a id='article-debug.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:left;background-color:white;'><a href='https://rimstone-lang.com' style='border-bottom:0px'><img src='https://rimstone-lang.com/rimstone.png' style='width:180px;height:auto'/></a></div><div class='vhub' style='margin-top:10px;'>How to debug RimStone programs with gdb</div><hr/><br/>
Debugging information is always included regardless of how you make your application; what varies is the amount of debugging info included. You can compile your RimStone application normally:<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_49' class=notranslate>
rim <span class="Special">-q</span></pre>
<span id=rimstone_copied_49 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_49' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_49, code_49, rimstone_copied_49)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
This will create an executable that can be debugged with gdb. You can debug your RimStone program with gdb just as if it were a plain C program, which technically it is. This makes it much easier to get to the bottom of any issue directly without having to deal with virtual machines, p-code translation, assembler etc.<br/>
<br/>
For this reason, the debugging ecosystem for RimStone programs is already fully developed. For instance you can use Valgrind or Google ASAN with RimStone programs just as you'd with a C program.<br/>
<br/>
Note that in order to debug the RimStone itself, it's best to be compiled from source, or you need to use the included debugging information (meaning you need to install a debug package). This will be covered in another article here on RimStone blog.<br/>
<div class="vsub"><a id="Example"></a>Example</div>
Here's an example of debugging using RimStone. We'll create a little parsing application to illustrate.<br/>
<br/>
First, let's create a directory for our application "split" (since you'll be splitting a URL query string into name/value pairs):<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_51' class=notranslate>
<span class="Statement">mkdir</span> split
<span class="Statement">cd</span> split
rim <span class="Special">-k</span> split</pre>
<span id=rimstone_copied_51 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_51' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_51, code_51, rimstone_copied_51)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Create a source file "parse.rim" and copy this:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_48' class=notranslate>
<span class="Statement">begin-handler</span> /parse
<span class="Statement">    silent-header</span>
<span class="Statement">    set-string</span> str = <span class="Constant">&quot;a=1&amp;b=2&amp;c=3&quot;</span>
    <span class="Comment">// Split string using </span><span class="Constant">&quot;&amp;&quot;</span><span class="Comment"> as a delimiter</span>
<span class="Statement">    split-string</span> str<span class="Identifier"> with</span> <span class="Constant">&quot;&amp;&quot;</span><span class="Type"> to</span> pair<span class="Type"> count</span> pair_tot
<span class="Statement">    start-loop</span><span class="Identifier"> repeat</span> pair_tot<span class="Type"> use</span> pair_count
<span class="Statement">        read-split</span> pair_count<span class="Identifier"> from</span> pair<span class="Type"> to</span> item
        <span class="Comment">// Now split each item using </span><span class="Constant">&quot;=&quot;</span><span class="Comment"> as a delimiter</span>
<span class="Statement">        split-string</span> item<span class="Identifier"> with</span> <span class="Constant">&quot;=&quot;</span><span class="Type"> to</span> equal
<span class="Statement">        read-split</span> <span class="Constant">1</span><span class="Identifier"> from</span> equal<span class="Type"> to</span> name
<span class="Statement">        read-split</span> <span class="Constant">2</span><span class="Identifier"> from</span> equal<span class="Type"> to</span> value
        <span class="Comment">// Output each name/value</span>
<span class="Statement">        print-format</span> <span class="Constant">&quot;Name [</span><span class="Special">%s</span><span class="Constant">] value [</span><span class="Special">%s</span><span class="Constant">]</span><span class="Special">\n</span><span class="Constant">&quot;</span>, name, value
<span class="Statement">    end-loop</span>
<span class="Statement">end-handler</span></pre>
<span id=rimstone_copied_48 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_48' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_48, code_48, rimstone_copied_48)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<br/>
This program will parse the string "a=1&amp;b=2&amp;c=3" to produce name/value pairs - this is obviously a parsing of URL query string. It uses split-string statement which will split the string based on some delimiter string, and then you use read-split statement to get the split pieces one by one. Very simple.<br/>
<br/>
Compile and link this:<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_53' class=notranslate>
rim <span class="Special">-q</span> <span class="Special">--public</span></pre>
<span id=rimstone_copied_53 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_53' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_53, code_53, rimstone_copied_53)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<br/>
What's what here? First of all "-q" will make your project (meaning compile and link it, both command-line executable and application server), while "--public" makes all handlers public, meaning they can handle external requests (i.e. those from a caller outside your application).<br/>
<div class="vsub"><a id="Debugging"></a>Debugging</div>
Okay so now to execute this with gdb, do this:<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_55' class=notranslate>
rim <span class="Special">-r</span> <span class="Special">--req</span><span class="Statement">=</span><span class="Statement">&quot;</span><span class="Constant">/parse</span><span class="Statement">&quot;</span></pre>
<span id=rimstone_copied_55 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_55' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_55, code_55, rimstone_copied_55)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
This will produce something like the following (substitute "your-user" for your OS user name):<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_56' class=notranslate>
<span class="Statement">export</span> <span class="Identifier">CONTENT_TYPE</span>=
<span class="Statement">export</span> <span class="Identifier">CONTENT_LENGTH</span>=
<span class="Statement">unset</span><span class="Identifier"> RIM_SILENT_HEADER</span>
<span class="Statement">export</span> RIM_SILENT_HEADER
<span class="Statement">export</span> <span class="Identifier">REQUEST_METHOD</span>=GET
<span class="Statement">export</span> <span class="Identifier">SCRIPT_NAME</span>=<span class="Statement">&quot;</span><span class="Constant">/split</span><span class="Statement">&quot;</span>
<span class="Statement">export</span> <span class="Identifier">PATH_INFO</span>=<span class="Statement">&quot;</span><span class="Constant">/parse</span><span class="Statement">&quot;</span>
<span class="Statement">export</span> <span class="Identifier">QUERY_STRING</span>=<span class="Statement">&quot;&quot;</span>
/home/your-user/.rimstone/apps/split/.bld/split</pre>
<span id=rimstone_copied_56 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_56' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_56, code_56, rimstone_copied_56)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
This is basically setting the necessary environment variables and then executing the "split" program (specified here in full path). Remember, RimStone program can execute exactly the same as a web application server as well as command-line executable; hence the web environment variables need to be set.<br/>
<br/>
So if you copy and paste the above into bash shell, you'll get:<br/>
<div class='ncode' style='position:relative;padding-right:16px;'>
<pre id='code_47' class=notranslate>
Name [a] value [1]
Name [b] value [2]
Name [c] value [3]</pre>
<span id=rimstone_copied_47 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_47' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_47, code_47, rimstone_copied_47)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Which is the proper parsing of the string. Okay so far so good.<br/>
<br/>
Now to debug your program, do:<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_57' class=notranslate>
gdb /home/your-user/.rimstone/apps/split/.bld/split</pre>
<span id=rimstone_copied_57 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_57' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_57, code_57, rimstone_copied_57)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
You are now in gdb debugging shell:<br/>
<div class='ncode' style='position:relative;padding-right:16px;'>
<pre id='code_50' class=notranslate>
GNU gdb (Ubuntu 15.0.50.20240403-0ubuntu1) 15.0.50.20240403-git
Copyright (C) 2024 Free Software Foundation, Inc.
License GPLv3+: GNU GPL version 3 or later &lt;http://gnu.org/licenses/gpl.html&gt;
This is free software: you are free to change and redistribute it.
There is NO WARRANTY, to the extent permitted by law.
Type &quot;show copying&quot; and &quot;show warranty&quot; for details.
This GDB was configured as &quot;x86_64-linux-gnu&quot;.
Type &quot;show configuration&quot; for configuration details.
For bug reporting instructions, please see:
&lt;https://www.gnu.org/software/gdb/bugs/&gt;.
Find the GDB manual and other documentation resources online at:
    &lt;http://www.gnu.org/software/gdb/documentation/&gt;.

For help, type &quot;help&quot;.
Type &quot;apropos word&quot; to search for commands related to &quot;word&quot;...
Reading symbols from /home/your-user/.rimstone/apps/split/.bld/split...
(gdb)</pre>
<span id=rimstone_copied_50 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_50' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_50, code_50, rimstone_copied_50)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Now you can use standard gdb commands. We'll set a break in our code above (which is handler "parse"), and then run the program. Next we'll simply execute one statement at a time, and then we'll print the loop variable:<br/>
<div class='ncode' style='position:relative;padding-right:16px;'>
<pre id='code_52' class=notranslate>
(gdb) br parse
Breakpoint 1 at 0x3a5e: file /home/user/.rimstone/apps/split/.bld/__parse.o.c, line 4.
(gdb) run
Starting program: /home/your-user/.rimstone/apps/split/.bld/split
[Thread debugging using libthread_db enabled]
Using host libthread_db library &quot;/lib/x86_64-linux-gnu/libthread_db.so.1&quot;.

Breakpoint 1.1, parse () at /home/your-user/tmp/test/split/parse.rim:1
4	void parse () {
(gdb) next
2	    silent-header
(gdb)
3	    set-string str = &quot;a=1&amp;b=2&amp;c=3&quot;
(gdb)
4	    split-string str with &quot;&amp;&quot; to pair count pair_tot
(gdb)
5	    start-loop repeat pair_tot use pair_count
(gdb)
6	        read-split pair_count from pair to item
(gdb)
5	    start-loop repeat pair_tot use pair_count
(gdb)
6	        read-split pair_count from pair to item
(gdb)
7	        split-string item with &quot;=&quot; to equal
(gdb)
8	        read-split 1 from equal to name
(gdb)
9	        read-split 2 from equal to value
(gdb)
11	        print-format &quot;Name [%s] value [%s]\n&quot;, name, value
(gdb)
Name [a] value [1]
6	        read-split pair_count from pair to item
(gdb) print pair_count
$1 = 1</pre>
<span id=rimstone_copied_52 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_52' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_52, code_52, rimstone_copied_52)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
As you can see, you're stepping through your RimStone program, with the code showing exactly as it is in your source file! You can do here anything that you can in a C program, for instance set breakpoints, conditions etc. In this case we also print the value of variable pair_count.<br/>
<br/>
gdb is too powerful to summarize here. There are many tutorials on the web. But suffice it to say you can easily debug your programs and see how they work step by step and a lot more (that's an understatement!).<br/>
<br/>
Finally, if you're so inclined, you can also step through generated C code and see exactly what makes your program tick. To do that, make your program with "--c-lines" flag, which lets you do that:<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_58' class=notranslate>
rim <span class="Special">-q</span> <span class="Special">--public</span> <span class="Special">--c-lines</span></pre>
<span id=rimstone_copied_58 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_58' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_58, code_58, rimstone_copied_58)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Now, repeat the above to get into gdb, and it may look like this (note that generated code can always change and there's absolutely no guarantee it will stay the same!):<br/>
<div class='ncode' style='position:relative;padding-right:16px;'>
<pre id='code_54' class=notranslate>
Breakpoint 1.1, parse () at /home/your-user/.rimstone/apps/split/.bld/__parse.o.c:4
4	void parse () {
(gdb) next
7	rim_get_config ()-&gt;ctx.req-&gt;silent=1;
(gdb) n
10	char *str = RIM_EMPTY_STRING;
(gdb)
17	if (_rim_gstr_once0) {
(gdb)
18	rim_gstr_ret0 = rim_mem_add_const (_rim_gstr0, sizeof(_rim_gstr0)-RIM_ALIGN);
(gdb)
19	_rim_gstr_once0 = false;
(gdb)
21	str = rim_gstr_ret0;
(gdb)
22	rim_mem_add_ref (rim_gstr_ret0);
(gdb)
29	if (_rim_gstr_once1) {
(gdb)
30	rim_gstr_ret1 = rim_mem_add_const (_rim_gstr1, sizeof(_rim_gstr1)-RIM_ALIGN);
(gdb)
31	_rim_gstr_once1 = false;
(gdb)
33	rim_split_str *pair = NULL;
(gdb)
34	rim_num pair_tot = 0;
(gdb)
35	rim_break_down (str, rim_gstr_ret1, &amp;(pair));
(gdb)
36	pair_tot= (pair)-&gt;num_pieces;
(gdb)
39	rim_num pair_count = 0;
(gdb)</pre>
<span id=rimstone_copied_54 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_54' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_54, code_54, rimstone_copied_54)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
This is literally the C code that runs your program. It doesn't look as user friendly for sure, but it's useful if you'd like to see what exactly takes place. It's also useful in debugging your program and RimStone as well.<br/>
<br/>
Now you know how to debug your RimStone programs with gdb.<br/>
<a id='article-distributed.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:left;background-color:white;'><a href='https://rimstone-lang.com' style='border-bottom:0px'><img src='https://rimstone-lang.com/rimstone.png' style='width:180px;height:auto'/></a></div><div class='vhub' style='margin-top:10px;'>How to write distributed applications</div><hr/><br/>
<br/><div class='vimg'><img class='imgs' src='distributed_computing.png' alt='RimStone'></img>
</div><br/>
<div class="vsub"><a id="What is distributed computing"></a>What is distributed computing</div>
Distributed computing is two or more servers communicating for a common purpose. Typically, some tasks are divvied up between a number of computers, and they all work together to accomplish it. Note that "separate servers" may mean physically separate computers. It may also mean virtual servers such as Virtual Private Servers (VPS) or containers, that may share the same physical hardware, though they appear as separate computers on the network. <br/>
<br/>
There are many reasons why you might need this kind of setup. It may be that resources needed to complete the task aren't all on a single computer. For instance, your application may rely on multiple databases, each residing on a different computer. Or, you may need to distribute requests to your application because a single computer isn't enough to handle them all at the same time. In other cases, you are using remote services (like a REST API-based for instance), and those by nature reside somewhere else.<br/>
<br/>
In any case, the computers comprising your distributed system may be on a local network, or they may be worldwide, or some combination of those. The throughput (how many bytes per second can be exchanged via network) and latency (how long it takes for a packet to travel via network) will obviously vary: for a local network you'd have a higher throughput and lower latency, and for Internet servers it will be the opposite. Plan accordingly based on the quality of service you'd expect.<br/>
<div class="vsub"><a id="How servers communicate"></a>How servers communicate</div>
Depending on your network(s) setup, different kinds of communication are called for. If two servers reside on a local network, then they would typically used the fastest possible means of communication. A local network typically means a secure network, because nobody else has access to it but you. So you would not need TSL/SSL or any other kind of secure protocol as that would just slow things down.<br/>
<br/>
If two servers are on the Internet though, then you must use a secure protocol (like TSL/SSL or some other) because your communication may be spied on, or worse, affected by man-in-the-middle attacks. <br/>
<div class="vsub"><a id="Local network distributed computing"></a>Local network distributed computing</div>
Most of the time, your distributed system would be on a local network. Such network may be separate and private in a physical sense, or (more commonly) in a virtual sense, where some kind of a Private Cloud Network is established for you by the Cloud provider. It's likely that separation is enforced by specialized hardware (such as routers and firewalls) and secure protocols that keep networks belonging to different customers separate. This way, a "local" network can be established even if computers on it are a world apart, though typically they reside as a part of a larger local network. <br/>
<br/>
Either way, as far as your application is concerned, you are looking at a local network. Thus, the example here will be for such a case, as it's most likely what you'll have. A local network means different parts of your application residing on different servers will use some efficient protocol based on TCP/IP. One such protocol is FastCGI, a high-performance binary protocol for communication between servers, clients, and in general programs of all kinds, and that's the one used by RimStone. So in principle, the setup will look like this (there'll be more details later):<br/>
<br/><div class='vimg'><img class='imgs' src='distributed_principle.png' alt='RimStone'></img>
</div><br/>
Next, in theory you should have two servers, however in this example both servers will be on the same localhost (i.e. "127.0.0.1"). This is just for simplicity; the code is exactly the same if you have two different servers on a local network - simply use another IP (such as "192.168.0.15" for instance) for your "remote" server instead of local "127.0.0.1". The two servers do not even necessarily need to be physically two different computers. You can start a Virtual Machine (VM) on your computer and host another virtual computer there. Popular free software like VirtualBox or KVM Hypervisor can help you do that. <br/>
<br/>
In any case, in this example you will start two simple application servers; they will communicate with one another. The first one will be called "local" and the other one "remote" server. The local application server will make a request to the remote one.<br/>
<div class="vsub"><a id="Local server"></a>Local server</div>
On a local server, create a new directory for your local application server source code:<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_64' class=notranslate>
<span class="Statement">mkdir</span> <span class="PreProc">$HOME</span>/local_server
<span class="Statement">cd</span> <span class="PreProc">$HOME</span>/local_server</pre>
<span id=rimstone_copied_64 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_64' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_64, code_64, rimstone_copied_64)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
and then a new file "status.rim" will be created with the following:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_63' class=notranslate>
cat &lt;&lt; '<span class="Constant">EOF</span>' &gt; status.rim
<span class="Statement">begin-handler</span> /status<span class="Identifier"> public</span>
<span class="Statement">    silent-header</span>
<span class="Statement">    get-param</span> server
<span class="Statement">    get-param</span> days

<span class="Statement">    print-format</span> <span class="Constant">&quot;/server/remote-status/days=</span><span class="Special">%s</span><span class="Constant">&quot;</span>, days<span class="Identifier"> to</span> payload
<span class="Statement">    print-format</span> <span class="Constant">&quot;</span><span class="Special">%s</span><span class="Constant">:3800&quot;</span>, server<span class="Identifier"> to</span> srv_location

<span class="Statement">    new-remote</span> srv<span class="Identifier"> location</span> srv_location \
       <span class="Identifier"> method</span> <span class="Constant">&quot;GET&quot;</span><span class="Identifier"> url-path</span> payload \
       <span class="Identifier"> timeout</span> <span class="Constant">30</span>

<span class="Statement">    call-remote</span> srv
<span class="Statement">    read-remote</span> srv<span class="Identifier"> data</span> dt
<span class="Statement">    @</span>Output is: [<span class="Statement">&lt;&lt;print-out</span> dt<span class="Statement">&gt;&gt;</span>]
<span class="Statement">end-handler</span>
<span class="Constant">EOF</span></pre>
<span id=rimstone_copied_63 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_63' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_63, code_63, rimstone_copied_63)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
The code here is very simple. <a href='/new-remote.html'>new-remote</a> will create a new connection to a remote server, running on IP address given by input parameter "server" (and obtained with <a href='/get-param.html'>get-param</a>) on TCP port 3800. URL payload created in string variable "payload" is passed to the remote server. If it doesn't reply in 30 seconds, then the code would timeout. Then you're using <a href='/call-remote.html'>call-remote</a> to actually make a call to the remote server (which is served by application "server" and by request handler "remote-status.rim" below), and finally <a href='/read-remote.html'>read-remote</a> to get the reply from it. For simplicity, error handling is omitted here, but you can easily detect a timeout, any network errors, any errors from the remote server, including error code and error text, etc. See the above statements for more on this.<br/>
<div class="vsub"><a id="Make and start the local server"></a>Make and start the local server</div>
Next, create a local application:<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_67' class=notranslate>
rim <span class="Special">-k</span> client</pre>
<span id=rimstone_copied_67 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_67' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_67, code_67, rimstone_copied_67)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Make the application (i.e. compile the source code and build the native executable):<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_69' class=notranslate>
rim <span class="Special">-q</span></pre>
<span id=rimstone_copied_69 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_69' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_69, code_69, rimstone_copied_69)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Finally, start the local application server:<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_70' class=notranslate>
mrim <span class="Special">-w</span> <span class="Constant">2</span> client</pre>
<span id=rimstone_copied_70 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_70' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_70, code_70, rimstone_copied_70)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
This will start 2 server instances of a local application server.<br/>
<div class="vsub"><a id="Remote server"></a>Remote server</div>
Okay, now you have a local server. Next, you'll setup a remote server. Login to your remote server and create a new directory for your remote application server:<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_71' class=notranslate>
<span class="Statement">mkdir</span> <span class="PreProc">$HOME</span>/remote_server
<span class="Statement">cd</span> <span class="PreProc">$HOME</span>/remote_server</pre>
<span id=rimstone_copied_71 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_71' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_71, code_71, rimstone_copied_71)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Then a file "remote-status.rim" with this code is created:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_66' class=notranslate>
cat &lt;&lt; '<span class="Constant">EOF</span>' &gt; remote-status.rim
<span class="Statement">begin-handler</span> /remote-status<span class="Identifier"> public</span>
<span class="Statement">    silent-header</span>
<span class="Statement">    get-param</span> days

<span class="Statement">    print-format</span> <span class="Constant">&quot;Status in the past </span><span class="Special">%s</span><span class="Constant"> days is okay&quot;</span>, days
<span class="Statement">end-handler</span>
<span class="Constant">EOF</span></pre>
<span id=rimstone_copied_66 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_66' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_66, code_66, rimstone_copied_66)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
This is super simple, and it just replies that the status is okay; it accepts the number of days to check for status and displays that back. In a real service, you might query a database to check for status (see <a href='/run-query.html'>run-query</a>).<br/>
<div class="vsub"><a id="Make and start remote server"></a>Make and start remote server</div>
First create your application:<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_72' class=notranslate>
rim <span class="Special">-k</span> server</pre>
<span id=rimstone_copied_72 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_72' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_72, code_72, rimstone_copied_72)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Then make your program:<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_73' class=notranslate>
rim <span class="Special">-q</span></pre>
<span id=rimstone_copied_73 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_73' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_73, code_73, rimstone_copied_73)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
And finally start the server:<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_74' class=notranslate>
mrim <span class="Special">-w</span> <span class="Constant">2</span> <span class="Special">-p</span> <span class="Constant">3800</span> server</pre>
<span id=rimstone_copied_74 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_74' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_74, code_74, rimstone_copied_74)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
This will start 2 daemon processes running as background servers. They will serve requests from your local server.<br/>
<br/>
Note that if you're running this example on different computers, some Linux distributions come with a firewall, and you may need to use ufw or firewall-cmd to make port 3800 accessible here. <br/>
<div class="vsub"><a id="Run distributed calls"></a>Run distributed calls</div>
There is a number of ways you can call the remote service you created. These are calls made from your <span style="font-style:italic">local</span> server, so change directory to it:<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_75' class=notranslate>
<span class="Statement">cd</span> <span class="PreProc">$HOME</span>/local_server</pre>
<span id=rimstone_copied_75 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_75' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_75, code_75, rimstone_copied_75)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Here's various way to call the remote application server:<br/>
<ul><li>Execute a command-line program on local server that calls remote application server:<br/>
<br/><div class='vimg'><img class='imgs' src='distributed_command_line.png' alt='RimStone'></img>
</div><br/>
To do this, use "-r" option of <a href='/rim.html'>rim</a> utility to generate shell commands you can use to call your program:<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_59' class=notranslate>
rim <span class="Special">-r</span> <span class="Special">--req</span> <span class="Statement">&quot;</span><span class="Constant">/status/days=18/server=127.0.0.1</span><span class="Statement">&quot;</span> <span class="Special">--exec</span></pre>
<span id=rimstone_copied_59 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_59' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_59, code_59, rimstone_copied_59)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Here, you're saying that you want to make a request "status" (which is in source file "status.rim" on your local server). You are also saying that input parameter "days" should have a value of "18" and also that input parameter "server" should have a value of "127.0.0.1" - see <a href='/get-param.html'>get-param</a> statements in the above file "status.rim". If you actually have a different server with a different IP, use it instead of "127.0.0.1". <br/>
The result will be:<br/>
<div class='ncode' style='position:relative;padding-right:16px;'>
<pre id='code_62' class=notranslate>
Output is: [Status in the past 18 days is okay]</pre>
<span id=rimstone_copied_62 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_62' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_62, code_62, rimstone_copied_62)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
where the part in between "[..]" comes from the remote server, and the "Output is: " part comes from the command line RimStone program you executed.<br/>
</li><li>Call remote application server directly from a command-line program:<br/>
<br/><div class='vimg'><img class='imgs' src='distributed_command_utility.png' alt='RimStone'></img>
</div><br/>
Do this:<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_60' class=notranslate>
rim <span class="Special">-r</span> <span class="Special">--req</span><span class="Statement">=</span><span class="Statement">&quot;</span><span class="Constant">/remote-status/days=18</span><span class="Statement">&quot;</span> <span class="Special">--exec</span> <span class="Special">--service</span> <span class="Special">--app</span><span class="Statement">=</span><span class="Statement">&quot;</span><span class="Constant">/server</span><span class="Statement">&quot;</span> <span class="Special">--remote</span><span class="Statement">=</span><span class="Statement">&quot;</span><span class="Constant">127.0.0.1:3800</span><span class="Statement">&quot;</span></pre>
<span id=rimstone_copied_60 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_60' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_60, code_60, rimstone_copied_60)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
The result is, as expected:<br/>
<div class='ncode' style='position:relative;padding-right:16px;'>
<pre id='code_65' class=notranslate>
Status in the past 18 days is okay</pre>
<span id=rimstone_copied_65 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_65' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_65, code_65, rimstone_copied_65)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
In this case, the output comes straight from the remote server, so the "Output is: " part is missing. The above simply copies the output from a remote service to the standard output.<br/>
</li><li>Use a command-line utility to contact local application server, which then calls the remote server, which replies back to local application server, which replies back to your command-line utility:<br/>
<br/><div class='vimg'><img class='imgs' src='distributed_command_local.png' alt='RimStone'></img>
</div><br/>
You will use <a href='/rim.html'>rim</a> to do this:<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_61' class=notranslate>
rim <span class="Special">-r</span> <span class="Special">--req</span> <span class="Statement">&quot;</span><span class="Constant">/status/server=127.0.0.1/days=10</span><span class="Statement">&quot;</span> <span class="Special">--exec</span> <span class="Special">--service</span></pre>
<span id=rimstone_copied_61 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_61' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_61, code_61, rimstone_copied_61)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
The result is:<br/>
<div class='ncode' style='position:relative;padding-right:16px;'>
<pre id='code_68' class=notranslate>
Output is: [Status in the past 10 days is okay]</pre>
<span id=rimstone_copied_68 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_68' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_68, code_68, rimstone_copied_68)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
which is what you'd expect. In this case we first send a request to your local application server, which sends it to a remote service, so there is "Output is: " output.<br/>
</li></ul>
You have different options when designing your distributed systems, and this article shows how easy it is to implement them.<br/>
<a id='article-encryption.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:left;background-color:white;'><a href='https://rimstone-lang.com' style='border-bottom:0px'><img src='https://rimstone-lang.com/rimstone.png' style='width:180px;height:auto'/></a></div><div class='vhub' style='margin-top:10px;'>Encryption: ciphers, digests, salt, IV and a hands-on guide</div><hr/><br/>
<br/><div class='vimg'><img class='imgs' src='encryption.jpg' alt='RimStone'></img>
</div><br/>
<div class="vsub"><a id="What is encryption"></a>What is encryption</div>
Encryption is a method of turning data into an unusable form that can be made useful only by means of decryption. The purpose is to make data available solely to those who can decrypt it (i.e. make it usable). Typically, data needs to be encrypted to make sure it cannot be obtained in case of unauthorized access. It is the last line of defense after an attacker has managed to break through authorization systems and access control.<br/>
<br/>
This doesn't mean all data needs to be encrypted, because often times authorization and access systems may be enough, and in addition, there is a performance penalty for encrypting and decrypting data. If and when the data gets encrypted is a matter of application planning and risk assessment, and sometimes it is also a regulatory requirement, such as with HIPAA or GDPR.<br/>
<br/>
Data can be encrypted at-rest, such as on disk, or in transit, such as between two parties communicating over the Internet.<br/>
<br/>
Here you will learn how to encrypt and decrypt data using a password, also known as symmetrical encryption. This password must be known to both parties exchanging information.<br/>
<div class="vsub"><a id="Cipher, digest, salt, iterations, IV"></a>Cipher, digest, salt, iterations, IV</div>
To properly and securely use encryption, there are a few notions that need to be explained.<br/>
<br/>
A cipher is the algorithm used for encryption. For example, AES256 is a cipher. The idea of a cipher is what most people will think of when it comes to encryption.<br/>
<br/>
A digest is basically a hash function that is used to scramble and lengthen the password (i.e. the encryption key) before it's used by the cipher. Why is this done? For one, it creates a well randomized, uniform-length hash of a key that works better for encryption. It's also very suitable for "salting", which is the next one to talk about.<br/>
<br/>
The "salt" is a method of defeating so-called "rainbow" tables. An attacker knows that two hashed values will still look exactly the same if the originals were. However, if you add the salt value to hashing, then they won't. It's called "salt" because it's sort of mixed with the key to produce something different. Now, a rainbow table will attempt to match known hashed values with precomputed data in an effort to guess a password. Usually, salt is randomly generated for each key and stored with it. In order to match known hashes, the attacker would have to precompute rainbow tables for great many random values, which is generally not feasible.<br/>
<br/>
You will often hear about "iterations" in encryption. An iteration is a single cycle in which a key and salt are mixed in such a way to make guessing the key harder. This is done many times so to make it computationally difficult for an attacker to reverse-guess the key, hence "iterations" (plural). Typically, a minimum required number of iterations is 1000, but it can be different than that. If you start with a really strong password, generally you need less.<br/>
<br/>
IV (or "Initialization Vector") is typically a random value that's used for encryption of each message. Now, salt is used for producing a key based on a password. And IV is used when you already have a key and now are encrypting messages. The purpose of IV is to make the same messages appear differently when encrypted. Sometimes, IV also has a sequential component, so it's made of a random string plus a sequence that constantly increases. This makes "replay" attacks difficult, which is where attacker doesn't need to decrypt a message; but rather an encrypted message was "sniffed" (i.e. intercepted between the sender and receiver) and then replayed, hoping to repeat the action already performed. Though in reality, most high-level protocols already have a sequence in place, where each message has, as a part of it, an increasing packet number, so in most cases IV doesn't need it.<br/>
<div class="vsub"><a id="Encryption example"></a>Encryption example</div>
To run the examples here, create an application "enc" in a directory of its own (see <a href='/mrim.html'>mrim</a> for more on RimStone's program manager):<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_84' class=notranslate>
<span class="Statement">mkdir</span> enc_example
<span class="Statement">cd</span> enc_example
rim <span class="Special">-k</span> enc</pre>
<span id=rimstone_copied_84 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_84' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_84, code_84, rimstone_copied_84)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
To encrypt data use <a href='/encrypt-data.html'>encrypt-data</a> statement. The simplest form is to encrypt a null-terminated string. Create a file "encrypt.rim" and copy this:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_83' class=notranslate>
<span class="Statement">begin-handler</span> /encrypt<span class="Identifier"> public</span>
<span class="Statement">    set-string</span> str = <span class="Constant">&quot;This contains a secret code, which is Open Sesame!&quot;</span>
    <span class="Comment">// Encrypt</span>
<span class="Statement">    encrypt-data</span> str<span class="Type"> to</span> enc_str<span class="Identifier"> password</span> <span class="Constant">&quot;my_password&quot;</span>
<span class="Statement">    print-out</span> enc_str
<span class="Statement">    @</span>
    <span class="Comment">// Decrypt</span>
<span class="Statement">    decrypt-data</span> enc_str<span class="Identifier"> password</span> <span class="Constant">&quot;my_password&quot;</span><span class="Type"> to</span> dec_str
<span class="Statement">    print-out</span> dec_str
<span class="Statement">    @</span>
<span class="Statement">end-handler</span></pre>
<span id=rimstone_copied_83 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_83' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_83, code_83, rimstone_copied_83)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
You can see the basic usage of encrypt-data and <a href='/decrypt-data.html'>decrypt-data</a>. You supply data (original or encrypted), the password, and off you go. The data is encrypted and then decrypted, yielding the original. <br/>
<br/>
In the source code, a string variable "enc_str" (which is created as a "char *") will contain the encrypted version of "This contains a secret code, which is Open Sesame!" and "dec_str" will be the decrypted data which must be exactly the same.<br/>
<br/>
To run this code from command line, make the application first:<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_87' class=notranslate>
rim <span class="Special">-q</span></pre>
<span id=rimstone_copied_87 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_87' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_87, code_87, rimstone_copied_87)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Then have RimStone produce the bash code to run it - the request path is "/encrypt", which in our case is handled by function "void encrypt()" defined in source file "encrypt.rim". In RimStone, these names always match, making it easy to write, read and execute code. Use "-r" option in <a href='/rim.html'>rim</a> to specify the request path and get the code you need to run the program:<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_90' class=notranslate>
rim <span class="Special">-r</span> <span class="Special">--req</span><span class="Statement">=</span><span class="Statement">&quot;</span><span class="Constant">/encrypt</span><span class="Statement">&quot;</span> <span class="Special">--silent-header</span> <span class="Special">--exec</span></pre>
<span id=rimstone_copied_90 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_90' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_90, code_90, rimstone_copied_90)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
You will get a response like this:<br/>
<div class='ncode' style='position:relative;padding-right:16px;'>
<pre id='code_82' class=notranslate>
72ddd44c10e9693be6ac77caabc64e05f809290a109df7cfc57400948cb888cd23c7e98e15bcf21b25ab1337ddc6d02094232111aa20a2d548c08f230b6d56e9
This contains a secret code, which is Open Sesame!</pre>
<span id=rimstone_copied_82 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_82' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_82, code_82, rimstone_copied_82)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
What you have here is the encrypted data, and then this encrypted data is decrypted using the same password. Unsurprisingly, the result matches the string you encrypted in the first place.<br/>
<br/>
Note that by default encrypt-data will produce encrypted value in a human-readable hexadecimal form, which means consisting of hexadecimal characters "0" to "9" and "a" to "f". This way you can store the encrypted data into a regular string. For instance it may go to a JSON document or into a VARCHAR column in a database, or pretty much anywhere else. However you can also produce a binary encrypted data. More on that in a bit.<br/>
<div class="vsub"><a id="Encrypt data into a binary result"></a>Encrypt data into a binary result</div>
In the previous example, the resulting encrypted data is in a human-readable hexadecimal form. You can also create binary encrypted data, which is not a human-readable string and is also shorter. To do that, use "binary" clause. Replace the code in "encrypt.rim" with:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_86' class=notranslate>
<span class="Statement">begin-handler</span> /encrypt<span class="Identifier"> public</span>
<span class="Statement">    set-string</span> str = <span class="Constant">&quot;This contains a secret code, which is Open Sesame!&quot;</span>
    <span class="Comment">// Encrypt</span>
<span class="Statement">    encrypt-data</span> str<span class="Type"> to</span> enc_str<span class="Identifier"> password</span> <span class="Constant">&quot;my_password&quot;</span><span class="Identifier"> binary</span>
    <span class="Comment">// Save the encrypted data to a file</span>
<span class="Statement">    write-file</span> <span class="Constant">&quot;encrypted_data&quot;</span><span class="Identifier"> from</span> enc_str
<span class="Statement">    get-app</span><span class="Identifier"> directory</span><span class="Type"> to</span> app_dir
<span class="Statement">    @</span>Encrypted data written to file <span class="Statement">&lt;&lt;print-out</span> app_dir<span class="Statement">&gt;&gt;</span>/encrypted_data
    <span class="Comment">// Decrypt data</span>
<span class="Statement">    decrypt-data</span> enc_str<span class="Identifier"> password</span> <span class="Constant">&quot;my_password&quot;</span><span class="Identifier"> binary</span><span class="Type"> to</span> dec_str
<span class="Statement">    print-out</span> dec_str
<span class="Statement">    @</span>
<span class="Statement">end-handler</span></pre>
<span id=rimstone_copied_86 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_86' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_86, code_86, rimstone_copied_86)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
When you want to get binary encrypted data, you should get its length in bytes too, or otherwise you won't know where it ends, since it may contain null bytes in it. Use "output-length" clause for that purpose. In this code, the encrypted data in variable "enc_str" is written to file "encrypted_data", and the length written is "outlen" bytes. When a file is written without a path, it's always written in the application home directory (see <a href='/directories.html'>directories</a>), so you'd use <a href='/get-app.html'>get-app</a> to get that directory.<br/>
<br/>
When decrypting data, notice the use of "input-length" clause. It says how many bytes the encrypted data has. Obviously you can get that from "outlen" variable, where encrypt-data stored the length of encrypted data. When encryption and decryption are decoupled, i.e. running in separate programs, you'd make sure this length is made available.<br/>
<br/>
Notice also that when data is encrypted as "binary" (meaning producing a binary output), the decryption must use the same.<br/>
<br/>
Make the application:<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_93' class=notranslate>
rim <span class="Special">-q</span></pre>
<span id=rimstone_copied_93 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_93' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_93, code_93, rimstone_copied_93)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Run it the same as before:<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_96' class=notranslate>
rim <span class="Special">-r</span> <span class="Special">--req</span><span class="Statement">=</span><span class="Statement">&quot;</span><span class="Constant">/encrypt</span><span class="Statement">&quot;</span> <span class="Special">--silent-header</span> <span class="Special">--exec</span></pre>
<span id=rimstone_copied_96 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_96' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_96, code_96, rimstone_copied_96)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
The result is:<br/>
<div class='ncode' style='position:relative;padding-right:16px;'>
<pre id='code_85' class=notranslate>
Encrypted data written to file ~/.rimstone/apps/enc/app/encrypted_data
This contains a secret code, which is Open Sesame!</pre>
<span id=rimstone_copied_85 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_85' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_85, code_85, rimstone_copied_85)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
The decrypted data is exactly the same as the original.<br/>
<br/>
You can see the actual encrypted data written to the file by using "octal dump" ("od") Linux utility:<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_99' class=notranslate>
od <span class="Special">-c</span> ~/.rimstone/apps/enc/app/encrypted_data</pre>
<span id=rimstone_copied_99 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_99' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_99, code_99, rimstone_copied_99)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
with the result like:<br/>
<div class='ncode' style='position:relative;padding-right:16px;'>
<pre id='code_88' class=notranslate>
$ od -c ~/.rimstone/apps/enc/app/encrypted_data
0000000   r 335 324   L 020 351   i   ; 346 254   w 312 253 306   N 005
0000020 370  \t   )  \n 020 235 367 317 305   t  \0 224 214 270 210 315
0000040   # 307 351 216 025 274 362 033   % 253 023   7 335 306 320
0000060 224   #   ! 021 252     242 325   H 300 217   #  \v   m   V 351
0000100</pre>
<span id=rimstone_copied_88 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_88' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_88, code_88, rimstone_copied_88)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
There you have it. You will notice the data is binary and it actually contains the null byte(s).<br/>
<div class="vsub"><a id="Encrypt binary data"></a>Encrypt binary data</div>
The data to encrypt in these examples is a string, i.e. null-delimited. You can encrypt binary data just as easily by specifying it whole (since RimStone keeps track of how many bytes are there!), or specifying its length in "input-length" clause, for example copy this to "encrypt.rim":<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_89' class=notranslate>
<span class="Statement">begin-handler</span> /encrypt<span class="Identifier"> public</span>
<span class="Statement">    set-string</span> str = <span class="Constant">&quot;This c</span><span class="Special">\000</span><span class="Constant">ontains a secret code, which is Open Sesame!&quot;</span>
    <span class="Comment">// Encrypt</span>
<span class="Statement">    encrypt-data</span> str<span class="Type"> to</span> enc_str<span class="Identifier"> password</span> <span class="Constant">&quot;my_password&quot;</span><span class="Identifier"> input-length</span> <span class="Constant">12</span>
<span class="Statement">    print-out</span> enc_str
<span class="Statement">    @</span>
    <span class="Comment">// Decrypt</span>
<span class="Statement">    decrypt-data</span> enc_str<span class="Identifier"> password</span> <span class="Constant">&quot;my_password&quot;</span><span class="Type"> to</span> dec_str
    <span class="Comment">// Output binary data; present null byte as octal \</span><span class="PreProc">0</span><span class="Constant">00</span>

<span class="Statement">    string-length</span> dec_str<span class="Type"> to</span> res_len
<span class="Statement">    start-loop</span><span class="Identifier"> repeat</span> res_len<span class="Type"> use</span> i<span class="Identifier"> start-with</span> <span class="Constant">0</span>
<span class="Statement">        if-true</span> dec_str[i]<span class="Identifier"> equal</span> <span class="Constant">0</span>
<span class="Statement">            print-out</span> <span class="Constant">&quot;</span><span class="Special">\\</span><span class="Constant">000&quot;</span>
<span class="Statement">        else-if</span>
<span class="Statement">            print-format</span> <span class="Constant">&quot;</span><span class="Special">%c</span><span class="Constant">&quot;</span>, dec_str[i]
<span class="Statement">        end-if</span>
<span class="Statement">    end-loop</span>
<span class="Statement">    @</span>
<span class="Statement">end-handler</span></pre>
<span id=rimstone_copied_89 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_89' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_89, code_89, rimstone_copied_89)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
This will encrypt 12 bytes at memory location "enc_str" regardless of any null bytes. In this case that's "This c" followed by a null byte followed by "ontain" string, but it can be any kind of binary data, for example the contents of a JPG file.<br/>
<br/>
On the decrypt side, you'd obtain the number of bytes decrypted in "output-length" clause. Finally, the decrypted data is shown to be exactly the original and the null byte is presented in a typical octal representation.<br/>
<br/>
Make the application:<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_101' class=notranslate>
rim <span class="Special">-q</span></pre>
<span id=rimstone_copied_101 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_101' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_101, code_101, rimstone_copied_101)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Run it the same as before:<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_102' class=notranslate>
rim <span class="Special">-r</span> <span class="Special">--req</span><span class="Statement">=</span><span class="Statement">&quot;</span><span class="Constant">/encrypt</span><span class="Statement">&quot;</span> <span class="Special">--silent-header</span> <span class="Special">--exec</span></pre>
<span id=rimstone_copied_102 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_102' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_102, code_102, rimstone_copied_102)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
The result is:<br/>
<div class='ncode' style='position:relative;padding-right:16px;'>
<pre id='code_91' class=notranslate>
6bea45c2f901c0913c87fccb9b347d0a
This c\000ontai</pre>
<span id=rimstone_copied_91 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_91' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_91, code_91, rimstone_copied_91)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
The encrypted value is shorter because the data is shorter in this case too, and the result matches exactly the original.<br/>
<div class="vsub"><a id="Use any cipher or digest"></a>Use any cipher or digest</div>
The encryption used by default is <a href='https://en.wikipedia.org/wiki/Advanced_Encryption_Standard'>AES256</a> and <a href='https://en.wikipedia.org/wiki/SHA-2'>SHA256</a> hashing from the standard <a href='https://www.openssl.org/'>OpenSSL</a> library, both of which are widely used in cryptography. You can however use any available cipher and digest (i.e. hash) that is supported by OpenSSL (even the custom ones you provide).<br/>
<br/>
To see which algorithms are available, do this in command line:<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_103' class=notranslate>
<span class="Comment">#get list of cipher providers</span>
openssl list <span class="Special">-cipher-algorithms</span>

<span class="Comment">#get list of digest providers</span>
openssl list <span class="Special">-digest-algorithms</span></pre>
<span id=rimstone_copied_103 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_103' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_103, code_103, rimstone_copied_103)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
These two will provide a list of cipher and digest (hash) algorithms. Some of them may be weaker than the default ones chosen by RimStone, and others may be there just for backward compatibility with older systems. Yet others may be quite new and did not have enough time to be validated to the extent you may want them to be. So be careful when choosing these algorithms and be sure to know why you're changing the default ones. That said, here's an example of using Camellia-256 (i.e. "CAMELLIA-256-CFB1") encryption with "SHA3-512" digest. Replace the code in "encrypt.rim" with:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_92' class=notranslate>
<span class="Statement">begin-handler</span> /encrypt<span class="Identifier"> public</span>
<span class="Statement">    set-string</span> str = <span class="Constant">&quot;This contains a secret code, which is Open Sesame!&quot;</span>
    <span class="Comment">// Encrypt data</span>
<span class="Statement">    encrypt-data</span> str<span class="Type"> to</span> enc_str<span class="Identifier"> password</span> <span class="Constant">&quot;my_password&quot;</span> \
       <span class="Identifier"> cipher</span> <span class="Constant">&quot;CAMELLIA-256-CFB1&quot;</span><span class="Identifier"> digest</span> <span class="Constant">&quot;SHA3-512&quot;</span>
<span class="Statement">    print-out</span> enc_str
<span class="Statement">    @</span>
    <span class="Comment">// Decrypt data</span>
<span class="Statement">    decrypt-data</span> enc_str<span class="Identifier"> password</span> <span class="Constant">&quot;my_password&quot;</span> <span class="Type"> to</span> dec_str \
       <span class="Identifier"> cipher</span> <span class="Constant">&quot;CAMELLIA-256-CFB1&quot;</span><span class="Identifier"> digest</span> <span class="Constant">&quot;SHA3-512&quot;</span>
<span class="Statement">    print-out</span> dec_str
<span class="Statement">    @</span>
<span class="Statement">end-handler</span></pre>
<span id=rimstone_copied_92 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_92' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_92, code_92, rimstone_copied_92)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Make the application:<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_76' class=notranslate>
rim <span class="Special">-q</span></pre>
<span id=rimstone_copied_76 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_76' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_76, code_76, rimstone_copied_76)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Run it:<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_77' class=notranslate>
rim <span class="Special">-r</span> <span class="Special">--req</span><span class="Statement">=</span><span class="Statement">&quot;</span><span class="Constant">/encrypt</span><span class="Statement">&quot;</span> <span class="Special">--silent-header</span> <span class="Special">--exec</span></pre>
<span id=rimstone_copied_77 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_77' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_77, code_77, rimstone_copied_77)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
In this case the result is:<br/>
<div class='ncode' style='position:relative;padding-right:16px;'>
<pre id='code_94' class=notranslate>
f4d64d920756f7220516567727cef2c47443973de03449915d50a1d2e5e8558e7e06914532a0b0bf13842f67f0a268c98da6
This contains a secret code, which is Open Sesame!</pre>
<span id=rimstone_copied_94 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_94' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_94, code_94, rimstone_copied_94)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Again, you get the original data. Note you have to use the same cipher and digest in both encrypt-data and decrypt-data!<br/>
<br/>
You can of course produce the binary encrypted value just like before by using "binary" and "output-length" clauses.<br/>
<br/>
If you've got external systems that encrypt data, and you know which cipher and digest they use, you can match those and make your code interoperable. RimStone uses standard OpenSSL library so chances are that other software may too.<br/>
<div class="vsub"><a id="Using salt"></a>Using salt</div>
To add a salt to encryption, use "salt" clause. You can generate random salt by using <a href='/random-string.html'>random-string</a> statement (or <a href='/random-crypto.html'>random-crypto</a> if there is a need). Here is the code for "encrypt.rim":<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_95' class=notranslate>
<span class="Statement">begin-handler</span> /encrypt<span class="Identifier"> public</span>
<span class="Statement">    set-string</span> str = <span class="Constant">&quot;This contains a secret code, which is Open Sesame!&quot;</span>
    <span class="Comment">// Get salt</span>
<span class="Statement">    random-string</span><span class="Type"> to</span> rs<span class="Identifier"> length</span> <span class="Constant">16</span>
    <span class="Comment">// Encrypt data</span>
<span class="Statement">    encrypt-data</span> str<span class="Type"> to</span> enc_str<span class="Identifier"> password</span> <span class="Constant">&quot;my_password&quot;</span><span class="Identifier"> salt</span> rs
<span class="Statement">    @</span>Salt used is <span class="Statement">&lt;&lt;print-out</span> rs<span class="Statement">&gt;&gt;</span>, and the encrypted string is <span class="Statement">&lt;&lt;print-out</span> enc_str<span class="Statement">&gt;&gt;</span>
    <span class="Comment">// Decrypt data</span>
<span class="Statement">    decrypt-data</span> enc_str<span class="Identifier"> password</span> <span class="Constant">&quot;my_password&quot;</span><span class="Identifier"> salt</span> rs<span class="Type"> to</span> dec_str
<span class="Statement">    print-out</span> dec_str
<span class="Statement">    @</span>
<span class="Statement">end-handler</span></pre>
<span id=rimstone_copied_95 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_95' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_95, code_95, rimstone_copied_95)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Make the application:<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_78' class=notranslate>
rim <span class="Special">-q</span></pre>
<span id=rimstone_copied_78 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_78' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_78, code_78, rimstone_copied_78)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Run it a few times:<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_79' class=notranslate>
rim <span class="Special">-r</span> <span class="Special">--req</span><span class="Statement">=</span><span class="Statement">&quot;</span><span class="Constant">/encrypt</span><span class="Statement">&quot;</span> <span class="Special">--silent-header</span> <span class="Special">--exec</span>
rim <span class="Special">-r</span> <span class="Special">--req</span><span class="Statement">=</span><span class="Statement">&quot;</span><span class="Constant">/encrypt</span><span class="Statement">&quot;</span> <span class="Special">--silent-header</span> <span class="Special">--exec</span>
rim <span class="Special">-r</span> <span class="Special">--req</span><span class="Statement">=</span><span class="Statement">&quot;</span><span class="Constant">/encrypt</span><span class="Statement">&quot;</span> <span class="Special">--silent-header</span> <span class="Special">--exec</span></pre>
<span id=rimstone_copied_79 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_79' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_79, code_79, rimstone_copied_79)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
The result:<br/>
<div class='ncode' style='position:relative;padding-right:16px;'>
<pre id='code_97' class=notranslate>
Salt used is VA9agPKxL9hf3bMd, and the encrypted string is 3272aa49c9b10cb2edf5d8a5e23803a5aa153c1b124296d318e3b3ad22bc911d1c0889d195d800c2bd92153ef7688e8d1cd368dbca3c5250d456f05c81ce0fdd
This contains a secret code, which is Open Sesame!
Salt used is FeWcGkBO5hQ1uo1A, and the encrypted string is 48b97314c1bc88952c798dfde7a416180dda6b00361217ea25278791c43b34f9c2e31cab6d9f4f28eea59baa70aadb4e8f1ed0709db81dff19f24cb7677c7371
This contains a secret code, which is Open Sesame!
Salt used is nCQClR0NMjdetTEf, and the encrypted string is f19cdd9c1ddec487157ac727b2c8d0cdeb728a4ecaf838ca8585e279447bcdce83f7f95fa53b054775be1bb2de3b95f2e66a8b26b216ea18aa8b47f3d177e917
This contains a secret code, which is Open Sesame!</pre>
<span id=rimstone_copied_97 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_97' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_97, code_97, rimstone_copied_97)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
As you can see, a random salt value (16 bytes long in this case) is generated for each encryption, and the encrypted value is different each time, even though the data being encrypted was the same! This makes it difficult to crack encryption like this.<br/>
<br/>
Of course, to decrypt, you must record the salt and use it exactly as you did when encrypting. In the code here, variable "rs" holds the salt. If you store the encrypted values in the database, you'd likely store the salt right next to it.<br/>
<div class="vsub"><a id="Initialization vector"></a>Initialization vector</div>
In practice, you wouldn't use a different salt value for each message. It creates a new key every time, and that can reduce performance. And there's really no need for it: the use of salt is to make each key (even the same ones) much harder to guess. Once you've done that, you might not need to do it again, or often.<br/>
<br/>
Instead, you'd use an IV (Initialization Vector) for each message. It's usually a random string that makes same messages appear different, and increases the computational cost of cracking the password. Here is the new code for "encrypt.rim":<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_98' class=notranslate>
<span class="Statement">begin-handler</span> /encrypt<span class="Identifier"> public</span>
    <span class="Comment">// Get salt</span>
<span class="Statement">    random-string</span><span class="Type"> to</span> rs<span class="Identifier"> length</span> <span class="Constant">16</span>
    <span class="Comment">// Encrypt data</span>
<span class="Statement">    start-loop</span><span class="Identifier"> repeat</span> <span class="Constant">10</span>
<span class="Statement">        random-string</span><span class="Type"> to</span> iv<span class="Identifier"> length</span> <span class="Constant">16</span>
<span class="Statement">        encrypt-data</span> <span class="Constant">&quot;The same message&quot;</span><span class="Type"> to</span> enc_str<span class="Identifier"> password</span> <span class="Constant">&quot;my_password&quot;</span><span class="Identifier"> salt</span> rs<span class="Identifier"> iterations</span> <span class="Constant">2000</span><span class="Identifier"> init-vector</span> iv<span class="Identifier"> cache</span>
<span class="Statement">        @</span>The encrypted string is <span class="Statement">&lt;&lt;print-out</span> enc_str<span class="Statement">&gt;&gt;</span>
        <span class="Comment">// Decrypt data</span>
<span class="Statement">        decrypt-data</span> enc_str<span class="Identifier"> password</span> <span class="Constant">&quot;my_password&quot;</span><span class="Identifier"> salt</span> rs<span class="Identifier"> iterations</span> <span class="Constant">2000</span><span class="Identifier"> init-vector</span> iv<span class="Type"> to</span> dec_str<span class="Identifier"> cache</span>
<span class="Statement">        print-out</span> dec_str
<span class="Statement">        @</span>
<span class="Statement">    end-loop</span>
<span class="Statement">end-handler</span></pre>
<span id=rimstone_copied_98 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_98' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_98, code_98, rimstone_copied_98)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Make the application:<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_80' class=notranslate>
rim <span class="Special">-q</span></pre>
<span id=rimstone_copied_80 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_80' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_80, code_80, rimstone_copied_80)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Run it a few times:<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_81' class=notranslate>
rim <span class="Special">-r</span> <span class="Special">--req</span><span class="Statement">=</span><span class="Statement">&quot;</span><span class="Constant">/encrypt</span><span class="Statement">&quot;</span> <span class="Special">--silent-header</span> <span class="Special">--exec</span>
rim <span class="Special">-r</span> <span class="Special">--req</span><span class="Statement">=</span><span class="Statement">&quot;</span><span class="Constant">/encrypt</span><span class="Statement">&quot;</span> <span class="Special">--silent-header</span> <span class="Special">--exec</span>
rim <span class="Special">-r</span> <span class="Special">--req</span><span class="Statement">=</span><span class="Statement">&quot;</span><span class="Constant">/encrypt</span><span class="Statement">&quot;</span> <span class="Special">--silent-header</span> <span class="Special">--exec</span></pre>
<span id=rimstone_copied_81 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_81' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_81, code_81, rimstone_copied_81)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
The result may be:<br/>
<div class='ncode' style='position:relative;padding-right:16px;'>
<pre id='code_100' class=notranslate>
The encrypted string is 787909d332fd84ba939c594e24c421b00ba46d9c9a776c47d3d0a9ca6fccb1a2
The same message
The encrypted string is 7fae887e3ae469b666cff79a68270ea3d11b771dc58a299971d5b49a1f7db1be
The same message
The encrypted string is 59f95c3e4457d89f611c4f8bd53dd5fa9f8c3bbe748ed7d5aeb939ad633199d7
The same message
The encrypted string is 00f218d0bbe7b618a0c2970da0b09e043a47798004502b76bc4a3f6afc626056
The same message
The encrypted string is 6819349496b9f573743f5ef65e27ac26f0d64574d39227cc4e85e517f108a5dd
The same message
The encrypted string is a2833338cf636602881377a024c974906caa16d1f7c47c78d9efdff128918d58
The same message
The encrypted string is 04c914cd9338fcba9acb550a79188bebbbb134c34441dfd540473dd8a1e6be40
The same message
The encrypted string is 05f0d51561d59edf05befd9fad243e0737e4a98af357a9764cba84bcc55cf4d5
The same message
The encrypted string is ae594c4d6e72c05c186383e63c89d93880c8a8a085bf9367bdfd772e3c163458
The same message
The encrypted string is 2b28cdf5a67a5a036139fd410112735aa96bc341a170dafb56818dc78efe2e00
The same message</pre>
<span id=rimstone_copied_100 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_100' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_100, code_100, rimstone_copied_100)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
You can see that the same message appears different when encrypted, though when decrypted it's again the same. Of course, the password, salt, number of iterations, and init-vector must be the same for both encryption and decryption.<br/>
<br/>
Note the use of "cache" clause in encrypt-data and decrypt-data. It effectively caches the computed key (given password, salt, cipher/digest algorithms and number of iterations), so it's not computed each time through the loop. With "cache" the key is computed once, and then a different IV (in "init-vector" clause) is used for each message. <br/>
<br/>
If you want to occasionally rebuild the key, use "clear-cache" clause, which supplies a boolean. If true, the key is recomputed, otherwise it's left alone. See <a href='/encrypt-data.html'>encrypt-data</a> for more on this.<br/>
<div class="vsub"><a id="Conclusion"></a>Conclusion</div>
You have learned how to encrypt and decrypt data using different ciphers, digests, salt and IV values in RimStone. You can also create a human-readable encrypted value and a binary output, as well as encrypt both strings and binary values (like documents).<br/>
<a id='article-fetch-web-page.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:left;background-color:white;'><a href='https://rimstone-lang.com' style='border-bottom:0px'><img src='https://rimstone-lang.com/rimstone.png' style='width:180px;height:auto'/></a></div><div class='vhub' style='margin-top:10px;'>How to get the web page source code programmatically</div><hr/><br/>
Fetching a web resource (including web page source) is a one-liner in RimStone. First, create a new application ("get-page" here):<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_106' class=notranslate>
<span class="Comment">#new directory for this tiny app</span>
<span class="Statement">mkdir</span> get-page
<span class="Statement">cd</span> get-page
<span class="Comment">#create app</span>
rim <span class="Special">-k</span> get-page</pre>
<span id=rimstone_copied_106 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_106' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_106, code_106, rimstone_copied_106)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Create file "fetch.rim" - it's rather obvious what it does (it gets Google home page HTTP headers and web page source code, and it prints it out):<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_105' class=notranslate>
cat &lt;&lt; '<span class="Constant">EOF</span>' &gt; fetch.rim
<span class="Statement">begin-handler</span> /fetch<span class="Identifier"> public</span>
<span class="Statement">    call-web</span> <span class="Constant">&quot;<a href="https://google.com">https://google.com</a>&quot;</span><span class="Type"> response</span> text<span class="Type"> response-headers</span> head
<span class="Statement">    print-out</span> head<span class="Identifier"> new-line</span>
<span class="Statement">    print-out</span> text<span class="Identifier"> new-line</span>
<span class="Statement">end-handler</span>
<span class="Constant">EOF</span></pre>
<span id=rimstone_copied_105 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_105' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_105, code_105, rimstone_copied_105)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Build your application (it makes a native executable):<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_107' class=notranslate>
rim <span class="Special">-q</span></pre>
<span id=rimstone_copied_107 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_107' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_107, code_107, rimstone_copied_107)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Run it (since we run it in command line, skip the HTTP response header, which would normally be sent to a web client):<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_108' class=notranslate>
rim <span class="Special">-r</span> <span class="Special">--req</span><span class="Statement">=</span><span class="Statement">&quot;</span><span class="Constant">/fetch</span><span class="Statement">&quot;</span> <span class="Special">--exec</span> <span class="Special">--silent-header</span></pre>
<span id=rimstone_copied_108 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_108' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_108, code_108, rimstone_copied_108)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
The result is something like this (I used ... for the remainder of the header and the web page, as they are rather long):<br/>
<div class='ncode' style='position:relative;padding-right:16px;'>
<pre id='code_104' class=notranslate>
HTTP/2 200 
date: Sun, 17 Aug 2025 19:03:40 GMT
expires: -1
cache-control: private, max-age=0
content-type: text/html; charset=ISO-8859-1
...


&lt;!doctype html&gt;&lt;html itemscope=&quot;&quot; itemtype=&quot;http://schema.org/WebPage&quot; lang=&quot;en&quot;&gt;&lt;head&gt;&lt;meta content=&quot;Search the world&apos;s information, including webpages, images, video
s and more. Google has many special features to help you find exactly what you&apos;re looking for.&quot; name=&quot;description&quot;&gt;&lt;meta content= ...</pre>
<span id=rimstone_copied_104 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_104' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_104, code_104, rimstone_copied_104)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
There you have it. Web programming is easy with RimStone.<br/>
<a id='article-fifo.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:left;background-color:white;'><a href='https://rimstone-lang.com' style='border-bottom:0px'><img src='https://rimstone-lang.com/rimstone.png' style='width:180px;height:auto'/></a></div><div class='vhub' style='margin-top:10px;'>First In First Out (FIFO) example</div><hr/><br/>
RimStone has built-in FIFO list type. You can create a FIFO variable and then store key/value string pairs in it, which you can then read back in the order you put them in. You can also rewind the FIFO list and obtain the same key/value pairs over and over again if needed.<br/>
<br/>
This is an example of FIFO list usage. This small command-line application will store key/value pairs "key1"/"value1" and "key2"/"value2" and then obtain them twice.<br/>
<br/>
First, let's create a directory for our application:<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_111' class=notranslate>
<span class="Statement">mkdir</span> test-list
<span class="Statement">cd</span> test-list/</pre>
<span id=rimstone_copied_111 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_111' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_111, code_111, rimstone_copied_111)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
And then create the application itself:<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_112' class=notranslate>
rim <span class="Special">-k</span> list-app</pre>
<span id=rimstone_copied_112 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_112' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_112, code_112, rimstone_copied_112)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
The RimStone code will be in file "list.rim":<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_110' class=notranslate>
cat &lt;&lt; '<span class="Constant">EOF</span>' &gt; list.rim
<span class="Statement">begin-handler</span> /list
<span class="Statement">    silent-header</span>

    <span class="Comment">// Create a list</span>
<span class="Statement">    new-fifo</span> mylist

    <span class="Comment">// Add data to the list</span>
<span class="Statement">    write-fifo</span> mylist<span class="Identifier"> key</span> <span class="Constant">&quot;key1&quot;</span><span class="Identifier"> value</span> <span class="Constant">&quot;value1&quot;</span>
<span class="Statement">    write-fifo</span> mylist<span class="Identifier"> key</span> <span class="Constant">&quot;key2&quot;</span><span class="Identifier"> value</span> <span class="Constant">&quot;value2&quot;</span>

<span class="Statement">    start-loop</span>
     <span class="Comment">// Get data from the list</span>
<span class="Statement">     read-fifo</span> mylist<span class="Type"> key</span> k<span class="Type"> value</span> v<span class="Type"> status</span> st
     <span class="Comment">// Check if no more data</span>
<span class="Statement">     if-true</span> st<span class="Identifier"> not-equal</span> RIM_OKAY
<span class="Statement">         break-loop</span>
<span class="Statement">     end-if</span>
<span class="Statement">     @</span>Obtained key <span class="Statement">&lt;&lt;print-out</span> k<span class="Statement">&gt;&gt;</span> with value <span class="Statement">&lt;&lt;print-out</span> v<span class="Statement">&gt;&gt;</span>
<span class="Statement">    end-loop</span>

    <span class="Comment">// Go through the list again, use rewind-fifo for that</span>
<span class="Statement">    rewind-fifo</span> mylist
<span class="Statement">    start-loop</span>
<span class="Statement">        read-fifo</span> mylist<span class="Type"> key</span> k<span class="Type"> value</span> v<span class="Type"> status</span> st
<span class="Statement">        if-true</span> st<span class="Identifier"> not-equal</span> RIM_OKAY
<span class="Statement">            break-loop</span>
<span class="Statement">        end-if</span>
<span class="Statement">        @</span>Again obtained key <span class="Statement">&lt;&lt;print-out</span> k<span class="Statement">&gt;&gt;</span> with value <span class="Statement">&lt;&lt;print-out</span> v<span class="Statement">&gt;&gt;</span>
<span class="Statement">    end-loop</span>

    <span class="Comment">// Delete FIFO list</span>
<span class="Statement">    purge-fifo</span> mylist
<span class="Statement">end-handler</span>
<span class="Constant">EOF</span></pre>
<span id=rimstone_copied_110 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_110' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_110, code_110, rimstone_copied_110)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
The code above uses <a href='/new-fifo.html'>new-fifo</a> statement to create a FIFO variable, <a href='/write-fifo.html'>write-fifo</a> to add key/value pairs to it, and <a href='/read-fifo.html'>read-fifo</a> to obtain them back in the order they were put in. You can use <a href='/rewind-fifo.html'>rewind-fifo</a> to rewind back to the beginning at any time, as many times as you need.<br/>
<br/>
Make the executable:<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_113' class=notranslate>
rim <span class="Special">-q</span> <span class="Special">--public</span></pre>
<span id=rimstone_copied_113 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_113' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_113, code_113, rimstone_copied_113)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Execute the program:<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_114' class=notranslate>
rim <span class="Special">-r</span> <span class="Special">--req</span><span class="Statement">=</span><span class="Statement">&quot;</span><span class="Constant">/list</span><span class="Statement">&quot;</span> <span class="Special">--app</span><span class="Statement">=</span><span class="Statement">&quot;</span><span class="Constant">/list-app</span><span class="Statement">&quot;</span> <span class="Special">--exec</span></pre>
<span id=rimstone_copied_114 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_114' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_114, code_114, rimstone_copied_114)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
The result is as expected:<br/>
<div class='ncode' style='position:relative;padding-right:16px;'>
<pre id='code_109' class=notranslate>
Obtained key key1 with value value1
Obtained key key2 with value value2
Again obtained key key1 with value value1
Again obtained key key2 with value value2</pre>
<span id=rimstone_copied_109 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_109' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_109, code_109, rimstone_copied_109)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<a id='article-file-manager.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:left;background-color:white;'><a href='https://rimstone-lang.com' style='border-bottom:0px'><img src='https://rimstone-lang.com/rimstone.png' style='width:180px;height:auto'/></a></div><div class='vhub' style='margin-top:10px;'>Web file manager in less than 100 lines of code</div><hr/><br/>
Uploading and download files in web browser is a common task in virtually any web application or service. This article shows how to do this with very little coding - in less than 100 lines of code. The database used is PostgreSQL, and the web server is Nginx.<br/>
<br/>
You will use RimStone as an application server and the programming language. It will run behind the web server. This way end-user cannot talk to your application server directly because all such requests go through the web server, while your back-end application can talk directly to your application server for better performance.<br/>
<br/>
Assuming your currently logged-on Linux user will own the application, create a source code directory and also create RimStone application named "file-manager":<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_117' class=notranslate>
<span class="Statement">mkdir</span> filemgr
<span class="Statement">cd</span> filemgr
rim <span class="Special">-k</span> file-manager</pre>
<span id=rimstone_copied_117 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_117' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_117, code_117, rimstone_copied_117)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Next, create PostgreSQL database named "db_file_manager", owned by currently logged-on user (i.e. passwordless setup):<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_119' class=notranslate>
<span class="Statement">echo</span><span class="Constant"> </span><span class="Statement">&quot;</span><span class="Constant">create user </span><span class="PreProc">$(</span><span class="Special">whoami</span><span class="PreProc">)</span><span class="Constant">;</span>
<span class="Constant">create database db_file_manager with owner=</span><span class="PreProc">$(</span><span class="Special">whoami</span><span class="PreProc">)</span><span class="Constant">;</span>
<span class="Constant">grant all on database db_file_manager to </span><span class="PreProc">$(</span><span class="Special">whoami</span><span class="PreProc">)</span><span class="Constant">;</span>
<span class="Constant">\q</span><span class="Statement">&quot;</span><span class="Constant">  </span>| sudo <span class="Special">-u</span> postgres psql</pre>
<span id=rimstone_copied_119 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_119' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_119, code_119, rimstone_copied_119)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Create database configuration file used by RimStone that describes the database (it's a file "db"):<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_121' class=notranslate>
<span class="Statement">echo</span><span class="Constant"> </span><span class="Statement">&quot;</span><span class="Constant">user=</span><span class="PreProc">$(</span><span class="Special">whoami</span><span class="PreProc">)</span><span class="Constant"> dbname=db_file_manager</span><span class="Statement">&quot;</span><span class="Constant"> </span><span class="Statement">&gt;</span> db</pre>
<span id=rimstone_copied_121 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_121' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_121, code_121, rimstone_copied_121)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Create SQL table that will hold files currently stored on the server:<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_123' class=notranslate>
<span class="Statement">echo</span><span class="Constant"> </span><span class="Statement">&quot;</span><span class="Constant">create table if not exists files (fileName varchar(100), localPath varchar(300), extension varchar(10), description varchar(200), fileSize int, fileID bigserial primary key);</span><span class="Statement">&quot;</span><span class="Constant"> </span>| psql <span class="Special">-d</span> db_file_manager</pre>
<span id=rimstone_copied_123 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_123' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_123, code_123, rimstone_copied_123)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Finally, create source RimStone files. First create "start.rim" file and copy and paste:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_116' class=notranslate>
<span class="Statement">begin-handler</span> /start<span class="Identifier"> public</span>
<span class="Statement">   @</span>&lt;h2&gt;File Manager&lt;/h2&gt;
<span class="Statement">   @</span>To manage the uploaded files, &lt;a href=&quot;<span class="Statement">&lt;&lt;print-path</span> <span class="Constant">&quot;/list&quot;</span><span class="Statement">&gt;&gt;</span>&quot;&gt;click here.&lt;/a&gt;&lt;br/&gt;
<span class="Statement">   @</span>&lt;br/&gt;
<span class="Statement">   @</span>&lt;form action=&quot;<span class="Statement">&lt;&lt;print-path</span> <span class="Constant">&quot;/upload&quot;</span><span class="Statement">&gt;&gt;</span>&quot; method=&quot;POST&quot; enctype=&quot;multipart/form-data&quot;&gt;
<span class="Statement">   @</span>    &lt;label for=&quot;file_description&quot;&gt;File description:&lt;/label&gt;&lt;br&gt;
<span class="Statement">   @</span>    &lt;textarea name=&quot;filedesc&quot; rows=&quot;<span class="Constant">3</span>&quot; columns=&quot;<span class="Constant">50</span>&quot;&gt;&lt;/textarea&gt;&lt;br/&gt;
<span class="Statement">   @</span>    &lt;br/&gt;
<span class="Statement">   @</span>    &lt;label for=&quot;filename&quot;&gt;File:&lt;/label&gt;
<span class="Statement">   @</span>    &lt;input type=&quot;file&quot; name=&quot;file&quot; value=&quot;&quot;&gt;&lt;br&gt;&lt;br&gt;
<span class="Statement">   @</span>    &lt;input type=&quot;submit&quot; value=&quot;Submit&quot;&gt;
<span class="Statement">   @</span>&lt;/form&gt;
<span class="Statement">end-handler</span></pre>
<span id=rimstone_copied_116 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_116' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_116, code_116, rimstone_copied_116)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Create "list.rim" file and copy and paste:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_118' class=notranslate>
<span class="Statement">begin-handler</span> /list<span class="Identifier"> public</span>
<span class="Statement">    @</span>&lt;h2&gt;List of files&lt;/h2&gt;
<span class="Statement">    @</span>To add a file, &lt;a href=&quot;<span class="Statement">&lt;&lt;print-path</span> <span class="Constant">&quot;/start&quot;</span><span class="Statement">&gt;&gt;</span>&quot;&gt;click here&lt;/a&gt;&lt;br/&gt;&lt;br/&gt;
<span class="Statement">    @</span>&lt;table border=&quot;<span class="Constant">1</span>&quot;&gt;
<span class="Statement">    @</span>&lt;tr&gt;
<span class="Statement">    @</span>    &lt;td&gt;File&lt;/td&gt;&lt;td&gt;Description&lt;/td&gt;&lt;td&gt;Size&lt;/td&gt;&lt;td&gt;Show&lt;/td&gt;&lt;td&gt;Delete&lt;/td&gt;
<span class="Statement">    @</span>&lt;/tr&gt;
<span class="Statement">    run-query</span> @db= \
        <span class="Constant">&quot;select fileName, description, fileSize, fileID from files order by fileSize desc&quot;</span> \
       <span class="Type"> output</span> file_name, description<span class="Identifier"> noencode</span>, file_size, file_ID
<span class="Statement">        @</span>&lt;tr&gt;
<span class="Statement">        @</span>    &lt;td&gt;<span class="Statement">&lt;&lt;print-out</span> file_name<span class="Statement"> web-encode&gt;&gt;</span>&lt;/td&gt;&lt;td&gt;<span class="Statement">&lt;&lt;print-out</span> description<span class="Statement"> web-encode&gt;&gt;</span>&lt;td&gt;<span class="Statement">&lt;&lt;print-out</span> file_size<span class="Statement"> web-encode&gt;&gt;</span>&lt;/td&gt;
<span class="Statement">        @</span>    &lt;td&gt;&lt;a href=&quot;<span class="Statement">&lt;&lt;print-path</span> <span class="Constant">&quot;/download&quot;</span><span class="Statement">&gt;&gt;</span>/file_id=<span class="Statement">&lt;&lt;print-out</span> file_ID<span class="Statement"> url-encode&gt;&gt;</span>&quot;&gt;Show&lt;/a&gt;&lt;/td&gt;
<span class="Statement">        @</span>    &lt;td&gt;&lt;a href=&quot;<span class="Statement">&lt;&lt;print-path</span> <span class="Constant">&quot;/delete&quot;</span><span class="Statement">&gt;&gt;</span>/action=confirm/file_id=<span class="Statement">&lt;&lt;print-out</span> file_ID<span class="Statement"> url-encode&gt;&gt;</span>&quot;&gt;Delete&lt;/a&gt;&lt;/td&gt;
<span class="Statement">        @</span>&lt;/tr&gt;
<span class="Statement">    end-query</span>
<span class="Statement">    @</span>&lt;/table&gt;
<span class="Statement">end-handler</span></pre>
<span id=rimstone_copied_118 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_118' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_118, code_118, rimstone_copied_118)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Create "upload.rim" file and copy and paste:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_120' class=notranslate>
<span class="Statement">begin-handler</span> /upload<span class="Identifier"> public</span>
<span class="Statement">   get-param</span> filedesc      <span class="Comment">// file description from the upload form</span>
<span class="Statement">   get-upload</span> file<span class="Type"> local-file</span> file_location<span class="Type"> size</span> file_size \
      <span class="Type"> extension</span> file_ext<span class="Type"> client-file</span> file_filename
<span class="Statement">   @</span>&lt;h2&gt;Uploading file&lt;/h2&gt;
<span class="Statement">   run-query</span> @db= \
        <span class="Constant">&quot;insert into files (fileName, localPath, extension, description, fileSize) </span><span class="Special">\</span>
<span class="Constant">            values ('</span><span class="Special">%s</span><span class="Constant">', '</span><span class="Special">%s</span><span class="Constant">', '</span><span class="Special">%s</span><span class="Constant">', '</span><span class="Special">%s</span><span class="Constant">', '</span><span class="Special">%s</span><span class="Constant">')&quot;</span> \
       <span class="Identifier"> input</span> file_filename, file_location, file_ext, filedesc, $file_size
<span class="Statement">   end-query</span>
<span class="Statement">   @</span>File <span class="Statement">&lt;&lt;print-out</span> file_filename<span class="Statement"> web-encode&gt;&gt;</span> of size <span class="Statement">&lt;&lt;print-out</span> file_size <span class="Statement">&gt;&gt;</span> \
        is stored on server at <span class="Statement">&lt;&lt;print-out</span> file_location<span class="Statement"> web-encode&gt;&gt;</span>. \
        File description is <span class="Statement">&lt;&lt;print-out</span> filedesc<span class="Statement"> web-encode&gt;&gt;</span>.&lt;hr/&gt;
<span class="Statement">end-handler</span></pre>
<span id=rimstone_copied_120 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_120' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_120, code_120, rimstone_copied_120)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Create "download.rim" file and copy and paste:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_122' class=notranslate>
<span class="Statement">begin-handler</span> /download<span class="Identifier"> public</span>
<span class="Statement">    get-param</span> file_id
<span class="Statement">    run-query</span> @db= \
        <span class="Constant">&quot;select localPath,extension from files where fileID='</span><span class="Special">%s</span><span class="Constant">'&quot;</span> \
       <span class="Identifier"> input</span> file_id \
       <span class="Type"> output</span> local_path, ext \
       <span class="Type"> row-count</span> num_files
<span class="Statement">            if-true</span> ext<span class="Identifier"> equal</span> <span class="Constant">&quot;.jpg&quot;</span>
<span class="Statement">                send-file</span> local_path<span class="Identifier"> headers content-type</span> <span class="Constant">&quot;image/jpg&quot;</span>
<span class="Statement">            else-if</span> ext<span class="Identifier"> equal</span> <span class="Constant">&quot;.png&quot;</span>
<span class="Statement">                send-file</span> local_path<span class="Identifier"> headers content-type</span> <span class="Constant">&quot;image/png&quot;</span>
<span class="Statement">            else-if</span> ext<span class="Identifier"> equal</span> <span class="Constant">&quot;.pdf&quot;</span>
<span class="Statement">                send-file</span> local_path<span class="Identifier"> headers content-type</span> <span class="Constant">&quot;application/pdf&quot;</span>
<span class="Statement">            else-if</span>
<span class="Statement">                send-file</span> local_path<span class="Identifier"> headers content-type</span> <span class="Constant">&quot;application/octet-stream&quot;</span><span class="Identifier"> download</span>
<span class="Statement">            end-if</span>
<span class="Statement">    end-query</span>
<span class="Statement">    if-true</span> num_files<span class="Identifier"> not-equal</span> <span class="Constant">1</span>
<span class="Statement">        @</span>Cannot find this file!&lt;hr/&gt;
<span class="Statement">        exit-handler</span>
<span class="Statement">    end-if</span>
<span class="Statement">end-handler</span></pre>
<span id=rimstone_copied_122 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_122' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_122, code_122, rimstone_copied_122)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Create "delete.rim" file and copy and paste:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_124' class=notranslate>
<span class="Statement">begin-handler</span> /delete<span class="Identifier"> public</span>
<span class="Statement">   @</span>&lt;h2&gt;Delete a file&lt;/h2&gt;
<span class="Statement">   get-param</span> action
<span class="Statement">   get-param</span> file_id
<span class="Statement">   run-query</span> @db=<span class="Constant">&quot;select fileName, localPath, description  from files where fileID='</span><span class="Special">%s</span><span class="Constant">'&quot;</span><span class="Type"> output</span> file_name, local_path, desc<span class="Identifier"> input</span> file_id
<span class="Statement">        if-true</span> action<span class="Identifier"> equal</span> <span class="Constant">&quot;confirm&quot;</span> <span class="Comment">// get file information to confirm what will be deleted</span>
<span class="Statement">           @</span>Are you sure you want to delete file <span class="Statement">&lt;&lt;print-out</span> file_name<span class="Statement"> web-encode&gt;&gt;</span> (<span class="Statement">&lt;&lt;print-out</span> desc<span class="Statement"> web-encode&gt;&gt;</span>)? Click &lt;a href=&quot;<span class="Statement">&lt;&lt;print-path</span> <span class="Constant">&quot;/delete&quot;</span><span class="Statement">&gt;&gt;</span>?action=delete&amp;amp;file_id=<span class="Statement">&lt;&lt;print-out</span> file_id<span class="Statement"> url-encode&gt;&gt;</span>&quot;&gt;Delete&lt;/a&gt; or click the browser's Back button to go back.&lt;br/&gt;
<span class="Statement">        else-if</span> action<span class="Identifier"> equal</span> <span class="Constant">&quot;delete&quot;</span>  <span class="Comment">// actual delete file, once confirmed</span>
<span class="Statement">           begin-transaction</span> @db
<span class="Statement">           run-query</span> @db= <span class="Constant">&quot;delete from files where fileID='</span><span class="Special">%s</span><span class="Constant">'&quot;</span><span class="Identifier"> input</span> file_id<span class="Type"> error</span> err<span class="Identifier"> no-loop</span>
<span class="Statement">           if-true</span> err<span class="Identifier"> not-equal</span> <span class="Constant">&quot;0&quot;</span>
<span class="Statement">               @</span>Could not delete the file (error <span class="Statement">&lt;&lt;print-out</span> err<span class="Statement"> web-encode&gt;&gt;</span>)
<span class="Statement">               rollback-transaction</span> @db
<span class="Statement">           else-if</span>
<span class="Statement">               delete-file</span> local_path<span class="Type"> status</span> st
<span class="Statement">               if-true</span> st<span class="Identifier"> equal</span> RIM_OKAY
<span class="Statement">                   commit-transaction</span> @db
<span class="Statement">                   @</span>File deleted. Go back to &lt;a href=&quot;<span class="Statement">&lt;&lt;print-path</span> <span class="Constant">&quot;/start&quot;</span><span class="Statement">&gt;&gt;</span>&quot;&gt;start page&lt;/a&gt;
<span class="Statement">               else-if</span>
<span class="Statement">                   rollback-transaction</span> @db
<span class="Statement">                   @</span>File could not be deleted, error <span class="Statement">&lt;&lt;print-out</span> st<span class="Statement">&gt;&gt;</span>
<span class="Statement">               end-if</span>
<span class="Statement">           end-if</span>
<span class="Statement">        else-if</span>
<span class="Statement">           @</span>Unrecognized action <span class="Statement">&lt;&lt;print-out</span> action<span class="Statement"> web-encode&gt;&gt;</span>
<span class="Statement">        end-if</span>
<span class="Statement">   end-query</span>
<span class="Statement">end-handler</span></pre>
<span id=rimstone_copied_124 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_124' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_124, code_124, rimstone_copied_124)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Make the application:<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_125' class=notranslate>
rim <span class="Special">-q</span> <span class="Special">--db</span><span class="Statement">=</span>postgres:db</pre>
<span id=rimstone_copied_125 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_125' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_125, code_125, rimstone_copied_125)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Run your application server:<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_126' class=notranslate>
mrim file-manager</pre>
<span id=rimstone_copied_126 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_126' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_126, code_126, rimstone_copied_126)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
A web server sits in front of RimStone application server, so it needs to be setup. This example is for Ubuntu, so edit Nginx config file there:<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_127' class=notranslate>
sudo vi /etc/nginx/sites-enabled/default</pre>
<span id=rimstone_copied_127 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_127' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_127, code_127, rimstone_copied_127)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Add this in "server {}" section ("client_max_body_size" allows for images of typical sizes to be uploaded), replace "your-user" with the name of your OS user:<br/>
<div class='ncode' style='position:relative;padding-right:16px;'>
<pre id='code_115' class=notranslate>
location /file-manager/ { include /etc/nginx/fastcgi_params; fastcgi_pass  unix:///home/your-user/.rimstone/apps/file-manager/sock/.sock; }
client_max_body_size 100M;</pre>
<span id=rimstone_copied_115 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_115' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_115, code_115, rimstone_copied_115)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Restart Nginx:<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_128' class=notranslate>
sudo systemctl restart nginx</pre>
<span id=rimstone_copied_128 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_128' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_128, code_128, rimstone_copied_128)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Go to your web browser, and enter:<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_129' class=notranslate>
<a href="http://">http://</a><span class="Constant">127</span>.<span class="Constant">0</span>.<span class="Constant">0</span>.<span class="Constant">1</span>/file-manager/start</pre>
<span id=rimstone_copied_129 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_129' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_129, code_129, rimstone_copied_129)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
This is what the end result looks like. Obviously, we used just bare-bone HTML, but that's not the point here at all. You can use any kind of front-end technology, the point is to demonstrate RimStone as a back-end server for web applications/services.<br/>
<br/>
Here's the home screen, with the form to upload a file and a link to list of files:<br/>
<br/><div class='vimg'><img class='imgs' src='file-manager-home.png' alt='RimStone'></img>
</div><br/>
Listing files:<br/>
<br/><div class='vimg'><img class='imgs' src='file-manager-list.png' alt='RimStone'></img>
</div><br/>
Asking to delete a file:<br/>
<br/><div class='vimg'><img class='imgs' src='file-manager-delete.png' alt='RimStone'></img>
</div><br/>
Confirmation of deletion:<br/>
<br/><div class='vimg'><img class='imgs' src='file-manager-delete-done.png' alt='RimStone'></img>
</div><br/>
<a id='article-hello-server.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:left;background-color:white;'><a href='https://rimstone-lang.com' style='border-bottom:0px'><img src='https://rimstone-lang.com/rimstone.png' style='width:180px;height:auto'/></a></div><div class='vhub' style='margin-top:10px;'>34000 requests per second on a modest laptop</div><hr/><br/>
This example shows how to create and start an application server, and how to connect to it and make requests from a C client (or from any language that supports C API extension). Create new directory for the RimStone server and also for C API client:<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_131' class=notranslate>
<span class="Statement">mkdir</span> <span class="Special">-p</span> srv-example
<span class="Statement">cd</span> srv-example
<span class="Statement">mkdir</span> <span class="Special">-p</span> client</pre>
<span id=rimstone_copied_131 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_131' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_131, code_131, rimstone_copied_131)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
File "srv.rim" will have the code:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_130' class=notranslate>
cat &lt;&lt; '<span class="Constant">EOF</span>' &gt; srv.rim
<span class="Statement">begin-handler</span> /srv<span class="Identifier"> public</span>
<span class="Statement">    silent-header</span>
<span class="Statement">    @</span>Hello world!
<span class="Statement">end-handler</span>
<span class="Constant">EOF</span></pre>
<span id=rimstone_copied_130 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_130' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_130, code_130, rimstone_copied_130)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Create RimStone application server:<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_133' class=notranslate>
rim <span class="Special">-k</span> hello</pre>
<span id=rimstone_copied_133 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_133' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_133, code_133, rimstone_copied_133)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Build RimStone application server (exclude client directory as it contains C API client). We use --release for a production executable of high performance:<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_134' class=notranslate>
rim <span class="Special">-q</span> <span class="Special">--exclude-dir</span><span class="Statement">=</span>client <span class="Special">--release</span></pre>
<span id=rimstone_copied_134 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_134' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_134, code_134, rimstone_copied_134)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Start the application server (a single-process server in this case):<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_135' class=notranslate>
mrim <span class="Special">-w</span> <span class="Constant">1</span> hello</pre>
<span id=rimstone_copied_135 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_135' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_135, code_135, rimstone_copied_135)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Next, go to C API client directory:<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_136' class=notranslate>
<span class="Statement">cd</span> client</pre>
<span id=rimstone_copied_136 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_136' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_136, code_136, rimstone_copied_136)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
C file "cli.c" is created here:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_132' class=notranslate>
cat &lt;&lt; '<span class="Constant">EOF</span>' &gt; cli.c
<span class="PreProc">#include </span><span class="Constant">&quot;rcli.h&quot;</span>

<span class="Type">int</span> golf_client (rim_cli *req, <span class="Type">char</span> *connection, <span class="Type">char</span> *method, <span class="Type">char</span> *app_path, <span class="Type">char</span> *request, <span class="Type">char</span> *url_params);

<span class="Type">int</span> golf_client (rim_cli *req, <span class="Type">char</span> *connection, <span class="Type">char</span> *method, <span class="Type">char</span> *app_path, <span class="Type">char</span> *request, <span class="Type">char</span> *url_params)
<span class="Statement">{</span>
    memset ((<span class="Type">char</span>*)req, <span class="Constant">0</span>, <span class="Statement">sizeof</span>(rim_cli));
    req-&gt;server = connection;
    req-&gt;req_method = method;
    req-&gt;app_path = app_path;
    req-&gt;req = request;
    req-&gt;url_params = url_params;
    <span class="Statement">return</span> rim_cli_request (req);
<span class="Statement">}</span>

<span class="Type">void</span> main ()
<span class="Statement">{</span>
    <span class="Type">int</span> i;
    <span class="Type">char</span> dir[RIM_MAX_OS_UDIR_LEN];
    rim_dir (RIM_DIR_SOCKFILE, dir, <span class="Statement">sizeof</span>(dir), <span class="Constant">&quot;hello&quot;</span>, <span class="Constant">NULL</span>);
    <span class="Statement">for</span> (i = <span class="Constant">0</span>; i &lt; <span class="Constant">100000</span>; i++)
<span class="Statement">    {</span>
        rim_cli req;
        <span class="Type">int</span> res = golf_client (&amp;req, dir, <span class="Constant">&quot;GET&quot;</span>, <span class="Constant">&quot;/hello&quot;</span>, <span class="Constant">&quot;/srv&quot;</span>, <span class="Constant">&quot;/&quot;</span>);
        <span class="Statement">if</span> (res != RIM_OKAY) printf(<span class="Constant">&quot;Request failed [</span><span class="Special">%d</span><span class="Constant">] [</span><span class="Special">%s</span><span class="Constant">]</span><span class="Special">\n</span><span class="Constant">&quot;</span>, res, req.errm);
        <span class="Statement">else</span> printf(<span class="Constant">&quot;</span><span class="Special">%s</span><span class="Constant">&quot;</span>, rim_cli_data(&amp;req));
        rim_cli_delete(&amp;req);
<span class="Statement">    }</span>
<span class="Statement">}</span>
<span class="Constant">EOF</span></pre>
<span id=rimstone_copied_132 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_132' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_132, code_132, rimstone_copied_132)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Compile the client:<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_137' class=notranslate>
gcc <span class="Special">-o</span> cli cli.c <span class="PreProc">$(</span><span class="Special">rim </span><span class="Special">-i</span><span class="PreProc">)</span> <span class="Special">-O</span>3</pre>
<span id=rimstone_copied_137 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_137' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_137, code_137, rimstone_copied_137)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Run it:<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_138' class=notranslate>
./cli</pre>
<span id=rimstone_copied_138 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_138' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_138, code_138, rimstone_copied_138)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
The result is "Hello world!" 100,000 times from each request invocation.<br/>
<a id='article-hello-world.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:left;background-color:white;'><a href='https://rimstone-lang.com' style='border-bottom:0px'><img src='https://rimstone-lang.com/rimstone.png' style='width:180px;height:auto'/></a></div><div class='vhub' style='margin-top:10px;'>Hello World in RimStone</div><hr/><br/>
Create a directory for your Hello World application and then switch to it:<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_141' class=notranslate>
<span class="Statement">mkdir</span> hello-world
<span class="Statement">cd</span> hello-world</pre>
<span id=rimstone_copied_141 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_141' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_141, code_141, rimstone_copied_141)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Create the application:<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_142' class=notranslate>
rim <span class="Special">-k</span> hello</pre>
<span id=rimstone_copied_142 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_142' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_142, code_142, rimstone_copied_142)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Create a file hello-world.rim with this code in it:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_140' class=notranslate>
cat &lt;&lt; '<span class="Constant">EOF</span>' &gt; hello-world.rim
<span class="Statement">begin-handler</span> /hello-world<span class="Identifier"> public</span>
<span class="Statement">    get-param</span> name
<span class="Statement">    @</span>This is Hello World from <span class="Statement">&lt;&lt;print-out</span> name<span class="Statement">&gt;&gt;</span>
<span class="Statement">end-handler</span>
<span class="Constant">EOF</span></pre>
<span id=rimstone_copied_140 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_140' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_140, code_140, rimstone_copied_140)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
This service takes input parameter "name" (see <a href='/get-param.html'>get-param</a>), and then outputs it along with a greeting message (see <a href='/output-statement.html'>output-statement</a>).<br/>
<br/>
Compile the application:<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_143' class=notranslate>
rim <span class="Special">-q</span></pre>
<span id=rimstone_copied_143 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_143' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_143, code_143, rimstone_copied_143)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Run the application by executing this service from command line. Note passing the input parameter "name" with value "Mike":<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_144' class=notranslate>
rim <span class="Special">-r</span> <span class="Special">--req</span><span class="Statement">=</span><span class="Statement">&quot;</span><span class="Constant">/hello-world/name=Mike</span><span class="Statement">&quot;</span> <span class="Special">--exec</span> <span class="Special">--silent-header</span></pre>
<span id=rimstone_copied_144 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_144' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_144, code_144, rimstone_copied_144)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
The output is:<br/>
<div class='ncode' style='position:relative;padding-right:16px;'>
<pre id='code_139' class=notranslate>
This is Hello World from Mike</pre>
<span id=rimstone_copied_139 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_139' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_139, code_139, rimstone_copied_139)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<a id='article-hello-world-service.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:left;background-color:white;'><a href='https://rimstone-lang.com' style='border-bottom:0px'><img src='https://rimstone-lang.com/rimstone.png' style='width:180px;height:auto'/></a></div><div class='vhub' style='margin-top:10px;'>Hello World as a Service</div><hr/><br/>
Writing a <a href='/service.html'>service</a> is the same as writing a <a href='/command-line.html'>command-line</a> program in RimStone. Both take the same input and produce the same output, so you can test with either one to begin with.<br/>
<br/>
For that reason, create first <a href='/article-hello-world.html'>article-hello-world</a> as a command-line program.<br/>
<br/>
The only thing to do afterwards is to start up Hello World as application server:<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_146' class=notranslate>
mrim hello</pre>
<span id=rimstone_copied_146 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_146' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_146, code_146, rimstone_copied_146)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Now there's a number of resident processes running, expecting clients requests. You can see those processes:<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_148' class=notranslate>
ps <span class="Special">-ef</span>|<span class="Statement">grep</span> hello</pre>
<span id=rimstone_copied_148 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_148' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_148, code_148, rimstone_copied_148)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
The result:<br/>
<div class='ncode' style='position:relative;padding-right:16px;'>
<pre id='code_145' class=notranslate>
bear       25772    2311  0 13:04 ?        00:00:00 mrim hello
bear       25773   25772  0 13:04 ?        00:00:00 /home/user/.rimstone/apps/hello/.bld/hello.srvc
bear       25774   25772  0 13:04 ?        00:00:00 /home/user/.rimstone/apps/hello/.bld/hello.srvc
bear       25775   25772  0 13:04 ?        00:00:00 /home/user/.rimstone/apps/hello/.bld/hello.srvc
bear       25776   25772  0 13:04 ?        00:00:00 /home/user/.rimstone/apps/hello/.bld/hello.srvc
bear       25777   25772  0 13:04 ?        00:00:00 /home/user/.rimstone/apps/hello/.bld/hello.srvc</pre>
<span id=rimstone_copied_145 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_145' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_145, code_145, rimstone_copied_145)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
"mrim hello" runs the RimStone process manager for application "hello". A number of ".../hello.srvc" processes are server processes that will handle service request sent to application "hello".<br/>
<br/>
Now, to test your service, you can send a request to the server from command line (by using "--service" option):<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_149' class=notranslate>
rim <span class="Special">-r</span> <span class="Special">--req</span><span class="Statement">=</span><span class="Statement">&quot;</span><span class="Constant">/hello-world/name=Mike</span><span class="Statement">&quot;</span> <span class="Special">--exec</span> <span class="Special">--silent-header</span> <span class="Special">--service</span></pre>
<span id=rimstone_copied_149 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_149' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_149, code_149, rimstone_copied_149)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
The above will make a request to one of the processes above, which will then reply:<br/>
<div class='ncode' style='position:relative;padding-right:16px;'>
<pre id='code_147' class=notranslate>
This is Hello World from Mike</pre>
<span id=rimstone_copied_147 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_147' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_147, code_147, rimstone_copied_147)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<a id='article-hello-world-service-web.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:left;background-color:white;'><a href='https://rimstone-lang.com' style='border-bottom:0px'><img src='https://rimstone-lang.com/rimstone.png' style='width:180px;height:auto'/></a></div><div class='vhub' style='margin-top:10px;'>Web service Hello World</div><hr/><br/>
To access a RimStone service on the web, you need to have a web server or load balancer (think Apache, Nginx, HAProxy etc.).<br/>
<br/>
This assumes you have completed the <a href='/article-hello-world-service.html'>article-hello-world-service</a>, with a service built and tested via command line.<br/>
<br/>
In this example, Nginx web server is used; edit its configuration file. For Ubuntu and similar:<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_151' class=notranslate>
sudo vi /etc/nginx/sites-enabled/default</pre>
<span id=rimstone_copied_151 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_151' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_151, code_151, rimstone_copied_151)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
while on Fedora and other systems it might be:<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_152' class=notranslate>
sudo vi /etc/nginx/nginx.conf</pre>
<span id=rimstone_copied_152 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_152' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_152, code_152, rimstone_copied_152)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Add the following in the "server {}" section:<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_153' class=notranslate>
location /hello/ <span class="Special">{</span> include /etc/nginx/fastcgi_params<span class="Statement">;</span> fastcgi_pass  unix:///home/your-user/.rimstone/apps/hello/sock/.sock<span class="Statement">;</span> <span class="Special">}</span></pre>
<span id=rimstone_copied_153 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_153' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_153, code_153, rimstone_copied_153)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
"hello" refers to your Hello World application. Finally, restart Nginx:<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_154' class=notranslate>
sudo systemctl restart nginx</pre>
<span id=rimstone_copied_154 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_154' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_154, code_154, rimstone_copied_154)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Now you can call your web service, from the web. In this case it's probably a local server (127.0.0.1) if you're doing this on your own computer. The URL would be:<br/>
<div class='ncode' style='position:relative;padding-right:16px;'>
<pre id='code_150' class=notranslate>
http://127.0.0.1/hello/hello-world/name=Mike</pre>
<span id=rimstone_copied_150 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_150' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_150, code_150, rimstone_copied_150)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Note the URL <a href='/request.html'>request</a> structure: first comes the application path ("/hello") followed by request path ("/hello-world") followed by URL parameters ("/name=Mike"). The result:<br/>
<br/><div class='vimg'><img class='imgs' src='hello-world-web.png' alt='RimStone'></img>
</div><br/>
<a id='article-how-to-create-rimstone-application.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:left;background-color:white;'><a href='https://rimstone-lang.com' style='border-bottom:0px'><img src='https://rimstone-lang.com/rimstone.png' style='width:180px;height:auto'/></a></div><div class='vhub' style='margin-top:10px;'>How to create a RimStone application</div><hr/><br/>
To create a RimStone application, use "-k" option of rim utility:<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_155' class=notranslate>
rim <span class="Special">-k</span> my-app</pre>
<span id=rimstone_copied_155 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_155' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_155, code_155, rimstone_copied_155)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
where "my-app" is your application name. If you already have an application with that name, nothing is done, so this is an idempotent operation.<br/>
<br/>
If you already have source code, you can create and compile your application in one step:<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_156' class=notranslate>
rim <span class="Special">-k</span> my-app <span class="Special">-q</span></pre>
<span id=rimstone_copied_156 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_156' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_156, code_156, rimstone_copied_156)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
which is a neat shortcut.<br/>
<a id='article-installing-rimstone.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:left;background-color:white;'><a href='https://rimstone-lang.com' style='border-bottom:0px'><img src='https://rimstone-lang.com/rimstone.png' style='width:180px;height:auto'/></a></div><div class='vhub' style='margin-top:10px;'>Here's what installing RimStone looks like</div><hr/><br/>
The installation script is "riminst.sh". It installs RimStone in a location folder ".rimstone" (under home directory), so a base installation does not require sudo. However, some external components do. For instance, if you want to access a database you'll need a database access library, or to use regex expressions you'll need PCRE2 library etc. These are industry-standard tried-and-true Free Open Source libraries; using them helps with reliability and safety. These libraries are called "toolkit" libraries for obvious reasons. You don't have to install them immediately, but rather only when you need them. When you build an application that needs one of them, RimStone will ask you to install it, along with the instructions on how to do it.<br/>
<br/>
RimStone is installed as source code only and then compiled during the install. The reason is safety, usability and performance:<br/>
<ul><li>Safety, because there's no binaries installed, so you don't have to worry if they are what they're claimed to be. <br/>
</li><li>Usability because there's no distribution-specific package. With source code, your chances of being able to install RimStone on a very wide range of Linux distributions are better.<br/>
</li><li>Performance, because RimStone uses LTO (Link Time Optimization) to build everything (both RimStone and your applications), essentially treating all RimStone source code as part of your program (sort of like a whole source code approach), which allows the C compiler to make all possible performance optimizations, that are generally not possible when linking with language libraries. This is something that sets RimStone apart in terms of performance.</li></ul>
RimStone uses gcc toolchain, and if it's not installed, it will need to be, for which you'll need sudo privilege.<br/>
<br/>
And finally if you use SELinux (such as on Fedora-based distributions), you'll need sudo, which is a system requirement to make SELinux modules. If you don't want to, you can use "permissive" SELinux mode, or develop on a different distribution, and you won't be asked.<br/>
<br/>
Here's the output from a typical "riminst.sh" run. It's all a single installation, and the output is broken into multiples just for clarity.<br/>
<br/>
This is done on a "bare bone" server Linux system, which doesn't have the gcc toolchain or any of the toolkit libraries. It's a Fedora system, so you can see how's SELinux installation handled too. First you'll be asked to install the gcc toolchain. If you don't want riminst.sh to do it, you can copy and paste the instructions below (i.e. the sudo dnf ...) and execute them yourself first, and then come back and run installation again. Since it checks if those are installed, you won't be asked again to install them:<br/>
<div class='ncode' style='position:relative;padding-right:16px;'>
<pre id='code_157' class=notranslate>
$ ./riminst.sh
*** Some required base packages are not installed. Here is how to install them:

sudo dnf -y install  gcc
sudo dnf -y install  make
sudo dnf -y install  pkgconf
sudo dnf -y install  tar
sudo dnf -y install  policycoreutils policycoreutils-devel libselinux-utils

Do you want to install them now (you will need sudo privilege)? (y/N)y
sudo dnf -y install  gcc
Installing [gcc]...
[sudo] password for dasoftver:
sudo dnf -y install  tar
Installing [tar]...
sudo dnf -y install  policycoreutils policycoreutils-devel libselinux-utils
Installing [SELinux-devel]...</pre>
<span id=rimstone_copied_157 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_157' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_157, code_157, rimstone_copied_157)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Now riminst.sh will ask you if you wish to install the toolkit libraries. You can say no (by pressing N) and install them when you need them. RimStone will alert you when they are needed, and show you the instructions like below (i.e. the sudo dnf ...). You can also cancel the installation (by pressing Ctrl-C) and copy and paste those instructions and install them yourself, and then run installation again, so you won't be asked this. Finally, you can let riminst.sh to install these for you, which is what's shown below:<br/>
<div class='ncode' style='position:relative;padding-right:16px;'>
<pre id='code_158' class=notranslate>
*** Some toolkit packages are not installed. Here is how to install them:

sudo dnf -y install  libpq-devel
sudo dnf -y install  mariadb-connector-c-devel
sudo dnf -y install  sqlite-devel
sudo dnf -y install  openssl-devel
sudo dnf -y install  libxml2-devel
sudo dnf -y install  libcurl-devel
sudo dnf -y install  pcre2-devel

If you will use features provided by these toolkits, you will need to install them. You can also install them later; RimStone will let you know and show the installation instructions when you compile a program that needs such a feature. If you are not sure, or do not want interruptions later, you can install the toolkit packages now.
Do you want to install them now (you will need sudo privilege)? (y/N)y
sudo dnf -y install  libpq-devel
Installing [libpq-devel]...
sudo dnf -y install  mariadb-connector-c-devel
Installing [mariadb-connector-c-devel]...
sudo dnf -y install  sqlite-devel
Installing [sqlite-devel]...
sudo dnf -y install  libxml2-devel
Installing [libxml2-devel]...
sudo dnf -y install  libcurl-devel
Installing [libcurl-devel]...
sudo dnf -y install  pcre2-devel
Installing [pcre2-devel]...</pre>
<span id=rimstone_copied_158 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_158' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_158, code_158, rimstone_copied_158)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Next, RimStone will build itself. It will create LTO modules, which allow RimStone code to link with your application in a way that increases performance, as I described above (with LTO):<br/>
<div class='ncode' style='position:relative;padding-right:16px;'>
<pre id='code_159' class=notranslate>
Making RimStone binaries and libraries, please wait...
..............................................................Built RimStone binaries (devel)
Creating RimStone directories (devel)
Copying RimStone binaries (devel)
..............................................................Built RimStone binaries (release)
Creating RimStone directories (release)
Copying RimStone binaries (release)</pre>
<span id=rimstone_copied_159 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_159' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_159, code_159, rimstone_copied_159)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Next, the SELinux modules are compiled (they are distributed as source too, see files below):<br/>
<div class='ncode' style='position:relative;padding-right:16px;'>
<pre id='code_160' class=notranslate>
Setting up SELinux...
Since you have SELinux enabled, you must setup SELinux for RimStone. sudo privilege is required by the Operating System to complete this. The script [sudo /home/dasoftver/.rimstone/lib/selinux/selinux.setup] will run next. Press Enter to continue.
Compiling targeted rim module
Creating targeted rr.pp policy package
rm tmp/rim.mod tmp/rim.mod.fc
Setting environment variables...
Setting permissions...</pre>
<span id=rimstone_copied_160 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_160' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_160, code_160, rimstone_copied_160)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Finally, help man pages are installed, so you can get help (i.e. "man read-file" from command line to get help on statement <a href='/read-file.html'>read-file</a>). Of course, you can always use the RimStone's web site and it's documentation (it's the same documentation), but in a pinch it's useful to quickly get help from command line:<br/>
<div class='ncode' style='position:relative;padding-right:16px;'>
<pre id='code_161' class=notranslate>
/usr/bin/mandb
Setting man pages...
mandb: warning: $MANPATH set, appending /etc/man_db.conf
Processing manual pages under /home/dasoftver/.rimstone/man...
Updating index cache for path `/home/dasoftver/.rimstone/man/man2&apos;. Wait...done.
Checking for stray cats under /home/dasoftver/.rimstone/man...
Processing manual pages under /home/dasoftver/.rimstone/man/cat2...
1 man subdirectory contained newer manual pages.
245 manual pages were added.
0 stray cats were added.</pre>
<span id=rimstone_copied_161 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_161' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_161, code_161, rimstone_copied_161)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Next, just run .bashrc to set up RimStone's PATH variables:<br/>
<div class='ncode' style='position:relative;padding-right:16px;'>
<pre id='code_162' class=notranslate>
$ . $HOME/.bashrc</pre>
<span id=rimstone_copied_162 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_162' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_162, code_162, rimstone_copied_162)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
And you have installed RimStone! You can now try the examples, or start writing your applications!<br/>
<br/>
To install RimStone takes only a few minutes. Go to <a href='/install-rimstone.html'>install-rimstone</a> for instructions.<br/>
<a id='article-json.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:left;background-color:white;'><a href='https://rimstone-lang.com' style='border-bottom:0px'><img src='https://rimstone-lang.com/rimstone.png' style='width:180px;height:auto'/></a></div><div class='vhub' style='margin-top:10px;'>Fast JSON parser with little coding</div><hr/><br/>
RimStone's JSON parser produces an array of name/value pairs. A name is a path to value, for instance "country"."state"."name", and the value is simply the data associated with it, for instance "Idaho". You can control if the name contains array indexes or not, for instance if there are multiple States in the document, you might have names like "country"."state"[0]."name" with [..] designating an array element.<br/>
<br/>
You can iterate through this array and get names of JSON elements, examine if they are of interest to you, and if so, get the values. This typical scenario is how RimStone's parser is built, since it uses a "lazy" approach, where values are not allocated until needed, speeding up parsing. That is the case in this example. The JSON document below is examined and only the names of the cities are extracted.<br/>
<br/>
You can also store JSON elements into trees or hashes for future fast retrieval, or store them into a database, etc.<br/>
<br/>
To get started, create a directory for this example and position in it:<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_165' class=notranslate>
<span class="Statement">mkdir</span> <span class="Special">-p</span> json
<span class="Statement">cd</span> json</pre>
<span id=rimstone_copied_165 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_165' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_165, code_165, rimstone_copied_165)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
JSON will be in file "countries.json" - we will get the names of the cities from it:<br/>
<div class='ncode' style='position:relative;padding-right:16px;'>
<pre id='code_163' class=notranslate>
cat &lt;&lt; &apos;EOF&apos; &gt; countries.json
{ &quot;country&quot;: [
    { 
        &quot;name&quot;: &quot;USA&quot;,
        &quot;state&quot;: [
            { 
                &quot;name&quot;: &quot;Arizona&quot;,
                &quot;city&quot;: [
                    {
                        &quot;name&quot; : &quot;Phoenix&quot;,
                        &quot;population&quot;: 5000000
            	    } ,
                    {
                        &quot;name&quot; : &quot;Tuscon&quot;,
                        &quot;population&quot;: 1000000
            	    } 

                ]
            } ,
            { 
                &quot;name&quot;: &quot;California&quot;,
                &quot;city&quot;: [
                    {
                        &quot;name&quot; : &quot;Los Angeles&quot;,
                        &quot;population&quot;: 19000000
            	    },
                    {
                        &quot;name&quot; : &quot;Irvine&quot;
            	    }
                ]
            } 
        ] 
    } ,
    { 
        &quot;name&quot;: &quot;Mexico&quot;,
        &quot;state&quot;: [
            { 
                &quot;name&quot;: &quot;Veracruz&quot;,
                &quot;city&quot;: [
                    {
                        &quot;name&quot; : &quot;Xalapa-Enr\u00edquez&quot;,
                        &quot;population&quot;: 8000000
            	    },
                    {
                        &quot;name&quot; : &quot;C\u00F3rdoba&quot;,
                        &quot;population&quot;: 220000
            	    }
                ]
            } ,
            { 
                &quot;name&quot;: &quot;Sinaloa&quot;,
                &quot;city&quot;: [
                    {
                        &quot;name&quot; : &quot;Culiac\u00E1n Rosales&quot;,
                        &quot;population&quot;: 3000000
            	    }
                ]
            } 
        ] 
    }
    ]
}
EOF</pre>
<span id=rimstone_copied_163 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_163' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_163, code_163, rimstone_copied_163)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
What follows is the code to parse JSON. We open a JSON file, process the document, check for errors, and then read elements one by one. We look for a key "country"."state"."city"."name" because those contains city names. Note use "no-enum" clause in <a href='/json-doc.html'>json-doc</a> (which is the RimStone's JSON parser), so that element designations aren't showing (meaning we don't have [0], [1] etc. for arrays). <br/>
<br/>
Thi code will be in "parse-json.rim":<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_164' class=notranslate>
cat &lt;&lt; '<span class="Constant">EOF</span>' &gt; parse-json.rim
<span class="Statement">begin-handler</span> /parse-json<span class="Identifier"> public</span>
    <span class="Comment">// Read the JSON file</span>
<span class="Statement">    read-file</span> <span class="Constant">&quot;countries.json&quot;</span><span class="Type"> to</span> countries<span class="Type"> status</span> st
<span class="Statement">    if-true</span> st<span class="Identifier"> lesser-equal</span> <span class="Constant">0</span>
<span class="Statement">        @</span>Cannot read file or file empty
<span class="Statement">        exit-handler</span> -<span class="Constant">1</span>
<span class="Statement">    end-if</span>

    <span class="Comment">// Parse JSON</span>
<span class="Statement">    json-doc</span> countries<span class="Identifier"> no-enum</span><span class="Type"> status</span> st<span class="Type"> error-text</span> et<span class="Type"> error-position</span> ep<span class="Type"> to</span> json

    <span class="Comment">// Check for errors in JSON document</span>
<span class="Statement">    if-true</span> st<span class="Identifier"> not-equal</span> RIM_OKAY
<span class="Statement">        @</span>Error [<span class="Statement">&lt;&lt;print-out</span> et<span class="Statement">&gt;&gt;</span>] at [<span class="Statement">&lt;&lt;print-out</span> ep<span class="Statement">&gt;&gt;</span>]
<span class="Statement">        exit-handler</span> -<span class="Constant">2</span>
<span class="Statement">    end-if</span>

    <span class="Comment">// This is the JSON element we're looking for</span>
<span class="Statement">    set-string</span> city_name<span class="Identifier"> unquoted</span> =<span class="Constant">&quot;country&quot;</span>.<span class="Constant">&quot;state&quot;</span>.<span class="Constant">&quot;city&quot;</span>.<span class="Constant">&quot;name&quot;</span>

    <span class="Comment">// Read elements one by one - note you can then store them in a tree or hash for future fast searches</span>
<span class="Statement">    start-loop</span>
        <span class="Comment">// Read just a key</span>
<span class="Statement">        read-json</span> json<span class="Type"> key</span> k<span class="Type"> type</span> t
        <span class="Comment">// Exit if end of document</span>
<span class="Statement">        if-true</span> t<span class="Identifier"> equal</span> RIM_JSON_TYPE_NONE
<span class="Statement">            break-loop</span>
<span class="Statement">        end-if</span>
        <span class="Comment">// If matches key we're looking for, get the value, and output it</span>
<span class="Statement">        if-true</span> city_name<span class="Identifier"> equal</span> k
<span class="Statement">            read-json</span> json<span class="Type"> value</span> v
<span class="Statement">            @</span>Value [<span class="Statement">&lt;&lt;print-out</span> v<span class="Statement">&gt;&gt;</span>]
<span class="Statement">            @</span>--------
<span class="Statement">        end-if</span>
        <span class="Comment">// Move on to the next JSON element</span>
<span class="Statement">        read-json</span> json<span class="Identifier"> next</span>
<span class="Statement">    end-loop</span>

    <span class="Comment">// Optionally delete JSON object, or it will be automatically deleted</span>
<span class="Statement">    json-doc</span><span class="Identifier"> delete</span> json
<span class="Statement">end-handler</span>
<span class="Constant">EOF</span></pre>
<span id=rimstone_copied_164 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_164' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_164, code_164, rimstone_copied_164)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Create "json" application ("-k") and compile it ("-q"):<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_167' class=notranslate>
rim <span class="Special">-k</span> json <span class="Special">-q</span></pre>
<span id=rimstone_copied_167 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_167' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_167, code_167, rimstone_copied_167)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Copy the above JSON file into application home directory so we can use it without a path (since this directory is your program's default directory) - you can, of course, also specify any absolute or relative path in RimStone code above:<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_168' class=notranslate>
<span class="Statement">cp</span> countries.json ~/.rimstone/apps/json/app</pre>
<span id=rimstone_copied_168 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_168' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_168, code_168, rimstone_copied_168)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Run it:<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_169' class=notranslate>
rim <span class="Special">-r</span> <span class="Special">--req</span><span class="Statement">=</span><span class="Statement">&quot;</span><span class="Constant">/parse-json</span><span class="Statement">&quot;</span> <span class="Special">--exec</span></pre>
<span id=rimstone_copied_169 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_169' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_169, code_169, rimstone_copied_169)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
The result is:<br/>
<div class='ncode' style='position:relative;padding-right:16px;'>
<pre id='code_166' class=notranslate>
Content-Type: text/html;charset=utf-8
Cache-Control: max-age=0, no-cache
Pragma: no-cache
Status: 200 OK

Value [Phoenix]
--------
Value [Tuscon]
--------
Value [Los Angeles]
--------
Value [Irvine]
--------
Value [Xalapa-Enrquez]
--------
Value [Crdoba]
--------
Value [Culiacn Rosales]</pre>
<span id=rimstone_copied_166 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_166' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_166, code_166, rimstone_copied_166)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
RimStone programs work exactly the same when you run them from command line as they do as web services or applications, hence you get the HTTP header in the output. You can avoid it by using <a href='/silent-header.html'>silent-header</a> in your RimStone code, or by using "--silent-header" option in the above <a href='/rim.html'>rim</a> execution call. <br/>
<br/>
You can also omit "--exec" option in the above rim execution call, which will display environment variable settings and the path to your executable. Then you can run those directly. This is useful if you're running a RimStone command line program in batch mode from command line repeatedly, as it's faster than using <a href='/rim.html'>rim</a>.<br/>
<a id='article-language.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:left;background-color:white;'><a href='https://rimstone-lang.com' style='border-bottom:0px'><img src='https://rimstone-lang.com/rimstone.png' style='width:180px;height:auto'/></a></div><div class='vhub' style='margin-top:10px;'>RimStone is a different kind of programming language</div><hr/><br/>
<div class="vsub"><a id="From a bicycle to a rocket"></a>From a bicycle to a rocket</div>
Over the past 50 years, most general-purpose programming languages became more complex due to the constant influx of new features (some of which are great, while others are a "feature creep"). Just look at some major programming languages in their early days, versus the latest incarnations. From a distance, it may look like you switched from riding a bicycle to flying a passenger jet with a few hundred knobs, buttons and readout consoles. Arguably, the language structure covers many more usage patterns, yields additional power, and safety has improved, but the complexity and the learning curve has increased too. While in the beginning there was lots of pitfalls due to the lack of features and safety, in the end there's a minefield due to an overcrowded feature-scape that's paralyzing to deal with and often not quite understood by anyone on the team.<br/>
<div class="vsub"><a id="Cryptic feel and complexity"></a>Cryptic feel and complexity</div>
If you look at a moderately involved application written in most major programming languages these days, you can intuitively experience this without any need for a formal explanation. This is true especially if you are not familiar with the language involved. The level of "cryptic" in programming languages has gone up notches.<br/>
<br/>
When writing software, useful complexity helps by providing structure as well as the shortest path to actualizing an algorithm. "Useful" complexity stands in contrast to complexity that doesn't yield enough benefits to justify itself. Typically, the useful kind is the ability to quickly make workable programs, the power of its constructs, memory safety, performance etc. Often a given benefit compromises another, i.e. you "can't have it all". This is where the perceived benefits become more personal and vary based on where exactly the emphasis is.<br/>
<div class="vsub"><a id="Abstraction"></a>Abstraction</div>
Abstraction is good in moderation, much like anything else. It's good we're not programming in assembler anymore. Concepts like encapsulation and code reuse are great. Somewhere along the line though things got a bit wild. Don't ask me where, because it probably depends on your capacity for layering concepts on top of each other and mentally imaging the inner workings with all of its nuts and bolts. But somewhere along the line abstraction layers got more numerous and more detached from underlying concepts and closer to "magic". <br/>
<br/>
While magic is generally good, too much will make for more instability in a sense that it's harder and harder to understand how things work. And because magic has its limits, swiftly come exceptions. As in, if magic doesn't work, here's a direct pathway 10 layers of abstraction down to how things really work, sort of like an oil rig deep into Earth that shows you where gas comes from, or visiting a farm to realize that not all good things grow on trees. That doesn't mean you need to drill your own oil rig or grow your own food of course. Some magic is still good. <br/>
<br/>
In terms of software development, the side effects of too much magic are brain freeze due to too much abstraction, performance issues, difficultly separating application layers (i.e. mixing it all together like flour and salt nearly impossible to separate again), difficulty debugging and overall acquiring sort of a tunnel vision that turns any given abstraction methodology into a hammer, and the whole word is one giant nail.<br/>
<div class="vsub"><a id="Spinning yarn"></a>Spinning yarn</div>
Regardless of how you feel about too much abstraction, programming languages tend to favor primitives that, when combined in a clever manner, yield higher-level function, until ultimately such function becomes business or consumer friendly. The process has been this way for over 50 years. Despite a plethora of languages out there, nothing has changed much. The basic blocks of languages remain primitives, and the building of applications from ground up remains the norm, rarely directly, and more by means of libraries building functionality on top of libraries.<br/>
<br/>
The reason for how all this developed in this manner (and why) would be a good topic for a study, and not just of programming languages but indeed first and foremost of human nature and the nature of business. On one hand, the original languages evolved in a relatively simple way with the rise of LALR and LR grammar tools, which made building a parser to be a streamlined process. It's a benefit, but also a trap, in a sense that it pigeon-holes the design of a language. Regardless of which parsing tools are used, it's the conceptually the same ball of yarn. This has resulted in a rather large number of languages that are in their basic nature clones of each other.<br/>
<div class="vsub"><a id="Specific purpose"></a>Specific purpose</div>
While the above applies to many languages, the situation isn't like that in some DSL (Domain-Specific Languages). Take for example SQL, or Structured Query Language. It's withstood the test of time with relatively minor changes, and even those that weren't minor came out well enough. Successful DSLs have something that general-purpose languages don't: firstly the power to cross the chasms of building functionality in very little code, and secondly the ease of use later in the development cycle, long after the dust settles. The former refers to typing a single (or very few) statements that take hundreds in other languages. The latter to being able to understand the code years later, or by other people.<br/>
<div class="vsub"><a id="Where does this lead"></a>Where does this lead</div>
Perhaps now is a good time to make a point. It's simple really; RimStone intends to:<br/>
<ul><li>reduce abstraction to specific tasks and concepts that are commonly used and understood, and nothing more,<br/>
</li><li>converge a general purpose language concept with a Domain-Specific one.</li></ul>
Or in a nutshell: a language that's naturally simple and general-purpose but with the two aforementioned benefits of DSLs. The process isn't straightforward because it's not just about grammars and BNF notations, or about pure structure. It's about the interaction between the language and a human. It's about reducing the effect of overly-expressioned and over-abstracted languages and escaping the trap of cookie-cutter churning of languages.<br/>
<br/>
Aside from grabbing the benefits of both, there's an additional, emerging one: some things that were "either/or" can now be together at the same time. I am talking about performance. Most memory-safe general-purpose programming languages have a drawback: building "libraries on top of libraries" (or similar, as a method of building up functionality) carries a performance stick: everything written in such a language will exact a performance penalty because the cost of memory safety on every level of development starts to pile up. But if a programming language builds a large number of significant functionalities in just a single or few statements (such as in DSLs), then such functionalities can be built in C, which is the most energy-efficient and fastest programming language, according to <a href='https://www.sciencedirect.com/science/article/pii/S0167642321000022'>this study</a> (and also something that most of us intuitively understand). Building so can be done to include memory safety from the get-go with a much lower impact, and offers lots of customizations at the same time, yet still remain high-performance because it's built entirely in C. And the range of functionalities can be large, including databases, web technologies, regex, strings, files, parsing etc. It can include enough to be useful for building business and consumer applications.<br/>
<br/>
What this implies is that a hybrid between a general-purpose and a Domain-Specific language can be simple, memory safe and have high-performance, at the same time. It would emphasize near-expressionless statements that are close to natural way of thinking, instead of one based on over-abstraction and mechanical-parsing methods that's easier for a computer. RimStone is a hybrid language of that nature. One more benefit is that you may not need AI to summarize what the program does. If a single statement can convey a high-level intent, then you can read a program in such language more as a story of the solution than an algorithm.<br/>
<a id='article-mariadb.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:left;background-color:white;'><a href='https://rimstone-lang.com' style='border-bottom:0px'><img src='https://rimstone-lang.com/rimstone.png' style='width:180px;height:auto'/></a></div><div class='vhub' style='margin-top:10px;'>Web services with MariaDB</div><hr/><br/>
Create a directory for your project, it'll be where this example takes place. Also create RimStone application "stock":<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_172' class=notranslate>
<span class="Statement">mkdir</span> <span class="Special">-p</span> stock-app
<span class="Statement">cd</span> stock-app
rim <span class="Special">-k</span> stock</pre>
<span id=rimstone_copied_172 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_172' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_172, code_172, rimstone_copied_172)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Start MariaDB command line interface:<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_176' class=notranslate>
sudo mysql</pre>
<span id=rimstone_copied_176 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_176' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_176, code_176, rimstone_copied_176)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Create an application user, database and a stock table (with stock name and price):<br/>
<div class='sqlcode' style='position:relative;padding-right:16px;'>
<pre id='code_173' class=notranslate>
<span class="Statement">create</span> <span class="Identifier">user</span> stock_user;
<span class="Statement">create</span> database stock_db;
<span class="Statement">grant</span> <span class="Statement">all</span> <span class="Special">privileges</span> <span class="Special">on</span> stock_db.* <span class="Special">to</span> stock_user@localhost <span class="Special">identified</span> <span class="Special">by</span> <span class="Special">'</span><span class="Constant">stock_pwd</span><span class="Special">'</span>;
use stock_db
<span class="Statement">create</span> <span class="Special">table</span> <span class="Special">if</span> <span class="Statement">not</span> <span class="Statement">exists</span> stock (stock_name <span class="Type">varchar</span>(<span class="Constant">100</span>) primary key, stock_price bigint);</pre>
<span id=rimstone_copied_173 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_173' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_173, code_173, rimstone_copied_173)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
RimStone wants you to describe the database: the user name and password, database name, and the rest is the default setup for MariaDB database connection. So create a file "db_stock" (which is your database configuration file, one per each you use):<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_178' class=notranslate>
vi db_stock</pre>
<span id=rimstone_copied_178 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_178' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_178, code_178, rimstone_copied_178)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
and copy and paste this:<br/>
<div class='ncode' style='position:relative;padding-right:16px;'>
<pre id='code_170' class=notranslate>
[client]
user=stock_user
password=stock_pwd
database=stock_db
protocol=TCP
host=127.0.0.1
port=3306</pre>
<span id=rimstone_copied_170 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_170' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_170, code_170, rimstone_copied_170)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Now to the code. Here's the web service to insert stock name and price into the stock table - create file "add-stock.rim":<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_179' class=notranslate>
vi add-stock.rim</pre>
<span id=rimstone_copied_179 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_179' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_179, code_179, rimstone_copied_179)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
and copy and paste this:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_171' class=notranslate>
<span class="Statement">%%</span> /add-stock<span class="Identifier"> public</span>
<span class="Statement">    @</span>&lt;html&gt;
<span class="Statement">        @</span>&lt;body&gt;
<span class="Statement">        get-param</span> name
<span class="Statement">        get-param</span> price
        <span class="Comment">// Add data to stock table, update if the stock exists</span>
<span class="Statement">        run-query</span> @db_stock = <span class="Constant">&quot;insert into stock (stock_name, stock_price) values ('</span><span class="Special">%s</span><span class="Constant">', '</span><span class="Special">%s</span><span class="Constant">') on duplicate key update stock_price='</span><span class="Special">%s</span><span class="Constant">'&quot;</span> \
           <span class="Identifier"> input</span> name, price, price<span class="Type"> error</span> err<span class="Identifier"> no-loop</span>
<span class="Statement">        if-true</span> err<span class="Identifier"> not-equal</span> <span class="Constant">&quot;0&quot;</span>
<span class="Statement">            report-error</span> <span class="Constant">&quot;Cannot update stock price, error [</span><span class="Special">%s</span><span class="Constant">]&quot;</span>, err
<span class="Statement">        end-if</span>
<span class="Statement">        @</span>&lt;div&gt;
<span class="Statement">            @</span>Stock price updated!
<span class="Statement">        @</span>&lt;/div&gt;
<span class="Statement">        @</span>&lt;/body&gt;
<span class="Statement">    @</span>&lt;/html&gt;
<span class="Statement">%%</span></pre>
<span id=rimstone_copied_171 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_171' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_171, code_171, rimstone_copied_171)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Next is the web service to display a web page with all stock names and prices from the stock table - create file "show-stock.rim":<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_180' class=notranslate>
vi show-stock.rim</pre>
<span id=rimstone_copied_180 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_180' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_180, code_180, rimstone_copied_180)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
and copy and paste this:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_175' class=notranslate>
<span class="Statement">%%</span> /show-stock<span class="Identifier"> public</span>
<span class="Statement">    @</span>&lt;html&gt;
<span class="Statement">        @</span>&lt;body&gt;
<span class="Statement">            @</span>&lt;table&gt;
<span class="Statement">                @</span>&lt;tr&gt;
<span class="Statement">                    @</span>&lt;td&gt;Stock name&lt;/td&gt;
<span class="Statement">                    @</span>&lt;td&gt;Stock price&lt;/td&gt;
<span class="Statement">                @</span>&lt;/tr&gt;
<span class="Statement">                run-query</span> @db_stock = <span class="Constant">&quot;select stock_name, stock_price from stock&quot;</span><span class="Type"> output</span> stock_name, stock_price
<span class="Statement">                    @</span>&lt;tr&gt;
<span class="Statement">                        @</span>&lt;td&gt;
<span class="Statement">                        print-out</span> stock_name
<span class="Statement">                        @</span>&lt;/td&gt;
<span class="Statement">                        @</span>&lt;td&gt;
<span class="Statement">                        print-out</span>  stock_price
<span class="Statement">                        @</span>&lt;/td&gt;
<span class="Statement">                    @</span>&lt;/tr&gt;
<span class="Statement">                end-query</span>
<span class="Statement">            @</span>&lt;/table&gt;
<span class="Statement">        @</span>&lt;/body&gt;
<span class="Statement">    @</span>&lt;/html&gt;
<span class="Statement">%%</span></pre>
<span id=rimstone_copied_175 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_175' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_175, code_175, rimstone_copied_175)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
You're done! Now it's time to make your application. You need to tell RimStone that your database configuration file "db_stock" is MariaDB (because you could use PostgreSQL or SQLite for instance):<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_181' class=notranslate>
rim <span class="Special">-q</span> <span class="Special">--db</span><span class="Statement">=</span><span class="Statement">&quot;</span><span class="Constant">mariadb:db_stock</span><span class="Statement">&quot;</span></pre>
<span id=rimstone_copied_181 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_181' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_181, code_181, rimstone_copied_181)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Test your web service. Here you'd run it as a command line program. That's neat because you can test your web services without even using a web server or a browser:<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_182' class=notranslate>
rim <span class="Special">-r</span> <span class="Special">--req</span><span class="Statement">=</span><span class="Statement">&quot;</span><span class="Constant">/add-stock/name=ABC/price=882</span><span class="Statement">&quot;</span> <span class="Special">--exec</span>
rim <span class="Special">-r</span> <span class="Special">--req</span><span class="Statement">=</span><span class="Statement">&quot;</span><span class="Constant">/add-stock/name=XYZ/price=112</span><span class="Statement">&quot;</span> <span class="Special">--exec</span></pre>
<span id=rimstone_copied_182 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_182' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_182, code_182, rimstone_copied_182)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
The result for each:<br/>
<div class='ncode' style='position:relative;padding-right:16px;'>
<pre id='code_174' class=notranslate>
Content-Type: text/html;charset=utf-8
Cache-Control: max-age=0, no-cache
Pragma: no-cache
Status: 200 OK

&lt;html&gt;
&lt;body&gt;
&lt;div&gt;
Stock price updated!
&lt;/div&gt;
&lt;/body&gt;
&lt;/html&gt;</pre>
<span id=rimstone_copied_174 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_174' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_174, code_174, rimstone_copied_174)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
And to test the list of stocks:<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_183' class=notranslate>
rim <span class="Special">-r</span> <span class="Special">--req</span><span class="Statement">=</span><span class="Statement">&quot;</span><span class="Constant">/show-stock</span><span class="Statement">&quot;</span> <span class="Special">--exe</span></pre>
<span id=rimstone_copied_183 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_183' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_183, code_183, rimstone_copied_183)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
The result:<br/>
<div class='ncode' style='position:relative;padding-right:16px;'>
<pre id='code_177' class=notranslate>
Content-Type: text/html;charset=utf-8
Cache-Control: max-age=0, no-cache
Pragma: no-cache
Status: 200 OK

&lt;html&gt;
&lt;body&gt;
&lt;table&gt;
&lt;tr&gt;
&lt;td&gt;Stock name&lt;/td&gt;
&lt;td&gt;Stock price&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;
ABC&lt;/td&gt;
&lt;td&gt;
882&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;
XYZ&lt;/td&gt;
&lt;td&gt;
112&lt;/td&gt;
&lt;/tr&gt;
&lt;/table&gt;
&lt;/body&gt;
&lt;/html&gt;</pre>
<span id=rimstone_copied_177 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_177' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_177, code_177, rimstone_copied_177)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
You can see the actual response, the way it would be sent to a browser, or an API web client, or any other kind of web client.<br/>
<a id='article-memory-safety.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:left;background-color:white;'><a href='https://rimstone-lang.com' style='border-bottom:0px'><img src='https://rimstone-lang.com/rimstone.png' style='width:180px;height:auto'/></a></div><div class='vhub' style='margin-top:10px;'>How is memory organized in RimStone</div><hr/><br/>
RimStone is a memory-safe language. A string variable is the actual pointer to a string (whether it's a text or binary). This eliminates at least one extra dereferencing and a memory read (such as the case in many other languages); it makes RimStone memory performance very close to C. <br/>
<br/>
Bytes before the string constitute the ID to a memory table entry as well as the length of a string, with additional info used by memory-safety mechanisms:<br/>
<ul><li>"Ref count" (Reference count), stating how many RimStone variables point to string,<br/>
</li><li>Status is used to describe string, such as whether it's scope is process-wide, if it's a string literal etc,<br/>
</li><li>"Next free" points to the next available string block (if this one was freed too),<br/>
</li><li>"Data ptr" points back to the string, which is used to speed up access.</li></ul>
Memory is always null-terminated, regardless of whether it's text or binary. Here's what that looks like in a picture:<br/>
<br/><div class='vimg'><img class='imgs' src='golf-memory.png' alt='RimStone'></img>
</div><br/>
Each memory block (ID+Length+string+trailing null) is a memory allocated by standard C'd memory allocation, while memory table is a continuous block that's frequently cached to produce fast access to string's properties.<br/>
<br/>
RimStone performs memory-safety check only at the entrance of a statement, meaning at input and output points (if needed). The actual implementation of any RimStone statement does not use memory safety internally, because each is implemented in C as a memory safe algorithm to begin with. Because vast majority (probably close to 100%) of the functionality and computation happens inside statements (for a typical web application), the actual cost of memory safety is very small.<br/>
<br/>
This is in contrast to many general purpose memory-safe languages where libraries, modules, methods etc. are implemented in the memory-safe language and the entire implementation is subject to memory-safe instrumentation and/or other methods, such as bounds checking etc. It means that inherently such languages may perform more work doing such safe-memory checks, and therefore may be slower.<br/>
<br/>
Also, the length of memory allocated is stored just prior to memory (i.e. in a continuous block) and generally pre-fetched using CPU's hardware prefetching, making access to it faster than if it were part of the memory structure.<br/>
<br/>
Finally, by default memory is not deallocated immediately after it's out of scope. Rather, the freeing happens when a request is complete, because the <a href='/request.html'>request</a> is really the "unit" of work in a web-service based language like RimStone. This also makes final deallocation of memory faster because access to memory structure block is cached and optimized for such operation. <br/>
<a id='article-memory-safety-web.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:left;background-color:white;'><a href='https://rimstone-lang.com' style='border-bottom:0px'><img src='https://rimstone-lang.com/rimstone.png' style='width:180px;height:auto'/></a></div><div class='vhub' style='margin-top:10px;'>Memory safety: what about performance?</div><hr/><br/>
Memory safety guards against software security risks and malfunctions by assuring data isn't written to or read from unintended areas of memory. Preventing leaks is a separate feature that's important for web services which are long-running processes - memory leaks usually lead to running out of memory and crashes.<br/>
<br/>
But what of the performance cost of memory safety? &nbsp;RimStone is a very high level programming language. It's not like other languages, and you can intuitively experience that just by looking at the code. It feels more like speaking in English than moving bits and bytes or calling APIs. <br/>
<br/>
So when you build your web services, you won't write a lot of code, rather you'd express what you want done in a declarative language. This code is designed to be memory safe, but because it's C, it avoids the penalty of being implemented in a general-purpose memory-safe language, where everything that's done, from bottom up and top down, would be subject to memory-safety checks. <br/>
<br/>
As a result, the cost incurred on memory safety is mostly in checking input data of such statements and significantly less so in the actual implementation which is where most of the performance penalty would be. In addition, the output of RimStone statements is generally new immutable memory, hence it needs no checking. This means memory safety checks are truly minimal, and likely close to a theoretical minimum.<br/>
<br/>
RimStone also has a light implementation of memory safety. One example is that any memory used in a request is by default released at the end of it, and not every time the memory's out of scope, which saves a lot of run-time checks. <br/>
<br/>
In summary, the choices made when designing and implementing a memory safe programming language profoundly affect the resulting performance.<br/>
<a id='article-messaging-from-client.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:left;background-color:white;'><a href='https://rimstone-lang.com' style='border-bottom:0px'><img src='https://rimstone-lang.com/rimstone.png' style='width:180px;height:auto'/></a></div><div class='vhub' style='margin-top:10px;'>Messaging between C client and server</div><hr/><br/>
This example shows how to exchange messages between RimStone server and a C API client (see <a href='/Client-API.html'>Client-API</a>). The client uses FastCGI binary protocol to communicate with the server. <a href='/SEMI.html'>SEMI</a> messaging is used as a format of messages. In this example, a client sends 10 variable length message to the server (meaning each has a different number of key/value pairs); the server then gets each key/value and replies in kind. The client displays the result.<br/>
<br/>
Note that status checking is not performed for simplicity here.<br/>
<div class="vsub"><a id="Create a server and start it"></a>Create a server and start it</div>
To get started, create a directory for this example and position in it:<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_186' class=notranslate>
<span class="Statement">mkdir</span> <span class="Special">-p</span> msgapi
<span class="Statement">cd</span> msgapi</pre>
<span id=rimstone_copied_186 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_186' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_186, code_186, rimstone_copied_186)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Create file "srv.rim":<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_185' class=notranslate>
cat &lt;&lt; '<span class="Constant">EOF</span>' &gt; srv.rim
<span class="Statement">begin-handler</span> /srv<span class="Identifier"> public</span>
<span class="Statement">    silent-header</span>

<span class="Statement">    request-body</span> msg <span class="Comment">// get the message sent by client</span>

<span class="Statement">    new-message</span> m<span class="Identifier"> from</span> msg <span class="Comment">// parse into key/value pairs </span>

<span class="Statement">    new-message</span> r <span class="Comment">// create new reply message</span>

<span class="Statement">    read-message</span> m<span class="Type"> key</span> k<span class="Type"> value</span> v <span class="Comment">// read how many key/value pairs are there, that's</span>
                                 <span class="Comment">// the how the client packed the data</span>

<span class="Statement">    write-message</span> r<span class="Identifier"> key</span> <span class="Constant">&quot;reply&quot;</span><span class="Identifier"> value</span> v <span class="Comment">// write into reply message how many key/value pairs</span>
                                        <span class="Comment">// we're sending back</span>

<span class="Statement">    start-loop</span><span class="Identifier"> repeat</span> #v<span class="Type"> use</span> i<span class="Identifier"> start-with</span> <span class="Constant">1</span>
<span class="Statement">        read-message</span> m<span class="Type"> key</span> k<span class="Type"> value</span> v <span class="Comment">// get key/value pair from client</span>
        <span class="Comment">// write key/value pair to go back to the client</span>
<span class="Statement">        write-message</span> r<span class="Identifier"> key</span> $i<span class="Identifier"> value</span> <span class="Constant">&quot;Reply is &quot;</span> + $i + <span class="Constant">&quot; (from &quot;</span>+v+<span class="Constant">&quot;)&quot;</span>
<span class="Statement">    end-loop</span>

<span class="Statement">    get-message</span> r<span class="Type"> to</span> rm <span class="Comment">// get the binary representation of the message</span>
<span class="Statement">    print-out</span> rm <span class="Comment">// send it back to client</span>

<span class="Statement">end-handler</span>
<span class="Constant">EOF</span></pre>
<span id=rimstone_copied_185 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_185' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_185, code_185, rimstone_copied_185)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Create "msgapi" application ("-k"):<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_188' class=notranslate>
rim <span class="Special">-k</span> msgapi</pre>
<span id=rimstone_copied_188 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_188' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_188, code_188, rimstone_copied_188)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Compile the server - this also demonstrates excluding directories from compilation (since RimStone will by default try to compile the RimStone and C code in all subdirectories). In this case, we're excluding subdirectory "c-api", which we will create in just a sec and place a C client program in it:<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_189' class=notranslate>
rim <span class="Special">-q</span> <span class="Special">--exclude-dir</span><span class="Statement">=</span>c-api</pre>
<span id=rimstone_copied_189 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_189' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_189, code_189, rimstone_copied_189)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Start the server, with a single server process running:<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_190' class=notranslate>
mrim <span class="Special">-w</span> <span class="Constant">1</span> msgapi</pre>
<span id=rimstone_copied_190 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_190' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_190, code_190, rimstone_copied_190)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<div class="vsub"><a id="Create a client in C"></a>Create a client in C</div>
Create directory for a C API client, and switch to it:<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_191' class=notranslate>
<span class="Statement">mkdir</span> c-api
<span class="Statement">cd</span> c-api</pre>
<span id=rimstone_copied_191 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_191' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_191, code_191, rimstone_copied_191)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Next is the C code for your client. It sends a message to the server (comprised of key/value pairs), gets the reply back, and prints out key/value pairs in it. Create file "client.c" with this:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_187' class=notranslate>
cat &lt;&lt; '<span class="Constant">EOF</span>' &gt; client.c
<span class="PreProc">#include </span><span class="Constant">&quot;rcli.h&quot;</span>

<span class="Type">int</span> rim_client (rim_cli *req, <span class="Type">char</span> *connection, <span class="Type">char</span> *method, <span class="Type">char</span> *app_path, <span class="Type">char</span> *request, <span class="Type">char</span> *url_params, <span class="Type">char</span> *body, <span class="Type">int</span> body_len);

<span class="Comment">// Send a request to RimStone server, see the example of use below</span>
<span class="Type">int</span> rim_client (rim_cli *req, <span class="Type">char</span> *connection, <span class="Type">char</span> *method, <span class="Type">char</span> *app_path, <span class="Type">char</span> *request, <span class="Type">char</span> *url_params, <span class="Type">char</span> *body, <span class="Type">int</span> body_len)
<span class="Statement">{</span>
    memset ((<span class="Type">char</span>*)req, <span class="Constant">0</span>, <span class="Statement">sizeof</span>(rim_cli));
    req-&gt;server = connection;
    req-&gt;req_method = method;
    req-&gt;app_path = app_path;
    req-&gt;req = request;
    req-&gt;url_params = url_params;
    req-&gt;req_body = body;
    req-&gt;content_type = <span class="Constant">&quot;application/rim&quot;</span>;
    req-&gt;content_len = body_len;

    <span class="Statement">return</span> rim_cli_request (req);
<span class="Statement">}</span>

<span class="Type">void</span> main ()
<span class="Statement">{</span>
    <span class="Type">int</span> i;
    <span class="Comment">// Get the path of Unix socket file to communicate with the server</span>
    <span class="Type">char</span> dir[RIM_MAX_OS_UDIR_LEN];
    rim_dir (RIM_DIR_SOCKFILE, dir, <span class="Statement">sizeof</span>(dir), <span class="Constant">&quot;msgapi&quot;</span>, <span class="Constant">NULL</span>);

    <span class="Comment">// Make /srv request to msgapi application server </span><span class="Constant">10</span><span class="Comment"> times</span>
    <span class="Statement">for</span> (i = <span class="Constant">1</span>; i &lt; <span class="Constant">10</span>; i++)
<span class="Statement">    {</span>
        rim_cli req; <span class="Comment">// Client C API request</span>
        rim_msg *msg; <span class="Comment">// Message for client</span>
        msg = rim_new_msg (<span class="Constant">NULL</span>, <span class="Constant">0</span>); <span class="Comment">// Make a new message</span>
        <span class="Type">char</span> key[<span class="Constant">100</span>], value[<span class="Constant">100</span>], count[<span class="Constant">100</span>]; <span class="Comment">// alloc for message key/value pairs</span>
        snprintf (count, <span class="Statement">sizeof</span>(count), <span class="Constant">&quot;</span><span class="Special">%d</span><span class="Constant">&quot;</span>, i); <span class="Comment">// the count (how many key/value pairs)</span>
        rim_write_msg (msg, <span class="Constant">&quot;count&quot;</span>, count, strlen(count)); <span class="Comment">// write the count into the message</span>
        <span class="Type">int</span> j;
        <span class="Statement">for</span> (j = <span class="Constant">1</span>; j &lt;= i; j++) <span class="Comment">// pack different number of key/value pairs, so for the first messasge</span>
                                 <span class="Comment">// pack only one, for the second message pack </span><span class="Constant">2</span><span class="Comment"> pairs, for the third message</span>
                                 <span class="Comment">// pack </span><span class="Constant">3</span><span class="Comment"> pairs etc. Just to make it interesting.</span>
<span class="Statement">        {</span>
            <span class="Comment">// write key/value into a message</span>
            snprintf (key, <span class="Statement">sizeof</span>(key), <span class="Constant">&quot;</span><span class="Special">%d</span><span class="Constant">&quot;</span>, j);
            snprintf (value, <span class="Statement">sizeof</span>(value), <span class="Constant">&quot;message </span><span class="Special">%d</span><span class="Constant">&quot;</span>, j);
            rim_write_msg (msg, key, value, strlen(value));
<span class="Statement">        }</span>
        <span class="Comment">// send message to RimStone server</span>
        <span class="Type">int</span> res = rim_client (&amp;req, dir, <span class="Constant">&quot;POST&quot;</span>, <span class="Constant">&quot;/msgapi&quot;</span>, <span class="Constant">&quot;/srv&quot;</span>, <span class="Constant">&quot;/&quot;</span>, rim_get_msg (msg), rim_get_msg_len (msg));
        <span class="Statement">if</span> (res == RIM_OKAY)
<span class="Statement">        {</span>
            <span class="Comment">// Create a message from reply, since the server packed key/value pairs and sent them back as a message</span>
            rim_msg *rep = rim_new_msg (rim_cli_data(&amp;req), req.data_len);
            <span class="Type">char</span> *k, *v;
            rim_num len;
            <span class="Comment">// Read the number of key/value pairs in the message, as it's the first piece of information we packed in srv.rim</span>
            rim_read_msg (rep, &amp;k, &amp;v, &amp;len);
            rim_num tmess = atol (v);
            free (k);
            <span class="Type">int</span> j;
            <span class="Comment">// read key/value pairs from the message sent back from the server</span>
            <span class="Statement">for</span> (j = <span class="Constant">1</span>; j &lt;= tmess; j++)
<span class="Statement">            {</span>
                rim_read_msg (rep, &amp;k, &amp;v, &amp;len);
                printf(<span class="Constant">&quot;</span><span class="Special">%s</span><span class="Special">\n</span><span class="Constant">&quot;</span>, v); <span class="Comment">// display value</span>
                free (k);
<span class="Statement">            }</span>
            free (rep);
<span class="Statement">        }</span>
        <span class="Comment">// free up resources</span>
        rim_cli_delete(&amp;req);
        free (rim_get_msg(msg));
        free (msg);
<span class="Statement">    }</span>
<span class="Statement">}</span>
<span class="Constant">EOF</span></pre>
<span id=rimstone_copied_187 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_187' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_187, code_187, rimstone_copied_187)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Compile C program:<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_192' class=notranslate>
gcc <span class="Special">-o</span> client client.c <span class="PreProc">$(</span><span class="Special">rim </span><span class="Special">-i</span><span class="PreProc">)</span></pre>
<span id=rimstone_copied_192 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_192' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_192, code_192, rimstone_copied_192)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<div class="vsub"><a id="Run your C client"></a>Run your C client</div>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_193' class=notranslate>
./client</pre>
<span id=rimstone_copied_193 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_193' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_193, code_193, rimstone_copied_193)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
The result is:<br/>
<div class='ncode' style='position:relative;padding-right:16px;'>
<pre id='code_184' class=notranslate>
Reply is 1 (from message 1)
Reply is 1 (from message 1)
Reply is 2 (from message 2)
Reply is 1 (from message 1)
Reply is 2 (from message 2)
Reply is 3 (from message 3)
Reply is 1 (from message 1)
Reply is 2 (from message 2)
Reply is 3 (from message 3)
Reply is 4 (from message 4)
Reply is 1 (from message 1)
Reply is 2 (from message 2)
Reply is 3 (from message 3)
Reply is 4 (from message 4)
Reply is 5 (from message 5)
Reply is 1 (from message 1)
Reply is 2 (from message 2)
Reply is 3 (from message 3)
Reply is 4 (from message 4)
Reply is 5 (from message 5)
Reply is 6 (from message 6)
Reply is 1 (from message 1)
Reply is 2 (from message 2)
Reply is 3 (from message 3)
Reply is 4 (from message 4)
Reply is 5 (from message 5)
Reply is 6 (from message 6)
Reply is 7 (from message 7)
Reply is 1 (from message 1)
Reply is 2 (from message 2)
Reply is 3 (from message 3)
Reply is 4 (from message 4)
Reply is 5 (from message 5)
Reply is 6 (from message 6)
Reply is 7 (from message 7)
Reply is 8 (from message 8)
Reply is 1 (from message 1)
Reply is 2 (from message 2)
Reply is 3 (from message 3)
Reply is 4 (from message 4)
Reply is 5 (from message 5)
Reply is 6 (from message 6)
Reply is 7 (from message 7)
Reply is 8 (from message 8)
Reply is 9 (from message 9)</pre>
<span id=rimstone_copied_184 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_184' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_184, code_184, rimstone_copied_184)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<a id='article-mortgage.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:left;background-color:white;'><a href='https://rimstone-lang.com' style='border-bottom:0px'><img src='https://rimstone-lang.com/rimstone.png' style='width:180px;height:auto'/></a></div><div class='vhub' style='margin-top:10px;'>Service to calculate mortgage amortization schedule and total interest</div><hr/><br/>
This example shows using math functions to compute an amortization schedule for a mortgage, as well as total interest. It shows how much interest vs principal is paid each month.<br/>
<br/>
Create a directory for this application and create the application itself:<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_196' class=notranslate>
<span class="Statement">mkdir</span> mortgage
<span class="Statement">cd</span> mortgage
rim <span class="Special">-k</span> mortgage</pre>
<span id=rimstone_copied_196 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_196' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_196, code_196, rimstone_copied_196)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Create file 'amort.rim' with the code:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_195' class=notranslate>
cat &lt;&lt; '<span class="Constant">EOF</span>' &gt; amort.rim
<span class="Statement">%%</span> /amort/print-schedule<span class="Identifier"> public</span>
<span class="Statement">    get-param</span> principal<span class="Identifier"> type double</span>, num_payments<span class="Identifier"> type number</span>, rate<span class="Identifier"> type double</span>

<span class="Statement">    set-double</span> monthly_rate = rate / <span class="Constant">100</span> / <span class="Constant">12</span>
<span class="Statement">    set-double</span> monthly_payment=principal * (monthly_rate * pow(<span class="Constant">1</span> + monthly_rate, num_payments)) / (pow(<span class="Constant">1</span> + monthly_rate, num_payments) - <span class="Constant">1</span>)
<span class="Statement">    set-double</span> balance = principal

<span class="Statement">    print-out</span> <span class="Constant">&quot;Amortization Schedule:&quot;</span><span class="Identifier"> new-line</span>
<span class="Statement">    print-format</span> <span class="Constant">&quot;Payment #</span><span class="Special">\t</span><span class="Constant">Payment</span><span class="Special">\t\t</span><span class="Constant">Principal</span><span class="Special">\t</span><span class="Constant">Interest</span><span class="Special">\t</span><span class="Constant">Balance</span><span class="Special">\n</span><span class="Constant">&quot;</span>

<span class="Statement">    set-double</span> tot_interest
<span class="Statement">    start-loop</span><span class="Type"> use</span> i<span class="Identifier"> start-with</span> <span class="Constant">1</span><span class="Identifier"> repeat</span> num_payments
<span class="Statement">        set-double</span> interest = balance * monthly_rate
<span class="Statement">        set-double</span> principal_payment = monthly_payment - interest
<span class="Statement">        set-double</span> balance = balance - principal_payment
<span class="Statement">        set-double</span> tot_interest = tot_interest + interest

<span class="Statement">        print-format</span> <span class="Constant">&quot;</span><span class="Special">%12ld</span><span class="Special">\t</span><span class="Special">%.2f</span><span class="Special">\t\t</span><span class="Special">%.2f</span><span class="Special">\t\t</span><span class="Special">%.2f</span><span class="Special">\t\t</span><span class="Special">%.2f</span><span class="Special">\n</span><span class="Constant">&quot;</span>, i, monthly_payment, principal_payment, interest, balance
<span class="Statement">    end-loop</span>

<span class="Statement">    print-format</span> <span class="Constant">&quot;</span><span class="Special">\n</span><span class="Constant">Interest paid: </span><span class="Special">%.2f</span><span class="Special">\n</span><span class="Constant">&quot;</span>, tot_interest
<span class="Statement">%%</span>
<span class="Constant">EOF</span></pre>
<span id=rimstone_copied_195 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_195' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_195, code_195, rimstone_copied_195)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Make the application:<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_197' class=notranslate>
rim <span class="Special">-q</span></pre>
<span id=rimstone_copied_197 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_197' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_197, code_197, rimstone_copied_197)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Run it:<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_198' class=notranslate>
rim <span class="Special">-r</span> <span class="Special">--req</span><span class="Statement">=</span><span class="Statement">&quot;</span><span class="Constant">/amort/print-schedule/principal=350000/rate=6/num_payments=360</span><span class="Statement">&quot;</span> <span class="Special">--exec</span></pre>
<span id=rimstone_copied_198 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_198' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_198, code_198, rimstone_copied_198)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
The result is (use --silent-header to not display the header, i.e. Content-Type etc.). <br/>
<div class='ncode' style='position:relative;padding-right:16px;'>
<pre id='code_194' class=notranslate>
Content-Type: text/html;charset=utf-8
Cache-Control: max-age=0, no-cache
Pragma: no-cache
Status: 200 OK

Amortization Schedule:
Payment #	Payment		Principal	Interest	Balance
           1	2098.43		348.43		1750.00		349651.57
           2	2098.43		350.17		1748.26		349301.40
           3	2098.43		351.92		1746.51		348949.48
           4	2098.43		353.68		1744.75		348595.80
           5	2098.43		355.45		1742.98		348240.36
           6	2098.43		357.23		1741.20		347883.13
           7	2098.43		359.01		1739.42		347524.12
           8	2098.43		360.81		1737.62		347163.31
           9	2098.43		362.61		1735.82		346800.70
          10	2098.43		364.42		1734.00		346436.28
          11	2098.43		366.25		1732.18		346070.04
          12	2098.43		368.08		1730.35		345701.96
          13	2098.43		369.92		1728.51		345332.04
          14	2098.43		371.77		1726.66		344960.28
          15	2098.43		373.63		1724.80		344586.65
          16	2098.43		375.49		1722.93		344211.16
          17	2098.43		377.37		1721.06		343833.79
          18	2098.43		379.26		1719.17		343454.53
          19	2098.43		381.15		1717.27		343073.37
          20	2098.43		383.06		1715.37		342690.31
          21	2098.43		384.98		1713.45		342305.34
          22	2098.43		386.90		1711.53		341918.44
          23	2098.43		388.83		1709.59		341529.60
          24	2098.43		390.78		1707.65		341138.82
          25	2098.43		392.73		1705.69		340746.09
          26	2098.43		394.70		1703.73		340351.40
          27	2098.43		396.67		1701.76		339954.73
          28	2098.43		398.65		1699.77		339556.07
          29	2098.43		400.65		1697.78		339155.43
          30	2098.43		402.65		1695.78		338752.78
          31	2098.43		404.66		1693.76		338348.11
          32	2098.43		406.69		1691.74		337941.43
          33	2098.43		408.72		1689.71		337532.71
          34	2098.43		410.76		1687.66		337121.94
          35	2098.43		412.82		1685.61		336709.13
          36	2098.43		414.88		1683.55		336294.25
          37	2098.43		416.96		1681.47		335877.29
          38	2098.43		419.04		1679.39		335458.25
          39	2098.43		421.14		1677.29		335037.11
          40	2098.43		423.24		1675.19		334613.87
          41	2098.43		425.36		1673.07		334188.51
          42	2098.43		427.48		1670.94		333761.03
          43	2098.43		429.62		1668.81		333331.41
          44	2098.43		431.77		1666.66		332899.64
          45	2098.43		433.93		1664.50		332465.71
          46	2098.43		436.10		1662.33		332029.61
          47	2098.43		438.28		1660.15		331591.33
          48	2098.43		440.47		1657.96		331150.86
          49	2098.43		442.67		1655.75		330708.19
          50	2098.43		444.89		1653.54		330263.30
          51	2098.43		447.11		1651.32		329816.19
          52	2098.43		449.35		1649.08		329366.85
          53	2098.43		451.59		1646.83		328915.26
          54	2098.43		453.85		1644.58		328461.41
          55	2098.43		456.12		1642.31		328005.29
          56	2098.43		458.40		1640.03		327546.89
          57	2098.43		460.69		1637.73		327086.19
          58	2098.43		463.00		1635.43		326623.20
          59	2098.43		465.31		1633.12		326157.89
          60	2098.43		467.64		1630.79		325690.25
          61	2098.43		469.98		1628.45		325220.27
         ...
         ...
         ...
         341	2098.43		1899.21		199.22		37944.50
         342	2098.43		1908.70		189.72		36035.80
         343	2098.43		1918.25		180.18		34117.55
         344	2098.43		1927.84		170.59		32189.71
         345	2098.43		1937.48		160.95		30252.23
         346	2098.43		1947.17		151.26		28305.07
         347	2098.43		1956.90		141.53		26348.16
         348	2098.43		1966.69		131.74		24381.48
         349	2098.43		1976.52		121.91		22404.96
         350	2098.43		1986.40		112.02		20418.56
         351	2098.43		1996.33		102.09		18422.22
         352	2098.43		2006.32		92.11		16415.91
         353	2098.43		2016.35		82.08		14399.56
         354	2098.43		2026.43		72.00		12373.13
         355	2098.43		2036.56		61.87		10336.57
         356	2098.43		2046.74		51.68		8289.83
         357	2098.43		2056.98		41.45		6232.85
         358	2098.43		2067.26		31.16		4165.59
         359	2098.43		2077.60		20.83		2087.99
         360	2098.43		2087.99		10.44		-0.00

Interest paid: 405433.66</pre>
<span id=rimstone_copied_194 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_194' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_194, code_194, rimstone_copied_194)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
You can of course run this program as a service:<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_199' class=notranslate>
mrim <span class="Special">-w</span> <span class="Constant">1</span> mortgage</pre>
<span id=rimstone_copied_199 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_199' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_199, code_199, rimstone_copied_199)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
And then make a request to this service:<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_200' class=notranslate>
rim <span class="Special">-r</span> <span class="Special">--req</span><span class="Statement">=</span><span class="Statement">&quot;</span><span class="Constant">/amort/print-schedule/principal=350000/rate=6/num_payments=360</span><span class="Statement">&quot;</span> <span class="Special">--exec</span> <span class="Special">--service</span> <span class="Special">--app</span><span class="Statement">=</span><span class="Statement">&quot;</span><span class="Constant">/mortgage</span><span class="Statement">&quot;</span></pre>
<span id=rimstone_copied_200 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_200' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_200, code_200, rimstone_copied_200)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
This will produce the same result, but the actual execution will happen in the server process you started with <a href='/mrim.html'>mrim</a> above.<br/>
<br/>
And finally, this service can serve as a back-end for a web server (Apache, Nginx, HAProxy and pretty much any other). An example of doing this can be <a href='/article-hello-world-service-web.html'>found here</a>.<br/>
<a id='article-notes-postgres.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:left;background-color:white;'><a href='https://rimstone-lang.com' style='border-bottom:0px'><img src='https://rimstone-lang.com/rimstone.png' style='width:180px;height:auto'/></a></div><div class='vhub' style='margin-top:10px;'>Multi-tenant SaaS (Notes web application) in 200 lines of code</div><hr/><br/>
This is a complete SaaS example (Software-as-a-Service) using PostgreSQL as a database, and RimStone as a web service engine; it includes user signup/login/logout with an email and password, separate user accounts and data, and a notes application. All in about 200 lines of code! You can have multiple users sign up and create and manage their own notes.<br/>
<br/>
First create a directory for your application, where the source code will be:<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_207' class=notranslate>
<span class="Statement">mkdir</span> <span class="Special">-p</span> notes
<span class="Statement">cd</span> notes</pre>
<span id=rimstone_copied_207 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_207' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_207, code_207, rimstone_copied_207)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<div class="vsub"><a id="Setup Postgres database"></a>Setup Postgres database</div>
Create PostgreSQL user (with the same name as your logged on Linux user, so no password needed), and the database "db_app":<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_209' class=notranslate>
<span class="Statement">echo</span><span class="Constant"> </span><span class="Statement">&quot;</span><span class="Constant">create user </span><span class="PreProc">$(</span><span class="Special">whoami</span><span class="PreProc">)</span><span class="Constant">;</span>
<span class="Constant">create database db_app with owner=</span><span class="PreProc">$(</span><span class="Special">whoami</span><span class="PreProc">)</span><span class="Constant">;</span>
<span class="Constant">grant all on database db_app to </span><span class="PreProc">$(</span><span class="Special">whoami</span><span class="PreProc">)</span><span class="Constant">;</span>
<span class="Constant">\q</span><span class="Statement">&quot;</span><span class="Constant">  </span>| sudo <span class="Special">-u</span> postgres psql</pre>
<span id=rimstone_copied_209 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_209' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_209, code_209, rimstone_copied_209)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Create a database configuration file to describe your PostgreSQL database above:<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_211' class=notranslate>
<span class="Statement">echo</span><span class="Constant"> </span><span class="Statement">&quot;</span><span class="Constant">user=</span><span class="PreProc">$(</span><span class="Special">whoami</span><span class="PreProc">)</span><span class="Constant"> dbname=db_app</span><span class="Statement">&quot;</span><span class="Constant"> </span><span class="Statement">&gt;</span> db_app</pre>
<span id=rimstone_copied_211 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_211' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_211, code_211, rimstone_copied_211)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Create database objects we'll need - users table for application users, and notes table to hold their notes:<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_212' class=notranslate>
<span class="Statement">echo</span><span class="Constant"> </span><span class="Statement">&quot;</span><span class="Constant">create table if not exists notes (dateOf timestamp, noteId bigserial primary key, userId bigint, note varchar(1000));</span>
<span class="Constant">create table if not exists users (userId bigserial primary key, email varchar(100), hashed_pwd varchar(100), verified smallint, verify_token varchar(30), session varchar(100));</span>
<span class="Constant">create unique index if not exists users1 on users (email);</span><span class="Statement">&quot;</span><span class="Constant"> </span>| psql <span class="Special">-d</span> db_app</pre>
<span id=rimstone_copied_212 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_212' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_212, code_212, rimstone_copied_212)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<div class="vsub"><a id="Create RimStone application"></a>Create RimStone application</div>
Create application "notes" owned by your Linux user:<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_213' class=notranslate>
rim <span class="Special">-k</span> notes</pre>
<span id=rimstone_copied_213 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_213' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_213, code_213, rimstone_copied_213)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<div class="vsub"><a id="Source code"></a>Source code</div>
This executes before any other handler in an application, making sure all requests are authorized, file "before-handler.rim":<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_206' class=notranslate>
cat &lt;&lt; '<span class="Constant">EOF</span>' &gt; before-handler.rim
<span class="Statement">before-handler</span>
<span class="Statement">    call-handler</span> <span class="Constant">&quot;/session/check&quot;</span><span class="Identifier"> set-param</span> displayed_logout = <span class="Constant">false</span>, is_logged_in = <span class="Constant">false</span>
<span class="Statement">end-before-handler</span>
<span class="Constant">EOF</span></pre>
<span id=rimstone_copied_206 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_206' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_206, code_206, rimstone_copied_206)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<br/>
<span style="font-weight:bold;">- Signup users, login, logout</span><br/>
<br/>
This is a generic session management web service that handles user creation, verification, login and logout. The file is "session.rim":<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_208' class=notranslate>
cat &lt;&lt; '<span class="Constant">EOF</span>' &gt; session.rim
<span class="Comment">// Display link to login or signup</span>
<span class="Statement">%%</span> /session/login-or-signup<span class="Identifier"> private</span>
<span class="Statement">    @</span>&lt;a href=&quot;<span class="Statement">&lt;&lt;print-path</span> <span class="Constant">&quot;/session/user/login&quot;</span><span class="Statement">&gt;&gt;</span>&quot;&gt;Login&lt;/a&gt; &amp;nbsp; &amp;nbsp; &lt;a href=&quot;<span class="Statement">&lt;&lt;print-path</span> <span class="Constant">&quot;/session/user/new/form&quot;</span><span class="Statement">&gt;&gt;</span>&quot;&gt;Sign Up&lt;/a&gt;&lt;hr/&gt;
<span class="Statement">%%</span>
<span class="Comment">// Login with email and password, and create a new session, then display home pag</span>
<span class="Statement">%%</span> /session/login<span class="Identifier"> public</span>
<span class="Statement">    get-param</span> pwd, email
<span class="Statement">    hash-string</span> pwd<span class="Type"> to</span> hashed_pwd
<span class="Statement">    random-string</span><span class="Type"> to</span> sess_id<span class="Identifier"> length</span> <span class="Constant">30</span>
<span class="Statement">    run-query</span> @db_app = <span class="Constant">&quot;select userId from users where email='</span><span class="Special">%s</span><span class="Constant">' and hashed_pwd='</span><span class="Special">%s</span><span class="Constant">'&quot;</span><span class="Type"> output</span> sess_user_id<span class="Identifier"> :</span> email, hashed_pwd
<span class="Statement">        run-query</span> @db_app<span class="Identifier"> no-loop</span> = <span class="Constant">&quot;update users set session='</span><span class="Special">%s</span><span class="Constant">' where userId='</span><span class="Special">%s</span><span class="Constant">'&quot;</span><span class="Identifier"> input</span> sess_id, sess_user_id<span class="Type"> affected-rows</span> arows
<span class="Statement">        if-true</span> arows<span class="Identifier"> not-equal</span> <span class="Constant">1</span>
<span class="Statement">            @</span>Could not create a session. Please try again. <span class="Statement">&lt;&lt;call-handler</span> <span class="Constant">&quot;/session/login-or-signup&quot;</span><span class="Statement">&gt;&gt;</span> &lt;hr/&gt;
<span class="Statement">            exit-handler</span>
<span class="Statement">        end-if</span>
<span class="Statement">        set-cookie</span> <span class="Constant">&quot;sess_user_id&quot;</span> = sess_user_id<span class="Identifier"> path</span> <span class="Constant">&quot;/&quot;</span>, <span class="Constant">&quot;sess_id&quot;</span> = sess_id<span class="Identifier"> path</span> <span class="Constant">&quot;/&quot;</span>
<span class="Statement">        call-handler</span> <span class="Constant">&quot;/session/check&quot;</span>
<span class="Statement">        call-handler</span> <span class="Constant">&quot;/session/show-home&quot;</span>
<span class="Statement">        exit-handler</span>
<span class="Statement">    end-query</span>
<span class="Statement">    @</span>Email or password are not correct. <span class="Statement">&lt;&lt;call-handler</span> <span class="Constant">&quot;/session/login-or-signup&quot;</span><span class="Statement">&gt;&gt;</span>&lt;hr/&gt;
<span class="Statement">%%</span>
<span class="Comment">// Starting point of the application. Either display login form or a home page:</span>
<span class="Statement">%%</span> /session/start<span class="Identifier"> public</span>
<span class="Statement">    get-param</span> action<span class="Identifier"> default-value</span> <span class="Constant">&quot;&quot;</span>, is_logged_in<span class="Identifier"> type bool default-value</span> <span class="Constant">false</span>
<span class="Statement">    if-true</span> is_logged_in<span class="Identifier"> equal</span> <span class="Constant">true</span>
<span class="Statement">        if-true</span> action<span class="Identifier"> not-equal</span> <span class="Constant">&quot;logout&quot;</span>
<span class="Statement">            call-handler</span> <span class="Constant">&quot;/session/show-home&quot;</span>
<span class="Statement">            exit-handler</span>
<span class="Statement">        end-if</span>
<span class="Statement">    end-if</span>
<span class="Statement">    call-handler</span> <span class="Constant">&quot;/session/user/login&quot;</span>
<span class="Statement">%%</span>
<span class="Comment">// Generic home page, you can call anything from here, in this case a list of note</span>
<span class="Statement">%%</span> /session/show-home<span class="Identifier"> private</span>
<span class="Statement">    call-handler</span> <span class="Constant">&quot;/notes/list&quot;</span>
<span class="Statement">%%</span>
<span class="Comment">// Logout user and display home, which will ask to either login or signup</span>
<span class="Statement">%%</span> /session/logout<span class="Identifier"> public</span>
<span class="Statement">    get-param</span> is_logged_in<span class="Identifier"> type bool</span>
<span class="Statement">    if-true</span> is_logged_in<span class="Identifier"> equal</span> <span class="Constant">true</span>
<span class="Statement">        get-param</span> sess_user_id
<span class="Statement">        run-query</span> @db_app = <span class="Constant">&quot;update users set session='' where userId='</span><span class="Special">%s</span><span class="Constant">'&quot;</span><span class="Identifier"> input</span> sess_user_id<span class="Identifier"> no-loop</span><span class="Type"> affected-rows</span> arows
<span class="Statement">        if-true</span> arows<span class="Identifier"> equal</span> <span class="Constant">1</span>
<span class="Statement">            set-param</span> is_logged_in = <span class="Constant">false</span>
<span class="Statement">            @</span>You have been logged out.&lt;hr/&gt;
<span class="Statement">            commit-transaction</span> @db_app
<span class="Statement">        end-if</span>
<span class="Statement">    end-if</span>
<span class="Statement">    call-handler</span> <span class="Constant">&quot;/session/show-home&quot;</span>
<span class="Statement">%%</span>
<span class="Comment">// Check session based on session cookie. If session cookie corresponds to the email address, the request is a part of an authorized session</span>
<span class="Statement">%%</span> /session/check<span class="Identifier"> private</span>
<span class="Statement">    get-cookie</span> sess_user_id=<span class="Constant">&quot;sess_user_id&quot;</span>, sess_id=<span class="Constant">&quot;sess_id&quot;</span>
<span class="Statement">    set-param</span> sess_id, sess_user_id
<span class="Statement">    if-true</span> sess_id<span class="Identifier"> not-equal</span> <span class="Constant">&quot;&quot;</span>
<span class="Statement">        set-param</span> is_logged_in = <span class="Constant">false</span>
<span class="Statement">        run-query</span> @db_app = <span class="Constant">&quot;select email from users where userId='</span><span class="Special">%s</span><span class="Constant">' and session='</span><span class="Special">%s</span><span class="Constant">'&quot;</span><span class="Type"> output</span> email<span class="Identifier"> input</span> sess_user_id, sess_id<span class="Type"> row-count</span> rcount
<span class="Statement">            set-param</span> is_logged_in = <span class="Constant">true</span>
<span class="Statement">            get-param</span> displayed_logout<span class="Identifier"> type bool</span>
<span class="Statement">            if-true</span> displayed_logout<span class="Identifier"> equal</span> <span class="Constant">false</span>
<span class="Statement">                get-param</span> action<span class="Identifier"> default-value</span> <span class="Constant">&quot;&quot;</span>
<span class="Statement">                if-true</span> action<span class="Identifier"> not-equal</span> <span class="Constant">&quot;logout&quot;</span>
<span class="Statement">                    @</span>Hi <span class="Statement">&lt;&lt;print-out</span> email<span class="Statement">&gt;&gt;</span>! &lt;a href=&quot;<span class="Statement">&lt;&lt;print-path</span> <span class="Constant">&quot;/session/logout&quot;</span><span class="Statement">&gt;&gt;</span>&quot;&gt;Logout&lt;/a&gt;&lt;br/&gt;
<span class="Statement">                end-if</span>
<span class="Statement">                set-param</span> displayed_logout = <span class="Constant">true</span>
<span class="Statement">            end-if</span>
<span class="Statement">        end-query</span>
<span class="Statement">        if-true</span> rcount<span class="Identifier"> not-equal</span> <span class="Constant">1</span>
<span class="Statement">            set-param</span> is_logged_in = <span class="Constant">false</span>
<span class="Statement">        end-if</span>
<span class="Statement">    end-if</span>
<span class="Statement">%%</span>
<span class="Comment">// Check that email verification token is the one actually sent to the email address</span>
<span class="Statement">%%</span> /session/verify-signup<span class="Identifier"> public</span>
<span class="Statement">    get-param</span> code, email
<span class="Statement">    run-query</span> @db_app = <span class="Constant">&quot;select verify_token from users where email='</span><span class="Special">%s</span><span class="Constant">'&quot;</span><span class="Type"> output</span> db_verify<span class="Identifier"> :</span> email
<span class="Statement">        if-true</span>  code<span class="Identifier"> equal</span> db_verify
<span class="Statement">            @</span>Your email has been verifed. Please &lt;a href=&quot;<span class="Statement">&lt;&lt;print-path</span> <span class="Constant">&quot;/session/user/login&quot;</span><span class="Statement">&gt;&gt;</span>&quot;&gt;Login&lt;/a&gt;.
<span class="Statement">            run-query</span> @db_app<span class="Identifier"> no-loop</span> = <span class="Constant">&quot;update users set verified=1 where email='</span><span class="Special">%s</span><span class="Constant">'&quot;</span><span class="Identifier"> :</span> email
<span class="Statement">            exit-handler</span>
<span class="Statement">        end-if</span>
<span class="Statement">    end-query</span>
<span class="Statement">    @</span>Could not verify the code. Please try &lt;a href=&quot;<span class="Statement">&lt;&lt;print-path</span> <span class="Constant">&quot;/session/user/new/verify-form&quot;</span><span class="Statement">&gt;&gt;</span>&quot;&gt;again&lt;/a&gt;.
<span class="Statement">    exit-handler</span>
<span class="Statement">%%</span>
<span class="Comment">// Display login form that asks for email and password</span>
<span class="Statement">%%</span> /session/user/login<span class="Identifier"> public</span>
<span class="Statement">    call-handler</span> <span class="Constant">&quot;/session/login-or-signup&quot;</span>
<span class="Statement">    @</span>Please Login:&lt;hr/&gt;
<span class="Statement">    @</span>&lt;form action=&quot;<span class="Statement">&lt;&lt;print-path</span> <span class="Constant">&quot;/session/login&quot;</span><span class="Statement">&gt;&gt;</span>&quot; method=&quot;POST&quot;&gt;
<span class="Statement">    @</span>&lt;input name=&quot;email&quot; type=&quot;text&quot; value=&quot;&quot; size=&quot;<span class="Constant">50</span>&quot; maxlength=&quot;<span class="Constant">50</span>&quot; required autofocus placeholder=&quot;Email&quot;&gt;
<span class="Statement">    @</span>&lt;input name=&quot;pwd&quot; type=&quot;password&quot; value=&quot;&quot; size=&quot;<span class="Constant">50</span>&quot; maxlength=&quot;<span class="Constant">50</span>&quot; required placeholder=&quot;Password&quot;&gt;
<span class="Statement">    @</span>&lt;button type=&quot;submit&quot;&gt;Go&lt;/button&gt;
<span class="Statement">    @</span>&lt;/form&gt;
<span class="Statement">%%</span>
<span class="Comment">// Display form for a new user, asking for an email and password</span>
<span class="Statement">%%</span> /session/user/new/form<span class="Identifier"> public</span>
<span class="Statement">    @</span>Create New User&lt;hr/&gt;
<span class="Statement">    @</span>&lt;form action=&quot;<span class="Statement">&lt;&lt;print-path</span> <span class="Constant">&quot;/session/user/new/create&quot;</span><span class="Statement">&gt;&gt;</span>&quot; method=&quot;POST&quot;&gt;
<span class="Statement">    @</span>&lt;input name=&quot;email&quot; type=&quot;text&quot; value=&quot;&quot; size=&quot;<span class="Constant">50</span>&quot; maxlength=&quot;<span class="Constant">50</span>&quot; required autofocus placeholder=&quot;Email&quot;&gt;
<span class="Statement">    @</span>&lt;input name=&quot;pwd&quot; type=&quot;password&quot; value=&quot;&quot; size=&quot;<span class="Constant">50</span>&quot; maxlength=&quot;<span class="Constant">50</span>&quot; required placeholder=&quot;Password&quot;&gt;
<span class="Statement">    @</span>&lt;input type=&quot;submit&quot; value=&quot;Sign Up&quot;&gt;
<span class="Statement">    @</span>&lt;/form&gt;
<span class="Statement">%%</span>
<span class="Comment">// Send verification email</span>
<span class="Statement">%%</span> /session/user/new/send-verify<span class="Identifier"> private</span>
<span class="Statement">    get-param</span> email, verify
<span class="Statement">    write-string</span> msg
<span class="Statement">        @</span>From: service@your-service.com
<span class="Statement">        @</span>To: <span class="Statement">&lt;&lt;print-out</span> email<span class="Statement">&gt;&gt;</span>
<span class="Statement">        @</span>Subject: verify your account
<span class="Statement">        @</span>
<span class="Statement">        @</span>Your verification code is: <span class="Statement">&lt;&lt;print-out</span> verify<span class="Statement">&gt;&gt;</span>
<span class="Statement">    end-write-string</span>
<span class="Statement">    exec-program</span> <span class="Constant">&quot;/usr/sbin/sendmail&quot;</span><span class="Identifier"> args</span> <span class="Constant">&quot;-i&quot;</span>, <span class="Constant">&quot;-t&quot;</span><span class="Identifier"> input</span> msg<span class="Type"> status</span> st
<span class="Statement">    if-true</span> st<span class="Identifier"> not-equal</span> <span class="Constant">0</span><span class="Identifier"> or</span> <span class="Constant">true</span><span class="Identifier"> equal</span> <span class="Constant">false</span>
<span class="Statement">        @</span>Could not send email to <span class="Statement">&lt;&lt;print-out</span> email<span class="Statement">&gt;&gt;</span>, code is <span class="Statement">&lt;&lt;print-out</span> verify<span class="Statement">&gt;&gt;</span>
<span class="Statement">        set-param</span> verify_sent = <span class="Constant">false</span>
<span class="Statement">    else-if</span>
<span class="Statement">        set-param</span> verify_sent = <span class="Constant">true</span>
<span class="Statement">    end-if</span>
<span class="Statement">%%</span>
<span class="Comment">// Create new user from email and password</span>
<span class="Statement">%%</span> /session/user/new/create<span class="Identifier"> public</span>
<span class="Statement">    get-param</span> email, pwd
<span class="Statement">    hash-string</span> pwd<span class="Type"> to</span> hashed_pwd
<span class="Statement">    random-string</span><span class="Type"> to</span> verify<span class="Identifier"> length</span> <span class="Constant">5</span><span class="Identifier"> number</span>
<span class="Statement">    begin-transaction</span> @db_app
<span class="Statement">    run-query</span> @db_app<span class="Identifier"> no-loop</span> = <span class="Constant">&quot;insert into users (email, hashed_pwd, verified, verify_token, session) values ('</span><span class="Special">%s</span><span class="Constant">', '</span><span class="Special">%s</span><span class="Constant">', '0', '</span><span class="Special">%s</span><span class="Constant">', '')&quot;</span><span class="Identifier"> input</span> email, hashed_pwd, verify<span class="Type"> affected-rows</span> arows<span class="Type"> error</span> err<span class="Identifier"> on-error-continue</span>
<span class="Statement">    if-true</span> err<span class="Identifier"> not-equal</span> <span class="Constant">&quot;0&quot;</span><span class="Identifier"> or</span> arows<span class="Identifier"> not-equal</span> <span class="Constant">1</span>
<span class="Statement">        call-handler</span> <span class="Constant">&quot;/session/login-or-signup&quot;</span>
<span class="Statement">        @</span>User with this email already exists.
<span class="Statement">        rollback-transaction</span> @db_app
<span class="Statement">    else-if</span>
<span class="Statement">        call-handler</span> <span class="Constant">&quot;/session/user/new/send-verify&quot;</span><span class="Identifier"> set-param</span> email, verify
<span class="Statement">        get-param</span> verify_sent<span class="Identifier"> type bool</span>
<span class="Statement">        if-true</span> verify_sent<span class="Identifier"> equal</span> <span class="Constant">false</span>
<span class="Statement">            rollback-transaction</span> @db_app
<span class="Statement">            exit-handler</span>
<span class="Statement">        end-if</span>
<span class="Statement">        commit-transaction</span> @db_app
<span class="Statement">        call-handler</span> <span class="Constant">&quot;/session/user/new/verify-form&quot;</span>
<span class="Statement">    end-if</span>
<span class="Statement">%%</span>
<span class="Comment">// Display form to enter the code emailed to user to verify the email address</span>
<span class="Statement">%%</span> /session/user/new/verify-form<span class="Identifier"> public</span>
<span class="Statement">    get-param</span> email
<span class="Statement">    @</span>Please check your email and enter verification code here:
<span class="Statement">    @</span>&lt;form action=&quot;<span class="Statement">&lt;&lt;print-path</span> <span class="Constant">&quot;/session/verify-signup&quot;</span><span class="Statement">&gt;&gt;</span>&quot; method=&quot;POST&quot;&gt;
<span class="Statement">    @</span>&lt;input name=&quot;email&quot; type=&quot;hidden&quot; value=&quot;<span class="Statement">&lt;&lt;print-out</span> email<span class="Statement">&gt;&gt;</span>&quot;&gt;
<span class="Statement">    @</span>&lt;input name=&quot;code&quot; type=&quot;text&quot; value=&quot;&quot; size=&quot;<span class="Constant">50</span>&quot; maxlength=&quot;<span class="Constant">50</span>&quot; required autofocus placeholder=&quot;Verification code&quot;&gt;
<span class="Statement">    @</span>&lt;button type=&quot;submit&quot;&gt;Verify&lt;/button&gt;
<span class="Statement">    @</span>&lt;/form&gt;
<span class="Statement">%%</span>
<span class="Constant">EOF</span></pre>
<span id=rimstone_copied_208 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_208' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_208, code_208, rimstone_copied_208)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<span style="font-weight:bold;">- Notes application</span><br/>
<br/>
This is the actual application that uses above session management services in file "notes.rim":<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_210' class=notranslate>
cat &lt;&lt; '<span class="Constant">EOF</span>' &gt; notes.rim
<span class="Comment">// Delete a note</span>
<span class="Statement">%%</span> /notes/delete<span class="Identifier"> public</span>
<span class="Statement">    call-handler</span> <span class="Constant">&quot;/notes/header&quot;</span>
<span class="Statement">    get-param</span> sess_user_id, note_id
<span class="Statement">    run-query</span> @db_app = <span class="Constant">&quot;delete from notes where noteId='</span><span class="Special">%s</span><span class="Constant">' and userId='</span><span class="Special">%s</span><span class="Constant">'&quot;</span><span class="Identifier"> :</span> note_id, sess_user_id \
           <span class="Type"> affected-rows</span> arows<span class="Identifier"> no-loop</span><span class="Type"> error</span> errnote
<span class="Statement">    if-true</span> arows<span class="Identifier"> equal</span> <span class="Constant">1</span>
<span class="Statement">        @</span>Note deleted
<span class="Statement">    else-if</span>
<span class="Statement">        @</span>Could not delete note (<span class="Statement">&lt;&lt;print-out</span> errnote<span class="Statement">&gt;&gt;</span>)
<span class="Statement">    end-if</span>
<span class="Statement">%%</span>
<span class="Comment">// Display a form to add a note</span>
<span class="Statement">%%</span> /notes/form-add <span class="Identifier"> public</span>
<span class="Statement">    call-handler</span> <span class="Constant">&quot;/notes/header&quot;</span>
<span class="Statement">    @</span>Add New Note
<span class="Statement">    @</span>&lt;form action=&quot;<span class="Statement">&lt;&lt;print-path</span> <span class="Constant">&quot;/notes/add&quot;</span><span class="Statement">&gt;&gt;</span>&quot; method=&quot;POST&quot;&gt;
<span class="Statement">    @</span>&lt;textarea name=&quot;note&quot; rows=&quot;<span class="Constant">5</span>&quot; cols=&quot;<span class="Constant">50</span>&quot; required autofocus placeholder=&quot;Enter Note&quot;&gt;&lt;/textarea&gt;
<span class="Statement">    @</span>&lt;button type=&quot;submit&quot;&gt;Create&lt;/button&gt;
<span class="Statement">    @</span>&lt;/form&gt;
<span class="Statement">%%</span>
<span class="Comment">// Add a note</span>
<span class="Statement">%%</span> /notes/add<span class="Identifier"> public</span>
<span class="Statement">    call-handler</span> <span class="Constant">&quot;/notes/header&quot;</span>
<span class="Statement">    get-param</span> note, sess_user_id
<span class="Statement">    run-query</span> @db_app = <span class="Constant">&quot;insert into notes (dateOf, userId, note) values (now(), '</span><span class="Special">%s</span><span class="Constant">', '</span><span class="Special">%s</span><span class="Constant">')&quot;</span><span class="Identifier"> :</span> sess_user_id, note \
           <span class="Type"> affected-rows</span> arows<span class="Identifier"> no-loop</span><span class="Type"> error</span> errnote
<span class="Statement">    if-true</span> arows<span class="Identifier"> equal</span> <span class="Constant">1</span>
<span class="Statement">        @</span>Note added
<span class="Statement">    else-if</span>
<span class="Statement">        @</span>Could not add note (<span class="Statement">&lt;&lt;print-out</span> errnote<span class="Statement">&gt;&gt;</span>)
<span class="Statement">    end-if</span>
<span class="Statement">%%</span>
<span class="Comment">// List all notes</span>
<span class="Statement">%%</span> /notes/list<span class="Identifier"> public</span>
<span class="Statement">    call-handler</span> <span class="Constant">&quot;/notes/header&quot;</span>
<span class="Statement">    get-param</span> sess_user_id
<span class="Statement">    run-query</span> @db_app = <span class="Constant">&quot;select dateOf, note, noteId from notes where userId='</span><span class="Special">%s</span><span class="Constant">' order by dateOf desc&quot;</span> \
           <span class="Identifier"> input</span> sess_user_id<span class="Type"> output</span> dateOf, note, noteId
<span class="Statement">        match-regex</span> <span class="Constant">&quot;</span><span class="Special">\n</span><span class="Constant">&quot;</span><span class="Identifier"> in</span> note<span class="Identifier"> replace-with</span> <span class="Constant">&quot;&lt;br/&gt;</span><span class="Special">\n</span><span class="Constant">&quot;</span><span class="Type"> result</span> with_breaks<span class="Type"> status</span> st<span class="Identifier"> cache</span>
<span class="Statement">        if-true</span> st<span class="Identifier"> equal</span> <span class="Constant">0</span>
<span class="Statement">            set-string</span> with_breaks = note
<span class="Statement">        end-if</span>
<span class="Statement">        @</span>Date: <span class="Statement">&lt;&lt;print-out</span> dateOf<span class="Statement">&gt;&gt;</span> (&lt;a href=&quot;<span class="Statement">&lt;&lt;print-path</span> <span class="Constant">&quot;/notes/ask-delete&quot;</span><span class="Statement">&gt;&gt;</span>?note_id=<span class="Statement">&lt;&lt;print-out</span> noteId<span class="Statement">&gt;&gt;</span>&quot;&gt;delete note&lt;/a&gt;)&lt;br/&gt;
<span class="Statement">        @</span>Note: <span class="Statement">&lt;&lt;print-out</span> with_breaks<span class="Statement">&gt;&gt;</span>&lt;br/&gt;
<span class="Statement">        @</span>&lt;hr/&gt;
<span class="Statement">    end-query</span>
<span class="Statement">%%</span>
<span class="Comment">// Display a question whether to delete a note or not</span>
<span class="Statement">%%</span> /notes/ask-delete<span class="Identifier"> public</span>
<span class="Statement">    call-handler</span> <span class="Constant">&quot;/notes/header&quot;</span>
<span class="Statement">    get-param</span> note_id
<span class="Statement">    @</span>Are you sure you want to delete a note? Use Back button to go back,\
       or &lt;a href=&quot;<span class="Statement">&lt;&lt;print-path</span> <span class="Constant">&quot;/notes/delete&quot;</span><span class="Statement">&gt;&gt;</span>?note_id=<span class="Statement">&lt;&lt;print-out</span> note_id<span class="Statement">&gt;&gt;</span>&quot;&gt;delete note now&lt;/a&gt;.
<span class="Statement">%%</span>
<span class="Comment">// Check if session is authorized, and display an appropriate header</span>
<span class="Statement">%%</span> /notes/header<span class="Identifier"> private</span>
<span class="Statement">    get-param</span> is_logged_in<span class="Identifier"> type bool</span>
<span class="Statement">    if-true</span> is_logged_in<span class="Identifier"> equal</span> <span class="Constant">false</span>
<span class="Statement">        call-handler</span> <span class="Constant">&quot;/session/login-or-signup&quot;</span>
<span class="Statement">    end-if</span>
<span class="Statement">    @</span>&lt;h1&gt;Welcome to Notes!&lt;/h1&gt;&lt;hr/&gt;
<span class="Statement">    if-true</span> is_logged_in<span class="Identifier"> equal</span> <span class="Constant">false</span>
<span class="Statement">        exit-handler</span>
<span class="Statement">    end-if</span>
<span class="Statement">    @</span>&lt;a href=&quot;<span class="Statement">&lt;&lt;print-path</span> <span class="Constant">&quot;/notes/form-add&quot;</span><span class="Statement">&gt;&gt;</span>&quot;&gt;Add Note&lt;/a&gt; &lt;a href=&quot;<span class="Statement">&lt;&lt;print-path</span> <span class="Constant">&quot;/notes/list&quot;</span><span class="Statement">&gt;&gt;</span>&quot;&gt;List Notes&lt;/a&gt;&lt;hr/&gt;
<span class="Statement">%%</span>
<span class="Constant">EOF</span></pre>
<span id=rimstone_copied_210 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_210' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_210, code_210, rimstone_copied_210)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<div class="vsub"><a id="Build application"></a>Build application</div>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_214' class=notranslate>
rim <span class="Special">-q</span> <span class="Special">--db</span><span class="Statement">=</span>postgres:db_app</pre>
<span id=rimstone_copied_214 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_214' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_214, code_214, rimstone_copied_214)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<div class="vsub"><a id="Run web services application server"></a>Run web services application server</div>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_215' class=notranslate>
mrim notes</pre>
<span id=rimstone_copied_215 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_215' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_215, code_215, rimstone_copied_215)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<div class="vsub"><a id="Emailing"></a>Emailing</div>
In order to use this example, you need to be able to email local users, which means email addresses such as \"myuser@localhost\". To do that, install postfix (or sendmail). On Debian systems (like Ubuntu):<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_216' class=notranslate>
sudo apt install postfix
sudo systemctl start postfix</pre>
<span id=rimstone_copied_216 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_216' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_216, code_216, rimstone_copied_216)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
and on Fedora systems (like RedHat):<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_217' class=notranslate>
sudo dnf install postfix
sudo systemctl start postfix</pre>
<span id=rimstone_copied_217 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_217' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_217, code_217, rimstone_copied_217)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
When the application sends an email to a local user, such as &lt;OS user&gt;@localhost, then you can see the email sent at:<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_201' class=notranslate>
sudo vi /var/mail/<span class="Statement">&lt;</span>OS user<span class="Statement">&gt;</span></pre>
<span id=rimstone_copied_201 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_201' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_201, code_201, rimstone_copied_201)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<div class="vsub"><a id="Setup Nginx"></a>Setup Nginx</div>
A web server sits in front of RimStone application server, so it needs to be setup. This example is for Ubuntu, so edit Nginx config file there:<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_202' class=notranslate>
sudo vi /etc/nginx/sites-enabled/default</pre>
<span id=rimstone_copied_202 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_202' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_202, code_202, rimstone_copied_202)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Add this in "server {}" section (replace "your-user" with your OS user name):<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_203' class=notranslate>
location /notes/ <span class="Special">{</span> include /etc/nginx/fastcgi_params<span class="Statement">;</span> fastcgi_pass  unix:///home/your-user/.rimstone/apps/notes/sock/.sock<span class="Statement">;</span> <span class="Special">}</span></pre>
<span id=rimstone_copied_203 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_203' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_203, code_203, rimstone_copied_203)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Restart Nginx:<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_204' class=notranslate>
sudo systemctl restart nginx</pre>
<span id=rimstone_copied_204 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_204' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_204, code_204, rimstone_copied_204)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<div class="vsub"><a id="You're done, run it!"></a>You're done, run it!</div>
Go to your web browser, and enter:<br/>
<div class='ncode' style='position:relative;padding-right:16px;'>
<pre id='code_205' class=notranslate>
http://127.0.0.1/notes/session/start</pre>
<span id=rimstone_copied_205 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_205' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_205, code_205, rimstone_copied_205)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<a id='article-random.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:left;background-color:white;'><a href='https://rimstone-lang.com' style='border-bottom:0px'><img src='https://rimstone-lang.com/rimstone.png' style='width:180px;height:auto'/></a></div><div class='vhub' style='margin-top:10px;'>Random numbers in RimStone</div><hr/><br/>
 Generating random numbers is important in a wide range of applications. For instance, session IDs often use random numbers; they are also used in generating passwords; another example is load balancing where (say instead of round-robin), the next available process to serve a request is chosen randomly; some applications (like gambling) depend on random qualities; any kind of simulation would heavily rely on random numbers; financial and polling applications use random samples to determine outcomes and policies. The list of possible uses is pretty long.<br/>
<br/>
So with that in mind, generating random numbers in RimStone is easy. The most common way is <a href='/random-string.html'>random-string</a> statement:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_218' class=notranslate>
<span class="Statement">random-string</span><span class="Type"> to</span> rnd
<span class="Statement">print-out</span> rnd<span class="Identifier"> new-line</span></pre>
<span id=rimstone_copied_218 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_218' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_218, code_218, rimstone_copied_218)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
By default "rnd" will be a random string of length 20 consisting of digits (0-9) and letters (a-z and A-Z).<br/>
<br/>
You can specify the length desired:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_219' class=notranslate>
<span class="Statement">random-string</span><span class="Type"> to</span> rnd<span class="Identifier"> length</span> <span class="Constant">100</span></pre>
<span id=rimstone_copied_219 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_219' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_219, code_219, rimstone_copied_219)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
which will generate a random string of length 100.<br/>
<br/>
You can also insist that it'd be made of digits only:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_220' class=notranslate>
<span class="Statement">random-string</span><span class="Type"> to</span> rnd<span class="Identifier"> length</span> <span class="Constant">100</span><span class="Identifier"> number</span></pre>
<span id=rimstone_copied_220 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_220' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_220, code_220, rimstone_copied_220)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
And you can make a binary random string, meaning each byte is ranging from 0-255 in value with:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_221' class=notranslate>
<span class="Statement">random-string</span><span class="Type"> to</span> rnd<span class="Identifier"> length</span> <span class="Constant">100</span><span class="Identifier"> binary</span></pre>
<span id=rimstone_copied_221 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_221' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_221, code_221, rimstone_copied_221)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Of course, such a string could have a zero byte in it. Not to worry, since RimStone keeps track of string lengths, and using this string (for instance copying) will perform correctly.<br/>
<br/>
Note that when we say "random" we really mean pseudo-random. Achieving absolutely random value is more in the domain of mother Nature and quantum mechanics. However, RimStone strives to deliver very good randomness, which is based on local process properties, such as Process ID (PID) and varied current time.<br/>
<br/>
If you'd like to take the randomness a notch up, then you can use <a href='/random-crypto.html'>random-crypto</a> statement. This uses a cryptographically secure pseudo random generator (CSPRNG) from OpenSSL library, which is closer to a truly random notion. Note however, for most purposes by far, a random-string will suffice. It delivers good randomness that's suitable for most applications and is much faster than random-crypto, which really should be used for cryptographic purposes only. random-crypto has "length" clause only and it produces binary values always, as is usually the case with cryptography.<br/>
<a id='article-record-temperature-mariadb.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:left;background-color:white;'><a href='https://rimstone-lang.com' style='border-bottom:0px'><img src='https://rimstone-lang.com/rimstone.png' style='width:180px;height:auto'/></a></div><div class='vhub' style='margin-top:10px;'>More than one table in a database transaction in MariaDB</div><hr/><br/>
Here you'll learn how to use a database transaction to insert/update into multiple tables; so that if any of those fail, the entire transaction is cancelled (rollbacked), and if they all succeed, the transaction is committed as a whole, atomically.<br/>
<br/>
What if you wanted to record temperatures in any given zip code, and compute averages as you go along, so both historical temperatures and averages are available at will, without computation? Here's how to do it. Setting up the database is probably the most of it, so that can't be avoided. But the actual application to do the job is super simple.<br/>
<br/>
First, create a new directory for your application, and create a new application "climate":<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_224' class=notranslate>
<span class="Statement">mkdir</span> temps
<span class="Statement">cd</span> temps
rim <span class="Special">-k</span> climate</pre>
<span id=rimstone_copied_224 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_224' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_224, code_224, rimstone_copied_224)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Here's the database setup. We'll use a little "cat" trick with EOF so we can write directly to files. So in this case, all the lines between "cat &lt;&lt; 'EOF'..." and "EOF" are written to file "setup.sql", which is the database setup. We use MariaDB here; you can use other databases too:<br/>
<div class='sqlcode' style='position:relative;padding-right:16px;'>
<pre id='code_225' class=notranslate>
cat &lt;&lt; <span class="Special">'</span><span class="Constant">EOF</span><span class="Special">'</span> &gt; setup.sql
<span class="Statement">create</span> <span class="Identifier">user</span> weather;
<span class="Statement">create</span> database weather_journal;
<span class="Statement">grant</span> <span class="Statement">all</span> <span class="Special">privileges</span> <span class="Special">on</span> weather_journal.* <span class="Special">to</span> weather@localhost <span class="Special">identified</span> <span class="Special">by</span> <span class="Special">'</span><span class="Constant">pwd</span><span class="Special">'</span>;
use weather_journal;
<span class="Statement">create</span> <span class="Special">table</span> <span class="Special">if</span> <span class="Statement">not</span> <span class="Statement">exists</span> temperature_history (zip <span class="Type">varchar</span>(<span class="Constant">10</span>), temp <span class="Type">int</span>, curr_date <span class="Type">date</span>, curr_time time);
<span class="Statement">create</span> <span class="Special">table</span> <span class="Special">if</span> <span class="Statement">not</span> <span class="Statement">exists</span> climate_avg (zip <span class="Type">varchar</span>(<span class="Constant">10</span>) primary key, average_temp <span class="Type">int</span>, <span class="Identifier">count</span> <span class="Type">int</span>);
EOF</pre>
<span id=rimstone_copied_225 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_225' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_225, code_225, rimstone_copied_225)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Run the database setup:<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_227' class=notranslate>
sudo mysql <span class="Statement">&lt;</span> setup.sql</pre>
<span id=rimstone_copied_227 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_227' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_227, code_227, rimstone_copied_227)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
This file ("weather_db") is the <a href='/database-config-file.html'>database-config-file</a>. It describes your database the way your database needs it, i.e. natively. So if you'd use PostgreSQL you'd use Postgres format. If you'd use SQLite, you'd use SQLite format. This makes it easy, since there's no new database config file format to learn:<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_228' class=notranslate>
<span class="Statement">cat</span> <span class="Statement">&lt;&lt; 'EOF'</span><span class="Constant"> &gt; weather_db</span>
<span class="Constant">[client]</span>
<span class="Constant">user=weather</span>
<span class="Constant">password=pwd</span>
<span class="Constant">database=weather_journal</span>
<span class="Constant">socket=/run/mysqld/mysqld.sock</span>
<span class="Statement">EOF</span></pre>
<span id=rimstone_copied_228 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_228' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_228, code_228, rimstone_copied_228)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Here's the actual code. It's a RimStone file "weather.rim", which contains two services, "/weather/insert" (to insert new temperature data) and &nbsp;"/weather/get-agv" (to get historical data and averages). The code is really quite self-explanatory. In RimStone, every statements always starts with the new line (watch out for "\" at end of the line, which continues the line). So you can get documentation for <a href='/get-param.html'>get-param</a> (to get input parameter), or <a href='/run-query.html'>run-query</a> (to run a database query), etc. <br/>
<br/>
In this case, for instance, for "/weather/insert" service, you need to provide "zip_code" and "temperature" parameters. The URL path to do that might be for instance "/weather/insert/zip_code=11111/temperature=75", or "/weather/insert?zip_code=11111&amp;temperature=75", depending on what looks better to you, or to what practices you subscribe. If this is a web service, you can pass those parameters as a part of HTTP request body in a POST request; the point is, there's ways to supply them.<br/>
<br/>
Here's the code:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_223' class=notranslate>
cat &lt;&lt; '<span class="Constant">EOF</span>' &gt; weather.rim
<span class="Statement">%%</span> /weather/insert<span class="Identifier"> public</span>
<span class="Statement">    get-param</span> zip_code
<span class="Statement">    get-param</span> temperature
<span class="Statement">    begin-transaction</span>
<span class="Statement">        run-query</span> @weather_db = <span class="Constant">&quot;insert into temperature_history (zip, temp, curr_date, curr_time) </span><span class="Special">\</span>
<span class="Constant">            values ('</span><span class="Special">%s</span><span class="Constant">', '</span><span class="Special">%s</span><span class="Constant">', CURRENT_DATE(), CURRENT_TIME())&quot;</span> \
           <span class="Identifier"> input</span> zip_code, temperature<span class="Identifier"> no-loop</span><span class="Type"> error-text</span> et
<span class="Statement">        if-true</span> et<span class="Identifier"> not-equal</span> <span class="Constant">&quot;&quot;</span>
<span class="Statement">            @</span>Error in inserting temperature history [<span class="Statement">&lt;&lt;print-out</span> et<span class="Statement">&gt;&gt;</span>]
<span class="Statement">            rollback-transaction</span> @weather_db
<span class="Statement">            exit-handler</span>
<span class="Statement">        else-if</span>
<span class="Statement">            run-query</span> @weather_db = <span class="Constant">&quot;insert into climate_avg (zip, average_temp, count) values ('</span><span class="Special">%s</span><span class="Constant">', '</span><span class="Special">%s</span><span class="Constant">', 1) </span><span class="Special">\</span>
<span class="Constant">                on duplicate key update count=count+1, average_temp=(average_temp*(count-1)+'</span><span class="Special">%s</span><span class="Constant">')/count&quot;</span> \
               <span class="Identifier"> input</span> zip_code, temperature, temperature<span class="Identifier"> no-loop</span><span class="Type"> error-text</span> et
<span class="Statement">            if-true</span> et<span class="Identifier"> not-equal</span> <span class="Constant">&quot;&quot;</span>
<span class="Statement">                @</span>Error in updating temperature average [<span class="Statement">&lt;&lt;print-out</span> et<span class="Statement">&gt;&gt;</span>]
<span class="Statement">                rollback-transaction</span> @weather_db
<span class="Statement">                exit-handler</span>
<span class="Statement">            end-if</span>
<span class="Statement">        end-if</span>
<span class="Statement">    commit-transaction</span> @weather_db
<span class="Statement">    @</span>Data stored and average updated.
<span class="Statement">%%</span>

<span class="Statement">%%</span> /weather/get-avg<span class="Identifier"> public</span>
<span class="Statement">    get-param</span> zip_code
<span class="Statement">    run-query</span> @weather_db = <span class="Constant">&quot;select temp, curr_date, curr_time from temperature_history </span><span class="Special">\</span>
<span class="Constant">        where zip='</span><span class="Special">%s</span><span class="Constant">' order by curr_date, curr_time asc&quot;</span><span class="Identifier"> input</span> zip_code<span class="Type"> output</span> temp, date, time
<span class="Statement">        print-format</span> <span class="Constant">&quot;Temp [</span><span class="Special">%4ld</span><span class="Constant">] Date [</span><span class="Special">%s</span><span class="Constant"> </span><span class="Special">%s</span><span class="Constant">]</span><span class="Special">\n</span><span class="Constant">&quot;</span>, #temp, date, time
<span class="Statement">    end-query</span>
<span class="Statement">    run-query</span> @weather_db = <span class="Constant">&quot;select average_temp, count from climate_avg where zip='</span><span class="Special">%s</span><span class="Constant">'&quot;</span><span class="Identifier"> input</span> zip_code<span class="Type"> output</span> avg, count
<span class="Statement">        @</span>Average is [<span class="Statement">&lt;&lt;print-out</span> avg<span class="Statement">&gt;&gt;</span>] from the total of [<span class="Statement">&lt;&lt;print-out</span> count<span class="Statement">&gt;&gt;</span>] samples
<span class="Statement">    end-query</span>
<span class="Statement">%%</span>
<span class="Constant">EOF</span></pre>
<span id=rimstone_copied_223 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_223' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_223, code_223, rimstone_copied_223)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Make the application:<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_229' class=notranslate>
rim <span class="Special">-q</span> <span class="Special">--db</span><span class="Statement">=</span><span class="Statement">&quot;</span><span class="Constant">mariadb:weather_db</span><span class="Statement">&quot;</span></pre>
<span id=rimstone_copied_229 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_229' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_229, code_229, rimstone_copied_229)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Insert the data. Note we're using <a href='/rim.html'>rim</a> utility. You can skip the "--exec" here, and see the bash code to run your native application directly from command line. <br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_230' class=notranslate>
rim <span class="Special">-r</span> <span class="Special">--req</span><span class="Statement">=</span><span class="Statement">&quot;</span><span class="Constant">/weather/insert/zip_code=11111/temperature=82</span><span class="Statement">&quot;</span> <span class="Special">--exec</span> <span class="Special">--silent-header</span>
rim <span class="Special">-r</span> <span class="Special">--req</span><span class="Statement">=</span><span class="Statement">&quot;</span><span class="Constant">/weather/insert/zip_code=11111/temperature=102</span><span class="Statement">&quot;</span> <span class="Special">--exec</span> <span class="Special">--silent-header</span>
rim <span class="Special">-r</span> <span class="Special">--req</span><span class="Statement">=</span><span class="Statement">&quot;</span><span class="Constant">/weather/insert/zip_code=11111/temperature=91</span><span class="Statement">&quot;</span> <span class="Special">--exec</span> <span class="Special">--silent-header</span></pre>
<span id=rimstone_copied_230 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_230' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_230, code_230, rimstone_copied_230)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
The result is:<br/>
<div class='ncode' style='position:relative;padding-right:16px;'>
<pre id='code_222' class=notranslate>
Data stored and average updated.
Data stored and average updated.
Data stored and average updated.</pre>
<span id=rimstone_copied_222 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_222' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_222, code_222, rimstone_copied_222)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
And now you can query the data:<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_231' class=notranslate>
rim <span class="Special">-r</span> <span class="Special">--req</span><span class="Statement">=</span><span class="Statement">&quot;</span><span class="Constant">/weather/get-avg/zip_code=11111</span><span class="Statement">&quot;</span> <span class="Special">--exec</span> <span class="Special">--silent-header</span></pre>
<span id=rimstone_copied_231 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_231' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_231, code_231, rimstone_copied_231)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
With the result like:<br/>
<div class='ncode' style='position:relative;padding-right:16px;'>
<pre id='code_226' class=notranslate>
Temp [  82] Date [2025-09-07 09:47:42]
Temp [ 102] Date [2025-09-07 09:47:42]
Temp [  91] Date [2025-09-07 09:47:42]
Average is [92] from the total of [3] sample</pre>
<span id=rimstone_copied_226 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_226' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_226, code_226, rimstone_copied_226)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
That's the application! You can run it from <a href='/command-line.html'>command-line</a> or as a web <a href='/service.html'>service</a> (see <a href='/article-tree-web.html'>article-tree-web</a> for an example of a setup).<br/>
<a id='article-record-temperature-postgres.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:left;background-color:white;'><a href='https://rimstone-lang.com' style='border-bottom:0px'><img src='https://rimstone-lang.com/rimstone.png' style='width:180px;height:auto'/></a></div><div class='vhub' style='margin-top:10px;'>More than one table in a database transaction in PostgreSQL</div><hr/><br/>
Here you'll learn how to use a database transaction to insert/update into multiple tables; so that if any of those fail, the entire transaction is cancelled (rollbacked), and if they all succeed, the transaction is committed as a whole, atomically.<br/>
<br/>
What if you wanted to record temperatures in any given zip code, and compute averages as you go along, so both historical temperatures and averages are available at will, without computation? Here's how to do it. Setting up the database is probably the most of it, so that can't be avoided. But the actual application to do the job is super simple.<br/>
<br/>
First, create a new directory for your application, and create a new application "climate":<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_234' class=notranslate>
<span class="Statement">mkdir</span> temps
<span class="Statement">cd</span> temps
rim <span class="Special">-k</span> climate</pre>
<span id=rimstone_copied_234 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_234' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_234, code_234, rimstone_copied_234)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Here's the database setup. We'll use a little "cat" trick with EOF so we can write directly to files. So in this case, all the lines between "cat &lt;&lt; 'EOF'..." and "EOF" are written to file "setup.sql", which is the database setup. We use MariaDB here; you can use other databases too:<br/>
<div class='sqlcode' style='position:relative;padding-right:16px;'>
<pre id='code_235' class=notranslate>
cat &lt;&lt; <span class="Special">'</span><span class="Constant">EOF</span><span class="Special">'</span> &gt; setup.sql
<span class="Statement">create</span> <span class="Identifier">user</span> $(whoami)
<span class="Statement">create</span> database weather_pdb <span class="Special">with</span> owner=$(whoami)
<span class="Statement">grant</span> <span class="Statement">all</span> <span class="Special">on</span> database weather_pdb <span class="Special">to</span> $(whoami)
\c weather_pdb
<span class="Statement">create</span> <span class="Special">table</span> <span class="Special">if</span> <span class="Statement">not</span> <span class="Statement">exists</span> temperature_history (zip <span class="Type">varchar</span>(<span class="Constant">10</span>), temp <span class="Type">int</span>, curr_date <span class="Type">date</span>, curr_time time);
<span class="Statement">create</span> <span class="Special">table</span> <span class="Special">if</span> <span class="Statement">not</span> <span class="Statement">exists</span> climate_avg (zip <span class="Type">varchar</span>(<span class="Constant">10</span>) primary key, average_temp <span class="Type">int</span>, <span class="Identifier">count</span> <span class="Type">int</span>);
EOF</pre>
<span id=rimstone_copied_235 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_235' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_235, code_235, rimstone_copied_235)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Run the database setup:<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_237' class=notranslate>
sudo <span class="Special">-u</span> postgres psql <span class="Statement">&lt;</span> setup.sql</pre>
<span id=rimstone_copied_237 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_237' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_237, code_237, rimstone_copied_237)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
This file ("weather_pdb") is the <a href='/database-config-file.html'>database-config-file</a>. It describes your database the way your database needs it, i.e. natively. So if you'd use MariaDB you'd use MariaDB format. If you'd use SQLite, you'd use SQLite format. This makes it easy, since there's no new database config file format to learn:<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_238' class=notranslate>
<span class="Statement">cat</span> <span class="Statement">&lt;&lt; 'EOF'</span><span class="Constant"> &gt; weather_pdb</span>
<span class="Constant">user=bear dbname=weather_pdb</span>
<span class="Statement">EOF</span></pre>
<span id=rimstone_copied_238 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_238' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_238, code_238, rimstone_copied_238)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Here's the actual code. It's a RimStone file "weather.rim", which contains two services, "/weather/insert" (to insert new temperature data) and &nbsp;"/weather/get-agv" (to get historical data and averages). The code is really quite self-explanatory. In RimStone, every statements always starts with the new line (watch out for "\" at end of the line, which continues the line). So you can get documentation for <a href='/get-param.html'>get-param</a> (to get input parameter), or <a href='/run-query.html'>run-query</a> (to run a database query), etc. <br/>
<br/>
In this case, for instance, for "/weather/insert" service, you need to provide "zip_code" and "temperature" parameters. The URL path to do that might be for instance "/weather/insert/zip_code=11111/temperature=75", or "/weather/insert?zip_code=11111&amp;temperature=75", depending on what looks better to you, or to what practices you subscribe. If this is a web service, you can pass those parameters as a part of HTTP request body in a POST request; the point is, there's ways to supply them.<br/>
<br/>
Here's the code:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_233' class=notranslate>
cat &lt;&lt; '<span class="Constant">EOF</span>' &gt; weather-postgres.rim
<span class="Statement">%%</span> /weather-postgres/insert<span class="Identifier"> public</span>
<span class="Statement">    get-param</span> zip_code
<span class="Statement">    get-param</span> temperature
<span class="Statement">    begin-transaction</span> @weather_pdb
<span class="Statement">        run-query</span> @weather_pdb = <span class="Constant">&quot;insert into temperature_history (zip, temp, curr_date, curr_time) </span><span class="Special">\</span>
<span class="Constant">            values ('</span><span class="Special">%s</span><span class="Constant">', '</span><span class="Special">%s</span><span class="Constant">', CURRENT_DATE, CURRENT_TIMESTAMP)&quot;</span> \
           <span class="Identifier"> input</span> zip_code, temperature<span class="Identifier"> no-loop</span><span class="Type"> error-text</span> et
<span class="Statement">        if-true</span> et<span class="Identifier"> not-equal</span> <span class="Constant">&quot;&quot;</span>
<span class="Statement">            @</span>Error in inserting temperature history [<span class="Statement">&lt;&lt;print-out</span> et<span class="Statement">&gt;&gt;</span>]
<span class="Statement">            rollback-transaction</span> @weather_pdb
<span class="Statement">            exit-handler</span>
<span class="Statement">        else-if</span>
<span class="Statement">            run-query</span> @weather_pdb = <span class="Constant">&quot;insert into climate_avg (zip, average_temp, count) values ('</span><span class="Special">%s</span><span class="Constant">', '</span><span class="Special">%s</span><span class="Constant">', 1) </span><span class="Special">\</span>
<span class="Constant">                on conflict(zip) do update set count=climate_avg.count+1, </span><span class="Special">\</span>
<span class="Constant">                average_temp=(climate_avg.average_temp*(climate_avg.count)+'</span><span class="Special">%s</span><span class="Constant">')/(climate_avg.count+1)&quot;</span> \
               <span class="Identifier"> input</span> zip_code, temperature, temperature<span class="Identifier"> no-loop</span><span class="Type"> error-text</span> et
<span class="Statement">            if-true</span> et<span class="Identifier"> not-equal</span> <span class="Constant">&quot;&quot;</span>
<span class="Statement">                @</span>Error in updating temperature average [<span class="Statement">&lt;&lt;print-out</span> et<span class="Statement">&gt;&gt;</span>]
<span class="Statement">                rollback-transaction</span> @weather_pdb
<span class="Statement">                exit-handler</span>
<span class="Statement">            end-if</span>
<span class="Statement">        end-if</span>
<span class="Statement">    commit-transaction</span> @weather_pdb
<span class="Statement">    @</span>Data stored and average updated.
<span class="Statement">%%</span>

<span class="Statement">%%</span> /weather-postgres/get-avg<span class="Identifier"> public</span>
<span class="Statement">    get-param</span> zip_code
<span class="Statement">    run-query</span> @weather_pdb = <span class="Constant">&quot;select temp, curr_date, curr_time from temperature_history </span><span class="Special">\</span>
<span class="Constant">        where zip='</span><span class="Special">%s</span><span class="Constant">' order by curr_date, curr_time asc&quot;</span><span class="Identifier"> input</span> zip_code<span class="Type"> output</span> temp, date, time
<span class="Statement">        print-format</span> <span class="Constant">&quot;Temp [</span><span class="Special">%4ld</span><span class="Constant">] Date [</span><span class="Special">%s</span><span class="Constant"> </span><span class="Special">%s</span><span class="Constant">]</span><span class="Special">\n</span><span class="Constant">&quot;</span>, #temp, date, time
<span class="Statement">    end-query</span>
<span class="Statement">    run-query</span> @weather_pdb = <span class="Constant">&quot;select average_temp, count from climate_avg where zip='</span><span class="Special">%s</span><span class="Constant">'&quot;</span><span class="Identifier"> input</span> zip_code<span class="Type"> output</span> avg, count
<span class="Statement">        @</span>Average is [<span class="Statement">&lt;&lt;print-out</span> avg<span class="Statement">&gt;&gt;</span>] from the total of [<span class="Statement">&lt;&lt;print-out</span> count<span class="Statement">&gt;&gt;</span>] samples
<span class="Statement">    end-query</span>
<span class="Statement">%%</span>
<span class="Constant">EOF</span></pre>
<span id=rimstone_copied_233 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_233' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_233, code_233, rimstone_copied_233)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Make the application:<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_239' class=notranslate>
rim <span class="Special">-q</span> <span class="Special">--db</span><span class="Statement">=</span><span class="Statement">&quot;</span><span class="Constant">postgres:weather_pdb</span><span class="Statement">&quot;</span></pre>
<span id=rimstone_copied_239 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_239' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_239, code_239, rimstone_copied_239)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Insert the data. Note we're using <a href='/rim.html'>rim</a> utility. You can skip the "--exec" here, and see the bash code to run your native application directly from command line. <br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_240' class=notranslate>
rim <span class="Special">-r</span> <span class="Special">--req</span><span class="Statement">=</span><span class="Statement">&quot;</span><span class="Constant">/weather-postgres/insert/zip_code=11111/temperature=82</span><span class="Statement">&quot;</span> <span class="Special">--exec</span> <span class="Special">--silent-header</span>
rim <span class="Special">-r</span> <span class="Special">--req</span><span class="Statement">=</span><span class="Statement">&quot;</span><span class="Constant">/weather-postgres/insert/zip_code=11111/temperature=102</span><span class="Statement">&quot;</span> <span class="Special">--exec</span> <span class="Special">--silent-header</span>
rim <span class="Special">-r</span> <span class="Special">--req</span><span class="Statement">=</span><span class="Statement">&quot;</span><span class="Constant">/weather-postgres/insert/zip_code=11111/temperature=91</span><span class="Statement">&quot;</span> <span class="Special">--exec</span> <span class="Special">--silent-header</span></pre>
<span id=rimstone_copied_240 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_240' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_240, code_240, rimstone_copied_240)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
The result is:<br/>
<div class='ncode' style='position:relative;padding-right:16px;'>
<pre id='code_232' class=notranslate>
Data stored and average updated.
Data stored and average updated.
Data stored and average updated.</pre>
<span id=rimstone_copied_232 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_232' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_232, code_232, rimstone_copied_232)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
And now you can query the data:<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_241' class=notranslate>
rim <span class="Special">-r</span> <span class="Special">--req</span><span class="Statement">=</span><span class="Statement">&quot;</span><span class="Constant">/weather-postgres/get-avg/zip_code=11111</span><span class="Statement">&quot;</span> <span class="Special">--exec</span> <span class="Special">--silent-header</span></pre>
<span id=rimstone_copied_241 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_241' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_241, code_241, rimstone_copied_241)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
With the result like:<br/>
<div class='ncode' style='position:relative;padding-right:16px;'>
<pre id='code_236' class=notranslate>
Temp [  82] Date [2025-09-07 09:47:42]
Temp [ 102] Date [2025-09-07 09:47:42]
Temp [  91] Date [2025-09-07 09:47:42]
Average is [91] from the total of [3] sample</pre>
<span id=rimstone_copied_236 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_236' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_236, code_236, rimstone_copied_236)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
That's the application! You can run it from <a href='/command-line.html'>command-line</a> or as a web <a href='/service.html'>service</a> (see <a href='/article-tree-web.html'>article-tree-web</a> for an example of a setup).<br/>
<a id='article-record-temperature-sqlite.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:left;background-color:white;'><a href='https://rimstone-lang.com' style='border-bottom:0px'><img src='https://rimstone-lang.com/rimstone.png' style='width:180px;height:auto'/></a></div><div class='vhub' style='margin-top:10px;'>More than one table in a database transaction in SQLite</div><hr/><br/>
Here you'll learn how to use a database transaction to insert/update into multiple tables; so that if any of those fail, the entire transaction is cancelled (rollbacked), and if they all succeed, the transaction is committed as a whole, atomically.<br/>
<br/>
What if you wanted to record temperatures in any given zip code, and compute averages as you go along, so both historical temperatures and averages are available at will, without computation? Here's how to do it. Setting up the database is probably the most of it, so that can't be avoided. But the actual application to do the job is super simple.<br/>
<br/>
First, create a new directory for your application, and create a new application "climate":<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_244' class=notranslate>
<span class="Statement">mkdir</span> temps
<span class="Statement">cd</span> temps
rim <span class="Special">-k</span> climate</pre>
<span id=rimstone_copied_244 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_244' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_244, code_244, rimstone_copied_244)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Here's the database setup. We'll use a little "cat" trick with EOF so we can write directly to files. So in this case, all the lines between "cat &lt;&lt; 'EOF'..." and "EOF" are written to file "setup.sql", which is the database setup. We use MariaDB here; you can use other databases too:<br/>
<div class='sqlcode' style='position:relative;padding-right:16px;'>
<pre id='code_245' class=notranslate>
cat &lt;&lt; <span class="Special">'</span><span class="Constant">EOF</span><span class="Special">'</span> &gt; setup.sql
<span class="Statement">drop</span> <span class="Special">table</span> <span class="Special">if</span> <span class="Statement">exists</span> temperature_history;
<span class="Statement">drop</span> <span class="Special">table</span> <span class="Special">if</span> <span class="Statement">exists</span> climate_avg;
<span class="Statement">create</span> <span class="Special">table</span> <span class="Special">if</span> <span class="Statement">not</span> <span class="Statement">exists</span> temperature_history (zip <span class="Type">varchar</span>(<span class="Constant">10</span>), temp <span class="Type">int</span>, curr_date <span class="Type">date</span>, curr_time time);
<span class="Statement">create</span> <span class="Special">table</span> <span class="Special">if</span> <span class="Statement">not</span> <span class="Statement">exists</span> climate_avg (zip <span class="Type">varchar</span>(<span class="Constant">10</span>) primary key, average_temp <span class="Type">int</span>, <span class="Identifier">count</span> <span class="Type">int</span>);
EOF</pre>
<span id=rimstone_copied_245 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_245' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_245, code_245, rimstone_copied_245)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Run the database setup:<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_247' class=notranslate>
sqlite3 <span class="PreProc">$HOME</span>/.rimstone/apps/func-test/app/weather_sdb.db <span class="Statement">&lt;</span> setup.sql</pre>
<span id=rimstone_copied_247 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_247' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_247, code_247, rimstone_copied_247)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
This file ("weather_sdb") is the <a href='/database-config-file.html'>database-config-file</a>. It describes your database the way your database needs it, i.e. natively. So if you'd use PostgreSQL you'd use Postgres format. If you'd use MariaDB, you'd use MariaDB format. This makes it easy, since there's no new database config file format to learn:<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_248' class=notranslate>
<span class="Statement">cat</span> <span class="Statement">&lt;&lt; 'EOF'</span><span class="Constant"> &gt; weather_sdb</span>
<span class="Constant">~/.rimstone/apps/func-test/app/weather_sdb.db</span>
<span class="Statement">EOF</span></pre>
<span id=rimstone_copied_248 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_248' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_248, code_248, rimstone_copied_248)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Here's the actual code. It's a RimStone file "weather.rim", which contains two services, "/weather/insert" (to insert new temperature data) and &nbsp;"/weather/get-agv" (to get historical data and averages). The code is really quite self-explanatory. In RimStone, every statements always starts with the new line (watch out for "\" at end of the line, which continues the line). So you can get documentation for <a href='/get-param.html'>get-param</a> (to get input parameter), or <a href='/run-query.html'>run-query</a> (to run a database query), etc. <br/>
<br/>
In this case, for instance, for "/weather/insert" service, you need to provide "zip_code" and "temperature" parameters. The URL path to do that might be for instance "/weather/insert/zip_code=11111/temperature=75", or "/weather/insert?zip_code=11111&amp;temperature=75", depending on what looks better to you, or to what practices you subscribe. If this is a web service, you can pass those parameters as a part of HTTP request body in a POST request; the point is, there's ways to supply them.<br/>
<br/>
Here's the code:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_243' class=notranslate>
cat &lt;&lt; '<span class="Constant">EOF</span>' &gt; weather-sqlite.rim
<span class="Statement">%%</span> /weather-sqlite/insert<span class="Identifier"> public</span>
<span class="Statement">    get-param</span> zip_code
<span class="Statement">    get-param</span> temperature
<span class="Statement">    begin-transaction</span> @weather_sdb
<span class="Statement">        run-query</span> @weather_sdb = <span class="Constant">&quot;insert into temperature_history (zip, temp, curr_date, curr_time) </span><span class="Special">\</span>
<span class="Constant">            values ('</span><span class="Special">%s</span><span class="Constant">', '</span><span class="Special">%s</span><span class="Constant">', date('now'), time('now'))&quot;</span> \
           <span class="Identifier"> input</span> zip_code, temperature<span class="Identifier"> no-loop</span><span class="Type"> error-text</span> et
<span class="Statement">        if-true</span> et<span class="Identifier"> not-equal</span> <span class="Constant">&quot;&quot;</span>
<span class="Statement">            @</span>Error in inserting temperature history [<span class="Statement">&lt;&lt;print-out</span> et<span class="Statement">&gt;&gt;</span>]
<span class="Statement">            rollback-transaction</span> @weather_sdb
<span class="Statement">            exit-handler</span>
<span class="Statement">        else-if</span>
<span class="Statement">            run-query</span> @weather_sdb = <span class="Constant">&quot;insert into climate_avg (zip, average_temp, count) values ('</span><span class="Special">%s</span><span class="Constant">', '</span><span class="Special">%s</span><span class="Constant">', 1) </span><span class="Special">\</span>
<span class="Constant">                on conflict(zip) do update set count=count+1, average_temp=(average_temp*(count)+'</span><span class="Special">%s</span><span class="Constant">')/(count+1)&quot;</span> \
               <span class="Identifier"> input</span> zip_code, temperature, temperature<span class="Identifier"> no-loop</span><span class="Type"> error-text</span> et
<span class="Statement">            if-true</span> et<span class="Identifier"> not-equal</span> <span class="Constant">&quot;&quot;</span>
<span class="Statement">                @</span>Error in updating temperature average [<span class="Statement">&lt;&lt;print-out</span> et<span class="Statement">&gt;&gt;</span>]
<span class="Statement">                rollback-transaction</span> @weather_sdb
<span class="Statement">                exit-handler</span>
<span class="Statement">            end-if</span>
<span class="Statement">        end-if</span>
<span class="Statement">    commit-transaction</span> @weather_sdb
<span class="Statement">    @</span>Data stored and average updated.
<span class="Statement">%%</span>

<span class="Statement">%%</span> /weather-sqlite/get-avg<span class="Identifier"> public</span>
<span class="Statement">    get-param</span> zip_code
<span class="Statement">    run-query</span> @weather_sdb = <span class="Constant">&quot;select temp, curr_date, curr_time from temperature_history </span><span class="Special">\</span>
<span class="Constant">        where zip='</span><span class="Special">%s</span><span class="Constant">' order by curr_date, curr_time asc&quot;</span><span class="Identifier"> input</span> zip_code<span class="Type"> output</span> temp, date, time
<span class="Statement">        print-format</span> <span class="Constant">&quot;Temp [</span><span class="Special">%4ld</span><span class="Constant">] Date [</span><span class="Special">%s</span><span class="Constant"> </span><span class="Special">%s</span><span class="Constant">]</span><span class="Special">\n</span><span class="Constant">&quot;</span>, #temp, date, time
<span class="Statement">    end-query</span>
<span class="Statement">    run-query</span> @weather_sdb = <span class="Constant">&quot;select average_temp, count from climate_avg where zip='</span><span class="Special">%s</span><span class="Constant">'&quot;</span><span class="Identifier"> input</span> zip_code<span class="Type"> output</span> avg, count
<span class="Statement">        @</span>Average is [<span class="Statement">&lt;&lt;print-out</span> avg<span class="Statement">&gt;&gt;</span>] from the total of [<span class="Statement">&lt;&lt;print-out</span> count<span class="Statement">&gt;&gt;</span>] samples
<span class="Statement">    end-query</span>
<span class="Statement">%%</span>
<span class="Constant">EOF</span></pre>
<span id=rimstone_copied_243 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_243' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_243, code_243, rimstone_copied_243)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Make the application:<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_249' class=notranslate>
rim <span class="Special">-q</span> <span class="Special">--db</span><span class="Statement">=</span><span class="Statement">&quot;</span><span class="Constant">sqlite:weather_sdb</span><span class="Statement">&quot;</span></pre>
<span id=rimstone_copied_249 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_249' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_249, code_249, rimstone_copied_249)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Insert the data. Note we're using <a href='/rim.html'>rim</a> utility. You can skip the "--exec" here, and see the bash code to run your native application directly from command line. <br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_250' class=notranslate>
rim <span class="Special">-r</span> <span class="Special">--req</span><span class="Statement">=</span><span class="Statement">&quot;</span><span class="Constant">/weather-sqlite/insert/zip_code=11111/temperature=82</span><span class="Statement">&quot;</span> <span class="Special">--exec</span> <span class="Special">--silent-header</span>
rim <span class="Special">-r</span> <span class="Special">--req</span><span class="Statement">=</span><span class="Statement">&quot;</span><span class="Constant">/weather-sqlite/insert/zip_code=11111/temperature=102</span><span class="Statement">&quot;</span> <span class="Special">--exec</span> <span class="Special">--silent-header</span>
rim <span class="Special">-r</span> <span class="Special">--req</span><span class="Statement">=</span><span class="Statement">&quot;</span><span class="Constant">/weather-sqlite/insert/zip_code=11111/temperature=91</span><span class="Statement">&quot;</span> <span class="Special">--exec</span> <span class="Special">--silent-header</span></pre>
<span id=rimstone_copied_250 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_250' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_250, code_250, rimstone_copied_250)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
The result is:<br/>
<div class='ncode' style='position:relative;padding-right:16px;'>
<pre id='code_242' class=notranslate>
Data stored and average updated.
Data stored and average updated.
Data stored and average updated.</pre>
<span id=rimstone_copied_242 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_242' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_242, code_242, rimstone_copied_242)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
And now you can query the data:<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_251' class=notranslate>
rim <span class="Special">-r</span> <span class="Special">--req</span><span class="Statement">=</span><span class="Statement">&quot;</span><span class="Constant">/weather-sqlite/get-avg/zip_code=11111</span><span class="Statement">&quot;</span> <span class="Special">--exec</span> <span class="Special">--silent-header</span></pre>
<span id=rimstone_copied_251 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_251' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_251, code_251, rimstone_copied_251)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
With the result like:<br/>
<div class='ncode' style='position:relative;padding-right:16px;'>
<pre id='code_246' class=notranslate>
Temp [  82] Date [2025-09-07 09:47:42]
Temp [ 102] Date [2025-09-07 09:47:42]
Temp [  91] Date [2025-09-07 09:47:42]
Average is [91] from the total of [3] sample</pre>
<span id=rimstone_copied_246 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_246' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_246, code_246, rimstone_copied_246)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
That's the application! You can run it from <a href='/command-line.html'>command-line</a> or as a web <a href='/service.html'>service</a> (see <a href='/article-tree-web.html'>article-tree-web</a> for an example of a setup).<br/>
<a id='article-recursion-factorial.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:left;background-color:white;'><a href='https://rimstone-lang.com' style='border-bottom:0px'><img src='https://rimstone-lang.com/rimstone.png' style='width:180px;height:auto'/></a></div><div class='vhub' style='margin-top:10px;'>Calculate factorial: recursion in RimStone</div><hr/><br/>
Computing factorial is commonly used to demonstrate recursion in a programming language, and this example will do that. For a recursion example that manipulates a string, see <a href='/article-recursion-reverse-string.html'>article-recursion-reverse-string</a>.<br/>
<br/>
First, create a directory, and an application "recursive":<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_254' class=notranslate>
<span class="Statement">mkdir</span> <span class="Special">-p</span> recsv
<span class="Statement">cd</span> recsv
rim <span class="Special">-k</span> recursive</pre>
<span id=rimstone_copied_254 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_254' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_254, code_254, rimstone_copied_254)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
This will create the code to compute a factorial:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_253' class=notranslate>
cat &lt;&lt; '<span class="Constant">EOF</span>' &gt; fact.rim
<span class="Statement">%%</span> /fact/compute<span class="Identifier"> get-param</span> n<span class="Identifier"> type number</span>, result<span class="Identifier"> type number</span>
<span class="Statement">    if-true</span> n<span class="Identifier"> greater-equal</span> <span class="Constant">1</span>
<span class="Statement">        call-handler</span> <span class="Constant">&quot;/fact/compute&quot;</span><span class="Identifier"> set-param</span> n=n-<span class="Constant">1</span>, result=result*n
<span class="Statement">    end-if</span>
<span class="Statement">%%</span>

<span class="Statement">%%</span> /fact<span class="Identifier"> public</span>
<span class="Statement">    call-handler</span> <span class="Constant">&quot;/fact/compute&quot;</span><span class="Identifier"> set-param</span> n=<span class="Constant">10</span>, result=<span class="Constant">1</span><span class="Identifier"> get-param</span> result<span class="Identifier"> type number</span>
<span class="Statement">    print-out</span> <span class="Constant">&quot;Factorial is &quot;</span>, result<span class="Identifier"> new-line</span>
<span class="Statement">%%</span>
<span class="Constant">EOF</span></pre>
<span id=rimstone_copied_253 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_253' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_253, code_253, rimstone_copied_253)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
The handler "/fact/compute" calculates the factorial of number "n", and stores the result in "result". It is called from the handler "/fact", and the parameter "result" is both an input and output parameter in this example. "/fact/compute" will calculate a factorial by multiplying the input number with the one lesser by 1, and continuing until the lesser number is 1.<br/>
<br/>
Make the application:<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_255' class=notranslate>
rim <span class="Special">-q</span></pre>
<span id=rimstone_copied_255 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_255' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_255, code_255, rimstone_copied_255)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Execute the code (we specified to calculate the factorial of 10):<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_256' class=notranslate>
rim <span class="Special">-r</span> <span class="Special">--req</span><span class="Statement">=</span><span class="Statement">&quot;</span><span class="Constant">/fact</span><span class="Statement">&quot;</span> <span class="Special">--exec</span> <span class="Special">--silent-header</span></pre>
<span id=rimstone_copied_256 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_256' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_256, code_256, rimstone_copied_256)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
The result as expected is:<br/>
<div class='ncode' style='position:relative;padding-right:16px;'>
<pre id='code_252' class=notranslate>
Factorial is 3628800</pre>
<span id=rimstone_copied_252 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_252' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_252, code_252, rimstone_copied_252)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<a id='article-recursion-reverse-string.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:left;background-color:white;'><a href='https://rimstone-lang.com' style='border-bottom:0px'><img src='https://rimstone-lang.com/rimstone.png' style='width:180px;height:auto'/></a></div><div class='vhub' style='margin-top:10px;'>Reverse string: recursion in RimStone</div><hr/><br/>
This example will reverse a string, i.e. turn it around so that it's like in the mirror. This will be done by using recursion; of course it can be done in other ways too, but this will demonstrate the use of recursion to manipulate a string. For a different recursion example (that calculates a factorial of a number), see <a href='/article-recursion-factorial.html'>article-recursion-factorial</a>.<br/>
<br/>
First, create a directory for this example, and an application named "recursive":<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_259' class=notranslate>
<span class="Statement">mkdir</span> <span class="Special">-p</span> recsv
<span class="Statement">cd</span> recsv
rim <span class="Special">-k</span> recursive</pre>
<span id=rimstone_copied_259 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_259' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_259, code_259, rimstone_copied_259)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
This will create the file "rev.rim", which contains two handlers, one which is public (and that's the one we'll call) and the other, recursive one:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_258' class=notranslate>
cat &lt;&lt; '<span class="Constant">EOF</span>' &gt; rev.rim
<span class="Statement">%%</span> /rev/string<span class="Identifier"> get-param</span> str<span class="Identifier"> type string</span>, str_beg<span class="Identifier"> type number</span>, str_end<span class="Identifier"> type number</span>
<span class="Statement">    if-true</span> str_beg<span class="Identifier"> lesser-than</span> str_end
<span class="Statement">        set-number</span> end = str[str_end]
<span class="Statement">        set-string</span> str[str_end] = str[str_beg]
<span class="Statement">        set-string</span> str[str_beg] = end
<span class="Statement">        call-handler</span> <span class="Constant">&quot;/rev/string&quot;</span><span class="Identifier"> set-param</span> str, str_beg=str_beg+<span class="Constant">1</span>, str_end=str_end-<span class="Constant">1</span>
<span class="Statement">    end-if</span>
<span class="Statement">%%</span>

<span class="Statement">%%</span> /rev<span class="Identifier"> public</span>
<span class="Statement">    set-string</span> str=<span class="Constant">&quot;This is some string to reverse&quot;</span>
<span class="Statement">    string-length</span> str<span class="Type"> to</span> str_len
<span class="Statement">    call-handler</span> <span class="Constant">&quot;/rev/string&quot;</span><span class="Identifier"> set-param</span> str, str_beg=<span class="Constant">0</span>, str_end=str_len-<span class="Constant">1</span><span class="Identifier"> get-param</span> str<span class="Identifier"> type string</span>
<span class="Statement">    print-out</span> str<span class="Identifier"> new-line</span>
<span class="Statement">%%</span>
<span class="Constant">EOF</span></pre>
<span id=rimstone_copied_258 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_258' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_258, code_258, rimstone_copied_258)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
The "/rev/string" handler takes in the string itself (which is changed, but if you don't want that make a copy of it first in "/rev" caller handler), and also the index of the first character to reverse and the index of the last one. The index starts with 0 (the first byte), and ends with the length of the string minus 1 (i.e. the same indexing scheme as in most other languages).<br/>
<br/>
The code itself is pretty self-explanatory: the first and last character are swapped, then the "/rev/string" handler is called again but this time with the substring whic starts one byte after the character we swapped, and ends one byte before the other swapping character. This is repeated until the beginning is equal or greater than the ending.<br/>
<br/>
Make the application:<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_260' class=notranslate>
rim <span class="Special">-q</span></pre>
<span id=rimstone_copied_260 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_260' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_260, code_260, rimstone_copied_260)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Test it (we will reverse the string "This is some string to reverse"):<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_261' class=notranslate>
rim <span class="Special">-r</span> <span class="Special">--req</span><span class="Statement">=</span><span class="Statement">&quot;</span><span class="Constant">/rev</span><span class="Statement">&quot;</span> <span class="Special">--exec</span> <span class="Special">--silent-header</span></pre>
<span id=rimstone_copied_261 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_261' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_261, code_261, rimstone_copied_261)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
As expected, the result is a reversion of this string:<br/>
<div class='ncode' style='position:relative;padding-right:16px;'>
<pre id='code_257' class=notranslate>
esrever ot gnirts emos si sihT</pre>
<span id=rimstone_copied_257 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_257' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_257, code_257, rimstone_copied_257)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<a id='article-regex.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:left;background-color:white;'><a href='https://rimstone-lang.com' style='border-bottom:0px'><img src='https://rimstone-lang.com/rimstone.png' style='width:180px;height:auto'/></a></div><div class='vhub' style='margin-top:10px;'>Using Regex in RimStone</div><hr/><br/>
Regex (or "REGular EXpressions") is a powerful way to search strings, as well as to replace parts of strings. It makes it easier to reliably do so, since regular expressions are usually short; at the same time there's a learning curve in becoming proficient. However, given that regex is ubiquitous, it is worth learning at least some of it, as it can come handy.<br/>
<br/>
RimStone's implementation of regex is via <a href='/match-regex.html'>match-regex</a> statement, which allows for both searching and replacing in a single statement. It also has a caching capability (meaning caching of compiled regex process), which can increase performance by up to 500%.<br/>
<br/>
This article will show a few basic ways to use match-regex statement in your RimStone code.<br/>
<br/>
Create directory for your application:<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_264' class=notranslate>
<span class="Statement">mkdir</span> <span class="Special">-p</span> regex
<span class="Statement">cd</span> regex</pre>
<span id=rimstone_copied_264 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_264' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_264, code_264, rimstone_copied_264)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Create "reg" application:<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_267' class=notranslate>
rim <span class="Special">-k</span> reg</pre>
<span id=rimstone_copied_267 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_267' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_267, code_267, rimstone_copied_267)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Create file "reg.rim" with this:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_263' class=notranslate>
cat &lt;&lt; '<span class="Constant">EOF</span>' &gt; reg.rim
<span class="Statement">%%</span> /reg<span class="Identifier"> public</span>
    <span class="Comment">// Use backreferences to swap two words, with </span><span class="Constant">&quot;Reverse order word&quot;</span><span class="Comment"> as a result</span>
<span class="Statement">    match-regex</span> <span class="Constant">&quot;(word)</span><span class="Special">\\</span><span class="Constant">s+(order)&quot;</span><span class="Identifier"> in</span> <span class="Constant">&quot;Reverse word order&quot;</span><span class="Identifier"> replace-with</span> <span class="Constant">&quot;</span><span class="Special">\\</span><span class="Constant">2 </span><span class="Special">\\</span><span class="Constant">1&quot;</span><span class="Type"> result</span> res
<span class="Statement">    print-out</span> res<span class="Identifier"> new-line</span>

    <span class="Comment">// Recognize a pattern, in this case </span><span class="Constant">3</span><span class="Comment"> found</span>
<span class="Statement">    match-regex</span> <span class="Constant">&quot;[abc]{3}&quot;</span><span class="Identifier"> in</span> <span class="Constant">&quot;Recognize 'aaa' or 'aa' or 'abc' or 'cab'&quot;</span><span class="Type"> status</span> st
<span class="Statement">    print-out</span> st<span class="Identifier"> new-line</span>

    <span class="Comment">// Recognize a pattern, in this case not found</span>
<span class="Statement">    match-regex</span> <span class="Constant">&quot;[abc]{3}&quot;</span><span class="Identifier"> in</span> <span class="Constant">&quot;Recognize 'aa' or 'aa' or 'bc' or 'ca'&quot;</span><span class="Type"> status</span> st
<span class="Statement">    print-out</span> st<span class="Identifier"> new-line</span>

    <span class="Comment">// Use case insensitive search to recognize a pattern, in this case </span><span class="Constant">3</span><span class="Comment"> found</span>
<span class="Statement">    match-regex</span> <span class="Constant">&quot;[abc]{3}&quot;</span><span class="Identifier"> in</span> <span class="Constant">&quot;Recognize 'aAa' or 'aa' or 'aBc' or 'Cab'&quot;</span><span class="Identifier"> case-insensitive</span><span class="Type"> status</span> st
<span class="Statement">    print-out</span> st<span class="Identifier"> new-line</span>

    <span class="Comment">// Use case insensitive search to recognize a pattern and replace, with </span><span class="Constant">&quot;Recognize 'XXX' or 'aa' or 'XXX' or 'XXX'&quot;</span><span class="Comment"> as a result</span>
<span class="Statement">    match-regex</span> <span class="Constant">&quot;[abc]{3}&quot;</span><span class="Identifier"> in</span> <span class="Constant">&quot;Recognize 'aAa' or 'aa' or 'aBc' or 'Cab'&quot;</span><span class="Identifier"> replace-with</span> <span class="Constant">&quot;XXX&quot;</span><span class="Type"> result</span> res<span class="Identifier"> case-insensitive</span><span class="Type"> status</span> st
<span class="Statement">    print-out</span> res<span class="Identifier"> new-line</span>
<span class="Statement">    print-out</span> st<span class="Identifier"> new-line</span>
<span class="Statement">%%</span>
<span class="Constant">EOF</span></pre>
<span id=rimstone_copied_263 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_263' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_263, code_263, rimstone_copied_263)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Build your application server as a native executable:<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_269' class=notranslate>
rim <span class="Special">-q</span></pre>
<span id=rimstone_copied_269 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_269' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_269, code_269, rimstone_copied_269)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Run it from the command line:<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_271' class=notranslate>
rim <span class="Special">-r</span> <span class="Special">--req</span><span class="Statement">=</span><span class="Statement">&quot;</span><span class="Constant">/reg</span><span class="Statement">&quot;</span> <span class="Special">--exec</span> <span class="Special">--silent-header</span></pre>
<span id=rimstone_copied_271 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_271' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_271, code_271, rimstone_copied_271)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
The result is:<br/>
<div class='ncode' style='position:relative;padding-right:16px;'>
<pre id='code_262' class=notranslate>
Reverse order word
3
0
3
Recognize &apos;XXX&apos; or &apos;aa&apos; or &apos;XXX&apos; or &apos;XXX&apos;
3</pre>
<span id=rimstone_copied_262 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_262' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_262, code_262, rimstone_copied_262)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Let's go over this one by one. <br/>
<div class="vsub"><a id="Backreferences"></a>Backreferences</div>
The first statement uses back-references, which is a way to refer to something that's found in the string:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_266' class=notranslate>
<span class="Comment">// Use backreferences to swap two words</span>
<span class="Statement">match-regex</span> <span class="Constant">&quot;(word)</span><span class="Special">\\</span><span class="Constant">s+(order)&quot;</span><span class="Identifier"> in</span> <span class="Constant">&quot;Reverse word order&quot;</span><span class="Identifier"> replace-with</span> <span class="Constant">&quot;</span><span class="Special">\\</span><span class="Constant">2 </span><span class="Special">\\</span><span class="Constant">1&quot;</span><span class="Type"> result</span> res
<span class="Statement">print-out</span> res<span class="Identifier"> new-line</span></pre>
<span id=rimstone_copied_266 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_266' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_266, code_266, rimstone_copied_266)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Here, "word" and "order" are found. Since they are in parenthesis (meaning within "()"), they can be used as back-references. The first one would be \1, the second one \2 etc. In "replace-with" clause, we refer to them as "\\1" and "\\2" just because backslash in a special character used to escape others and needs to be escaped itself. "\\s+" means find any spaces ("\\s") which repeat at least one time ("+"). So we're looking for essentially a snippet like "word order" or "word &nbsp; order", and we are then replacing that with "\\2 \\1". Keep in mind that "\\1" refers to "word" and "\\2" refers to "order". So the result will be "order word", i.e. the two words will be output in reverse order.<br/>
<div class="vsub"><a id="Finding pattern, and counting them"></a>Finding pattern, and counting them</div>
A common use of regex is to find out if a pattern is showing up in a string, and how many times. Consider this:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_268' class=notranslate>
<span class="Comment">// Recognize a pattern, found</span>
<span class="Statement">match-regex</span> <span class="Constant">&quot;[abc]{3}&quot;</span><span class="Identifier"> in</span> <span class="Constant">&quot;Recognize 'aaa' or 'aa' or 'abc' or 'cab'&quot;</span><span class="Type"> status</span> st
<span class="Statement">print-out</span> st<span class="Identifier"> new-line</span></pre>
<span id=rimstone_copied_268 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_268' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_268, code_268, rimstone_copied_268)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Here, you're looking for any of the characters "a", "b" or "c" that repeat 3 times (which is what "{3}" does). Obviously "aaa", "abc" and "cab" fit that bill, while "aa" does not, so the output is 3.<br/>
<br/>
Conversely, in this case, there are no instances of 3 characters (with each being "a", "b" or "c"), since all of them of length 2 (such as "aa", "bc" etc.), so the result will be 0:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_270' class=notranslate>
<span class="Comment">// Recognize a pattern, in this case not found</span>
<span class="Statement">match-regex</span> <span class="Constant">&quot;[abc]{3}&quot;</span><span class="Identifier"> in</span> <span class="Constant">&quot;Recognize 'aa' or 'aa' or 'bc' or 'ca'&quot;</span><span class="Type"> status</span> st
<span class="Statement">print-out</span> st<span class="Identifier"> new-line</span></pre>
<span id=rimstone_copied_270 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_270' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_270, code_270, rimstone_copied_270)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<div class="vsub"><a id="Case insensitive search"></a>Case insensitive search</div>
By default, the search is case sensitive. You can make it case insensitive with "case-insensitive" clause:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_272' class=notranslate>
<span class="Comment">// Use case insensitive search to recognize a pattern</span>
<span class="Statement">match-regex</span> <span class="Constant">&quot;[abc]{3}&quot;</span><span class="Identifier"> in</span> <span class="Constant">&quot;Recognize 'aAa' or 'aa' or 'aBc' or 'Cab'&quot;</span><span class="Identifier"> case-insensitive</span><span class="Type"> status</span> st
<span class="Statement">print-out</span> st<span class="Identifier"> new-line</span></pre>
<span id=rimstone_copied_272 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_272' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_272, code_272, rimstone_copied_272)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
In this case, there are also 3 matches ("aAa", "aBc" and "Cab").<br/>
<div class="vsub"><a id="Search and replace"></a>Search and replace</div>
In the following example, we search for a pattern and replace it with something:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_273' class=notranslate>
<span class="Comment">// Use case insensitive search to recognize a pattern and replace</span>
<span class="Statement">match-regex</span> <span class="Constant">&quot;[abc]{3}&quot;</span><span class="Identifier"> in</span> <span class="Constant">&quot;Recognize 'aAa' or 'aa' or 'aBc' or 'Cab'&quot;</span><span class="Identifier"> replace-with</span> <span class="Constant">&quot;XXX&quot;</span><span class="Type"> result</span> res<span class="Identifier"> case-insensitive</span><span class="Type"> status</span> st
<span class="Statement">print-out</span> res<span class="Identifier"> new-line</span>
<span class="Statement">print-out</span> st<span class="Identifier"> new-line</span></pre>
<span id=rimstone_copied_273 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_273' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_273, code_273, rimstone_copied_273)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Just like in previous example, 3 patterns will be recognized and replaced with "XXX" and with 3 matches as the status, the result is:<br/>
<div class='ncode' style='position:relative;padding-right:16px;'>
<pre id='code_265' class=notranslate>
Recognize &apos;XXX&apos; or &apos;aa&apos; or &apos;XXX&apos; or &apos;XXX&apos;
3</pre>
<span id=rimstone_copied_265 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_265' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_265, code_265, rimstone_copied_265)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<div class="vsub"><a id="Lookahead and lookbehind"></a>Lookahead and lookbehind</div>
Some times you'd like to search for a pattern, but only if there's another pattern before it ("lookbehind") or after it ("lookahead").<br/>
<a id='article-remote-call.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:left;background-color:white;'><a href='https://rimstone-lang.com' style='border-bottom:0px'><img src='https://rimstone-lang.com/rimstone.png' style='width:180px;height:auto'/></a></div><div class='vhub' style='margin-top:10px;'>Call web service from web service: stacking them up</div><hr/><br/>
A web service doesn't necessarily need to be called from "the web", meaning from the web browser or via API across the web. It can be called from another web service that's on a local network.<br/>
<br/>
Typically, when called from the web, HTTPS protocol is used to ensure safety of that call. However, local networks are usually secure, meaning no one else has access to it but your own web services.<br/>
<br/>
Thus, communication between local web services will be much faster if it doesn't use a secure protocol as it incurs the performance cost. Simple, fast and unburdened protocols, such as FastCGI, may be better.<br/>
<br/>
FastCGI is interesting because it actually carries the same information as HTTP, so a web service can operate normally, using GET/POST/etc. request methods, passing parameters in URL, request body, environment variables etc. But at the same time, FastCGI is a fast binary protocol that doesn't incur cost of safety - and for local web-service to web-service communication, that's a good thing.<br/>
<br/>
Just like HTTP, FastCGI can separate standard output from standard error, allowing both streams to be intermixed, but retrieved separately.<br/>
<br/>
Overall, inter-web-service communication can be implemented with the aforementioned protocols in a way that preserves high-level HTTP functionality innate to web services, but with overall better performance.<br/>
<a id='article-request-function.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:left;background-color:white;'><a href='https://rimstone-lang.com' style='border-bottom:0px'><img src='https://rimstone-lang.com/rimstone.png' style='width:180px;height:auto'/></a></div><div class='vhub' style='margin-top:10px;'>Functions and parameters in RimStone</div><hr/><br/>
In RimStone, there are no "functions" or "methods" as you may be used to in other languages. Any encapsulation is a request handler - you can think of it as a simple function that executes to handle a request - it can an external request (i.e. from an outside caller such as web browser, web API, or from a command-line), or internal requests from another handler in your application. <br/>
<br/>
By the same token, there are no formal parameters in a way that you may be used to. Instead, there are named parameters, basically name/value pairs, which you can set or get anywhere during the request execution. In addition, your request handler can handle the request body, environment variables, the specific request method etc. (see <a href='/request.html'>request</a>). Here though, we'll focus on parameters only.<br/>
<br/>
You'll use <a href='/set-param.html'>set-param</a> to set a parameter, which can then be obtained anywhere in the current request, including in the current handler's caller or callee. Use <a href='/get-param.html'>get-param</a> to obtain a parameter that's set with set-param. <br/>
<br/>
Parameters are very fast - they are static creatures implemented at compile time, meaning only fixed memory locations are used to store them (making for great CPU caching), and any name-based resolution is used only when necessary, and always with fast hash tables and static caching. <br/>
<div class="vsub"><a id="Calling one handler from another"></a>Calling one handler from another</div>
In this article, we'll talk about <a href='/call-handler.html'>call-handler</a> which is used to call a handler from within another handler.<br/>
<br/>
Here you'll see a few examples of passing input and output parameters between requests handlers. These handlers are both running in the same process of an application (note that application can run as many processes working in parallel). To begin, create an application:<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_276' class=notranslate>
<span class="Statement">mkdir</span> param
<span class="Statement">cd</span> param
rim <span class="Special">-k</span> param</pre>
<span id=rimstone_copied_276 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_276' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_276, code_276, rimstone_copied_276)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
You'll also create two source files ("local.rim" and "some.rim") a bit later with the code below.<br/>
<div class="vsub"><a id="Simple service"></a>Simple service</div>
Let's start with a simple service that provides current time based on a timezone as an input parameter (in file "local.rim"):<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_275' class=notranslate>
cat &lt;&lt; '<span class="Constant">EOF</span>' &gt; local.rim
<span class="Statement">begin-handler</span> /local/time
<span class="Statement">    get-param</span> tzone<span class="Identifier"> default-value</span> <span class="Constant">&quot;MST&quot;</span> <span class="Comment">// get time zone as input parameter (i.e. </span><span class="Constant">&quot;EST&quot;</span><span class="Comment">, </span><span class="Constant">&quot;MST&quot;</span><span class="Comment">, </span><span class="Constant">&quot;PST&quot;</span><span class="Comment"> etc.)</span>
<span class="Statement">    get-time</span><span class="Type"> to</span> curr_time<span class="Identifier"> timezone</span> tzone
<span class="Statement">    @</span>&lt;div&gt;Current time is <span class="Statement">&lt;&lt;print-out</span> curr_time<span class="Statement">&gt;&gt;</span>&lt;/div&gt;
<span class="Statement">end-handler</span>
<span class="Constant">EOF</span></pre>
<span id=rimstone_copied_275 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_275' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_275, code_275, rimstone_copied_275)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
In this case, HTML code is output. Make the application:<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_279' class=notranslate>
rim <span class="Special">-q</span> <span class="Special">--public</span></pre>
<span id=rimstone_copied_279 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_279' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_279, code_279, rimstone_copied_279)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
and run it from command line (just as if it were called from a web browser):<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_281' class=notranslate>
rim <span class="Special">-r</span> <span class="Special">--req</span><span class="Statement">=</span><span class="Statement">&quot;</span><span class="Constant">/local/time</span><span class="Statement">&quot;</span> <span class="Special">--silent-header</span> <span class="Special">--exec</span></pre>
<span id=rimstone_copied_281 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_281' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_281, code_281, rimstone_copied_281)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
with the result something like:<br/>
<div class='ncode' style='position:relative;padding-right:16px;'>
<pre id='code_274' class=notranslate>
&lt;div&gt;Current time is Mon, 02 Dec 2024 16:27:03 EST&lt;/div&gt;</pre>
<span id=rimstone_copied_274 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_274' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_274, code_274, rimstone_copied_274)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<div class="vsub"><a id="Calling request from another, example #1"></a>Calling request from another, example #1</div>
In this example, one request handler calls another from within the same process of an application using <a href='/call-handler.html'>call-handler</a>.<br/>
<br/>
For instance, here's the caller code which calls the above "/local/time" service (in file "some.rim"):<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_278' class=notranslate>
cat &lt;&lt; '<span class="Constant">EOF</span>' &gt; some.rim
<span class="Statement">begin-handler</span> /some/service
<span class="Statement">    call-handler</span> <span class="Constant">&quot;/local/time&quot;</span><span class="Identifier"> set-param</span> tzone=<span class="Constant">&quot;EST&quot;</span>
<span class="Statement">end-handler</span>
<span class="Constant">EOF</span></pre>
<span id=rimstone_copied_278 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_278' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_278, code_278, rimstone_copied_278)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
and in this case the output of the "/local/time" would simply become output of "/some/service" (and be presumably sent to a client like web browser). <br/>
<br/>
You can also, however, return the string to the caller using <a href='/set-param.html'>set-param</a> - here's the reworked "/local/time" service (in file "local.rim"):<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_280' class=notranslate>
cat &lt;&lt; '<span class="Constant">EOF</span>' &gt; local.rim
<span class="Statement">begin-handler</span> /local/time
<span class="Statement">    get-param</span> tzone<span class="Identifier"> default-value</span> <span class="Constant">&quot;MST&quot;</span>
<span class="Statement">    get-time</span><span class="Type"> to</span> curr_time<span class="Identifier"> timezone</span> tzone
<span class="Statement">    set-param</span> curr_time <span class="Comment">// set the return parameter to be obtained by the caller</span>
<span class="Statement">end-handler</span>
<span class="Constant">EOF</span></pre>
<span id=rimstone_copied_280 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_280' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_280, code_280, rimstone_copied_280)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
The result parameter will be obtained in the caller, and then output as HTML from there (we could save it to a file instead, or whatever), so here's what it'd be now in file "some.rim":<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_282' class=notranslate>
cat &lt;&lt; '<span class="Constant">EOF</span>' &gt; some.rim
<span class="Statement">begin-handler</span> /some/service
<span class="Statement">    call-handler</span> <span class="Constant">&quot;/local/time&quot;</span><span class="Identifier"> set-param</span> tzone=<span class="Constant">&quot;EST&quot;</span><span class="Identifier"> get-param</span> curr_time
<span class="Statement">    @</span>&lt;div&gt;Current time is <span class="Statement">&lt;&lt;print-out</span> curr_time<span class="Statement">&gt;&gt;</span>&lt;/div&gt;
<span class="Statement">end-handler</span>
<span class="Constant">EOF</span></pre>
<span id=rimstone_copied_282 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_282' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_282, code_282, rimstone_copied_282)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Make the project and run it:<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_283' class=notranslate>
rim <span class="Special">-q</span> <span class="Special">--public</span>
rim <span class="Special">-r</span> <span class="Special">--req</span><span class="Statement">=</span><span class="Statement">&quot;</span><span class="Constant">/some/service</span><span class="Statement">&quot;</span> <span class="Special">--silent-header</span> <span class="Special">--exec</span></pre>
<span id=rimstone_copied_283 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_283' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_283, code_283, rimstone_copied_283)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
with the similar end result.<br/>
<div class="vsub"><a id="Calling request from another, example #2"></a>Calling request from another, example #2</div>
Consider this handler, which checks if number is even, and returns true or false (file "check.rim"):<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_284' class=notranslate>
cat &lt;&lt; '<span class="Constant">EOF</span>' &gt; check.rim
<span class="Statement">begin-handler</span> /check/even
<span class="Statement">    get-param</span> n<span class="Identifier"> type number</span> <span class="Comment">// get input parameter</span>
<span class="Statement">    if-true</span> n<span class="Identifier"> every</span> <span class="Constant">2</span>
<span class="Statement">        set-param</span> is_even = <span class="Constant">true</span> <span class="Comment">// set output parameter</span>
<span class="Statement">    else-if</span>
<span class="Statement">        set-param</span> is_even = <span class="Constant">false</span> <span class="Comment">// set output parameter</span>
<span class="Statement">    end-if</span>
<span class="Statement">end-handler</span>
<span class="Constant">EOF</span></pre>
<span id=rimstone_copied_284 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_284' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_284, code_284, rimstone_copied_284)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Here's calling it from another handler (add this to file "some.rim"): <br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_286' class=notranslate>
cat &lt;&lt; '<span class="Constant">EOF</span>' &gt; some.rim
<span class="Statement">begin-handler</span> /some/task
<span class="Statement">    call-handler</span> <span class="Constant">&quot;/check/even&quot;</span><span class="Identifier"> set-param</span> n = <span class="Constant">23</span><span class="Identifier"> get-param</span> is_even<span class="Identifier"> type bool</span>
<span class="Statement">    if-true</span> is_even<span class="Identifier"> equal</span> <span class="Constant">true</span>
<span class="Statement">        @</span>EVEN
<span class="Statement">    else-if</span>
<span class="Statement">        @</span>ODD
<span class="Statement">    end-if</span>
<span class="Statement">end-handler</span>
<span class="Constant">EOF</span></pre>
<span id=rimstone_copied_286 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_286' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_286, code_286, rimstone_copied_286)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Make the project and run it:<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_285' class=notranslate>
rim <span class="Special">-q</span> <span class="Special">--public</span>
rim <span class="Special">-r</span> <span class="Special">--req</span><span class="Statement">=</span><span class="Statement">&quot;</span><span class="Constant">/some/task</span><span class="Statement">&quot;</span> <span class="Special">--silent-header</span> <span class="Special">--exec</span></pre>
<span id=rimstone_copied_285 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_285' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_285, code_285, rimstone_copied_285)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
with the result (since 23 is an odd number):<br/>
<div class='ncode' style='position:relative;padding-right:16px;'>
<pre id='code_277' class=notranslate>
ODD</pre>
<span id=rimstone_copied_277 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_277' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_277, code_277, rimstone_copied_277)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<div class="vsub"><a id="Conclusion"></a>Conclusion</div>
RimStone is a language and a platform built to provide native web services, and everything in it is centered around the notion of handling service calls. Simple name/value constructs rule the communication between handlers on the network as well as locally. Suffice it to say, RimStone's not a classic C-like programming language (though ironically is built in C and compiles to C).<br/>
<a id='article-security.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:left;background-color:white;'><a href='https://rimstone-lang.com' style='border-bottom:0px'><img src='https://rimstone-lang.com/rimstone.png' style='width:180px;height:auto'/></a></div><div class='vhub' style='margin-top:10px;'>Security of web services</div><hr/><br/>
The security of web services is a broad subject, but there are a few common topics that one should be well aware. They affect if your web application, or an API service, will be a success or not.<br/>
<br/>
Many web services provide an interface to a database. SQL injection is a very old, but nonetheless important issue. A naive implementation of SQL execution inside your code could open the door for a malicious actor to drop your tables, insert/update/delete records etc. Be sure that your back-end software is SQL injection proof.<br/>
<br/>
No matter how careful you are about writing your web service code, memory safety is an important feature to have. It avoids exploitations such as buffer overwrites or underwrites, which can cause unexpected behavior. In addition, proper memory leak detection and prevention is important, especially because back-end services typically run as long-running processes, often times weeks and months without down-time. A leak could crash such a process simply because it would run out of memory, or could no longer open a new file.<br/>
<br/>
A common issue is one of the security design. Some services are internal (or private), and some are external (or public). The external ones can be called by an end-user from a web browser, or via an API from an outside caller. In fact, calling such service could be huge security hole. Imagine if you had a service that updates your internal application data. Such a service clearly must never be external, rather it should only be accessible to your own services acting on behalf of outside actors. Be sure that the back-end software you use has simple and clearly-defined ability to handle such scenarios. Even if so, sometimes overly complicated security schemes can be hard to implement correctly and can be just as detrimental.<br/>
<br/>
Virtually all web services authenticate their users. It usually means using email address and password for login, as well as cookies for browser users, or tokens otherwise. Never keep passwords in plain text or even obscured, only as a one-way hash. This way even if your user database is stolen, passwords cannot be (easily) recovered. <br/>
<a id='article-sendmail.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:left;background-color:white;'><a href='https://rimstone-lang.com' style='border-bottom:0px'><img src='https://rimstone-lang.com/rimstone.png' style='width:180px;height:auto'/></a></div><div class='vhub' style='margin-top:10px;'>How to send email with RimStone</div><hr/><br/>
This example shows how to send email with RimStone. The web service you'll create here is very simple and it will display an HTML form to collect info needed to send email, such as "From" and "To" (the sender and the recipient emails), the Subject and of course the Message itself. Once user clicks Submit, email is sent. <br/>
<br/>
Create directory for your application:<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_289' class=notranslate>
<span class="Statement">mkdir</span> <span class="Special">-p</span> mail
<span class="Statement">cd</span> mail</pre>
<span id=rimstone_copied_289 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_289' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_289, code_289, rimstone_copied_289)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Create "mail-sender" application:<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_291' class=notranslate>
rim <span class="Special">-k</span> mail-sender</pre>
<span id=rimstone_copied_291 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_291' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_291, code_291, rimstone_copied_291)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Here's the code save to file "mail.rim":<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_288' class=notranslate>
cat &lt;&lt; '<span class="Constant">EOF</span>' &gt; mail.rim
<span class="Statement">begin-handler</span> /mail<span class="Identifier"> public</span>
    <span class="Comment">// Get URL parameter</span>
<span class="Statement">    get-param</span> action

<span class="Statement">    if-true</span> action<span class="Identifier"> equal</span> <span class="Constant">&quot;show_form&quot;</span>
        <span class="Comment">// Display HTML form</span>
<span class="Statement">        @</span>&lt;h2&gt;Enter email and click Send to send it&lt;/h2&gt;
<span class="Statement">        @</span>Note: 'From' field must be the email address from the domain of your server.&lt;br/&gt;&lt;br/&gt;
<span class="Statement">        @</span>&lt;form action=&quot;<span class="Statement">&lt;&lt;print-path</span> <span class="Constant">&quot;/mail&quot;</span><span class="Statement">&gt;&gt;</span>&quot; method=&quot;POST&quot;&gt;
<span class="Statement">        @</span>    &lt;input type=&quot;hidden&quot; name=&quot;action&quot; value=&quot;submit_form&quot;&gt;
<span class="Statement">        @</span>    &lt;label for=&quot;from_mail&quot;&gt;From:&lt;/label&gt;&lt;br&gt;
<span class="Statement">        @</span>    &lt;input type=&quot;text&quot; name=&quot;from_mail&quot; value=&quot;&quot;&gt;&lt;br&gt;
<span class="Statement">        @</span>    &lt;label for=&quot;to_mail&quot;&gt;To:&lt;/label&gt;&lt;br&gt;
<span class="Statement">        @</span>    &lt;input type=&quot;text&quot; name=&quot;to_mail&quot; value=&quot;&quot;&gt;&lt;br&gt;&lt;br&gt;
<span class="Statement">        @</span>    &lt;label for=&quot;subject_mail&quot;&gt;Subject:&lt;/label&gt;&lt;br&gt;
<span class="Statement">        @</span>    &lt;input type=&quot;text&quot; name=&quot;subject_mail&quot; value=&quot;&quot;&gt;&lt;br&gt;&lt;br&gt;
<span class="Statement">        @</span>    &lt;label for=&quot;message&quot;&gt;Message:&lt;/label&gt;&lt;br&gt;
<span class="Statement">        @</span>    &lt;textarea name=&quot;message&quot; rows=&quot;<span class="Constant">3</span>&quot; columns=&quot;<span class="Constant">50</span>&quot;&gt;&lt;/textarea&gt;
<span class="Statement">        @</span>    &lt;br/&gt;&lt;br/&gt;
<span class="Statement">        @</span>    &lt;input type=&quot;submit&quot; value=&quot;Send&quot;&gt;
<span class="Statement">        @</span>&lt;/form&gt;
<span class="Statement">    else-if</span> action<span class="Identifier"> equal</span> <span class="Constant">&quot;submit_form&quot;</span>
        <span class="Comment">// Get data from HTML form</span>
<span class="Statement">        get-param</span> from_mail
<span class="Statement">        get-param</span> to_mail
<span class="Statement">        get-param</span><span class="Identifier"> message</span>
<span class="Statement">        get-param</span> subject_mail
        <span class="Comment">// Construct email message</span>
<span class="Statement">        write-string</span> msg
<span class="Statement">            @</span>From: <span class="Statement">&lt;&lt;print-out</span> from_mail<span class="Statement">&gt;&gt;</span>
<span class="Statement">            @</span>To: <span class="Statement">&lt;&lt;print-out</span> to_mail<span class="Statement">&gt;&gt;</span>
<span class="Statement">            @</span>Subject: <span class="Statement">&lt;&lt;print-out</span> subject_mail<span class="Statement">&gt;&gt;</span>
<span class="Statement">            @</span>
            &lt;&lt;print-out message&gt;&gt;
<span class="Statement">        end-write-string</span>
        <span class="Comment">// Send email</span>
<span class="Statement">        exec-program</span> <span class="Constant">&quot;/usr/sbin/sendmail&quot;</span><span class="Identifier"> args</span> <span class="Constant">&quot;-i&quot;</span>, <span class="Constant">&quot;-t&quot;</span><span class="Identifier"> input</span> msg<span class="Type"> status</span> st
        <span class="Comment">// Check status of email sending</span>
<span class="Statement">        if-true</span> st<span class="Identifier"> not-equal</span> RIM_OKAY
<span class="Statement">            @</span>Could not send email!
<span class="Statement">        else-if</span>
<span class="Statement">            @</span>Email sent!
<span class="Statement">        end-if</span>
<span class="Statement">        @</span>&lt;hr/&gt;
<span class="Statement">    else-if</span>
<span class="Statement">        @</span>Unrecognized action!&lt;hr/&gt;
<span class="Statement">    end-if</span>
<span class="Statement">end-handler</span>
<span class="Constant">EOF</span></pre>
<span id=rimstone_copied_288 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_288' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_288, code_288, rimstone_copied_288)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
The example uses <a href='/exec-program.html'>exec-program</a> to invoke a MTA (Mail Transfer Agent), in this case postfix or sendmail, but you can use any other that you like!<br/>
<br/>
Build your application server as a native executable:<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_292' class=notranslate>
rim <span class="Special">-q</span></pre>
<span id=rimstone_copied_292 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_292' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_292, code_292, rimstone_copied_292)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Run the application server using RimStone's application server manager, called <a href='/mrim.html'>mrim</a>:<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_293' class=notranslate>
mrim mail-sender</pre>
<span id=rimstone_copied_293 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_293' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_293, code_293, rimstone_copied_293)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
You may or may not have MTA (Mail Transfer Agent) installed on your system. Install it anyway, for Ubuntu and Debian:<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_294' class=notranslate>
sudo apt install postfix
sudo systemctl start postfix</pre>
<span id=rimstone_copied_294 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_294' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_294, code_294, rimstone_copied_294)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
and on RedHat and Fedora systems:<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_295' class=notranslate>
sudo dnf install postfix
sudo systemctl start postfix</pre>
<span id=rimstone_copied_295 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_295' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_295, code_295, rimstone_copied_295)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Now, since this application server will be accessed via web server, we'll need to setup a web server (aka "reverse proxy"). We'll use Apache, so follow the instructions to <a href='/connect-apache-unix-socket.html'>set up Apache</a>, with &lt;app path&gt; being your application name, which is "mail-sender", and the "ProxyPass" directive in Step 3 will be (replace "your-user" with the name of your OS user):<br/>
<div class='ncode' style='position:relative;padding-right:16px;'>
<pre id='code_287' class=notranslate>
ProxyPass &quot;/mail-sender/&quot; unix:///home/your-user/.rimstone/apps/mail-sender/sock/.sock|fcgi://localhost/mail-sender</pre>
<span id=rimstone_copied_287 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_287' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_287, code_287, rimstone_copied_287)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Once you've restarted Apache web server, go to your browser and try it. In this case, everything is happening locally on your computer. If your server were running on the Internet, then you would use that server's name instead of "127.0.0.1", and email would be with an actual provider instead of a local user name. To get the form that sends email:<br/>
<div class='ncode' style='position:relative;padding-right:16px;'>
<pre id='code_290' class=notranslate>
http://127.0.0.1/mail-sender/mail/action=show_form</pre>
<span id=rimstone_copied_290 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_290' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_290, code_290, rimstone_copied_290)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
In this case local user name we're sending email to is "bear", but you'd put your own user name:<br/>
<br/><div class='vimg'><img class='imgs' src='send-mail.png' alt='RimStone'></img>
</div><br/>
And once you click Submit:<br/>
<br/><div class='vimg'><img class='imgs' src='send-mail-sent.png' alt='RimStone'></img>
</div><br/>
<a id='article-server.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:left;background-color:white;'><a href='https://rimstone-lang.com' style='border-bottom:0px'><img src='https://rimstone-lang.com/rimstone.png' style='width:180px;height:auto'/></a></div><div class='vhub' style='margin-top:10px;'>What is an application server</div><hr/><br/>
Every RimStone application is built as both an application server and a command-line program. You can use both, depending on what's the nature of your application. Some programs are meant to be used in scripts, or executed directly from command line. Others need to stay in memory and execute user requests as servers. The nice thing is that they both work the same, meaning you can run from command line anything that an application server does, and vice versa. This is also handy for testing; it makes writing tests for an application server much easier because you can run such tests in a plain bash script.<br/>
<br/>
What is an application server? It is a set of background resident processes. Each such process can be contacted via socket with a request, and it will provide a reply. An application server often sits behind a web server which accepts user requests, passes them to the application server, receives its reply and the passes this reply back to the user. This is a "reverse proxy" configuration. Note that this configuration, though typical, isn't a hard rule; end users can talk to an application server directly in some cases, such as on a secure local network.<br/>
<br/>
A socket is always opened by an application server and it's listening for user requests. In fact, each application server process listens on the same socket, and an incoming user request will be automatically routed by the Operating System to the first available server process. This reduces contention and makes the serving of processes very fast, without unnecessary delays.<br/>
<br/>
The socket used can be a Unix or TCP socket. Unix socket is the default one, and it works locally, meaning the caller and the application server must be on the same physical server. This is the most common scenario, and it's also the fastest method of delivering requests and replies. TCP sockets are used when the caller and the application server are on two separate machines - their performance depends on the bandwidth and especially the latency of network connection. A Unix socket is a kind of a special kernel file, while TCP socket is the the same kind of socket most network/internet programs use.<br/>
<br/>
RimStone application server uses FastCGI protocol over TCP, a fast binary multiplexing protocol built for performance. It doesn't have any built-in security, and for the purpose it's used for it shouldn't have any. Essentially, standard input, output and error streams can be sent simultaneously (but retrieved separately). This makes for sturdier and more streamlined architecture because these are standard streams any program will understand. This protocol is widely supported by web languages and web servers (PHP, Apache, Nginx, HAProxy etc.).<br/>
<br/>
A RimStone server process can serve an unlimited number of requests without having to be restarted and without having to spawn any new processes or threads - meaning lightening fast. Any number of such processes comprises the application server, which can then serve incoming requests truly in parallel. The number of server processes is typically determined by the number of available CPUs.<br/>
<a id='article-shopping.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:left;background-color:white;'><a href='https://rimstone-lang.com' style='border-bottom:0px'><img src='https://rimstone-lang.com/rimstone.png' style='width:180px;height:auto'/></a></div><div class='vhub' style='margin-top:10px;'>How to build a Web Service API</div><hr/><br/>
This article will show a simple shopping web API with basic functions, such as adding customers, items and orders, as well as updating and deleting them. It's easy to write and easy to understand with RimStone; that's the reason code doesn't have much in a way of comments - there's no need.<br/>
<br/>
The API returns a valid JSON reply, even if it's just a single string (such as created ID for a customer, item or order). Listing an order returns a JSON document showing the order details. <br/>
<br/>
If you'd like to be as RESTful as possible, you can use POST, PUT, GET or DELETE request methods. We'll cover that in another post.<br/>
<br/>
The example is an open web service, i.e. it doesn't check for any permissions. You can add that separately (see <a href='/article-notes-postgres.html'>article-notes-postgres</a>).<br/>
<br/>
This example will use PostgreSQL database, but you can use other databases too.<br/>
<div class="vsub"><a id="Keep this project in its own directory"></a>Keep this project in its own directory</div>
We'll create a new directory ("shop") to keep everything tidy. You can call this directory whatever you want. Then we'll create a new RimStone application ("shopping"):<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_305' class=notranslate>
<span class="Statement">mkdir</span> shop
<span class="Statement">cd</span> shop
rim <span class="Special">-k</span> shopping</pre>
<span id=rimstone_copied_305 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_305' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_305, code_305, rimstone_copied_305)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<div class="vsub"><a id="Setup the database"></a>Setup the database</div>
Create the database "db_shopping":<br/>
<div class='sqlcode' style='position:relative;padding-right:16px;'>
<pre id='code_306' class=notranslate>
echo <span class="Special">&quot;</span><span class="Constant">create user $(whoami);</span>
<span class="Constant">create database db_shopping with owner=$(whoami);</span>
<span class="Constant">grant all on database db_shopping to $(whoami);</span>
<span class="Constant">\q</span><span class="Special">&quot;</span>  | sudo -u postgres psql</pre>
<span id=rimstone_copied_306 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_306' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_306, code_306, rimstone_copied_306)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Create the "customers", "items", "orders" and "orderItems" tables we'll use:<br/>
<div class='sqlcode' style='position:relative;padding-right:16px;'>
<pre id='code_310' class=notranslate>
echo <span class="Special">&quot;</span><span class="Constant">drop table if exists customers; create table if not exists customers (firstName varchar(30), lastName varchar(30), customerID bigserial primary key);</span>
<span class="Constant">drop table if exists items; create table if not exists items (name varchar(30), description varchar(200), itemID bigserial primary key);</span>
<span class="Constant">drop table if exists orders; create table if not exists orders (customerID bigint, orderID bigserial primary key);</span>
<span class="Constant">drop table if exists orderItems; create table if not exists orderItems (orderID bigint, itemID bigint, quantity bigint);</span><span class="Special">&quot;</span> | psql -d db_shopping</pre>
<span id=rimstone_copied_310 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_310' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_310, code_310, rimstone_copied_310)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<div class="vsub"><a id="Tell RimStone about your database"></a>Tell RimStone about your database</div>
First thing to do is to let RimStone know what database it should use:<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_309' class=notranslate>
<span class="Statement">echo</span><span class="Constant"> </span><span class="Statement">&quot;</span><span class="Constant">user=</span><span class="PreProc">$(</span><span class="Special">whoami</span><span class="PreProc">)</span><span class="Constant"> dbname=db_shopping</span><span class="Statement">&quot;</span><span class="Constant"> </span><span class="Statement">&gt;</span> db</pre>
<span id=rimstone_copied_309 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_309' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_309, code_309, rimstone_copied_309)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
This tells RimStone that a database "db" is setup (with database user being the same as your Operating System user, and the database name being "db_shopping"). RimStone makes this easy by letting you use a given database's native format for client configuration, which you're likely to be familiar with. So if you used MariaDB or SQLite for instance, you would have used their native client configuration files. <br/>
<div class="vsub"><a id="Source code for web service"></a>Source code for web service</div>
Here are the source code files.<br/>
<br/>
<span style="font-weight:bold;">- Add a new customer</span><br/>
<br/>
Create file "add-customer.rim":<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_304' class=notranslate>
cat &lt;&lt; '<span class="Constant">EOF</span>' &gt; add-customer.rim
<span class="Statement">begin-handler</span> /add-customer
<span class="Statement">    out-header</span><span class="Identifier"> use content-type</span> <span class="Constant">&quot;application/json&quot;</span>
<span class="Statement">    get-param</span> first_name
<span class="Statement">    get-param</span> last_name
    <span class="Comment">// Add a customer SQL</span>
<span class="Statement">    run-query</span> @db =<span class="Constant">&quot;insert into customers (firstName, lastName) </span><span class="Special">\</span>
<span class="Constant">            values ('</span><span class="Special">%s</span><span class="Constant">', '</span><span class="Special">%s</span><span class="Constant">') returning customerID&quot;</span><span class="Type"> output</span> customerID<span class="Identifier"> :</span> \
            first_name, last_name
<span class="Statement">        @</span>&quot;<span class="Statement">&lt;&lt;print-out</span> customerID<span class="Statement">&gt;&gt;</span>&quot;
<span class="Statement">    end-query</span>
<span class="Statement">end-handler</span>
<span class="Constant">EOF</span></pre>
<span id=rimstone_copied_304 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_304' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_304, code_304, rimstone_copied_304)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<span style="font-weight:bold;">- Add new item for sale</span><br/>
<br/>
Create file "add-item.rim":<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_308' class=notranslate>
cat &lt;&lt; '<span class="Constant">EOF</span>' &gt; add-item.rim
<span class="Statement">begin-handler</span> /add-item
<span class="Statement">    out-header</span><span class="Identifier"> use content-type</span> <span class="Constant">&quot;application/json&quot;</span>
<span class="Statement">    get-param</span> name
<span class="Statement">    get-param</span> description
    <span class="Comment">// Add an item to inventory SQL</span>
<span class="Statement">    run-query</span> @db =<span class="Constant">&quot;insert into items (name, description) </span><span class="Special">\</span>
<span class="Constant">        values ('</span><span class="Special">%s</span><span class="Constant">', '</span><span class="Special">%s</span><span class="Constant">') returning itemID&quot;</span><span class="Type"> output</span> item_id<span class="Identifier"> :</span> name, description
<span class="Statement">        @</span>&quot;<span class="Statement">&lt;&lt;print-out</span> item_id<span class="Statement">&gt;&gt;</span>&quot;
<span class="Statement">    end-query</span>
<span class="Statement">end-handler</span>
<span class="Constant">EOF</span></pre>
<span id=rimstone_copied_308 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_308' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_308, code_308, rimstone_copied_308)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<span style="font-weight:bold;">- Add an item to an order</span><br/>
<br/>
Create file "add-to-order.rim":<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_312' class=notranslate>
cat &lt;&lt; '<span class="Constant">EOF</span>' &gt; add-to-order.rim
<span class="Statement">begin-handler</span> /add-to-order
<span class="Statement">    out-header</span><span class="Identifier"> use content-type</span> <span class="Constant">&quot;application/json&quot;</span>
<span class="Statement">    get-param</span> order_id
<span class="Statement">    get-param</span> item_id
<span class="Statement">    get-param</span> quantity
    <span class="Comment">// SQL to add an item to an order</span>
<span class="Statement">    run-query</span> @db =<span class="Constant">&quot;insert into orderItems (orderId, itemID, quantity) values  ('</span><span class="Special">%s</span><span class="Constant">', '</span><span class="Special">%s</span><span class="Constant">', '</span><span class="Special">%s</span><span class="Constant">')&quot;</span> \
       <span class="Identifier"> :</span> order_id, item_id, quantity<span class="Identifier"> no-loop</span><span class="Type"> affected-rows</span> arows
<span class="Statement">    @</span>&quot;<span class="Statement">&lt;&lt;print-out</span> arows<span class="Statement">&gt;&gt;</span>&quot;
<span class="Statement">end-handler</span>
<span class="Constant">EOF</span></pre>
<span id=rimstone_copied_312 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_312' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_312, code_312, rimstone_copied_312)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<span style="font-weight:bold;">- Create a new order</span><br/>
<br/>
Create file "create-order.rim":<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_315' class=notranslate>
cat &lt;&lt; '<span class="Constant">EOF</span>' &gt; create-order.rim
<span class="Statement">begin-handler</span> /create-order
<span class="Statement">    out-header</span><span class="Identifier"> use content-type</span> <span class="Constant">&quot;application/json&quot;</span>
<span class="Statement">    get-param</span> customer_id
    <span class="Comment">// SQL to create an order</span>
<span class="Statement">    run-query</span> @db =<span class="Constant">&quot;insert into orders (customerId) </span><span class="Special">\</span>
<span class="Constant">        values ('</span><span class="Special">%s</span><span class="Constant">') returning orderID&quot;</span><span class="Type"> output</span> order_id<span class="Identifier"> :</span> customer_id
<span class="Statement">        @</span>&quot;<span class="Statement">&lt;&lt;print-out</span> order_id<span class="Statement">&gt;&gt;</span>&quot;
<span class="Statement">    end-query</span>
<span class="Statement">end-handler</span>
<span class="Constant">EOF</span></pre>
<span id=rimstone_copied_315 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_315' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_315, code_315, rimstone_copied_315)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<span style="font-weight:bold;">- Delete an order</span><br/>
<br/>
Create file "delete-order.rim":<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_318' class=notranslate>
cat &lt;&lt; '<span class="Constant">EOF</span>' &gt; delete-order.rim
<span class="Statement">begin-handler</span> /delete-order
<span class="Statement">    out-header</span><span class="Identifier"> use content-type</span> <span class="Constant">&quot;application/json&quot;</span>
<span class="Statement">    get-param</span> order_id
<span class="Statement">    begin-transaction</span>
<span class="Statement">    run-query</span> @db =<span class="Constant">&quot;delete from orders where orderID='</span><span class="Special">%s</span><span class="Constant">'&quot;</span><span class="Identifier"> :</span> order_id \
       <span class="Identifier"> no-loop</span><span class="Type"> affected-rows</span> order_rows
<span class="Statement">    run-query</span> @db =<span class="Constant">&quot;delete from orderItems where orderID='</span><span class="Special">%s</span><span class="Constant">'&quot;</span><span class="Identifier"> :</span> order_id \
       <span class="Identifier"> no-loop</span><span class="Type"> affected-rows</span> item_rows
<span class="Statement">    commit-transaction</span>
<span class="Statement">    @</span>{ &quot;orders&quot;:&quot;<span class="Statement">&lt;&lt;print-out</span> order_rows<span class="Statement">&gt;&gt;</span>&quot;, &quot;items&quot;:&quot;<span class="Statement">&lt;&lt;print-out</span> item_rows<span class="Statement">&gt;&gt;</span>&quot; }
<span class="Statement">end-handler</span>
<span class="Constant">EOF</span></pre>
<span id=rimstone_copied_318 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_318' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_318, code_318, rimstone_copied_318)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<span style="font-weight:bold;">- Make a JSON document describing an order</span><br/>
<br/>
Create file "json-from-order.rim":<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_321' class=notranslate>
cat &lt;&lt; '<span class="Constant">EOF</span>' &gt; json-from-order.rim
<span class="Statement">begin-handler</span> /json_from_order
<span class="Statement">    get-param</span> order_id<span class="Identifier"> type string</span>
<span class="Statement">    get-param</span> curr_order<span class="Identifier"> type number</span>
<span class="Statement">    get-param</span> order_count<span class="Identifier"> type number</span>
<span class="Statement">    get-param</span> customer_id<span class="Identifier"> type string</span>
<span class="Statement">    get-param</span> first_name<span class="Identifier"> type string</span>
<span class="Statement">    get-param</span> last_name<span class="Identifier"> type string</span>
<span class="Statement">    @</span>   {
<span class="Statement">    @</span>       &quot;orderID&quot;: &quot;<span class="Statement">&lt;&lt;print-out</span> order_id<span class="Statement">&gt;&gt;</span>&quot;,
<span class="Statement">    @</span>       &quot;customer&quot;:
<span class="Statement">    @</span>       {
<span class="Statement">    @</span>           &quot;customerID&quot;: &quot;<span class="Statement">&lt;&lt;print-out</span> customer_id<span class="Statement">&gt;&gt;</span>&quot;,
<span class="Statement">    @</span>           &quot;firstName&quot;: &quot;<span class="Statement">&lt;&lt;print-out</span> first_name<span class="Statement">&gt;&gt;</span>&quot;,
<span class="Statement">    @</span>           &quot;lastName&quot;: &quot;<span class="Statement">&lt;&lt;print-out</span> last_name<span class="Statement">&gt;&gt;</span>&quot;
<span class="Statement">    @</span>       },
<span class="Statement">    @</span>       &quot;items&quot;: [
<span class="Statement">    set-number</span> curr_item = <span class="Constant">0</span>
    <span class="Comment">// Query to get all items in an order</span>
<span class="Statement">    run-query</span> @db =<span class="Constant">&quot;select i.itemID, t.name, t.description, i.quantity </span><span class="Special">\</span>
<span class="Constant">            from orderItems i, items t where i.orderID='</span><span class="Special">%s</span><span class="Constant">' </span><span class="Special">\</span>
<span class="Constant">                and t.itemID=i.itemID&quot;</span> \
           <span class="Type"> output</span> itemID, itemName, itemDescription, itemQuantity<span class="Identifier"> :</span> order_id \
           <span class="Type"> row-count</span> item_count
<span class="Statement">        @</span>       {
<span class="Statement">        @</span>           &quot;itemID&quot;: &quot;<span class="Statement">&lt;&lt;print-out</span> itemID<span class="Statement">&gt;&gt;</span>&quot;,
<span class="Statement">        @</span>           &quot;itemName&quot;: &quot;<span class="Statement">&lt;&lt;print-out</span> itemName<span class="Statement">&gt;&gt;</span>&quot;,
<span class="Statement">        @</span>           &quot;itemDescription&quot;: &quot;<span class="Statement">&lt;&lt;print-out</span> itemDescription<span class="Statement">&gt;&gt;</span>&quot;,
<span class="Statement">        @</span>           &quot;itemQuantity&quot;: &quot;<span class="Statement">&lt;&lt;print-out</span> itemQuantity<span class="Statement">&gt;&gt;</span>&quot;
        <span class="Comment">// add a comma if there are more items after this</span>
<span class="Statement">        set-number</span> curr_item=curr_item+<span class="Constant">1</span>
<span class="Statement">        if-true</span> curr_item<span class="Identifier"> lesser-than</span> item_count
<span class="Statement">            @</span>       },
<span class="Statement">        else-if</span>
<span class="Statement">            @</span>       }
<span class="Statement">        end-if</span>
<span class="Statement">    end-query</span>
<span class="Statement">    @</span>   ]
    <span class="Comment">// add a comma if there are more orders after this</span>
<span class="Statement">    set-number</span> curr_order = curr_order+<span class="Constant">1</span>
<span class="Statement">    if-true</span> curr_order<span class="Identifier"> lesser-than</span> order_count
<span class="Statement">        @</span>},
<span class="Statement">    else-if</span>
<span class="Statement">        @</span>}
<span class="Statement">    end-if</span>
<span class="Statement">end-handler</span>
<span class="Constant">EOF</span></pre>
<span id=rimstone_copied_321 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_321' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_321, code_321, rimstone_copied_321)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<span style="font-weight:bold;">- List orders</span><br/>
<br/>
Create file "list-orders.rim":<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_324' class=notranslate>
cat &lt;&lt; '<span class="Constant">EOF</span>' &gt; list-orders.rim
<span class="Statement">begin-handler</span> /list-orders
<span class="Statement">    out-header</span><span class="Identifier"> use content-type</span> <span class="Constant">&quot;application/json&quot;</span>
<span class="Statement">    get-param</span> order_id<span class="Identifier"> default-value</span> <span class="Constant">&quot;&quot;</span>
<span class="Statement">    set-number</span> curr_order = <span class="Constant">0</span>
    <span class="Comment">// Start JSON output</span>
<span class="Statement">    @</span>{ &quot;orders&quot;: [
<span class="Statement">    if-true</span> order_id<span class="Identifier"> not-equal</span> <span class="Constant">&quot;&quot;</span>
        <span class="Comment">// Query just a specific order</span>
<span class="Statement">        run-query</span> @db = <span class="Constant">&quot;select o.orderID, c.customerID, c.firstName, c.lastName </span><span class="Special">\</span>
<span class="Constant">                from orders o, customers c </span><span class="Special">\</span>
<span class="Constant">                where o.customerID=c.customerID and o.orderId='</span><span class="Special">%s</span><span class="Constant">'&quot;</span> \
               <span class="Type"> output</span> customer_id, first_name, last_name \
               <span class="Type"> row-count</span> order_count<span class="Identifier"> :</span> order_id
<span class="Statement">                call-handler</span> <span class="Constant">&quot;/json_from_order&quot;</span><span class="Identifier"> set-param</span> order_id, curr_order, order_count, customer_id, first_name, last_name
<span class="Statement">        end-query</span>
<span class="Statement">    else-if</span>
        <span class="Comment">// Query to get all orders</span>
<span class="Statement">        run-query</span> @db =<span class="Constant">&quot;select o.orderID, c.customerID, c.firstName, c.lastName </span><span class="Special">\</span>
<span class="Constant">                from orders o, customers c </span><span class="Special">\</span>
<span class="Constant">                where o.customerID=c.customerID order by o.orderId&quot;</span> \
               <span class="Type"> output</span> order_id, customer_id, first_name, last_name \
               <span class="Type"> row-count</span> order_count
<span class="Statement">                call-handler</span> <span class="Constant">&quot;/json_from_order&quot;</span><span class="Identifier"> set-param</span> order_id, curr_order, order_count, customer_id, first_name, last_name
<span class="Statement">        end-query</span>
<span class="Statement">    end-if</span>
    <span class="Comment">// Finish JSON output</span>
<span class="Statement">    @</span>   ]
<span class="Statement">    @</span>}
<span class="Statement">end-handler</span>
<span class="Constant">EOF</span></pre>
<span id=rimstone_copied_324 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_324' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_324, code_324, rimstone_copied_324)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<span style="font-weight:bold;">- Update an order</span><br/>
<br/>
Create file "update-order.rim":<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_327' class=notranslate>
cat &lt;&lt; '<span class="Constant">EOF</span>' &gt; update-order.rim
<span class="Statement">begin-handler</span> /update-order
<span class="Statement">    out-header</span><span class="Identifier"> use content-type</span> <span class="Constant">&quot;application/json&quot;</span>
<span class="Statement">    get-param</span> order_id, item_id, quantity
<span class="Statement">    set-number</span> arows
    <span class="Comment">// If quantity update is </span><span class="Constant">0</span><span class="Comment">, issue SQL to delete an item from order, otherwise update </span>
<span class="Statement">    if-true</span> quantity<span class="Identifier"> equal</span> <span class="Constant">&quot;0&quot;</span>
<span class="Statement">        run-query</span> @db =<span class="Constant">&quot;delete from orderItems where orderID='</span><span class="Special">%s</span><span class="Constant">' and itemID='</span><span class="Special">%s</span><span class="Constant">'&quot;</span> \
           <span class="Identifier"> :</span> order_id, item_id<span class="Identifier"> no-loop</span><span class="Type"> affected-rows</span> arows
<span class="Statement">    else-if</span>
<span class="Statement">        run-query</span> @db =<span class="Constant">&quot;update orderItems set quantity='</span><span class="Special">%s</span><span class="Constant">' where orderID='</span><span class="Special">%s</span><span class="Constant">' and itemID='</span><span class="Special">%s</span><span class="Constant">'&quot;</span> \
           <span class="Identifier"> :</span> quantity, order_id, item_id<span class="Identifier"> no-loop</span><span class="Type"> affected-rows</span> arows
<span class="Statement">    end-if</span>
<span class="Statement">    @</span>&quot;<span class="Statement">&lt;&lt;print-out</span> arows<span class="Statement">&gt;&gt;</span>&quot;
<span class="Statement">end-handler</span>
<span class="Constant">EOF</span></pre>
<span id=rimstone_copied_327 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_327' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_327, code_327, rimstone_copied_327)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<div class="vsub"><a id="Make the application"></a>Make the application</div>
Specify the database "db" (remember we set it up above), and make all handlers public (i.e. they can handle external calls from the outside callers, and not just from within the application):<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_313' class=notranslate>
rim <span class="Special">-q</span> <span class="Special">--db</span><span class="Statement">=</span>postgres:db <span class="Special">--public</span></pre>
<span id=rimstone_copied_313 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_313' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_313, code_313, rimstone_copied_313)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<div class="vsub"><a id="Try it"></a>Try it</div>
The following is just playing with the API. RimStone lets you run your web services from command line, so you can see byte-for-byte exactly what's the response. So the responses below include HTTP header, which in this case is very simple. You can disable HTTP output by specifying "--silent-header" in <a href='/rim.html'>rim</a> invocations below.<br/>
<br/>
Add new customer:<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_316' class=notranslate>
rim <span class="Special">-r</span> <span class="Special">--req</span><span class="Statement">=</span><span class="Statement">&quot;</span><span class="Constant">/add-customer/first-name=Mike/last-name=Gonzales</span><span class="Statement">&quot;</span> <span class="Special">--exec</span></pre>
<span id=rimstone_copied_316 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_316' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_316, code_316, rimstone_copied_316)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Resulting JSON (showing the ID of a new customer):<br/>
<div class='ncode' style='position:relative;padding-right:16px;'>
<pre id='code_303' class=notranslate>
Content-Type: application/json
Cache-Control: max-age=0, no-cache
Status: 200 OK

&quot;1&quot;</pre>
<span id=rimstone_copied_303 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_303' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_303, code_303, rimstone_copied_303)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Add an item for sale (showing the ID of a newly added item):<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_319' class=notranslate>
rim <span class="Special">-r</span> <span class="Special">--req</span><span class="Statement">=</span><span class="Statement">&quot;</span><span class="Constant">/add-item/name=Milk/description=Lactose-Free</span><span class="Statement">&quot;</span> <span class="Special">--exec</span></pre>
<span id=rimstone_copied_319 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_319' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_319, code_319, rimstone_copied_319)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
The result:<br/>
<div class='ncode' style='position:relative;padding-right:16px;'>
<pre id='code_307' class=notranslate>
Content-Type: application/json
Cache-Control: max-age=0, no-cache
Status: 200 OK

&quot;1&quot;</pre>
<span id=rimstone_copied_307 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_307' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_307, code_307, rimstone_copied_307)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Add a new order for the customer we created (showing the ID of order):<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_322' class=notranslate>
rim <span class="Special">-r</span> <span class="Special">--req</span><span class="Statement">=</span><span class="Statement">&quot;</span><span class="Constant">/create-order/customer-id=1</span><span class="Statement">&quot;</span> <span class="Special">--exec</span></pre>
<span id=rimstone_copied_322 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_322' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_322, code_322, rimstone_copied_322)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
The result:<br/>
<div class='ncode' style='position:relative;padding-right:16px;'>
<pre id='code_311' class=notranslate>
Content-Type: application/json
Cache-Control: max-age=0, no-cache
Status: 200 OK

&quot;1&quot;</pre>
<span id=rimstone_copied_311 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_311' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_311, code_311, rimstone_copied_311)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Add an item to order, in quantity of 2 (showing number of items added, not the quantity):<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_325' class=notranslate>
rim <span class="Special">-r</span> <span class="Special">--req</span><span class="Statement">=</span><span class="Statement">&quot;</span><span class="Constant">/add-to-order/order-id=1/item-id=1/quantity=2</span><span class="Statement">&quot;</span> <span class="Special">--exec</span></pre>
<span id=rimstone_copied_325 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_325' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_325, code_325, rimstone_copied_325)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
The result:<br/>
<div class='ncode' style='position:relative;padding-right:16px;'>
<pre id='code_314' class=notranslate>
Content-Type: application/json
Cache-Control: max-age=0, no-cache
Status: 200 OK

&quot;1&quot;</pre>
<span id=rimstone_copied_314 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_314' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_314, code_314, rimstone_copied_314)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
List orders:<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_328' class=notranslate>
rim <span class="Special">-r</span> <span class="Special">--req</span><span class="Statement">=</span><span class="Statement">&quot;</span><span class="Constant">/list-orders</span><span class="Statement">&quot;</span> <span class="Special">--exec</span></pre>
<span id=rimstone_copied_328 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_328' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_328, code_328, rimstone_copied_328)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Here's the JSON showing current orders (just one in our case):<br/>
<div class='ncode' style='position:relative;padding-right:16px;'>
<pre id='code_317' class=notranslate>
Content-Type: application/json
Cache-Control: max-age=0, no-cache
Status: 200 OK

{ &quot;orders&quot;: [
   {
       &quot;orderID&quot;: &quot;1&quot;,
       &quot;customer&quot;:
       {
           &quot;customerID&quot;: &quot;1&quot;,
           &quot;firstName&quot;: &quot;Mike&quot;,
           &quot;lastName&quot;: &quot;Gonzales&quot;
       },
       &quot;items&quot;: [
       {
           &quot;itemID&quot;: &quot;1&quot;,
           &quot;itemName&quot;: &quot;Milk&quot;,
           &quot;itemDescription&quot;: &quot;Lactose-Free&quot;,
           &quot;itemQuantity&quot;: &quot;2&quot;
       }
   ]
}
   ]
}</pre>
<span id=rimstone_copied_317 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_317' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_317, code_317, rimstone_copied_317)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Add another item for sale (showing the ID of this new item):<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_330' class=notranslate>
rim <span class="Special">-r</span> <span class="Special">--req</span><span class="Statement">=</span><span class="Statement">&quot;</span><span class="Constant">/add-item/name=Bread/description=Sliced</span><span class="Statement">&quot;</span> <span class="Special">--exec</span></pre>
<span id=rimstone_copied_330 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_330' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_330, code_330, rimstone_copied_330)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
The result (showing the ID of a newly added item):<br/>
<div class='ncode' style='position:relative;padding-right:16px;'>
<pre id='code_320' class=notranslate>
Content-Type: application/json
Cache-Control: max-age=0, no-cache
Status: 200 OK

&quot;2&quot;</pre>
<span id=rimstone_copied_320 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_320' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_320, code_320, rimstone_copied_320)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Add a quantity of 3 of the new item we added (ID of 2):<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_297' class=notranslate>
rim <span class="Special">-r</span> <span class="Special">--req</span><span class="Statement">=</span><span class="Statement">&quot;</span><span class="Constant">/add-to-order/order-id=1/item-id=2/quantity=3</span><span class="Statement">&quot;</span> <span class="Special">--exec</span></pre>
<span id=rimstone_copied_297 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_297' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_297, code_297, rimstone_copied_297)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
The result (showing the number of items added, not the quantity):<br/>
<div class='ncode' style='position:relative;padding-right:16px;'>
<pre id='code_323' class=notranslate>
Content-Type: application/json
Cache-Control: max-age=0, no-cache
Status: 200 OK

&quot;1&quot;</pre>
<span id=rimstone_copied_323 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_323' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_323, code_323, rimstone_copied_323)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
List orders again:<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_299' class=notranslate>
rim <span class="Special">-r</span> <span class="Special">--req</span><span class="Statement">=</span><span class="Statement">&quot;</span><span class="Constant">/list-orders</span><span class="Statement">&quot;</span> <span class="Special">--exec</span></pre>
<span id=rimstone_copied_299 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_299' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_299, code_299, rimstone_copied_299)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
The result, now there's new items here:<br/>
<div class='ncode' style='position:relative;padding-right:16px;'>
<pre id='code_326' class=notranslate>
Content-Type: application/json
Cache-Control: max-age=0, no-cache
Status: 200 OK

{ &quot;orders&quot;: [
   {
       &quot;orderID&quot;: &quot;1&quot;,
       &quot;customer&quot;:
       {
           &quot;customerID&quot;: &quot;1&quot;,
           &quot;firstName&quot;: &quot;Mike&quot;,
           &quot;lastName&quot;: &quot;Gonzales&quot;
       },
       &quot;items&quot;: [
       {
           &quot;itemID&quot;: &quot;1&quot;,
           &quot;itemName&quot;: &quot;Milk&quot;,
           &quot;itemDescription&quot;: &quot;Lactose-Free&quot;,
           &quot;itemQuantity&quot;: &quot;2&quot;
       },
       {
           &quot;itemID&quot;: &quot;2&quot;,
           &quot;itemName&quot;: &quot;Bread&quot;,
           &quot;itemDescription&quot;: &quot;Sliced&quot;,
           &quot;itemQuantity&quot;: &quot;3&quot;
       }
   ]
}
   ]
}</pre>
<span id=rimstone_copied_326 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_326' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_326, code_326, rimstone_copied_326)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Update order, by changing the quantity of item (we specify order ID, item ID and the new quantity):<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_300' class=notranslate>
rim <span class="Special">-r</span> <span class="Special">--req</span><span class="Statement">=</span><span class="Statement">&quot;</span><span class="Constant">/update-order/order-id=1/item-id=2/quantity=4</span><span class="Statement">&quot;</span> <span class="Special">--exec</span></pre>
<span id=rimstone_copied_300 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_300' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_300, code_300, rimstone_copied_300)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
The result showing number of items updated:<br/>
<div class='ncode' style='position:relative;padding-right:16px;'>
<pre id='code_329' class=notranslate>
Content-Type: application/json
Cache-Control: max-age=0, no-cache
Status: 200 OK

&quot;1&quot;</pre>
<span id=rimstone_copied_329 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_329' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_329, code_329, rimstone_copied_329)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
List orders to show the update:<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_301' class=notranslate>
rim <span class="Special">-r</span> <span class="Special">--req</span><span class="Statement">=</span><span class="Statement">&quot;</span><span class="Constant">/list-orders</span><span class="Statement">&quot;</span> <span class="Special">--exec</span></pre>
<span id=rimstone_copied_301 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_301' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_301, code_301, rimstone_copied_301)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
And it shows:<br/>
<div class='ncode' style='position:relative;padding-right:16px;'>
<pre id='code_296' class=notranslate>
Content-Type: application/json
Cache-Control: max-age=0, no-cache
Status: 200 OK

{ &quot;orders&quot;: [
   {
       &quot;orderID&quot;: &quot;1&quot;,
       &quot;customer&quot;:
       {
           &quot;customerID&quot;: &quot;1&quot;,
           &quot;firstName&quot;: &quot;Mike&quot;,
           &quot;lastName&quot;: &quot;Gonzales&quot;
       },
       &quot;items&quot;: [
       {
           &quot;itemID&quot;: &quot;1&quot;,
           &quot;itemName&quot;: &quot;Milk&quot;,
           &quot;itemDescription&quot;: &quot;Lactose-Free&quot;,
           &quot;itemQuantity&quot;: &quot;2&quot;
       },
       {
           &quot;itemID&quot;: &quot;2&quot;,
           &quot;itemName&quot;: &quot;Bread&quot;,
           &quot;itemDescription&quot;: &quot;Sliced&quot;,
           &quot;itemQuantity&quot;: &quot;4&quot;
       }
   ]
}
   ]
}</pre>
<span id=rimstone_copied_296 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_296' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_296, code_296, rimstone_copied_296)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Delete an order:<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_302' class=notranslate>
rim <span class="Special">-r</span> <span class="Special">--req</span><span class="Statement">=</span><span class="Statement">&quot;</span><span class="Constant">/delete-order/order-id=1</span><span class="Statement">&quot;</span> <span class="Special">--exec</span></pre>
<span id=rimstone_copied_302 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_302' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_302, code_302, rimstone_copied_302)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
The result JSON (showing the number of items deleted in it):<br/>
<div class='ncode' style='position:relative;padding-right:16px;'>
<pre id='code_298' class=notranslate>
Content-Type: application/json
Cache-Control: max-age=0, no-cache
Status: 200 OK

{ &quot;orders&quot;:&quot;1&quot;, &quot;items&quot;:&quot;2&quot; }</pre>
<span id=rimstone_copied_298 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_298' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_298, code_298, rimstone_copied_298)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<div class="vsub"><a id="Conclusion"></a>Conclusion</div>
You can see that building web services can be easy and fast. More importantly, what matters is also how easy it is to come back to it 6 months later and understand right away what's what. You can try that 6 months from now and see if it's true for you. I'd say chances are pretty good.<br/>
<a id='article-sqlite.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:left;background-color:white;'><a href='https://rimstone-lang.com' style='border-bottom:0px'><img src='https://rimstone-lang.com/rimstone.png' style='width:180px;height:auto'/></a></div><div class='vhub' style='margin-top:10px;'>SQLite with RimStone</div><hr/><br/>
This example will create a service that inserts key and value into SQLite table. It's tested from command line.<br/>
<br/>
Create a directory and then switch to it:<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_333' class=notranslate>
<span class="Statement">mkdir</span> sqlite
<span class="Statement">cd</span> sqlite</pre>
<span id=rimstone_copied_333 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_333' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_333, code_333, rimstone_copied_333)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Setup SQLite database in file "mydata.db":<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_335' class=notranslate>
<span class="Statement">echo</span><span class="Constant"> </span><span class="Statement">'</span><span class="Constant">drop table if exists key_value; </span>
<span class="Constant">create table if not exists key_value (key varchar(50) primary key, value varchar(100));</span><span class="Statement">'</span><span class="Constant"> </span>| sqlite3 mydata.db</pre>
<span id=rimstone_copied_335 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_335' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_335, code_335, rimstone_copied_335)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Create configuration file "mydb" that describes the SQLite database "mydata.db":<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_336' class=notranslate>
<span class="Statement">echo</span><span class="Constant"> </span><span class="Statement">&quot;</span><span class="PreProc">$(</span><span class="Statement">pwd</span><span class="PreProc">)</span><span class="Constant">/mydata.db</span><span class="Statement">&quot;</span><span class="Statement">&gt;</span> mydb</pre>
<span id=rimstone_copied_336 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_336' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_336, code_336, rimstone_copied_336)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Create the application:<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_337' class=notranslate>
rim <span class="Special">-k</span> sqlite</pre>
<span id=rimstone_copied_337 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_337' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_337, code_337, rimstone_copied_337)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Save the code to "insert.rim" (note use of database configuration "mydb" in @mydb):<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_332' class=notranslate>
cat &lt;&lt; '<span class="Constant">EOF</span>' &gt; insert.rim
<span class="Statement">%%</span> /insert<span class="Identifier"> public</span>
<span class="Statement">    get-param</span> key
<span class="Statement">    get-param</span> value
<span class="Statement">    run-query</span> @mydb = <span class="Constant">&quot;insert into key_value(key,value) values ('</span><span class="Special">%s</span><span class="Constant">', '</span><span class="Special">%s</span><span class="Constant">')&quot;</span><span class="Identifier"> input</span> key, value<span class="Type"> error</span> err<span class="Type"> affected-rows</span> aff_rows<span class="Identifier"> no-loop</span>
<span class="Statement">    @</span>Error <span class="Statement">&lt;&lt;print-out</span> err<span class="Statement">&gt;&gt;</span>, affected rows <span class="Statement">&lt;&lt;print-out</span> aff_rows<span class="Statement">&gt;&gt;</span>
<span class="Statement">%%</span>
<span class="Constant">EOF</span></pre>
<span id=rimstone_copied_332 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_332' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_332, code_332, rimstone_copied_332)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Compile the application - we specify that file "mydb" is describing SQLite database:<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_338' class=notranslate>
rim <span class="Special">-q</span> <span class="Special">--db</span><span class="Statement">=</span>sqlite:mydb</pre>
<span id=rimstone_copied_338 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_338' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_338, code_338, rimstone_copied_338)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Run the application by executing this service from command line. Note passing the input parameters "key" and "value" to it:<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_339' class=notranslate>
rim <span class="Special">-r</span> <span class="Special">--req</span><span class="Statement">=</span><span class="Statement">&quot;</span><span class="Constant">/insert/key=1/value=one</span><span class="Statement">&quot;</span> <span class="Special">--exec</span> <span class="Special">--silent-header</span></pre>
<span id=rimstone_copied_339 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_339' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_339, code_339, rimstone_copied_339)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
The output is:<br/>
<div class='ncode' style='position:relative;padding-right:16px;'>
<pre id='code_331' class=notranslate>
Error 0, affected rows 1</pre>
<span id=rimstone_copied_331 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_331' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_331, code_331, rimstone_copied_331)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Verify data inserted:<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_340' class=notranslate>
<span class="Statement">echo</span><span class="Constant"> -e </span><span class="Statement">&quot;</span><span class="Constant">.headers off</span><span class="Special">\n</span><span class="Constant">.mode line</span><span class="Special">\n</span><span class="Constant">select key </span><span class="Statement">&quot;</span><span class="Constant">Key</span><span class="Statement">&quot;</span><span class="Constant">, value </span><span class="Statement">&quot;</span><span class="Constant">Value</span><span class="Statement">&quot;</span><span class="Constant"> from key_value</span><span class="Statement">&quot;</span>|sqlite3 mydata.db</pre>
<span id=rimstone_copied_340 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_340' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_340, code_340, rimstone_copied_340)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
The result:<br/>
<div class='ncode' style='position:relative;padding-right:16px;'>
<pre id='code_334' class=notranslate>
Key = 1
Value = one</pre>
<span id=rimstone_copied_334 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_334' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_334, code_334, rimstone_copied_334)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<a id='article-statements.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:left;background-color:white;'><a href='https://rimstone-lang.com' style='border-bottom:0px'><img src='https://rimstone-lang.com/rimstone.png' style='width:180px;height:auto'/></a></div><div class='vhub' style='margin-top:10px;'>Statements in RimStone</div><hr/><br/>
RimStone is a new programming language and framework for developing web services and web applications. The reason for RimStone is to make software development easier and more reliable.<br/>
<br/>
RimStone is a declarative language designed for simplicity. That means top-down approach, rather than bottom-up: it's more about describing what to do than coding it. It's a modeling language where pieces are assembled together quickly and with confidence. It's about the framework to create and deploy web services based on what they need to do from human perspective, more so than the technical one.<br/>
<br/>
Underlying RimStone's functionality are industry-standard Open Source libraries, such as SSL, Curl, MariaDB and others, in addition to native RimStone's. <br/>
<br/>
In extended mode, RimStone is extensible with any standard libraries. You can also include C files directly in your project to compile with it. In this mode, RimStone (obviously) does not guaratee memory safety, but it does not necessarily mean it's not safe either.<br/>
<a id='article-status-check.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:left;background-color:white;'><a href='https://rimstone-lang.com' style='border-bottom:0px'><img src='https://rimstone-lang.com/rimstone.png' style='width:180px;height:auto'/></a></div><div class='vhub' style='margin-top:10px;'>Example of auto status checking with RimStone</div><hr/><br/>
When talking about safety in programming, it is memory safety that usually takes the spotlight. However, here we'll touch on another common safety issue that typically causes application logic errors, meaning your program won't function correctly. It's about checking the status of any kind of statement that provides it. Not checking the status could mean that the result of a statement isn't correct, yet your program is proceeding as if it were. Of course, this is bound to cause problems, and this is true for any programming language.<br/>
<br/>
RimStone now has a built-in mechanism to help prevent issues like this. The approach taken (at this time at least) is not to force the developer to check status for every statement. Rather if status isn't checked, your program will stop in an orderly fashion and tell you exactly in which source file and which line number you didn't check the status that may cause an issue. It's a default fine line between code bloat and safety. Not every status needs to be checked. And this approach helps pinpoint the most pressing spots in your code where failure is the most likely to happen.<br/>
<br/>
Another future enhancement is in the queue, which would allow (as an option) to force status checking on all statements.<br/>
<br/>
Create an application in a separate directory:<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_343' class=notranslate>
<span class="Statement">mkdir</span> status-check
<span class="Statement">cd</span> status-check
rim <span class="Special">-k</span> file-transform</pre>
<span id=rimstone_copied_343 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_343' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_343, code_343, rimstone_copied_343)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Create file "file-name.rim" with:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_342' class=notranslate>
cat &lt;&lt; '<span class="Constant">EOF</span>' &gt; file-name.rim
<span class="Statement">%%</span> /file-name<span class="Identifier"> public</span>
<span class="Statement">    silent-header</span> <span class="Comment">// don't output HTTP header</span>
<span class="Statement">    get-param</span> fname <span class="Comment">// get file name we'll read</span>
<span class="Statement">    change-dir</span><span class="Identifier"> run-dir</span> <span class="Comment">// change to directory we ran this program from</span>
<span class="Statement">    read-file</span> fname<span class="Type"> to</span> file_content <span class="Comment">// read file</span>
    <span class="Comment">// Transform file contents</span>
<span class="Statement">    match-regex</span> <span class="Constant">&quot;File: ([0-9]+).imp&quot;</span><span class="Identifier"> in</span> file_content<span class="Identifier"> replace-with</span> <span class="Constant">&quot;</span><span class="Special">\\</span><span class="Constant">1&quot;</span><span class="Type"> result</span> res<span class="Identifier"> cache</span>
    <span class="Comment">// Print out the result</span>
<span class="Statement">    print-out</span> res
<span class="Statement">%%</span>
<span class="Constant">EOF</span></pre>
<span id=rimstone_copied_342 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_342' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_342, code_342, rimstone_copied_342)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
This will take file name ("fname") as an input parameter, read that file, and transform any text in it that starts with "File: " followed by a file name that's made up of digits (without an extension), and outputs those file names. So a bit contrived example, and arguably the point here has nothing to do with matching regex patterns. But it's an example from a real-world application, so I plugged it in just the same.<br/>
<br/>
So, let's say the input file "myfile" is created here:<br/>
<div class='ncode' style='position:relative;padding-right:16px;'>
<pre id='code_341' class=notranslate>
cat &lt;&lt; &apos;EOF&apos; &gt; myfile
File: 99281.imp
File: 3716243.imp
File: 124.imp
EOF</pre>
<span id=rimstone_copied_341 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_341' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_341, code_341, rimstone_copied_341)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Make the application:<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_346' class=notranslate>
rim <span class="Special">-q</span></pre>
<span id=rimstone_copied_346 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_346' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_346, code_346, rimstone_copied_346)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Run it:<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_349' class=notranslate>
rim <span class="Special">-r</span> <span class="Special">--req</span><span class="Statement">=</span><span class="Statement">&quot;</span><span class="Constant">/file-name/fname=myfile</span><span class="Statement">&quot;</span> <span class="Special">--exec</span></pre>
<span id=rimstone_copied_349 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_349' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_349, code_349, rimstone_copied_349)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
And the output is, as it should be:<br/>
<div class='ncode' style='position:relative;padding-right:16px;'>
<pre id='code_344' class=notranslate>
99281
3716243
124</pre>
<span id=rimstone_copied_344 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_344' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_344, code_344, rimstone_copied_344)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Okay, so far so good. But let's run this program by specifying a non-existent file:<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_351' class=notranslate>
rim <span class="Special">-r</span> <span class="Special">--req</span><span class="Statement">=</span><span class="Statement">&quot;</span><span class="Constant">/file-name/fname=nonexistant</span><span class="Statement">&quot;</span> <span class="Special">--exec</span></pre>
<span id=rimstone_copied_351 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_351' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_351, code_351, rimstone_copied_351)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
The output is (among other things like stack trace):<br/>
<div class='ncode' style='position:relative;padding-right:16px;'>
<pre id='code_347' class=notranslate>
File [file-name.rim], line [5], Statement failed without status being obtained and/or checked [-1]</pre>
<span id=rimstone_copied_347 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_347' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_347, code_347, rimstone_copied_347)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Aha! So your program will safely stop as soon there's a failure in code where you didn't check for status, namely this line (number 5) from the code above:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_345' class=notranslate>
<span class="Statement">read-file</span> fname<span class="Type"> to</span> file_content <span class="Comment">// read file</span></pre>
<span id=rimstone_copied_345 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_345' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_345, code_345, rimstone_copied_345)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Now, let's add status and check it, so rewrite "file-name.rim" with this:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_348' class=notranslate>
cat &lt;&lt; '<span class="Constant">EOF</span>' &gt; file-name.rim
<span class="Statement">%%</span> /file-name<span class="Identifier"> public</span>
<span class="Statement">    silent-header</span> <span class="Comment">// don't output HTTP header</span>
<span class="Statement">    get-param</span> fname <span class="Comment">// get file name we'll read</span>
<span class="Statement">    change-dir</span><span class="Identifier"> run-dir</span> <span class="Comment">// change to directory we ran this program from</span>
<span class="Statement">    read-file</span> fname<span class="Type"> to</span> file_content<span class="Type"> status</span> st<span class="Comment">// read file</span>
<span class="Statement">    if-true</span> st<span class="Identifier"> not-equal</span> RIM_OKAY
<span class="Statement">        @</span>Sorry, cannot open file <span class="Statement">&lt;&lt;print-out</span> fname<span class="Statement">&gt;&gt;</span>!
<span class="Statement">    end-if</span>
    <span class="Comment">// Transform file contents</span>
<span class="Statement">    match-regex</span> <span class="Constant">&quot;File: ([0-9]+).imp&quot;</span><span class="Identifier"> in</span> file_content<span class="Identifier"> replace-with</span> <span class="Constant">&quot;</span><span class="Special">\\</span><span class="Constant">1&quot;</span><span class="Type"> result</span> res<span class="Identifier"> cache</span>
    <span class="Comment">// Print out the result</span>
<span class="Statement">    print-out</span> res
<span class="Statement">%%</span>
<span class="Constant">EOF</span></pre>
<span id=rimstone_copied_348 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_348' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_348, code_348, rimstone_copied_348)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Compile it and run again:<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_352' class=notranslate>
rim <span class="Special">-q</span>
rim <span class="Special">-r</span> <span class="Special">--req</span><span class="Statement">=</span><span class="Statement">&quot;</span><span class="Constant">/file-name/fname=nonexistant</span><span class="Statement">&quot;</span> <span class="Special">--exec</span></pre>
<span id=rimstone_copied_352 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_352' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_352, code_352, rimstone_copied_352)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
And the result is:<br/>
<div class='ncode' style='position:relative;padding-right:16px;'>
<pre id='code_350' class=notranslate>
Sorry, cannot open file noexistant!</pre>
<span id=rimstone_copied_350 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_350' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_350, code_350, rimstone_copied_350)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
So now you can see how useful the automatic "static checking" feature is. It prevented unsafe execution (logic-wise) from moving forward, and provided you with a clear clue as to how to fix the issue.<br/>
<a id='article-tree.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:left;background-color:white;'><a href='https://rimstone-lang.com' style='border-bottom:0px'><img src='https://rimstone-lang.com/rimstone.png' style='width:180px;height:auto'/></a></div><div class='vhub' style='margin-top:10px;'>Cache server in 30 lines</div><hr/><br/>
This is a cache server that can add, delete and query key/value pairs, with their number limited only by available memory. <br/>
<br/>
We'll use "tree" type, which is a high-performance data structure. For example, with 1,000,000 keys it will take only about 20 comparisons to find any key; and the range search is just one hop. Index is based on a modified AVL/B tree.<br/>
<br/>
Create new "tree" application first, in a new directory (you can name it anything you like):<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_355' class=notranslate>
<span class="Statement">mkdir</span> <span class="Special">-p</span> tree
<span class="Statement">cd</span> tree</pre>
<span id=rimstone_copied_355 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_355' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_355, code_355, rimstone_copied_355)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
The <a href='/mrim.html'>mrim</a> command is a RimStone service manager and here it will create a new application named "tree" (it can be different from the directory it's in):<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_356' class=notranslate>
rim <span class="Special">-k</span> tree</pre>
<span id=rimstone_copied_356 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_356' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_356, code_356, rimstone_copied_356)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Create a source code file "srv.rim" with this code in it:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_354' class=notranslate>
cat &lt;&lt; '<span class="Constant">EOF</span>' &gt; srv.rim
<span class="Statement">begin-handler</span> /srv<span class="Identifier"> public</span>
<span class="Statement">    do-once</span>
<span class="Statement">        new-tree</span> ind<span class="Identifier"> process-scope</span>
<span class="Statement">    end-do-once</span>
<span class="Statement">    get-param</span> op
<span class="Statement">    get-param</span> key
<span class="Statement">    get-param</span> data<span class="Identifier"> default-value</span> <span class="Constant">&quot;&quot;</span>
<span class="Statement">    if-true</span> op<span class="Identifier"> equal</span> <span class="Constant">&quot;add&quot;</span>
<span class="Statement">        write-tree</span> ind<span class="Identifier"> key</span> (key)<span class="Identifier"> value</span> data<span class="Type"> status</span> st
<span class="Statement">        if-true</span> st<span class="Identifier"> equal</span> RIM_ERR_EXIST
<span class="Statement">            @</span>Key exists [<span class="Statement">&lt;&lt;print-out</span> key<span class="Statement">&gt;&gt;</span>]
<span class="Statement">        else-if</span>
<span class="Statement">            @</span>Added [<span class="Statement">&lt;&lt;print-out</span> key<span class="Statement">&gt;&gt;</span>]
<span class="Statement">        end-if</span>
<span class="Statement">    else-if</span> op<span class="Identifier"> equal</span> <span class="Constant">&quot;delete&quot;</span>
<span class="Statement">        delete-tree</span> ind<span class="Identifier"> key</span> (key)<span class="Type"> value</span> val<span class="Type"> status</span> st
<span class="Statement">        if-true</span> st<span class="Identifier"> equal</span> RIM_ERR_EXIST
<span class="Statement">            @</span>Not found [<span class="Statement">&lt;&lt;print-out</span> key<span class="Statement">&gt;&gt;</span>]
<span class="Statement">        else-if</span>
<span class="Statement">            @</span>Deleted, old value was [<span class="Statement">&lt;&lt;print-out</span> val<span class="Statement">&gt;&gt;</span>]
<span class="Statement">        end-if</span>
<span class="Statement">    else-if</span> op<span class="Identifier"> equal</span> <span class="Constant">&quot;query&quot;</span>
<span class="Statement">        read-tree</span> ind<span class="Identifier"> equal</span> (key)<span class="Type"> value</span> val<span class="Type"> status</span> st
<span class="Statement">        if-true</span> st<span class="Identifier"> equal</span> RIM_ERR_EXIST
<span class="Statement">            @</span>Not found, queried [<span class="Statement">&lt;&lt;print-out</span> key<span class="Statement">&gt;&gt;</span>]
<span class="Statement">        else-if</span>
<span class="Statement">            @</span>Value [<span class="Statement">&lt;&lt;print-out</span> val<span class="Statement">&gt;&gt;</span>]
<span class="Statement">        end-if</span>
<span class="Statement">    end-if</span>
<span class="Statement">end-handler</span>
<span class="Constant">EOF</span></pre>
<span id=rimstone_copied_354 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_354' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_354, code_354, rimstone_copied_354)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
A service will run as a single process because each operation is handled very fast, even with large number of concurrent requests.<br/>
<div class="vsub"><a id="Build a service"></a>Build a service</div>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_357' class=notranslate>
rim <span class="Special">-q</span></pre>
<span id=rimstone_copied_357 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_357' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_357, code_357, rimstone_copied_357)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<div class="vsub"><a id="Run as service"></a>Run as service</div>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_358' class=notranslate>
mrim <span class="Special">-w</span> <span class="Constant">1</span> tree</pre>
<span id=rimstone_copied_358 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_358' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_358, code_358, rimstone_copied_358)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
The above will start a single server process (-w 1) to serve incoming requests.<br/>
<div class="vsub"><a id="Test it"></a>Test it</div>
This is a bash test script to insert 3 keys into your cache server, query them, then delete them - copy and paste it to the command line:<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_359' class=notranslate>
<span class="Comment">#Add 3 key/data pairs. Key value is 0,1,2... and data values are &quot;data_0&quot;, &quot;data_1&quot;, &quot;data_2&quot; etc.</span>
<span class="Statement">for</span> i <span class="Statement">in</span> <span class="Special">{</span><span class="Constant">1</span>..<span class="Constant">3</span><span class="Special">}</span>; <span class="Statement">do</span>
   rim <span class="Statement">-r</span> <span class="Special">--req</span><span class="Statement">=</span><span class="Statement">&quot;</span><span class="Constant">/srv/op=add/key=</span><span class="PreProc">$i</span><span class="Constant">/data=data_</span><span class="PreProc">$i</span><span class="Statement">&quot;</span> <span class="Special">--exec</span> <span class="Special">--service</span> <span class="Special">--app</span><span class="Statement">=</span><span class="Statement">&quot;</span><span class="Constant">/tree</span><span class="Statement">&quot;</span> <span class="Special">--silent-header</span>
<span class="Statement">done</span>
<span class="Statement">echo</span><span class="Constant"> </span><span class="Statement">&quot;</span><span class="Constant">Keys added</span><span class="Statement">&quot;</span>

<span class="Comment">#Query all 3 keys and check that values retrieved are the correct ones.</span>
<span class="Statement">for</span> i <span class="Statement">in</span> <span class="Special">{</span><span class="Constant">1</span>..<span class="Constant">3</span><span class="Special">}</span>; <span class="Statement">do</span>
   rim <span class="Statement">-r</span> <span class="Special">--req</span><span class="Statement">=</span><span class="Statement">&quot;</span><span class="Constant">/srv/op=query/key=</span><span class="PreProc">$i</span><span class="Statement">&quot;</span> <span class="Special">--exec</span> <span class="Special">--service</span> <span class="Special">--app</span><span class="Statement">=</span><span class="Statement">&quot;</span><span class="Constant">/tree</span><span class="Statement">&quot;</span> <span class="Special">--silent-header</span>
<span class="Statement">done</span>
<span class="Statement">echo</span><span class="Constant"> </span><span class="Statement">&quot;</span><span class="Constant">Keys queried</span><span class="Statement">&quot;</span>

<span class="Comment">#Delete all 3 keys</span>
<span class="Identifier">ERR</span>=<span class="Statement">&quot;</span><span class="Constant">0</span><span class="Statement">&quot;</span>
<span class="Statement">for</span> i <span class="Statement">in</span> <span class="Special">{</span><span class="Constant">1</span>..<span class="Constant">3</span><span class="Special">}</span>; <span class="Statement">do</span>
   rim <span class="Statement">-r</span> <span class="Special">--req</span><span class="Statement">=</span><span class="Statement">&quot;</span><span class="Constant">/srv/op=delete/key=</span><span class="PreProc">$i</span><span class="Statement">&quot;</span> <span class="Special">--exec</span> <span class="Special">--service</span> <span class="Special">--app</span><span class="Statement">=</span><span class="Statement">&quot;</span><span class="Constant">/tree</span><span class="Statement">&quot;</span> <span class="Special">--silent-header</span>
<span class="Statement">done</span>
<span class="Statement">echo</span><span class="Constant"> </span><span class="Statement">&quot;</span><span class="Constant">Keys deleted</span><span class="Statement">&quot;</span></pre>
<span id=rimstone_copied_359 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_359' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_359, code_359, rimstone_copied_359)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Make sure it's executable and run it:<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_360' class=notranslate>
<span class="Statement">chmod</span> <span class="Special">+x</span> test_tree
./test_tree</pre>
<span id=rimstone_copied_360 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_360' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_360, code_360, rimstone_copied_360)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
The result is this:<br/>
<div class='ncode' style='position:relative;padding-right:16px;'>
<pre id='code_353' class=notranslate>
Added [1]
Added [2]
Added [3]
Keys added
Value [data_1]
Value [data_2]
Value [data_3]
Keys queried
Deleted, old value was [data_1]
Deleted, old value was [data_2]
Deleted, old value was [data_3]
Keys deleted</pre>
<span id=rimstone_copied_353 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_353' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_353, code_353, rimstone_copied_353)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<a id='article-tree-web.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:left;background-color:white;'><a href='https://rimstone-lang.com' style='border-bottom:0px'><img src='https://rimstone-lang.com/rimstone.png' style='width:180px;height:auto'/></a></div><div class='vhub' style='margin-top:10px;'>Cache as a web service</div><hr/><br/>
This example shows Apache as the front-end (or "reverse proxy") for <a href='/article-tree.html'>article-tree</a> - it's assumed you've completed it first. Three steps to setting up Apache quickly:<br/>
<ol><li><span style="font-weight:bold;">Enable FastCGI proxy</span> used to communicate with RimStone services - this is one time only:<br/>
<ul><li>If you use Ubuntu and similar:<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_362' class=notranslate>
sudo a2enmod proxy
sudo a2enmod proxy_fcgi</pre>
<span id=rimstone_copied_362 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_362' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_362, code_362, rimstone_copied_362)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
</li><li>If you use Fedora and similar:<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_364' class=notranslate>
sudo vi /etc/httpd/conf/httpd.conf</pre>
<span id=rimstone_copied_364 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_364' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_364, code_364, rimstone_copied_364)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
and if you use OpenSUSE:<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_366' class=notranslate>
sudo vi /etc/httpd/conf/httpd.conf</pre>
<span id=rimstone_copied_366 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_366' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_366, code_366, rimstone_copied_366)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Add the following at the end of httpd.conf:<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_368' class=notranslate>
LoadModule proxy_module modules/mod_proxy.so
LoadModule proxy_fcgi_module modules/mod_proxy_fcgi.so</pre>
<span id=rimstone_copied_368 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_368' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_368, code_368, rimstone_copied_368)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
</li></ul>
</li><li><span style="font-weight:bold;">Edit Apache configuration file:</span><br/>
<ul><li>If you use Debian (such as Ubuntu):<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_369' class=notranslate>
sudo vi /etc/apache2/apache2.conf</pre>
<span id=rimstone_copied_369 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_369' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_369, code_369, rimstone_copied_369)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
</li>
<li>If you use Fedora (such as RedHat), Archlinux:<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_370' class=notranslate>
sudo vi /etc/httpd/conf/httpd.conf</pre>
<span id=rimstone_copied_370 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_370' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_370, code_370, rimstone_copied_370)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
</li>
<li>If you use OpenSUSE:<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_371' class=notranslate>
sudo vi /etc/apache2/httpd.conf</pre>
<span id=rimstone_copied_371 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_371' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_371, code_371, rimstone_copied_371)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
</li></ul>
Add this to the end of the configuration file - note "tree" is the application name you created in the above example (replace "your-user" with your OS user name):<br/>
<div class='ncode' style='position:relative;padding-right:16px;'>
<pre id='code_361' class=notranslate>
ProxyPass &quot;/tree/&quot; unix:///home/your-user/.rimstone/apps/tree/sock/.sock|fcgi://localhost/tree</pre>
<span id=rimstone_copied_361 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_361' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_361, code_361, rimstone_copied_361)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
</li><li><span style="font-weight:bold;">Restart Apache</span>. <br/>
<ul><li>On Debian systems (like Ubuntu) or OpenSUSE:<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_372' class=notranslate>
sudo systemctl restart apache2</pre>
<span id=rimstone_copied_372 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_372' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_372, code_372, rimstone_copied_372)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
</li><li>On Fedora systems (like RedHat) and Arch Linux:<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_373' class=notranslate>
sudo systemctl restart httpd</pre>
<span id=rimstone_copied_373 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_373' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_373, code_373, rimstone_copied_373)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
</li></ul>
</li></ol><span style="font-weight:bold;">- Test web service</span><br/>
<br/>
Now you can call your web service, from the web. In this case it's probably a local server (127.0.0.1) if you're doing this on your own computer. The URLs would be, for example to add, query and delete a key/value pair:<br/>
<div class='ncode' style='position:relative;padding-right:16px;'>
<pre id='code_363' class=notranslate>
http://127.0.0.1/tree/srv/op=add/key=1/data=d_1</pre>
<span id=rimstone_copied_363 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_363' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_363, code_363, rimstone_copied_363)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<div class='ncode' style='position:relative;padding-right:16px;'>
<pre id='code_365' class=notranslate>
http://127.0.0.1/tree/srv/op=query/key=1</pre>
<span id=rimstone_copied_365 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_365' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_365, code_365, rimstone_copied_365)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<div class='ncode' style='position:relative;padding-right:16px;'>
<pre id='code_367' class=notranslate>
http://127.0.0.1/tree/srv/op=delete/key=1</pre>
<span id=rimstone_copied_367 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_367' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_367, code_367, rimstone_copied_367)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Note the URL <a href='/request.html'>request</a> structure: first comes the application path ("/tree") followed by request path ("/srv") followed by URL parameters (such as "/op=add/key=1/data=d_1"). The result in web browser are messages informing you that the key was added, queried or deleted.<br/>
<a id='article-vim-coloring.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:left;background-color:white;'><a href='https://rimstone-lang.com' style='border-bottom:0px'><img src='https://rimstone-lang.com/rimstone.png' style='width:180px;height:auto'/></a></div><div class='vhub' style='margin-top:10px;'>Using Vim color schemes with RimStone</div><hr/><br/>
RimStone installation comes with a Vim module for highlighting RimStone code. After installing RimStone, run this to install the Vim module:<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_374' class=notranslate>
rim <span class="Special">-m</span></pre>
<span id=rimstone_copied_374 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_374' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_374, code_374, rimstone_copied_374)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
The default color scheme looks like this:<br/>
<br/><div class='vimg'><img class='imgs' src='vim1.png' alt='RimStone'></img>
</div><br/>
To change color scheme, type ":colorscheme " in command mode, then press Tab to see available color schemes. Press Enter to choose one. For instance, in 'darkblue' color scheme, it may look like:<br/>
<br/><div class='vimg'><img class='imgs' src='vim2.png' alt='RimStone'></img>
</div><br/>
To make the change permanent, edit file ".vimrc" in home directory:<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_375' class=notranslate>
vi ~/.vimrc</pre>
<span id=rimstone_copied_375 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_375' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_375, code_375, rimstone_copied_375)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
and append line:<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_376' class=notranslate>
colorscheme darkblue</pre>
<span id=rimstone_copied_376 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_376' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_376, code_376, rimstone_copied_376)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<a id='article-web-framework-for-c-programming-language.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:left;background-color:white;'><a href='https://rimstone-lang.com' style='border-bottom:0px'><img src='https://rimstone-lang.com/rimstone.png' style='width:180px;height:auto'/></a></div><div class='vhub' style='margin-top:10px;'>Web framework for C programming language</div><hr/><br/>
RimStone has an "extended" mode, which allows for C code to be used directly. Normally, this is not allowed, but if you use <a href='/extended-mode.html'>extended-mode</a> statement in your .rim file, then you can call C code from it.<br/>
<br/>
In extended mode, RimStone is effectively a <a href='/web-framework-for-C-programming-language.html'>web framework for C programming language</a>; read this for more about implications on memory safety.<br/>
<br/>
Here's the example of using RimStone as a web framework for C. In this case it's a simple C function to calculate the factorial of a a number. Then we'll expose this functionality in an equally simple web application. <br/>
<div class="vsub"><a id="Create the RimStone application"></a>Create the RimStone application</div>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_379' class=notranslate>
<span class="Statement">mkdir</span> <span class="Special">-p</span> c-for-web
<span class="Statement">cd</span> c-for-web</pre>
<span id=rimstone_copied_379 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_379' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_379, code_379, rimstone_copied_379)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Create "fact" application ("-k"):<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_382' class=notranslate>
rim <span class="Special">-k</span> fact</pre>
<span id=rimstone_copied_382 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_382' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_382, code_382, rimstone_copied_382)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
The following file "calc-fact.rim" has the web service which will interact with web clients (such as browsers); it will also call the C function we'll create a bit further below:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_378' class=notranslate>
cat &lt;&lt; '<span class="Constant">EOF</span>' &gt; calc-fact.rim
<span class="Statement">extended-mode</span> <span class="Comment">// extended mode in order to call C code</span>

<span class="Statement">%%</span> /calc-fact<span class="Identifier"> public</span>
<span class="Statement">    get-param</span> n<span class="Identifier"> type number</span> <span class="Comment">// get input parameter from URL</span>
<span class="Statement">    set-number</span> result
<span class="Statement">    call-extended</span> factorial(n, &amp;result) <span class="Comment">// call C function</span>
    <span class="Comment">// Output result</span>
<span class="Statement">    @</span>Factorial of <span class="Statement">&lt;&lt;print-out</span> n<span class="Statement">&gt;&gt;</span> is <span class="Statement">&lt;&lt;print-out</span> result<span class="Statement">&gt;&gt;</span>
<span class="Statement">%%</span>
<span class="Constant">EOF</span></pre>
<span id=rimstone_copied_378 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_378' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_378, code_378, rimstone_copied_378)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<div class="vsub"><a id="Add C code to RimStone application"></a>Add C code to RimStone application</div>
Next is C file "factorial.c". This is the C function we're calling from RimStone code above:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_381' class=notranslate>
cat &lt;&lt; '<span class="Constant">EOF</span>' &gt; factorial.c
<span class="PreProc">#include </span><span class="Constant">&quot;rim.h&quot;</span>

<span class="Comment">// Compute factorial of f, and store result into res</span>
<span class="Type">void</span> factorial(rim_num f, rim_num *res)
<span class="Statement">{</span>
    *res = <span class="Constant">1</span>;
    rim_num i;
    <span class="Statement">for</span> (i = <span class="Constant">2</span>; i &lt;= f; i++) {
        *res *= i;
<span class="Statement">    }</span>
<span class="Statement">}</span>
<span class="Constant">EOF</span></pre>
<span id=rimstone_copied_381 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_381' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_381, code_381, rimstone_copied_381)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
And an include file "factorial.h" to declare any function(s) we will use in RimStone code:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_384' class=notranslate>
cat &lt;&lt; '<span class="Constant">EOF</span>' &gt; factorial.h
<span class="Type">void</span> factorial(rim_num f, rim_num *res);
<span class="Constant">EOF</span></pre>
<span id=rimstone_copied_384 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_384' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_384, code_384, rimstone_copied_384)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<div class="vsub"><a id="Compile and start the server"></a>Compile and start the server</div>
RimStone will pick up all .rim as well as all .c and .h file and make them into an application:<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_385' class=notranslate>
rim <span class="Special">-q</span></pre>
<span id=rimstone_copied_385 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_385' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_385, code_385, rimstone_copied_385)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Start the server:<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_387' class=notranslate>
mrim fact</pre>
<span id=rimstone_copied_387 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_387' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_387, code_387, rimstone_copied_387)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<div class="vsub"><a id="Test the server from command line"></a>Test the server from command line</div>
You can test this web application from command line (note --service flag!). This is useful because you can develop web applications just from command line:<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_388' class=notranslate>
rim <span class="Special">-r</span> <span class="Special">--req</span><span class="Statement">=</span>/calc-fact/<span class="Identifier">n</span>=<span class="Constant">12</span> <span class="Special">--exec</span> <span class="Special">--service</span></pre>
<span id=rimstone_copied_388 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_388' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_388, code_388, rimstone_copied_388)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
The result is:<br/>
<div class='ncode' style='position:relative;padding-right:16px;'>
<pre id='code_377' class=notranslate>
Content-Type: text/html;charset=utf-8
Cache-Control: max-age=0, no-cache
Pragma: no-cache
Status: 200 OK

Factorial of 12 is 479001600</pre>
<span id=rimstone_copied_377 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_377' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_377, code_377, rimstone_copied_377)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
This is the exact data that would be sent to an actual web client. <br/>
<div class="vsub"><a id="Test the server with web browser"></a>Test the server with web browser</div>
Let's test on an actual web server. In this case we'll use Nginx. Also, we'll do it locally on your computer, since not everyone has a server on the web.<br/>
<br/>
First, edit Nginx config file, which for Ubuntu/Debian is at:<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_389' class=notranslate>
/etc/nginx/sites-enabled/default</pre>
<span id=rimstone_copied_389 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_389' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_389, code_389, rimstone_copied_389)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
and on Fedora/RedHat is at:<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_390' class=notranslate>
/etc/nginx/nginx.conf</pre>
<span id=rimstone_copied_390 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_390' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_390, code_390, rimstone_copied_390)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Note you might have to use "sudo" to edit these files as they're generally not writable by ordinary users.<br/>
<br/>
Find the "server" section, and add this inside it (replace "your-user" with your OS user name):<br/>
<div class='ncode' style='position:relative;padding-right:16px;'>
<pre id='code_380' class=notranslate>
location /fact/ { include /etc/nginx/fastcgi_params; fastcgi_pass  unix:///home/your-user/.rimstone/apps/fact/sock/.sock; }</pre>
<span id=rimstone_copied_380 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_380' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_380, code_380, rimstone_copied_380)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
This will connect Nginx with the "fact" server you started above. Any requests with a URL path that start with "/fact/" will be delivered to your server, and the reply will go in reverse, ultimately being delivered to the client (such as web browser).<br/>
<br/>
Restart Nginx server for this to take effect:<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_391' class=notranslate>
sudo systemctl restart nginx</pre>
<span id=rimstone_copied_391 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_391' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_391, code_391, rimstone_copied_391)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Try it from web browser with this URL:<br/>
<div class='ncode' style='position:relative;padding-right:16px;'>
<pre id='code_383' class=notranslate>
http://127.0.0.1/fact/calc-fact/n=8</pre>
<span id=rimstone_copied_383 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_383' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_383, code_383, rimstone_copied_383)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
If your Nginx runs on another port, specify it, for instance if it runs on port 81, use "127.0.0.1:81" instead.<br/>
<br/>
The result is:<br/>
<div class='ncode' style='position:relative;padding-right:16px;'>
<pre id='code_386' class=notranslate>
Factorial of 8 is 40320</pre>
<span id=rimstone_copied_386 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_386' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_386, code_386, rimstone_copied_386)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Of course, if you have a server on the web, just substitute "127.0.0.1" for your server's web address.<br/>
<a id='article-what-if-toolkit-library-missing.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:left;background-color:white;'><a href='https://rimstone-lang.com' style='border-bottom:0px'><img src='https://rimstone-lang.com/rimstone.png' style='width:180px;height:auto'/></a></div><div class='vhub' style='margin-top:10px;'>What if toolkit library is missing?</div><hr/><br/>
You can choose to not install any toolkit libraries when you setup RimStone (see <a href='/install-rimstone.html'>install-rimstone</a>). So what happens when at some point you write code that requires one of those libraries?<br/>
<br/>
The answer is simple: RimStone will tell you that the library is missing and even show you the installation instructions to install it!<br/>
<br/>
Here's an example of what that looks like in practicality.<br/>
<br/>
Suppose you have a service that fetches Google web page (like in this <a href='/article-fetch-web-page.html'>article</a>):<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_393' class=notranslate>
cat &lt;&lt; '<span class="Constant">EOF</span>' &gt; fetch.rim
<span class="Statement">begin-handler</span> /fetch<span class="Identifier"> public</span>
<span class="Statement">    call-web</span> <span class="Constant">&quot;<a href="https://google.com">https://google.com</a>&quot;</span><span class="Type"> response</span> text<span class="Type"> response-headers</span> head
<span class="Statement">    print-out</span> head<span class="Identifier"> new-line</span>
<span class="Statement">    print-out</span> text<span class="Identifier"> new-line</span>
<span class="Statement">end-handler</span>
<span class="Constant">EOF</span></pre>
<span id=rimstone_copied_393 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_393' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_393, code_393, rimstone_copied_393)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Now, since you didn't install the toolkit libraries, you may not have the "libcurl" library, which is a standard library used for things like fetching web pages. If you try to make your application:<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_394' class=notranslate>
rim <span class="Special">-k</span> get-page <span class="Special">-q</span></pre>
<span id=rimstone_copied_394 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_394' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_394, code_394, rimstone_copied_394)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
You will get:<br/>
<div class='ncode' style='position:relative;padding-right:16px;'>
<pre id='code_392' class=notranslate>
RimStone: Required library [libcurl4-openssl-dev] is not installed. You can install it from command line with:
RimStone: sudo apt -y install  libcurl4-openssl-dev
RimStone: Please install it and try again, reading file [fetch.rim], line [5].
There are errors in making your application (complete log at /home/user/.rimstone/apps/web/.bld/.make.output).</pre>
<span id=rimstone_copied_392 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_392' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_392, code_392, rimstone_copied_392)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
So, like I mentioned above, you will get a clear message as to what the problem is, and even how to remedy it, so if you do as suggested (this is for Ubuntu, the exact name of the library may be different for you):<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_396' class=notranslate>
sudo apt <span class="Special">-y</span> install  libcurl4-openssl-dev</pre>
<span id=rimstone_copied_396 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_396' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_396, code_396, rimstone_copied_396)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Now you can try again:<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_397' class=notranslate>
rim <span class="Special">-k</span> get-page <span class="Special">-q</span></pre>
<span id=rimstone_copied_397 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_397' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_397, code_397, rimstone_copied_397)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
RimStone will detect that a new library was installed, and it will:<br/>
<ul><li>Recompile RimStone itself. This is because RimStone operates as a high-performance system and always uses LTO (Link Time Optimizations), which it applies not just to your code, but to itself as well!<br/>
</li><li>After that, it will make your application.</li></ul>
So, here's what you might see:<br/>
<div class='ncode' style='position:relative;padding-right:16px;'>
<pre id='code_395' class=notranslate>
Recompiling RimStone objects due to change in installed libraries; this happens only when libraries used by RimStone are installed or removed. Please wait for it to complete.
Cleaning up RimStone for build.
..............................................................Built RimStone binaries (devel)
..............................................................Built RimStone binaries (release)
Built RimStone binaries (devel)
Creating RimStone directories (devel)
Copying RimStone binaries (devel)
Built RimStone binaries (release)
Creating RimStone directories (release)
Copying RimStone binaries (release)
RimStone objects recompiled, continuing.</pre>
<span id=rimstone_copied_395 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_395' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_395, code_395, rimstone_copied_395)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
And voila, your application is now ready, just run it:<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_398' class=notranslate>
rim <span class="Special">-r</span> <span class="Special">--req</span><span class="Statement">=</span><span class="Statement">&quot;</span><span class="Constant">/fetch</span><span class="Statement">&quot;</span> <span class="Special">--exec</span></pre>
<span id=rimstone_copied_398 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_398' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_398, code_398, rimstone_copied_398)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
You will see the source code for Google web page.<br/>
<br/>
Regardless of which exact library (or libraries) you're missing, the process described above is the same. RimStone will guide you through it until done!<br/>
<a id='article-what-is-rimstone.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:left;background-color:white;'><a href='https://rimstone-lang.com' style='border-bottom:0px'><img src='https://rimstone-lang.com/rimstone.png' style='width:180px;height:auto'/></a></div><div class='vhub' style='margin-top:10px;'>Introduction to RimStone</div><hr/><br/>
RimStone is a new programming language and framework for developing web services and web applications. It is: <br/>
<ul><li>declarative language designed for simplicity,<br/>
</li><li>memory-safe,<br/>
</li><li>functional statically-typed,<br/>
</li><li>high-performance compiled language, designed to create fast and small native executables without interpreters or p-code, <br/>
</li><li>built on top of industry-standard Open Source libraries, such as SSL, Curl, MariaDB and others, in addition to native RimStone's, <br/>
</li><li>extensible with any standard libraries,<br/>
</li><li>very simple to work with by design to reduce comlexity and improve performance.</li></ul>
RimStone is at <a href='https://rimstone-lang.com/'>https://rimstone-lang.com/</a>.<br/>
<a id='article-what-is-web-service.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:left;background-color:white;'><a href='https://rimstone-lang.com' style='border-bottom:0px'><img src='https://rimstone-lang.com/rimstone.png' style='width:180px;height:auto'/></a></div><div class='vhub' style='margin-top:10px;'>What is web service</div><hr/><br/>
Web service is code that responds to a request and provides a reply over HTTP protocol. It doesn't need to work over the web, despite its name. You can run a web service locally on a server or on a local network. You can even run a web service from command line. In fact, that's an easy way to test them.<br/>
<br/>
The input comes from an HTTP request - this means via URL parameters plus (optional) request body. <br/>
<br/>
The parameters could be in URL's path (such as "/a=b/c=d/...") or in its query string (such as "?a=b&amp;c=d...") or both - this data is typically limited in size to 2KB. Additional parameters could be appended to the request body - this is for instance how files are uploaded in an HTML form. &nbsp; <br/>
<br/>
Request body itself can be any data of any size really - web services typically have an adjustable size limit for this data just to avoid mistakenly (or maliciously) huge ones. A request body could contain for example a JSON document, or some other kind of data.<br/>
<br/>
The output of web service can be HTML code, JSON, XML, an image such as JPG or just about anything really. It's up to the caller of web service to interpret it. One such caller is web browser, another one could be API from an application etc.<br/>
<br/>
What's the difference between a web application and a web service? Well, technically a web application should be a collection of web services, which are typically more basic service providers. That's why web services are often used as endpoints for remote APIs. They generally have a well defined input and output and are not too big. They serve a specialized purpose most of the time. <br/>
<a id='asinh.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:left;background-color:white;'><a href='https://rimstone-lang.com' style='border-bottom:0px'><img src='https://rimstone-lang.com/rimstone.png' style='width:180px;height:auto'/></a></div><div class='vhub' style='margin-top:10px;'>Asinh</div><hr/><span style="font-weight:bold;">Purpose</span>: Arc hyperbolic sine function.<br/>
<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_401' class=notranslate>
asinh( &lt;var&gt; )</pre>
<span id=rimstone_copied_401 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_401' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_401, code_401, rimstone_copied_401)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
asinh returns arc hyperbolic sine of &lt;var&gt;, such that result's hyperbolic sine is &lt;var&gt; (see <a href='/sinh.html'>sinh</a>). &lt;var&gt; is a number or a double and the result is a double.<br/>
<div class="vsub"><a id="Examples"></a>Examples</div>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_402' class=notranslate>
<span class="Statement">set-double</span> d = asinh(<span class="Constant">1</span>) + <span class="Constant">1</span></pre>
<span id=rimstone_copied_402 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_402' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_402, code_402, rimstone_copied_402)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<div class="vsub"><a id="See also"></a>See also</div>
 <a name='Math functions'></a><span style="font-weight:bold;">Math functions</span><br/>
<a href='/abd.html'>abd</a> &nbsp;<br/>
<a href='/abn.html'>abn</a> &nbsp;<br/>
<a href='/acos.html'>acos</a> &nbsp;<br/>
<a href='/acosh.html'>acosh</a> &nbsp;<br/>
<a href='/asin.html'>asin</a> &nbsp;<br/>
<a href='/asinh.html'>asinh</a> &nbsp;<br/>
<a href='/atan.html'>atan</a> &nbsp;<br/>
<a href='/atan2.html'>atan2</a> &nbsp;<br/>
<a href='/atanh.html'>atanh</a> &nbsp;<br/>
<a href='/cbrt.html'>cbrt</a> &nbsp;<br/>
<a href='/ceil.html'>ceil</a> &nbsp;<br/>
<a href='/copysign.html'>copysign</a> &nbsp;<br/>
<a href='/cos.html'>cos</a> &nbsp;<br/>
<a href='/cosh.html'>cosh</a> &nbsp;<br/>
<a href='/dbl.html'>dbl</a> &nbsp;<br/>
<a href='/erf.html'>erf</a> &nbsp;<br/>
<a href='/erfc.html'>erfc</a> &nbsp;<br/>
<a href='/exp.html'>exp</a> &nbsp;<br/>
<a href='/exp2.html'>exp2</a> &nbsp;<br/>
<a href='/floor.html'>floor</a> &nbsp;<br/>
<a href='/fmod.html'>fmod</a> &nbsp;<br/>
<a href='/hypot.html'>hypot</a> &nbsp;<br/>
<a href='/isinf.html'>isinf</a> &nbsp;<br/>
<a href='/isnan.html'>isnan</a> &nbsp;<br/>
<a href='/ldexp.html'>ldexp</a> &nbsp;<br/>
<a href='/lgamma.html'>lgamma</a> &nbsp;<br/>
<a href='/log.html'>log</a> &nbsp;<br/>
<a href='/log10.html'>log10</a> &nbsp;<br/>
<a href='/log2.html'>log2</a> &nbsp;<br/>
<a href='/math-functions.html'>math-functions</a> &nbsp;<br/>
<a href='/nextafter.html'>nextafter</a> &nbsp;<br/>
<a href='/num.html'>num</a> &nbsp;<br/>
<a href='/pow.html'>pow</a> &nbsp;<br/>
<a href='/round.html'>round</a> &nbsp;<br/>
<a href='/sin.html'>sin</a> &nbsp;<br/>
<a href='/sinh.html'>sinh</a> &nbsp;<br/>
<a href='/sqrt.html'>sqrt</a> &nbsp;<br/>
<a href='/tan.html'>tan</a> &nbsp;<br/>
<a href='/tanh.html'>tanh</a> &nbsp;<br/>
<a href='/trunc.html'>trunc</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='/documentation.html'>documentation</a><br/>
<a id='asin.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:left;background-color:white;'><a href='https://rimstone-lang.com' style='border-bottom:0px'><img src='https://rimstone-lang.com/rimstone.png' style='width:180px;height:auto'/></a></div><div class='vhub' style='margin-top:10px;'>Asin</div><hr/><span style="font-weight:bold;">Purpose</span>: Arc sine function.<br/>
<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_399' class=notranslate>
asin( &lt;var&gt; )</pre>
<span id=rimstone_copied_399 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_399' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_399, code_399, rimstone_copied_399)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
asin returns arc sine of &lt;var&gt;, such that result's sine is &lt;var&gt; (see <a href='/sin.html'>sin</a>). &lt;var&gt; is a number or a double and the result is a double.<br/>
<div class="vsub"><a id="Examples"></a>Examples</div>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_400' class=notranslate>
<span class="Statement">set-double</span> d = asin(<span class="Constant">1</span>) + <span class="Constant">1</span></pre>
<span id=rimstone_copied_400 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_400' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_400, code_400, rimstone_copied_400)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<div class="vsub"><a id="See also"></a>See also</div>
 <a name='Math functions'></a><span style="font-weight:bold;">Math functions</span><br/>
<a href='/abd.html'>abd</a> &nbsp;<br/>
<a href='/abn.html'>abn</a> &nbsp;<br/>
<a href='/acos.html'>acos</a> &nbsp;<br/>
<a href='/acosh.html'>acosh</a> &nbsp;<br/>
<a href='/asin.html'>asin</a> &nbsp;<br/>
<a href='/asinh.html'>asinh</a> &nbsp;<br/>
<a href='/atan.html'>atan</a> &nbsp;<br/>
<a href='/atan2.html'>atan2</a> &nbsp;<br/>
<a href='/atanh.html'>atanh</a> &nbsp;<br/>
<a href='/cbrt.html'>cbrt</a> &nbsp;<br/>
<a href='/ceil.html'>ceil</a> &nbsp;<br/>
<a href='/copysign.html'>copysign</a> &nbsp;<br/>
<a href='/cos.html'>cos</a> &nbsp;<br/>
<a href='/cosh.html'>cosh</a> &nbsp;<br/>
<a href='/dbl.html'>dbl</a> &nbsp;<br/>
<a href='/erf.html'>erf</a> &nbsp;<br/>
<a href='/erfc.html'>erfc</a> &nbsp;<br/>
<a href='/exp.html'>exp</a> &nbsp;<br/>
<a href='/exp2.html'>exp2</a> &nbsp;<br/>
<a href='/floor.html'>floor</a> &nbsp;<br/>
<a href='/fmod.html'>fmod</a> &nbsp;<br/>
<a href='/hypot.html'>hypot</a> &nbsp;<br/>
<a href='/isinf.html'>isinf</a> &nbsp;<br/>
<a href='/isnan.html'>isnan</a> &nbsp;<br/>
<a href='/ldexp.html'>ldexp</a> &nbsp;<br/>
<a href='/lgamma.html'>lgamma</a> &nbsp;<br/>
<a href='/log.html'>log</a> &nbsp;<br/>
<a href='/log10.html'>log10</a> &nbsp;<br/>
<a href='/log2.html'>log2</a> &nbsp;<br/>
<a href='/math-functions.html'>math-functions</a> &nbsp;<br/>
<a href='/nextafter.html'>nextafter</a> &nbsp;<br/>
<a href='/num.html'>num</a> &nbsp;<br/>
<a href='/pow.html'>pow</a> &nbsp;<br/>
<a href='/round.html'>round</a> &nbsp;<br/>
<a href='/sin.html'>sin</a> &nbsp;<br/>
<a href='/sinh.html'>sinh</a> &nbsp;<br/>
<a href='/sqrt.html'>sqrt</a> &nbsp;<br/>
<a href='/tan.html'>tan</a> &nbsp;<br/>
<a href='/tanh.html'>tanh</a> &nbsp;<br/>
<a href='/trunc.html'>trunc</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='/documentation.html'>documentation</a><br/>
<a id='atan2.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:left;background-color:white;'><a href='https://rimstone-lang.com' style='border-bottom:0px'><img src='https://rimstone-lang.com/rimstone.png' style='width:180px;height:auto'/></a></div><div class='vhub' style='margin-top:10px;'>Atan2</div><hr/><span style="font-weight:bold;">Purpose</span>: Arc tangent of two variables.<br/>
<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_404' class=notranslate>
atan2( &lt;var1&gt;, &lt;var2&gt; )</pre>
<span id=rimstone_copied_404 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_404' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_404, code_404, rimstone_copied_404)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
atan2 returns the principal value of the arc tangent of &lt;var1&gt;/&lt;var2&gt;, and the &nbsp;signs of the two arguments are used to determine the quadrant of the result (which is betwen -pi and pi). &lt;var1&gt; and &lt;var2&gt; are a number or a double and the result is a double.<br/>
<div class="vsub"><a id="Examples"></a>Examples</div>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_405' class=notranslate>
<span class="Statement">set-double</span> d = atan2(<span class="Constant">0</span><span class="Constant">.5</span>, -<span class="Constant">0</span><span class="Constant">.5</span>) + <span class="Constant">1</span></pre>
<span id=rimstone_copied_405 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_405' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_405, code_405, rimstone_copied_405)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<div class="vsub"><a id="See also"></a>See also</div>
 <a name='Math functions'></a><span style="font-weight:bold;">Math functions</span><br/>
<a href='/abd.html'>abd</a> &nbsp;<br/>
<a href='/abn.html'>abn</a> &nbsp;<br/>
<a href='/acos.html'>acos</a> &nbsp;<br/>
<a href='/acosh.html'>acosh</a> &nbsp;<br/>
<a href='/asin.html'>asin</a> &nbsp;<br/>
<a href='/asinh.html'>asinh</a> &nbsp;<br/>
<a href='/atan.html'>atan</a> &nbsp;<br/>
<a href='/atan2.html'>atan2</a> &nbsp;<br/>
<a href='/atanh.html'>atanh</a> &nbsp;<br/>
<a href='/cbrt.html'>cbrt</a> &nbsp;<br/>
<a href='/ceil.html'>ceil</a> &nbsp;<br/>
<a href='/copysign.html'>copysign</a> &nbsp;<br/>
<a href='/cos.html'>cos</a> &nbsp;<br/>
<a href='/cosh.html'>cosh</a> &nbsp;<br/>
<a href='/dbl.html'>dbl</a> &nbsp;<br/>
<a href='/erf.html'>erf</a> &nbsp;<br/>
<a href='/erfc.html'>erfc</a> &nbsp;<br/>
<a href='/exp.html'>exp</a> &nbsp;<br/>
<a href='/exp2.html'>exp2</a> &nbsp;<br/>
<a href='/floor.html'>floor</a> &nbsp;<br/>
<a href='/fmod.html'>fmod</a> &nbsp;<br/>
<a href='/hypot.html'>hypot</a> &nbsp;<br/>
<a href='/isinf.html'>isinf</a> &nbsp;<br/>
<a href='/isnan.html'>isnan</a> &nbsp;<br/>
<a href='/ldexp.html'>ldexp</a> &nbsp;<br/>
<a href='/lgamma.html'>lgamma</a> &nbsp;<br/>
<a href='/log.html'>log</a> &nbsp;<br/>
<a href='/log10.html'>log10</a> &nbsp;<br/>
<a href='/log2.html'>log2</a> &nbsp;<br/>
<a href='/math-functions.html'>math-functions</a> &nbsp;<br/>
<a href='/nextafter.html'>nextafter</a> &nbsp;<br/>
<a href='/num.html'>num</a> &nbsp;<br/>
<a href='/pow.html'>pow</a> &nbsp;<br/>
<a href='/round.html'>round</a> &nbsp;<br/>
<a href='/sin.html'>sin</a> &nbsp;<br/>
<a href='/sinh.html'>sinh</a> &nbsp;<br/>
<a href='/sqrt.html'>sqrt</a> &nbsp;<br/>
<a href='/tan.html'>tan</a> &nbsp;<br/>
<a href='/tanh.html'>tanh</a> &nbsp;<br/>
<a href='/trunc.html'>trunc</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='/documentation.html'>documentation</a><br/>
<a id='atanh.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:left;background-color:white;'><a href='https://rimstone-lang.com' style='border-bottom:0px'><img src='https://rimstone-lang.com/rimstone.png' style='width:180px;height:auto'/></a></div><div class='vhub' style='margin-top:10px;'>Atanh</div><hr/><span style="font-weight:bold;">Purpose</span>: Arc hyperbolic tangent function.<br/>
<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_407' class=notranslate>
atanh( &lt;var&gt; )</pre>
<span id=rimstone_copied_407 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_407' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_407, code_407, rimstone_copied_407)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
atanh returns arc hyperbolic tangent of &lt;var&gt;, such that result's hyperbolic tangent is &lt;var&gt; (see <a href='/tanh.html'>tanh</a>). &lt;var&gt; is a number or a double and the result is a double.<br/>
<div class="vsub"><a id="Examples"></a>Examples</div>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_408' class=notranslate>
<span class="Statement">set-double</span> d = atanh(<span class="Constant">1</span>) + <span class="Constant">1</span></pre>
<span id=rimstone_copied_408 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_408' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_408, code_408, rimstone_copied_408)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<div class="vsub"><a id="See also"></a>See also</div>
 <a name='Math functions'></a><span style="font-weight:bold;">Math functions</span><br/>
<a href='/abd.html'>abd</a> &nbsp;<br/>
<a href='/abn.html'>abn</a> &nbsp;<br/>
<a href='/acos.html'>acos</a> &nbsp;<br/>
<a href='/acosh.html'>acosh</a> &nbsp;<br/>
<a href='/asin.html'>asin</a> &nbsp;<br/>
<a href='/asinh.html'>asinh</a> &nbsp;<br/>
<a href='/atan.html'>atan</a> &nbsp;<br/>
<a href='/atan2.html'>atan2</a> &nbsp;<br/>
<a href='/atanh.html'>atanh</a> &nbsp;<br/>
<a href='/cbrt.html'>cbrt</a> &nbsp;<br/>
<a href='/ceil.html'>ceil</a> &nbsp;<br/>
<a href='/copysign.html'>copysign</a> &nbsp;<br/>
<a href='/cos.html'>cos</a> &nbsp;<br/>
<a href='/cosh.html'>cosh</a> &nbsp;<br/>
<a href='/dbl.html'>dbl</a> &nbsp;<br/>
<a href='/erf.html'>erf</a> &nbsp;<br/>
<a href='/erfc.html'>erfc</a> &nbsp;<br/>
<a href='/exp.html'>exp</a> &nbsp;<br/>
<a href='/exp2.html'>exp2</a> &nbsp;<br/>
<a href='/floor.html'>floor</a> &nbsp;<br/>
<a href='/fmod.html'>fmod</a> &nbsp;<br/>
<a href='/hypot.html'>hypot</a> &nbsp;<br/>
<a href='/isinf.html'>isinf</a> &nbsp;<br/>
<a href='/isnan.html'>isnan</a> &nbsp;<br/>
<a href='/ldexp.html'>ldexp</a> &nbsp;<br/>
<a href='/lgamma.html'>lgamma</a> &nbsp;<br/>
<a href='/log.html'>log</a> &nbsp;<br/>
<a href='/log10.html'>log10</a> &nbsp;<br/>
<a href='/log2.html'>log2</a> &nbsp;<br/>
<a href='/math-functions.html'>math-functions</a> &nbsp;<br/>
<a href='/nextafter.html'>nextafter</a> &nbsp;<br/>
<a href='/num.html'>num</a> &nbsp;<br/>
<a href='/pow.html'>pow</a> &nbsp;<br/>
<a href='/round.html'>round</a> &nbsp;<br/>
<a href='/sin.html'>sin</a> &nbsp;<br/>
<a href='/sinh.html'>sinh</a> &nbsp;<br/>
<a href='/sqrt.html'>sqrt</a> &nbsp;<br/>
<a href='/tan.html'>tan</a> &nbsp;<br/>
<a href='/tanh.html'>tanh</a> &nbsp;<br/>
<a href='/trunc.html'>trunc</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='/documentation.html'>documentation</a><br/>
<a id='atan.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:left;background-color:white;'><a href='https://rimstone-lang.com' style='border-bottom:0px'><img src='https://rimstone-lang.com/rimstone.png' style='width:180px;height:auto'/></a></div><div class='vhub' style='margin-top:10px;'>Atan</div><hr/><span style="font-weight:bold;">Purpose</span>: Arc tangent function.<br/>
<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_403' class=notranslate>
atan( &lt;var&gt; )</pre>
<span id=rimstone_copied_403 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_403' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_403, code_403, rimstone_copied_403)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
atan returns arc tangent of &lt;var&gt;, such that result's tangent is &lt;var&gt; (see <a href='/tan.html'>tan</a>). &lt;var&gt; is a number or a double and the result is a double.<br/>
<div class="vsub"><a id="Examples"></a>Examples</div>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_406' class=notranslate>
<span class="Statement">set-double</span> d = atan(<span class="Constant">1</span>) + <span class="Constant">1</span></pre>
<span id=rimstone_copied_406 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_406' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_406, code_406, rimstone_copied_406)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<div class="vsub"><a id="See also"></a>See also</div>
 <a name='Math functions'></a><span style="font-weight:bold;">Math functions</span><br/>
<a href='/abd.html'>abd</a> &nbsp;<br/>
<a href='/abn.html'>abn</a> &nbsp;<br/>
<a href='/acos.html'>acos</a> &nbsp;<br/>
<a href='/acosh.html'>acosh</a> &nbsp;<br/>
<a href='/asin.html'>asin</a> &nbsp;<br/>
<a href='/asinh.html'>asinh</a> &nbsp;<br/>
<a href='/atan.html'>atan</a> &nbsp;<br/>
<a href='/atan2.html'>atan2</a> &nbsp;<br/>
<a href='/atanh.html'>atanh</a> &nbsp;<br/>
<a href='/cbrt.html'>cbrt</a> &nbsp;<br/>
<a href='/ceil.html'>ceil</a> &nbsp;<br/>
<a href='/copysign.html'>copysign</a> &nbsp;<br/>
<a href='/cos.html'>cos</a> &nbsp;<br/>
<a href='/cosh.html'>cosh</a> &nbsp;<br/>
<a href='/dbl.html'>dbl</a> &nbsp;<br/>
<a href='/erf.html'>erf</a> &nbsp;<br/>
<a href='/erfc.html'>erfc</a> &nbsp;<br/>
<a href='/exp.html'>exp</a> &nbsp;<br/>
<a href='/exp2.html'>exp2</a> &nbsp;<br/>
<a href='/floor.html'>floor</a> &nbsp;<br/>
<a href='/fmod.html'>fmod</a> &nbsp;<br/>
<a href='/hypot.html'>hypot</a> &nbsp;<br/>
<a href='/isinf.html'>isinf</a> &nbsp;<br/>
<a href='/isnan.html'>isnan</a> &nbsp;<br/>
<a href='/ldexp.html'>ldexp</a> &nbsp;<br/>
<a href='/lgamma.html'>lgamma</a> &nbsp;<br/>
<a href='/log.html'>log</a> &nbsp;<br/>
<a href='/log10.html'>log10</a> &nbsp;<br/>
<a href='/log2.html'>log2</a> &nbsp;<br/>
<a href='/math-functions.html'>math-functions</a> &nbsp;<br/>
<a href='/nextafter.html'>nextafter</a> &nbsp;<br/>
<a href='/num.html'>num</a> &nbsp;<br/>
<a href='/pow.html'>pow</a> &nbsp;<br/>
<a href='/round.html'>round</a> &nbsp;<br/>
<a href='/sin.html'>sin</a> &nbsp;<br/>
<a href='/sinh.html'>sinh</a> &nbsp;<br/>
<a href='/sqrt.html'>sqrt</a> &nbsp;<br/>
<a href='/tan.html'>tan</a> &nbsp;<br/>
<a href='/tanh.html'>tanh</a> &nbsp;<br/>
<a href='/trunc.html'>trunc</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='/documentation.html'>documentation</a><br/>
<a id='before-handler.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:left;background-color:white;'><a href='https://rimstone-lang.com' style='border-bottom:0px'><img src='https://rimstone-lang.com/rimstone.png' style='width:180px;height:auto'/></a></div><div class='vhub' style='margin-top:10px;'>Before handler</div><hr/><span style="font-weight:bold;">Purpose</span>: Execute your code before a request is handled.<br/>
<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_409' class=notranslate>
<span class="Statement">before-handler</span>
<span class="Statement">.</span>..
<span class="Statement">end-before-handler</span></pre>
<span id=rimstone_copied_409 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_409' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_409, code_409, rimstone_copied_409)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Every RimStone request goes through a request dispatcher (see <a href='/request.html'>request</a>()), which is auto-generated. In order to specify your code to execute before a request is handled, create source file "before-handler.rim" and implement code that starts with "before-handler" and ends with "end-before-handler", which will be automatically picked up and compiled with your application. <br/>
<br/>
If no request executes (for example if your application does not handle a given <a href='/request.html'>request</a>), before-handler handler does not execute either. <br/>
<div class="vsub"><a id="Examples"></a>Examples</div>
Here is a simple implementation of before-handler handler that just outputs "Getting Started!!":<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_410' class=notranslate>
<span class="Statement">before-handler</span>
<span class="Statement">    @</span>Getting Started!!
<span class="Statement">end-before-handler</span></pre>
<span id=rimstone_copied_410 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_410' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_410, code_410, rimstone_copied_410)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<div class="vsub"><a id="See also"></a>See also</div>
 <a name='Service processing'></a><span style="font-weight:bold;">Service processing</span><br/>
<a href='/after-handler.html'>after-handler</a> &nbsp;<br/>
<a href='/before-handler.html'>before-handler</a> &nbsp;<br/>
<a href='/begin-handler.html'>begin-handler</a> &nbsp;<br/>
<a href='/call-handler.html'>call-handler</a> &nbsp;<br/>
<a href='/input-output-parameters.html'>input-output-parameters</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='/documentation.html'>documentation</a><br/>
<a id='begin-handler.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:left;background-color:white;'><a href='https://rimstone-lang.com' style='border-bottom:0px'><img src='https://rimstone-lang.com/rimstone.png' style='width:180px;height:auto'/></a></div><div class='vhub' style='margin-top:10px;'>Begin handler</div><hr/><span style="font-weight:bold;">Purpose</span>: Define a request handler.<br/>
<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_411' class=notranslate>
<span class="Statement">begin-handler</span> &lt;request path&gt; [<span class="Identifier"> private</span> |<span class="Identifier"> public</span> ] \
    [<span class="Identifier"> get-param</span> ( &lt;name&gt; [<span class="Identifier"> type</span> &lt;type&gt; ] [<span class="Identifier"> default-value</span> &lt;value&gt; ] )<span class="Identifier"> ,</span> ... ]

    &lt;any code&gt;
<span class="Statement">end-handler</span></pre>
<span id=rimstone_copied_411 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_411' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_411, code_411, rimstone_copied_411)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
begin-handler starts the implementation of a <a href='/request.html'>request</a> handler for &lt;request path&gt; (see <a href='/request.html'>request</a>), which is &lt;any code&gt; up to end-handler. &lt;request path&gt; is not quoted.<br/>
<br/>
A &lt;request path&gt; is a path consisting of any number of path segments. A request path can have alphanumeric characters, hyphens and forward slashes, and can start only with a forward slash.<br/>
<br/>
For example, a &lt;request path&gt; can be "/wine-items" or "/items/wine" etc. In general, it represents the nature of a request, such as an action on an object, a resource path handled by it etc. There is no specific way to interpret a request path, and you can construct it in a way that works for you.<br/>
<br/>
The source ".rim" file name that implements a given begin-handler matches its path and name, fully or partially (see <a href='/request.html'>request</a>). For example, &lt;request path&gt; of "/items/wine" might be implemented in &nbsp;"items/wine.rim" file (meaning in file "wine.rim" in subdirectory "items").<br/>
<br/>
Note that you can also use "%%" instead of either begin-handler or end-handler or both. A &lt;request path&gt; cannot be a C reserved word, such as for instance "main" or "typedef" etc.<br/>
<div class="vsub"><a id="Security of request calls"></a>Security of request calls</div>
If "public" clause is used, then a handler can be called from an outside caller, be it a web browser, some web service, <a href='/service.html'>service</a> call or <a href='/command-line.html'>command-line</a> program. <br/>
<br/>
If "private" clause is used, then a handler cannot be called from an outside caller; it can only be called from another handler by using <a href='/call-handler.html'>call-handler</a> statement. <br/>
<br/>
If neither "public" nor "private" is used, then the default is "private". This default mechanism automatically guards direct execution by outside callers of all handlers not marked "public"; it provides automatic safety guard. <br/>
<br/>
You can change this default behavior with "--public" option in <a href='/rim.html'>rim</a>, in which case the default is "public". This is useful if either all request handlers should be public, or if only a handful fixed ones are private.<br/>
<div class="vsub"><a id="Input parameters"></a>Input parameters</div>
"get-param" clause can be used to specify input parameters; the usage is the same as with standalone <a href='/get-param.html'>get-param</a> statement (see for details). You can obtain some input parameters this way, none, or all of them. If a parameter is conditional, i.e. depending on the value of other parameter(s), you'd likely obtain it inside the handler implementation when such condition is satisfied. This clause can be used for more concise code and to semantically state which parameters should be obtained regardless of any conditions.<br/>
<br/>
For instance:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_412' class=notranslate>
<span class="Statement">begin-handler</span> /my-handler<span class="Identifier"> get-param</span> p1
<span class="Statement">    .</span>..
<span class="Statement">end-handler</span></pre>
<span id=rimstone_copied_412 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_412' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_412, code_412, rimstone_copied_412)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
is the same as:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_413' class=notranslate>
<span class="Statement">begin-handler</span> /my-handler
<span class="Statement">    get-param</span> p1
<span class="Statement">    .</span>..
<span class="Statement">end-handler</span></pre>
<span id=rimstone_copied_413 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_413' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_413, code_413, rimstone_copied_413)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<div class="vsub"><a id="Input and output parameters to request handlers"></a>Input and output parameters to request handlers</div>
Read more at <a href='/input-output-parameters.html'>input-output-parameters</a>.<br/>
<div class="vsub"><a id="Examples"></a>Examples</div>
The following begin-handler is implemented in file "items/wines/red-wine.rim":<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_414' class=notranslate>
<span class="Statement">begin-handler</span>  /items/wines/red-wine<span class="Identifier"> public</span>
<span class="Statement">    @</span>This is a request handler to display a list of red wines!
<span class="Statement">end-handler</span></pre>
<span id=rimstone_copied_414 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_414' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_414, code_414, rimstone_copied_414)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Another way to write this is:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_415' class=notranslate>
<span class="Statement">%%</span>  /items/wines/red-wine<span class="Identifier"> public</span>
<span class="Statement">    @</span>This is a request handler to display a list of red wines!
<span class="Statement">%%</span></pre>
<span id=rimstone_copied_415 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_415' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_415, code_415, rimstone_copied_415)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<div class="vsub"><a id="See also"></a>See also</div>
 <a name='Service processing'></a><span style="font-weight:bold;">Service processing</span><br/>
<a href='/after-handler.html'>after-handler</a> &nbsp;<br/>
<a href='/before-handler.html'>before-handler</a> &nbsp;<br/>
<a href='/begin-handler.html'>begin-handler</a> &nbsp;<br/>
<a href='/call-handler.html'>call-handler</a> &nbsp;<br/>
<a href='/input-output-parameters.html'>input-output-parameters</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='/documentation.html'>documentation</a><br/>
<a id='begin-transaction.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:left;background-color:white;'><a href='https://rimstone-lang.com' style='border-bottom:0px'><img src='https://rimstone-lang.com/rimstone.png' style='width:180px;height:auto'/></a></div><div class='vhub' style='margin-top:10px;'>Begin transaction</div><hr/><span style="font-weight:bold;">Purpose</span>: Begins database transaction.<br/>
<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_416' class=notranslate>
<span class="Statement">begin-transaction</span> [ @&lt;database&gt; ] \
    [<span class="Identifier"> on-error-continue</span> |<span class="Identifier"> on-error-exit</span> ] \
    [<span class="Type"> error</span> &lt;error&gt; ] [<span class="Type"> error-text</span> &lt;error text&gt; ] \
    [<span class="Identifier"> options</span> &lt;options&gt; ]</pre>
<span id=rimstone_copied_416 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_416' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_416, code_416, rimstone_copied_416)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
This statement begins a database transaction. <br/>
<br/>
&lt;options&gt; (in "options" clause) is any additional options to send to database you wish to supply for this functionality.<br/>
<br/>
Once you start a transaction with <a href='/begin-transaction.html'>begin-transaction</a>, you must either commit it with <a href='/commit-transaction.html'>commit-transaction</a> or rollback with <a href='/rollback-transaction.html'>rollback-transaction</a>. If you do neither, your transaction will be rolled back once the <a href='/request.html'>request</a> has completed and your program will stop with an error message. This is because opening a transaction and leaving without committing or a rollback is a bug in your program. &nbsp;<br/>
<br/>
You must use begin-transaction, commit-transaction and rollback-transaction instead of calling this functionality through <a href='/run-query.html'>run-query</a>.<br/>
<div class="vsub"><a id="Database"></a>Database</div>
&lt;database&gt; is specified in "@" clause and is the name of the <a href='/database-config-file.html'>database-config-file</a>. If omitted, your program must use exactly one database (see --db option in <a href='/rim.html'>rim</a>).<br/>
<div class="vsub"><a id="Error handling"></a>Error handling</div>
The error code is available in &lt;error&gt; variable in "error" clause - this code is always "0" if successful. The &lt;error&gt; code may or may not be a number but is always returned as a string value. In case of error, error text is available in "error-text" clause in &lt;error text&gt; string.<br/>
<br/>
"on-error-continue" clause specifies that <a href='/request.html'>request</a> processing will continue in case of an error, whereas "on-error-exit" clause specifies that it will exit. This setting overrides database-level <a href='/db-error.html'>db-error</a> for this specific statement only. If you use "on-error-continue", be sure to check the error code.<br/>
<br/>
Note that if database connection was lost, and could not be reestablished, the request will error out (see <a href='/error-handling.html'>error-handling</a>).<br/>
<div class="vsub"><a id="Examples"></a>Examples</div>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_417' class=notranslate>
<span class="Statement">begin-transaction</span> @mydb
<span class="Statement">run-query</span> @mydb=<span class="Constant">&quot;insert into employee (name, dateOfHire) values ('</span><span class="Special">%s</span><span class="Constant">', now())&quot;</span><span class="Identifier"> input</span> <span class="Constant">&quot;Terry&quot;</span><span class="Identifier"> no-loop</span>
<span class="Statement">commit-transaction</span> @mydb</pre>
<span id=rimstone_copied_417 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_417' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_417, code_417, rimstone_copied_417)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<div class="vsub"><a id="See also"></a>See also</div>
 <a name='Database'></a><span style="font-weight:bold;">Database</span><br/>
<a href='/begin-transaction.html'>begin-transaction</a> &nbsp;<br/>
<a href='/commit-transaction.html'>commit-transaction</a> &nbsp;<br/>
<a href='/current-row.html'>current-row</a> &nbsp;<br/>
<a href='/database-config-file.html'>database-config-file</a> &nbsp;<br/>
<a href='/db-error.html'>db-error</a> &nbsp;<br/>
<a href='/mariadb-database.html'>mariadb-database</a> &nbsp;<br/>
<a href='/postgresql-database.html'>postgresql-database</a> &nbsp;<br/>
<a href='/rollback-transaction.html'>rollback-transaction</a> &nbsp;<br/>
<a href='/run-query.html'>run-query</a> &nbsp;<br/>
<a href='/sqlite-database.html'>sqlite-database</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='/documentation.html'>documentation</a><br/>
<a id='boolean-expressions.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:left;background-color:white;'><a href='https://rimstone-lang.com' style='border-bottom:0px'><img src='https://rimstone-lang.com/rimstone.png' style='width:180px;height:auto'/></a></div><div class='vhub' style='margin-top:10px;'>Boolean expressions</div><hr/>A boolean expression uses operators "!" (not), "&amp;&amp;" (and) and "||" (or), as well as parenthesis (). For example:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_420' class=notranslate>
<span class="Statement">set-bool</span> b1 =<span class="Identifier"> !</span> (b2<span class="Identifier"> &amp;&amp;</span> b3)<span class="Identifier"> ||</span> b4</pre>
<span id=rimstone_copied_420 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_420' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_420, code_420, rimstone_copied_420)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
You can use boolean expressions anywhere a boolean is expected as an input to any statement. <br/>
<br/>
You can use boolean variables as well as constants such as "true" and "false" in boolean expressions.<br/>
<div class="vsub"><a id="Subscription shortcut"></a>Subscription shortcut</div>
You can reference boolean arrays elements (see <a href='/new-array.html'>new-array</a>) by using subscription operator ([]), for instance:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_421' class=notranslate>
<span class="Statement">new-array</span> barr<span class="Identifier"> type</span> boolean
<span class="Statement">write-array</span> barr<span class="Identifier"> key</span> <span class="Constant">0</span><span class="Identifier"> value</span> <span class="Constant">true</span>
<span class="Statement">set-bool</span> bv = !barr[<span class="Constant">0</span>]</pre>
<span id=rimstone_copied_421 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_421' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_421, code_421, rimstone_copied_421)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<div class="vsub"><a id="See also"></a>See also</div>
 <a name='Booleans'></a><span style="font-weight:bold;">Booleans</span><br/>
<a href='/boolean-expressions.html'>boolean-expressions</a> &nbsp;<br/>
<a href='/set-bool.html'>set-bool</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='/documentation.html'>documentation</a><br/>
<a id='break-loop.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:left;background-color:white;'><a href='https://rimstone-lang.com' style='border-bottom:0px'><img src='https://rimstone-lang.com/rimstone.png' style='width:180px;height:auto'/></a></div><div class='vhub' style='margin-top:10px;'>Break loop</div><hr/><span style="font-weight:bold;">Purpose</span>: Exit a loop.<br/>
<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_422' class=notranslate>
<span class="Statement">break-loop</span></pre>
<span id=rimstone_copied_422 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_422' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_422, code_422, rimstone_copied_422)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
break-loop will exit a loop between <a href='/start-loop.html'>start-loop</a> and end-loop, <a href='/run-query.html'>run-query</a> and end-query, or <a href='/read-line.html'>read-line</a> and end-read-line statements. Execution continues right after the end of the loop.<br/>
<div class="vsub"><a id="Examples"></a>Examples</div>
Exit the loop after 300 loops:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_423' class=notranslate>
<span class="Statement">set-number</span> max_loop = <span class="Constant">300</span>
<span class="Statement">start-loop</span><span class="Identifier"> repeat</span> <span class="Constant">1000</span><span class="Type"> use</span> i<span class="Identifier"> start-with</span> <span class="Constant">1</span>
<span class="Statement">    @</span>Completed <span class="Statement">&lt;&lt;print-out</span> i<span class="Statement">&gt;&gt;</span> loops so far
<span class="Statement">    if-true</span> i<span class="Identifier"> equal</span> max_loop
<span class="Statement">        break-loop</span>
<span class="Statement">    end-if</span>
<span class="Statement">end-loop</span></pre>
<span id=rimstone_copied_423 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_423' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_423, code_423, rimstone_copied_423)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<div class="vsub"><a id="See also"></a>See also</div>
 <a name='Program flow'></a><span style="font-weight:bold;">Program flow</span><br/>
<a href='/break-loop.html'>break-loop</a> &nbsp;<br/>
<a href='/call-handler.html'>call-handler</a> &nbsp;<br/>
<a href='/code-blocks.html'>code-blocks</a> &nbsp;<br/>
<a href='/continue-loop.html'>continue-loop</a> &nbsp;<br/>
<a href='/do-once.html'>do-once</a> &nbsp;<br/>
<a href='/exit-handler.html'>exit-handler</a> &nbsp;<br/>
<a href='/if-defined.html'>if-defined</a> &nbsp;<br/>
<a href='/if-true.html'>if-true</a> &nbsp;<br/>
<a href='/quit-process.html'>quit-process</a> &nbsp;<br/>
<a href='/return-handler.html'>return-handler</a> &nbsp;<br/>
<a href='/start-loop.html'>start-loop</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='/documentation.html'>documentation</a><br/>
<a id='call-extended.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:left;background-color:white;'><a href='https://rimstone-lang.com' style='border-bottom:0px'><img src='https://rimstone-lang.com/rimstone.png' style='width:180px;height:auto'/></a></div><div class='vhub' style='margin-top:10px;'>Call extended</div><hr/><span style="font-weight:bold;">Purpose</span>: Call external function or macro (extended mode only).<br/>
<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_424' class=notranslate>
<span class="Statement">call-extended</span> &lt;function&gt; <span class="Constant">&quot;( &quot;</span> [ &amp; ]&lt;variable&gt;  [ , ... ]  <span class="Constant">&quot; )&quot;</span></pre>
<span id=rimstone_copied_424 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_424' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_424, code_424, rimstone_copied_424)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
call-extended calls &lt;function&gt; (which can be a function or macro) with a list of parameter variables. The &lt;function&gt; is defined either in:<br/>
<ul><li>a library with C interop - note that such library can be written in many different languages. Most compiled languages can produce such libraries (such as Rust, C/C++ and others),<br/>
</li><li>a ".c" file residing in the directory that contains application source code - again such a C file can in turn call code from libraries produced by any language that supports C interop (most do).<br/>
</li><li>if a macro, in a ".h" file residing in the directory that contains application source code.</li></ul>
The &lt;function&gt; must be declared via C-style declaration in a ".h" file residing in the application source code directory. You can use "--lflag" and "--cflag" options of <a href='/rim.html'>rim</a> to supply libraries used. In addition, if you need to, you can also have any number of ".c" and ".h" files which will be automatically included in your project. A macro must be defined in ".h" file.<br/>
<br/>
call-extended statement can only be used in extended mode (see <a href='/extended-mode.html'>extended-mode</a>). By default, RimStone code runs in safe mode which does not allow use of call-extended statement. Note that using call-extended statement does not automatically make your application unsafe; rather, extended code can be written in a memory-safe language (such as Rust), or even if written in C it can be made in such a way not to cause out-of-band memory reads and writes. <br/>
<div class="vsub"><a id="C signature, input/output variables, types"></a>C signature, input/output variables, types</div>
Each &lt;variable&gt; can be of C type (or a pointer to C type):<br/>
<ul><li>"rim_num" which is a signed integer 8 bytes in length (int64_t type). This represents RimStone number.<br/>
</li><li>"char *" which is a pointer to an array of characters. This represents RimStone string value.<br/>
</li><li>"bool" which is a boolean variable. This represents RimStone boolean.</li></ul>
A &lt;function&gt; should not return a value. Rather, use a variable passed as a pointer if you wish to pass the function's output back to your RimStone code.<br/>
<br/>
For more on using C in &lt;function&gt;s, see <a href='/Server-API.html'>Server-API</a>.<br/>
<div class="vsub"><a id="Changing current working directory"></a>Changing current working directory</div>
If you change current working directory from your C code (such as with C chmod() function), you must set RimStone internal boolean variable "rim_path_changed" to true.<br/>
<div class="vsub"><a id="Web framework for C programming language"></a>Web framework for C programming language</div>
Note that when you use call-extended, RimStone becomes a <a href='/web-framework-for-C-programming-language.html'>web-framework-for-C-programming-language</a>.<br/>
<div class="vsub"><a id="Examples"></a>Examples</div>
For instance, consider C file "calc.c":<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_425' class=notranslate>
<span class="PreProc">#include </span><span class="Constant">&quot;rim.h&quot;</span>

<span class="Comment">// Compute factorial of f, and store result into res</span>
<span class="Type">void</span> factorial(rim_num f, rim_num *res)
<span class="Statement">{</span>
    *res = <span class="Constant">1</span>;
    rim_num i;
    <span class="Statement">for</span> (i = <span class="Constant">2</span>; i &lt;= f; i++) {
        *res *= i;
<span class="Statement">    }</span>
<span class="Statement">}</span></pre>
<span id=rimstone_copied_425 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_425' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_425, code_425, rimstone_copied_425)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Declare this C function in a header file, for instance "calc.h":<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_426' class=notranslate>
<span class="Type">void</span> factorial(rim_num f, rim_num *res);</pre>
<span id=rimstone_copied_426 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_426' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_426, code_426, rimstone_copied_426)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
You can also have macros in a header file, so for example "calc.h" could be:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_427' class=notranslate>
<span class="Type">void</span> factorial(rim_num f, rim_num *res);

<span class="PreProc">#</span>define<span class="PreProc"> </span>mod10<span class="PreProc">(n, m) m=(n)%</span><span class="Constant">10</span></pre>
<span id=rimstone_copied_427 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_427' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_427, code_427, rimstone_copied_427)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
In this case you have defined a macro that calculates the moduo of 10 and stores a result into another variable.<br/>
<br/>
Use these in your RimStone code with call-extended statement, for instance to use a function "factorial()":<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_428' class=notranslate>
<span class="Statement">extended-mode</span>

<span class="Statement">begin-handler</span> /fact<span class="Identifier"> public</span>
<span class="Statement">    set-number</span> fact
<span class="Statement">    call-extended</span> factorial (<span class="Constant">10</span>, &amp;fact)
<span class="Statement">    print-out</span> fact
<span class="Statement">end-handler</span></pre>
<span id=rimstone_copied_428 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_428' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_428, code_428, rimstone_copied_428)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
In the above example, number "fact" is passed by reference (as a pointer), and it will contain the value of factorial of 10 on return. The result printed out is "3628800".<br/>
<br/>
To use macro "mod10()":<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_429' class=notranslate>
<span class="Statement">extended-mode</span>

<span class="Statement">begin-handler</span> /mod<span class="Identifier"> public</span>
<span class="Statement">    set-number</span> mod
<span class="Statement">    call-extended</span> mod10(<span class="Constant">103</span>, mod)
<span class="Statement">    print-out</span> mod
<span class="Statement">end-handler</span></pre>
<span id=rimstone_copied_429 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_429' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_429, code_429, rimstone_copied_429)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
In this example, you are using a C macro, so number "fact" is assigned a value directly, per C language rules. The result printed out is "3".<br/>
<div class="vsub"><a id="See also"></a>See also</div>
 <a name='C language'></a><span style="font-weight:bold;">C language</span><br/>
<a href='/call-extended.html'>call-extended</a> &nbsp;<br/>
<a href='/extended-mode.html'>extended-mode</a> &nbsp;<br/>
<a href='/web-framework-for-C-programming-language.html'>web-framework-for-C-programming-language</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='/documentation.html'>documentation</a><br/>
<a id='call-handler.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:left;background-color:white;'><a href='https://rimstone-lang.com' style='border-bottom:0px'><img src='https://rimstone-lang.com/rimstone.png' style='width:180px;height:auto'/></a></div><div class='vhub' style='margin-top:10px;'>Call handler</div><hr/><span style="font-weight:bold;">Purpose</span>: Call another handler within the same process.<br/>
<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_431' class=notranslate>
<span class="Statement">call-handler</span> &lt;request path&gt; [<span class="Type"> return-code</span>  &lt;return code&gt; ] \
    [<span class="Identifier"> set-param</span> ( &lt;name&gt; [ = &lt;value&gt; ] )<span class="Identifier"> ,</span> ... ] \
    [<span class="Identifier"> get-param</span> ( &lt;name&gt; [<span class="Identifier"> type</span> &lt;type&gt; ] [<span class="Identifier"> default-value</span> &lt;value&gt; ] )<span class="Identifier"> ,</span> ... ]</pre>
<span id=rimstone_copied_431 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_431' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_431, code_431, rimstone_copied_431)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Calls another handler within the same request in the same process. You can call any handler within the same application. "Calling a handler" means executing it solely within the context of the top handler currently running; no before-handler or after-handler will execute for the called handler.<br/>
<br/>
&lt;request path&gt; is the <a href='/request.html'>request</a> path served by the handler being called. It can be a string variable or a constant.<br/>
<br/>
Use <a href='/set-param.html'>set-param</a> and <a href='/get-param.html'>get-param</a> to pass parameters between the caller and callee handlers.<br/>
<br/>
You can obtain a &lt;return code&gt; from the called handler &lt;request path&gt; by using "return-code" clause. See <a href='/return-handler.html'>return-handler</a> on how to return a code (i.e. a number value) from &lt;request path&gt; handler.<br/>
<br/>
call-handler uses the same high-performance hash table used by a <a href='/request.html'>request</a> to route requests by name; if &lt;request path&gt; is a constant string, then a hash table lookup is performed only once for the life of the process and all subsequent calls use a cached address of the request handler.<br/>
<div class="vsub"><a id="Parameters"></a>Parameters</div>
You can set parameters before call-handler executes using "set-param" clause, which behaves the same way as if those parameters were set just before call-handler; see <a href='/set-param.html'>set-param</a> for more details. You can also get parameters after call-handler executes using "get-param" clause, which behave the same way as if those parameters were to be obtained just after call-handler; see <a href='/get-param.html'>get-param</a> for more details. For example:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_433' class=notranslate>
<span class="Statement">call-handler</span> <span class="Constant">&quot;/handler&quot;</span><span class="Identifier"> set-param</span> inp=<span class="Constant">1</span>, var=<span class="Constant">&quot;some data&quot;</span><span class="Identifier"> get-param</span> out, new_var<span class="Identifier"> type number</span></pre>
<span id=rimstone_copied_433 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_433' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_433, code_433, rimstone_copied_433)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
is the same as:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_435' class=notranslate>
<span class="Statement">set-param</span> inp=<span class="Constant">1</span>, var=<span class="Constant">&quot;some data&quot;</span>
<span class="Statement">call-handler</span> <span class="Constant">&quot;/handler&quot;</span>
<span class="Statement">get-param</span> out, new_var<span class="Identifier"> type number</span></pre>
<span id=rimstone_copied_435 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_435' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_435, code_435, rimstone_copied_435)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<div class="vsub"><a id="Call depth"></a>Call depth</div>
There is a limit on the call depth, including recursion in order to prevent application and system stability issues. See <a href='/get-app.html'>get-app</a> and <a href='/set-app.html'>set-app</a> with "stack-depth" clause for details and on how to change the defaults.<br/>
<div class="vsub"><a id="Examples"></a>Examples</div>
The following example demonstrate calling a call-handler twice, and also using its output inline in the caller. An input parameter is passed to it, and an output obtained:<br/>
<br/>
Copy to file "callsub.rim":<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_436' class=notranslate>
<span class="Statement">%%</span> /callsub<span class="Identifier"> public</span>
    <span class="Comment">//</span>
    <span class="Comment">// First call to call-handler</span>
    <span class="Comment">//</span>
    <span class="Comment">// Set input for call-handler</span>
<span class="Statement">    set-param</span> inp = <span class="Constant">&quot;some string&quot;</span>
<span class="Statement">    ((</span> s
<span class="Statement">    call-handler</span> <span class="Constant">&quot;/sub/service&quot;</span>
<span class="Statement">    ))</span>
    <span class="Comment">// Get output from call-handler</span>
<span class="Statement">    get-param</span> out<span class="Identifier"> type string</span>
<span class="Statement">    @</span><span class="Statement">&lt;&lt;print-out</span> s<span class="Statement">&gt;&gt;</span> with output [<span class="Statement">&lt;&lt;print-out</span> out<span class="Statement">&gt;&gt;</span>]

    <span class="Comment">//</span>
    <span class="Comment">// Second call to call-handler</span>
    <span class="Comment">//</span>
    <span class="Comment">// Set input for call-handler called as inline code</span>
<span class="Statement">    set-param</span> inp = <span class="Constant">&quot;new string&quot;</span>
<span class="Statement">    ((</span> s
<span class="Statement">    @</span>Output: <span class="Statement">&lt;&lt;call-handler</span> <span class="Constant">&quot;/sub/service&quot;</span><span class="Statement">&gt;&gt;</span>
<span class="Statement">    ))</span>
    <span class="Comment">// Get output from call-handler</span>
<span class="Statement">    get-param</span> out<span class="Identifier"> type string</span>
<span class="Statement">    @</span><span class="Statement">&lt;&lt;print-out</span> s<span class="Statement">&gt;&gt;</span> with output [<span class="Statement">&lt;&lt;print-out</span> out<span class="Statement">&gt;&gt;</span>]
<span class="Statement">%%</span></pre>
<span id=rimstone_copied_436 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_436' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_436, code_436, rimstone_copied_436)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
And in "sub/service.rim" file (meaning file "service.rim" in subdirectory "sub"):<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_437' class=notranslate>
<span class="Statement">%%</span> /sub/service<span class="Identifier"> private</span>
<span class="Statement">    @</span>This is sub!
<span class="Statement">    get-param</span> inp
<span class="Statement">    ((</span> out
<span class="Statement">    @</span>got input: <span class="Statement">&lt;&lt;print-out</span> inp<span class="Statement">&gt;&gt;</span>
<span class="Statement">    ))</span>
<span class="Statement">    set-param</span> out = out
<span class="Statement">%%</span></pre>
<span id=rimstone_copied_437 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_437' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_437, code_437, rimstone_copied_437)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Create and build an application:<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_432' class=notranslate>
rim <span class="Special">-k</span> subhandler
rim <span class="Special">-q</span></pre>
<span id=rimstone_copied_432 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_432' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_432, code_432, rimstone_copied_432)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Run it:<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_434' class=notranslate>
rim <span class="Special">-r</span> <span class="Special">--req</span><span class="Statement">=</span><span class="Statement">&quot;</span><span class="Constant">/callsub</span><span class="Statement">&quot;</span> <span class="Special">--exec</span> <span class="Special">--silent-header</span></pre>
<span id=rimstone_copied_434 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_434' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_434, code_434, rimstone_copied_434)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
The output:<br/>
<div class='ncode' style='position:relative;padding-right:16px;'>
<pre id='code_430' class=notranslate>
This is sub! with output [got input: some string]
Output: This is sub! with output [got input: new string]</pre>
<span id=rimstone_copied_430 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_430' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_430, code_430, rimstone_copied_430)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<div class="vsub"><a id="See also"></a>See also</div>
 <a name='Program flow'></a><span style="font-weight:bold;">Program flow</span><br/>
<a href='/break-loop.html'>break-loop</a> &nbsp;<br/>
<a href='/call-handler.html'>call-handler</a> &nbsp;<br/>
<a href='/code-blocks.html'>code-blocks</a> &nbsp;<br/>
<a href='/continue-loop.html'>continue-loop</a> &nbsp;<br/>
<a href='/do-once.html'>do-once</a> &nbsp;<br/>
<a href='/exit-handler.html'>exit-handler</a> &nbsp;<br/>
<a href='/if-defined.html'>if-defined</a> &nbsp;<br/>
<a href='/if-true.html'>if-true</a> &nbsp;<br/>
<a href='/quit-process.html'>quit-process</a> &nbsp;<br/>
<a href='/return-handler.html'>return-handler</a> &nbsp;<br/>
<a href='/start-loop.html'>start-loop</a> &nbsp; <br/>
 <a name='Service processing'></a><span style="font-weight:bold;">Service processing</span><br/>
<a href='/after-handler.html'>after-handler</a> &nbsp;<br/>
<a href='/before-handler.html'>before-handler</a> &nbsp;<br/>
<a href='/begin-handler.html'>begin-handler</a> &nbsp;<br/>
<a href='/call-handler.html'>call-handler</a> &nbsp;<br/>
<a href='/input-output-parameters.html'>input-output-parameters</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='/documentation.html'>documentation</a><br/>
<a id='call-remote.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:left;background-color:white;'><a href='https://rimstone-lang.com' style='border-bottom:0px'><img src='https://rimstone-lang.com/rimstone.png' style='width:180px;height:auto'/></a></div><div class='vhub' style='margin-top:10px;'>Call remote</div><hr/><span style="font-weight:bold;">Purpose</span>: Make a remote service call.<br/>
<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_438' class=notranslate>
<span class="Statement">call-remote</span> &lt;service&gt; [ ,... ]   \
    [<span class="Type"> status</span> &lt;status&gt; ]  \
    [<span class="Type"> started</span> &lt;started&gt; ] \
    [<span class="Type"> finished-okay</span> &lt;finished okay&gt; ]</pre>
<span id=rimstone_copied_438 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_438' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_438, code_438, rimstone_copied_438)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
call-remote will make service call(s) as described in a single &lt;service&gt; or a list of &lt;service&gt;s. Unless only a single &lt;service&gt; is specified, each call will execute in parallel with others (as multiple threads). call-remote finishes when all &lt;service&gt; calls do. Each &lt;service&gt; must have beed created with <a href='/new-remote.html'>new-remote</a>.<br/>
<br/>
A &lt;service&gt; call is made to a remote service. "Remote service" means a process accepting requests that is not the same process executing call-remote; it may be running on the same or a different computer, or it may be a different process started by the very same application. <br/>
<br/>
<span style="font-weight:bold;">- Multiple service calls in parallel</span><br/>
Executing multiple &lt;service&gt; calls in parallel is possible by specifying a list of &lt;service&gt;s separated by a comma.<br/>
<br/>
There is no limit on how many &lt;service&gt;s you can call at the same time; it is limited only by the underlying Operating System resources, such as threads/processes and sockets.<br/>
<br/>
<span style="font-weight:bold;">- Call status</span><br/>
&lt;status&gt; number (in "status" clause) will be RIM_OKAY if all &lt;service&gt; calls have each returned RIM_OKAY; this means all have started and all have finished with a valid message from the service; or RIM_ERR_FAILED if at least one did not (for example if the service could not be contacted, if there was a network error etc.); or RIM_ERR_MEMORY if out of memory; or RIM_ERR_TOO_MANY if there is too many calls (more than 1,000,000). <br/>
<br/>
Note that RIM_OKAY does not mean that the reply is considered a success in any logical sense; only that the request was made and a reply was received according to the service protocol. <br/>
<br/>
<span style="font-weight:bold;">- Request(s) status</span><br/>
Note that the actual application status for each &lt;service&gt;, as well as data returned and any application errors can be obtained via "exit-status", "data" and "error" clauses of <a href='/read-remote.html'>read-remote</a> statement, respectively.<br/>
<br/>
<span style="font-weight:bold;">- Request(s) duration</span><br/>
call-remote will wait for all &lt;service&gt; requests to finish. For that reason, it is a good idea to specify "timeout" clause in <a href='/new-remote.html'>new-remote</a> for each &lt;service&gt; used, in order to limit the time you would wait. Use <a href='/read-remote.html'>read-remote</a> to detect a timeout, in which case "exit-status" clause would produce RIM_CLI_ERR_TIMEOUT.<br/>
<br/>
<span style="font-weight:bold;">- How many calls started and finished</span><br/>
&lt;started&gt; (in "started" clause) will be the number of service calls that have started. &lt;finished okay&gt; (in "finished-okay" clause) is the number of calls that have finished with return value of RIM_OKAY as described above. By using &lt;status&gt;, &lt;started&gt; and &lt;finished okay&gt; you may surmise whether the results of call-remote meet your expectations.<br/>
<br/>
<span style="font-weight:bold;">- Performance, security</span><br/>
call-remote is faster than <a href='/call-web.html'>call-web</a> because it does not use HTTP protocol; rather it only uses small and binary protocol, which is extremenly fast, especially when using Unix sockets on the same machine (see <a href='/new-remote.html'>new-remote</a>). Note that the binary protocol does not have any inherent security built-in; that is part of the reason why it is fast. As such, it is very well suited for remote service calls on the same machine or between networked machines on a secure network. <br/>
<div class="vsub"><a id="Examples"></a>Examples</div>
This example will connect to local Unix socket file "$HOME/.rimstone/app_name/sock/sock" (a RimStone application named "app_name"), and make a request named "server" (i.e. it will be processed by source code file "server.rim") with URL path of "/op=add/key=2" (meaning with input parameters "op=add" and "key=2"). Then, service reply is read and displayed.<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_439' class=notranslate>
<span class="Statement">get-app</span><span class="Identifier"> user-directory</span><span class="Type"> to</span> user_dir
<span class="Comment">// Create single call</span>
<span class="Statement">new-remote</span> srv<span class="Identifier"> location</span> user_dir+<span class="Constant">&quot;/app_name/sock/sock&quot;</span> \
   <span class="Identifier"> method</span> <span class="Constant">&quot;GET&quot;</span><span class="Identifier"> app-path</span> <span class="Constant">&quot;/app_name&quot;</span><span class="Identifier"> request-path</span> <span class="Constant">&quot;/server&quot;</span> \
   <span class="Identifier"> url-params</span> <span class="Constant">&quot;/op=add/key=2&quot;</span>
<span class="Comment">// Call single service call</span>
<span class="Statement">call-remote</span> srv<span class="Type"> finished-okay</span> sfok
<span class="Comment">// Get results of a remote service call</span>
<span class="Statement">read-remote</span> srv<span class="Identifier"> data</span> rdata
<span class="Comment">// Display results</span>
<span class="Statement">@</span>Data from service is <span class="Statement">&lt;&lt;print-out</span> rdata<span class="Statement">&gt;&gt;</span></pre>
<span id=rimstone_copied_439 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_439' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_439, code_439, rimstone_copied_439)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
If you are connecting to a service via TCP (and not with a Unix socket like in the example above), the "location" clause in <a href='/new-remote.html'>new-remote</a> might be:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_440' class=notranslate>
<span class="Statement">new-remote</span> srv<span class="Identifier"> location</span> <span class="Constant">&quot;192.168.0.28:2400&quot;</span> \
   <span class="Identifier"> method</span> <span class="Constant">&quot;GET&quot;</span><span class="Identifier"> app-path</span> <span class="Constant">&quot;/app_name&quot;</span><span class="Identifier"> request-path</span> <span class="Constant">&quot;/server&quot;</span> \
   <span class="Identifier"> url-params</span> <span class="Constant">&quot;/op=add/key=2&quot;</span></pre>
<span id=rimstone_copied_440 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_440' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_440, code_440, rimstone_copied_440)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
In this case, you are connecting to another service (running on IP "192.168.0.28") on port 2400. See <a href='/mrim.html'>mrim</a> on how to start a service that listens on a TCP port. You would likely use TCP connectivity only if a service you're connecting to is on a different computer.<br/>
<br/>
See also <a href='/new-remote.html'>new-remote</a>.<br/>
<div class="vsub"><a id="See also"></a>See also</div>
 <a name='Distributed computing'></a><span style="font-weight:bold;">Distributed computing</span><br/>
<a href='/call-remote.html'>call-remote</a> &nbsp;<br/>
<a href='/new-remote.html'>new-remote</a> &nbsp;<br/>
<a href='/read-remote.html'>read-remote</a> &nbsp;<br/>
<a href='/run-remote.html'>run-remote</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='/documentation.html'>documentation</a><br/>
<a id='call-web.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:left;background-color:white;'><a href='https://rimstone-lang.com' style='border-bottom:0px'><img src='https://rimstone-lang.com/rimstone.png' style='width:180px;height:auto'/></a></div><div class='vhub' style='margin-top:10px;'>Call web</div><hr/><span style="font-weight:bold;">Purpose</span>: Get content of URL resource (call a web address).<br/>
<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_443' class=notranslate>
<span class="Statement">call-web</span> &lt;URL&gt; \
   <span class="Type"> response</span> &lt;result&gt; \
    [<span class="Type"> response-code</span> &lt;response code&gt; ] \
    [<span class="Type"> response-headers</span> &lt;headers&gt; ] \
    [<span class="Type"> status</span> &lt;status&gt; ] \
    [<span class="Identifier"> method</span> &lt;request method&gt; ] \
    [<span class="Identifier"> request-headers</span> \
        [<span class="Identifier"> content-type</span> &lt;content type&gt; ] \
        [<span class="Identifier"> content-length</span> &lt;content length&gt; ] \
       <span class="Identifier"> custom</span> &lt;header name&gt;=&lt;header value&gt; [ , ... ] ] \
    [<span class="Identifier"> request-body</span> \
        ( [<span class="Identifier"> fields</span> &lt;field name&gt;=&lt;field value&gt; [ , ... ] ] \
            [<span class="Identifier"> files</span> &lt;file name&gt;=&lt;file location&gt; [ , ... ] ] ) \
        | \
        (<span class="Identifier"> content</span> &lt;body content&gt; ) \
    ] \
    [<span class="Type"> error</span> &lt;error&gt; ] \
    [<span class="Identifier"> cert</span> &lt;certificate&gt; |<span class="Identifier"> no-cert</span> ] \
    [<span class="Identifier"> cookie-jar</span> &lt;cookie jar&gt; ] \
    [<span class="Identifier"> timeout</span> &lt;timeout&gt; ]</pre>
<span id=rimstone_copied_443 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_443' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_443, code_443, rimstone_copied_443)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
With call-web, you can get the content of any accessible URL resource, for example web page, image, PDF document, XML document, REST API etc. It allows you to programmatically download URL's content, including the header. For instance, you might want to obtain (i.e. download) the source code of a web page and its HTTP headers. You can then save such downloaded items into files, analyze them, or do anything else.<br/>
<br/>
&lt;URL&gt; is the resource locator, for example "https://some.web.page.com" or if you are downloading an image (for instance) it could be "https://web.page.com/image.jpg". Anything you can access from a client (such as web browser), you can also obtain programmatically. You can specify any URL parameters, for example "https://some.web.page.com?par1=val1&amp;par2=val2".<br/>
<div class="vsub"><a id="Response and headers"></a>Response and headers</div>
The result is obtained via "response" clause into variable &lt;result&gt;, and the length (in bytes) of such response is obtained via "status" clause in &lt;status&gt; variable. <br/>
<br/>
The response code (such as 200 for "OK", 404 for "Not Found" etc.) is available via "response-code" clause in number &lt;response code&gt;; the default value is 0 if response code is unavailable (due to error for instance).<br/>
<br/>
"response-headers" clause allows for retrieval of response headers (such as HTTP headers) in &lt;headers&gt; variable, as a single string variable. <br/>
<div class="vsub"><a id="Request method"></a>Request method</div>
You can specify the request method using "method" clause. &lt;method&gt; has a string value of the request method, such as "GET", "POST", "PUT", "PATCH", "DELETE" or any other.<br/>
<div class="vsub"><a id="Status"></a>Status</div>
In case of error, &lt;status&gt; is negative, and has value of RIM_ERR_FAILED (typically indicating system issue, such as lack of memory, library or system issue or local permissions), RIM_ERR_WEB_CALL (error in accessing URL or obtaining data) - otherwise &lt;status&gt; is the length in bytes of the response (0 or positive). Optionally, you can obtain the error message (if any) via "error" clause in &lt;error&gt; variable. Error is an empty string ("") if there is no error.<br/>
<div class="vsub"><a id="Timeout"></a>Timeout</div>
If "timeout" clause is specified, call-web will timeout if operation has not completed within &lt;timeout&gt; seconds. If this clause is not specified, the default timeout is 120 seconds. If timeout occurs, &lt;status&gt; will be RIM_ERR_WEB_CALL and &lt;error&gt; will indicate timeout. Timeout cannot be negative nor greater than 86400 seconds.<br/>
<div class="vsub"><a id="HTTPS and certificates"></a>HTTPS and certificates</div>
You can call any valid URL that uses protocol supported by the underlying library (cURL). If you're using https protocol (or any other that requires a SSL/TSL certificate), you can either use the local CA (certificate authority) issued, specify the location of a certificate with "cert" clause, or if you do not want it checked, use "no-cert". By default, the locally installed certificates are used; if the URL you are visiting is not trusted via those certificates, and you still want to visit it, use "no-cert"; and if you do have a no-CA (i.e. self-signed certificate) for that URL, use "cert" to provide it as a file name (either a full path or a name relative to current working directory, see <a href='/directories.html'>directories</a>).<br/>
<div class="vsub"><a id="Cookies"></a>Cookies</div>
If you'd like to obtain cookies (for example to maintain session or examine their values), use "cookie-jar" clause. &lt;cookie jar&gt; specifies the location of a file holding cookies. Cookies are read from this file (which can be empty or non-existent to begin with) before making a call-web and any changes to cookies are reflected in this file after the call. This way, multiple calls to the same server maintain cookies the same way browser would do. Make sure the same &lt;cookie jar&gt; file is not used across different application spaces, meaning it should be under the application home directory (see <a href='/directories.html'>directories</a>) and not used by multiple requests simultaneously (use different cookie jar file names for that), which is the most likely method of implementation.<br/>
<div class="vsub"><a id="Binary result"></a>Binary result</div>
The result of call-web (which is &lt;result&gt;) can be a text value or a binary value (for example if getting "JPG", "PNG", "PDF" or other documents). Either way, &lt;status&gt; is the number of bytes in a buffer that holds the value, which is also the value's <a href='/string-length.html'>string-length</a>.<br/>
<div class="vsub"><a id="Request body, sending files and arbitrary content"></a>Request body, sending files and arbitrary content</div>
In order to include request body, for instance to send files, use "request-body" clause. Request body is typically used with POST, PUT or PATCH methods. Even though not common, you can also use it with GET, DELETE or any other custom method, such as for example if the resource you wish to identify requires binary data; perhaps a disposable image is used to identify the resource. <br/>
<br/>
<span style="font-weight:bold;">- Structured content</span><br/>
Use "fields" and/or "files" subclauses to send a structured body request in the form of name/value pairs, the same as sent from an HTML form. To do that, you can specify fields with "fields" subclause in the form of &lt;field name&gt;=&lt;field value&gt; pairs separated by a comma. For instance, here two fields are set (field "source" with value "web" and field "act" with value "setcookie"):<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_444' class=notranslate>
<span class="Statement">call-web</span> <span class="Constant">&quot;<a href="http://website.com/app_name/some_request">http://website.com/app_name/some_request</a>&quot;</span><span class="Type"> response</span> resp<span class="Type"> response-code</span> rc<span class="Type"> status</span> len \
   <span class="Identifier"> request-body fields</span> <span class="Constant">&quot;source&quot;</span>=<span class="Constant">&quot;web&quot;</span>,<span class="Constant">&quot;act&quot;</span>=<span class="Constant">&quot;setcookie&quot;</span></pre>
<span id=rimstone_copied_444 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_444' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_444, code_444, rimstone_copied_444)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
To include files, use "files" subclause in the form of &lt;file name&gt;=&lt;file location&gt; separated by commas. For example, here "file1" is the file name sent (which can be anything), and local file "uploadtest.jpg" is the file whose contents is sent; and "file23" is the file name sent (which can be anything), &nbsp;and "fileup4.pdf" is the actual local file read and sent. In this case files are in the application home directory (see <a href='/directories.html'>directories</a>), but in general you can specify a relative or absolute path:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_445' class=notranslate>
<span class="Statement">call-web</span> <span class="Constant">&quot;<a href="http://website.com">http://website.com</a>&quot;</span><span class="Type"> response</span> resp<span class="Type"> response-code</span> rc<span class="Type"> status</span> len \
   <span class="Identifier"> request-body files</span> <span class="Constant">&quot;file1&quot;</span>=<span class="Constant">&quot;uploadtest.jpg&quot;</span>, <span class="Constant">&quot;file23&quot;</span>=<span class="Constant">&quot;fileup4.pdf&quot;</span></pre>
<span id=rimstone_copied_445 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_445' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_445, code_445, rimstone_copied_445)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
You can specify both "files" and "fields" fields, for instance (along with getting error text and status):<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_446' class=notranslate>
<span class="Statement">call-web</span> <span class="Constant">&quot;<a href="http://website.com/app_name/some_request">http://website.com/app_name/some_request</a>&quot;</span><span class="Type"> response</span> resp<span class="Type"> response-code</span> rc
<span class="Statement">    request-body</span> fields <span class="Constant">&quot;source&quot;</span>=<span class="Constant">&quot;web&quot;</span>,<span class="Constant">&quot;act&quot;</span>=<span class="Constant">&quot;setcookie&quot;</span> \
        files <span class="Constant">&quot;file1&quot;</span>=<span class="Constant">&quot;uploadtest.jpg&quot;</span>, <span class="Constant">&quot;file23&quot;</span>=<span class="Constant">&quot;fileup4.pdf&quot;</span> \
    status st error err</pre>
<span id=rimstone_copied_446 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_446' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_446, code_446, rimstone_copied_446)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
There is no limit on the number of files and fields you can specify, other than of the underlying HTTP protocol.<br/>
<br/>
<span style="font-weight:bold;">- Non-structured content</span><br/>
To send any arbitrary (non-structured) content in the request body, such as JSON text for example, use "content" subclause:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_447' class=notranslate>
<span class="Statement">call-web</span> <span class="Constant">&quot;<a href="https://website.com">https://website.com</a>&quot;</span><span class="Type"> response</span> resp \
   <span class="Identifier"> request-headers content-type</span> <span class="Constant">&quot;application/json&quot;</span> \
   <span class="Identifier"> request-body content</span> <span class="Constant">&quot;{ </span><span class="Special">\</span>
<span class="Constant">        </span><span class="Special">\&quot;</span><span class="Constant">employee</span><span class="Special">\&quot;</span><span class="Constant">: { </span><span class="Special">\</span>
<span class="Constant">            </span><span class="Special">\&quot;</span><span class="Constant">name</span><span class="Special">\&quot;</span><span class="Constant">:       </span><span class="Special">\&quot;</span><span class="Constant">sonoo</span><span class="Special">\&quot;</span><span class="Constant">, </span><span class="Special">\</span>
<span class="Constant">            </span><span class="Special">\&quot;</span><span class="Constant">salary</span><span class="Special">\&quot;</span><span class="Constant">:      56000, </span><span class="Special">\</span>
<span class="Constant">            </span><span class="Special">\&quot;</span><span class="Constant">married</span><span class="Special">\&quot;</span><span class="Constant">:    true </span><span class="Special">\</span>
<span class="Constant">        } </span><span class="Special">\</span>
<span class="Constant">    }&quot;</span></pre>
<span id=rimstone_copied_447 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_447' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_447, code_447, rimstone_copied_447)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
&lt;content length&gt; number in "content-length" subclause (in "request-headers" clause) can be specified to denote the length of body content:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_448' class=notranslate>
<span class="Statement">read-file</span> <span class="Constant">&quot;somefile&quot;</span><span class="Type"> to</span> file_contents<span class="Type"> status</span> file_length
<span class="Statement">call-web</span> <span class="Constant">&quot;<a href="https://website.com">https://website.com</a>&quot;</span><span class="Type"> response</span> resp \
   <span class="Identifier"> request-headers content-type</span> <span class="Constant">&quot;image/jpeg&quot;</span> \
   <span class="Identifier"> request-headers content-length</span> file_length \
   <span class="Identifier"> request-body content</span> file_contents</pre>
<span id=rimstone_copied_448 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_448' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_448, code_448, rimstone_copied_448)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
If "content-length" is not used, then it is assumed to be the length of string &lt;content&gt;.<br/>
<div class="vsub"><a id="Request headers"></a>Request headers</div>
If your request has a body (i.e. "request-body" clause is used), you can set the content type with "content-type" subclause of a request-headers clause:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_449' class=notranslate>
<span class="Statement">call-web</span> <span class="Constant">&quot;<a href="https://">https://</a>&lt;web address&gt;/resource&quot;</span> \
   <span class="Identifier"> request-headers content-type</span> <span class="Constant">&quot;application/json&quot;</span> \
   <span class="Identifier"> request-body content</span> some_json</pre>
<span id=rimstone_copied_449 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_449' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_449, code_449, rimstone_copied_449)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Note that using "content-type" without the request body may be ignored by the server processing your request or may cause it to consider the request invalid. If "content-type" is not used, the default is "multipart/form-data" if "fields" or "files" subclause(s) are used with "body-request" clause. Otherwise, if you use "content" subclause to send other types of data, you must set content type explicitly via "content-type" subclause of "request-headers" clause.<br/>
<br/>
You can also specify custom request headers with "request-headers" clause, using "custom" subclause with a list of &lt;header name&gt;=&lt;header value&gt; pairs separated by a comma. For example, here custom header "RimStone-header" has value of "Some_ID", and "Another-Header" a value of "New_ID":<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_450' class=notranslate>
<span class="Statement">call-web</span> <span class="Constant">&quot;<a href="http://website.com/">http://website.com/</a>&lt;app name&gt;/&lt;request name&gt;?act=get_file&quot;</span><span class="Type"> response</span> resp<span class="Type"> response-code</span> rc<span class="Type"> status</span> len \
   <span class="Identifier"> request-headers custom</span> <span class="Constant">&quot;RimStone-header&quot;</span>=<span class="Constant">&quot;Some_ID&quot;</span>, <span class="Constant">&quot;Another-Header&quot;</span>=<span class="Constant">&quot;New_ID&quot;</span></pre>
<span id=rimstone_copied_450 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_450' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_450, code_450, rimstone_copied_450)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
On the receiving side you can get any such custom header by using "header" clause of the <a href='/get-req.html'>get-req</a> statement:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_451' class=notranslate>
<span class="Statement">get-req</span><span class="Identifier"> header</span> <span class="Constant">&quot;RimStone-header&quot;</span><span class="Type"> to</span> hvh0
<span class="Statement">get-req</span><span class="Identifier"> header</span> <span class="Constant">&quot;Another-Header&quot;</span><span class="Type"> to</span> hvh1</pre>
<span id=rimstone_copied_451 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_451' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_451, code_451, rimstone_copied_451)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<div class="vsub"><a id="Examples"></a>Examples</div>
Get the web page and print it out:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_441' class=notranslate>
<span class="Statement">call-web</span> <span class="Constant">&quot;<a href="https://website.com/page.html">https://website.com/page.html</a>&quot;</span><span class="Type"> response</span> resp
<span class="Statement">print-out</span> resp</pre>
<span id=rimstone_copied_441 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_441' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_441, code_441, rimstone_copied_441)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Get the "JPG" image from the web and save it to a file "pic.jpg":<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_442' class=notranslate>
<span class="Statement">call-web</span> <span class="Constant">&quot;<a href="https://website.com/images/someimg.jpg">https://website.com/images/someimg.jpg</a>&quot;</span><span class="Type"> status</span> wlen<span class="Type"> response</span> resp
<span class="Statement">write-file</span> <span class="Constant">&quot;pic.jpg&quot;</span><span class="Identifier"> from</span> resp<span class="Identifier"> length</span> wlen</pre>
<span id=rimstone_copied_442 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_442' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_442, code_442, rimstone_copied_442)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<div class="vsub"><a id="See also"></a>See also</div>
 <a name='Web'></a><span style="font-weight:bold;">Web</span><br/>
<a href='/call-web.html'>call-web</a> &nbsp;<br/>
<a href='/out-header.html'>out-header</a> &nbsp;<br/>
<a href='/send-file.html'>send-file</a> &nbsp;<br/>
<a href='/silent-header.html'>silent-header</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='/documentation.html'>documentation</a><br/>
<a id='cbrt.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:left;background-color:white;'><a href='https://rimstone-lang.com' style='border-bottom:0px'><img src='https://rimstone-lang.com/rimstone.png' style='width:180px;height:auto'/></a></div><div class='vhub' style='margin-top:10px;'>Cbrt</div><hr/><span style="font-weight:bold;">Purpose</span>: Cube root.<br/>
<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_452' class=notranslate>
cbrt( &lt;var&gt; )</pre>
<span id=rimstone_copied_452 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_452' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_452, code_452, rimstone_copied_452)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
cbrt returns the cube root of &lt;var&gt;. &lt;var&gt; is a number or a double and the result is a double.<br/>
<div class="vsub"><a id="Examples"></a>Examples</div>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_453' class=notranslate>
<span class="Statement">set-double</span> d = cbrt(<span class="Constant">1</span>) + <span class="Constant">1</span></pre>
<span id=rimstone_copied_453 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_453' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_453, code_453, rimstone_copied_453)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<div class="vsub"><a id="See also"></a>See also</div>
 <a name='Math functions'></a><span style="font-weight:bold;">Math functions</span><br/>
<a href='/abd.html'>abd</a> &nbsp;<br/>
<a href='/abn.html'>abn</a> &nbsp;<br/>
<a href='/acos.html'>acos</a> &nbsp;<br/>
<a href='/acosh.html'>acosh</a> &nbsp;<br/>
<a href='/asin.html'>asin</a> &nbsp;<br/>
<a href='/asinh.html'>asinh</a> &nbsp;<br/>
<a href='/atan.html'>atan</a> &nbsp;<br/>
<a href='/atan2.html'>atan2</a> &nbsp;<br/>
<a href='/atanh.html'>atanh</a> &nbsp;<br/>
<a href='/cbrt.html'>cbrt</a> &nbsp;<br/>
<a href='/ceil.html'>ceil</a> &nbsp;<br/>
<a href='/copysign.html'>copysign</a> &nbsp;<br/>
<a href='/cos.html'>cos</a> &nbsp;<br/>
<a href='/cosh.html'>cosh</a> &nbsp;<br/>
<a href='/dbl.html'>dbl</a> &nbsp;<br/>
<a href='/erf.html'>erf</a> &nbsp;<br/>
<a href='/erfc.html'>erfc</a> &nbsp;<br/>
<a href='/exp.html'>exp</a> &nbsp;<br/>
<a href='/exp2.html'>exp2</a> &nbsp;<br/>
<a href='/floor.html'>floor</a> &nbsp;<br/>
<a href='/fmod.html'>fmod</a> &nbsp;<br/>
<a href='/hypot.html'>hypot</a> &nbsp;<br/>
<a href='/isinf.html'>isinf</a> &nbsp;<br/>
<a href='/isnan.html'>isnan</a> &nbsp;<br/>
<a href='/ldexp.html'>ldexp</a> &nbsp;<br/>
<a href='/lgamma.html'>lgamma</a> &nbsp;<br/>
<a href='/log.html'>log</a> &nbsp;<br/>
<a href='/log10.html'>log10</a> &nbsp;<br/>
<a href='/log2.html'>log2</a> &nbsp;<br/>
<a href='/math-functions.html'>math-functions</a> &nbsp;<br/>
<a href='/nextafter.html'>nextafter</a> &nbsp;<br/>
<a href='/num.html'>num</a> &nbsp;<br/>
<a href='/pow.html'>pow</a> &nbsp;<br/>
<a href='/round.html'>round</a> &nbsp;<br/>
<a href='/sin.html'>sin</a> &nbsp;<br/>
<a href='/sinh.html'>sinh</a> &nbsp;<br/>
<a href='/sqrt.html'>sqrt</a> &nbsp;<br/>
<a href='/tan.html'>tan</a> &nbsp;<br/>
<a href='/tanh.html'>tanh</a> &nbsp;<br/>
<a href='/trunc.html'>trunc</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='/documentation.html'>documentation</a><br/>
<a id='ceil.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:left;background-color:white;'><a href='https://rimstone-lang.com' style='border-bottom:0px'><img src='https://rimstone-lang.com/rimstone.png' style='width:180px;height:auto'/></a></div><div class='vhub' style='margin-top:10px;'>Ceil</div><hr/><span style="font-weight:bold;">Purpose</span>: Ceiling value.<br/>
<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_454' class=notranslate>
ceil( &lt;var&gt; )</pre>
<span id=rimstone_copied_454 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_454' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_454, code_454, rimstone_copied_454)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
ceil returns the smallest number that is not less than &lt;var&gt;. &lt;var&gt; is a number or a double and the result is a double.<br/>
<div class="vsub"><a id="Examples"></a>Examples</div>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_455' class=notranslate>
<span class="Statement">set-double</span> d = ceil(<span class="Constant">1</span><span class="Constant">.2</span>) + <span class="Constant">1</span></pre>
<span id=rimstone_copied_455 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_455' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_455, code_455, rimstone_copied_455)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<div class="vsub"><a id="See also"></a>See also</div>
 <a name='Math functions'></a><span style="font-weight:bold;">Math functions</span><br/>
<a href='/abd.html'>abd</a> &nbsp;<br/>
<a href='/abn.html'>abn</a> &nbsp;<br/>
<a href='/acos.html'>acos</a> &nbsp;<br/>
<a href='/acosh.html'>acosh</a> &nbsp;<br/>
<a href='/asin.html'>asin</a> &nbsp;<br/>
<a href='/asinh.html'>asinh</a> &nbsp;<br/>
<a href='/atan.html'>atan</a> &nbsp;<br/>
<a href='/atan2.html'>atan2</a> &nbsp;<br/>
<a href='/atanh.html'>atanh</a> &nbsp;<br/>
<a href='/cbrt.html'>cbrt</a> &nbsp;<br/>
<a href='/ceil.html'>ceil</a> &nbsp;<br/>
<a href='/copysign.html'>copysign</a> &nbsp;<br/>
<a href='/cos.html'>cos</a> &nbsp;<br/>
<a href='/cosh.html'>cosh</a> &nbsp;<br/>
<a href='/dbl.html'>dbl</a> &nbsp;<br/>
<a href='/erf.html'>erf</a> &nbsp;<br/>
<a href='/erfc.html'>erfc</a> &nbsp;<br/>
<a href='/exp.html'>exp</a> &nbsp;<br/>
<a href='/exp2.html'>exp2</a> &nbsp;<br/>
<a href='/floor.html'>floor</a> &nbsp;<br/>
<a href='/fmod.html'>fmod</a> &nbsp;<br/>
<a href='/hypot.html'>hypot</a> &nbsp;<br/>
<a href='/isinf.html'>isinf</a> &nbsp;<br/>
<a href='/isnan.html'>isnan</a> &nbsp;<br/>
<a href='/ldexp.html'>ldexp</a> &nbsp;<br/>
<a href='/lgamma.html'>lgamma</a> &nbsp;<br/>
<a href='/log.html'>log</a> &nbsp;<br/>
<a href='/log10.html'>log10</a> &nbsp;<br/>
<a href='/log2.html'>log2</a> &nbsp;<br/>
<a href='/math-functions.html'>math-functions</a> &nbsp;<br/>
<a href='/nextafter.html'>nextafter</a> &nbsp;<br/>
<a href='/num.html'>num</a> &nbsp;<br/>
<a href='/pow.html'>pow</a> &nbsp;<br/>
<a href='/round.html'>round</a> &nbsp;<br/>
<a href='/sin.html'>sin</a> &nbsp;<br/>
<a href='/sinh.html'>sinh</a> &nbsp;<br/>
<a href='/sqrt.html'>sqrt</a> &nbsp;<br/>
<a href='/tan.html'>tan</a> &nbsp;<br/>
<a href='/tanh.html'>tanh</a> &nbsp;<br/>
<a href='/trunc.html'>trunc</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='/documentation.html'>documentation</a><br/>
<a id='CGI.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:left;background-color:white;'><a href='https://rimstone-lang.com' style='border-bottom:0px'><img src='https://rimstone-lang.com/rimstone.png' style='width:180px;height:auto'/></a></div><div class='vhub' style='margin-top:10px;'>CGI</div><hr/>You can run RimStone application as a CGI (Common Gateway Interface) program, if your web server supports CGI. This is not recommended in general, as CGI programs do not exhibit great performance. However in some cases you may need to use CGI, such as when performance is not of critical importance, or when other methods of execution are not feasible.<br/>
<br/>
To run your application with CGI, use <a href='/command-line.html'>command-line</a> program. Since RimStone applications require running in the security context of the user who owns the application, you must use "suexec" (or similar feature) of your web server.<br/>
<br/>
The following script sets up an application named "func_test" (any kind of application will do) to run as CGI (after it's been compiled with <a href='/rim.html'>rim</a>) on Apache web server running on Ubuntu 18 and up. For other web servers/distros, consult their documentation on how to setup CGI for a program.<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_456' class=notranslate>
<span class="Comment">#prep repos</span>
    sudo apt update

<span class="Comment">#enable CGI on apache</span>
    sudo a2enmod cgid
    sudo service apache2 restart

<span class="Comment">#Install suexec-custom for Apache</span>
    sudo apt-get <span class="Special">-y</span> install apache2-suexec-custom
    sudo a2enmod suexec
    sudo service apache2 restart

<span class="Comment">#setup a &quot;rim&quot; directory under cgi-bin where your application can run</span>
    sudo <span class="Statement">mkdir</span> <span class="Special">-p</span> /usr/lib/cgi-bin/rim
    sudo chown <span class="PreProc">$(</span><span class="Special">whoami</span><span class="PreProc">)</span>:<span class="PreProc">$(</span><span class="Special">whoami</span><span class="PreProc">)</span>  /usr/lib/cgi-bin/rim
    sudo <span class="Statement">sed</span> <span class="Special">-i</span> <span class="Statement">'</span><span class="Constant">1c\/usr/lib/cgi-bin/rim</span><span class="Statement">'</span> /etc/apache2/suexec/www-data

<span class="Comment">#copy your program to &quot;rim&quot; directory</span>
    sudo <span class="Statement">mv</span> <span class="PreProc">$HOME</span>/.rimstone/apps/func-test/.bld/func-test /usr/lib/cgi-bin/rim
    sudo chown <span class="PreProc">$(</span><span class="Special">whoami</span><span class="PreProc">)</span>:<span class="PreProc">$(</span><span class="Special">whoami</span><span class="PreProc">)</span>  /usr/lib/cgi-bin/rim/func-test
    sudo <span class="Statement">chmod</span> <span class="Constant">700</span>  /usr/lib/cgi-bin/rim/func-test

<span class="Comment">#add user/group of Gliim application user to suexec    </span>
    sudo <span class="Statement">sed</span> <span class="Special">-i</span> <span class="Statement">&quot;</span><span class="Constant">/SuexecUserGroup/d</span><span class="Statement">&quot;</span> /etc/apache2/sites-enabled/000-default.conf
    sudo <span class="Statement">sed</span> <span class="Special">-i</span> <span class="Statement">&quot;</span><span class="Constant">s/&lt;</span><span class="Special">\/</span><span class="Constant">VirtualHost&gt;/SuexecUserGroup </span><span class="PreProc">$(</span><span class="Special">whoami</span><span class="PreProc">)</span><span class="Constant"> </span><span class="PreProc">$(</span><span class="Special">whoami</span><span class="PreProc">)</span><span class="Special">\n</span><span class="Constant">&lt;</span><span class="Special">\/</span><span class="Constant">VirtualHost&gt;/g</span><span class="Statement">&quot;</span> /etc/apache2/sites-enabled/000-default.conf
    sudo service apache2 restart

<span class="Comment">#the application is at <a href="http://127.0.0.1/cgi-bin/rim/func-test?...">http://127.0.0.1/cgi-bin/rim/func-test?...</a></span>
<span class="Comment">#substitute 127.0.0.1 for your web address</span></pre>
<span id=rimstone_copied_456 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_456' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_456, code_456, rimstone_copied_456)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<div class="vsub"><a id="See also"></a>See also</div>
 <a name='Running application'></a><span style="font-weight:bold;">Running application</span><br/>
<a href='/application-setup.html'>application-setup</a> &nbsp;<br/>
<a href='/CGI.html'>CGI</a> &nbsp;<br/>
<a href='/command-line.html'>command-line</a> &nbsp;<br/>
<a href='/service.html'>service</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='/documentation.html'>documentation</a><br/>
<a id='change-dir.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:left;background-color:white;'><a href='https://rimstone-lang.com' style='border-bottom:0px'><img src='https://rimstone-lang.com/rimstone.png' style='width:180px;height:auto'/></a></div><div class='vhub' style='margin-top:10px;'>Change dir</div><hr/><span style="font-weight:bold;">Purpose</span>: Change current working directory.<br/>
<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_457' class=notranslate>
<span class="Statement">change-dir</span> [ &lt;directory&gt;  |<span class="Identifier"> home</span> |<span class="Identifier"> run-dir</span> ] [<span class="Type"> status</span> &lt;status&gt; ]</pre>
<span id=rimstone_copied_457 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_457' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_457, code_457, rimstone_copied_457)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
change-dir will change current working directory to &lt;directory&gt; (which is a string that can be an absolute or relative path), or to application home directory (see <a href='/directories.html'>directories</a>) if "home" clause is used.<br/>
<br/>
If "run-dir" clause is used, then current working directory is changed to the directory where you ran the program from. Note that this only applies to <a href='/command-line.html'>command-line</a> programs. If you program runs as a <a href='/service.html'>service</a>, then this clause has the same effect as "home" clause.<br/>
<br/>
If "status" clause is used, then number &lt;status&gt; is RIM_OKAY if change-dir is successful, or RIM_FAILED if not (in which case you can use "errno" clause in <a href='/get-req.html'>get-req</a> to find the specific reason why).<br/>
<br/>
Note that if you change current working directory with <a href='/call-extended.html'>call-extended</a>, then you must set RimStone internal boolean variable "rim_path_changed" to true.<br/>
<div class="vsub"><a id="Examples"></a>Examples</div>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_458' class=notranslate>
<span class="Statement">change-dir</span> <span class="Constant">&quot;/home/user/new_dir&quot;</span><span class="Type"> status</span> s
<span class="Statement">if-true</span> s<span class="Identifier"> equal</span> RIM_OKAY
<span class="Statement">    @</span>Directory changed
<span class="Statement">else</span>
<span class="Statement">    get-req</span><span class="Identifier"> errno</span><span class="Type"> to</span> eno
<span class="Statement">    @</span>Error <span class="Statement">&lt;&lt;print-out</span> eno<span class="Statement">&gt;&gt;</span>
<span class="Statement">end-if</span></pre>
<span id=rimstone_copied_458 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_458' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_458, code_458, rimstone_copied_458)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Use relative path:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_459' class=notranslate>
<span class="Statement">change-dir</span> <span class="Constant">&quot;./new_dir&quot;</span></pre>
<span id=rimstone_copied_459 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_459' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_459, code_459, rimstone_copied_459)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Go back to application home directory:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_460' class=notranslate>
<span class="Statement">change-dir</span><span class="Identifier"> home</span></pre>
<span id=rimstone_copied_460 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_460' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_460, code_460, rimstone_copied_460)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<div class="vsub"><a id="See also"></a>See also</div>
 <a name='Directories'></a><span style="font-weight:bold;">Directories</span><br/>
<a href='/change-dir.html'>change-dir</a> &nbsp;<br/>
<a href='/change-mode.html'>change-mode</a> &nbsp;<br/>
<a href='/delete-dir.html'>delete-dir</a> &nbsp;<br/>
<a href='/directories.html'>directories</a> &nbsp;<br/>
<a href='/new-dir.html'>new-dir</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='/documentation.html'>documentation</a><br/>
<a id='change-mode.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:left;background-color:white;'><a href='https://rimstone-lang.com' style='border-bottom:0px'><img src='https://rimstone-lang.com/rimstone.png' style='width:180px;height:auto'/></a></div><div class='vhub' style='margin-top:10px;'>Change mode</div><hr/><span style="font-weight:bold;">Purpose</span>: Change permission mode for a file or directory.<br/>
<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_461' class=notranslate>
<span class="Statement">change-mode</span> &lt;file-or-directory&gt;<span class="Identifier"> mode</span> &lt;mode&gt; [<span class="Type"> status</span> &lt;status&gt; ]</pre>
<span id=rimstone_copied_461 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_461' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_461, code_461, rimstone_copied_461)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
change-mode will change permission mode for &lt;file-or-directory&gt; to &lt;mode&gt; as specified in "mode" clause. &lt;mode&gt; is a number, typically specified as octal (such as for instance 0750), see <a href='/permissions.html'>permissions</a>. &lt;file-or-directory&gt; is a string that may be an absolute or relative path.<br/>
<br/>
If "status" clause is used, then number &lt;status&gt; is RIM_OKAY if succeeded, RIM_ERR_EXIST if file or directory does not exist, or RIM_ERR_FAILED for other errors (in which case you can use "errno" clause in <a href='/get-req.html'>get-req</a> to find the specific reason why).<br/>
<div class="vsub"><a id="Examples"></a>Examples</div>
To give read and write privilege to user's group members ("6" means that as a second digit):<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_462' class=notranslate>
<span class="Statement">change-mode</span> <span class="Constant">&quot;myfile&quot;</span><span class="Identifier"> mode</span> <span class="Constant">0760</span></pre>
<span id=rimstone_copied_462 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_462' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_462, code_462, rimstone_copied_462)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<div class="vsub"><a id="See also"></a>See also</div>
 <a name='Directories'></a><span style="font-weight:bold;">Directories</span><br/>
<a href='/change-dir.html'>change-dir</a> &nbsp;<br/>
<a href='/change-mode.html'>change-mode</a> &nbsp;<br/>
<a href='/delete-dir.html'>delete-dir</a> &nbsp;<br/>
<a href='/directories.html'>directories</a> &nbsp;<br/>
<a href='/new-dir.html'>new-dir</a> &nbsp; <br/>
 <a name='Files'></a><span style="font-weight:bold;">Files</span><br/>
<a href='/change-mode.html'>change-mode</a> &nbsp;<br/>
<a href='/close-file.html'>close-file</a> &nbsp;<br/>
<a href='/copy-file.html'>copy-file</a> &nbsp;<br/>
<a href='/delete-file.html'>delete-file</a> &nbsp;<br/>
<a href='/file-position.html'>file-position</a> &nbsp;<br/>
<a href='/file-storage.html'>file-storage</a> &nbsp;<br/>
<a href='/file-uploading.html'>file-uploading</a> &nbsp;<br/>
<a href='/get-upload.html'>get-upload</a> &nbsp;<br/>
<a href='/lock-file.html'>lock-file</a> &nbsp;<br/>
<a href='/open-file.html'>open-file</a> &nbsp;<br/>
<a href='/read-file.html'>read-file</a> &nbsp;<br/>
<a href='/read-line.html'>read-line</a> &nbsp;<br/>
<a href='/rename-file.html'>rename-file</a> &nbsp;<br/>
<a href='/stat-file.html'>stat-file</a> &nbsp;<br/>
<a href='/temporary-file.html'>temporary-file</a> &nbsp;<br/>
<a href='/uniq-file.html'>uniq-file</a> &nbsp;<br/>
<a href='/unlock-file.html'>unlock-file</a> &nbsp;<br/>
<a href='/write-file.html'>write-file</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='/documentation.html'>documentation</a><br/>
<a id='Client-API-and-messaging.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:left;background-color:white;'><a href='https://rimstone-lang.com' style='border-bottom:0px'><img src='https://rimstone-lang.com/rimstone.png' style='width:180px;height:auto'/></a></div><div class='vhub' style='margin-top:10px;'>Client API and messaging</div><hr/>RimStone provides <a href='/SEMI.html'>SEMI</a> messaging API for a C client (see <a href='/Client-API.html'>Client-API</a>). It means you can read sets of key/value pairs sent by the server, and also create sets of key/value pairs and send them to the server (or read to/write from a file etc.).<br/>
<br/>
This API is binary-compatible with <a href='/new-message.html'>new-message</a>, <a href='/write-message.html'>write-message</a>, <a href='/read-message.html'>read-message</a> etc.<br/>
<br/>
The following C API is provided:<br/>
<ul><li><span style="font-weight:bold;">rim_msg * rim_new_msg (char *from, rim_num from_len);</span><br/>
Create a new message, which is a pointer to a variable of type "rim_msg". <br/>
<br/>
If this is a new empty message (i.e. with no data), then use NULL for "from" and 0 from "from_len". Typically, this is what you'd use when building a new message you intend to send to the server, write into a file etc.<br/>
<br/>
If you're creating a new message from an existing one, then "from" is the message body and "from_len" is its length (see rim_get_msg() and rim_get_msg_len() to get them, respectively). Typically, this is what you'd do if you received a message from the server, read it from a file etc.<br/>
<br/>
</li><li><span style="font-weight:bold;">void rim_write_msg(rim_msg *msg, char *key, char *val, rim_num val_len);</span><br/>
Write data to a message.<br/>
<br/>
"msg" is a message created with rim_new_msg(). <br/>
<br/>
Data written is key "key" and value "val" of length "val_len". See <a href='/SEMI.html'>SEMI</a> on details as to what the key can be, while value can be any binary data. Note that both key and value are copied into a message, and thus can go out of scope or be freed after the call.<br/>
<br/>
</li><li><span style="font-weight:bold;">rim_num rim_read_msg(rim_msg *msg, char **key, char **val, rim_num *val_len);</span><br/>
Read data from a message.<br/>
<br/>
"msg" is a message created with rim_new_msg(). <br/>
<br/>
"key" is the key read, and "val" is the value read, while "val_len" is the length of value read.<br/>
<br/>
The return value is RIM_OKAY if message is read, RIM_ERR_LENGTH if trying to read beyond the end of message and RIM_ERR_FORMAT if the message is not in <a href='/SEMI.html'>SEMI</a> format.<br/>
<br/>
Note that "val" is not allocated and should not be freed (it is a part of the message data), while "key" is allocated and should be freed when not needed. For this reason, you should not free the message data (see rim_get_msg()), nor the message itself if the value is still needed (see Example below).<br/>
<br/>
</li><li><span style="font-weight:bold;">char *rim_get_msg(rim_msg *msg);</span><br/>
Get the message data.<br/>
<br/>
"msg" is a message created with rim_new_msg(). <br/>
<br/>
Return value is the message data, which is the data you can send to server, or the data you would receive from server. It consists of all key/value pairs that make up the message, whether it's produced somewhere else or you created it rim_write_msg().<br/>
<br/>
</li><li><span style="font-weight:bold;">rim_num rim_get_len (rim_msg *msg);</span><br/>
Get the length of message data.<br/>
<br/>
"msg" is a message created with rim_new_msg(). <br/>
<br/>
Return value is the length of message data, which can be binary. You can use this length when sending data to server, writing it to a file etc.</li></ul>
<div class="vsub"><a id="Examples"></a>Examples</div>
Here's the sample code illustrating use of the API:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_490' class=notranslate>
<span class="PreProc">#include </span><span class="Constant">&quot;rcli.h&quot;</span> <span class="Comment">// include C API header file</span>

<span class="Statement">.</span>..

rim_msg *msg; <span class="Comment">// message type variable</span>

<span class="Comment">// Create new message</span>
msg = rim_new_msg (<span class="Constant">NULL</span>, <span class="Constant">0</span>);

<span class="Statement">.</span>..

<span class="Comment">// Write key/value (assuming value is a zero-bound string)</span>
<span class="Type">char</span> key[<span class="Constant">100</span>], value[<span class="Constant">100</span>];
strcpy (key, <span class="Constant">&quot;some key&quot;</span>);
strcpy (value, <span class="Constant">&quot;some key&quot;</span>);
rim_write_msg (msg, key, value, strlen(value));

<span class="Statement">.</span>..

<span class="Comment">// Read key/value from the message</span>
<span class="Type">char</span> *k, *v;
rim_num len;
rim_read_msg (msg, &amp;k, &amp;v, &amp;len);

<span class="Statement">.</span>..

<span class="Comment">// Free the message data</span>
free (rim_get_msg(msg));
<span class="Comment">// Free the message</span>
free (msg);</pre>
<span id=rimstone_copied_490 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_490' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_490, code_490, rimstone_copied_490)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<div class="vsub"><a id="See also"></a>See also</div>
 <a name='API'></a><span style="font-weight:bold;">API</span><br/>
<a href='/Client-API.html'>Client-API</a> &nbsp;<br/>
<a href='/Client-API-and-messaging.html'>Client-API-and-messaging</a> &nbsp;<br/>
<a href='/Server-API.html'>Server-API</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='/documentation.html'>documentation</a><br/>
<a id='Client-API.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:left;background-color:white;'><a href='https://rimstone-lang.com' style='border-bottom:0px'><img src='https://rimstone-lang.com/rimstone.png' style='width:180px;height:auto'/></a></div><div class='vhub' style='margin-top:10px;'>Client API</div><hr/>You can use C API client library to connect to RimStone:<br/>
<ul><li>The API has only a few functions, and the main one is "rim_cli_request()", which makes a call to the service.<br/>
</li><li>There is only a single data type used, which is "rim_cli" and it is used to specify a request and its options, as well as to retrieve results.<br/>
</li><li>There is a single include file ("rcli.h"). <br/>
</li><li>When building your client executable, you can either specify build flags by using the result of "rim -i" (if you have RimStone installed), or use self-contained source files directly.<br/>
</li><li>It is MT-safe, so you can use it in multi-threaded applications, such as to make many requests in parallel.<br/>
</li><li>It comes with messaging API (see <a href='/Client-API-and-messaging.html'>Client-API-and-messaging</a>).</li></ul>
See Examples section below for detailed examples.<br/>
<div class="vsub"><a id="Sending a request to RimStone service"></a>Sending a request to RimStone service</div>
The following function is used to make a call using C API:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_474' class=notranslate>
<span class="Type">int</span> rim_cli_request (rim_cli *req);</pre>
<span id=rimstone_copied_474 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_474' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_474, code_474, rimstone_copied_474)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
All input and output is contained in a single variable of type "rim_cli", the pointer to which is passed to "rim_cli_request()" function that sends a request to the service. A variable of type "rim_cli" must be initialized to zero before using it (such as with {0} initialization, "memset()" or "calloc()"), or otherwise some of its members may have random values:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_477' class=notranslate>
<span class="Comment">// Define and initialize request variable</span>
rim_cli req = {<span class="Constant">0</span>};
<span class="Comment">// You could also do:</span>
<span class="Comment">// memset ((char*)&amp;req, </span><span class="Constant">0</span><span class="Comment">, sizeof(rim_cli));</span>
<span class="Statement">.</span>..
<span class="Comment">// Set members of 'req' variable (see below)</span>
<span class="Statement">.</span>..
<span class="Comment">// Make a call</span>
<span class="Type">int</span> result = rim_cli_request (&amp;req);</pre>
<span id=rimstone_copied_477 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_477' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_477, code_477, rimstone_copied_477)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Type "rim_cli" is defined as (i.e. public members of it):<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_479' class=notranslate>
<span class="Type">typedef</span> <span class="Type">struct</span> {
    <span class="Type">const</span> <span class="Type">char</span> *server; <span class="Comment">// the IP:port/socket_path to server</span>
    <span class="Type">const</span> <span class="Type">char</span> *req_method; <span class="Comment">// request method</span>
    <span class="Type">const</span> <span class="Type">char</span> *app_path; <span class="Comment">// application path</span>
    <span class="Type">const</span> <span class="Type">char</span> *req; <span class="Comment">// request name</span>
    <span class="Type">const</span> <span class="Type">char</span> *url_params; <span class="Comment">// URL params (path+query string)</span>
    <span class="Type">const</span> <span class="Type">char</span> *content_type; <span class="Comment">// content type</span>
    <span class="Type">int</span> content_len; <span class="Comment">// content len</span>
    <span class="Type">const</span> <span class="Type">char</span> *req_body; <span class="Comment">// request body (i.e. content)</span>
    <span class="Type">char</span> **env; <span class="Comment">// environment to pass to servicde</span>
    <span class="Type">int</span> timeout; <span class="Comment">// timeout for request</span>
    <span class="Type">int</span> req_status; <span class="Comment">// status of request from service</span>
    <span class="Type">int</span> data_len; <span class="Comment">// length of response from service</span>
    <span class="Type">int</span> error_len; <span class="Comment">// length of error from service</span>
    <span class="Type">char</span> *errm; <span class="Comment">// error message when rim_cli_request returns other than RIM_OKAY</span>
    rim_cli_out_hook out_hook; <span class="Comment">// hook to get data output as soon as it arrives</span>
    rim_cli_err_hook err_hook; <span class="Comment">// hook get error output as soon as it arrives</span>
    rim_cli_done_hook done_hook; <span class="Comment">// get all data when request is complete</span>
    <span class="Type">int</span> thread_id; <span class="Comment">// custom ID when executing in a multithreaded fashion</span>
    <span class="Type">volatile</span> <span class="Type">char</span> done; <span class="Comment">// indicator that the request has completed</span>
    <span class="Type">int</span> return_code; <span class="Comment">// the return code from rim_cli_request()</span>
<span class="Statement">}</span> rim_cli;</pre>
<span id=rimstone_copied_479 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_479' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_479, code_479, rimstone_copied_479)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<br/>
<span style="font-weight:bold;">- Mandatory input</span><br/>
The following members of "rim_cli" type must be supplied in order to make a call to a service:<br/>
<ul><li>"server" represents either a Unix socket or a TCP socket, and is:<br/>
<ul><li>for a Unix socket, a fully qualified name to a Unix socket file used to communicate with the service (use rim_dir() function to obtain it for any RimStone application, see below), or<br/>
</li><li>for a TCP socket, a host name and port name in the form of "&lt;host name&gt;:&lt;port number&gt;", specifying where is the server listening on (for instance "127.0.0.1:2301" if the RimStone service is local and runs on TCP port 2301).</li></ul>
</li><li>"req_method" is a request method, such as "GET", "POST", "PUT", "DELETE" or any other.<br/>
</li><li>"app_path" is an application path (see <a href='/request.html'>request</a>). By default it's "/&lt;application name&gt;". <br/>
</li><li>"req" is a request path, i.e. a request name preceded by a forward slash, as in "/&lt;request name&gt;" (see <a href='/request.html'>request</a>).</li></ul>
<span style="font-weight:bold;">- Get Unix socket file</span><br/>
To get Unix socket file path, use rim_dir() function, where "type" is the type of RimStone's file or directory, "dir" is the string buffer for the path, "dir_size" is its size, "app" is the application name, and "user" is Operating System user name who owns the application (NULL if your own):<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_481' class=notranslate>
<span class="Type">size_t</span> rim_dir (<span class="Type">int</span> type, <span class="Type">char</span> *dir, <span class="Type">size_t</span> dir_size, <span class="Type">char</span> *app, <span class="Type">char</span> *user);</pre>
<span id=rimstone_copied_481 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_481' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_481, code_481, rimstone_copied_481)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Specifically to get the Unix socket file path, use RIM_DIR_SOCKFILE for "type" parameter, and with "app-name" being the application name owned by you:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_483' class=notranslate>
<span class="Type">char</span> dir[RIM_MAX_OS_UDIR_LEN];
rim_dir (RIM_DIR_SOCKFILE, dir, <span class="Statement">sizeof</span>(dir), <span class="Constant">&quot;app-name&quot;</span>, <span class="Constant">NULL</span>);</pre>
<span id=rimstone_copied_483 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_483' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_483, code_483, rimstone_copied_483)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Note that you can use RIM_DIR_USER to get user base directory (where all RimStone files are for a given user), RIM_DIR_APPS to get the directory under which all applications are, RIM_DIR_APP to get the directory under which all application files are, RIM_DIR_FILE to get the file directory, RIM_DIR_TRACE to get the directory where stack trace files are, and RIM_DIR_BLD to get the directory where RimStone application executables are (see <a href='/directories.html'>directories</a>). <br/>
<br/>
<span style="font-weight:bold;">- URL parameters</span><br/>
"url_params" is the URL parameters, meaning input parameters (as path segments and query string, see <a href='/request.html'>request</a>). URL parameters can be NULL or empty, in which case it is not used.<br/>
<br/>
<span style="font-weight:bold;">- Request body (content)</span><br/>
"req_body" is the request body, which can be any text or binary data. "content_type" is the content type of request body (for instance "application/json" or "image/jpg"). "content_len" is the length of request body in bytes. A request body is sent only if "content_type" and "req_body" are not NULL and not empty, and if "content_len" is greater than zero.<br/>
<br/>
<span style="font-weight:bold;">- Passing environment to service</span><br/>
"env" is any environment variables that should be passed along to the service. You can access those in RimStone via "environment" clause of <a href='/get-sys.html'>get-sys</a> statement. This is an array of strings, where name/value pairs are specified one after the other, and which always must end with NULL. For example, if you want to use variable "REMOTE_USER" with value "John" and variable "MY_VARIABLE" with value "8000", then it might look like this:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_485' class=notranslate>
<span class="Type">char</span> *env[<span class="Constant">5</span>];
env[<span class="Constant">0</span>] = <span class="Constant">&quot;REMOTE_USER&quot;</span>;
env[<span class="Constant">1</span>] = <span class="Constant">&quot;John&quot;</span>
env[<span class="Constant">2</span>] = <span class="Constant">&quot;MY_VARIABLE&quot;</span>;
env[<span class="Constant">3</span>] = <span class="Constant">&quot;8000&quot;</span>
env[<span class="Constant">4</span>] = <span class="Constant">NULL</span>;</pre>
<span id=rimstone_copied_485 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_485' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_485, code_485, rimstone_copied_485)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Thus, if you are passing N environment variables to the service, you must size "env" as "char*" array with 2*N+1 elements. <br/>
<br/>
Note that in order to suppress output of HTTP headers from the service, you can include environment variable "RIM_SILENT_HEADER" with value "yes"; to let the service control headers output (either by default, with "-z" option of <a href='/mrim.html'>mrim</a> or with <a href='/silent-header.html'>silent-header</a>) simply omit this environment variable.<br/>
<br/>
<span style="font-weight:bold;">- Timeout</span><br/>
"timeout" is the number of seconds a call to the service should not exceed. For instance if the remote service is taking too long or if the network connection is too slow, you can limit how long to wait for a reply. If there is no timeout, then "timeout" value should be zero. Note that DNS resolution of the host name (in case you are using a TCP socket) is not counted in timeout. Maximum value for timeout is 86400.<br/>
<br/>
Even if timeout is set to 0, a service call may eventually timeout due to underlying socket and network settings. Note that even if your service call times out, the actual service executing may continue until it's done.<br/>
<span style="font-weight:bold;">- Thread ID</span><br/>
"thread_id" is an integer that you can set and use when your program is multithreaded. By default it's 0. This number is set by you and passed to hooks (your functions called when request is complete or data available). You can use this number to differentiate the data with regards to which thread it belongs to.<br/>
<br/>
<span style="font-weight:bold;">- Completion indicator and return code</span><br/>
When your program is multithreaded, it may be useful to know when (and if) a request has completed. "done" is set to "true" when a request completes, and "return_code" is the return value from rim_cli_request() (see below for a list). In a single-threaded program, this information is self-evident, but if you are running more than one request at the same time (in different threads), you can use these to check on each request executing in parallel (for instance in a loop in the main thread).<br/>
<br/>
Note that "done" is "true" specifically when all the results of a request are available and the request is about to be completed. In a multithreaded program, it means the thread is very soon to terminate or has already terminated; it does not mean that thread has positively terminated. Use standard "pthread_join()" function to make sure the thread has terminated if that is important to you. <br/>
<div class="vsub"><a id="Return value of rim_cli_request()"></a>Return value of rim_cli_request()</div>
The following are possible return values from "rim_cli_request()" (available in "return_code" member of "rim_cli" type):<br/>
<ul><li>RIM_OKAY if request succeeded,<br/>
</li><li>RIM_CLI_ERR_RESOLVE_ADDR if host name for TCP connection cannot be resolved,<br/>
</li><li>RIM_CLI_ERR_PATH_TOO_LONG if path name of Unix socket is too long,<br/>
</li><li>RIM_CLI_ERR_SOCKET if cannot create a socket (for instance they are exhausted for the process or system),<br/>
</li><li>RIM_CLI_ERR_CONNECT if cannot connect to server (TCP or Unix alike),<br/>
</li><li>RIM_CLI_ERR_SOCK_WRITE if cannot write data to server (for instance if server has encountered an error or is down, or if network connection is no longer available),<br/>
</li><li>RIM_CLI_ERR_SOCK_READ if cannot read data from server (for instance if server has encountered an error or is down, or if network connection is no longer available),<br/>
</li><li>RIM_CLI_ERR_PROT_ERR if there is a protocol error, which indicates a protocol issue on either or both sides,<br/>
</li><li>RIM_CLI_ERR_BAD_VER if either side does not support protocol used by the other,<br/>
</li><li>RIM_CLI_ERR_SRV if server cannot complete the request,<br/>
</li><li>RIM_CLI_ERR_UNK if server does not recognize record types used by the client,<br/>
</li><li>RIM_CLI_ERR_OUT_MEM if client is out of memory,<br/>
</li><li>RIM_CLI_ERR_ENV_TOO_LONG if the combined length of all environment variables is too long,<br/>
</li><li>RIM_CLI_ERR_ENV_ODD if the number of supplied environment name/value pairs is incorrect,<br/>
</li><li>RIM_CLI_ERR_BAD_TIMEOUT if the value for timeout is incorrect,<br/>
</li><li>RIM_CLI_ERR_TIMEOUT if the request timed out based on "timeout" parameter or otherwise if the underlying Operating System libraries declared their own timeout.</li></ul>
You can obtain the error message (corresponding to the above return values) in "errm" member of "rim_cli" type.<br/>
<div class="vsub"><a id="Server reply"></a>Server reply</div>
The service reply is split in two. One part is the actual result of processing (called "stdout" or standard output), and that is "data". The other is the error messages (called "stderr" or standard error), and that's "error". All of service output goes to "data", except from <a href='/report-error.html'>report-error</a> and <a href='/print-format.html'>print-format</a> (with "to-error" clause) which goes to "error". Note that "data" and "error" streams can be co-mingled when output by the service, but they will be obtained separately. This allows for clean separation of output from any error messages.<br/>
<br/>
You can obtain service reply when it's ready in its entirety (likely most often used), or as it comes alone bit by bit (see more about asynchronous hooks further here).<br/>
<div class="vsub"><a id="Status of request execution"></a>Status of request execution</div>
"req_status" member of "rim_cli" type is the request status when a request had executed; it is somewhat similar to an exit status of a program. A RimStone service request returns status by means of <a href='/exit-status.html'>exit-status</a> statement. Note that "req_status" is valid only if "rim_cli_request()" returned RIM_OKAY (or if "return_code" is RIM_OKAY for multi-threaded programs).<br/>
<div class="vsub"><a id="Getting data reply (stdout)"></a>Getting data reply (stdout)</div>
Data returned from a request is valid only if "rim_cli_request()" returned RIM_OKAY (or if "return_code" is RIM_OKAY for multi-threaded programs). In that case, use "rim_cli_data()" function, for example:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_487' class=notranslate>
<span class="Comment">// Declare and initialize request variable</span>
rim_cli req = {<span class="Constant">0</span>};
<span class="Comment">// Setup the req variable</span>
<span class="Statement">.</span>..
<span class="Comment">// Execute request</span>
<span class="Statement">if</span> (rim_cli_request (&amp;req) == RIM_OKAY) {
    <span class="Type">char</span> *data = rim_cli_data (req); <span class="Comment">// data response</span>
    <span class="Type">int</span> data_len = req-&gt;data_len; <span class="Comment">// length of data response in bytes</span>
<span class="Statement">}</span></pre>
<span id=rimstone_copied_487 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_487' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_487, code_487, rimstone_copied_487)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
"data_len" member of "rim_cli" type will have the length of data response in bytes. The reply is always null-terminated as a courtesy, and "data_len" does not include the terminating null byte.<br/>
<br/>
"rim_cli_data()" returns the actual response (i.e. data output) from service as passed to "data" stream. Any output from service will go there, except when "to-error" clause is used in <a href='/print-format.html'>print-format</a> - use these constructs to output errors without stopping the service execution. Additionally, the output of <a href='/report-error.html'>report-error</a> will also not go to data output.<br/>
<div class="vsub"><a id="Getting error reply (stderr)"></a>Getting error reply (stderr)</div>
An error reply returned from a service is valid only if "rim_cli_request()" returned RIM_OKAY (or if "return_code" is RIM_OKAY for multi-threaded programs). In that case, use "rim_cli_error()" function, for example:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_488' class=notranslate>
<span class="Comment">// Declare and initialize request variable</span>
rim_cli req = {<span class="Constant">0</span>};
<span class="Comment">// Setup the req variable</span>
<span class="Statement">.</span>..
<span class="Comment">// Execute request</span>
<span class="Statement">if</span> (rim_cli_request (&amp;req) == RIM_OKAY) {
    <span class="Type">char</span> *err = rim_cli_error (req); <span class="Comment">// error response</span>
    <span class="Type">int</span> err_len = req-&gt;error_len; <span class="Comment">// length of error response in bytes</span>
<span class="Statement">}</span></pre>
<span id=rimstone_copied_488 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_488' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_488, code_488, rimstone_copied_488)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
"rim_cli_error()" returns any error messages from a service response, i.e. data passed to "error" stream. It is comprised of any service output when "to-error" clause is used in <a href='/print-format.html'>print-format</a>, as well as any output from <a href='/report-error.html'>report-error</a>. <br/>
<br/>
"error_len" member (of "rim_cli" type above) will have the length of error response in bytes. The response is always null-terminated as a courtesy, and "error_len" does not include the terminating null byte.<br/>
<div class="vsub"><a id="Freeing the result of a request"></a>Freeing the result of a request</div>
Once you have obtained the result of a request, and when no longer needed, you should free it by using "rim_cli_delete()":<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_489' class=notranslate>
<span class="Comment">// Declare and initialize request variable</span>
rim_cli req = {<span class="Constant">0</span>};
<span class="Comment">// Setup the req variable</span>
<span class="Statement">.</span>..
<span class="Comment">// Execute request</span>
rim_cli_request (&amp;req);
<span class="Comment">// .. Use the result ..</span>
<span class="Comment">// Free request output (data and error streams)</span>
rim_cli_delete (&amp;req);</pre>
<span id=rimstone_copied_489 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_489' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_489, code_489, rimstone_copied_489)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
If you do not free the result, your program may experience a memory leak. If your program exits right after issuing any request(s), you may skip freeing results as that is automatically done on exit by the Operating System. <br/>
<br/>
You can use "rim_cli_delete()" regardless of whether "rim_cli_request()" returned RIM_OKAY or not.<br/>
<div class="vsub"><a id="Completion hook"></a>Completion hook</div>
A function you wrote can be called when a request has completed. This is useful in multithreaded invocations, where you may want to receive complete request's results as they are available. To specify a completion hook, you must write a C function with the following signature and assign it to "done_hook" member of "rim_cli" typed variable:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_463' class=notranslate>
<span class="Type">typedef</span> <span class="Type">void</span> (*rim_cli_done_hook)(<span class="Type">char</span> *recv, <span class="Type">int</span> recv_len, <span class="Type">char</span> *err, <span class="Type">int</span> err_len, rim_cli *req);</pre>
<span id=rimstone_copied_463 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_463' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_463, code_463, rimstone_copied_463)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
"recv" is the request's data output, "recv_len" is its length in bytes, "err" is the request's error output, and "err_len" is its length in bytes. "req" is the request itself which you can use to obtain any other information about the request. In a single threaded environment, these are available as members of the request variable of "rim_cli" type used in the request, and there is not much use for a completion hook. <br/>
<br/>
See an example with asynchronous hooks.<br/>
<div class="vsub"><a id="Asynchronous hooks"></a>Asynchronous hooks</div>
You can obtain the service's reply as it arrives by specifying read hooks. This is useful if the service supplies partial replies over a period of time, and your application can get those partial replies as they become available.<br/>
<br/>
To specify a hook for data output (i.e. from stdout), you must write a C function with the following signature and assign it to "out_hook":<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_464' class=notranslate>
<span class="Type">typedef</span> <span class="Type">void</span> (*rim_cli_out_hook)(<span class="Type">char</span> *recv, <span class="Type">int</span> recv_len, rim_cli *req);</pre>
<span id=rimstone_copied_464 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_464' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_464, code_464, rimstone_copied_464)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
"recv" is the data received and "recv_len" is its length.<br/>
<br/>
To specify a hook for error output (i.e. from stderr), you must write a C function with the following signature and assign it to "err_hook":<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_465' class=notranslate>
<span class="Type">typedef</span> <span class="Type">void</span> (*rim_cli_err_hook)(<span class="Type">char</span> *err, <span class="Type">int</span> err_len, rim_cli *req);</pre>
<span id=rimstone_copied_465 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_465' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_465, code_465, rimstone_copied_465)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
"err" is the error received and "err_len" is its length.<br/>
<br/>
"req" (in both hooks) is the request itself which you can use to obtain any other information about the request.<br/>
<br/>
To register these functions with "rim_cli_request()" function, assign their pointers to "out_hook" and "err_hook" members of request variable of type "rim_cli" respectively. Note that the output hook (i.e. hook function of type "rim_cli_out_hook") will receive empty string ("") in "recv" and "recv_len" will be 0 when the request has completed, meaning all service output (including error) has been received. <br/>
<br/>
For example, functions "get_output()" and "get_err()" will capture data as it arrives and print it out, and get_complete() will print the final result:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_466' class=notranslate>
<span class="Comment">// Output hook</span>
<span class="Type">void</span> get_output(<span class="Type">char</span> *d, <span class="Type">int</span> l, rim_cli *req)
<span class="Statement">{</span>
    printf(<span class="Constant">&quot;Got output of [</span><span class="Special">%.*s</span><span class="Constant">] of length [</span><span class="Special">%d</span><span class="Constant">] in thread [</span><span class="Special">%d</span><span class="Constant">]&quot;</span>, l, d, l, req-&gt;thread_id);
<span class="Statement">}</span>

<span class="Comment">// Error hook</span>
<span class="Type">void</span> get_err(<span class="Type">char</span> *d, <span class="Type">int</span> l, rim_cli *req)
<span class="Statement">{</span>
    printf(<span class="Constant">&quot;Got error of [</span><span class="Special">%.*s</span><span class="Constant">] of length [</span><span class="Special">%d</span><span class="Constant">], status [</span><span class="Special">%d</span><span class="Constant">]&quot;</span>, l, d, l, req-&gt;req_status);
<span class="Statement">}</span>

<span class="Comment">// Completion hook</span>
<span class="Type">void</span> get_complete(<span class="Type">char</span> *data, <span class="Type">int</span> data_len, <span class="Type">char</span> *err, <span class="Type">int</span> err_len, rim_cli *req)
<span class="Statement">{</span>
    printf(<span class="Constant">&quot;Got data [</span><span class="Special">%.*s</span><span class="Constant">] of length [</span><span class="Special">%d</span><span class="Constant">] and error of [</span><span class="Special">%.*s</span><span class="Constant">] of length [</span><span class="Special">%d</span><span class="Constant">], status [</span><span class="Special">%d</span><span class="Constant">], thread [</span><span class="Special">%d</span><span class="Constant">]</span><span class="Special">\n</span><span class="Constant">&quot;</span>, data_len, data, data_len, err_len, err, err_len, req-&gt;req_status, req-&gt;thread_id);
<span class="Statement">}</span>

<span class="Statement">.</span>..

rim_cli req = {<span class="Constant">0</span>};
<span class="Statement">.</span>..
<span class="Comment">// Register output and error hooks, as well as a completion hook</span>
req.out_hook = &amp;get_output;
req.err_hook = &amp;get_err;
req.done_hook = &amp;get_complete;</pre>
<span id=rimstone_copied_466 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_466' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_466, code_466, rimstone_copied_466)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<div class="vsub"><a id="Multithreading"></a>Multithreading</div>
The RimStone client is MT-safe, meaning you can use it both in single-threaded and multi-threaded programs. Note that each thread must have its own copy of "rim_cli" request variable, since it provides both input and output parameters to a request call and as such cannot be shared between the threads.<br/>
<div class="vsub"><a id="Usage"></a>Usage</div>
Do not use this API directly with RimStone - use <a href='/call-remote.html'>call-remote</a> instead which is made specifically for use in .rim files. Otherwise, you can use this API with any client program.<br/>
<div class="vsub"><a id="Examples"></a>Examples</div>
<div class="vsub"><a id="Simple example"></a>Simple example</div>
The following example is a simple demonstration, with minimum of options used. Copy the C code to file "cli.c" in a directory of its own:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_467' class=notranslate>
<span class="PreProc">#include </span><span class="Constant">&quot;rcli.h&quot;</span>

<span class="Type">void</span> main ()
<span class="Statement">{</span>
    <span class="Comment">// Request type rim_cli - create a request variable and zero it out</span>
    rim_cli req = {<span class="Constant">0</span>};

    <span class="Comment">// get socket file to communicate with server</span>
    <span class="Type">char</span> dir[RIM_MAX_OS_UDIR_LEN];
    rim_dir (RIM_DIR_SOCKFILE, dir, <span class="Statement">sizeof</span>(dir), <span class="Constant">&quot;helloworld&quot;</span>, <span class="Constant">NULL</span>);
    req.server = dir;

    req.req_method = <span class="Constant">&quot;GET&quot;</span>; <span class="Comment">// GET HTTP method</span>
    req.app_path = <span class="Constant">&quot;/helloworld&quot;</span>; <span class="Comment">// application path</span>
    req.req = <span class="Constant">&quot;/hello-simple&quot;</span>; <span class="Comment">// request name</span>

    <span class="Comment">// Make a request</span>
    <span class="Type">int</span> res = rim_cli_request (&amp;req);

    <span class="Comment">// Check return status, and if there's an error, display error code and the</span>
    <span class="Comment">// corresponding error message. Otherwise, print out service response.</span>
    <span class="Statement">if</span> (res != RIM_OKAY) printf(<span class="Constant">&quot;Request failed [</span><span class="Special">%d</span><span class="Constant">] [</span><span class="Special">%s</span><span class="Constant">]</span><span class="Special">\n</span><span class="Constant">&quot;</span>, res, req.errm);
    <span class="Statement">else</span> printf(<span class="Constant">&quot;</span><span class="Special">%s</span><span class="Constant">&quot;</span>, rim_cli_data(&amp;req));

    <span class="Comment">// Free up resources so there are no memory leaks</span>
    rim_cli_delete(&amp;req);
<span class="Statement">}</span></pre>
<span id=rimstone_copied_467 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_467' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_467, code_467, rimstone_copied_467)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
To make this client application:<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_475' class=notranslate>
gcc <span class="Special">-o</span> cli cli.c <span class="PreProc">$(</span><span class="Special">rim </span><span class="Special">-i</span><span class="PreProc">)</span></pre>
<span id=rimstone_copied_475 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_475' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_475, code_475, rimstone_copied_475)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
In this case, you're using a Unix socket to communicate with the RimStone service. To test with a RimStone service handler, copy the following code to "hello_simple.rim" file in a separate directory:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_468' class=notranslate>
<span class="Statement">begin-handler</span> /hello_simple<span class="Identifier"> public</span>
<span class="Statement">   silent-header</span>
<span class="Statement">   @</span>Hi there!
<span class="Statement">end-handler</span></pre>
<span id=rimstone_copied_468 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_468' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_468, code_468, rimstone_copied_468)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Create and make the RimStone application and run it via local Unix socket:<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_478' class=notranslate>
rim <span class="Special">-k</span> helloworld
rim <span class="Special">-q</span>
mrim <span class="Special">-m</span> quit helloworld
mrim <span class="Special">-w</span> <span class="Constant">1</span> helloworld</pre>
<span id=rimstone_copied_478 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_478' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_478, code_478, rimstone_copied_478)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Run the client:<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_480' class=notranslate>
./cli</pre>
<span id=rimstone_copied_480 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_480' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_480, code_480, rimstone_copied_480)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
The output is, as expected:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_469' class=notranslate>
Hi there!</pre>
<span id=rimstone_copied_469 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_469' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_469, code_469, rimstone_copied_469)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<div class="vsub"><a id="Example with more options"></a>Example with more options</div>
This example demonstrates using multiple options, including using TCP sockets connecting to a host and port number, environment variables, query string, request body and request execution timeout. It will also show the separation of "data" and "error" (i.e. stdout and stderr) streams from the service.<br/>
<br/>
Copy this to file "cli1.c" in a directory of its own - note that in this example a server will run on localhost (127.0.0.1) and TCP port 2301:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_470' class=notranslate>
<span class="PreProc">#include </span><span class="Constant">&quot;rcli.h&quot;</span>

<span class="Type">void</span> main ()
<span class="Statement">{</span>
    <span class="Comment">// Request type rim_cli - create a request variable</span>
    rim_cli req;
    <span class="Comment">// Initialize request</span>
    memset (&amp;req, <span class="Constant">0</span>, <span class="Statement">sizeof</span>(req));

    <span class="Comment">// Add </span><span class="Constant">3</span><span class="Comment"> environment variables (in the form of name, value, name, value, ... , NULL)</span>
    <span class="Type">char</span> *env[] = { <span class="Constant">&quot;REMOTE_USER&quot;</span>, <span class="Constant">&quot;John&quot;</span>, <span class="Constant">&quot;SOME_VAR&quot;</span>, <span class="Constant">&quot;SOME</span><span class="Special">\n</span><span class="Constant">VALUE&quot;</span>, <span class="Constant">&quot;NEW_VAR&quot;</span>, <span class="Constant">&quot;1000&quot;</span>, <span class="Constant">NULL</span> };

    <span class="Comment">// Create a request</span>
    <span class="Comment">// Environment variables to pass to service request</span>
    req.env = env;
    <span class="Comment">// Server IP and port</span>
    req.server = <span class="Constant">&quot;127.0.0.1:2301&quot;</span>;
    <span class="Comment">// Request method</span>
    req.req_method = <span class="Constant">&quot;GET&quot;</span>;
    <span class="Comment">// Application path</span>
    req.app_path = <span class="Constant">&quot;/helloworld&quot;</span>;
    <span class="Comment">// Request</span>
    req.req = <span class="Constant">&quot;/hello&quot;</span>;
    <span class="Comment">// URL parameters (path and query string)</span>
    req.url_params = <span class="Constant">&quot;par1=val1&amp;par2=91&quot;</span>;
    <span class="Comment">// Content type</span>
    req.content_type = <span class="Constant">&quot;application/json&quot;</span>;
    <span class="Comment">// Content (i.e. request body)</span>
    req.req_body = <span class="Constant">&quot;This is request body&quot;</span>;
    <span class="Comment">// Content length</span>
    req.content_len = strlen (req.req_body);
    <span class="Comment">// No timeout (set to </span><span class="Constant">0</span><span class="Comment">)</span>
    req.timeout = <span class="Constant">0</span>;

    <span class="Comment">// Make a request</span>
    <span class="Type">int</span> res = rim_cli_request (&amp;req);

    <span class="Comment">// Check return status, and if there's an error, display error code and the</span>
    <span class="Comment">// corresponding error message</span>
    <span class="Statement">if</span> (res != RIM_OKAY) printf(<span class="Constant">&quot;Request failed [</span><span class="Special">%d</span><span class="Constant">] [</span><span class="Special">%s</span><span class="Constant">]</span><span class="Special">\n</span><span class="Constant">&quot;</span>, res, req.errm);
    <span class="Statement">else</span> {
       <span class="Comment">// If successful, display request results</span>
       <span class="Comment">// Exit code from the service processing</span>
       printf(<span class="Constant">&quot;Server status </span><span class="Special">%d</span><span class="Special">\n</span><span class="Constant">&quot;</span>, req.req_status);
       <span class="Comment">// Length of reply from service</span>
       printf(<span class="Constant">&quot;Len of data </span><span class="Special">%d</span><span class="Special">\n</span><span class="Constant">&quot;</span>, req.data_len);
       <span class="Comment">// Length of any error from service</span>
       printf(<span class="Constant">&quot;Len of error </span><span class="Special">%d</span><span class="Special">\n</span><span class="Constant">&quot;</span>, req.error_len);
       <span class="Comment">// Reply from service</span>
       printf(<span class="Constant">&quot;Data [</span><span class="Special">%s</span><span class="Constant">]</span><span class="Special">\n</span><span class="Constant">&quot;</span>, rim_cli_data(&amp;req));
       <span class="Comment">// Any error message from service</span>
       printf(<span class="Constant">&quot;Error [</span><span class="Special">%s</span><span class="Constant">]</span><span class="Special">\n</span><span class="Constant">&quot;</span>, rim_cli_error(&amp;req));
<span class="Statement">    }</span>

    <span class="Comment">// Free up resources so there are no memory leaks</span>
    rim_cli_delete(&amp;req);
<span class="Statement">}</span></pre>
<span id=rimstone_copied_470 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_470' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_470, code_470, rimstone_copied_470)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Note that the URL parameters (i.e. "req.url_params") could have been written as a combination of a path segment and query string (see <a href='/request.html'>request</a>):<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_471' class=notranslate>
req.url_params = <span class="Constant">&quot;/par1/val1?par2=91&quot;</span>;</pre>
<span id=rimstone_copied_471 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_471' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_471, code_471, rimstone_copied_471)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
or just as a path segment:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_472' class=notranslate>
req.url_params = <span class="Constant">&quot;/par1=val1/par2=91&quot;</span>;</pre>
<span id=rimstone_copied_472 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_472' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_472, code_472, rimstone_copied_472)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
To make this client application:<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_482' class=notranslate>
gcc <span class="Special">-o</span> cli1 cli1.c <span class="PreProc">$(</span><span class="Special">rim </span><span class="Special">-i</span><span class="PreProc">)</span></pre>
<span id=rimstone_copied_482 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_482' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_482, code_482, rimstone_copied_482)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
To test it, you can create a RimStone application. Copy this to "hello.rim" file in a separate directory:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_476' class=notranslate>
<span class="Statement">begin-handler</span> /hello<span class="Identifier"> public</span>
<span class="Statement">    silent-header</span>

    <span class="Comment">// Get request body</span>
<span class="Statement">    request-body</span> rb

    <span class="Comment">// Input params</span>
<span class="Statement">    get-param</span> par1
<span class="Statement">    get-param</span> par2

    <span class="Comment">// Get environment variables passed on from the client</span>
<span class="Statement">    get-sys</span><span class="Identifier"> environment</span> <span class="Constant">&quot;REMOTE_USER&quot;</span><span class="Type"> to</span> ruser
<span class="Statement">    get-sys</span><span class="Identifier"> environment</span> <span class="Constant">&quot;SOME_VAR&quot;</span><span class="Type"> to</span> somev
<span class="Statement">    get-sys</span><span class="Identifier"> environment</span> <span class="Constant">&quot;NEW_VAR&quot;</span><span class="Type"> to</span> newv

    <span class="Comment">// Output, print the environment variables, the PID of server process and the request body received from the client</span>
<span class="Statement">    get-req</span><span class="Identifier"> process-id</span><span class="Type"> to</span> pid
<span class="Statement">    @</span>Hello World! [<span class="Statement">&lt;&lt;print-out</span> ruser<span class="Statement">&gt;&gt;</span>] [<span class="Statement">&lt;&lt;print-out</span> somev<span class="Statement">&gt;&gt;</span>] [<span class="Statement">&lt;&lt;print-out</span> newv<span class="Statement">&gt;&gt;</span>] [<span class="Statement">&lt;&lt;print-out</span> par1<span class="Statement">&gt;&gt;</span>] [<span class="Statement">&lt;&lt;print-out</span> par2<span class="Statement">&gt;&gt;</span>] <span class="Statement">&lt;&lt;print-out</span> pid<span class="Statement">&gt;&gt;</span> <span class="Statement">&lt;&lt;print-out</span> rb<span class="Statement">&gt;&gt;</span>

    <span class="Comment">// Output back a number of lines, generally as </span><span class="Constant">&quot;Output line #&lt;num of line&gt;&quot;</span>
    <span class="Comment">// After line #</span><span class="Constant">1418</span><span class="Comment">, print out </span><span class="Constant">&quot;Line 1419 has an error&quot;</span><span class="Comment"> to stderr</span>
    <span class="Comment">// After line #</span><span class="Constant">4418</span><span class="Comment">, report an error and exit</span>
    <span class="Comment">// This demonstrates outputting data to both stdout and stderr</span>
<span class="Statement">    start-loop</span><span class="Identifier"> repeat</span> <span class="Constant">8000</span><span class="Type"> use</span> i<span class="Identifier"> start-with</span> <span class="Constant">0</span>
<span class="Statement">        @</span>Output line #<span class="Statement">&lt;&lt;print-out</span> i<span class="Statement">&gt;&gt;</span>
<span class="Statement">        if-true</span> i<span class="Identifier"> equal</span> <span class="Constant">1419</span>
<span class="Statement">            print-format</span> <span class="Constant">&quot;Line </span><span class="Special">%ld</span><span class="Constant"> has an error</span><span class="Special">\n</span><span class="Constant">&quot;</span>, i<span class="Identifier"> to-error</span>
<span class="Statement">        end-if</span>
<span class="Statement">        if-true</span> i<span class="Identifier"> equal</span> <span class="Constant">4419</span>
            <span class="Comment">// Exit code of the service execution</span>
<span class="Statement">            exit-status</span> <span class="Constant">82</span>
<span class="Statement">            report-error</span> <span class="Constant">&quot;</span><span class="Special">%s</span><span class="Constant">&quot;</span>, <span class="Constant">&quot;Some error!&quot;</span>
<span class="Statement">        end-if</span>
<span class="Statement">    end-loop</span>
<span class="Statement">end-handler</span></pre>
<span id=rimstone_copied_476 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_476' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_476, code_476, rimstone_copied_476)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Create and make the RimStone application and run it on local TCP port 2301 to match the client above:<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_484' class=notranslate>
rim <span class="Special">-k</span> helloworld
rim <span class="Special">-q</span>
mrim <span class="Special">-m</span> quit helloworld
mrim <span class="Special">-w</span> <span class="Constant">1</span> <span class="Special">-p</span> <span class="Constant">2301</span> helloworld</pre>
<span id=rimstone_copied_484 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_484' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_484, code_484, rimstone_copied_484)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Run the client:<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_486' class=notranslate>
./cli1</pre>
<span id=rimstone_copied_486 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_486' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_486, code_486, rimstone_copied_486)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
The output:<br/>
<div class='ncode' style='position:relative;padding-right:16px;'>
<pre id='code_473' class=notranslate>
Server status 82
Len of data 78530
Len of error 35
Data [Hello World! [John] [SOME
VALUE] [1000] [val1] [91] 263002 This is request body
Output line #0
Output line #1
Output line #2
Output line #3
Output line #4
Output line #5
Output line #6
Output line #7

...
Output line #4413
Output line #4414
Output line #4415
Output line #4416
Output line #4417
Output line #4418
Output line #4419
]
Error [Line 1419 has an error
Some error!
]</pre>
<span id=rimstone_copied_473 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_473' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_473, code_473, rimstone_copied_473)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
The output shows service exit code (82, see <a href='/exit-status.html'>exit-status</a> in the RimStone code above), length of data output, and other information which includes environment variables passed to the service from the client, the PID of server process, the request body from the client, and then the error output. Note that the data output (stdout) and the error output (stderr) are separated, since the protocol does use separate streams over the same connection. This makes working with the output easy, while the data transfer is fast at the same time.<br/>
<div class="vsub"><a id="See also"></a>See also</div>
 <a name='API'></a><span style="font-weight:bold;">API</span><br/>
<a href='/Client-API.html'>Client-API</a> &nbsp;<br/>
<a href='/Client-API-and-messaging.html'>Client-API-and-messaging</a> &nbsp;<br/>
<a href='/Server-API.html'>Server-API</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='/documentation.html'>documentation</a><br/>
<a id='close-file.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:left;background-color:white;'><a href='https://rimstone-lang.com' style='border-bottom:0px'><img src='https://rimstone-lang.com/rimstone.png' style='width:180px;height:auto'/></a></div><div class='vhub' style='margin-top:10px;'>Close file</div><hr/><span style="font-weight:bold;">Purpose</span>: Close file.<br/>
<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_491' class=notranslate>
<span class="Statement">close-file</span><span class="Identifier"> file-id</span> &lt;file id&gt; \
    [<span class="Type"> status</span> &lt;status&gt; ]</pre>
<span id=rimstone_copied_491 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_491' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_491, code_491, rimstone_copied_491)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
close-file closes file &lt;file id&gt; previously opened with <a href='/open-file.html'>open-file</a>, where &lt;file id&gt; is an open file identifier.<br/>
<br/>
You can obtain the status of file closing via &lt;status&gt; number (in "status" clause). The &lt;status&gt; is RIM_OKAY if file is closed, or RIM_ERR_CLOSE if could not close file.<br/>
<br/>
If you do not close a file opened with open-file, RimStone will automatically close it when the request ends.<br/>
<div class="vsub"><a id="Examples"></a>Examples</div>
See <a href='/open-file.html'>open-file</a>.<br/>
<div class="vsub"><a id="See also"></a>See also</div>
 <a name='Files'></a><span style="font-weight:bold;">Files</span><br/>
<a href='/change-mode.html'>change-mode</a> &nbsp;<br/>
<a href='/close-file.html'>close-file</a> &nbsp;<br/>
<a href='/copy-file.html'>copy-file</a> &nbsp;<br/>
<a href='/delete-file.html'>delete-file</a> &nbsp;<br/>
<a href='/file-position.html'>file-position</a> &nbsp;<br/>
<a href='/file-storage.html'>file-storage</a> &nbsp;<br/>
<a href='/file-uploading.html'>file-uploading</a> &nbsp;<br/>
<a href='/get-upload.html'>get-upload</a> &nbsp;<br/>
<a href='/lock-file.html'>lock-file</a> &nbsp;<br/>
<a href='/open-file.html'>open-file</a> &nbsp;<br/>
<a href='/read-file.html'>read-file</a> &nbsp;<br/>
<a href='/read-line.html'>read-line</a> &nbsp;<br/>
<a href='/rename-file.html'>rename-file</a> &nbsp;<br/>
<a href='/stat-file.html'>stat-file</a> &nbsp;<br/>
<a href='/temporary-file.html'>temporary-file</a> &nbsp;<br/>
<a href='/uniq-file.html'>uniq-file</a> &nbsp;<br/>
<a href='/unlock-file.html'>unlock-file</a> &nbsp;<br/>
<a href='/write-file.html'>write-file</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='/documentation.html'>documentation</a><br/>
<a id='code-blocks.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:left;background-color:white;'><a href='https://rimstone-lang.com' style='border-bottom:0px'><img src='https://rimstone-lang.com/rimstone.png' style='width:180px;height:auto'/></a></div><div class='vhub' style='margin-top:10px;'>Code blocks</div><hr/><div class="vsub"><a id="Code blocks"></a>Code blocks</div>
Use curly braces ("{" and "}") to open and close a code block. They create a separate scope for previously non-existing variables defined within them, which begins with "{" and ends with "}". Note that if a variable existed in an outer scope, it cannot be created again in the inner scope; rather it's the same variable.<br/>
<br/>
Note that <a href='/if-true.html'>if-true</a>, <a href='/run-query.html'>run-query</a>, <a href='/start-loop.html'>start-loop</a> and <a href='/read-line.html'>read-line</a> statements contain implicit code blocks, meaning the code between them and the accompanying end-statement is within implicit "{" and "}".<br/>
<div class="vsub"><a id="Examples"></a>Examples</div>
The following code will first print out "outside" and then "inside" twice, illustrating the fact that variable "s1" is defined only in the outer scope once. Variable "s2" exists only in inner scope:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_492' class=notranslate>
<span class="Statement">begin-handler</span> /scope<span class="Identifier"> public</span>
<span class="Statement">    set-string</span> s1=<span class="Constant">&quot;outside&quot;</span>
<span class="Statement">    print-out</span> s1<span class="Identifier"> new-line</span>
<span class="Statement">    {</span>
<span class="Statement">        set-string</span> s1=<span class="Constant">&quot;inside&quot;</span>
<span class="Statement">        print-out</span> s1<span class="Identifier"> new-line</span>
<span class="Statement">    }</span>
<span class="Statement">    print-out</span> s1<span class="Identifier"> new-line</span>
<span class="Statement">end-handler</span></pre>
<span id=rimstone_copied_492 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_492' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_492, code_492, rimstone_copied_492)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<div class="vsub"><a id="See also"></a>See also</div>
 <a name='Program flow'></a><span style="font-weight:bold;">Program flow</span><br/>
<a href='/break-loop.html'>break-loop</a> &nbsp;<br/>
<a href='/call-handler.html'>call-handler</a> &nbsp;<br/>
<a href='/code-blocks.html'>code-blocks</a> &nbsp;<br/>
<a href='/continue-loop.html'>continue-loop</a> &nbsp;<br/>
<a href='/do-once.html'>do-once</a> &nbsp;<br/>
<a href='/exit-handler.html'>exit-handler</a> &nbsp;<br/>
<a href='/if-defined.html'>if-defined</a> &nbsp;<br/>
<a href='/if-true.html'>if-true</a> &nbsp;<br/>
<a href='/quit-process.html'>quit-process</a> &nbsp;<br/>
<a href='/return-handler.html'>return-handler</a> &nbsp;<br/>
<a href='/start-loop.html'>start-loop</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='/documentation.html'>documentation</a><br/>
<a id='command-line.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:left;background-color:white;'><a href='https://rimstone-lang.com' style='border-bottom:0px'><img src='https://rimstone-lang.com/rimstone.png' style='width:180px;height:auto'/></a></div><div class='vhub' style='margin-top:10px;'>Command line</div><hr/>A RimStone application can run as a web application or a command-line program, or both - such as when some requests can be either fulfilled through web interface or executed otherwise (such as on the command line). Note that RimStone produces two separate executables: a <a href='/service.html'>service</a> one and a command-line one - they are different because command-line program does not need the service library and thus is smaller. <br/>
<br/>
The name of the command-line executable is the same as the application name, and its path is (assuming &lt;app name&gt; is the application name):<br/>
<div class='ncode' style='position:relative;padding-right:16px;'>
<pre id='code_493' class=notranslate>
$HOME/.rimstone/apps/&lt;app name&gt;/.bld/&lt;app name&gt;</pre>
<span id=rimstone_copied_493 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_493' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_493, code_493, rimstone_copied_493)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<div class="vsub"><a id="Output"></a>Output</div>
A command-line program works the same way as a service executable, and the output is the same, except that it is directed to stdout (standard output) and stderr (standard error). <br/>
<div class="vsub"><a id="Exit code"></a>Exit code</div>
To specify the exit code of a command-line program, use <a href='/exit-status.html'>exit-status</a>. To exit the program, use <a href='/exit-handler.html'>exit-handler</a>, or otherwise the program will exit when it reaches the end of a <a href='/request.html'>request</a>.<br/>
<div class="vsub"><a id="Executing a request"></a>Executing a request</div>
Here is how to execute a request "add-stock" in application "stock" with parameters "name" having a value of "ABC" and "price" a value of "300":<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_494' class=notranslate>
rim <span class="Special">-r</span> <span class="Special">--app</span><span class="Statement">=</span><span class="Statement">&quot;</span><span class="Constant">/stock</span><span class="Statement">&quot;</span> <span class="Special">--req</span><span class="Statement">=</span><span class="Statement">&quot;</span><span class="Constant">/add-stock?name=ABC&amp;price=300</span><span class="Statement">&quot;</span> <span class="Special">--exec</span></pre>
<span id=rimstone_copied_494 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_494' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_494, code_494, rimstone_copied_494)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Note that you if specify parameters as part of the path, you could write the above the same way as in a URL:<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_495' class=notranslate>
rim <span class="Special">-r</span> <span class="Special">--app</span><span class="Statement">=</span><span class="Statement">&quot;</span><span class="Constant">/stock</span><span class="Statement">&quot;</span> <span class="Special">--req</span><span class="Statement">=</span><span class="Statement">&quot;</span><span class="Constant">/add-stock/name=ABC/price=300</span><span class="Statement">&quot;</span> <span class="Special">--exec</span></pre>
<span id=rimstone_copied_495 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_495' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_495, code_495, rimstone_copied_495)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
You can generate the shell code to execute the above without using <a href='/rim.html'>rim</a> by omitting "--exec" option, for instance:<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_496' class=notranslate>
rim <span class="Special">-r</span> <span class="Special">--app</span><span class="Statement">=</span><span class="Statement">&quot;</span><span class="Constant">/stock</span><span class="Statement">&quot;</span> <span class="Special">--req</span><span class="Statement">=</span><span class="Statement">&quot;</span><span class="Constant">/add-stock/name=ABC/price=300</span><span class="Statement">&quot;</span></pre>
<span id=rimstone_copied_496 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_496' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_496, code_496, rimstone_copied_496)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<div class="vsub"><a id="Including a request body"></a>Including a request body</div>
You can include a request body when executing a singe-run program. It is always included as the standard input (stdin) to the program. <br/>
<br/>
You must provide the length of this input and the type of input, as well as a request method (such as POST, PUT, PATCH, GET, DELETE or any other).<br/>
<br/>
Here is an example of using a request body to make a POST request on the command line - the application name is "json" and request name is "process". File "prices.json" is sent as request body:<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_497' class=notranslate>
rim <span class="Special">-r</span> <span class="Special">--app</span><span class="Statement">=</span>/json <span class="Special">--req</span><span class="Statement">=</span><span class="Statement">'</span><span class="Constant">/process?act=get_total&amp;period=YTD</span><span class="Statement">'</span> <span class="Special">--method</span><span class="Statement">=</span>POST <span class="Special">--content</span><span class="Statement">=</span>prices.json <span class="Special">--content-type</span><span class="Statement">=</span>application/json <span class="Special">--exec</span></pre>
<span id=rimstone_copied_497 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_497' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_497, code_497, rimstone_copied_497)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
You can generate the shell code for the above by omitting "--exec" option of <a href='/rim.html'>rim</a> utility.<br/>
<br/>
Note that you can also include any other headers as environment variables by using the "HTTP_" convention, where custom headers are capitalized with use of underscore for dashes and prefixed with "HTTP_", for example header "RimStone-Header" would be set as:<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_498' class=notranslate>
<span class="Statement">export</span> <span class="Identifier">HTTP_RIM_HEADER</span>=<span class="Statement">&quot;</span><span class="Constant">some value</span><span class="Statement">&quot;</span></pre>
<span id=rimstone_copied_498 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_498' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_498, code_498, rimstone_copied_498)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
You would set the "HTTP_" variable(s) prior to executing the program.<br/>
<div class="vsub"><a id="Suppressing HTTP header output for the entire application"></a>Suppressing HTTP header output for the entire application</div>
If you wish to suppress the output of HTTP headers for all requests, use "--silent-header" option in "rim -r":<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_499' class=notranslate>
rim <span class="Special">-r</span> <span class="Special">--app</span><span class="Statement">=</span><span class="Statement">&quot;</span><span class="Constant">/stock</span><span class="Statement">&quot;</span> <span class="Special">--req</span><span class="Statement">=</span><span class="Statement">&quot;</span><span class="Constant">/add-stock/name=ABC/price=300</span><span class="Statement">&quot;</span> <span class="Special">--exec</span> <span class="Special">--silent-header</span></pre>
<span id=rimstone_copied_499 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_499' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_499, code_499, rimstone_copied_499)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
This will suppress the output of HTTP headers (either the default or with <a href='/out-header.html'>out-header</a>), or for any other case where headers are output. This has the same effect as <a href='/silent-header.html'>silent-header</a>, the only difference is that the environment variable applies to the entire application.<br/>
<div class="vsub"><a id="URL-encoding the input"></a>URL-encoding the input</div>
Any data in "--req" option (and consequently in PATH_INFO or QUERY_STRING environment vairables if calling directly from shell) must be formatted to be a valid URL; for example, data that contains special characters (like "&amp;" or "?") must be URL-encoded, for instance:<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_500' class=notranslate>
rim <span class="Special">-r</span> <span class="Special">--app</span><span class="Statement">=</span><span class="Statement">&quot;</span><span class="Constant">/stock</span><span class="Statement">&quot;</span> <span class="Special">--req</span><span class="Statement">=</span><span class="Statement">&quot;</span><span class="Constant">/add-stock/name=ABC%3F/price=300</span><span class="Statement">&quot;</span></pre>
<span id=rimstone_copied_500 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_500' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_500, code_500, rimstone_copied_500)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
In this case, parameter "name" has value of "ABC?", where special character "?" is encoded as "%3F". <br/>
<br/>
To make sure all your input parameters are properly URL-encoded, you can use RimStone's v1 code processor:<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_501' class=notranslate>
<span class="PreProc">$($(</span><span class="Special">rim </span><span class="Special">-l</span><span class="PreProc">)</span><span class="Special">/v1 </span><span class="Special">-urlencode</span><span class="Special"> </span><span class="Statement">'</span><span class="Constant">&lt;your data&gt;</span><span class="Statement">'</span><span class="PreProc">)</span></pre>
<span id=rimstone_copied_501 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_501' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_501, code_501, rimstone_copied_501)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
For instance, to encode "a?=b" as a parameter:<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_502' class=notranslate>
rim <span class="Special">-r</span> <span class="Special">--app</span><span class="Statement">=</span><span class="Statement">&quot;</span><span class="Constant">/stock</span><span class="Statement">&quot;</span> <span class="Special">--req</span><span class="Statement">=</span><span class="Statement">&quot;</span><span class="Constant">/add-stock/name=</span><span class="PreProc">$($(</span><span class="Special">rim </span><span class="Special">-l</span><span class="PreProc">)</span><span class="Special">/v1 </span><span class="Special">-urlencode</span><span class="Special"> </span><span class="Statement">'</span><span class="Constant">AB?</span><span class="Statement">'</span><span class="PreProc">)</span><span class="Constant">/price=300</span><span class="Statement">&quot;</span></pre>
<span id=rimstone_copied_502 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_502' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_502, code_502, rimstone_copied_502)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
If your parameters do not contain characters that need URL encoding, then you can skip this.<br/>
<div class="vsub"><a id="CGI"></a>CGI</div>
You can also use a command-line program with <a href='/CGI.html'>CGI</a> (Common Gateway Interface). <br/>
<div class="vsub"><a id="See also"></a>See also</div>
 <a name='Running application'></a><span style="font-weight:bold;">Running application</span><br/>
<a href='/application-setup.html'>application-setup</a> &nbsp;<br/>
<a href='/CGI.html'>CGI</a> &nbsp;<br/>
<a href='/command-line.html'>command-line</a> &nbsp;<br/>
<a href='/service.html'>service</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='/documentation.html'>documentation</a><br/>
<a id='commit-transaction.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:left;background-color:white;'><a href='https://rimstone-lang.com' style='border-bottom:0px'><img src='https://rimstone-lang.com/rimstone.png' style='width:180px;height:auto'/></a></div><div class='vhub' style='margin-top:10px;'>Commit transaction</div><hr/><span style="font-weight:bold;">Purpose</span>: Commits a database transaction.<br/>
<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_503' class=notranslate>
<span class="Statement">commit-transaction</span> [ @&lt;database&gt; ] \
    [<span class="Identifier"> on-error-continue</span> |<span class="Identifier"> on-error-exit</span> ] \
    [<span class="Type"> error</span> &lt;error&gt; ] [<span class="Type"> error-text</span> &lt;error text&gt; ] \
    [<span class="Identifier"> options</span> &lt;options&gt; ]</pre>
<span id=rimstone_copied_503 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_503' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_503, code_503, rimstone_copied_503)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Database transaction started with <a href='/begin-transaction.html'>begin-transaction</a> is committed with commit-transaction. <br/>
<br/>
&lt;options&gt; (in "options" clause) is any additional options to send to database you wish to supply for this functionality.<br/>
<br/>
Once you start a transaction with <a href='/begin-transaction.html'>begin-transaction</a>, you must either commit it with <a href='/commit-transaction.html'>commit-transaction</a> or rollback with <a href='/rollback-transaction.html'>rollback-transaction</a>. If you do neither, your transaction will be rolled back once the <a href='/request.html'>request</a> has completed and your program will stop with an error message. This is because opening a transaction and leaving without committing or a rollback is a bug in your program. &nbsp;<br/>
<br/>
You must use begin-transaction, commit-transaction and rollback-transaction instead of calling this functionality through <a href='/run-query.html'>run-query</a>.<br/>
<div class="vsub"><a id="Database"></a>Database</div>
&lt;database&gt; is specified in "@" clause and is the name of the <a href='/database-config-file.html'>database-config-file</a>. If omitted, your program must use exactly one database (see --db option in <a href='/rim.html'>rim</a>).<br/>
<div class="vsub"><a id="Error handling"></a>Error handling</div>
The error code is available in &lt;error&gt; variable in "error" clause - this code is always "0" if successful. The &lt;error&gt; code may or may not be a number but is always returned as a string value. In case of error, error text is available in "error-text" clause in &lt;error text&gt; string.<br/>
<br/>
"on-error-continue" clause specifies that <a href='/request.html'>request</a> processing will continue in case of an error, whereas "on-error-exit" clause specifies that it will exit. This setting overrides database-level <a href='/db-error.html'>db-error</a> for this specific statement only. If you use "on-error-continue", be sure to check the error code.<br/>
<br/>
Note that if database connection was lost, and could not be reestablished, the request will error out (see <a href='/error-handling.html'>error-handling</a>).<br/>
<div class="vsub"><a id="Examples"></a>Examples</div>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_504' class=notranslate>
<span class="Statement">begin-transaction</span> @mydb
<span class="Statement">run-query</span> @mydb=<span class="Constant">&quot;insert into employee (name, dateOfHire) values ('Terry', now())&quot;</span>
<span class="Statement">run-query</span> @mydb=<span class="Constant">&quot;insert into payroll (name, salary) values ('Terry', 100000)&quot;</span>
<span class="Statement">commit-transaction</span> @mydb</pre>
<span id=rimstone_copied_504 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_504' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_504, code_504, rimstone_copied_504)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<div class="vsub"><a id="See also"></a>See also</div>
 <a name='Database'></a><span style="font-weight:bold;">Database</span><br/>
<a href='/begin-transaction.html'>begin-transaction</a> &nbsp;<br/>
<a href='/commit-transaction.html'>commit-transaction</a> &nbsp;<br/>
<a href='/current-row.html'>current-row</a> &nbsp;<br/>
<a href='/database-config-file.html'>database-config-file</a> &nbsp;<br/>
<a href='/db-error.html'>db-error</a> &nbsp;<br/>
<a href='/mariadb-database.html'>mariadb-database</a> &nbsp;<br/>
<a href='/postgresql-database.html'>postgresql-database</a> &nbsp;<br/>
<a href='/rollback-transaction.html'>rollback-transaction</a> &nbsp;<br/>
<a href='/run-query.html'>run-query</a> &nbsp;<br/>
<a href='/sqlite-database.html'>sqlite-database</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='/documentation.html'>documentation</a><br/>
<a id='connect-apache-tcp-socket.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:left;background-color:white;'><a href='https://rimstone-lang.com' style='border-bottom:0px'><img src='https://rimstone-lang.com/rimstone.png' style='width:180px;height:auto'/></a></div><div class='vhub' style='margin-top:10px;'>Connect apache tcp socket</div><hr/>This shows how to connect your application listening on TCP port &lt;port number&gt; (started with "-p" option in <a href='/mrim.html'>mrim</a>) to Apache web server.<br/>
<br/>
<span style="font-weight:bold;">- Step 1</span>:<br/>
To setup Apache as a reverse proxy and connect your application to it, you need to enable FastCGI proxy support, which generally means "proxy" and "proxy_fcgi" modules - this is done <span style="font-style:italic">only once</span>:<br/>
<ul><li>For Debian (like Ubuntu) and OpenSUSE systems you need to enable proxy and proxy_fcgi modules:<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_506' class=notranslate>
sudo a2enmod proxy
sudo a2enmod proxy_fcgi</pre>
<span id=rimstone_copied_506 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_506' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_506, code_506, rimstone_copied_506)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
</li>
<li>For Fedora systems (or others like Archlinux) enable proxy and proxy_fcgi modules by adding (or uncommenting) LoadModule directives in the Apache configuration file - the default location of this file on Linux depends on the distribution. For Fedora (such as RedHat), Archlinux:<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_508' class=notranslate>
sudo vi /etc/httpd/conf/httpd.conf</pre>
<span id=rimstone_copied_508 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_508' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_508, code_508, rimstone_copied_508)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
For OpenSUSE:<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_509' class=notranslate>
sudo vi /etc/apache2/httpd.conf</pre>
<span id=rimstone_copied_509 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_509' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_509, code_509, rimstone_copied_509)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Add this to the end of the file:<br/>
<div class='ncode' style='position:relative;padding-right:16px;'>
<pre id='code_505' class=notranslate>
LoadModule proxy_module modules/mod_proxy.so
LoadModule proxy_fcgi_module modules/mod_proxy_fcgi.so</pre>
<span id=rimstone_copied_505 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_505' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_505, code_505, rimstone_copied_505)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
</li></ul>
<span style="font-weight:bold;">- Step 2</span>:<br/>
Edit the Apache configuration file:<br/>
<ul><li>For Debian (such as Ubuntu):<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_510' class=notranslate>
sudo vi /etc/apache2/apache2.conf</pre>
<span id=rimstone_copied_510 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_510' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_510, code_510, rimstone_copied_510)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
</li>
<li>for Fedora (such as RedHat), Archlinux:<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_511' class=notranslate>
sudo vi /etc/httpd/conf/httpd.conf</pre>
<span id=rimstone_copied_511 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_511' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_511, code_511, rimstone_copied_511)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
</li>
<li>and for OpenSUSE:<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_512' class=notranslate>
sudo vi /etc/apache2/httpd.conf</pre>
<span id=rimstone_copied_512 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_512' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_512, code_512, rimstone_copied_512)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
</li></ul>
Add this to the end of file ("/&lt;app path&gt;" is the application path, see <a href='/request.html'>request</a>):<br/>
<div class='ncode' style='position:relative;padding-right:16px;'>
<pre id='code_507' class=notranslate>
ProxyPass &quot;/&lt;app path&gt;/&quot; fcgi://127.0.0.1:&lt;port number&gt;/</pre>
<span id=rimstone_copied_507 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_507' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_507, code_507, rimstone_copied_507)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<span style="font-weight:bold;">- Step 3</span>:<br/>
Finally, restart Apache. On Debian systems (like Ubuntu) or OpenSUSE:<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_513' class=notranslate>
sudo systemctl restart apache2</pre>
<span id=rimstone_copied_513 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_513' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_513, code_513, rimstone_copied_513)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
On Fedora systems (like RedHat) and Arch Linux:<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_514' class=notranslate>
sudo systemctl restart httpd</pre>
<span id=rimstone_copied_514 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_514' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_514, code_514, rimstone_copied_514)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Note: you must not have any other URL resource that starts with "/&lt;app path&gt;/" (such as for example "/&lt;app path&gt;/something") as the web server will attempt to pass them as a reverse proxy request, and they will likely not work. If you need to, you can change the application path to be different from "/&lt;app path&gt;", see <a href='/request.html'>request</a>.<br/>
<div class="vsub"><a id="See also"></a>See also</div>
 <a name='Web servers'></a><span style="font-weight:bold;">Web servers</span><br/>
<a href='/connect-apache-tcp-socket.html'>connect-apache-tcp-socket</a> &nbsp;<br/>
<a href='/connect-apache-unix-socket.html'>connect-apache-unix-socket</a> &nbsp;<br/>
<a href='/connect-haproxy-tcp-socket.html'>connect-haproxy-tcp-socket</a> &nbsp;<br/>
<a href='/connect-nginx-tcp-socket.html'>connect-nginx-tcp-socket</a> &nbsp;<br/>
<a href='/connect-nginx-unix-socket.html'>connect-nginx-unix-socket</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='/documentation.html'>documentation</a><br/>
<a id='connect-apache-unix-socket.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:left;background-color:white;'><a href='https://rimstone-lang.com' style='border-bottom:0px'><img src='https://rimstone-lang.com/rimstone.png' style='width:180px;height:auto'/></a></div><div class='vhub' style='margin-top:10px;'>Connect apache unix socket</div><hr/>This shows how to connect your application listening on a Unix socket (started with <a href='/mrim.html'>mrim</a>) to Apache web server.<br/>
<br/>
<span style="font-weight:bold;">- Step 1</span>:<br/>
To setup Apache as a reverse proxy and connect your application to it, you need to enable FastCGI proxy support, which generally means "proxy" and "proxy_fcgi" modules - this is done <span style="font-style:italic">only once</span>:<br/>
<ul><li>For Debian (like Ubuntu) and OpenSUSE systems you need to enable proxy and proxy_fcgi modules:<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_516' class=notranslate>
sudo a2enmod proxy
sudo a2enmod proxy_fcgi</pre>
<span id=rimstone_copied_516 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_516' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_516, code_516, rimstone_copied_516)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
</li>
<li>For Fedora systems (or others like Archlinux) enable proxy and proxy_fcgi modules by adding (or uncommenting) LoadModule directives in the Apache configuration file - the default location of this file on Linux depends on the distribution. For Fedora (such as RedHat), Archlinux:<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_518' class=notranslate>
sudo vi /etc/httpd/conf/httpd.conf</pre>
<span id=rimstone_copied_518 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_518' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_518, code_518, rimstone_copied_518)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
For OpenSUSE:<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_519' class=notranslate>
sudo vi /etc/apache2/httpd.conf</pre>
<span id=rimstone_copied_519 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_519' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_519, code_519, rimstone_copied_519)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Add this to the end of the file:<br/>
<div class='ncode' style='position:relative;padding-right:16px;'>
<pre id='code_515' class=notranslate>
LoadModule proxy_module modules/mod_proxy.so
LoadModule proxy_fcgi_module modules/mod_proxy_fcgi.so</pre>
<span id=rimstone_copied_515 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_515' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_515, code_515, rimstone_copied_515)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
</li></ul>
<span style="font-weight:bold;">- Step 2</span>:<br/>
Edit the Apache configuration file:<br/>
<ul><li>For Debian (such as Ubuntu):<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_520' class=notranslate>
sudo vi /etc/apache2/apache2.conf</pre>
<span id=rimstone_copied_520 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_520' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_520, code_520, rimstone_copied_520)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
</li>
<li>for Fedora (such as RedHat), Archlinux:<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_521' class=notranslate>
sudo vi /etc/httpd/conf/httpd.conf</pre>
<span id=rimstone_copied_521 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_521' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_521, code_521, rimstone_copied_521)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
</li>
<li>and for OpenSUSE:<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_522' class=notranslate>
sudo vi /etc/apache2/httpd.conf</pre>
<span id=rimstone_copied_522 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_522' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_522, code_522, rimstone_copied_522)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
</li></ul>
Add this to the end of file ("/&lt;app path&gt;" is the application path (see <a href='/request.html'>request</a>) and "&lt;app name&gt;" is your application name, and &lt;user home dir&gt; is your user home directory):<br/>
<div class='ncode' style='position:relative;padding-right:16px;'>
<pre id='code_517' class=notranslate>
ProxyPass &quot;/&lt;app path&gt;/&quot; unix://&lt;user home dir&gt;/.rimstone/apps/&lt;app name&gt;/sock/.sock|fcgi://localhost/&lt;app path&gt;</pre>
<span id=rimstone_copied_517 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_517' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_517, code_517, rimstone_copied_517)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<span style="font-weight:bold;">- Step 3</span>:<br/>
Finally, restart Apache. On Debian systems (like Ubuntu) or OpenSUSE:<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_523' class=notranslate>
sudo systemctl restart apache2</pre>
<span id=rimstone_copied_523 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_523' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_523, code_523, rimstone_copied_523)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
On Fedora systems (like RedHat) and Arch Linux:<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_524' class=notranslate>
sudo systemctl restart httpd</pre>
<span id=rimstone_copied_524 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_524' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_524, code_524, rimstone_copied_524)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Note: you must not have any other URL resource that starts with "/&lt;app path&gt;/" (such as for example "/&lt;app path&gt;/something") as the web server will attempt to pass them as a reverse proxy request, and they will likely not work. If you need to, you can change the application path to be different from "/&lt;app path&gt;", see <a href='/request.html'>request</a>.<br/>
<div class="vsub"><a id="See also"></a>See also</div>
 <a name='Web servers'></a><span style="font-weight:bold;">Web servers</span><br/>
<a href='/connect-apache-tcp-socket.html'>connect-apache-tcp-socket</a> &nbsp;<br/>
<a href='/connect-apache-unix-socket.html'>connect-apache-unix-socket</a> &nbsp;<br/>
<a href='/connect-haproxy-tcp-socket.html'>connect-haproxy-tcp-socket</a> &nbsp;<br/>
<a href='/connect-nginx-tcp-socket.html'>connect-nginx-tcp-socket</a> &nbsp;<br/>
<a href='/connect-nginx-unix-socket.html'>connect-nginx-unix-socket</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='/documentation.html'>documentation</a><br/>
<a id='connect-haproxy-tcp-socket.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:left;background-color:white;'><a href='https://rimstone-lang.com' style='border-bottom:0px'><img src='https://rimstone-lang.com/rimstone.png' style='width:180px;height:auto'/></a></div><div class='vhub' style='margin-top:10px;'>Connect haproxy tcp socket</div><hr/>This shows how to connect your application listening on TCP port &lt;port number&gt; (started with "-p" option in <a href='/mrim.html'>mrim</a>) to HAProxy load balancer.<br/>
<br/>
One use of HAProxy is to balance the load between different web servers, which in turn are connected to your RimStone applications; in this case HAProxy does not directly communicate with your RimStone applications (which are behind other web servers).<br/>
<br/>
However, when you want HAProxy to directly communicate with your RimStone application servers, you may use configuration similar to this (shown is just a bare-bone setup needed to accomplish the goal, note sections "frontend", "fcgi-app" and "backend" that are relevant to RimStone). The HAProxy configuration file is typically in "/etc/haproxy/haproxy.cfg":<br/>
<div class='ncode' style='position:relative;padding-right:16px;'>
<pre id='code_525' class=notranslate>
global
    user haproxy
    group haproxy
    daemon

defaults
    mode    http
    timeout connect 5000
    timeout client  50000
    timeout server  50000
    errorfile 400 /etc/haproxy/errors/400.http
    errorfile 403 /etc/haproxy/errors/403.http
    errorfile 408 /etc/haproxy/errors/408.http
    errorfile 500 /etc/haproxy/errors/500.http
    errorfile 502 /etc/haproxy/errors/502.http
    errorfile 503 /etc/haproxy/errors/503.http
    errorfile 504 /etc/haproxy/errors/504.http

frontend front_server
    mode http
    bind *:90
    use_backend backend_servers if { path_reg -i ^.*\/&lt;your RimStone app name&gt;\/.*$ } 
    option forwardfor

fcgi-app RimStone-fcgi
    log-stderr global
    docroot &lt;user home dir&gt;/.rimstone/apps/&lt;your RimStone app name&gt;/app
    path-info ^.+(/&lt;your RimStone app name&gt;)(/.+)$ 

backend backend_servers                                                                                                                     
    mode http
    filter fcgi-app RimStone-fcgi
    use-fcgi-app RimStone-fcgi
    server s1 127.0.0.1:3000 proto fcgi</pre>
<span id=rimstone_copied_525 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_525' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_525, code_525, rimstone_copied_525)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Restart HAProxy:<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_526' class=notranslate>
sudo systemctl restart haproxy</pre>
<span id=rimstone_copied_526 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_526' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_526, code_526, rimstone_copied_526)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Note that RimStone application path is "/&lt;your RimStone app name&gt;" (and the application name may or may not be the same, see <a href='/request.html'>request</a>). The TCP port of the application is "3000" (could be any port number you choose that's greater than 1000 and lower than 65535). <br/>
<br/>
HAProxy itself is bound to port 90 in this example (see "frontend" section above), and "path_reg" specifies which URLs will be passed to your RimStone application (i.e. they must have "/&lt;your RimStone app name&gt;/" in the URL). "path-info" specifies SCRIPT_NAME and PATH_INFO (as "()" regular sub-expressions), which are as such passed to your RimStone application. "docroot" is set to the application home directory (see <a href='/directories.html'>directories</a>) in case you wish to serve HTML documents from it; however if you keep sensitive data there, specify another directory.<br/>
<br/>
A RimStone application (named "&lt;your RimStone app name&gt;") would have been started with (using the same application name "&lt;your RimStone app name&gt;" and TCP port "3000"):<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_527' class=notranslate>
mrim <span class="Special">-p</span> <span class="Constant">3000</span> <span class="Statement">&lt;</span>your RimStone app name<span class="Statement">&gt;</span></pre>
<span id=rimstone_copied_527 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_527' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_527, code_527, rimstone_copied_527)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Now you should be able to connect and load-balance your RimStone application servers directly from HAProxy (which in this example listens on port 90, so you'd refer to it with https://your-web-server:90/&lt;your RimStone app name&gt;/...).<br/>
<div class="vsub"><a id="See also"></a>See also</div>
 <a name='Web servers'></a><span style="font-weight:bold;">Web servers</span><br/>
<a href='/connect-apache-tcp-socket.html'>connect-apache-tcp-socket</a> &nbsp;<br/>
<a href='/connect-apache-unix-socket.html'>connect-apache-unix-socket</a> &nbsp;<br/>
<a href='/connect-haproxy-tcp-socket.html'>connect-haproxy-tcp-socket</a> &nbsp;<br/>
<a href='/connect-nginx-tcp-socket.html'>connect-nginx-tcp-socket</a> &nbsp;<br/>
<a href='/connect-nginx-unix-socket.html'>connect-nginx-unix-socket</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='/documentation.html'>documentation</a><br/>
<a id='connect-nginx-tcp-socket.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:left;background-color:white;'><a href='https://rimstone-lang.com' style='border-bottom:0px'><img src='https://rimstone-lang.com/rimstone.png' style='width:180px;height:auto'/></a></div><div class='vhub' style='margin-top:10px;'>Connect nginx tcp socket</div><hr/>This shows how to connect your application listening on TCP port &lt;port number&gt; (started with "-p" option in <a href='/mrim.html'>mrim</a>) to Nginx web server.<br/>
<br/>
<span style="font-weight:bold;">- Step 1</span>:<br/>
You will need to edit the Nginx configuration file. For Ubuntu and similar:<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_529' class=notranslate>
sudo vi /etc/nginx/sites-enabled/default</pre>
<span id=rimstone_copied_529 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_529' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_529, code_529, rimstone_copied_529)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
while on Fedora and other systems it might be at:<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_530' class=notranslate>
sudo vi /etc/nginx/nginx.conf</pre>
<span id=rimstone_copied_530 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_530' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_530, code_530, rimstone_copied_530)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<br/>
Add the following in the "server {}" section ("/&lt;app path&gt;" is the application path, see <a href='/request.html'>request</a>):<br/>
<div class='ncode' style='position:relative;padding-right:16px;'>
<pre id='code_528' class=notranslate>
location /&lt;app path&gt;/ { include /etc/nginx/fastcgi_params; fastcgi_pass  127.0.0.1:&lt;port number&gt;; }</pre>
<span id=rimstone_copied_528 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_528' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_528, code_528, rimstone_copied_528)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<span style="font-weight:bold;">- Step 2</span>:<br/>
Finally, restart Nginx:<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_531' class=notranslate>
sudo systemctl restart nginx</pre>
<span id=rimstone_copied_531 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_531' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_531, code_531, rimstone_copied_531)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Note: you must not have any other URL resource that starts with "/&lt;app path&gt;/" (such as for example "/&lt;app path&gt;/something") as the web server will attempt to pass them as a reverse proxy request, and they will likely not work. If you need to, you can change the application path to be different from "/&lt;app path&gt;", see <a href='/request.html'>request</a>.<br/>
<div class="vsub"><a id="See also"></a>See also</div>
 <a name='Web servers'></a><span style="font-weight:bold;">Web servers</span><br/>
<a href='/connect-apache-tcp-socket.html'>connect-apache-tcp-socket</a> &nbsp;<br/>
<a href='/connect-apache-unix-socket.html'>connect-apache-unix-socket</a> &nbsp;<br/>
<a href='/connect-haproxy-tcp-socket.html'>connect-haproxy-tcp-socket</a> &nbsp;<br/>
<a href='/connect-nginx-tcp-socket.html'>connect-nginx-tcp-socket</a> &nbsp;<br/>
<a href='/connect-nginx-unix-socket.html'>connect-nginx-unix-socket</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='/documentation.html'>documentation</a><br/>
<a id='connect-nginx-unix-socket.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:left;background-color:white;'><a href='https://rimstone-lang.com' style='border-bottom:0px'><img src='https://rimstone-lang.com/rimstone.png' style='width:180px;height:auto'/></a></div><div class='vhub' style='margin-top:10px;'>Connect nginx unix socket</div><hr/>This shows how to connect your application listening on a Unix socket (started with <a href='/mrim.html'>mrim</a>) to Nginx web server.<br/>
<br/>
<span style="font-weight:bold;">- Step 1</span>:<br/>
You will need to edit the Nginx configuration file. For Ubuntu and similar:<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_533' class=notranslate>
sudo vi /etc/nginx/sites-enabled/default</pre>
<span id=rimstone_copied_533 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_533' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_533, code_533, rimstone_copied_533)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
while on Fedora and other systems it might be at:<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_534' class=notranslate>
sudo vi /etc/nginx/nginx.conf</pre>
<span id=rimstone_copied_534 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_534' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_534, code_534, rimstone_copied_534)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<br/>
Add the following in the "server {}" section ("/&lt;app path&gt;" is the application path (see <a href='/request.html'>request</a>), "&lt;app name&gt;" is your application name, and &lt;user home dir&gt; is your user home directory):<br/>
<div class='ncode' style='position:relative;padding-right:16px;'>
<pre id='code_532' class=notranslate>
location /&lt;app path&gt;/ { include /etc/nginx/fastcgi_params; fastcgi_pass  unix://&lt;user home dir&gt;/.rimstone/apps/&lt;app name&gt;/sock/.sock; }</pre>
<span id=rimstone_copied_532 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_532' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_532, code_532, rimstone_copied_532)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<span style="font-weight:bold;">- Step 2</span>:<br/>
Finally, restart Nginx:<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_535' class=notranslate>
sudo systemctl restart nginx</pre>
<span id=rimstone_copied_535 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_535' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_535, code_535, rimstone_copied_535)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Note: you must not have any other URL resource that starts with "/&lt;app path&gt;/" (such as for example "/&lt;app path&gt;/something") as the web server will attempt to pass them as a reverse proxy request, and they will likely not work. If you need to, you can change the application path to be different from "/&lt;app path&gt;", see <a href='/request.html'>request</a>.<br/>
<div class="vsub"><a id="See also"></a>See also</div>
 <a name='Web servers'></a><span style="font-weight:bold;">Web servers</span><br/>
<a href='/connect-apache-tcp-socket.html'>connect-apache-tcp-socket</a> &nbsp;<br/>
<a href='/connect-apache-unix-socket.html'>connect-apache-unix-socket</a> &nbsp;<br/>
<a href='/connect-haproxy-tcp-socket.html'>connect-haproxy-tcp-socket</a> &nbsp;<br/>
<a href='/connect-nginx-tcp-socket.html'>connect-nginx-tcp-socket</a> &nbsp;<br/>
<a href='/connect-nginx-unix-socket.html'>connect-nginx-unix-socket</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='/documentation.html'>documentation</a><br/>
<a id='continue-loop.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:left;background-color:white;'><a href='https://rimstone-lang.com' style='border-bottom:0px'><img src='https://rimstone-lang.com/rimstone.png' style='width:180px;height:auto'/></a></div><div class='vhub' style='margin-top:10px;'>Continue loop</div><hr/><span style="font-weight:bold;">Purpose</span>: Continue to the top of a loop.<br/>
<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_536' class=notranslate>
<span class="Statement">continue-loop</span></pre>
<span id=rimstone_copied_536 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_536' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_536, code_536, rimstone_copied_536)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
continue-loop will continue execution at the top of the loop at <a href='/start-loop.html'>start-loop</a>, <a href='/run-query.html'>run-query</a>, or <a href='/read-line.html'>read-line</a> statements. <br/>
<div class="vsub"><a id="Examples"></a>Examples</div>
Skip the processing if it's the loop #300:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_537' class=notranslate>
<span class="Statement">set-number</span> cont_loop = <span class="Constant">300</span>
<span class="Statement">start-loop</span><span class="Identifier"> repeat</span> <span class="Constant">1000</span><span class="Type"> use</span> i<span class="Identifier"> start-with</span> <span class="Constant">1</span>
<span class="Statement">    if-true</span> i<span class="Identifier"> equal</span> cont_loop
<span class="Statement">        continue-loop</span>
<span class="Statement">    end-if</span>
<span class="Statement">    @</span>Completed <span class="Statement">&lt;&lt;print-out</span> i<span class="Statement">&gt;&gt;</span> loops so far
<span class="Statement">end-loop</span></pre>
<span id=rimstone_copied_537 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_537' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_537, code_537, rimstone_copied_537)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<div class="vsub"><a id="See also"></a>See also</div>
 <a name='Program flow'></a><span style="font-weight:bold;">Program flow</span><br/>
<a href='/break-loop.html'>break-loop</a> &nbsp;<br/>
<a href='/call-handler.html'>call-handler</a> &nbsp;<br/>
<a href='/code-blocks.html'>code-blocks</a> &nbsp;<br/>
<a href='/continue-loop.html'>continue-loop</a> &nbsp;<br/>
<a href='/do-once.html'>do-once</a> &nbsp;<br/>
<a href='/exit-handler.html'>exit-handler</a> &nbsp;<br/>
<a href='/if-defined.html'>if-defined</a> &nbsp;<br/>
<a href='/if-true.html'>if-true</a> &nbsp;<br/>
<a href='/quit-process.html'>quit-process</a> &nbsp;<br/>
<a href='/return-handler.html'>return-handler</a> &nbsp;<br/>
<a href='/start-loop.html'>start-loop</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='/documentation.html'>documentation</a><br/>
<a id='copy-file.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:left;background-color:white;'><a href='https://rimstone-lang.com' style='border-bottom:0px'><img src='https://rimstone-lang.com/rimstone.png' style='width:180px;height:auto'/></a></div><div class='vhub' style='margin-top:10px;'>Copy file</div><hr/><span style="font-weight:bold;">Purpose</span>: Copies one file to another.<br/>
<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_538' class=notranslate>
<span class="Statement">copy-file</span> &lt;source file&gt;<span class="Identifier"> to</span> &lt;target file&gt; [<span class="Type"> status</span> &lt;status&gt; ]</pre>
<span id=rimstone_copied_538 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_538' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_538, code_538, rimstone_copied_538)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
File &lt;source file&gt; is copied into &lt;target file&gt;, which is created if it does not exist. <br/>
<br/>
Status can be obtained in &lt;status&gt; variable, which is RIM_ERR_OPEN if cannot open source file, RIM_ERR_CREATE if cannot create target file, RIM_ERR_READ if cannot read source file, RIM_ERR_WRITE if cannot write target file, or number of bytes copied (including 0) on success. <br/>
<div class="vsub"><a id="Examples"></a>Examples</div>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_539' class=notranslate>
<span class="Statement">copy-file</span> <span class="Constant">&quot;/home/user/source_file&quot;</span><span class="Identifier"> to</span> <span class="Constant">&quot;/home/user/target_file&quot;</span><span class="Type"> status</span> st</pre>
<span id=rimstone_copied_539 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_539' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_539, code_539, rimstone_copied_539)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<div class="vsub"><a id="See also"></a>See also</div>
 <a name='Files'></a><span style="font-weight:bold;">Files</span><br/>
<a href='/change-mode.html'>change-mode</a> &nbsp;<br/>
<a href='/close-file.html'>close-file</a> &nbsp;<br/>
<a href='/copy-file.html'>copy-file</a> &nbsp;<br/>
<a href='/delete-file.html'>delete-file</a> &nbsp;<br/>
<a href='/file-position.html'>file-position</a> &nbsp;<br/>
<a href='/file-storage.html'>file-storage</a> &nbsp;<br/>
<a href='/file-uploading.html'>file-uploading</a> &nbsp;<br/>
<a href='/get-upload.html'>get-upload</a> &nbsp;<br/>
<a href='/lock-file.html'>lock-file</a> &nbsp;<br/>
<a href='/open-file.html'>open-file</a> &nbsp;<br/>
<a href='/read-file.html'>read-file</a> &nbsp;<br/>
<a href='/read-line.html'>read-line</a> &nbsp;<br/>
<a href='/rename-file.html'>rename-file</a> &nbsp;<br/>
<a href='/stat-file.html'>stat-file</a> &nbsp;<br/>
<a href='/temporary-file.html'>temporary-file</a> &nbsp;<br/>
<a href='/uniq-file.html'>uniq-file</a> &nbsp;<br/>
<a href='/unlock-file.html'>unlock-file</a> &nbsp;<br/>
<a href='/write-file.html'>write-file</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='/documentation.html'>documentation</a><br/>
<a id='copysign.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:left;background-color:white;'><a href='https://rimstone-lang.com' style='border-bottom:0px'><img src='https://rimstone-lang.com/rimstone.png' style='width:180px;height:auto'/></a></div><div class='vhub' style='margin-top:10px;'>Copysign</div><hr/><span style="font-weight:bold;">Purpose</span>: copysign<br/>
<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_540' class=notranslate>
copysign( &lt;var1&gt;, &lt;var2&gt; )</pre>
<span id=rimstone_copied_540 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_540' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_540, code_540, rimstone_copied_540)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
copysign returns a value whose absolute value matches that of &lt;var1&gt;, but whose sign bit matches that of &lt;var2&gt;. &lt;var1&gt; and &lt;var2&gt; are a number or a double and the result is a double.<br/>
<div class="vsub"><a id="Examples"></a>Examples</div>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_541' class=notranslate>
<span class="Statement">set-double</span> d = copysign(<span class="Constant">1</span>, -<span class="Constant">2</span>) + <span class="Constant">1</span></pre>
<span id=rimstone_copied_541 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_541' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_541, code_541, rimstone_copied_541)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<div class="vsub"><a id="See also"></a>See also</div>
 <a name='Math functions'></a><span style="font-weight:bold;">Math functions</span><br/>
<a href='/abd.html'>abd</a> &nbsp;<br/>
<a href='/abn.html'>abn</a> &nbsp;<br/>
<a href='/acos.html'>acos</a> &nbsp;<br/>
<a href='/acosh.html'>acosh</a> &nbsp;<br/>
<a href='/asin.html'>asin</a> &nbsp;<br/>
<a href='/asinh.html'>asinh</a> &nbsp;<br/>
<a href='/atan.html'>atan</a> &nbsp;<br/>
<a href='/atan2.html'>atan2</a> &nbsp;<br/>
<a href='/atanh.html'>atanh</a> &nbsp;<br/>
<a href='/cbrt.html'>cbrt</a> &nbsp;<br/>
<a href='/ceil.html'>ceil</a> &nbsp;<br/>
<a href='/copysign.html'>copysign</a> &nbsp;<br/>
<a href='/cos.html'>cos</a> &nbsp;<br/>
<a href='/cosh.html'>cosh</a> &nbsp;<br/>
<a href='/dbl.html'>dbl</a> &nbsp;<br/>
<a href='/erf.html'>erf</a> &nbsp;<br/>
<a href='/erfc.html'>erfc</a> &nbsp;<br/>
<a href='/exp.html'>exp</a> &nbsp;<br/>
<a href='/exp2.html'>exp2</a> &nbsp;<br/>
<a href='/floor.html'>floor</a> &nbsp;<br/>
<a href='/fmod.html'>fmod</a> &nbsp;<br/>
<a href='/hypot.html'>hypot</a> &nbsp;<br/>
<a href='/isinf.html'>isinf</a> &nbsp;<br/>
<a href='/isnan.html'>isnan</a> &nbsp;<br/>
<a href='/ldexp.html'>ldexp</a> &nbsp;<br/>
<a href='/lgamma.html'>lgamma</a> &nbsp;<br/>
<a href='/log.html'>log</a> &nbsp;<br/>
<a href='/log10.html'>log10</a> &nbsp;<br/>
<a href='/log2.html'>log2</a> &nbsp;<br/>
<a href='/math-functions.html'>math-functions</a> &nbsp;<br/>
<a href='/nextafter.html'>nextafter</a> &nbsp;<br/>
<a href='/num.html'>num</a> &nbsp;<br/>
<a href='/pow.html'>pow</a> &nbsp;<br/>
<a href='/round.html'>round</a> &nbsp;<br/>
<a href='/sin.html'>sin</a> &nbsp;<br/>
<a href='/sinh.html'>sinh</a> &nbsp;<br/>
<a href='/sqrt.html'>sqrt</a> &nbsp;<br/>
<a href='/tan.html'>tan</a> &nbsp;<br/>
<a href='/tanh.html'>tanh</a> &nbsp;<br/>
<a href='/trunc.html'>trunc</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='/documentation.html'>documentation</a><br/>
<a id='copy-string.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:left;background-color:white;'><a href='https://rimstone-lang.com' style='border-bottom:0px'><img src='https://rimstone-lang.com/rimstone.png' style='width:180px;height:auto'/></a></div><div class='vhub' style='margin-top:10px;'>Copy string</div><hr/><span style="font-weight:bold;">Purpose</span>: Copies (sub)string to another string.<br/>
<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_542' class=notranslate>
<span class="Statement">copy-string</span> &lt;source string&gt;<span class="Type"> to</span> &lt;dest string&gt; \
    [<span class="Identifier"> start-with</span> &lt;start with&gt; ] \
    [<span class="Identifier"> length</span> &lt;length&gt; ]</pre>
<span id=rimstone_copied_542 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_542' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_542, code_542, rimstone_copied_542)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Use copy-string to copy &lt;source string&gt; to &lt;dest string&gt;, in its entirety or just a part of it.<br/>
<br/>
&lt;start with&gt; number (in "start-with" clause) is the position in &lt;source string&gt; to start copying from, with 0 being the first byte.<br/>
<br/>
Without "length" clause, the whole of &lt;source string&gt; is copied. With "length" clause, exactly &lt;length&gt; bytes are copied into &lt;dest string&gt;.<br/>
<br/>
You can copy a string to itself. In this case, the original string remains and the new string references a copy:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_543' class=notranslate>
<span class="Statement">set-string</span> str = <span class="Constant">&quot;original string&quot;</span> <span class="Comment">// string to change</span>

<span class="Statement">set-string</span> orig = str <span class="Comment">// references original copy of the string to change</span>

<span class="Statement">copy-string</span> str<span class="Type"> to</span> str <span class="Comment">// make a copy of string to change and assign it to itself</span>

<span class="Statement">upper-string</span> str <span class="Comment">// change the copy</span>

<span class="Comment">// Now </span><span class="Constant">&quot;str&quot;</span><span class="Comment"> references </span><span class="Constant">&quot;ORIGINAL STRING&quot;</span><span class="Comment"> </span>
<span class="Comment">// and </span><span class="Constant">&quot;orig&quot;</span><span class="Comment"> references </span><span class="Constant">&quot;original string&quot;</span></pre>
<span id=rimstone_copied_543 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_543' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_543, code_543, rimstone_copied_543)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<div class="vsub"><a id="Substrings within expressions"></a>Substrings within expressions</div>
You can use "@" to extract a substring and use it as a &lt;string&gt; in <a href='/string-expressions.html'>string-expressions</a>; it takes the form of @(&lt;source string&gt;, &lt;start with&gt;, &lt;length&gt;), just like in copy-string. For instance:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_544' class=notranslate>
<span class="Statement">set-string</span> str = <span class="Constant">&quot;some string!&quot;</span>
<span class="Statement">set-string</span> res = @(str, <span class="Constant">5</span>,<span class="Constant">3</span>) + <span class="Constant">&quot; yes!&quot;</span></pre>
<span id=rimstone_copied_544 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_544' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_544, code_544, rimstone_copied_544)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
The value of variable "res" would be "str yes!". The advantage of using @() notation in string expressions is that it is more efficient and of higher performance; a substring is added to other string(s) without being first copied into a separate string.<br/>
<div class="vsub"><a id="Examples"></a>Examples</div>
After copy-string below, "my_str" will be a copy of string "some value":<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_545' class=notranslate>
<span class="Statement">set-string</span> other_string=<span class="Constant">&quot;some value&quot;</span>
<span class="Statement">copy-string</span> other_string<span class="Type"> to</span> my_str</pre>
<span id=rimstone_copied_545 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_545' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_545, code_545, rimstone_copied_545)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Copy certain number of bytes, the result in "my_str" will be "ome":<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_546' class=notranslate>
<span class="Statement">set-string</span> other_string=<span class="Constant">&quot;some value&quot;</span>
<span class="Statement">copy-string</span> other_string<span class="Type"> to</span> my_str<span class="Identifier"> length</span> <span class="Constant">3</span><span class="Identifier"> start-with</span> <span class="Constant">1</span></pre>
<span id=rimstone_copied_546 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_546' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_546, code_546, rimstone_copied_546)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<div class="vsub"><a id="See also"></a>See also</div>
 <a name='Strings'></a><span style="font-weight:bold;">Strings</span><br/>
<a href='/copy-string.html'>copy-string</a> &nbsp;<br/>
<a href='/count-substring.html'>count-substring</a> &nbsp;<br/>
<a href='/delete-string.html'>delete-string</a> &nbsp;<br/>
<a href='/double-string.html'>double-string</a> &nbsp;<br/>
<a href='/lower-string.html'>lower-string</a> &nbsp;<br/>
<a href='/match-regex.html'>match-regex</a> &nbsp;<br/>
<a href='/new-string.html'>new-string</a> &nbsp;<br/>
<a href='/number-string.html'>number-string</a> &nbsp;<br/>
<a href='/read-split.html'>read-split</a> &nbsp;<br/>
<a href='/replace-string.html'>replace-string</a> &nbsp;<br/>
<a href='/scan-string.html'>scan-string</a> &nbsp;<br/>
<a href='/set-string.html'>set-string</a> &nbsp;<br/>
<a href='/split-string.html'>split-string</a> &nbsp;<br/>
<a href='/string-double.html'>string-double</a> &nbsp;<br/>
<a href='/string-expressions.html'>string-expressions</a> &nbsp;<br/>
<a href='/string-length.html'>string-length</a> &nbsp;<br/>
<a href='/string-number.html'>string-number</a> &nbsp;<br/>
<a href='/trim-string.html'>trim-string</a> &nbsp;<br/>
<a href='/upper-string.html'>upper-string</a> &nbsp;<br/>
<a href='/write-string.html'>write-string</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='/documentation.html'>documentation</a><br/>
<a id='cosh.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:left;background-color:white;'><a href='https://rimstone-lang.com' style='border-bottom:0px'><img src='https://rimstone-lang.com/rimstone.png' style='width:180px;height:auto'/></a></div><div class='vhub' style='margin-top:10px;'>Cosh</div><hr/><span style="font-weight:bold;">Purpose</span>: Hyperbolic cosine function.<br/>
<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_549' class=notranslate>
cosh( &lt;var&gt; )</pre>
<span id=rimstone_copied_549 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_549' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_549, code_549, rimstone_copied_549)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
cosh returns hyperbolic cosine of &lt;var&gt;, defined as:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_550' class=notranslate>
cosh(var) = (exp(var) + exp(-var)) / <span class="Constant">2</span></pre>
<span id=rimstone_copied_550 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_550' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_550, code_550, rimstone_copied_550)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
&lt;var&gt; is a number or a double and the result is a double.<br/>
<div class="vsub"><a id="Examples"></a>Examples</div>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_551' class=notranslate>
<span class="Statement">set-double</span> d = cosh(<span class="Constant">1</span>) + <span class="Constant">1</span></pre>
<span id=rimstone_copied_551 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_551' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_551, code_551, rimstone_copied_551)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<div class="vsub"><a id="See also"></a>See also</div>
 <a name='Math functions'></a><span style="font-weight:bold;">Math functions</span><br/>
<a href='/abd.html'>abd</a> &nbsp;<br/>
<a href='/abn.html'>abn</a> &nbsp;<br/>
<a href='/acos.html'>acos</a> &nbsp;<br/>
<a href='/acosh.html'>acosh</a> &nbsp;<br/>
<a href='/asin.html'>asin</a> &nbsp;<br/>
<a href='/asinh.html'>asinh</a> &nbsp;<br/>
<a href='/atan.html'>atan</a> &nbsp;<br/>
<a href='/atan2.html'>atan2</a> &nbsp;<br/>
<a href='/atanh.html'>atanh</a> &nbsp;<br/>
<a href='/cbrt.html'>cbrt</a> &nbsp;<br/>
<a href='/ceil.html'>ceil</a> &nbsp;<br/>
<a href='/copysign.html'>copysign</a> &nbsp;<br/>
<a href='/cos.html'>cos</a> &nbsp;<br/>
<a href='/cosh.html'>cosh</a> &nbsp;<br/>
<a href='/dbl.html'>dbl</a> &nbsp;<br/>
<a href='/erf.html'>erf</a> &nbsp;<br/>
<a href='/erfc.html'>erfc</a> &nbsp;<br/>
<a href='/exp.html'>exp</a> &nbsp;<br/>
<a href='/exp2.html'>exp2</a> &nbsp;<br/>
<a href='/floor.html'>floor</a> &nbsp;<br/>
<a href='/fmod.html'>fmod</a> &nbsp;<br/>
<a href='/hypot.html'>hypot</a> &nbsp;<br/>
<a href='/isinf.html'>isinf</a> &nbsp;<br/>
<a href='/isnan.html'>isnan</a> &nbsp;<br/>
<a href='/ldexp.html'>ldexp</a> &nbsp;<br/>
<a href='/lgamma.html'>lgamma</a> &nbsp;<br/>
<a href='/log.html'>log</a> &nbsp;<br/>
<a href='/log10.html'>log10</a> &nbsp;<br/>
<a href='/log2.html'>log2</a> &nbsp;<br/>
<a href='/math-functions.html'>math-functions</a> &nbsp;<br/>
<a href='/nextafter.html'>nextafter</a> &nbsp;<br/>
<a href='/num.html'>num</a> &nbsp;<br/>
<a href='/pow.html'>pow</a> &nbsp;<br/>
<a href='/round.html'>round</a> &nbsp;<br/>
<a href='/sin.html'>sin</a> &nbsp;<br/>
<a href='/sinh.html'>sinh</a> &nbsp;<br/>
<a href='/sqrt.html'>sqrt</a> &nbsp;<br/>
<a href='/tan.html'>tan</a> &nbsp;<br/>
<a href='/tanh.html'>tanh</a> &nbsp;<br/>
<a href='/trunc.html'>trunc</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='/documentation.html'>documentation</a><br/>
<a id='cos.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:left;background-color:white;'><a href='https://rimstone-lang.com' style='border-bottom:0px'><img src='https://rimstone-lang.com/rimstone.png' style='width:180px;height:auto'/></a></div><div class='vhub' style='margin-top:10px;'>Cos</div><hr/><span style="font-weight:bold;">Purpose</span>: Cosine functions.<br/>
<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_547' class=notranslate>
cos( &lt;var&gt; )</pre>
<span id=rimstone_copied_547 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_547' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_547, code_547, rimstone_copied_547)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
cos returns cosine of &lt;var&gt;, where &lt;var&gt; is given in radians. &lt;var&gt; is a number or a double and the result is a double.<br/>
<div class="vsub"><a id="Examples"></a>Examples</div>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_548' class=notranslate>
<span class="Statement">set-double</span> d = cos(<span class="Constant">1</span>) + <span class="Constant">1</span></pre>
<span id=rimstone_copied_548 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_548' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_548, code_548, rimstone_copied_548)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<div class="vsub"><a id="See also"></a>See also</div>
 <a name='Math functions'></a><span style="font-weight:bold;">Math functions</span><br/>
<a href='/abd.html'>abd</a> &nbsp;<br/>
<a href='/abn.html'>abn</a> &nbsp;<br/>
<a href='/acos.html'>acos</a> &nbsp;<br/>
<a href='/acosh.html'>acosh</a> &nbsp;<br/>
<a href='/asin.html'>asin</a> &nbsp;<br/>
<a href='/asinh.html'>asinh</a> &nbsp;<br/>
<a href='/atan.html'>atan</a> &nbsp;<br/>
<a href='/atan2.html'>atan2</a> &nbsp;<br/>
<a href='/atanh.html'>atanh</a> &nbsp;<br/>
<a href='/cbrt.html'>cbrt</a> &nbsp;<br/>
<a href='/ceil.html'>ceil</a> &nbsp;<br/>
<a href='/copysign.html'>copysign</a> &nbsp;<br/>
<a href='/cos.html'>cos</a> &nbsp;<br/>
<a href='/cosh.html'>cosh</a> &nbsp;<br/>
<a href='/dbl.html'>dbl</a> &nbsp;<br/>
<a href='/erf.html'>erf</a> &nbsp;<br/>
<a href='/erfc.html'>erfc</a> &nbsp;<br/>
<a href='/exp.html'>exp</a> &nbsp;<br/>
<a href='/exp2.html'>exp2</a> &nbsp;<br/>
<a href='/floor.html'>floor</a> &nbsp;<br/>
<a href='/fmod.html'>fmod</a> &nbsp;<br/>
<a href='/hypot.html'>hypot</a> &nbsp;<br/>
<a href='/isinf.html'>isinf</a> &nbsp;<br/>
<a href='/isnan.html'>isnan</a> &nbsp;<br/>
<a href='/ldexp.html'>ldexp</a> &nbsp;<br/>
<a href='/lgamma.html'>lgamma</a> &nbsp;<br/>
<a href='/log.html'>log</a> &nbsp;<br/>
<a href='/log10.html'>log10</a> &nbsp;<br/>
<a href='/log2.html'>log2</a> &nbsp;<br/>
<a href='/math-functions.html'>math-functions</a> &nbsp;<br/>
<a href='/nextafter.html'>nextafter</a> &nbsp;<br/>
<a href='/num.html'>num</a> &nbsp;<br/>
<a href='/pow.html'>pow</a> &nbsp;<br/>
<a href='/round.html'>round</a> &nbsp;<br/>
<a href='/sin.html'>sin</a> &nbsp;<br/>
<a href='/sinh.html'>sinh</a> &nbsp;<br/>
<a href='/sqrt.html'>sqrt</a> &nbsp;<br/>
<a href='/tan.html'>tan</a> &nbsp;<br/>
<a href='/tanh.html'>tanh</a> &nbsp;<br/>
<a href='/trunc.html'>trunc</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='/documentation.html'>documentation</a><br/>
<a id='count-substring.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:left;background-color:white;'><a href='https://rimstone-lang.com' style='border-bottom:0px'><img src='https://rimstone-lang.com/rimstone.png' style='width:180px;height:auto'/></a></div><div class='vhub' style='margin-top:10px;'>Count substring</div><hr/><span style="font-weight:bold;">Purpose</span>: Count substrings.<br/>
<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_552' class=notranslate>
<span class="Statement">count-substring</span> &lt;substring&gt;<span class="Identifier"> in</span> &lt;string&gt;<span class="Type"> to</span> &lt;count&gt; [<span class="Identifier"> case-insensitive</span> [ &lt;case insensitive&gt; ] ]</pre>
<span id=rimstone_copied_552 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_552' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_552, code_552, rimstone_copied_552)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
count-substring counts the number of occurrences of &lt;substring&gt; in &lt;string&gt; and stores the result in &lt;count&gt; (specified in "to" clause). By default, search is case-sensitive. If you use "case-insensitive" clause without boolean variable &lt;case insensitive&gt;, or if &lt;case insensitive&gt; evaluates to true, then the search is case-insensitive.<br/>
<br/>
If &lt;substring&gt; is empty (""), &lt;count&gt; is 0.<br/>
<div class="vsub"><a id="Examples"></a>Examples</div>
In the following example, 1 occurrence will be found after the first count-substring, and 2 after the second (since case insensitive search is used there):<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_553' class=notranslate>
<span class="Statement">set-string</span> sub = <span class="Constant">&quot;world&quot;</span>
<span class="Statement">set-string</span> str = <span class="Constant">&quot;Hello world and hello World!&quot;</span>

<span class="Statement">count-substring</span> sub<span class="Identifier"> in</span> str<span class="Type"> to</span> num_occ
<span class="Statement">print-format</span> <span class="Constant">&quot;Found </span><span class="Special">%ld</span><span class="Constant"> occurrences!</span><span class="Special">\n</span><span class="Constant">&quot;</span>, num_occ

<span class="Statement">count-substring</span> sub<span class="Identifier"> in</span> str<span class="Type"> to</span> num_occ<span class="Identifier"> case-insensitive</span>
<span class="Statement">print-format</span> <span class="Constant">&quot;Found </span><span class="Special">%ld</span><span class="Constant"> occurrences!</span><span class="Special">\n</span><span class="Constant">&quot;</span>, num_occ</pre>
<span id=rimstone_copied_553 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_553' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_553, code_553, rimstone_copied_553)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<div class="vsub"><a id="See also"></a>See also</div>
 <a name='Strings'></a><span style="font-weight:bold;">Strings</span><br/>
<a href='/copy-string.html'>copy-string</a> &nbsp;<br/>
<a href='/count-substring.html'>count-substring</a> &nbsp;<br/>
<a href='/delete-string.html'>delete-string</a> &nbsp;<br/>
<a href='/double-string.html'>double-string</a> &nbsp;<br/>
<a href='/lower-string.html'>lower-string</a> &nbsp;<br/>
<a href='/match-regex.html'>match-regex</a> &nbsp;<br/>
<a href='/new-string.html'>new-string</a> &nbsp;<br/>
<a href='/number-string.html'>number-string</a> &nbsp;<br/>
<a href='/read-split.html'>read-split</a> &nbsp;<br/>
<a href='/replace-string.html'>replace-string</a> &nbsp;<br/>
<a href='/scan-string.html'>scan-string</a> &nbsp;<br/>
<a href='/set-string.html'>set-string</a> &nbsp;<br/>
<a href='/split-string.html'>split-string</a> &nbsp;<br/>
<a href='/string-double.html'>string-double</a> &nbsp;<br/>
<a href='/string-expressions.html'>string-expressions</a> &nbsp;<br/>
<a href='/string-length.html'>string-length</a> &nbsp;<br/>
<a href='/string-number.html'>string-number</a> &nbsp;<br/>
<a href='/trim-string.html'>trim-string</a> &nbsp;<br/>
<a href='/upper-string.html'>upper-string</a> &nbsp;<br/>
<a href='/write-string.html'>write-string</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='/documentation.html'>documentation</a><br/>
<a id='current-row.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:left;background-color:white;'><a href='https://rimstone-lang.com' style='border-bottom:0px'><img src='https://rimstone-lang.com/rimstone.png' style='width:180px;height:auto'/></a></div><div class='vhub' style='margin-top:10px;'>Current row</div><hr/><span style="font-weight:bold;">Purpose</span>: Get or print out the row number of a current row in the result-set of a query.<br/>
<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_554' class=notranslate>
<span class="Statement">current-row</span> [<span class="Identifier"> to</span> &lt;current row&gt; ]</pre>
<span id=rimstone_copied_554 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_554' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_554, code_554, rimstone_copied_554)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Without "to" clause, current-row will print out the current row number. First row is numbered 1. With "to" clause, the row number is stored into variable &lt;current row&gt;. current-row must be within a <a href='/run-query.html'>run-query</a> loop, and it always refers to the most inner one.<br/>
<div class="vsub"><a id="Examples"></a>Examples</div>
Display row number before a line with first and last name for each employee:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_555' class=notranslate>
<span class="Statement">run-query</span> @mydb=<span class="Constant">&quot;select firstName, lastName from employee&quot;</span><span class="Type"> output</span> firstName, lastName
<span class="Statement">    @</span>Row #<span class="Statement">&lt;&lt;current-row&gt;&gt;</span>&lt;br/&gt;
<span class="Statement">    print-out</span> firstName
<span class="Statement">    @</span>,
<span class="Statement">    print-out</span> lastName
<span class="Statement">    @</span>&lt;br/&gt;
<span class="Statement">end-query</span></pre>
<span id=rimstone_copied_555 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_555' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_555, code_555, rimstone_copied_555)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<div class="vsub"><a id="See also"></a>See also</div>
 <a name='Database'></a><span style="font-weight:bold;">Database</span><br/>
<a href='/begin-transaction.html'>begin-transaction</a> &nbsp;<br/>
<a href='/commit-transaction.html'>commit-transaction</a> &nbsp;<br/>
<a href='/current-row.html'>current-row</a> &nbsp;<br/>
<a href='/database-config-file.html'>database-config-file</a> &nbsp;<br/>
<a href='/db-error.html'>db-error</a> &nbsp;<br/>
<a href='/mariadb-database.html'>mariadb-database</a> &nbsp;<br/>
<a href='/postgresql-database.html'>postgresql-database</a> &nbsp;<br/>
<a href='/rollback-transaction.html'>rollback-transaction</a> &nbsp;<br/>
<a href='/run-query.html'>run-query</a> &nbsp;<br/>
<a href='/sqlite-database.html'>sqlite-database</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='/documentation.html'>documentation</a><br/>
<a id='database-config-file.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:left;background-color:white;'><a href='https://rimstone-lang.com' style='border-bottom:0px'><img src='https://rimstone-lang.com/rimstone.png' style='width:180px;height:auto'/></a></div><div class='vhub' style='margin-top:10px;'>Database config file</div><hr/>RimStone application can use any number of databases, with each specified by a database configuration file. This file provides database name, login and connection settings and preferences.<br/>
<br/>
When making a RimStone application, you specify a database vendor and the database configuration file for each database your application uses (see <a href='/rim.html'>rim</a>), for instance:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_557' class=notranslate>
rim ... --db=<span class="Constant">&quot;mariadb:db1 postgres:db2 sqlite:db3&quot;</span>  ...</pre>
<span id=rimstone_copied_557 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_557' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_557, code_557, rimstone_copied_557)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
in which case there are three database configuration files (db1, db2 and db3), with db1 being MariaDB, db2 being PostgreSQL and db3 being SQLite database.<br/>
<br/>
You must create a database configuration file for each database your application uses, and this file must be placed with your source code. Such file will be copied to locations specified and used by RimStone to connect to database(s) (see <a href='/directories.html'>directories</a>). <br/>
<br/>
Each such file contains connection information and authentication to a database, which RimStone uses to login. The names of these configuration files are used in queries. There is no limit on how many databases can be used in your application and those from different vendors can be used in the same application.<br/>
<br/>
An example of database configuration file (in this case MariaDB):<br/>
<div class='ncode' style='position:relative;padding-right:16px;'>
<pre id='code_556' class=notranslate>
[client]
user=mydbuser
password=somepwd
database=mydbname
protocol=TCP
host=127.0.0.1
port=3306</pre>
<span id=rimstone_copied_556 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_556' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_556, code_556, rimstone_copied_556)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<div class="vsub"><a id="Using in your queries"></a>Using in your queries</div>
Database statements that perform queries (such as <a href='/run-query.html'>run-query</a>) must specify the database configuration file used, unless your application uses only a single database. Such configuration is given by "@&lt;database config file&gt;" (for instance in <a href='/run-query.html'>run-query</a> or <a href='/begin-transaction.html'>begin-transaction</a>). For example, in:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_560' class=notranslate>
<span class="Statement">run-query</span> @mydb=<span class="Constant">&quot;select name from employees&quot;</span>
<span class="Statement">.</span>..
<span class="Statement">end-query</span></pre>
<span id=rimstone_copied_560 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_560' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_560, code_560, rimstone_copied_560)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
the query is performed on a database specified by the configuration file "mydb", as in (assuming it's PostgreSQL database):<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_563' class=notranslate>
rim ... --db=<span class="Constant">&quot;postgres:mydb&quot;</span>  ...</pre>
<span id=rimstone_copied_563 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_563' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_563, code_563, rimstone_copied_563)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
You do not need to manually connect to the database; when your application uses it for the first time, a connection is automatically established, and lost connection is automatically re-established when needed. <br/>
<br/>
If a database is the only one used by your application, you can omit it, as in:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_565' class=notranslate>
<span class="Statement">run-query</span> =<span class="Constant">&quot;select name from employees&quot;</span>
<span class="Statement">.</span>..
<span class="Statement">end-query</span></pre>
<span id=rimstone_copied_565 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_565' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_565, code_565, rimstone_copied_565)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<div class="vsub"><a id="Connection settings"></a>Connection settings</div>
The contents of a configuration file depends on the database used:<br/>
<ul><li>MariaDB: see <a href='/mariadb-database.html'>mariadb-database</a><br/>
</li><li>Postgres: see <a href='/postgresql-database.html'>postgresql-database</a><br/>
</li><li>SQLite: see <a href='/sqlite-database.html'>sqlite-database</a><br/>
</li></ul>
<div class="vsub"><a id="Substituting environment variables"></a>Substituting environment variables</div>
You can use environment variables in database configuration files by means of substitution, in the form of "${VAR_NAME}". For example in file "mydb":<br/>
<div class='ncode' style='position:relative;padding-right:16px;'>
<pre id='code_559' class=notranslate>
[client]
user=${DB_USER}
password=${DB_PWD}
database=${DB_NAME}
protocol=TCP
host=127.0.0.1
port=${DB_PORT}</pre>
<span id=rimstone_copied_559 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_559' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_559, code_559, rimstone_copied_559)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Here, environment variables DB_USER, DB_PWD, DB_NAME and DB_PORT are used. They must be defined in the shell environment prior to calling <a href='/rim.html'>rim</a> to make your application (if not defined the value will be empty):<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_558' class=notranslate>
<span class="Comment">#Define environment variables for a configuration file</span>
<span class="Statement">export</span> <span class="Identifier">DB_USER</span>=<span class="Statement">&quot;</span><span class="Constant">my_user</span><span class="Statement">&quot;</span>
<span class="Statement">export</span> <span class="Identifier">DB_PWD</span>=<span class="Statement">&quot;</span><span class="Constant">my_password</span><span class="Statement">&quot;</span>
<span class="Statement">export</span> <span class="Identifier">DB_NAME</span>=<span class="Statement">&quot;</span><span class="Constant">my_database</span><span class="Statement">&quot;</span>
<span class="Statement">export</span> <span class="Identifier">DB_PORT</span>=<span class="Statement">&quot;</span><span class="Constant">3307</span><span class="Statement">&quot;</span>

<span class="Comment">#Make application using the above database configuration file with the environment variables specified</span>
rim <span class="Special">-q</span> <span class="Special">--db</span><span class="Statement">=</span>mariadb:mydb</pre>
<span id=rimstone_copied_558 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_558' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_558, code_558, rimstone_copied_558)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
which results in file $HOME/.rimstone/apps/&lt;app name&gt;/app/db/mydb:<br/>
<div class='ncode' style='position:relative;padding-right:16px;'>
<pre id='code_562' class=notranslate>
[client]
user=my_user
password=my_password
database=my_database
protocol=TCP
host=127.0.0.1
port=3307</pre>
<span id=rimstone_copied_562 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_562' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_562, code_562, rimstone_copied_562)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Besides making application deployment easier, this also adds to its security as the information such as above (including the database password) does not need to be a part of source code and reside in source code control system (such as git).<br/>
<br/>
Your environment variables can have any names, except that they cannot start with an underscore ("_") or be prefixed by "RIM_" or "RIM_", because those variable names are reserved by RimStone.<br/>
<br/>
Note that if your data actually has a dollar sign and is a part of the configuration file, then you can create a variable for it:<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_561' class=notranslate>
<span class="Statement">export</span> <span class="Identifier">DOLLAR_SIGN</span>=<span class="Statement">'</span><span class="Constant">$</span><span class="Statement">'</span></pre>
<span id=rimstone_copied_561 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_561' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_561, code_561, rimstone_copied_561)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
and in the configuration file:<br/>
<div class='ncode' style='position:relative;padding-right:16px;'>
<pre id='code_564' class=notranslate>
..
database=my${DOLLAR_SIGN}database
..</pre>
<span id=rimstone_copied_564 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_564' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_564, code_564, rimstone_copied_564)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
In this case the database name is "my$database".<br/>
<div class="vsub"><a id="See also"></a>See also</div>
 <a name='Database'></a><span style="font-weight:bold;">Database</span><br/>
<a href='/begin-transaction.html'>begin-transaction</a> &nbsp;<br/>
<a href='/commit-transaction.html'>commit-transaction</a> &nbsp;<br/>
<a href='/current-row.html'>current-row</a> &nbsp;<br/>
<a href='/database-config-file.html'>database-config-file</a> &nbsp;<br/>
<a href='/db-error.html'>db-error</a> &nbsp;<br/>
<a href='/mariadb-database.html'>mariadb-database</a> &nbsp;<br/>
<a href='/postgresql-database.html'>postgresql-database</a> &nbsp;<br/>
<a href='/rollback-transaction.html'>rollback-transaction</a> &nbsp;<br/>
<a href='/run-query.html'>run-query</a> &nbsp;<br/>
<a href='/sqlite-database.html'>sqlite-database</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='/documentation.html'>documentation</a><br/>
<a id='db-error.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:left;background-color:white;'><a href='https://rimstone-lang.com' style='border-bottom:0px'><img src='https://rimstone-lang.com/rimstone.png' style='width:180px;height:auto'/></a></div><div class='vhub' style='margin-top:10px;'>Db error</div><hr/><span style="font-weight:bold;">Purpose</span>: Either exit request or continue processing when there is an error in a database statement.<br/>
<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_566' class=notranslate>
<span class="Statement">db-error</span> [ @&lt;database&gt; ] (<span class="Identifier"> exit</span> |<span class="Identifier"> continue</span> )</pre>
<span id=rimstone_copied_566 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_566' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_566, code_566, rimstone_copied_566)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
db-error sets the response to the failure of database statements. You can change this response at run-time with each execution of db-error.<br/>
<br/>
When a database statement (like <a href='/run-query.html'>run-query</a>) fails, RimStone will either exit request processing if "exit" is used, or continue if "continue" is used. "Exiting" is equivalent to calling <a href='/report-error.html'>report-error</a> with the message containing details about the error. "Continuing" means that your program will continue but you should examine error code (see for instance "error" clause in <a href='/run-query.html'>run-query</a>).<br/>
<br/>
The default action is "exit". You can switch back and forth between "exit" and "continue". Typically, "exit" is preferable because errors in database statemets generally mean application or setup issues, however "continue" may be used when application wants to attempt to recover from errors or perform other actions.<br/>
<br/>
Note that you can override the effect of db-error for a specific database statement by using clauses like "on-error-continue" and "on-error-exit" in <a href='/run-query.html'>run-query</a>.<br/>
<div class="vsub"><a id="Database"></a>Database</div>
&lt;database&gt; is specified in "@" clause and is the name of the <a href='/database-config-file.html'>database-config-file</a>. If omitted, your program must use exactly one database (see --db option in <a href='/rim.html'>rim</a>).<br/>
<div class="vsub"><a id="Examples"></a>Examples</div>
The following will not exit when errors happen going forward, but rather continue execution (and you should check every error henceforth):<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_567' class=notranslate>
<span class="Statement">db-error</span> @mydb<span class="Identifier"> continue</span></pre>
<span id=rimstone_copied_567 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_567' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_567, code_567, rimstone_copied_567)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<div class="vsub"><a id="See also"></a>See also</div>
 <a name='Database'></a><span style="font-weight:bold;">Database</span><br/>
<a href='/begin-transaction.html'>begin-transaction</a> &nbsp;<br/>
<a href='/commit-transaction.html'>commit-transaction</a> &nbsp;<br/>
<a href='/current-row.html'>current-row</a> &nbsp;<br/>
<a href='/database-config-file.html'>database-config-file</a> &nbsp;<br/>
<a href='/db-error.html'>db-error</a> &nbsp;<br/>
<a href='/mariadb-database.html'>mariadb-database</a> &nbsp;<br/>
<a href='/postgresql-database.html'>postgresql-database</a> &nbsp;<br/>
<a href='/rollback-transaction.html'>rollback-transaction</a> &nbsp;<br/>
<a href='/run-query.html'>run-query</a> &nbsp;<br/>
<a href='/sqlite-database.html'>sqlite-database</a> &nbsp; <br/>
 <a name='Error handling'></a><span style="font-weight:bold;">Error handling</span><br/>
<a href='/db-error.html'>db-error</a> &nbsp;<br/>
<a href='/error-code.html'>error-code</a> &nbsp;<br/>
<a href='/error-handling.html'>error-handling</a> &nbsp;<br/>
<a href='/report-error.html'>report-error</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='/documentation.html'>documentation</a><br/>
<a id='dbl.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:left;background-color:white;'><a href='https://rimstone-lang.com' style='border-bottom:0px'><img src='https://rimstone-lang.com/rimstone.png' style='width:180px;height:auto'/></a></div><div class='vhub' style='margin-top:10px;'>Dbl</div><hr/><span style="font-weight:bold;">Purpose</span>: Promote a number to a double.<br/>
<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_568' class=notranslate>
dbl( &lt;number&gt; )</pre>
<span id=rimstone_copied_568 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_568' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_568, code_568, rimstone_copied_568)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
dbl returns a double value promoted from a &lt;number&gt;.<br/>
<br/>
There is no need to use dbl() in double expressions, because numbers are automatically promoted to a double. This is because such promotion is lossless.<br/>
<div class="vsub"><a id="Examples"></a>Examples</div>
One example of dbl() use is in conditional statement to compare numbers and doubles when a number is specified first:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_569' class=notranslate>
<span class="Statement">if-true</span> dbl(<span class="Constant">3</span>)<span class="Identifier"> greater-equal</span> <span class="Constant">3</span><span class="Constant">.5</span>
<span class="Statement">    @</span>It would be incorrect if this printed out!
<span class="Statement">end-if</span></pre>
<span id=rimstone_copied_569 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_569' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_569, code_569, rimstone_copied_569)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<div class="vsub"><a id="See also"></a>See also</div>
 <a name='Math functions'></a><span style="font-weight:bold;">Math functions</span><br/>
<a href='/abd.html'>abd</a> &nbsp;<br/>
<a href='/abn.html'>abn</a> &nbsp;<br/>
<a href='/acos.html'>acos</a> &nbsp;<br/>
<a href='/acosh.html'>acosh</a> &nbsp;<br/>
<a href='/asin.html'>asin</a> &nbsp;<br/>
<a href='/asinh.html'>asinh</a> &nbsp;<br/>
<a href='/atan.html'>atan</a> &nbsp;<br/>
<a href='/atan2.html'>atan2</a> &nbsp;<br/>
<a href='/atanh.html'>atanh</a> &nbsp;<br/>
<a href='/cbrt.html'>cbrt</a> &nbsp;<br/>
<a href='/ceil.html'>ceil</a> &nbsp;<br/>
<a href='/copysign.html'>copysign</a> &nbsp;<br/>
<a href='/cos.html'>cos</a> &nbsp;<br/>
<a href='/cosh.html'>cosh</a> &nbsp;<br/>
<a href='/dbl.html'>dbl</a> &nbsp;<br/>
<a href='/erf.html'>erf</a> &nbsp;<br/>
<a href='/erfc.html'>erfc</a> &nbsp;<br/>
<a href='/exp.html'>exp</a> &nbsp;<br/>
<a href='/exp2.html'>exp2</a> &nbsp;<br/>
<a href='/floor.html'>floor</a> &nbsp;<br/>
<a href='/fmod.html'>fmod</a> &nbsp;<br/>
<a href='/hypot.html'>hypot</a> &nbsp;<br/>
<a href='/isinf.html'>isinf</a> &nbsp;<br/>
<a href='/isnan.html'>isnan</a> &nbsp;<br/>
<a href='/ldexp.html'>ldexp</a> &nbsp;<br/>
<a href='/lgamma.html'>lgamma</a> &nbsp;<br/>
<a href='/log.html'>log</a> &nbsp;<br/>
<a href='/log10.html'>log10</a> &nbsp;<br/>
<a href='/log2.html'>log2</a> &nbsp;<br/>
<a href='/math-functions.html'>math-functions</a> &nbsp;<br/>
<a href='/nextafter.html'>nextafter</a> &nbsp;<br/>
<a href='/num.html'>num</a> &nbsp;<br/>
<a href='/pow.html'>pow</a> &nbsp;<br/>
<a href='/round.html'>round</a> &nbsp;<br/>
<a href='/sin.html'>sin</a> &nbsp;<br/>
<a href='/sinh.html'>sinh</a> &nbsp;<br/>
<a href='/sqrt.html'>sqrt</a> &nbsp;<br/>
<a href='/tan.html'>tan</a> &nbsp;<br/>
<a href='/tanh.html'>tanh</a> &nbsp;<br/>
<a href='/trunc.html'>trunc</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='/documentation.html'>documentation</a><br/>
<a id='debugging.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:left;background-color:white;'><a href='https://rimstone-lang.com' style='border-bottom:0px'><img src='https://rimstone-lang.com/rimstone.png' style='width:180px;height:auto'/></a></div><div class='vhub' style='margin-top:10px;'>Debugging</div><hr/><div class="vsub"><a id="Stack traces"></a>Stack traces</div>
If there is an error in a RimStone program (such as trying to access invalid memory, negative status that hasn't been checked etc.), or if there's an internal issue (such as a bug in RimStone), a stack trace is created in trace directory (see <a href='/directories.html'>directories</a>). A single stack trace file is created for each such incident, containing the description of the issue and the file names, function names and line numbers in your source code that led to it. The file names are based on the process-ID of the affected process. There is a limit on how many stack frames RimStone will show this way (from the bottom up) - currently it's 150.<br/>
<div class="vsub"><a id="View stack traces"></a>View stack traces</div>
To see errors reported by RimStone (such as trying to access invalid memory, or crashes; but not those from <a href='/report-error.html'>report-error</a>), use -e option of <a href='/rim.html'>rim</a> to check the stack trace files, which contain the stack along with file names, function names and line numbers. For example, to see the last 3 errors reported:<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_572' class=notranslate>
rim <span class="Special">-e</span> <span class="Constant">3</span></pre>
<span id=rimstone_copied_572 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_572' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_572, code_572, rimstone_copied_572)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Note that function names are decorated; meaning if a request name has a hyphen ("-"), then it is substituted with an underscore ("_") in a function name; if it has a forward slash ("/"), then it is substituted with a double underscore ("__"). For instance, request "request/sub-request" will be internally represented as function "request__sub_request" and will show up like that in a stack trace.<br/>
<div class="vsub"><a id="Output from RimStone service without a web server"></a>Output from RimStone service without a web server</div>
Use <a href='/rim.html'>rim</a> (see -r option) to send a request from command line, and receive reply from your <a href='/service.html'>service</a>s. This is useful in debugging issues and automating tests. For instance, the following will issue a request and receive a reply from your service:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_571' class=notranslate>
rim -r --req=<span class="Constant">&quot;/my-service&quot;</span> --service --exec</pre>
<span id=rimstone_copied_571 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_571' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_571, code_571, rimstone_copied_571)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<div class="vsub"><a id="Issues in starting mrim"></a>Issues in starting mrim</div>
<a href='/mrim.html'>mrim</a> starts your <a href='/service.html'>service</a> process(es). If you're having issues with mrim, check out its log. Assuming your application name is "app-name", the log file is:<br/>
<div class='ncode' style='position:relative;padding-right:16px;'>
<pre id='code_570' class=notranslate>
$HOME/.rimstone/apps/app-name/.mrimlog</pre>
<span id=rimstone_copied_570 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_570' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_570, code_570, rimstone_copied_570)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<div class="vsub"><a id="Web server error log"></a>Web server error log</div>
If you are using a web server as a reverse proxy, check its error log, which would store the error messages emitted. Typically, such files are in the following location:<br/>
<div class='ncode' style='position:relative;padding-right:16px;'>
<pre id='code_573' class=notranslate>
/var/log/&lt;web server&gt;</pre>
<span id=rimstone_copied_573 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_573' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_573, code_573, rimstone_copied_573)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
(for example /var/log/apache2), but the location may vary - consult your web server's documentation.<br/>
<div class="vsub"><a id="Using gdb debugger"></a>Using gdb debugger</div>
In order to use gdb debugger, you don't need to do anything special. RimStone itself as well as applications created with RimStone already come with debugging information.<br/>
<br/>
Ultimately, you can attach a debugger to a running RimStone process. If your application name is "app-name", first find the PID (process ID) of its process(es):<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_574' class=notranslate>
ps <span class="Special">-ef</span>|<span class="Statement">grep</span> app-name.srvc</pre>
<span id=rimstone_copied_574 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_574' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_574, code_574, rimstone_copied_574)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Note that you can control the number of worker processes started, and thus have only a single worker process (or the minimum necessary), which will make attaching to the process that actually processes a request easier (see <a href='/rim.html'>rim</a>).<br/>
<br/>
Use gdb to load your program:<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_576' class=notranslate>
sudo gdb <span class="PreProc">$HOME</span>/.rimstone/apps/app-name/.bld/app-name.srvc</pre>
<span id=rimstone_copied_576 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_576' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_576, code_576, rimstone_copied_576)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
and then attach to the process (&lt;PID&gt; is the process ID you obtained above):<br/>
<div class='ncode' style='position:relative;padding-right:16px;'>
<pre id='code_575' class=notranslate>
att &lt;PID&gt;</pre>
<span id=rimstone_copied_575 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_575' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_575, code_575, rimstone_copied_575)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Once attached, you can break in the request you're debugging:<br/>
<div class='ncode' style='position:relative;padding-right:16px;'>
<pre id='code_577' class=notranslate>
br &lt;request name&gt;</pre>
<span id=rimstone_copied_577 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_577' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_577, code_577, rimstone_copied_577)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
or in general RimStone request dispatcher:<br/>
<div class='ncode' style='position:relative;padding-right:16px;'>
<pre id='code_578' class=notranslate>
br rim_dispatch_request</pre>
<span id=rimstone_copied_578 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_578' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_578, code_578, rimstone_copied_578)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
which would handle any request to your application. Request names are decorated to become function names (see above).<br/>
<br/>
Note that by default, gdb will show RimStone code and you can step through it as you've written it, which is easy to follow and understand. <br/>
<br/>
However, if you wish to step through the underlying C libraries, use "--c-lines" option in <a href='/rim.html'>rim</a> when making your application. <br/>
<div class="vsub"><a id="See also"></a>See also</div>
 <a name='Debugging'></a><span style="font-weight:bold;">Debugging</span><br/>
<a href='/debugging.html'>debugging</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='/documentation.html'>documentation</a><br/>
<a id='decode-base64.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:left;background-color:white;'><a href='https://rimstone-lang.com' style='border-bottom:0px'><img src='https://rimstone-lang.com/rimstone.png' style='width:180px;height:auto'/></a></div><div class='vhub' style='margin-top:10px;'>Decode base64</div><hr/><span style="font-weight:bold;">Purpose</span>: Base64 decode.<br/>
<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_579' class=notranslate>
<span class="Statement">decode-base64</span> &lt;data&gt;<span class="Type"> to</span> &lt;output data&gt; \
    [<span class="Identifier"> input-length</span> &lt;input length&gt; ]</pre>
<span id=rimstone_copied_579 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_579' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_579, code_579, rimstone_copied_579)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
decode-base64 will decode string &lt;data&gt; into &lt;output data&gt;, which can be binary string. <br/>
<br/>
If "input-length" clause is used, then &lt;input length&gt; is the number of bytes decoded, otherwise the entirety of &lt;data&gt; is decoded.<br/>
<br/>
The result is stored in &lt;output data&gt; (in "to" clause).<br/>
<br/>
Note that the string to decode can have whitespaces before it (such as spaces or tabs), and whitespaces and new lines after it, which will all be ignored for the purpose of decoding.<br/>
<div class="vsub"><a id="Examples"></a>Examples</div>
See <a href='/encode-base64.html'>encode-base64</a>.<br/>
<div class="vsub"><a id="See also"></a>See also</div>
 <a name='Base64'></a><span style="font-weight:bold;">Base64</span><br/>
<a href='/decode-base64.html'>decode-base64</a> &nbsp;<br/>
<a href='/encode-base64.html'>encode-base64</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='/documentation.html'>documentation</a><br/>
<a id='decode-hex.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:left;background-color:white;'><a href='https://rimstone-lang.com' style='border-bottom:0px'><img src='https://rimstone-lang.com/rimstone.png' style='width:180px;height:auto'/></a></div><div class='vhub' style='margin-top:10px;'>Decode hex</div><hr/><span style="font-weight:bold;">Purpose</span>: Decode hexadecimal string into data.<br/>
<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_580' class=notranslate>
<span class="Statement">decode-hex</span> &lt;data&gt;<span class="Type"> to</span> &lt;output&gt; \
    [<span class="Identifier"> input-length</span> &lt;input length&gt; ]</pre>
<span id=rimstone_copied_580 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_580' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_580, code_580, rimstone_copied_580)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
decode-hex will decode hexadecimal string &lt;data&gt; to string &lt;output&gt; given in "to" clause. <br/>
<br/>
&lt;data&gt; must consist of an even number of digits 0-9 and letters A-F or a-f. The length of &lt;data&gt; may be given by &lt;input length&gt; number in "input-length" clause, otherwise it is assumed to be the string length of &lt;data&gt;. <br/>
<div class="vsub"><a id="Examples"></a>Examples</div>
Get the original binary data from a hexadecimal string "hexdata". The output string "binout" is created:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_581' class=notranslate>
<span class="Statement">set-string</span> hexdata = <span class="Constant">&quot;0041000F414200&quot;</span>
<span class="Statement">decode-hex</span> hexdata<span class="Type"> to</span> binout</pre>
<span id=rimstone_copied_581 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_581' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_581, code_581, rimstone_copied_581)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
The value of "binout" will be binary data equal to this C literal:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_582' class=notranslate>
<span class="Constant">&quot;</span><span class="Special">\x00</span><span class="Constant">&quot;&quot;A&quot;&quot;</span><span class="Special">\x00</span><span class="Constant">&quot;&quot;</span><span class="Special">\x0F</span><span class="Constant">&quot;&quot;AB&quot;&quot;</span><span class="Special">\x00</span><span class="Constant">&quot;&quot;</span><span class="Special">\x04</span><span class="Constant">&quot;</span></pre>
<span id=rimstone_copied_582 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_582' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_582, code_582, rimstone_copied_582)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<div class="vsub"><a id="See also"></a>See also</div>
 <a name='Hex encoding'></a><span style="font-weight:bold;">Hex encoding</span><br/>
<a href='/decode-hex.html'>decode-hex</a> &nbsp;<br/>
<a href='/encode-hex.html'>encode-hex</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='/documentation.html'>documentation</a><br/>
<a id='decode-url.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:left;background-color:white;'><a href='https://rimstone-lang.com' style='border-bottom:0px'><img src='https://rimstone-lang.com/rimstone.png' style='width:180px;height:auto'/></a></div><div class='vhub' style='margin-top:10px;'>Decode url</div><hr/><span style="font-weight:bold;">Purpose</span>: Decode URL-encoded string.<br/>
<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_583' class=notranslate>
<span class="Statement">decode-url</span> &lt;string&gt; [<span class="Identifier"> input-length</span> &lt;length&gt; ] [<span class="Identifier"> status</span> &lt;status&gt; ]</pre>
<span id=rimstone_copied_583 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_583' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_583, code_583, rimstone_copied_583)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
decode-url will decode &lt;string&gt; (created by <a href='/encode-url.html'>encode-url</a> or other URL-encoding software) and store the result back into &lt;string&gt;. If you need &lt;string&gt; unchanged, make a copy of it first with <a href='/copy-string.html'>copy-string</a>. &lt;length&gt; in "input-length" clause specifies the number of bytes to decode; if omitted or negative, it is the string length of &lt;string&gt;.<br/>
<br/>
All encoded values (starting with %) are decoded, and "+" (plus sign) is converted to space. <br/>
<br/>
&lt;status&gt; number (in "status" clause) is RIM_OKAY if all bytes decoded successfully, or in case of an error it is the index of the byte that could not be decoded (first byte is indexed "0"). If there is an error (for example hexadecimal value following % is invalid), the decoding stops and whatever was decoded up to that point is the result.<br/>
<div class="vsub"><a id="Examples"></a>Examples</div>
Decode URL-encoded string "str", after which it will hold a decoded string. <br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_584' class=notranslate>
<span class="Statement">decode-url</span> str</pre>
<span id=rimstone_copied_584 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_584' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_584, code_584, rimstone_copied_584)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<div class="vsub"><a id="See also"></a>See also</div>
 <a name='URL encoding'></a><span style="font-weight:bold;">URL encoding</span><br/>
<a href='/decode-url.html'>decode-url</a> &nbsp;<br/>
<a href='/encode-url.html'>encode-url</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='/documentation.html'>documentation</a><br/>
<a id='decode-web.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:left;background-color:white;'><a href='https://rimstone-lang.com' style='border-bottom:0px'><img src='https://rimstone-lang.com/rimstone.png' style='width:180px;height:auto'/></a></div><div class='vhub' style='margin-top:10px;'>Decode web</div><hr/><span style="font-weight:bold;">Purpose</span>: Decode web(HTML)-encoded string.<br/>
<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_585' class=notranslate>
<span class="Statement">decode-web</span> &lt;string&gt; [<span class="Identifier"> input-length</span> &lt;length&gt; ]</pre>
<span id=rimstone_copied_585 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_585' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_585, code_585, rimstone_copied_585)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
decode-web will decode &lt;string&gt; (created by <a href='/encode-web.html'>encode-web</a> or other web-encoding software) and store the result back into it. If you need &lt;string&gt; unchanged, make a copy of it first with <a href='/copy-string.html'>copy-string</a>. To decode only a number of leading bytes in &lt;string&gt;, use "input-length" clause and specify &lt;length&gt;.<br/>
<br/>
See <a href='/encode-web.html'>encode-web</a>.<br/>
<div class="vsub"><a id="Examples"></a>Examples</div>
Decode web-encoded string "str", after which it will hold a decoded string. <br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_586' class=notranslate>
<span class="Statement">decode-web</span> str</pre>
<span id=rimstone_copied_586 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_586' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_586, code_586, rimstone_copied_586)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<div class="vsub"><a id="See also"></a>See also</div>
 <a name='Web encoding'></a><span style="font-weight:bold;">Web encoding</span><br/>
<a href='/decode-web.html'>decode-web</a> &nbsp;<br/>
<a href='/encode-web.html'>encode-web</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='/documentation.html'>documentation</a><br/>
<a id='decrypt-data.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:left;background-color:white;'><a href='https://rimstone-lang.com' style='border-bottom:0px'><img src='https://rimstone-lang.com/rimstone.png' style='width:180px;height:auto'/></a></div><div class='vhub' style='margin-top:10px;'>Decrypt data</div><hr/><span style="font-weight:bold;">Purpose</span>: Decrypt data.<br/>
<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_587' class=notranslate>
<span class="Statement">decrypt-data</span> &lt;data&gt;<span class="Type"> to</span> &lt;result&gt; \
    [<span class="Identifier"> input-length</span> &lt;input length&gt; ] \
    [<span class="Identifier"> binary</span> [ &lt;binary&gt; ] ] \
    (<span class="Identifier"> password</span> &lt;password&gt; \
        [<span class="Identifier"> salt</span> &lt;salt&gt; [<span class="Identifier"> salt-length</span> &lt;salt length&gt; ] ] \
        [<span class="Identifier"> iterations</span> &lt;iterations&gt; ] \
        [<span class="Identifier"> cipher</span> &lt;cipher algorithm&gt; ] \
        [<span class="Identifier"> digest</span> &lt;digest algorithm&gt; ]
        [<span class="Identifier"> cache</span> ]
        [<span class="Identifier"> clear-cache</span> &lt;clear cache&gt; <span class="Error">)</span> \
    [<span class="Identifier"> init-vector</span> &lt;init vector&gt; ]</pre>
<span id=rimstone_copied_587 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_587' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_587, code_587, rimstone_copied_587)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
decrypt-data will decrypt &lt;data&gt; which must have been encrypted with <a href='/encrypt-data.html'>encrypt-data</a>, or other software using the same algorithms and clauses as specified. <br/>
<br/>
If "input-length" clause is not used, then the number of bytes decrypted is the length of &lt;data&gt; (see <a href='/string-length.html'>string-length</a>); if "input-length" is specified, then exactly &lt;input length&gt; bytes are decrypted. Password used for decryption is string &lt;password&gt; (in "password" clause) and it must match the password used in <a href='/encrypt-data.html'>encrypt-data</a>. If "salt" clause is used, then string &lt;salt&gt; must match the salt used in encryption. If "init-vector" clause is used, then string &lt;init vector&gt; must match the IV (initialization vector) used in encryption. If "iterations" clause is used, then &lt;iterations&gt; must match the number used in encryption.<br/>
<br/>
The result of decryption is in &lt;result&gt; (in "to" clause).<br/>
<br/>
If data was encrypted in binary mode (see <a href='/encrypt-data.html'>encrypt-data</a>), you must decrypt it with the same, and if it wasn't, then you must not use it in decrypt-data either. The reason for this is obvious - binary mode of encryption is encrypted data in its shortest form, and character mode (without "binary" or if &lt;binary&gt; evaluates to false) is the same data converted to a hexadecimal string - thus decryption must first convert such data back to binary before decrypting.<br/>
<br/>
The cipher and digest algorithms (if specified as &lt;cipher algorithm&gt; and &lt;digest algorithm&gt; in "cipher" and "digest" clauses respectively) must match what was used in <a href='/encrypt-data.html'>encrypt-data</a>.<br/>
<br/>
"cache" clause is used to cache the result of key computation, so it is not computed each time decryption takes place, while "clear-cache" allows key to be re-computed every time &lt;clear cache&gt; evaluates to boolean true; re-computation of a key, if used, must match the usage during encryption. For more on "cache" and "clear-cache" clauses, as well as safety of encrypting/decrypting, see "Caching key" and "Safety" in <a href='/encrypt-data.html'>encrypt-data</a>.<br/>
<div class="vsub"><a id="Examples"></a>Examples</div>
See <a href='/encrypt-data.html'>encrypt-data</a>.<br/>
<div class="vsub"><a id="See also"></a>See also</div>
 <a name='Encryption'></a><span style="font-weight:bold;">Encryption</span><br/>
<a href='/decrypt-data.html'>decrypt-data</a> &nbsp;<br/>
<a href='/derive-key.html'>derive-key</a> &nbsp;<br/>
<a href='/encrypt-data.html'>encrypt-data</a> &nbsp;<br/>
<a href='/hash-string.html'>hash-string</a> &nbsp;<br/>
<a href='/hmac-string.html'>hmac-string</a> &nbsp;<br/>
<a href='/random-crypto.html'>random-crypto</a> &nbsp;<br/>
<a href='/random-string.html'>random-string</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='/documentation.html'>documentation</a><br/>
<a id='delete-cookie.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:left;background-color:white;'><a href='https://rimstone-lang.com' style='border-bottom:0px'><img src='https://rimstone-lang.com/rimstone.png' style='width:180px;height:auto'/></a></div><div class='vhub' style='margin-top:10px;'>Delete cookie</div><hr/><span style="font-weight:bold;">Purpose</span>: Deletes a cookie.<br/>
<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_588' class=notranslate>
<span class="Statement">delete-cookie</span> &lt;cookie name&gt; [<span class="Identifier"> path</span> &lt;cookie path&gt; ] [<span class="Type"> status</span> &lt;status&gt; ] [<span class="Identifier"> secure</span> &lt;secure&gt; ]</pre>
<span id=rimstone_copied_588 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_588' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_588, code_588, rimstone_copied_588)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
delete-cookie marks a cookie named &lt;cookie name&gt; for deletion, so it is sent back in the reply telling the client (such as browser) to delete it. <br/>
<br/>
Newer client implementations require a cookie deletion to use a secure context if the cookie is considered secure, and it is recommended to use "secure" clause to delete such a cookie. This is the case when either "secure" clause is used without boolean variable &lt;secure&gt;, or if &lt;secure&gt; evaluates to true.<br/>
<br/>
&lt;cookie name&gt; is a cookie that was either received from the client as a part of the request, or was added with <a href='/set-cookie.html'>set-cookie</a>. <br/>
<br/>
A cookie can be deleted before or after header is sent out (see <a href='/out-header.html'>out-header</a>). However a cookie must be deleted prior to outputting any actual response (such as with <a href='/output-statement.html'>output-statement</a> or <a href='/print-out.html'>print-out</a> for example), or the request will error out (see <a href='/error-handling.html'>error-handling</a>).<br/>
<br/>
&lt;status&gt; (in "status" clause) is a number that will be RIM_ERR_EXIST if the cookie did not exist, or RIM_OKAY if it did.<br/>
<br/>
The same cookie name may be stored under different URL paths. You can use "path" clause to specify &lt;cookie path&gt; to ensure the desired cookie is deleted. <br/>
<div class="vsub"><a id="Examples"></a>Examples</div>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_589' class=notranslate>
<span class="Statement">delete-cookie</span> <span class="Constant">&quot;my_cookie&quot;</span>
<span class="Statement">set-bool</span> is_secure = <span class="Constant">true</span>
<span class="Statement">delete-cookie</span> <span class="Constant">&quot;my_cookie&quot;</span><span class="Identifier"> path</span> <span class="Constant">&quot;/path&quot;</span><span class="Identifier"> secure</span> is_secure</pre>
<span id=rimstone_copied_589 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_589' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_589, code_589, rimstone_copied_589)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<div class="vsub"><a id="See also"></a>See also</div>
 <a name='Cookies'></a><span style="font-weight:bold;">Cookies</span><br/>
<a href='/delete-cookie.html'>delete-cookie</a> &nbsp;<br/>
<a href='/get-cookie.html'>get-cookie</a> &nbsp;<br/>
<a href='/set-cookie.html'>set-cookie</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='/documentation.html'>documentation</a><br/>
<a id='delete-dir.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:left;background-color:white;'><a href='https://rimstone-lang.com' style='border-bottom:0px'><img src='https://rimstone-lang.com/rimstone.png' style='width:180px;height:auto'/></a></div><div class='vhub' style='margin-top:10px;'>Delete dir</div><hr/><span style="font-weight:bold;">Purpose</span>: Delete directory.<br/>
<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_590' class=notranslate>
<span class="Statement">delete-dir</span> &lt;directory&gt; [<span class="Type"> status</span> &lt;status&gt; ]</pre>
<span id=rimstone_copied_590 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_590' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_590, code_590, rimstone_copied_590)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
delete-dir will delete &lt;directory&gt;, which is a string that may be an absolute or relative path. <br/>
<br/>
If "status" clause is used, then number &lt;status&gt; is RIM_OKAY if succeeded, RIM_ERR_EXIST if directory is not empty, or RIM_ERR_FAILED for other errors (in which case you can use "errno" clause in <a href='/get-req.html'>get-req</a> to find the specific reason why).<br/>
<div class="vsub"><a id="Examples"></a>Examples</div>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_591' class=notranslate>
<span class="Statement">delete-dir</span> <span class="Constant">&quot;/home/user/some_dir&quot;</span></pre>
<span id=rimstone_copied_591 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_591' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_591, code_591, rimstone_copied_591)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<div class="vsub"><a id="See also"></a>See also</div>
 <a name='Directories'></a><span style="font-weight:bold;">Directories</span><br/>
<a href='/change-dir.html'>change-dir</a> &nbsp;<br/>
<a href='/change-mode.html'>change-mode</a> &nbsp;<br/>
<a href='/delete-dir.html'>delete-dir</a> &nbsp;<br/>
<a href='/directories.html'>directories</a> &nbsp;<br/>
<a href='/new-dir.html'>new-dir</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='/documentation.html'>documentation</a><br/>
<a id='delete-fifo.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:left;background-color:white;'><a href='https://rimstone-lang.com' style='border-bottom:0px'><img src='https://rimstone-lang.com/rimstone.png' style='width:180px;height:auto'/></a></div><div class='vhub' style='margin-top:10px;'>Delete fifo</div><hr/><span style="font-weight:bold;">Purpose</span>: Delete FIFO list elements up to the last one read, including.<br/>
<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_592' class=notranslate>
<span class="Statement">delete-fifo</span> &lt;list&gt;</pre>
<span id=rimstone_copied_592 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_592' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_592, code_592, rimstone_copied_592)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
delete-fifo will delete all leading elements from the FIFO &lt;list&gt; up to the last one read, including. &lt;list&gt; was created by <a href='/new-fifo.html'>new-fifo</a>. <br/>
<br/>
Right after <a href='/rewind-fifo.html'>rewind-fifo</a>, no element was read yet, and delete-fifo will have no effect. After any <a href='/read-fifo.html'>read-fifo</a>, delete-fifo wil delete all elements up to the element read, including that element.<br/>
<div class="vsub"><a id="Examples"></a>Examples</div>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_593' class=notranslate>
<span class="Statement">new-fifo</span> mylist

<span class="Comment">// Add data to the list</span>
<span class="Statement">write-fifo</span> mylist<span class="Identifier"> key</span> <span class="Constant">&quot;key1&quot;</span><span class="Identifier"> value</span> <span class="Constant">&quot;value1&quot;</span>
<span class="Statement">write-fifo</span> mylist<span class="Identifier"> key</span> <span class="Constant">&quot;some2&quot;</span><span class="Identifier"> value</span> <span class="Constant">&quot;other2&quot;</span>

<span class="Comment">// Get first data from the list</span>
<span class="Statement">read-fifo</span> mylist<span class="Type"> key</span> k<span class="Type"> value</span> v

<span class="Comment">// Delete first element from the list, so list will have only </span><span class="Constant">&quot;some2&quot;</span><span class="Comment"> key</span>
<span class="Statement">delete-fifo</span> mylist</pre>
<span id=rimstone_copied_593 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_593' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_593, code_593, rimstone_copied_593)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<div class="vsub"><a id="See also"></a>See also</div>
 <a name='FIFO'></a><span style="font-weight:bold;">FIFO</span><br/>
<a href='/delete-fifo.html'>delete-fifo</a> &nbsp;<br/>
<a href='/new-fifo.html'>new-fifo</a> &nbsp;<br/>
<a href='/purge-fifo.html'>purge-fifo</a> &nbsp;<br/>
<a href='/read-fifo.html'>read-fifo</a> &nbsp;<br/>
<a href='/rewind-fifo.html'>rewind-fifo</a> &nbsp;<br/>
<a href='/write-fifo.html'>write-fifo</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='/documentation.html'>documentation</a><br/>
<a id='delete-file.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:left;background-color:white;'><a href='https://rimstone-lang.com' style='border-bottom:0px'><img src='https://rimstone-lang.com/rimstone.png' style='width:180px;height:auto'/></a></div><div class='vhub' style='margin-top:10px;'>Delete file</div><hr/><span style="font-weight:bold;">Purpose</span>: Deletes a file.<br/>
<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_594' class=notranslate>
<span class="Statement">delete-file</span> &lt;file location&gt; [<span class="Type"> status</span> &lt;status var&gt; ]</pre>
<span id=rimstone_copied_594 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_594' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_594, code_594, rimstone_copied_594)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
File specified with &lt;file location&gt; is deleted. &lt;file location&gt; can be given with an absolute path or relative to the application home directory (see <a href='/directories.html'>directories</a>). <br/>
<br/>
If "status" is specified, the status is stored into &lt;status var&gt;. The status is RIM_OKAY on success or if the file did not exist, and RIM_ERR_DELETE on failure. <br/>
<div class="vsub"><a id="Examples"></a>Examples</div>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_595' class=notranslate>
<span class="Statement">delete-file</span> <span class="Constant">&quot;/home/user/some_file&quot;</span><span class="Type"> status</span> st</pre>
<span id=rimstone_copied_595 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_595' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_595, code_595, rimstone_copied_595)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<div class="vsub"><a id="See also"></a>See also</div>
 <a name='Files'></a><span style="font-weight:bold;">Files</span><br/>
<a href='/change-mode.html'>change-mode</a> &nbsp;<br/>
<a href='/close-file.html'>close-file</a> &nbsp;<br/>
<a href='/copy-file.html'>copy-file</a> &nbsp;<br/>
<a href='/delete-file.html'>delete-file</a> &nbsp;<br/>
<a href='/file-position.html'>file-position</a> &nbsp;<br/>
<a href='/file-storage.html'>file-storage</a> &nbsp;<br/>
<a href='/file-uploading.html'>file-uploading</a> &nbsp;<br/>
<a href='/get-upload.html'>get-upload</a> &nbsp;<br/>
<a href='/lock-file.html'>lock-file</a> &nbsp;<br/>
<a href='/open-file.html'>open-file</a> &nbsp;<br/>
<a href='/read-file.html'>read-file</a> &nbsp;<br/>
<a href='/read-line.html'>read-line</a> &nbsp;<br/>
<a href='/rename-file.html'>rename-file</a> &nbsp;<br/>
<a href='/stat-file.html'>stat-file</a> &nbsp;<br/>
<a href='/temporary-file.html'>temporary-file</a> &nbsp;<br/>
<a href='/uniq-file.html'>uniq-file</a> &nbsp;<br/>
<a href='/unlock-file.html'>unlock-file</a> &nbsp;<br/>
<a href='/write-file.html'>write-file</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='/documentation.html'>documentation</a><br/>
<a id='delete-lifo.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:left;background-color:white;'><a href='https://rimstone-lang.com' style='border-bottom:0px'><img src='https://rimstone-lang.com/rimstone.png' style='width:180px;height:auto'/></a></div><div class='vhub' style='margin-top:10px;'>Delete lifo</div><hr/><span style="font-weight:bold;">Purpose</span>: Delete LIFO list elements.<br/>
<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_596' class=notranslate>
<span class="Statement">delete-lifo</span> &lt;list&gt;</pre>
<span id=rimstone_copied_596 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_596' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_596, code_596, rimstone_copied_596)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
delete-lifo will delete the most recently added elements to the LIFO &lt;list&gt; up to the last one read, including. &lt;list&gt; was created by <a href='/new-lifo.html'>new-lifo</a>. <br/>
<br/>
Right after <a href='/rewind-lifo.html'>rewind-lifo</a>, no element was read yet, and delete-lifo will have no effect. Note that <a href='/write-lifo.html'>write-lifo</a> also performs an implicit <a href='/rewind-lifo.html'>rewind-lifo</a>.<br/>
<br/>
After any <a href='/read-lifo.html'>read-lifo</a>, delete-lifo wil delete all elements up to the element read, including that element.<br/>
<div class="vsub"><a id="Examples"></a>Examples</div>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_597' class=notranslate>
<span class="Statement">new-lifo</span> mylist

<span class="Comment">// Add data to the list</span>
<span class="Statement">write-lifo</span> mylist<span class="Identifier"> key</span> <span class="Constant">&quot;key1&quot;</span><span class="Identifier"> value</span> <span class="Constant">&quot;value1&quot;</span>
<span class="Statement">write-lifo</span> mylist<span class="Identifier"> key</span> <span class="Constant">&quot;some2&quot;</span><span class="Identifier"> value</span> <span class="Constant">&quot;other2&quot;</span>

<span class="Comment">// Get first data from the list, it will be </span><span class="Constant">&quot;some2&quot;</span><span class="Comment"> key</span>
<span class="Statement">read-lifo</span> mylist<span class="Type"> key</span> k<span class="Type"> value</span> v

<span class="Comment">// Delete first element from the list, so list will have only </span><span class="Constant">&quot;key1&quot;</span><span class="Comment"> key</span>
<span class="Statement">delete-lifo</span> mylist</pre>
<span id=rimstone_copied_597 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_597' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_597, code_597, rimstone_copied_597)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<div class="vsub"><a id="See also"></a>See also</div>
 <a name='LIFO'></a><span style="font-weight:bold;">LIFO</span><br/>
<a href='/delete-lifo.html'>delete-lifo</a> &nbsp;<br/>
<a href='/get-lifo.html'>get-lifo</a> &nbsp;<br/>
<a href='/new-lifo.html'>new-lifo</a> &nbsp;<br/>
<a href='/purge-lifo.html'>purge-lifo</a> &nbsp;<br/>
<a href='/read-lifo.html'>read-lifo</a> &nbsp;<br/>
<a href='/rewind-lifo.html'>rewind-lifo</a> &nbsp;<br/>
<a href='/write-lifo.html'>write-lifo</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='/documentation.html'>documentation</a><br/>
<a id='delete-list.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:left;background-color:white;'><a href='https://rimstone-lang.com' style='border-bottom:0px'><img src='https://rimstone-lang.com/rimstone.png' style='width:180px;height:auto'/></a></div><div class='vhub' style='margin-top:10px;'>Delete list</div><hr/><span style="font-weight:bold;">Purpose</span>: Delete current linked list element.<br/>
<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_598' class=notranslate>
<span class="Statement">delete-list</span> &lt;list&gt; [<span class="Type"> status</span> &lt;status&gt; ]</pre>
<span id=rimstone_copied_598 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_598' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_598, code_598, rimstone_copied_598)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
delete-list will delete current element in linked &lt;list&gt; created with <a href='/new-list.html'>new-list</a>. A current list element is the one that will be subject to statements like <a href='/read-list.html'>read-list</a> and <a href='/write-list.html'>write-list</a>. See <a href='/position-list.html'>position-list</a> for more details on the current element.<br/>
<br/>
&lt;status&gt; (in "status" clause) is RIM_OKAY if element is deleted, or RIM_ERR_EXIST if could not delete element (this can happen if the list is empty, or if current list element is beyond the last element, such as for instance if "end" clause is used in position-list statement).<br/>
<br/>
Once an element is deleted, the current element becomes either the next one (if the current element wasn't the last one), or the previous one (if the current element was the last one).<br/>
<div class="vsub"><a id="Examples"></a>Examples</div>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_599' class=notranslate>
<span class="Statement">delete-list</span> mylist<span class="Type"> status</span> st</pre>
<span id=rimstone_copied_599 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_599' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_599, code_599, rimstone_copied_599)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<div class="vsub"><a id="See also"></a>See also</div>
 <a name='Linked list'></a><span style="font-weight:bold;">Linked list</span><br/>
<a href='/delete-list.html'>delete-list</a> &nbsp;<br/>
<a href='/get-list.html'>get-list</a> &nbsp;<br/>
<a href='/new-list.html'>new-list</a> &nbsp;<br/>
<a href='/position-list.html'>position-list</a> &nbsp;<br/>
<a href='/purge-list.html'>purge-list</a> &nbsp;<br/>
<a href='/read-list.html'>read-list</a> &nbsp;<br/>
<a href='/write-list.html'>write-list</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='/documentation.html'>documentation</a><br/>
<a id='delete-string.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:left;background-color:white;'><a href='https://rimstone-lang.com' style='border-bottom:0px'><img src='https://rimstone-lang.com/rimstone.png' style='width:180px;height:auto'/></a></div><div class='vhub' style='margin-top:10px;'>Delete string</div><hr/><span style="font-weight:bold;">Purpose</span>: Free string memory.<br/>
<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_600' class=notranslate>
<span class="Statement">delete-string</span> &lt;string&gt;</pre>
<span id=rimstone_copied_600 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_600' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_600, code_600, rimstone_copied_600)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
delete-string frees &lt;string&gt; variable previously allocated by a RimStone statement. <br/>
<br/>
Note that freeing memory is in most cases unnecessary as RimStone will automatically do so at the end of each request. You should have a good reason for using delete-string otherwise.<br/>
<br/>
RimStone keeps count of &lt;string&gt; references for process-scoped memory (see <a href='/memory-handling.html'>memory-handling</a>), and such memory will be deleted at the end of the request once reference count reaches zero. <br/>
<br/>
For non-process-scoped memory, if &lt;string&gt; is referenced by other variables, then &lt;string&gt; may not be deleted. Regardless of whether the memory referenced by &lt;string&gt; is actually deleted or not, &lt;string&gt; becomes an empty string ("") after delete-string.<br/>
<div class="vsub"><a id="Examples"></a>Examples</div>
Allocate and free random string:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_601' class=notranslate>
<span class="Statement">random-string</span><span class="Type"> to</span> ran_str
<span class="Statement">.</span>..
<span class="Statement">delete-string</span> ran_str</pre>
<span id=rimstone_copied_601 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_601' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_601, code_601, rimstone_copied_601)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Free string allocated by write-string (consisting of 100 "Hello World"s):<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_602' class=notranslate>
<span class="Statement">write-string</span> ws
<span class="Statement">    start-loop</span><span class="Identifier"> repeat</span> <span class="Constant">100</span>
<span class="Statement">        @</span>Hello World
<span class="Statement">    end-loop</span>
<span class="Statement">end-write-string</span>
<span class="Statement">.</span>..
<span class="Statement">delete-string</span> ws</pre>
<span id=rimstone_copied_602 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_602' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_602, code_602, rimstone_copied_602)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<div class="vsub"><a id="See also"></a>See also</div>
 <a name='Strings'></a><span style="font-weight:bold;">Strings</span><br/>
<a href='/copy-string.html'>copy-string</a> &nbsp;<br/>
<a href='/count-substring.html'>count-substring</a> &nbsp;<br/>
<a href='/delete-string.html'>delete-string</a> &nbsp;<br/>
<a href='/double-string.html'>double-string</a> &nbsp;<br/>
<a href='/lower-string.html'>lower-string</a> &nbsp;<br/>
<a href='/match-regex.html'>match-regex</a> &nbsp;<br/>
<a href='/new-string.html'>new-string</a> &nbsp;<br/>
<a href='/number-string.html'>number-string</a> &nbsp;<br/>
<a href='/read-split.html'>read-split</a> &nbsp;<br/>
<a href='/replace-string.html'>replace-string</a> &nbsp;<br/>
<a href='/scan-string.html'>scan-string</a> &nbsp;<br/>
<a href='/set-string.html'>set-string</a> &nbsp;<br/>
<a href='/split-string.html'>split-string</a> &nbsp;<br/>
<a href='/string-double.html'>string-double</a> &nbsp;<br/>
<a href='/string-expressions.html'>string-expressions</a> &nbsp;<br/>
<a href='/string-length.html'>string-length</a> &nbsp;<br/>
<a href='/string-number.html'>string-number</a> &nbsp;<br/>
<a href='/trim-string.html'>trim-string</a> &nbsp;<br/>
<a href='/upper-string.html'>upper-string</a> &nbsp;<br/>
<a href='/write-string.html'>write-string</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='/documentation.html'>documentation</a><br/>
<a id='delete-tree.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:left;background-color:white;'><a href='https://rimstone-lang.com' style='border-bottom:0px'><img src='https://rimstone-lang.com/rimstone.png' style='width:180px;height:auto'/></a></div><div class='vhub' style='margin-top:10px;'>Delete tree</div><hr/><span style="font-weight:bold;">Purpose</span>: Delete a node from a tree.<br/>
<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_603' class=notranslate>
<span class="Statement">delete-tree</span> &lt;tree&gt;<span class="Identifier"> key</span> &lt;key&gt; \
    [<span class="Type"> status</span> &lt;status&gt; ] \
    [<span class="Type"> value</span> &lt;value&gt; ] \</pre>
<span id=rimstone_copied_603 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_603' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_603, code_603, rimstone_copied_603)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
delete-tree will search &lt;tree&gt; for string &lt;key&gt; and if found, delete its node (including the key in it), set &lt;value&gt; (in "value" clause) to node's value, and set &lt;status&gt; number (in "status" clause) to RIM_OKAY. If &lt;key&gt; is not found, &lt;status&gt; will be RIM_ERR_EXIST. If &lt;status&gt; is not RIM_OKAY, &lt;value&gt; is unchanged.<br/>
<div class="vsub"><a id="Examples"></a>Examples</div>
Delete node with key "123", and obtain its value:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_604' class=notranslate>
<span class="Statement">set-string</span> k = <span class="Constant">&quot;123&quot;</span>
<span class="Statement">delete-tree</span> mytree<span class="Identifier"> key</span> k<span class="Type"> value</span> val<span class="Type"> status</span> st
<span class="Statement">if-true</span> st<span class="Identifier"> not-equal</span> RIM_OKAY
<span class="Statement">   @</span>Could not find key <span class="Statement">&lt;&lt;print-out</span> k<span class="Statement">&gt;&gt;</span>
<span class="Statement">   exit-handler</span>
<span class="Statement">end-if</span>
<span class="Comment">// display key/value deleted</span>
<span class="Statement">@</span>Deleted key <span class="Statement">&lt;&lt;print-out</span> k<span class="Statement">&gt;&gt;</span> with value <span class="Statement">&lt;&lt;print-out</span> val<span class="Statement">&gt;&gt;</span>
<span class="Comment">// delete the original value</span>
<span class="Statement">delete-string</span> val</pre>
<span id=rimstone_copied_604 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_604' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_604, code_604, rimstone_copied_604)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<div class="vsub"><a id="See also"></a>See also</div>
 <a name='Tree'></a><span style="font-weight:bold;">Tree</span><br/>
<a href='/delete-tree.html'>delete-tree</a> &nbsp;<br/>
<a href='/get-tree.html'>get-tree</a> &nbsp;<br/>
<a href='/new-tree.html'>new-tree</a> &nbsp;<br/>
<a href='/purge-tree.html'>purge-tree</a> &nbsp;<br/>
<a href='/read-tree.html'>read-tree</a> &nbsp;<br/>
<a href='/use-cursor.html'>use-cursor</a> &nbsp;<br/>
<a href='/write-tree.html'>write-tree</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='/documentation.html'>documentation</a><br/>
<a id='derive-key.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:left;background-color:white;'><a href='https://rimstone-lang.com' style='border-bottom:0px'><img src='https://rimstone-lang.com/rimstone.png' style='width:180px;height:auto'/></a></div><div class='vhub' style='margin-top:10px;'>Derive key</div><hr/><span style="font-weight:bold;">Purpose</span>: Derive a key.<br/>
<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_605' class=notranslate>
<span class="Statement">derive-key</span> &lt;key&gt;<span class="Identifier"> from</span> &lt;source&gt;<span class="Identifier"> length</span> &lt;length&gt; \
    [<span class="Identifier"> binary</span> [ &lt;binary&gt; ] ] \
    [<span class="Identifier"> from-length</span> &lt;source length&gt; ] \
    [<span class="Identifier"> digest</span> &lt;digest algorithm&gt; ] \
    [<span class="Identifier"> salt</span> &lt;salt&gt; [<span class="Identifier"> salt-length</span> &lt;salt length&gt; ] ] \
    [<span class="Identifier"> iterations</span> &lt;iterations&gt; ]</pre>
<span id=rimstone_copied_605 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_605' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_605, code_605, rimstone_copied_605)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
derive-key derives &lt;key&gt; from string &lt;source&gt; in "from" clause. If &lt;source length&gt; in "from-length" clause is specified, exactly &lt;source length&gt; bytes of &lt;source&gt; are used. Otherwise, the length of &lt;source&gt; string is used as the number of bytes (see <a href='/string-length.html'>string-length</a>). <br/>
<br/>
The desired length of derived key is given by &lt;length&gt; in "length" clause. The method for key generation is PBKDF2. By default the digest used is "SHA256". You can use a different &lt;digest algorithm&gt; in "digest" clause (for example "SHA3-256"). To see a list of available digests:<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_606' class=notranslate>
<span class="Comment">#get digests</span>
openssl list <span class="Special">-digest-algorithms</span></pre>
<span id=rimstone_copied_606 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_606' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_606, code_606, rimstone_copied_606)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
The salt for key derivation can be given with &lt;salt&gt; in "salt" clause. If "salt-length" clause is not specified, then the entire length of salt is used (see <a href='/string-length.html'>string-length</a>), otherwise &lt;salt length&gt; bytes are used as salt.<br/>
<br/>
The number of iterations is given by &lt;iterations&gt; in "iterations" clause. The default is 1000 per <a href='https://www.rfc-editor.org/rfc/rfc8018'>RFC8018</a>, though depending on your needs and the quality of &lt;source&gt; you may choose a different value.<br/>
<br/>
By default, the derived key is produced in a hexadecimal form, where each byte is encoded as two-character hexadecimal characters, so its length is 2*&lt;length&gt;. If "binary" clause is used without boolean variable &lt;binary&gt;, or if &lt;binary&gt; evaluates to true, then the output is a binary string of &lt;length&gt; bytes.<br/>
<br/>
Key derivation is often used when storing password-derivatives in the database (with salt), and also for symmetrical key generation.<br/>
<div class="vsub"><a id="Examples"></a>Examples</div>
Derived key is in variable "mk":<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_607' class=notranslate>
<span class="Statement">random-string</span><span class="Type"> to</span> rs9<span class="Identifier"> length</span> <span class="Constant">16</span>
<span class="Statement">derive-key</span> mk<span class="Identifier"> from</span> <span class="Constant">&quot;clave secreta&quot;</span><span class="Identifier"> digest</span> <span class="Constant">&quot;sha-256&quot;</span><span class="Identifier"> salt</span> rs9<span class="Identifier"> salt-length</span> <span class="Constant">10</span><span class="Identifier"> iterations</span> <span class="Constant">2000</span><span class="Identifier"> length</span> <span class="Constant">16</span></pre>
<span id=rimstone_copied_607 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_607' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_607, code_607, rimstone_copied_607)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<div class="vsub"><a id="See also"></a>See also</div>
 <a name='Encryption'></a><span style="font-weight:bold;">Encryption</span><br/>
<a href='/decrypt-data.html'>decrypt-data</a> &nbsp;<br/>
<a href='/derive-key.html'>derive-key</a> &nbsp;<br/>
<a href='/encrypt-data.html'>encrypt-data</a> &nbsp;<br/>
<a href='/hash-string.html'>hash-string</a> &nbsp;<br/>
<a href='/hmac-string.html'>hmac-string</a> &nbsp;<br/>
<a href='/random-crypto.html'>random-crypto</a> &nbsp;<br/>
<a href='/random-string.html'>random-string</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='/documentation.html'>documentation</a><br/>
<a id='devel-versus-release.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:left;background-color:white;'><a href='https://rimstone-lang.com' style='border-bottom:0px'><img src='https://rimstone-lang.com/rimstone.png' style='width:180px;height:auto'/></a></div><div class='vhub' style='margin-top:10px;'>Devel versus release</div><hr/>By default, when you make your application, a "devel" (or development) version is built, for instance:<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_608' class=notranslate>
rim <span class="Special">-q</span></pre>
<span id=rimstone_copied_608 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_608' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_608, code_608, rimstone_copied_608)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
You can also explicitly specify this:<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_609' class=notranslate>
rim <span class="Special">-q</span> <span class="Special">--devel</span></pre>
<span id=rimstone_copied_609 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_609' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_609, code_609, rimstone_copied_609)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
The development version of your application will not use all the compiler optimizations and it will not use the Link Time Optimizations (LTO), sometimes also referred to as "whole program optimization". So this version will exhibit lower run-time performance. However, it is also much faster to build and it includes additional debugging symbols as well.<br/>
<br/>
When you wish to produce a release executable, use "--release" option, for instance:<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_610' class=notranslate>
rim <span class="Special">-q</span> <span class="Special">--release</span></pre>
<span id=rimstone_copied_610 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_610' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_610, code_610, rimstone_copied_610)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
This will include all the compiler optimizations as well as LTO; it will also include the minimal necessary debugging information. Release executables can be significantly faster than development ones; use them for releases as well as when you wish to do performance testing. Note however that making release executables will take significantly longer, so you probably do not want to do it while developing your application.<br/>
<br/>
Note that if your gcc (C compiler) version changes, such as after system updates, RimStone may recompile itself. This is because LTO works the best when RimStone itself is compiled with the gcc version currently installed. During such rare occassions, RimStone will need sudo privilege to install the recompiled executables.<br/>
<div class="vsub"><a id="See also"></a>See also</div>
 <a name='General'></a><span style="font-weight:bold;">General</span><br/>
<a href='/about-rimstone.html'>about-rimstone</a> &nbsp;<br/>
<a href='/devel-versus-release.html'>devel-versus-release</a> &nbsp;<br/>
<a href='/directories.html'>directories</a> &nbsp;<br/>
<a href='/permissions.html'>permissions</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='/documentation.html'>documentation</a><br/>
<a id='directories.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:left;background-color:white;'><a href='https://rimstone-lang.com' style='border-bottom:0px'><img src='https://rimstone-lang.com/rimstone.png' style='width:180px;height:auto'/></a></div><div class='vhub' style='margin-top:10px;'>Directories</div><hr/><div class="vsub"><a id="Application directory structure"></a>Application directory structure</div>
<a href='/mrim.html'>mrim</a> will create a RimStone directory structure (see "-i" option) when you create your application. While you can keep and compile RimStone source files in any directory, the directories used by RimStone are always under "$HOME/.rimstone" directory ("user directory"). This user directory is also available in your environment as $RIM_ROOT.<br/>
<br/>
This is the directory structure:<br/>
<ul><li>$HOME/.rimstone/apps/&lt;app name&gt;/.bld<br/>
Build directory is where your application executables are built, with name &lt;app name&gt;.srvc for a <a href='/service.html'>service</a> and &lt;app name&gt; for a <a href='/command-line.html'>command-line</a> program. This is a scratch-pad directory, thus do not alter files in it, or use for anything else. It is created with 700 privileges.<br/>
<br/>
</li><li>$HOME/.rimstone/apps/&lt;app name&gt;<br/>
Application directory. All application data is kept here. It is created with 711 privileges.<br/>
<br/>
</li><li>$HOME/.rimstone/apps/&lt;app name&gt;/app<br/>
Application home directory. This is the current working directory when your application runs. Copy/move here any files and directories your application needs. It is created with 700 privileges.<br/>
<br/>
</li><li>$HOME/.rimstone/apps/&lt;app name&gt;/file<br/>
This is <a href='/file-storage.html'>file-storage</a> used for uploads and new document creation. Do not write there directly; RimStone does that for you, such as with <a href='/uniq-file.html'>uniq-file</a> for instance, or when uploading files. It is created with 700 privileges.<br/>
<br/>
</li><li>$HOME/.rimstone/apps/&lt;app name&gt;/trace<br/>
This is a trace directory that contains files describing fatal issues with your program(s); information contained in them can help you diagnose the issues and fix them. See <a href='/debugging.html'>debugging</a>. It is created with 700 privileges.<br/>
<br/>
</li><li>$HOME/.rimstone/apps/&lt;app name&gt;/db<br/>
Database configuration directory contains the <a href='/database-config-file.html'>database-config-file</a>s used by RimStone to connect to databases; this directory is maintained by RimStone and you should not use it. It is created with 700 privileges.</li></ul>
While RimStone directories are fixed, you can effectively change their location by creating a soft link. This way, your directories and files can be elsewhere, even on a different disk. For example, to house your file storage on a different disk:<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_611' class=notranslate>
ln <span class="Special">-s</span> /home/disk0/file <span class="PreProc">$HOME</span>/.rimstone/apps/<span class="Statement">&lt;</span>app name<span class="Statement">&gt;</span>/file</pre>
<span id=rimstone_copied_611 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_611' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_611, code_611, rimstone_copied_611)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<div class="vsub"><a id="See also"></a>See also</div>
 <a name='Directories'></a><span style="font-weight:bold;">Directories</span><br/>
<a href='/change-dir.html'>change-dir</a> &nbsp;<br/>
<a href='/change-mode.html'>change-mode</a> &nbsp;<br/>
<a href='/delete-dir.html'>delete-dir</a> &nbsp;<br/>
<a href='/directories.html'>directories</a> &nbsp;<br/>
<a href='/new-dir.html'>new-dir</a> &nbsp; <br/>
 <a name='General'></a><span style="font-weight:bold;">General</span><br/>
<a href='/about-rimstone.html'>about-rimstone</a> &nbsp;<br/>
<a href='/devel-versus-release.html'>devel-versus-release</a> &nbsp;<br/>
<a href='/directories.html'>directories</a> &nbsp;<br/>
<a href='/permissions.html'>permissions</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='/documentation.html'>documentation</a><br/>
<a id='documentation.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:left;background-color:white;'><a href='https://rimstone-lang.com' style='border-bottom:0px'><img src='https://rimstone-lang.com/rimstone.png' style='width:180px;height:auto'/></a></div><div class='vhub' style='margin-top:10px;'>Documentation</div><hr/><div class="vsub"><a id="Reference for RimStone version 4.3.1"></a>Reference for RimStone version 4.3.1</div>
<span style="font-weight:bold;">Note</span>: All the topics below are available as a <a href='/rimstonedoc.html'>single-page documentation</a>. See below how to use <a href='#man pages'>man pages</a>.<br/>
<br/>
Browse by topic: &nbsp; &nbsp;<a href='#API'>API</a>, &nbsp; <a href='#Application information'>Application information</a>, &nbsp; <a href='#Array'>Array</a>, &nbsp; <a href='#Base64'>Base64</a>, &nbsp; <a href='#Booleans'>Booleans</a>, &nbsp; <a href='#C language'>C language</a>, &nbsp; <a href='#Cookies'>Cookies</a>, &nbsp; <a href='#Database'>Database</a>, &nbsp; <a href='#Debugging'>Debugging</a>, &nbsp; <a href='#Directories'>Directories</a>, &nbsp; <a href='#Distributed computing'>Distributed computing</a>, &nbsp; <a href='#Documentation'>Documentation</a>, &nbsp; <a href='#Doubles'>Doubles</a>, &nbsp; <a href='#Encryption'>Encryption</a>, &nbsp; <a href='#Error handling'>Error handling</a>, &nbsp; <a href='#Examples'>Examples</a>, &nbsp; <a href='#FastCGI client'>FastCGI client</a>, &nbsp; <a href='#FIFO'>FIFO</a>, &nbsp; <a href='#Files'>Files</a>, &nbsp; <a href='#General'>General</a>, &nbsp; <a href='#Hash'>Hash</a>, &nbsp; <a href='#Hex encoding'>Hex encoding</a>, &nbsp; <a href='#Install rimstone'>Install rimstone</a>, &nbsp; <a href='#JSON parsing'>JSON parsing</a>, &nbsp; <a href='#Language'>Language</a>, &nbsp; <a href='#License'>License</a>, &nbsp; <a href='#LIFO'>LIFO</a>, &nbsp; <a href='#Linked list'>Linked list</a>, &nbsp; <a href='#Math functions'>Math functions</a>, &nbsp; <a href='#Memory'>Memory</a>, &nbsp; <a href='#Messages'>Messages</a>, &nbsp; <a href='#Numbers'>Numbers</a>, &nbsp; <a href='#Output'>Output</a>, &nbsp; <a href='#Program execution'>Program execution</a>, &nbsp; <a href='#Program flow'>Program flow</a>, &nbsp; <a href='#Quick start'>Quick start</a>, &nbsp; <a href='#Regex'>Regex</a>, &nbsp; <a href='#Request data'>Request data</a>, &nbsp; <a href='#Request information'>Request information</a>, &nbsp; <a href='#Requests'>Requests</a>, &nbsp; <a href='#Rimstone compiler and utility'>Rimstone compiler and utility</a>, &nbsp; <a href='#Running application'>Running application</a>, &nbsp; <a href='#SELinux'>SELinux</a>, &nbsp; <a href='#Service manager'>Service manager</a>, &nbsp; <a href='#Service processing'>Service processing</a>, &nbsp; <a href='#Strings'>Strings</a>, &nbsp; <a href='#System information'>System information</a>, &nbsp; <a href='#Time'>Time</a>, &nbsp; <a href='#Tree'>Tree</a>, &nbsp; <a href='#URL encoding'>URL encoding</a>, &nbsp; <a href='#UTF'>UTF</a>, &nbsp; <a href='#Web'>Web</a>, &nbsp; <a href='#Web encoding'>Web encoding</a>, &nbsp; <a href='#Web servers'>Web servers</a>, &nbsp; <a href='#XML parsing'>XML parsing</a><br/>
<br/>
<ul><br/>
<li><a name='API'></a><span style="font-weight:bold;">API</span><br/>
<a href='/Client-API.html'>Client-API</a> &nbsp;<br/>
<a href='/Client-API-and-messaging.html'>Client-API-and-messaging</a> &nbsp;<br/>
<a href='/Server-API.html'>Server-API</a> &nbsp; </li>
<br/>
<li><a name='Application information'></a><span style="font-weight:bold;">Application information</span><br/>
<a href='/get-app.html'>get-app</a> &nbsp;<br/>
<a href='/set-app.html'>set-app</a> &nbsp; </li>
<br/>
<li><a name='Array'></a><span style="font-weight:bold;">Array</span><br/>
<a href='/new-array.html'>new-array</a> &nbsp;<br/>
<a href='/purge-array.html'>purge-array</a> &nbsp;<br/>
<a href='/read-array.html'>read-array</a> &nbsp;<br/>
<a href='/write-array.html'>write-array</a> &nbsp; </li>
<br/>
<li><a name='Base64'></a><span style="font-weight:bold;">Base64</span><br/>
<a href='/decode-base64.html'>decode-base64</a> &nbsp;<br/>
<a href='/encode-base64.html'>encode-base64</a> &nbsp; </li>
<br/>
<li><a name='Booleans'></a><span style="font-weight:bold;">Booleans</span><br/>
<a href='/boolean-expressions.html'>boolean-expressions</a> &nbsp;<br/>
<a href='/set-bool.html'>set-bool</a> &nbsp; </li>
<br/>
<li><a name='C language'></a><span style="font-weight:bold;">C language</span><br/>
<a href='/call-extended.html'>call-extended</a> &nbsp;<br/>
<a href='/extended-mode.html'>extended-mode</a> &nbsp;<br/>
<a href='/web-framework-for-C-programming-language.html'>web-framework-for-C-programming-language</a> &nbsp; </li>
<br/>
<li><a name='Cookies'></a><span style="font-weight:bold;">Cookies</span><br/>
<a href='/delete-cookie.html'>delete-cookie</a> &nbsp;<br/>
<a href='/get-cookie.html'>get-cookie</a> &nbsp;<br/>
<a href='/set-cookie.html'>set-cookie</a> &nbsp; </li>
<br/>
<li><a name='Database'></a><span style="font-weight:bold;">Database</span><br/>
<a href='/begin-transaction.html'>begin-transaction</a> &nbsp;<br/>
<a href='/commit-transaction.html'>commit-transaction</a> &nbsp;<br/>
<a href='/current-row.html'>current-row</a> &nbsp;<br/>
<a href='/database-config-file.html'>database-config-file</a> &nbsp;<br/>
<a href='/db-error.html'>db-error</a> &nbsp;<br/>
<a href='/mariadb-database.html'>mariadb-database</a> &nbsp;<br/>
<a href='/postgresql-database.html'>postgresql-database</a> &nbsp;<br/>
<a href='/rollback-transaction.html'>rollback-transaction</a> &nbsp;<br/>
<a href='/run-query.html'>run-query</a> &nbsp;<br/>
<a href='/sqlite-database.html'>sqlite-database</a> &nbsp; </li>
<br/>
<li><a name='Debugging'></a><span style="font-weight:bold;">Debugging</span><br/>
<a href='/debugging.html'>debugging</a> &nbsp; </li>
<br/>
<li><a name='Directories'></a><span style="font-weight:bold;">Directories</span><br/>
<a href='/change-dir.html'>change-dir</a> &nbsp;<br/>
<a href='/change-mode.html'>change-mode</a> &nbsp;<br/>
<a href='/delete-dir.html'>delete-dir</a> &nbsp;<br/>
<a href='/directories.html'>directories</a> &nbsp;<br/>
<a href='/new-dir.html'>new-dir</a> &nbsp; </li>
<br/>
<li><a name='Distributed computing'></a><span style="font-weight:bold;">Distributed computing</span><br/>
<a href='/call-remote.html'>call-remote</a> &nbsp;<br/>
<a href='/new-remote.html'>new-remote</a> &nbsp;<br/>
<a href='/read-remote.html'>read-remote</a> &nbsp;<br/>
<a href='/run-remote.html'>run-remote</a> &nbsp; </li>
<br/>
<li><a name='Documentation'></a><span style="font-weight:bold;">Documentation</span><br/>
<a href='/documentation.html'>documentation</a> &nbsp; </li>
<br/>
<li><a name='Doubles'></a><span style="font-weight:bold;">Doubles</span><br/>
<a href='/abs-double.html'>abs-double</a> &nbsp;<br/>
<a href='/double-expressions.html'>double-expressions</a> &nbsp;<br/>
<a href='/double-string.html'>double-string</a> &nbsp;<br/>
<a href='/mixing-doubles-and-numbers.html'>mixing-doubles-and-numbers</a> &nbsp;<br/>
<a href='/set-double.html'>set-double</a> &nbsp;<br/>
<a href='/string-double.html'>string-double</a> &nbsp; </li>
<br/>
<li><a name='Encryption'></a><span style="font-weight:bold;">Encryption</span><br/>
<a href='/decrypt-data.html'>decrypt-data</a> &nbsp;<br/>
<a href='/derive-key.html'>derive-key</a> &nbsp;<br/>
<a href='/encrypt-data.html'>encrypt-data</a> &nbsp;<br/>
<a href='/hash-string.html'>hash-string</a> &nbsp;<br/>
<a href='/hmac-string.html'>hmac-string</a> &nbsp;<br/>
<a href='/random-crypto.html'>random-crypto</a> &nbsp;<br/>
<a href='/random-string.html'>random-string</a> &nbsp; </li>
<br/>
<li><a name='Error handling'></a><span style="font-weight:bold;">Error handling</span><br/>
<a href='/db-error.html'>db-error</a> &nbsp;<br/>
<a href='/error-code.html'>error-code</a> &nbsp;<br/>
<a href='/error-handling.html'>error-handling</a> &nbsp;<br/>
<a href='/report-error.html'>report-error</a> &nbsp; </li>
<br/>
<li><a name='Examples'></a><span style="font-weight:bold;">Examples</span><br/>
<a href='/examples.html'>examples</a> &nbsp; </li>
<br/>
<li><a name='FastCGI client'></a><span style="font-weight:bold;">FastCGI client</span><br/>
<a href='/rimcli.html'>rimcli</a> &nbsp; </li>
<br/>
<li><a name='FIFO'></a><span style="font-weight:bold;">FIFO</span><br/>
<a href='/delete-fifo.html'>delete-fifo</a> &nbsp;<br/>
<a href='/new-fifo.html'>new-fifo</a> &nbsp;<br/>
<a href='/purge-fifo.html'>purge-fifo</a> &nbsp;<br/>
<a href='/read-fifo.html'>read-fifo</a> &nbsp;<br/>
<a href='/rewind-fifo.html'>rewind-fifo</a> &nbsp;<br/>
<a href='/write-fifo.html'>write-fifo</a> &nbsp; </li>
<br/>
<li><a name='Files'></a><span style="font-weight:bold;">Files</span><br/>
<a href='/change-mode.html'>change-mode</a> &nbsp;<br/>
<a href='/close-file.html'>close-file</a> &nbsp;<br/>
<a href='/copy-file.html'>copy-file</a> &nbsp;<br/>
<a href='/delete-file.html'>delete-file</a> &nbsp;<br/>
<a href='/file-position.html'>file-position</a> &nbsp;<br/>
<a href='/file-storage.html'>file-storage</a> &nbsp;<br/>
<a href='/file-uploading.html'>file-uploading</a> &nbsp;<br/>
<a href='/get-upload.html'>get-upload</a> &nbsp;<br/>
<a href='/lock-file.html'>lock-file</a> &nbsp;<br/>
<a href='/open-file.html'>open-file</a> &nbsp;<br/>
<a href='/read-file.html'>read-file</a> &nbsp;<br/>
<a href='/read-line.html'>read-line</a> &nbsp;<br/>
<a href='/rename-file.html'>rename-file</a> &nbsp;<br/>
<a href='/stat-file.html'>stat-file</a> &nbsp;<br/>
<a href='/temporary-file.html'>temporary-file</a> &nbsp;<br/>
<a href='/uniq-file.html'>uniq-file</a> &nbsp;<br/>
<a href='/unlock-file.html'>unlock-file</a> &nbsp;<br/>
<a href='/write-file.html'>write-file</a> &nbsp; </li>
<br/>
<li><a name='General'></a><span style="font-weight:bold;">General</span><br/>
<a href='/about-rimstone.html'>about-rimstone</a> &nbsp;<br/>
<a href='/devel-versus-release.html'>devel-versus-release</a> &nbsp;<br/>
<a href='/directories.html'>directories</a> &nbsp;<br/>
<a href='/permissions.html'>permissions</a> &nbsp; </li>
<br/>
<li><a name='Hash'></a><span style="font-weight:bold;">Hash</span><br/>
<a href='/get-hash.html'>get-hash</a> &nbsp;<br/>
<a href='/new-hash.html'>new-hash</a> &nbsp;<br/>
<a href='/purge-hash.html'>purge-hash</a> &nbsp;<br/>
<a href='/read-hash.html'>read-hash</a> &nbsp;<br/>
<a href='/resize-hash.html'>resize-hash</a> &nbsp;<br/>
<a href='/write-hash.html'>write-hash</a> &nbsp; </li>
<br/>
<li><a name='Hex encoding'></a><span style="font-weight:bold;">Hex encoding</span><br/>
<a href='/decode-hex.html'>decode-hex</a> &nbsp;<br/>
<a href='/encode-hex.html'>encode-hex</a> &nbsp; </li>
<br/>
<li><a name='Install rimstone'></a><span style="font-weight:bold;">Install rimstone</span><br/>
<a href='/install-package.html'>install-package</a> &nbsp;<br/>
<a href='/install-rimstone.html'>install-rimstone</a> &nbsp;<br/>
<a href='/uninstall.html'>uninstall</a> &nbsp; </li>
<br/>
<li><a name='JSON parsing'></a><span style="font-weight:bold;">JSON parsing</span><br/>
<a href='/json-doc.html'>json-doc</a> &nbsp;<br/>
<a href='/read-json.html'>read-json</a> &nbsp; </li>
<br/>
<li><a name='Language'></a><span style="font-weight:bold;">Language</span><br/>
<a href='/inline-code.html'>inline-code</a> &nbsp;<br/>
<a href='/statements.html'>statements</a> &nbsp;<br/>
<a href='/syntax-highlighting.html'>syntax-highlighting</a> &nbsp;<br/>
<a href='/unused-var.html'>unused-var</a> &nbsp;<br/>
<a href='/variable-scope.html'>variable-scope</a> &nbsp; </li>
<br/>
<li><a name='License'></a><span style="font-weight:bold;">License</span><br/>
<a href='/rimstone-license.html'>rimstone-license</a> &nbsp; </li>
<br/>
<li><a name='LIFO'></a><span style="font-weight:bold;">LIFO</span><br/>
<a href='/delete-lifo.html'>delete-lifo</a> &nbsp;<br/>
<a href='/get-lifo.html'>get-lifo</a> &nbsp;<br/>
<a href='/new-lifo.html'>new-lifo</a> &nbsp;<br/>
<a href='/purge-lifo.html'>purge-lifo</a> &nbsp;<br/>
<a href='/read-lifo.html'>read-lifo</a> &nbsp;<br/>
<a href='/rewind-lifo.html'>rewind-lifo</a> &nbsp;<br/>
<a href='/write-lifo.html'>write-lifo</a> &nbsp; </li>
<br/>
<li><a name='Linked list'></a><span style="font-weight:bold;">Linked list</span><br/>
<a href='/delete-list.html'>delete-list</a> &nbsp;<br/>
<a href='/get-list.html'>get-list</a> &nbsp;<br/>
<a href='/new-list.html'>new-list</a> &nbsp;<br/>
<a href='/position-list.html'>position-list</a> &nbsp;<br/>
<a href='/purge-list.html'>purge-list</a> &nbsp;<br/>
<a href='/read-list.html'>read-list</a> &nbsp;<br/>
<a href='/write-list.html'>write-list</a> &nbsp; </li>
<br/>
<li><a name='Math functions'></a><span style="font-weight:bold;">Math functions</span><br/>
<a href='/abd.html'>abd</a> &nbsp;<br/>
<a href='/abn.html'>abn</a> &nbsp;<br/>
<a href='/acos.html'>acos</a> &nbsp;<br/>
<a href='/acosh.html'>acosh</a> &nbsp;<br/>
<a href='/asin.html'>asin</a> &nbsp;<br/>
<a href='/asinh.html'>asinh</a> &nbsp;<br/>
<a href='/atan.html'>atan</a> &nbsp;<br/>
<a href='/atan2.html'>atan2</a> &nbsp;<br/>
<a href='/atanh.html'>atanh</a> &nbsp;<br/>
<a href='/cbrt.html'>cbrt</a> &nbsp;<br/>
<a href='/ceil.html'>ceil</a> &nbsp;<br/>
<a href='/copysign.html'>copysign</a> &nbsp;<br/>
<a href='/cos.html'>cos</a> &nbsp;<br/>
<a href='/cosh.html'>cosh</a> &nbsp;<br/>
<a href='/dbl.html'>dbl</a> &nbsp;<br/>
<a href='/erf.html'>erf</a> &nbsp;<br/>
<a href='/erfc.html'>erfc</a> &nbsp;<br/>
<a href='/exp.html'>exp</a> &nbsp;<br/>
<a href='/exp2.html'>exp2</a> &nbsp;<br/>
<a href='/floor.html'>floor</a> &nbsp;<br/>
<a href='/fmod.html'>fmod</a> &nbsp;<br/>
<a href='/hypot.html'>hypot</a> &nbsp;<br/>
<a href='/isinf.html'>isinf</a> &nbsp;<br/>
<a href='/isnan.html'>isnan</a> &nbsp;<br/>
<a href='/ldexp.html'>ldexp</a> &nbsp;<br/>
<a href='/lgamma.html'>lgamma</a> &nbsp;<br/>
<a href='/log.html'>log</a> &nbsp;<br/>
<a href='/log10.html'>log10</a> &nbsp;<br/>
<a href='/log2.html'>log2</a> &nbsp;<br/>
<a href='/math-functions.html'>math-functions</a> &nbsp;<br/>
<a href='/nextafter.html'>nextafter</a> &nbsp;<br/>
<a href='/num.html'>num</a> &nbsp;<br/>
<a href='/pow.html'>pow</a> &nbsp;<br/>
<a href='/round.html'>round</a> &nbsp;<br/>
<a href='/sin.html'>sin</a> &nbsp;<br/>
<a href='/sinh.html'>sinh</a> &nbsp;<br/>
<a href='/sqrt.html'>sqrt</a> &nbsp;<br/>
<a href='/tan.html'>tan</a> &nbsp;<br/>
<a href='/tanh.html'>tanh</a> &nbsp;<br/>
<a href='/trunc.html'>trunc</a> &nbsp; </li>
<br/>
<li><a name='Memory'></a><span style="font-weight:bold;">Memory</span><br/>
<a href='/memory-handling.html'>memory-handling</a> &nbsp; </li>
<br/>
<li><a name='Messages'></a><span style="font-weight:bold;">Messages</span><br/>
<a href='/get-message.html'>get-message</a> &nbsp;<br/>
<a href='/new-message.html'>new-message</a> &nbsp;<br/>
<a href='/read-message.html'>read-message</a> &nbsp;<br/>
<a href='/SEMI.html'>SEMI</a> &nbsp;<br/>
<a href='/write-message.html'>write-message</a> &nbsp; </li>
<br/>
<li><a name='Numbers'></a><span style="font-weight:bold;">Numbers</span><br/>
<a href='/abs-number.html'>abs-number</a> &nbsp;<br/>
<a href='/mixing-doubles-and-numbers.html'>mixing-doubles-and-numbers</a> &nbsp;<br/>
<a href='/number-expressions.html'>number-expressions</a> &nbsp;<br/>
<a href='/number-string.html'>number-string</a> &nbsp;<br/>
<a href='/set-number.html'>set-number</a> &nbsp;<br/>
<a href='/string-number.html'>string-number</a> &nbsp; </li>
<br/>
<li><a name='Output'></a><span style="font-weight:bold;">Output</span><br/>
<a href='/finish-output.html'>finish-output</a> &nbsp;<br/>
<a href='/flush-output.html'>flush-output</a> &nbsp;<br/>
<a href='/output-statement.html'>output-statement</a> &nbsp;<br/>
<a href='/print-format.html'>print-format</a> &nbsp;<br/>
<a href='/print-out.html'>print-out</a> &nbsp;<br/>
<a href='/print-path.html'>print-path</a> &nbsp; </li>
<br/>
<li><a name='Program execution'></a><span style="font-weight:bold;">Program execution</span><br/>
<a href='/exec-program.html'>exec-program</a> &nbsp;<br/>
<a href='/exit-status.html'>exit-status</a> &nbsp; </li>
<br/>
<li><a name='Program flow'></a><span style="font-weight:bold;">Program flow</span><br/>
<a href='/break-loop.html'>break-loop</a> &nbsp;<br/>
<a href='/call-handler.html'>call-handler</a> &nbsp;<br/>
<a href='/code-blocks.html'>code-blocks</a> &nbsp;<br/>
<a href='/continue-loop.html'>continue-loop</a> &nbsp;<br/>
<a href='/do-once.html'>do-once</a> &nbsp;<br/>
<a href='/exit-handler.html'>exit-handler</a> &nbsp;<br/>
<a href='/if-defined.html'>if-defined</a> &nbsp;<br/>
<a href='/if-true.html'>if-true</a> &nbsp;<br/>
<a href='/quit-process.html'>quit-process</a> &nbsp;<br/>
<a href='/return-handler.html'>return-handler</a> &nbsp;<br/>
<a href='/start-loop.html'>start-loop</a> &nbsp; </li>
<br/>
<li><a name='Quick start'></a><span style="font-weight:bold;">Quick start</span><br/>
<a href='/123-hello-world.html'>123-hello-world</a> &nbsp; </li>
<br/>
<li><a name='Regex'></a><span style="font-weight:bold;">Regex</span><br/>
<a href='/match-regex.html'>match-regex</a> &nbsp; </li>
<br/>
<li><a name='Request data'></a><span style="font-weight:bold;">Request data</span><br/>
<a href='/get-param.html'>get-param</a> &nbsp;<br/>
<a href='/input-output-parameters.html'>input-output-parameters</a> &nbsp;<br/>
<a href='/request-body.html'>request-body</a> &nbsp;<br/>
<a href='/set-param.html'>set-param</a> &nbsp; </li>
<br/>
<li><a name='Request information'></a><span style="font-weight:bold;">Request information</span><br/>
<a href='/get-req.html'>get-req</a> &nbsp; </li>
<br/>
<li><a name='Requests'></a><span style="font-weight:bold;">Requests</span><br/>
<a href='/request.html'>request</a> &nbsp; </li>
<br/>
<li><a name='Rimstone compiler and utility'></a><span style="font-weight:bold;">Rimstone compiler and utility</span><br/>
<a href='/rim.html'>rim</a> &nbsp; </li>
<br/>
<li><a name='Running application'></a><span style="font-weight:bold;">Running application</span><br/>
<a href='/application-setup.html'>application-setup</a> &nbsp;<br/>
<a href='/CGI.html'>CGI</a> &nbsp;<br/>
<a href='/command-line.html'>command-line</a> &nbsp;<br/>
<a href='/service.html'>service</a> &nbsp; </li>
<br/>
<li><a name='SELinux'></a><span style="font-weight:bold;">SELinux</span><br/>
<a href='/SELinux.html'>SELinux</a> &nbsp; </li>
<br/>
<li><a name='Service manager'></a><span style="font-weight:bold;">Service manager</span><br/>
<a href='/mrim.html'>mrim</a> &nbsp; </li>
<br/>
<li><a name='Service processing'></a><span style="font-weight:bold;">Service processing</span><br/>
<a href='/after-handler.html'>after-handler</a> &nbsp;<br/>
<a href='/before-handler.html'>before-handler</a> &nbsp;<br/>
<a href='/begin-handler.html'>begin-handler</a> &nbsp;<br/>
<a href='/call-handler.html'>call-handler</a> &nbsp;<br/>
<a href='/input-output-parameters.html'>input-output-parameters</a> &nbsp; </li>
<br/>
<li><a name='Strings'></a><span style="font-weight:bold;">Strings</span><br/>
<a href='/copy-string.html'>copy-string</a> &nbsp;<br/>
<a href='/count-substring.html'>count-substring</a> &nbsp;<br/>
<a href='/delete-string.html'>delete-string</a> &nbsp;<br/>
<a href='/double-string.html'>double-string</a> &nbsp;<br/>
<a href='/lower-string.html'>lower-string</a> &nbsp;<br/>
<a href='/match-regex.html'>match-regex</a> &nbsp;<br/>
<a href='/new-string.html'>new-string</a> &nbsp;<br/>
<a href='/number-string.html'>number-string</a> &nbsp;<br/>
<a href='/read-split.html'>read-split</a> &nbsp;<br/>
<a href='/replace-string.html'>replace-string</a> &nbsp;<br/>
<a href='/scan-string.html'>scan-string</a> &nbsp;<br/>
<a href='/set-string.html'>set-string</a> &nbsp;<br/>
<a href='/split-string.html'>split-string</a> &nbsp;<br/>
<a href='/string-double.html'>string-double</a> &nbsp;<br/>
<a href='/string-expressions.html'>string-expressions</a> &nbsp;<br/>
<a href='/string-length.html'>string-length</a> &nbsp;<br/>
<a href='/string-number.html'>string-number</a> &nbsp;<br/>
<a href='/trim-string.html'>trim-string</a> &nbsp;<br/>
<a href='/upper-string.html'>upper-string</a> &nbsp;<br/>
<a href='/write-string.html'>write-string</a> &nbsp; </li>
<br/>
<li><a name='System information'></a><span style="font-weight:bold;">System information</span><br/>
<a href='/get-sys.html'>get-sys</a> &nbsp; </li>
<br/>
<li><a name='Time'></a><span style="font-weight:bold;">Time</span><br/>
<a href='/get-time.html'>get-time</a> &nbsp;<br/>
<a href='/pause-program.html'>pause-program</a> &nbsp; </li>
<br/>
<li><a name='Tree'></a><span style="font-weight:bold;">Tree</span><br/>
<a href='/delete-tree.html'>delete-tree</a> &nbsp;<br/>
<a href='/get-tree.html'>get-tree</a> &nbsp;<br/>
<a href='/new-tree.html'>new-tree</a> &nbsp;<br/>
<a href='/purge-tree.html'>purge-tree</a> &nbsp;<br/>
<a href='/read-tree.html'>read-tree</a> &nbsp;<br/>
<a href='/use-cursor.html'>use-cursor</a> &nbsp;<br/>
<a href='/write-tree.html'>write-tree</a> &nbsp; </li>
<br/>
<li><a name='URL encoding'></a><span style="font-weight:bold;">URL encoding</span><br/>
<a href='/decode-url.html'>decode-url</a> &nbsp;<br/>
<a href='/encode-url.html'>encode-url</a> &nbsp; </li>
<br/>
<li><a name='UTF'></a><span style="font-weight:bold;">UTF</span><br/>
<a href='/text-utf.html'>text-utf</a> &nbsp;<br/>
<a href='/utf-text.html'>utf-text</a> &nbsp; </li>
<br/>
<li><a name='Web'></a><span style="font-weight:bold;">Web</span><br/>
<a href='/call-web.html'>call-web</a> &nbsp;<br/>
<a href='/out-header.html'>out-header</a> &nbsp;<br/>
<a href='/send-file.html'>send-file</a> &nbsp;<br/>
<a href='/silent-header.html'>silent-header</a> &nbsp; </li>
<br/>
<li><a name='Web encoding'></a><span style="font-weight:bold;">Web encoding</span><br/>
<a href='/decode-web.html'>decode-web</a> &nbsp;<br/>
<a href='/encode-web.html'>encode-web</a> &nbsp; </li>
<br/>
<li><a name='Web servers'></a><span style="font-weight:bold;">Web servers</span><br/>
<a href='/connect-apache-tcp-socket.html'>connect-apache-tcp-socket</a> &nbsp;<br/>
<a href='/connect-apache-unix-socket.html'>connect-apache-unix-socket</a> &nbsp;<br/>
<a href='/connect-haproxy-tcp-socket.html'>connect-haproxy-tcp-socket</a> &nbsp;<br/>
<a href='/connect-nginx-tcp-socket.html'>connect-nginx-tcp-socket</a> &nbsp;<br/>
<a href='/connect-nginx-unix-socket.html'>connect-nginx-unix-socket</a> &nbsp; </li>
<br/>
<li><a name='XML parsing'></a><span style="font-weight:bold;">XML parsing</span><br/>
<a href='/read-xml.html'>read-xml</a> &nbsp;<br/>
<a href='/xml-doc.html'>xml-doc</a> &nbsp; </li>
<br/>
</ul>
<a id="man pages"></a><div class="vsub"><a id="Man pages"></a>Man pages</div>
RimStone documentation is available online, and also as man pages (i.e. manual pages). You can use 'man' to get help (if man program is available on your system), for instance:<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_612' class=notranslate>
man read-file</pre>
<span id=rimstone_copied_612 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_612' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_612, code_612, rimstone_copied_612)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
RimStone uses section 2rim of man, so you can also use (in case of conflicts):<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_613' class=notranslate>
man 2rim read-file</pre>
<span id=rimstone_copied_613 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_613' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_613, code_613, rimstone_copied_613)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
If man program is not available on your system, you can also view topics with 'rim --man &lt;topic&gt;', for example:<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_614' class=notranslate>
rim <span class="Special">--man</span> run-query</pre>
<span id=rimstone_copied_614 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_614' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_614, code_614, rimstone_copied_614)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
To show all topics, type:<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_615' class=notranslate>
rim <span class="Special">--man</span> all</pre>
<span id=rimstone_copied_615 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_615' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_615, code_615, rimstone_copied_615)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<a id='do-once.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:left;background-color:white;'><a href='https://rimstone-lang.com' style='border-bottom:0px'><img src='https://rimstone-lang.com/rimstone.png' style='width:180px;height:auto'/></a></div><div class='vhub' style='margin-top:10px;'>Do once</div><hr/><span style="font-weight:bold;">Purpose</span>: Execute statements only once in a process.<br/>
<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_616' class=notranslate>
<span class="Statement"> do-once</span>
    &lt;any statements&gt;
<span class="Statement">    .</span>..
<span class="Statement"> end-do-once</span></pre>
<span id=rimstone_copied_616 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_616' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_616, code_616, rimstone_copied_616)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
do-once will execute &lt;any statements&gt; only once in a single process regardless of how many requests that process serves. &lt;any statements&gt; end with end-do-once. The first time a process reaches do-once, &lt;any statements&gt; will execute; in all subsequent cases the program control will skip to immediately after end-do-once.<br/>
<br/>
do-once cannot be nested, but otherwise can be used any number of times. <br/>
<br/>
Typical use of do-once may be making any calls that need to be performed only once per process, or it may be a one-time setup of process-scoped variables, or anything else that needs to execute just once for all requests served by the same process.<br/>
<br/>
&lt;any statements&gt; execute in the nested scope relative to the code surrounding do-once/end-do-once, except that any process-scoped variables are created in the same scope as the code surrounding do-once/end-do-once; this simplifies creation of process-scoped variables, if needed.<br/>
<div class="vsub"><a id="Examples"></a>Examples</div>
In this example, a process-scoped hash (that is available to multiple requests of a single process) is created in the very first request a process serves and data is written to it; the subsequent requests do not create a new hash but rather just write to it.<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_617' class=notranslate>
<span class="Statement">.</span>..
<span class="Statement"> do-once</span>
<span class="Statement">    new-hash</span> my_hash<span class="Identifier"> hash-size</span> <span class="Constant">1024</span><span class="Identifier"> process-scope</span>
<span class="Statement"> end-do-once</span>
<span class="Statement"> write-hash</span> my_hash<span class="Identifier"> key</span> my_key<span class="Identifier"> value</span> my_data
<span class="Statement"> .</span>..</pre>
<span id=rimstone_copied_617 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_617' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_617, code_617, rimstone_copied_617)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<div class="vsub"><a id="See also"></a>See also</div>
 <a name='Program flow'></a><span style="font-weight:bold;">Program flow</span><br/>
<a href='/break-loop.html'>break-loop</a> &nbsp;<br/>
<a href='/call-handler.html'>call-handler</a> &nbsp;<br/>
<a href='/code-blocks.html'>code-blocks</a> &nbsp;<br/>
<a href='/continue-loop.html'>continue-loop</a> &nbsp;<br/>
<a href='/do-once.html'>do-once</a> &nbsp;<br/>
<a href='/exit-handler.html'>exit-handler</a> &nbsp;<br/>
<a href='/if-defined.html'>if-defined</a> &nbsp;<br/>
<a href='/if-true.html'>if-true</a> &nbsp;<br/>
<a href='/quit-process.html'>quit-process</a> &nbsp;<br/>
<a href='/return-handler.html'>return-handler</a> &nbsp;<br/>
<a href='/start-loop.html'>start-loop</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='/documentation.html'>documentation</a><br/>
<a id='double-expressions.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:left;background-color:white;'><a href='https://rimstone-lang.com' style='border-bottom:0px'><img src='https://rimstone-lang.com/rimstone.png' style='width:180px;height:auto'/></a></div><div class='vhub' style='margin-top:10px;'>Double expressions</div><hr/>A double expression uses operators plus (+), minus (-), multiply (*), divide (/), parenthesis () and <a href='/math-functions.html'>math-functions</a>. For example:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_618' class=notranslate>
<span class="Statement">set-double</span> d1 = <span class="Constant">10</span><span class="Constant">.331</span>+(<span class="Constant">4</span>*n2-<span class="Constant">5</span>)/<span class="Constant">3</span><span class="Constant">.5</span>+exp(<span class="Constant">3</span>)</pre>
<span id=rimstone_copied_618 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_618' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_618, code_618, rimstone_copied_618)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
You can use double expressions anywhere double is expected as an input to any statement. Read about <a href='/mixing-doubles-and-numbers.html'>mixing-doubles-and-numbers</a>.<br/>
<br/>
Note that no checks are performed to catch overflows, underflows and division by zero. With double expressions, such events may produce NAN, +/-INF or otherwise incorrect results but the program will continue, and represent bugs in your code. Use "--fpe" option in <a href='/rim.html'>rim</a> during debugging and testing to catch such problems.<br/>
<div class="vsub"><a id="See also"></a>See also</div>
 <a name='Doubles'></a><span style="font-weight:bold;">Doubles</span><br/>
<a href='/abs-double.html'>abs-double</a> &nbsp;<br/>
<a href='/double-expressions.html'>double-expressions</a> &nbsp;<br/>
<a href='/double-string.html'>double-string</a> &nbsp;<br/>
<a href='/mixing-doubles-and-numbers.html'>mixing-doubles-and-numbers</a> &nbsp;<br/>
<a href='/set-double.html'>set-double</a> &nbsp;<br/>
<a href='/string-double.html'>string-double</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='/documentation.html'>documentation</a><br/>
<a id='double-string.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:left;background-color:white;'><a href='https://rimstone-lang.com' style='border-bottom:0px'><img src='https://rimstone-lang.com/rimstone.png' style='width:180px;height:auto'/></a></div><div class='vhub' style='margin-top:10px;'>Double string</div><hr/><span style="font-weight:bold;">Purpose</span>: Convert double to string.<br/>
<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_619' class=notranslate>
<span class="Statement">double-string</span> &lt;<span class="Type">double</span>&gt; [<span class="Type"> to</span> &lt;string&gt; ] \
    [<span class="Identifier"> width</span> &lt;width&gt; ] \
    [<span class="Identifier"> precision</span> &lt;precision&gt; ] \
    [<span class="Identifier"> format-floating</span> |<span class="Identifier"> format-scientific</span> |<span class="Identifier"> format-compact</span> ]</pre>
<span id=rimstone_copied_619 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_619' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_619, code_619, rimstone_copied_619)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
&lt;double&gt; is converted to &lt;string&gt; in "to" clause, using &lt;width&gt; and &lt;precision&gt; (in "width" and "precision" clauses) and using one of the formats ("format-floating", "format-scientific" or "format-compact"). By default "format-floating" is used with the &lt;precision&gt; of 6. "format-scientific" will output in the format that uses the exponent with a single digit before the decimal point. "format-compact" will choose the shorter of the two. &lt;double&gt; can be positive or negative (i.e. signed) and is a 64-bit double-precision floating point value. &nbsp;If "to" clause is omitted, then &lt;double&gt; is printed out.<br/>
<br/>
If double-string prints out a double (i.e. "to" clause is omitted), and this is within <a href='/write-string.html'>write-string</a>, then &lt;double&gt; is output into the buffer that builds a new string.<br/>
<br/>
Note that if there's an overflow the result is "inf" or "-inf" for positive and negative infinity.<br/>
<div class="vsub"><a id="Shortcut"></a>Shortcut</div>
For convenience, you can use a shortcut for converting a double to a string, by prepending "$$" to the variable name, for example:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_620' class=notranslate>
<span class="Statement">set-double</span> n = -<span class="Constant">10</span><span class="Constant">.41</span>
<span class="Statement">set-string</span> s = <span class="Constant">&quot;This is double &quot;</span> + $$n</pre>
<span id=rimstone_copied_620 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_620' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_620, code_620, rimstone_copied_620)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
The above is the same as:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_621' class=notranslate>
<span class="Statement">set-double</span> n = -<span class="Constant">10</span><span class="Constant">.41</span>
<span class="Statement">double-string</span> n<span class="Type"> to</span> sval
<span class="Statement">set-string</span> s = <span class="Constant">&quot;This is double &quot;</span> + sval</pre>
<span id=rimstone_copied_621 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_621' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_621, code_621, rimstone_copied_621)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Effectively, $$ in front of a double variable is the same as double-string that converts it to a string with all the default options. <br/>
<br/>
You can use $$ for an expression, in which case the expression must be within parenthesis:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_622' class=notranslate>
<span class="Statement">set-double</span> n1 = -<span class="Constant">10</span><span class="Constant">.41</span>
<span class="Statement">set-double</span> n2 = <span class="Constant">15</span><span class="Constant">.13</span>
<span class="Statement">set-string</span> s = <span class="Constant">&quot;This is double &quot;</span> + $$(n1+n2)</pre>
<span id=rimstone_copied_622 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_622' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_622, code_622, rimstone_copied_622)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
In this case double "s" will have value of "This is double 4.72", because doubles -10.41 and 15.13 are added to produce 4.72, which is then converted to a string and finally added to the first string.<br/>
<div class="vsub"><a id="Examples"></a>Examples</div>
The following will allocate memory for string "x" to be " &nbsp; &nbsp;8.8422000000e+02":<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_623' class=notranslate>
<span class="Statement">double-string</span> <span class="Constant">884</span><span class="Constant">.22</span><span class="Identifier"> width</span> <span class="Constant">20</span><span class="Type"> to</span> str<span class="Identifier"> precision</span> <span class="Constant">10</span><span class="Identifier"> format-scientific</span><span class="Type"> to</span> x</pre>
<span id=rimstone_copied_623 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_623' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_623, code_623, rimstone_copied_623)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<div class="vsub"><a id="See also"></a>See also</div>
 <a name='Doubles'></a><span style="font-weight:bold;">Doubles</span><br/>
<a href='/abs-double.html'>abs-double</a> &nbsp;<br/>
<a href='/double-expressions.html'>double-expressions</a> &nbsp;<br/>
<a href='/double-string.html'>double-string</a> &nbsp;<br/>
<a href='/mixing-doubles-and-numbers.html'>mixing-doubles-and-numbers</a> &nbsp;<br/>
<a href='/set-double.html'>set-double</a> &nbsp;<br/>
<a href='/string-double.html'>string-double</a> &nbsp; <br/>
 <a name='Strings'></a><span style="font-weight:bold;">Strings</span><br/>
<a href='/copy-string.html'>copy-string</a> &nbsp;<br/>
<a href='/count-substring.html'>count-substring</a> &nbsp;<br/>
<a href='/delete-string.html'>delete-string</a> &nbsp;<br/>
<a href='/double-string.html'>double-string</a> &nbsp;<br/>
<a href='/lower-string.html'>lower-string</a> &nbsp;<br/>
<a href='/match-regex.html'>match-regex</a> &nbsp;<br/>
<a href='/new-string.html'>new-string</a> &nbsp;<br/>
<a href='/number-string.html'>number-string</a> &nbsp;<br/>
<a href='/read-split.html'>read-split</a> &nbsp;<br/>
<a href='/replace-string.html'>replace-string</a> &nbsp;<br/>
<a href='/scan-string.html'>scan-string</a> &nbsp;<br/>
<a href='/set-string.html'>set-string</a> &nbsp;<br/>
<a href='/split-string.html'>split-string</a> &nbsp;<br/>
<a href='/string-double.html'>string-double</a> &nbsp;<br/>
<a href='/string-expressions.html'>string-expressions</a> &nbsp;<br/>
<a href='/string-length.html'>string-length</a> &nbsp;<br/>
<a href='/string-number.html'>string-number</a> &nbsp;<br/>
<a href='/trim-string.html'>trim-string</a> &nbsp;<br/>
<a href='/upper-string.html'>upper-string</a> &nbsp;<br/>
<a href='/write-string.html'>write-string</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='/documentation.html'>documentation</a><br/>
<a id='encode-base64.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:left;background-color:white;'><a href='https://rimstone-lang.com' style='border-bottom:0px'><img src='https://rimstone-lang.com/rimstone.png' style='width:180px;height:auto'/></a></div><div class='vhub' style='margin-top:10px;'>Encode base64</div><hr/><span style="font-weight:bold;">Purpose</span>: Base64 encode.<br/>
<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_624' class=notranslate>
<span class="Statement">encode-base64</span> &lt;data&gt;<span class="Type"> to</span> &lt;output data&gt; \
    [<span class="Identifier"> input-length</span> &lt;input length&gt; ]</pre>
<span id=rimstone_copied_624 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_624' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_624, code_624, rimstone_copied_624)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
encode-base64 will encode string &lt;data&gt; into base64 string &lt;output data&gt;.<br/>
<br/>
If "input-length" clause is used, then &lt;input length&gt; is the number of bytes encoded, otherwise the entirety of &lt;data&gt; is encoded. <br/>
<br/>
The result is stored in &lt;output data&gt; (in "to" clause).<br/>
<br/>
Base64-encoded strings are often used where binary data needs to be in a format that complies with certain text-based protocols, such as in attaching documents in email, or embedding binary documents (such as "JPG" images for example) in web pages with "data:image/jpg;base64..." specified, etc.<br/>
<div class="vsub"><a id="Examples"></a>Examples</div>
An example that encodes a string, decodes, and finally checks if they match:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_625' class=notranslate>
<span class="Comment">// Original string, generally this would be binary data in most cases</span>
<span class="Statement">set-string</span> dt =<span class="Constant">&quot;  oh well  &quot;</span>

<span class="Comment">// Encode in base64</span>
<span class="Statement">encode-base64</span> dt<span class="Type"> to</span> out_dt

<span class="Statement">decode-base64</span> out_dt<span class="Type"> to</span> new_dt

<span class="Statement">if-true</span> dt<span class="Identifier"> equal</span> new_dt
<span class="Statement">    @</span>Success!
<span class="Statement">else-if</span>
<span class="Statement">    @</span>Failure!
<span class="Statement">end-if</span></pre>
<span id=rimstone_copied_625 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_625' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_625, code_625, rimstone_copied_625)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
In the next example, "input-length" clause is used, and only a partial of the input string is encoded, then later compared to the original:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_626' class=notranslate>
<span class="Comment">// Original string, generally this would be binary data in most cases</span>
<span class="Statement">set-string</span> dt =<span class="Constant">&quot;  oh well  &quot;</span>

<span class="Comment">// Encode in base64, encode only </span><span class="Constant">6</span><span class="Comment"> bytes</span>
<span class="Statement">encode-base64</span> dt<span class="Identifier"> input-length</span> <span class="Constant">6</span><span class="Type"> to</span> out_dt

<span class="Statement">decode-base64</span> out_dt<span class="Type"> to</span> new_dt

<span class="Comment">// Get length of decoded string</span>
<span class="Statement">string-length</span> new_dt<span class="Type"> to</span> new_len

<span class="Statement">if-true</span> new_len<span class="Identifier"> not-equal</span> <span class="Constant">6</span>
<span class="Statement">    @</span>Failure!
<span class="Statement">else-if</span>
<span class="Statement">    @</span>Success!
<span class="Statement">end-if</span>

<span class="Statement">if-true</span> dt<span class="Identifier"> equal</span> new_dt<span class="Identifier"> length</span> new_len
<span class="Statement">    @</span>Success!
<span class="Statement">else-if</span>
<span class="Statement">    @</span>Failure! [<span class="Statement">&lt;&lt;print-out</span> dt<span class="Statement">&gt;&gt;</span>] [<span class="Statement">&lt;&lt;print-out</span> new_dt<span class="Statement">&gt;&gt;</span>]
<span class="Statement">end-if</span></pre>
<span id=rimstone_copied_626 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_626' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_626, code_626, rimstone_copied_626)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<div class="vsub"><a id="See also"></a>See also</div>
 <a name='Base64'></a><span style="font-weight:bold;">Base64</span><br/>
<a href='/decode-base64.html'>decode-base64</a> &nbsp;<br/>
<a href='/encode-base64.html'>encode-base64</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='/documentation.html'>documentation</a><br/>
<a id='encode-hex.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:left;background-color:white;'><a href='https://rimstone-lang.com' style='border-bottom:0px'><img src='https://rimstone-lang.com/rimstone.png' style='width:180px;height:auto'/></a></div><div class='vhub' style='margin-top:10px;'>Encode hex</div><hr/><span style="font-weight:bold;">Purpose</span>: Encode data into hexadecimal string.<br/>
<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_627' class=notranslate>
<span class="Statement">encode-hex</span> &lt;data&gt;<span class="Type"> to</span> &lt;output&gt; \
    [<span class="Identifier"> input-length</span> &lt;input length&gt; ] \
    [<span class="Identifier"> prefix</span> &lt;prefix&gt; ]</pre>
<span id=rimstone_copied_627 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_627' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_627, code_627, rimstone_copied_627)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
encode-hex will encode string &lt;data&gt; to hexadecimal string &lt;output&gt; given in "to" clause which consists of digits "0"-"9" and letters "a"-"f". <br/>
<br/>
The length of &lt;data&gt; to encode may be given with &lt;input length&gt; number in "input-length" clause; if not the whole string &lt;data&gt; is used. If you wish to prefix the output with a string &lt;prefix&gt;, you can specify it in "prefix" clause with &lt;prefix&gt;; otherwise no prefix is prepended.<br/>
<div class="vsub"><a id="Examples"></a>Examples</div>
Create hexadecimal string from binary data "mydata" of length 7, prefixed with string "\\\\x" (which is typically needed for PostgreSQL binary input to queries). The output string "hexout" is created:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_628' class=notranslate>
<span class="Statement">set-string</span> mydata = <span class="Constant">&quot;</span><span class="Special">\x00</span><span class="Constant">&quot;&quot;A&quot;&quot;</span><span class="Special">\x00</span><span class="Constant">&quot;&quot;</span><span class="Special">\x0F</span><span class="Constant">&quot;&quot;AB&quot;&quot;</span><span class="Special">\x00</span><span class="Constant">&quot;&quot;</span><span class="Special">\x04</span><span class="Constant">&quot;</span>
<span class="Statement">encode-hex</span> mydata<span class="Type"> to</span> hexout<span class="Identifier"> input-length</span> <span class="Constant">7</span><span class="Identifier"> prefix</span> <span class="Constant">&quot;</span><span class="Special">\\\\</span><span class="Constant">x&quot;</span></pre>
<span id=rimstone_copied_628 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_628' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_628, code_628, rimstone_copied_628)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
The value of "hexout" will be:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_629' class=notranslate>
\\x0041000F414200</pre>
<span id=rimstone_copied_629 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_629' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_629, code_629, rimstone_copied_629)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<div class="vsub"><a id="See also"></a>See also</div>
 <a name='Hex encoding'></a><span style="font-weight:bold;">Hex encoding</span><br/>
<a href='/decode-hex.html'>decode-hex</a> &nbsp;<br/>
<a href='/encode-hex.html'>encode-hex</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='/documentation.html'>documentation</a><br/>
<a id='encode-url.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:left;background-color:white;'><a href='https://rimstone-lang.com' style='border-bottom:0px'><img src='https://rimstone-lang.com/rimstone.png' style='width:180px;height:auto'/></a></div><div class='vhub' style='margin-top:10px;'>Encode url</div><hr/><span style="font-weight:bold;">Purpose</span>: URL-encode string.<br/>
<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_630' class=notranslate>
<span class="Statement">encode-url</span> &lt;string&gt;<span class="Type"> to</span> &lt;encoded string&gt; \
    [<span class="Identifier"> input-length</span> &lt;length&gt; ]</pre>
<span id=rimstone_copied_630 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_630' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_630, code_630, rimstone_copied_630)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
encode-url URL-encodes &lt;string&gt; and stores the result in &lt;encoded string&gt;. <br/>
<br/>
&lt;length&gt; in "input-length" clause lets you specify the number of bytes in &lt;string&gt; that will be encoded - if not specified or negative, it is the string length. <br/>
<br/>
All bytes except alphanumeric and those from "-._~" (i.e. dash, dot, underscore and tilde) are encoded.<br/>
<div class="vsub"><a id="Examples"></a>Examples</div>
In this example, a string "str" is URL encoded and the result is in a "result" string variable:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_631' class=notranslate>
<span class="Statement">set-string</span> str=<span class="Constant">&quot;  x=y?z&amp;  &quot;</span>
<span class="Statement">encode-url</span> str<span class="Type"> to</span> result</pre>
<span id=rimstone_copied_631 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_631' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_631, code_631, rimstone_copied_631)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
The "result" is "%20%20x%3Dy%3Fz%26%20%20".<br/>
<div class="vsub"><a id="See also"></a>See also</div>
 <a name='URL encoding'></a><span style="font-weight:bold;">URL encoding</span><br/>
<a href='/decode-url.html'>decode-url</a> &nbsp;<br/>
<a href='/encode-url.html'>encode-url</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='/documentation.html'>documentation</a><br/>
<a id='encode-web.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:left;background-color:white;'><a href='https://rimstone-lang.com' style='border-bottom:0px'><img src='https://rimstone-lang.com/rimstone.png' style='width:180px;height:auto'/></a></div><div class='vhub' style='margin-top:10px;'>Encode web</div><hr/><span style="font-weight:bold;">Purpose</span>: Web(HTML)-encode string.<br/>
<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_632' class=notranslate>
<span class="Statement">encode-web</span> &lt;string&gt;<span class="Type"> to</span> &lt;encoded string&gt; \
    [<span class="Identifier"> input-length</span> &lt;length&gt; ]</pre>
<span id=rimstone_copied_632 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_632' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_632, code_632, rimstone_copied_632)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
encode-web encodes &lt;string&gt; so it can be used in a HTML-like markup text (such as a web page or an XML/XHTML document), and stores the result in &lt;encoded string&gt;. <br/>
<br/>
You can encode only the first &lt;length&gt; bytes, given by "input-length" clause.<br/>
<div class="vsub"><a id="Examples"></a>Examples</div>
In this example, a string "str" will be web-encoded and the result is in "result" variable:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_633' class=notranslate>
<span class="Statement">set-string</span> str=<span class="Constant">&quot;  x&lt;y&gt;z&amp;</span><span class="Special">\&quot;</span><span class="Constant">'  &quot;</span>
<span class="Statement">encode-web</span> str<span class="Type"> to</span> result</pre>
<span id=rimstone_copied_633 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_633' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_633, code_633, rimstone_copied_633)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
The "result" is " &nbsp; x&amp;lt;y&amp;gt;z&amp;amp;&amp;quot;&amp;apos; &nbsp;".<br/>
<div class="vsub"><a id="See also"></a>See also</div>
 <a name='Web encoding'></a><span style="font-weight:bold;">Web encoding</span><br/>
<a href='/decode-web.html'>decode-web</a> &nbsp;<br/>
<a href='/encode-web.html'>encode-web</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='/documentation.html'>documentation</a><br/>
<a id='encrypt-data.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:left;background-color:white;'><a href='https://rimstone-lang.com' style='border-bottom:0px'><img src='https://rimstone-lang.com/rimstone.png' style='width:180px;height:auto'/></a></div><div class='vhub' style='margin-top:10px;'>Encrypt data</div><hr/><span style="font-weight:bold;">Purpose</span>: Encrypt data.<br/>
<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_634' class=notranslate>
<span class="Statement">encrypt-data</span> &lt;data&gt;<span class="Type"> to</span> &lt;result&gt; \
    [<span class="Identifier"> input-length</span> &lt;input length&gt; ] \
    [<span class="Identifier"> binary</span> [ &lt;binary&gt; ] ] \
    (<span class="Identifier"> password</span> &lt;password&gt; \
        [<span class="Identifier"> salt</span> &lt;salt&gt; [<span class="Identifier"> salt-length</span> &lt;salt length&gt; ] ] \
        [<span class="Identifier"> iterations</span> &lt;iterations&gt; ] \
        [<span class="Identifier"> cipher</span> &lt;cipher algorithm&gt; ] \
        [<span class="Identifier"> digest</span> &lt;digest algorithm&gt; ]
        [<span class="Identifier"> cache</span> ]
        [<span class="Identifier"> clear-cache</span> &lt;clear cache&gt; <span class="Error">)</span> \
    [<span class="Identifier"> init-vector</span> &lt;init vector&gt; ]</pre>
<span id=rimstone_copied_634 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_634' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_634, code_634, rimstone_copied_634)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
encrypt-data encrypts &lt;data&gt; and stores the ciphertext to &lt;result&gt; specified by "to" clause.<br/>
<div class="vsub"><a id="Cipher and digest"></a>Cipher and digest</div>
By default, AES-256-CBC encryption and SHA256 hashing is used. You can however specify different cipher and digest algorithms with &lt;cipher algorithm&gt; (in "cipher" clause) and &lt;digest algorithm&gt; (in "digest" clause) as long as <a href='https://www.openssl.org/'>OpenSSL</a> supports them, or you have added them to OpenSSL. You can see the available ones by using:<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_635' class=notranslate>
<span class="Comment">#get list of cipher providers</span>
openssl list <span class="Special">-cipher-algorithms</span>

<span class="Comment">#get list of digest providers</span>
openssl list <span class="Special">-digest-algorithms</span></pre>
<span id=rimstone_copied_635 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_635' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_635, code_635, rimstone_copied_635)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Note that the default algorithms will typically suffice. If you use different algorithms, you should have a specific reason. If you use a specific cipher and digest for encoding, you must use the same for decoding. The key derivation method is PBKDF2.<br/>
<div class="vsub"><a id="Data to be encrypted"></a>Data to be encrypted</div>
If "input-length" clause is missing, then the number of bytes encrypted is the length of &lt;data&gt; (see <a href='/string-length.html'>string-length</a>). If "input-length" clause is used, then &lt;input length&gt; bytes are encrypted.<br/>
<div class="vsub"><a id="Password"></a>Password</div>
String &lt;password&gt; (in "password" clause) is the password used to encrypt and it must be a null-terminated string. <br/>
<div class="vsub"><a id="Salt"></a>Salt</div>
String &lt;salt&gt; (in "salt" clause) is the salt used in Key Derivation Function (KDF) when an actual symmetric encryption key is created. If &lt;salt length&gt; (in "salt-length" clause) is not specified, then the salt is null-terminated, otherwise it is a binary value of length &lt;salt length&gt;. See <a href='/random-string.html'>random-string</a> or <a href='/random-crypto.html'>random-crypto</a> for generating a random salt. If you use the "salt" clause, then you must use the exact same &lt;salt&gt; when data is decrypted with <a href='/decrypt-data.html'>decrypt-data</a> - typically salt values are stored or transmitted unencrypted.<br/>
<div class="vsub"><a id="Iterations"></a>Iterations</div>
The number of iterations used in producing a key is specified in &lt;iterations&gt; in "iterations" clause. The default is 1000 per <a href='https://www.rfc-editor.org/rfc/rfc8018'>RFC8018</a>, though depending on your needs and the quality of password you may choose a different value.<br/>
<div class="vsub"><a id="Initialization vector (IV)"></a>Initialization vector (IV)</div>
Different encrypted messages should have a different IV value, which is specified with &lt;init vector&gt; in the "init-vector" clause. See <a href='/random-string.html'>random-string</a> or <a href='/random-crypto.html'>random-crypto</a> for generating IV values. The decrypting side must use the same IV value to decrypt the message. Just like salt, IV is not a secret and is transmitted in plain text. Each cipher algorithm may require a certain number of bytes for IV.<br/>
<div class="vsub"><a id="Encrypted data"></a>Encrypted data</div>
The encrypted data is stored in &lt;result&gt; (in "to" clause). The encrypted data can be a binary data (if "binary" clause is present without boolean variable &lt;binary&gt;, or if &lt;binary&gt; evaluates to true), which is binary-mode encryption; or if not, it will be a null-terminated string, which is character-mode encryption, consisting of hexadecimal characters (i.e. ranging from "0" to "9" and "a" to "f"). Character mode of encryption is convenient if the result of encryption should be a human readable string, or for the purposes of non-binary storage in the database.<br/>
<div class="vsub"><a id="Caching key"></a>Caching key</div>
A key used to actually encrypt/decrypt data is produced by using password, salt, cipher, digest and the number of iterations. Depending on these parameters (especially the number of iterations), computing the key can be a resource intensive and lengthy operation. You can cache the key value and compute it only once (or once in a while) by using "cache" clause. If you need to recompute the key once in a while, use "clear-cache" clause. &lt;clear cache&gt; is a "bool" variable; the key cache is cleared if it is true, and stays if it is false. For example with encrypt-data (the same applies to decrypt-data):<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_636' class=notranslate>
<span class="Statement">set-bool</span> clear = <span class="Constant">true</span> if-true q<span class="Identifier"> equal</span> <span class="Constant">0</span>
<span class="Statement">encrypt-data</span> dt<span class="Identifier"> init-vector</span> non<span class="Identifier"> password</span> pwd \
   <span class="Identifier"> salt</span> rs<span class="Identifier"> salt-length</span> <span class="Constant">10</span><span class="Identifier"> iterations</span> iter<span class="Type"> to</span> \
    dt_enc<span class="Identifier"> cache clear-cache</span> clear</pre>
<span id=rimstone_copied_636 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_636' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_636, code_636, rimstone_copied_636)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
In this case, when "q" is 0, cache will be cleared, with values of password, salt and iterations presumably changed, and the new key is computed and then cached. In all other cases, the last computed key stays the same. Normally, with IV usage (in "init-vector" clause), there is no need to change the key often, or at all.<br/>
<br/>
Note that while "cache" clause is in effect, the values for "password", "salt", "cipher", "digest" and "iterations" clauses can change without any effect. Only when "clear-cache" evaluates to "true" are those values taken into account.<br/>
<div class="vsub"><a id="Safety"></a>Safety</div>
Unless you are encrypting/decrypting a single message, you should always use IV in "init-vector" clause. Its purpose is to randomize the data encrypted, so that same messages do not produce the same ciphertext.<br/>
<br/>
If you use salt, a random IV is created with each different salt value. However, different salt values without "cache" clause will regenerate the key, which may be computationally intensive, so it may be better to use a different IV instead for each new encryption and keep the salt value the same with the high number of iterations. In practicality this means using "cache" so that key is computed once per process with the salt, and IV changes with each message. If you need to recompute the key occasionally, use "clear-cache".<br/>
<br/>
Each cipher/digest combination carries separate recommendations about the usage of salt, IV and the number of iterations. Please consult their documentation for more details.<br/>
<div class="vsub"><a id="Examples"></a>Examples</div>
In the following example, the data is encrypted, and then decrypted, producing the very same data:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_637' class=notranslate>
<span class="Comment">// Original string to encrypt</span>
<span class="Statement">set-string</span> orig_data=<span class="Constant">&quot;something to encrypt!&quot;</span>

<span class="Comment">// Encrypted data is in </span><span class="Constant">&quot;res&quot;</span><span class="Comment"> variable</span>
<span class="Statement">encrypt-data</span> orig_data<span class="Identifier"> password</span> <span class="Constant">&quot;mypass&quot;</span><span class="Type"> to</span> res

<span class="Comment">// Decrypt what was just encrypted, decrypted data is in </span><span class="Constant">&quot;dec_data&quot;</span>
<span class="Statement">decrypt-data</span> res<span class="Identifier"> password</span> <span class="Constant">&quot;mypass&quot;</span><span class="Type"> to</span> dec_data

<span class="Comment">// Check that decrypted data matches the original </span>
<span class="Statement">if-true</span> orig_data<span class="Identifier"> equal</span> dec_data
<span class="Statement">    @</span>Success!
<span class="Statement">else-if</span>
<span class="Statement">    @</span>Failure!
<span class="Statement">end-if</span></pre>
<span id=rimstone_copied_637 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_637' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_637, code_637, rimstone_copied_637)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
A more involved example below encrypts specific number of bytes (6 in this case). <a href='/random-string.html'>random-string</a> is used to produce salt. The length of data to encrypt is given with "input-length" clause. The encrypted data is specified to be "binary" (meaning not as a human-readable string); note that RimStone keeps accurate count of how many bytes are in any binary data. The decryption thus uses "input-length" clause to specify the length of data to decrypt. Finally, the original data is compared with the decrypted data, and the length of such data must be the same as the original (meaning 6):<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_638' class=notranslate>
<span class="Comment">// Original data (only the first </span><span class="Constant">6</span><span class="Comment"> bytes are encrypted)</span>
<span class="Statement">set-string</span> orig_data=<span class="Constant">&quot;something to encrypt!&quot;</span>

<span class="Comment">// Get </span><span class="Constant">8</span><span class="Comment"> random binary bytes to be the salt</span>
<span class="Statement">random-string</span><span class="Type"> to</span> newsalt<span class="Identifier"> length</span> <span class="Constant">8</span><span class="Identifier"> binary</span>

<span class="Comment">// Encrypt data using salt and produce binary output (meaning it's not a null-terminated character string), with the</span>
<span class="Comment">// length of such output in </span><span class="Constant">&quot;encrypted_len&quot;</span><span class="Comment"> variable.</span>
<span class="Statement">encrypt-data</span> orig_data<span class="Identifier"> input-length</span> <span class="Constant">6</span><span class="Identifier"> password</span> <span class="Constant">&quot;mypass&quot;</span><span class="Identifier"> salt</span> newsalt<span class="Type"> to</span> res<span class="Identifier"> binary</span>

<span class="Comment">// Decrypt the data encrypted above. The length of encrypted data is passed in </span><span class="Constant">&quot;encrypted_len&quot;</span><span class="Comment"> variable, and then length of decrypted data</span>
<span class="Comment">// is obtained in </span><span class="Constant">&quot;decrypted_len&quot;</span><span class="Comment"> variable.</span>
<span class="Statement">decrypt-data</span> res<span class="Identifier"> password</span> <span class="Constant">&quot;mypass&quot;</span><span class="Identifier"> salt</span> newsalt<span class="Type"> to</span> dec_data<span class="Identifier"> binary</span>

<span class="Comment">// Check if the </span><span class="Constant">6</span><span class="Comment"> bytes of the original data matches decrypted data, and if exactly </span><span class="Constant">6</span><span class="Comment"> bytes was decrypted</span>
<span class="Statement">string-length</span> dec_data<span class="Type"> to</span> decrypted_len
<span class="Statement">if-true</span> orig_data<span class="Identifier"> equal</span> dec_data<span class="Identifier"> length</span> <span class="Constant">6</span><span class="Identifier"> and</span> decrypted_len<span class="Identifier"> equal</span> <span class="Constant">6</span>
<span class="Statement">    @</span>Success!
<span class="Statement">else-if</span>
<span class="Statement">    @</span>Failure!
<span class="Statement">end-if</span></pre>
<span id=rimstone_copied_638 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_638' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_638, code_638, rimstone_copied_638)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
An example of using different algorithms:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_639' class=notranslate>
<span class="Statement">encrypt-data</span> <span class="Constant">&quot;some data!&quot;</span><span class="Identifier"> password</span> <span class="Constant">&quot;mypwd&quot;</span><span class="Identifier"> salt</span> rs1<span class="Type"> to</span> encd1<span class="Identifier"> cipher</span> <span class="Constant">&quot;camellia-256-cfb1&quot;</span><span class="Identifier"> digest</span> <span class="Constant">&quot;sha3-256&quot;</span>
<span class="Statement">decrypt-data</span> encd1<span class="Identifier"> password</span> <span class="Constant">&quot;mypwd&quot;</span><span class="Identifier"> salt</span> rs1<span class="Type"> to</span> decd1<span class="Identifier"> cipher</span> <span class="Constant">&quot;camellia-256-cfb1&quot;</span><span class="Identifier"> digest</span> <span class="Constant">&quot;sha3-256&quot;</span></pre>
<span id=rimstone_copied_639 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_639' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_639, code_639, rimstone_copied_639)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<div class="vsub"><a id="See also"></a>See also</div>
 <a name='Encryption'></a><span style="font-weight:bold;">Encryption</span><br/>
<a href='/decrypt-data.html'>decrypt-data</a> &nbsp;<br/>
<a href='/derive-key.html'>derive-key</a> &nbsp;<br/>
<a href='/encrypt-data.html'>encrypt-data</a> &nbsp;<br/>
<a href='/hash-string.html'>hash-string</a> &nbsp;<br/>
<a href='/hmac-string.html'>hmac-string</a> &nbsp;<br/>
<a href='/random-crypto.html'>random-crypto</a> &nbsp;<br/>
<a href='/random-string.html'>random-string</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='/documentation.html'>documentation</a><br/>
<a id='erfc.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:left;background-color:white;'><a href='https://rimstone-lang.com' style='border-bottom:0px'><img src='https://rimstone-lang.com/rimstone.png' style='width:180px;height:auto'/></a></div><div class='vhub' style='margin-top:10px;'>Erfc</div><hr/><span style="font-weight:bold;">Purpose</span>: Complementary error function.<br/>
<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_643' class=notranslate>
erfc( &lt;var&gt; )</pre>
<span id=rimstone_copied_643 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_643' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_643, code_643, rimstone_copied_643)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
erfc returns the complementary value of <a href='/erf.html'>erf</a>(), i.e. 1-erf(&lt;var&gt;). &lt;var&gt; is a number or a double and the result is a double.<br/>
<div class="vsub"><a id="Examples"></a>Examples</div>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_644' class=notranslate>
<span class="Statement">set-double</span> d = erfc(<span class="Constant">0</span><span class="Constant">.5</span>) + <span class="Constant">1</span></pre>
<span id=rimstone_copied_644 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_644' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_644, code_644, rimstone_copied_644)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<div class="vsub"><a id="See also"></a>See also</div>
 <a name='Math functions'></a><span style="font-weight:bold;">Math functions</span><br/>
<a href='/abd.html'>abd</a> &nbsp;<br/>
<a href='/abn.html'>abn</a> &nbsp;<br/>
<a href='/acos.html'>acos</a> &nbsp;<br/>
<a href='/acosh.html'>acosh</a> &nbsp;<br/>
<a href='/asin.html'>asin</a> &nbsp;<br/>
<a href='/asinh.html'>asinh</a> &nbsp;<br/>
<a href='/atan.html'>atan</a> &nbsp;<br/>
<a href='/atan2.html'>atan2</a> &nbsp;<br/>
<a href='/atanh.html'>atanh</a> &nbsp;<br/>
<a href='/cbrt.html'>cbrt</a> &nbsp;<br/>
<a href='/ceil.html'>ceil</a> &nbsp;<br/>
<a href='/copysign.html'>copysign</a> &nbsp;<br/>
<a href='/cos.html'>cos</a> &nbsp;<br/>
<a href='/cosh.html'>cosh</a> &nbsp;<br/>
<a href='/dbl.html'>dbl</a> &nbsp;<br/>
<a href='/erf.html'>erf</a> &nbsp;<br/>
<a href='/erfc.html'>erfc</a> &nbsp;<br/>
<a href='/exp.html'>exp</a> &nbsp;<br/>
<a href='/exp2.html'>exp2</a> &nbsp;<br/>
<a href='/floor.html'>floor</a> &nbsp;<br/>
<a href='/fmod.html'>fmod</a> &nbsp;<br/>
<a href='/hypot.html'>hypot</a> &nbsp;<br/>
<a href='/isinf.html'>isinf</a> &nbsp;<br/>
<a href='/isnan.html'>isnan</a> &nbsp;<br/>
<a href='/ldexp.html'>ldexp</a> &nbsp;<br/>
<a href='/lgamma.html'>lgamma</a> &nbsp;<br/>
<a href='/log.html'>log</a> &nbsp;<br/>
<a href='/log10.html'>log10</a> &nbsp;<br/>
<a href='/log2.html'>log2</a> &nbsp;<br/>
<a href='/math-functions.html'>math-functions</a> &nbsp;<br/>
<a href='/nextafter.html'>nextafter</a> &nbsp;<br/>
<a href='/num.html'>num</a> &nbsp;<br/>
<a href='/pow.html'>pow</a> &nbsp;<br/>
<a href='/round.html'>round</a> &nbsp;<br/>
<a href='/sin.html'>sin</a> &nbsp;<br/>
<a href='/sinh.html'>sinh</a> &nbsp;<br/>
<a href='/sqrt.html'>sqrt</a> &nbsp;<br/>
<a href='/tan.html'>tan</a> &nbsp;<br/>
<a href='/tanh.html'>tanh</a> &nbsp;<br/>
<a href='/trunc.html'>trunc</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='/documentation.html'>documentation</a><br/>
<a id='erf.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:left;background-color:white;'><a href='https://rimstone-lang.com' style='border-bottom:0px'><img src='https://rimstone-lang.com/rimstone.png' style='width:180px;height:auto'/></a></div><div class='vhub' style='margin-top:10px;'>Erf</div><hr/><span style="font-weight:bold;">Purpose</span>: Error function.<br/>
<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_640' class=notranslate>
erf( &lt;var&gt; )</pre>
<span id=rimstone_copied_640 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_640' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_640, code_640, rimstone_copied_640)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
erf returns return the error function of &lt;var&gt;, defined as:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_641' class=notranslate>
erf(&lt;var&gt;) = <span class="Constant">2</span>/sqrt(pi) * integral from <span class="Constant">0</span> to &lt;var&gt; of exp(-x*x) dx</pre>
<span id=rimstone_copied_641 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_641' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_641, code_641, rimstone_copied_641)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
&lt;var&gt; is a number or a double and the result is a double.<br/>
<div class="vsub"><a id="Examples"></a>Examples</div>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_642' class=notranslate>
<span class="Statement">set-double</span> d = erf(<span class="Constant">0</span><span class="Constant">.5</span>) + <span class="Constant">1</span></pre>
<span id=rimstone_copied_642 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_642' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_642, code_642, rimstone_copied_642)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<div class="vsub"><a id="See also"></a>See also</div>
 <a name='Math functions'></a><span style="font-weight:bold;">Math functions</span><br/>
<a href='/abd.html'>abd</a> &nbsp;<br/>
<a href='/abn.html'>abn</a> &nbsp;<br/>
<a href='/acos.html'>acos</a> &nbsp;<br/>
<a href='/acosh.html'>acosh</a> &nbsp;<br/>
<a href='/asin.html'>asin</a> &nbsp;<br/>
<a href='/asinh.html'>asinh</a> &nbsp;<br/>
<a href='/atan.html'>atan</a> &nbsp;<br/>
<a href='/atan2.html'>atan2</a> &nbsp;<br/>
<a href='/atanh.html'>atanh</a> &nbsp;<br/>
<a href='/cbrt.html'>cbrt</a> &nbsp;<br/>
<a href='/ceil.html'>ceil</a> &nbsp;<br/>
<a href='/copysign.html'>copysign</a> &nbsp;<br/>
<a href='/cos.html'>cos</a> &nbsp;<br/>
<a href='/cosh.html'>cosh</a> &nbsp;<br/>
<a href='/dbl.html'>dbl</a> &nbsp;<br/>
<a href='/erf.html'>erf</a> &nbsp;<br/>
<a href='/erfc.html'>erfc</a> &nbsp;<br/>
<a href='/exp.html'>exp</a> &nbsp;<br/>
<a href='/exp2.html'>exp2</a> &nbsp;<br/>
<a href='/floor.html'>floor</a> &nbsp;<br/>
<a href='/fmod.html'>fmod</a> &nbsp;<br/>
<a href='/hypot.html'>hypot</a> &nbsp;<br/>
<a href='/isinf.html'>isinf</a> &nbsp;<br/>
<a href='/isnan.html'>isnan</a> &nbsp;<br/>
<a href='/ldexp.html'>ldexp</a> &nbsp;<br/>
<a href='/lgamma.html'>lgamma</a> &nbsp;<br/>
<a href='/log.html'>log</a> &nbsp;<br/>
<a href='/log10.html'>log10</a> &nbsp;<br/>
<a href='/log2.html'>log2</a> &nbsp;<br/>
<a href='/math-functions.html'>math-functions</a> &nbsp;<br/>
<a href='/nextafter.html'>nextafter</a> &nbsp;<br/>
<a href='/num.html'>num</a> &nbsp;<br/>
<a href='/pow.html'>pow</a> &nbsp;<br/>
<a href='/round.html'>round</a> &nbsp;<br/>
<a href='/sin.html'>sin</a> &nbsp;<br/>
<a href='/sinh.html'>sinh</a> &nbsp;<br/>
<a href='/sqrt.html'>sqrt</a> &nbsp;<br/>
<a href='/tan.html'>tan</a> &nbsp;<br/>
<a href='/tanh.html'>tanh</a> &nbsp;<br/>
<a href='/trunc.html'>trunc</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='/documentation.html'>documentation</a><br/>
<a id='error-code.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:left;background-color:white;'><a href='https://rimstone-lang.com' style='border-bottom:0px'><img src='https://rimstone-lang.com/rimstone.png' style='width:180px;height:auto'/></a></div><div class='vhub' style='margin-top:10px;'>Error code</div><hr/>Many RimStone statements return status with RIM_ERR_... error codes, which are generally descriptive to a point. Such status may not as detailed as the operating system "errno" variable, however you can use "errno" clause in <a href='/get-req.html'>get-req</a> statement to obtain the last known errno value from aforementioned statements. You should obtain this value as soon as possible after the statement because another statement may set it afterwards.<br/>
<br/>
In the following example, a directory is attempted to be deleted via <a href='/delete-file.html'>delete-file</a>, which will fail with RIM_ERR_DELETE - however you can get a more specific code via "errno" (which in this case is "21", or "EISDIR", which means that it cannot delete a directory with this statement):<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_645' class=notranslate>
<span class="Statement">delete-file</span> <span class="Constant">&quot;some_directory&quot;</span><span class="Type"> status</span> stc
<span class="Statement">if-true</span> stc<span class="Identifier"> equal</span> RIM_ERR_DELETE
<span class="Statement">    get-req</span><span class="Identifier"> errno</span><span class="Type"> to</span> e
<span class="Statement">    @</span>Cannot delete file
<span class="Statement">    print-format</span> <span class="Constant">&quot;Error </span><span class="Special">%ld</span><span class="Special">\n</span><span class="Constant">&quot;</span>, e
<span class="Statement">end-if</span></pre>
<span id=rimstone_copied_645 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_645' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_645, code_645, rimstone_copied_645)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Note that with some RIM_ERR_... codes, the "errno" clause in get-req may return 0. This means the error was detected by RimStone and not reported by the operating system.<br/>
<br/>
You can use standard Linux constants, as defined in C "errno.h" include file to compare the error code obtained with get-req. For instance, you can use constants like EACCES or EEXIST. To see what's the meaning of errno number or name, use standard Linux utility "errno".<br/>
<div class="vsub"><a id="See also"></a>See also</div>
 <a name='Error handling'></a><span style="font-weight:bold;">Error handling</span><br/>
<a href='/db-error.html'>db-error</a> &nbsp;<br/>
<a href='/error-code.html'>error-code</a> &nbsp;<br/>
<a href='/error-handling.html'>error-handling</a> &nbsp;<br/>
<a href='/report-error.html'>report-error</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='/documentation.html'>documentation</a><br/>
<a id='error-handling.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:left;background-color:white;'><a href='https://rimstone-lang.com' style='border-bottom:0px'><img src='https://rimstone-lang.com/rimstone.png' style='width:180px;height:auto'/></a></div><div class='vhub' style='margin-top:10px;'>Error handling</div><hr/><div class="vsub"><a id="When your program errors out"></a>When your program errors out</div>
"Erroring out" means a process handling a request has encountered a difficulty that cannot be handled and it will either:<br/>
<ul><li>Skip the rest of the request, and move on quickly to handle the next request without exiting. Most errors are like this, for example your program has attempted to access memory outside of what's allocated, or you have called <a href='/report-error.html'>report-error</a> statement.<br/>
</li><li>Stop and exit, and it may be automatically restarted if it's a <a href='/service.html'>service</a>. For instance, the process could be out of memory, or the database is permanently down and connection cannot be re-established, or there is an internal error.</li></ul>. <br/>
Note that if your program is <a href='/command-line.html'>command-line</a>, it will exit in any case since it handles a single request anyway.</li></ul>
<div class="vsub"><a id="When there is a problem in RimStone"></a>When there is a problem in RimStone</div>
If there is a fatal internal error (i.e. error in RimStone code itself that cannot be handled), it will be caught by RimStone, and the process will end. If your process is started with <a href='/mrim.html'>mrim</a>, it may be automatically restarted.<br/>
<div class="vsub"><a id="Logging the error"></a>Logging the error</div>
Regardless of the type of error and regardless of whether the process exits or not, the error is output to the standard error stream along with the error details: cause of error and full stack trace (including source file names and line numbers); note that for <a href='/report-error.html'>report-error</a> error details are not output since you're providing your own details.<br/>
<div class="vsub"><a id="Output when error happens"></a>Output when error happens</div>
When your program errors out, a generic message is output to the standard output, i.e. to the client, that indicates that error has occurred, and to check the error log. The actual details are output to standard error stream, see details above. Note that in case of fatal error (such as RimStone internal error), no message is sent to the client; rather the program ends. On how to view the error log (including the stack traces), see <a href='/debugging.html'>debugging</a>.<br/>
<div class="vsub"><a id="See also"></a>See also</div>
 <a name='Error handling'></a><span style="font-weight:bold;">Error handling</span><br/>
<a href='/db-error.html'>db-error</a> &nbsp;<br/>
<a href='/error-code.html'>error-code</a> &nbsp;<br/>
<a href='/error-handling.html'>error-handling</a> &nbsp;<br/>
<a href='/report-error.html'>report-error</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='/documentation.html'>documentation</a><br/>
<a id='examples.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:left;background-color:white;'><a href='https://rimstone-lang.com' style='border-bottom:0px'><img src='https://rimstone-lang.com/rimstone.png' style='width:180px;height:auto'/></a></div><div class='vhub' style='margin-top:10px;'>RimStone examples</div><hr/><br/>
Updated on 2025-11-03. Always use the latest RimStone version to run these examples.<br/>
<ul><br/>
<li><a href='/article-hello-world-service-web.html'>Web service Hello World</a><br/>
To access a RimStone service on the web, you need to have a web server or load balancer (think Apache, Nginx, HAProxy etc.). ...<br/>
</li>
<br/>
<li><a href='/article-record-temperature-mariadb.html'>More than one table in a database transaction in MariaDB</a><br/>
Here you'll learn how to use a database transaction to insert/update into multiple tables; so that if any of those fail, the entire transaction is cancelled (rollbacked), and if they all succeed, the transaction is committed as a whole, atomically. ...<br/>
</li>
<br/>
<li><a href='/article-recursion-factorial.html'>Calculate factorial: recursion in RimStone</a><br/>
Computing factorial is commonly used to demonstrate recursion in a programming language, and this example will do that. For a recursion example that manipulates a string, see <a href='/article-recursion-reverse-string.html'>article-recursion-reverse-string</a>. ...<br/>
</li>
<br/>
<li><a href='/article-regex.html'>Using Regex in RimStone</a><br/>
Regex (or "REGular EXpressions") is a powerful way to search strings, as well as to replace parts of strings. It makes it easier to reliably do so, since regular expressions are usually short; at the same time there's a learning curve in becoming proficient. However, given that regex is ubiquitous, it is worth learning at least some of it, as it can come handy. ...<br/>
</li>
<br/>
<li><a href='/article-vim-coloring.html'>Using Vim color schemes with RimStone</a><br/>
RimStone installation comes with a Vim module for highlighting RimStone code. After installing RimStone, run this to install the Vim module: ...<br/>
</li>
<br/>
<li><a href='/article-distributed.html'>How to write distributed applications</a><br/>
Distributed computing is two or more servers communicating for a common purpose. Typically, some tasks are divvied up between a number of computers, and they all work together to accomplish it. Note that "separate servers" may mean physically separate computers. It may also mean virtual servers such as Virtual Private Servers (VPS) or containers, that may share the same physical hardware, though they appear as separate computers on the network. &nbsp;...<br/>
</li>
<br/>
<li><a href='/article-hello-world-service.html'>Hello World as a Service</a><br/>
Writing a <a href='/service.html'>service</a> is the same as writing a <a href='/command-line.html'>command-line</a> program in RimStone. Both take the same input and produce the same output, so you can test with either one to begin with. ...<br/>
</li>
<br/>
<li><a href='/article-language.html'>RimStone is a different kind of programming language</a><br/>
Over the past 50 years, most general-purpose programming languages became more complex due to the constant influx of new features (some of which are great, while others are a "feature creep"). Just look at some major programming languages in their early days, versus the latest incarnations. From a distance, it may look like you switched from riding a bicycle to flying a passenger jet with a few hundred knobs, buttons and readout consoles. Arguably, the language structure covers many more usage patterns, yields additional power, and safety has improved, but the complexity and the learning curve has increased too. While in the beginning there was lots of pitfalls due to the lack of features and safety, in the end there's a minefield due to an overcrowded feature-scape that's paralyzing to deal with and often not quite understood by anyone on the team. ...<br/>
</li>
<br/>
<li><a href='/article-status-check.html'>Example of auto status checking with RimStone</a><br/>
When talking about safety in programming, it is memory safety that usually takes the spotlight. However, here we'll touch on another common safety issue that typically causes application logic errors, meaning your program won't function correctly. It's about checking the status of any kind of statement that provides it. Not checking the status could mean that the result of a statement isn't correct, yet your program is proceeding as if it were. Of course, this is bound to cause problems, and this is true for any programming language. ...<br/>
</li>
<br/>
<li><a href='/article-mariadb.html'>Web services with MariaDB</a><br/>
Create a directory for your project, it'll be where this example takes place. Also create RimStone application "stock": ...<br/>
</li>
<br/>
<li><a href='/article-mortgage.html'>Service to calculate mortgage amortization schedule and total interest</a><br/>
This example shows using math functions to compute an amortization schedule for a mortgage, as well as total interest. It shows how much interest vs principal is paid each month. ...<br/>
</li>
<br/>
<li><a href='/article-security.html'>Security of web services</a><br/>
The security of web services is a broad subject, but there are a few common topics that one should be well aware. They affect if your web application, or an API service, will be a success or not. ...<br/>
</li>
<br/>
<li><a href='/article-statements.html'>Statements in RimStone</a><br/>
RimStone is a new programming language and framework for developing web services and web applications. The reason for RimStone is to make software development easier and more reliable. ...<br/>
</li>
<br/>
<li><a href='/article-what-if-toolkit-library-missing.html'>What if toolkit library is missing?</a><br/>
You can choose to not install any toolkit libraries when you setup RimStone (see <a href='/install-rimstone.html'>install-rimstone</a>). So what happens when at some point you write code that requires one of those libraries? ...<br/>
</li>
<br/>
<li><a href='/article-recursion-reverse-string.html'>Reverse string: recursion in RimStone</a><br/>
This example will reverse a string, i.e. turn it around so that it's like in the mirror. This will be done by using recursion; of course it can be done in other ways too, but this will demonstrate the use of recursion to manipulate a string. For a different recursion example (that calculates a factorial of a number), see <a href='/article-recursion-factorial.html'>article-recursion-factorial</a>. ...<br/>
</li>
<br/>
<li><a href='/article-notes-postgres.html'>Multi-tenant SaaS (Notes web application) in 200 lines of code</a><br/>
This is a complete SaaS example (Software-as-a-Service) using PostgreSQL as a database, and RimStone as a web service engine; it includes user signup/login/logout with an email and password, separate user accounts and data, and a notes application. All in about 200 lines of code! You can have multiple users sign up and create and manage their own notes. ...<br/>
</li>
<br/>
<li><a href='/article-encryption.html'>Encryption: ciphers, digests, salt, IV and a hands-on guide</a><br/>
Encryption is a method of turning data into an unusable form that can be made useful only by means of decryption. The purpose is to make data available solely to those who can decrypt it (i.e. make it usable). Typically, data needs to be encrypted to make sure it cannot be obtained in case of unauthorized access. It is the last line of defense after an attacker has managed to break through authorization systems and access control. ...<br/>
</li>
<br/>
<li><a href='/article-sendmail.html'>How to send email with RimStone</a><br/>
This example shows how to send email with RimStone. The web service you'll create here is very simple and it will display an HTML form to collect info needed to send email, such as "From" and "To" (the sender and the recipient emails), the Subject and of course the Message itself. Once user clicks Submit, email is sent. &nbsp;...<br/>
</li>
<br/>
<li><a href='/article-capi.html'>Use C language API to talk to RimStone Server</a><br/>
RimStone application server can be accessed via C API. Most programming languages allow for C linkage, so this makes it easy to talk to RimStone server from anywhere. The <a href='/Client-API.html'>Client-API</a> is very simple with just a few functions and a single data type. It's also MT-safe (i.e. safe for multi-threaded applications). ...<br/>
</li>
<br/>
<li><a href='/article-record-temperature-postgres.html'>More than one table in a database transaction in PostgreSQL</a><br/>
Here you'll learn how to use a database transaction to insert/update into multiple tables; so that if any of those fail, the entire transaction is cancelled (rollbacked), and if they all succeed, the transaction is committed as a whole, atomically. ...<br/>
</li>
<br/>
<li><a href='/article-messaging-from-client.html'>Messaging between C client and server</a><br/>
This example shows how to exchange messages between RimStone server and a C API client (see <a href='/Client-API.html'>Client-API</a>). The client uses FastCGI binary protocol to communicate with the server. <a href='/SEMI.html'>SEMI</a> messaging is used as a format of messages. In this example, a client sends 10 variable length message to the server (meaning each has a different number of key/value pairs); the server then gets each key/value and replies in kind. The client displays the result. ...<br/>
</li>
<br/>
<li><a href='/article-debug.html'>How to debug RimStone programs with gdb</a><br/>
Debugging information is always included regardless of how you make your application; what varies is the amount of debugging info included. You can compile your RimStone application normally: ...<br/>
</li>
<br/>
<li><a href='/article-memory-safety.html'>How is memory organized in RimStone</a><br/>
RimStone is a memory-safe language. A string variable is the actual pointer to a string (whether it's a text or binary). This eliminates at least one extra dereferencing and a memory read (such as the case in many other languages); it makes RimStone memory performance very close to C. &nbsp;...<br/>
</li>
<br/>
<li><a href='/article-record-temperature-sqlite.html'>More than one table in a database transaction in SQLite</a><br/>
Here you'll learn how to use a database transaction to insert/update into multiple tables; so that if any of those fail, the entire transaction is cancelled (rollbacked), and if they all succeed, the transaction is committed as a whole, atomically. ...<br/>
</li>
<br/>
<li><a href='/article-cookies.html'>Cookies in RimStone applications, plus HAProxy</a><br/>
Cookies are used in web development to remember the state of your application on a client device. This way, your end-user on this client device doesn't have to provide the same (presumably fairly constant) information all the time. A "client device" can be just a plain web browser, or it can be anything else, such as any internet connected device. ...<br/>
</li>
<br/>
<li><a href='/article-sqlite.html'>SQLite with RimStone</a><br/>
This example will create a service that inserts key and value into SQLite table. It's tested from command line. ...<br/>
</li>
<br/>
<li><a href='/article-hello-server.html'>34000 requests per second on a modest laptop</a><br/>
This example shows how to create and start an application server, and how to connect to it and make requests from a C client (or from any language that supports C API extension). Create new directory for the RimStone server and also for C API client: ...<br/>
</li>
<br/>
<li><a href='/article-remote-call.html'>Call web service from web service: stacking them up</a><br/>
A web service doesn't necessarily need to be called from "the web", meaning from the web browser or via API across the web. It can be called from another web service that's on a local network. ...<br/>
</li>
<br/>
<li><a href='/article-request-function.html'>Functions and parameters in RimStone</a><br/>
In RimStone, there are no "functions" or "methods" as you may be used to in other languages. Any encapsulation is a request handler - you can think of it as a simple function that executes to handle a request - it can an external request (i.e. from an outside caller such as web browser, web API, or from a command-line), or internal requests from another handler in your application. &nbsp;...<br/>
</li>
<br/>
<li><a href='/article-web-framework-for-c-programming-language.html'>Web framework for C programming language</a><br/>
RimStone has an "extended" mode, which allows for C code to be used directly. Normally, this is not allowed, but if you use <a href='/extended-mode.html'>extended-mode</a> statement in your .rim file, then you can call C code from it. ...<br/>
</li>
<br/>
<li><a href='/article-json.html'>Fast JSON parser with little coding</a><br/>
RimStone's JSON parser produces an array of name/value pairs. A name is a path to value, for instance "country"."state"."name", and the value is simply the data associated with it, for instance "Idaho". You can control if the name contains array indexes or not, for instance if there are multiple States in the document, you might have names like "country"."state"[0]."name" with [..] designating an array element. ...<br/>
</li>
<br/>
<li><a href='/article-random.html'>Random numbers in RimStone</a><br/>
 Generating random numbers is important in a wide range of applications. For instance, session IDs often use random numbers; they are also used in generating passwords; another example is load balancing where (say instead of round-robin), the next available process to serve a request is chosen randomly; some applications (like gambling) depend on random qualities; any kind of simulation would heavily rely on random numbers; financial and polling applications use random samples to determine outcomes and policies. The list of possible uses is pretty long. ...<br/>
</li>
<br/>
<li><a href='/article-server.html'>What is an application server</a><br/>
Every RimStone application is built as both an application server and a command-line program. You can use both, depending on what's the nature of your application. Some programs are meant to be used in scripts, or executed directly from command line. Others need to stay in memory and execute user requests as servers. The nice thing is that they both work the same, meaning you can run from command line anything that an application server does, and vice versa. This is also handy for testing; it makes writing tests for an application server much easier because you can run such tests in a plain bash script. ...<br/>
</li>
<br/>
<li><a href='/article-what-is-web-service.html'>What is web service</a><br/>
Web service is code that responds to a request and provides a reply over HTTP protocol. It doesn't need to work over the web, despite its name. You can run a web service locally on a server or on a local network. You can even run a web service from command line. In fact, that's an easy way to test them. ...<br/>
</li>
<br/>
<li><a href='/article-memory-safety-web.html'>Memory safety: what about performance?</a><br/>
Memory safety guards against software security risks and malfunctions by assuring data isn't written to or read from unintended areas of memory. Preventing leaks is a separate feature that's important for web services which are long-running processes - memory leaks usually lead to running out of memory and crashes. ...<br/>
</li>
<br/>
<li><a href='/article-shopping.html'>How to build a Web Service API</a><br/>
This article will show a simple shopping web API with basic functions, such as adding customers, items and orders, as well as updating and deleting them. It's easy to write and easy to understand with RimStone; that's the reason code doesn't have much in a way of comments - there's no need. ...<br/>
</li>
<br/>
<li><a href='/article-fifo.html'>First In First Out (FIFO) example</a><br/>
RimStone has built-in FIFO list type. You can create a FIFO variable and then store key/value string pairs in it, which you can then read back in the order you put them in. You can also rewind the FIFO list and obtain the same key/value pairs over and over again if needed. ...<br/>
</li>
<br/>
<li><a href='/article-installing-rimstone.html'>Here's what installing RimStone looks like</a><br/>
The installation script is "riminst.sh". It installs RimStone in a location folder ".rimstone" (under home directory), so a base installation does not require sudo. However, some external components do. For instance, if you want to access a database you'll need a database access library, or to use regex expressions you'll need PCRE2 library etc. These are industry-standard tried-and-true Free Open Source libraries; using them helps with reliability and safety. These libraries are called "toolkit" libraries for obvious reasons. You don't have to install them immediately, but rather only when you need them. When you build an application that needs one of them, RimStone will ask you to install it, along with the instructions on how to do it. ...<br/>
</li>
<br/>
<li><a href='/article-tree-web.html'>Cache as a web service</a><br/>
This example shows Apache as the front-end (or "reverse proxy") for <a href='/article-tree.html'>article-tree</a> - it's assumed you've completed it first. Three steps to setting up Apache quickly: ...<br/>
</li>
<br/>
<li><a href='/article-tree.html'>Cache server in 30 lines</a><br/>
This is a cache server that can add, delete and query key/value pairs, with their number limited only by available memory. &nbsp;...<br/>
</li>
<br/>
<li><a href='/article-what-is-rimstone.html'>Introduction to RimStone</a><br/>
RimStone is a new programming language and framework for developing web services and web applications. It is: &nbsp;...<br/>
</li>
<br/>
<li><a href='/article-file-manager.html'>Web file manager in less than 100 lines of code</a><br/>
Uploading and download files in web browser is a common task in virtually any web application or service. This article shows how to do this with very little coding - in less than 100 lines of code. The database used is PostgreSQL, and the web server is Nginx. ...<br/>
</li>
<br/>
<li><a href='/article-how-to-create-rimstone-application.html'>How to create a RimStone application</a><br/>
To create a RimStone application, use "-k" option of rim utility: ...<br/>
</li>
<br/>
<li><a href='/article-hello-world.html'>Hello World in RimStone</a><br/>
Create a directory for your Hello World application and then switch to it: ...<br/>
</li>
<br/>
<li><a href='/article-fetch-web-page.html'>How to get the web page source code programmatically</a><br/>
Fetching a web resource (including web page source) is a one-liner in RimStone. First, create a new application ("get-page" here): ...<br/>
</li>
<br/>
</ul>
<div class="vsub"><a id="See also"></a>See also</div>
 <a name='Examples'></a><span style="font-weight:bold;">Examples</span><br/>
<a href='/examples.html'>examples</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='/documentation.html'>documentation</a><br/>
<a id='exec-program.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:left;background-color:white;'><a href='https://rimstone-lang.com' style='border-bottom:0px'><img src='https://rimstone-lang.com/rimstone.png' style='width:180px;height:auto'/></a></div><div class='vhub' style='margin-top:10px;'>Exec program</div><hr/><span style="font-weight:bold;">Purpose</span>: Execute a program.<br/>
<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_646' class=notranslate>
<span class="Statement">exec-program</span> &lt;program path&gt; \
    [<span class="Identifier"> args</span> &lt;program arg&gt; [ , ... ] ] \
    [<span class="Type"> status</span> &lt;exit status&gt; ] \
    [ (<span class="Identifier"> input</span> &lt;input string&gt; [<span class="Identifier"> input-length</span> &lt;string length&gt; ] ) \
        | (<span class="Identifier"> input-file</span> &lt;input file&gt; ) ] \
    [ (<span class="Type"> output</span> &lt;output string&gt;  ) \
        | (<span class="Identifier"> output-file</span> &lt;output file&gt; ) ] \
    [ (<span class="Type"> error</span> &lt;error string&gt; ) | (<span class="Identifier"> error-file</span> &lt;error file&gt; ) ]</pre>
<span id=rimstone_copied_646 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_646' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_646, code_646, rimstone_copied_646)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
exec-program executes a program specified in &lt;program path&gt;, which can be a program name without path that exists in the path specified by the PATH environment variable; or an absolute path; or a path relative to the application home directory (see <a href='/directories.html'>directories</a>).<br/>
<br/>
A program can have input arguments (specified as strings with "args" clause), and if there are more than one, they must be separated by a comma. There is no limit on the number of input arguments, other than of the underlying Operating System. <br/>
<br/>
You can specify a status variable &lt;exit status&gt; - this variable will have program's exit status. Note that if the program was terminated by a signal, &lt;exit status&gt; will have a value of 128+signal_number, so for example if the program was terminated with signal 9 (i.e. KILL signal), &lt;exit status&gt; will be 137 (i.e. 128+9). Any other kind of abnormal program termination (i.e. program termination where program did not set the exit code) will return 126 as &lt;exit code&gt;.<br/>
<br/>
Specifying program input and output is optional. If program has output and you are not capturing it in any way, the output is redirected to a temporary file that is deleted after exec-program completes.<br/>
<br/>
You can specify an &lt;input string&gt; to be passed to program's standard input (stdin) via "input" clause. If "input-length" is not used, the length of this input is the string length of &lt;input string&gt;, otherwise &lt;string length&gt; bytes is passed to the program. Alternatively, you can specify a file &lt;input file&gt; (via "input-file" clause) to be opened and directed into program's standard input (stdin). <br/>
<br/>
You can redirect the program's output (which is "stdout") to a file &lt;output file&gt; using "output-file" clause. Alternatively, program's output can be captured in &lt;output string&gt; (via "output" clause).<br/>
<br/>
To get the program's error output (which is "stderr") to file &lt;error file&gt;, use "error-file" clause. Alternatively, program's error output can be captured in &lt;error string&gt; (via "error" clause).<br/>
<br/>
If &lt;input file&gt; cannot be opened, RIM_ERR_READ is reported in &lt;exit status&gt;, and if either &lt;output file&gt; or &lt;error file&gt; cannot be opened, the status is RIM_ERR_WRITE.<br/>
<br/>
Note that in general a program is considered successfully executed if it returns RIM_OKAY (i.e. zero). Most programs returning non-zero value mean failure.<br/>
<div class="vsub"><a id="Examples"></a>Examples</div>
To simply execute a program that is in the path, without any arguments, input or output:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_647' class=notranslate>
<span class="Statement">exec-program</span> <span class="Constant">&quot;myprogram&quot;</span></pre>
<span id=rimstone_copied_647 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_647' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_647, code_647, rimstone_copied_647)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Run "grep" program using a string as its standard input in order to remove a line that contains "bad line" in it, and outputting the result into "ovar" variable:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_648' class=notranslate>
<span class="Statement">exec-program</span> <span class="Constant">&quot;grep&quot;</span><span class="Identifier"> args</span> <span class="Constant">&quot;-v&quot;</span>, <span class="Constant">&quot;bad line&quot;</span> <span class="Constant">&quot;config&quot;</span><span class="Identifier"> input</span> <span class="Constant">&quot;line 1</span><span class="Special">\n</span><span class="Constant">line 2</span><span class="Special">\n</span><span class="Constant">bad line</span><span class="Special">\n</span><span class="Constant">line 3&quot;</span><span class="Type"> output</span> ovar
<span class="Statement">print-out</span> ovar</pre>
<span id=rimstone_copied_648 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_648' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_648, code_648, rimstone_copied_648)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Get the list of files in the application home directory into buffer "ovar" and then display it:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_649' class=notranslate>
<span class="Statement">exec-program</span> <span class="Constant">&quot;ls&quot;</span><span class="Type"> output</span> ovar</pre>
<span id=rimstone_copied_649 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_649' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_649, code_649, rimstone_copied_649)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Similar to the above example of listing files, but output results to a file (which is then read and the result displayed), and provide options "-a -l -s" to "ls" program:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_650' class=notranslate>
<span class="Statement">exec-program</span> <span class="Constant">&quot;ls&quot;</span><span class="Identifier"> args</span> <span class="Constant">&quot;-a&quot;</span>, <span class="Constant">&quot;-l&quot;</span>, <span class="Constant">&quot;-s&quot;</span><span class="Identifier"> output-file</span> <span class="Constant">&quot;lsout&quot;</span>
<span class="Statement">read-file</span> <span class="Constant">&quot;lsout&quot;</span><span class="Type"> to</span> final_res
<span class="Statement">print-out</span> final_res</pre>
<span id=rimstone_copied_650 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_650' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_650, code_650, rimstone_copied_650)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Count the lines of file "config" (which is redirected to the standard output of "wc" program) and store the result in variable "ovar" (by means of redirecting the output of "wc" program to it), and then display: <br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_651' class=notranslate>
<span class="Statement">exec-program</span> <span class="Constant">&quot;wc&quot;</span><span class="Identifier"> args</span> <span class="Constant">&quot;-l&quot;</span><span class="Identifier"> input-file</span> <span class="Constant">&quot;config&quot;</span><span class="Type"> output</span> ovar
<span class="Statement">print-out</span> ovar</pre>
<span id=rimstone_copied_651 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_651' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_651, code_651, rimstone_copied_651)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<div class="vsub"><a id="See also"></a>See also</div>
 <a name='Program execution'></a><span style="font-weight:bold;">Program execution</span><br/>
<a href='/exec-program.html'>exec-program</a> &nbsp;<br/>
<a href='/exit-status.html'>exit-status</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='/documentation.html'>documentation</a><br/>
<a id='exit-handler.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:left;background-color:white;'><a href='https://rimstone-lang.com' style='border-bottom:0px'><img src='https://rimstone-lang.com/rimstone.png' style='width:180px;height:auto'/></a></div><div class='vhub' style='margin-top:10px;'>Exit handler</div><hr/><span style="font-weight:bold;">Purpose</span>: Exit current request processing.<br/>
<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_652' class=notranslate>
<span class="Statement">exit-handler</span> [ &lt;request status&gt; ]</pre>
<span id=rimstone_copied_652 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_652' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_652, code_652, rimstone_copied_652)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Exits current request by transferring control directly after the top-level <a href='/request.html'>request</a> dispatcher. If there is an <a href='/after-handler.html'>after-handler</a>, it will still execute, unless exit-handler is called from <a href='/before-handler.html'>before-handler</a>.<br/>
<br/>
&lt;request status&gt; number is a request status returned to the caller; if not specified, then it's the value specified in the last executed <a href='/exit-status.html'>exit-status</a> statement; if none executed in the request, then it's 0.<br/>
<div class="vsub"><a id="Examples"></a>Examples</div>
Returning status of 20:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_653' class=notranslate>
<span class="Statement">begin-handler</span> /req-handler<span class="Identifier"> public</span>
<span class="Statement">    .</span>..
<span class="Statement">    exit-status</span> <span class="Constant">20</span>
<span class="Statement">    .</span>..
<span class="Statement">    exit-handler</span>
<span class="Statement">    .</span>..
<span class="Statement">end-handler</span></pre>
<span id=rimstone_copied_653 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_653' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_653, code_653, rimstone_copied_653)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Returning status of 0:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_654' class=notranslate>
<span class="Statement">begin-handler</span> /req-handler<span class="Identifier"> public</span>
<span class="Statement">    .</span>..
<span class="Statement">    exit-handler</span>
<span class="Statement">    .</span>..
<span class="Statement">end-handler</span></pre>
<span id=rimstone_copied_654 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_654' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_654, code_654, rimstone_copied_654)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Returning status of 10:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_655' class=notranslate>
<span class="Statement">begin-handler</span> /req-handler<span class="Identifier"> public</span>
<span class="Statement">    .</span>..
<span class="Statement">    exit-handler</span> <span class="Constant">10</span>
<span class="Statement">    .</span>..
<span class="Statement">end-handler</span></pre>
<span id=rimstone_copied_655 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_655' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_655, code_655, rimstone_copied_655)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<div class="vsub"><a id="See also"></a>See also</div>
 <a name='Program flow'></a><span style="font-weight:bold;">Program flow</span><br/>
<a href='/break-loop.html'>break-loop</a> &nbsp;<br/>
<a href='/call-handler.html'>call-handler</a> &nbsp;<br/>
<a href='/code-blocks.html'>code-blocks</a> &nbsp;<br/>
<a href='/continue-loop.html'>continue-loop</a> &nbsp;<br/>
<a href='/do-once.html'>do-once</a> &nbsp;<br/>
<a href='/exit-handler.html'>exit-handler</a> &nbsp;<br/>
<a href='/if-defined.html'>if-defined</a> &nbsp;<br/>
<a href='/if-true.html'>if-true</a> &nbsp;<br/>
<a href='/quit-process.html'>quit-process</a> &nbsp;<br/>
<a href='/return-handler.html'>return-handler</a> &nbsp;<br/>
<a href='/start-loop.html'>start-loop</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='/documentation.html'>documentation</a><br/>
<a id='exit-status.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:left;background-color:white;'><a href='https://rimstone-lang.com' style='border-bottom:0px'><img src='https://rimstone-lang.com/rimstone.png' style='width:180px;height:auto'/></a></div><div class='vhub' style='margin-top:10px;'>Exit status</div><hr/><span style="font-weight:bold;">Purpose</span>: Set handler exit status.<br/>
<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_656' class=notranslate>
<span class="Statement">exit-status</span> &lt;request status&gt;</pre>
<span id=rimstone_copied_656 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_656' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_656, code_656, rimstone_copied_656)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
exit-status specifies &lt;request status&gt;, which must be a number; this is the status that is passed out of the request to the external caller (see <a href='/request.html'>request</a> and <a href='/exit-handler.html'>exit-handler</a>).<br/>
<br/>
&lt;request status&gt; can be obtained with "exit-status" clause in <a href='/read-remote.html'>read-remote</a> in the service caller; when the program runs as <a href='/command-line.html'>command-line</a>, &lt;request status&gt; is program's exit code. <br/>
<br/>
exit-status can be specified anywhere in the code, and does not mean exiting the <a href='/request.html'>request</a>'s processing; to do that, either use <a href='/exit-handler.html'>exit-handler</a> or simply allow the handler to reach its end. If your program encounters difficulties and <a href='/error-handling.html'>errors out</a>, then the &lt;request status&gt; is always a fixed reserved value of 107, regardless of you setting it with exit-status.<br/>
<br/>
When exit-status is not used, the default exit code is 0. When multiple exit-status statements run in a sequence, the request status is that of the last one that executes.<br/>
<br/>
If you want to specify request status and exit request processing at the same time, use <a href='/exit-handler.html'>exit-handler</a>.<br/>
<div class="vsub"><a id="Examples"></a>Examples</div>
When the program exits, its exit code will be 12:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_657' class=notranslate>
<span class="Statement">exit-status</span> <span class="Constant">12</span>
<span class="Statement">.</span>..
<span class="Statement">exit-handler</span></pre>
<span id=rimstone_copied_657 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_657' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_657, code_657, rimstone_copied_657)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<div class="vsub"><a id="See also"></a>See also</div>
 <a name='Program execution'></a><span style="font-weight:bold;">Program execution</span><br/>
<a href='/exec-program.html'>exec-program</a> &nbsp;<br/>
<a href='/exit-status.html'>exit-status</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='/documentation.html'>documentation</a><br/>
<a id='exp2.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:left;background-color:white;'><a href='https://rimstone-lang.com' style='border-bottom:0px'><img src='https://rimstone-lang.com/rimstone.png' style='width:180px;height:auto'/></a></div><div class='vhub' style='margin-top:10px;'>Exp2</div><hr/><span style="font-weight:bold;">Purpose</span>: Base-2 exponential function.<br/>
<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_659' class=notranslate>
exp2( &lt;var&gt; )</pre>
<span id=rimstone_copied_659 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_659' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_659, code_659, rimstone_copied_659)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
exp2 returns the value of 2 raised to the power of &lt;var&gt;. &lt;var&gt; is a number or a double and the result is a double.<br/>
<div class="vsub"><a id="Examples"></a>Examples</div>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_660' class=notranslate>
<span class="Statement">set-double</span> d = exp(<span class="Constant">1</span>) + <span class="Constant">1</span></pre>
<span id=rimstone_copied_660 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_660' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_660, code_660, rimstone_copied_660)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<div class="vsub"><a id="See also"></a>See also</div>
 <a name='Math functions'></a><span style="font-weight:bold;">Math functions</span><br/>
<a href='/abd.html'>abd</a> &nbsp;<br/>
<a href='/abn.html'>abn</a> &nbsp;<br/>
<a href='/acos.html'>acos</a> &nbsp;<br/>
<a href='/acosh.html'>acosh</a> &nbsp;<br/>
<a href='/asin.html'>asin</a> &nbsp;<br/>
<a href='/asinh.html'>asinh</a> &nbsp;<br/>
<a href='/atan.html'>atan</a> &nbsp;<br/>
<a href='/atan2.html'>atan2</a> &nbsp;<br/>
<a href='/atanh.html'>atanh</a> &nbsp;<br/>
<a href='/cbrt.html'>cbrt</a> &nbsp;<br/>
<a href='/ceil.html'>ceil</a> &nbsp;<br/>
<a href='/copysign.html'>copysign</a> &nbsp;<br/>
<a href='/cos.html'>cos</a> &nbsp;<br/>
<a href='/cosh.html'>cosh</a> &nbsp;<br/>
<a href='/dbl.html'>dbl</a> &nbsp;<br/>
<a href='/erf.html'>erf</a> &nbsp;<br/>
<a href='/erfc.html'>erfc</a> &nbsp;<br/>
<a href='/exp.html'>exp</a> &nbsp;<br/>
<a href='/exp2.html'>exp2</a> &nbsp;<br/>
<a href='/floor.html'>floor</a> &nbsp;<br/>
<a href='/fmod.html'>fmod</a> &nbsp;<br/>
<a href='/hypot.html'>hypot</a> &nbsp;<br/>
<a href='/isinf.html'>isinf</a> &nbsp;<br/>
<a href='/isnan.html'>isnan</a> &nbsp;<br/>
<a href='/ldexp.html'>ldexp</a> &nbsp;<br/>
<a href='/lgamma.html'>lgamma</a> &nbsp;<br/>
<a href='/log.html'>log</a> &nbsp;<br/>
<a href='/log10.html'>log10</a> &nbsp;<br/>
<a href='/log2.html'>log2</a> &nbsp;<br/>
<a href='/math-functions.html'>math-functions</a> &nbsp;<br/>
<a href='/nextafter.html'>nextafter</a> &nbsp;<br/>
<a href='/num.html'>num</a> &nbsp;<br/>
<a href='/pow.html'>pow</a> &nbsp;<br/>
<a href='/round.html'>round</a> &nbsp;<br/>
<a href='/sin.html'>sin</a> &nbsp;<br/>
<a href='/sinh.html'>sinh</a> &nbsp;<br/>
<a href='/sqrt.html'>sqrt</a> &nbsp;<br/>
<a href='/tan.html'>tan</a> &nbsp;<br/>
<a href='/tanh.html'>tanh</a> &nbsp;<br/>
<a href='/trunc.html'>trunc</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='/documentation.html'>documentation</a><br/>
<a id='exp.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:left;background-color:white;'><a href='https://rimstone-lang.com' style='border-bottom:0px'><img src='https://rimstone-lang.com/rimstone.png' style='width:180px;height:auto'/></a></div><div class='vhub' style='margin-top:10px;'>Exp</div><hr/><span style="font-weight:bold;">Purpose</span>: Natural exponential function.<br/>
<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_658' class=notranslate>
exp( &lt;var&gt; )</pre>
<span id=rimstone_copied_658 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_658' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_658, code_658, rimstone_copied_658)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
exp returns the value of "e" (which is the base of natural algorithms) raised to the power of &lt;var&gt;. &lt;var&gt; is a number or a double and the result is a double.<br/>
<div class="vsub"><a id="Examples"></a>Examples</div>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_661' class=notranslate>
<span class="Statement">set-double</span> d = exp(<span class="Constant">1</span>) + <span class="Constant">1</span></pre>
<span id=rimstone_copied_661 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_661' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_661, code_661, rimstone_copied_661)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<div class="vsub"><a id="See also"></a>See also</div>
 <a name='Math functions'></a><span style="font-weight:bold;">Math functions</span><br/>
<a href='/abd.html'>abd</a> &nbsp;<br/>
<a href='/abn.html'>abn</a> &nbsp;<br/>
<a href='/acos.html'>acos</a> &nbsp;<br/>
<a href='/acosh.html'>acosh</a> &nbsp;<br/>
<a href='/asin.html'>asin</a> &nbsp;<br/>
<a href='/asinh.html'>asinh</a> &nbsp;<br/>
<a href='/atan.html'>atan</a> &nbsp;<br/>
<a href='/atan2.html'>atan2</a> &nbsp;<br/>
<a href='/atanh.html'>atanh</a> &nbsp;<br/>
<a href='/cbrt.html'>cbrt</a> &nbsp;<br/>
<a href='/ceil.html'>ceil</a> &nbsp;<br/>
<a href='/copysign.html'>copysign</a> &nbsp;<br/>
<a href='/cos.html'>cos</a> &nbsp;<br/>
<a href='/cosh.html'>cosh</a> &nbsp;<br/>
<a href='/dbl.html'>dbl</a> &nbsp;<br/>
<a href='/erf.html'>erf</a> &nbsp;<br/>
<a href='/erfc.html'>erfc</a> &nbsp;<br/>
<a href='/exp.html'>exp</a> &nbsp;<br/>
<a href='/exp2.html'>exp2</a> &nbsp;<br/>
<a href='/floor.html'>floor</a> &nbsp;<br/>
<a href='/fmod.html'>fmod</a> &nbsp;<br/>
<a href='/hypot.html'>hypot</a> &nbsp;<br/>
<a href='/isinf.html'>isinf</a> &nbsp;<br/>
<a href='/isnan.html'>isnan</a> &nbsp;<br/>
<a href='/ldexp.html'>ldexp</a> &nbsp;<br/>
<a href='/lgamma.html'>lgamma</a> &nbsp;<br/>
<a href='/log.html'>log</a> &nbsp;<br/>
<a href='/log10.html'>log10</a> &nbsp;<br/>
<a href='/log2.html'>log2</a> &nbsp;<br/>
<a href='/math-functions.html'>math-functions</a> &nbsp;<br/>
<a href='/nextafter.html'>nextafter</a> &nbsp;<br/>
<a href='/num.html'>num</a> &nbsp;<br/>
<a href='/pow.html'>pow</a> &nbsp;<br/>
<a href='/round.html'>round</a> &nbsp;<br/>
<a href='/sin.html'>sin</a> &nbsp;<br/>
<a href='/sinh.html'>sinh</a> &nbsp;<br/>
<a href='/sqrt.html'>sqrt</a> &nbsp;<br/>
<a href='/tan.html'>tan</a> &nbsp;<br/>
<a href='/tanh.html'>tanh</a> &nbsp;<br/>
<a href='/trunc.html'>trunc</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='/documentation.html'>documentation</a><br/>
<a id='extended-mode.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:left;background-color:white;'><a href='https://rimstone-lang.com' style='border-bottom:0px'><img src='https://rimstone-lang.com/rimstone.png' style='width:180px;height:auto'/></a></div><div class='vhub' style='margin-top:10px;'>Extended mode</div><hr/><span style="font-weight:bold;">Purpose</span>: Use external libraries or C code with RimStone.<br/>
<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_662' class=notranslate>
<span class="Statement">extended-mode</span></pre>
<span id=rimstone_copied_662 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_662' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_662, code_662, rimstone_copied_662)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
extended-mode, when specified as a very first statement in .rim source file, allows for use of <a href='/call-extended.html'>call-extended</a> statement.<br/>
<div class="vsub"><a id="Examples"></a>Examples</div>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_663' class=notranslate>
<span class="Statement">extended-mode</span>

<span class="Statement">begin-handler</span> /my-handler<span class="Identifier"> public</span>
<span class="Statement">    .</span>..
<span class="Statement">    call-extended</span> factorial (<span class="Constant">10</span>, &amp;fact)
<span class="Statement">    .</span>..
<span class="Statement">end-handler</span></pre>
<span id=rimstone_copied_663 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_663' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_663, code_663, rimstone_copied_663)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<div class="vsub"><a id="See also"></a>See also</div>
 <a name='C language'></a><span style="font-weight:bold;">C language</span><br/>
<a href='/call-extended.html'>call-extended</a> &nbsp;<br/>
<a href='/extended-mode.html'>extended-mode</a> &nbsp;<br/>
<a href='/web-framework-for-C-programming-language.html'>web-framework-for-C-programming-language</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='/documentation.html'>documentation</a><br/>
<a id='file-position.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:left;background-color:white;'><a href='https://rimstone-lang.com' style='border-bottom:0px'><img src='https://rimstone-lang.com/rimstone.png' style='width:180px;height:auto'/></a></div><div class='vhub' style='margin-top:10px;'>File position</div><hr/><span style="font-weight:bold;">Purpose</span>: Set a position or get a current position for an open file.<br/>
<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_664' class=notranslate>
<span class="Statement">file-position</span><span class="Identifier"> file-id</span> &lt;file id&gt; \
    (<span class="Identifier"> set</span> &lt;position&gt; ) | (<span class="Type"> get</span> &lt;position&gt; ) \
    [<span class="Type"> status</span> &lt;status&gt; ]</pre>
<span id=rimstone_copied_664 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_664' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_664, code_664, rimstone_copied_664)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
file-position will set or get position for a file opened with <a href='/open-file.html'>open-file</a>, where &lt;file id&gt; is an open file identifier.<br/>
<br/>
If "set" clause is used, file position is set to &lt;position&gt; (with 0 being the first byte). <br/>
<br/>
If "get" clause is used, file position is obtained in &lt;position&gt; (with 0 being the first byte).<br/>
<br/>
&lt;status&gt; number in "status" clause will be RIM_OKAY if set/get succeeded, RIM_ERR_OPEN if file not open, or RIM_ERR_POSITION if not.<br/>
<br/>
Note that setting position past the last byte of file is okay for writing - in this case the bytes between the end of file and the &lt;position&gt; are filled with null-bytes when the write operation occurs.<br/>
<div class="vsub"><a id="Examples"></a>Examples</div>
Open file "testwrite" and set file byte position to 100, then obtain it later:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_665' class=notranslate>
<span class="Statement">open-file</span> <span class="Constant">&quot;testwrite&quot;</span><span class="Type"> file-id</span> nf
<span class="Statement">file-position</span><span class="Identifier"> file-id</span> nf<span class="Identifier"> set</span> <span class="Constant">100</span>
<span class="Statement">.</span>..
<span class="Statement">file-position</span><span class="Identifier"> file-id</span> nf<span class="Type"> get</span> pos</pre>
<span id=rimstone_copied_665 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_665' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_665, code_665, rimstone_copied_665)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
See also <a href='/open-file.html'>open-file</a>.<br/>
<div class="vsub"><a id="See also"></a>See also</div>
 <a name='Files'></a><span style="font-weight:bold;">Files</span><br/>
<a href='/change-mode.html'>change-mode</a> &nbsp;<br/>
<a href='/close-file.html'>close-file</a> &nbsp;<br/>
<a href='/copy-file.html'>copy-file</a> &nbsp;<br/>
<a href='/delete-file.html'>delete-file</a> &nbsp;<br/>
<a href='/file-position.html'>file-position</a> &nbsp;<br/>
<a href='/file-storage.html'>file-storage</a> &nbsp;<br/>
<a href='/file-uploading.html'>file-uploading</a> &nbsp;<br/>
<a href='/get-upload.html'>get-upload</a> &nbsp;<br/>
<a href='/lock-file.html'>lock-file</a> &nbsp;<br/>
<a href='/open-file.html'>open-file</a> &nbsp;<br/>
<a href='/read-file.html'>read-file</a> &nbsp;<br/>
<a href='/read-line.html'>read-line</a> &nbsp;<br/>
<a href='/rename-file.html'>rename-file</a> &nbsp;<br/>
<a href='/stat-file.html'>stat-file</a> &nbsp;<br/>
<a href='/temporary-file.html'>temporary-file</a> &nbsp;<br/>
<a href='/uniq-file.html'>uniq-file</a> &nbsp;<br/>
<a href='/unlock-file.html'>unlock-file</a> &nbsp;<br/>
<a href='/write-file.html'>write-file</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='/documentation.html'>documentation</a><br/>
<a id='file-storage.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:left;background-color:white;'><a href='https://rimstone-lang.com' style='border-bottom:0px'><img src='https://rimstone-lang.com/rimstone.png' style='width:180px;height:auto'/></a></div><div class='vhub' style='margin-top:10px;'>File storage</div><hr/>RimStone provides a file directory that you can use for any general purpose, including for storing <a href='/temporary-file.html'>temporary-file</a>s. This directory is also used for automatic upload of files from clients. It provides a two-tier directory system, with sub-directories automatically created to spread the files for faster access.<br/>
<br/>
Files in RimStone file directory are located in the sub-directories of:<br/>
<div class='ncode' style='position:relative;padding-right:16px;'>
<pre id='code_666' class=notranslate>
$HOME/.rimstone/apps/&lt;app-name&gt;/file</pre>
<span id=rimstone_copied_666 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_666' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_666, code_666, rimstone_copied_666)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
If you wish to place this directory in another physical location, see <a href='/rim.html'>rim</a>.<br/>
<br/>
You can create files here by means of <a href='/uniq-file.html'>uniq-file</a>, where a new unique file is created - with the file name made available to you. This directory is also used for uploading of files from clients (such as web browsers or mobile device cameras) - the uploading is handled automatically by RimStone (see <a href='/get-param.html'>get-param</a>).<br/>
<br/>
In general, a number of sub-directories is created within the file directory that contain files, which allows for billions of files to be kept. This scheme also allows for faster access to file nodes due to relatively low number of sub-directories and files randomly spread per each such sub-directory. The random spreading of files across subdirectories is done automatically.<br/>
<br/>
Do not rename file names or sub-directory names stored under file directory.<br/>
<div class="vsub"><a id="See also"></a>See also</div>
 <a name='Files'></a><span style="font-weight:bold;">Files</span><br/>
<a href='/change-mode.html'>change-mode</a> &nbsp;<br/>
<a href='/close-file.html'>close-file</a> &nbsp;<br/>
<a href='/copy-file.html'>copy-file</a> &nbsp;<br/>
<a href='/delete-file.html'>delete-file</a> &nbsp;<br/>
<a href='/file-position.html'>file-position</a> &nbsp;<br/>
<a href='/file-storage.html'>file-storage</a> &nbsp;<br/>
<a href='/file-uploading.html'>file-uploading</a> &nbsp;<br/>
<a href='/get-upload.html'>get-upload</a> &nbsp;<br/>
<a href='/lock-file.html'>lock-file</a> &nbsp;<br/>
<a href='/open-file.html'>open-file</a> &nbsp;<br/>
<a href='/read-file.html'>read-file</a> &nbsp;<br/>
<a href='/read-line.html'>read-line</a> &nbsp;<br/>
<a href='/rename-file.html'>rename-file</a> &nbsp;<br/>
<a href='/stat-file.html'>stat-file</a> &nbsp;<br/>
<a href='/temporary-file.html'>temporary-file</a> &nbsp;<br/>
<a href='/uniq-file.html'>uniq-file</a> &nbsp;<br/>
<a href='/unlock-file.html'>unlock-file</a> &nbsp;<br/>
<a href='/write-file.html'>write-file</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='/documentation.html'>documentation</a><br/>
<a id='file-uploading.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:left;background-color:white;'><a href='https://rimstone-lang.com' style='border-bottom:0px'><img src='https://rimstone-lang.com/rimstone.png' style='width:180px;height:auto'/></a></div><div class='vhub' style='margin-top:10px;'>File uploading</div><hr/><span style="font-weight:bold;">Purpose</span>: Upload a file to server.<br/>
<br/>
See <a href='/get-upload.html'>get-upload</a>.<br/>
Files uploaded via any client (such as a browser, curl, <a href='/call-web.html'>call-web</a> etc.) are obtained via <a href='/get-upload.html'>get-upload</a>. <br/>
<br/>
RimStone uploads files via HTML automatically, meaning you do not have to write any code for that specific purpose. An uploaded file will be stored in <a href='/file-storage.html'>file-storage</a>, with path and name of such a file generated by RimStone to be unique. For example, a file uploaded might be named "$HOME/.rimstone/app_name/app/file/d0/f31881". <br/>
<br/>
You can upload any number of files at the same time, i.e. in the same <a href='/request.html'>request</a>. See "--maxupload" parameter in <a href='/rim.html'>rim</a> for the maximum file size allowed for file uploads.<br/>
<br/>
For more details, see <a href='/get-upload.html'>get-upload</a>.<br/>
<div class="vsub"><a id="See also"></a>See also</div>
 <a name='Files'></a><span style="font-weight:bold;">Files</span><br/>
<a href='/change-mode.html'>change-mode</a> &nbsp;<br/>
<a href='/close-file.html'>close-file</a> &nbsp;<br/>
<a href='/copy-file.html'>copy-file</a> &nbsp;<br/>
<a href='/delete-file.html'>delete-file</a> &nbsp;<br/>
<a href='/file-position.html'>file-position</a> &nbsp;<br/>
<a href='/file-storage.html'>file-storage</a> &nbsp;<br/>
<a href='/file-uploading.html'>file-uploading</a> &nbsp;<br/>
<a href='/get-upload.html'>get-upload</a> &nbsp;<br/>
<a href='/lock-file.html'>lock-file</a> &nbsp;<br/>
<a href='/open-file.html'>open-file</a> &nbsp;<br/>
<a href='/read-file.html'>read-file</a> &nbsp;<br/>
<a href='/read-line.html'>read-line</a> &nbsp;<br/>
<a href='/rename-file.html'>rename-file</a> &nbsp;<br/>
<a href='/stat-file.html'>stat-file</a> &nbsp;<br/>
<a href='/temporary-file.html'>temporary-file</a> &nbsp;<br/>
<a href='/uniq-file.html'>uniq-file</a> &nbsp;<br/>
<a href='/unlock-file.html'>unlock-file</a> &nbsp;<br/>
<a href='/write-file.html'>write-file</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='/documentation.html'>documentation</a><br/>
<a id='finish-output.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:left;background-color:white;'><a href='https://rimstone-lang.com' style='border-bottom:0px'><img src='https://rimstone-lang.com/rimstone.png' style='width:180px;height:auto'/></a></div><div class='vhub' style='margin-top:10px;'>Finish output</div><hr/><span style="font-weight:bold;">Purpose</span>: Finish the output.<br/>
<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_667' class=notranslate>
<span class="Statement">finish-output</span></pre>
<span id=rimstone_copied_667 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_667' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_667, code_667, rimstone_copied_667)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
finish-output will flush out and conclude all output (see <a href='/output-statement.html'>output-statement</a>). Any such output afterwards will silently fail to do so. As far as the client is concerned, all the output is complete.<br/>
<br/>
This statement is useful when you need to continue work after the output is complete. For example, if the task performed is a long-running one, you can inform the client that the job has started, and then take any amount of time to actually complete the job, without worrying about client timeouts. The client can inquire about the job status via a different request, or be informed via email etc.<br/>
<div class="vsub"><a id="Examples"></a>Examples</div>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_668' class=notranslate>
<span class="Statement">finish-output</span></pre>
<span id=rimstone_copied_668 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_668' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_668, code_668, rimstone_copied_668)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<div class="vsub"><a id="See also"></a>See also</div>
 <a name='Output'></a><span style="font-weight:bold;">Output</span><br/>
<a href='/finish-output.html'>finish-output</a> &nbsp;<br/>
<a href='/flush-output.html'>flush-output</a> &nbsp;<br/>
<a href='/output-statement.html'>output-statement</a> &nbsp;<br/>
<a href='/print-format.html'>print-format</a> &nbsp;<br/>
<a href='/print-out.html'>print-out</a> &nbsp;<br/>
<a href='/print-path.html'>print-path</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='/documentation.html'>documentation</a><br/>
<a id='floor.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:left;background-color:white;'><a href='https://rimstone-lang.com' style='border-bottom:0px'><img src='https://rimstone-lang.com/rimstone.png' style='width:180px;height:auto'/></a></div><div class='vhub' style='margin-top:10px;'>Floor</div><hr/><span style="font-weight:bold;">Purpose</span>: Floor function.<br/>
<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_669' class=notranslate>
floor( &lt;var&gt; )</pre>
<span id=rimstone_copied_669 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_669' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_669, code_669, rimstone_copied_669)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
floor returns the largest number that is not greater than &lt;var&gt;. &lt;var&gt; is a number or a double and the result is a double.<br/>
<div class="vsub"><a id="Examples"></a>Examples</div>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_670' class=notranslate>
<span class="Statement">set-double</span> d = floor(<span class="Constant">1</span>) + <span class="Constant">1</span></pre>
<span id=rimstone_copied_670 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_670' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_670, code_670, rimstone_copied_670)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<div class="vsub"><a id="See also"></a>See also</div>
 <a name='Math functions'></a><span style="font-weight:bold;">Math functions</span><br/>
<a href='/abd.html'>abd</a> &nbsp;<br/>
<a href='/abn.html'>abn</a> &nbsp;<br/>
<a href='/acos.html'>acos</a> &nbsp;<br/>
<a href='/acosh.html'>acosh</a> &nbsp;<br/>
<a href='/asin.html'>asin</a> &nbsp;<br/>
<a href='/asinh.html'>asinh</a> &nbsp;<br/>
<a href='/atan.html'>atan</a> &nbsp;<br/>
<a href='/atan2.html'>atan2</a> &nbsp;<br/>
<a href='/atanh.html'>atanh</a> &nbsp;<br/>
<a href='/cbrt.html'>cbrt</a> &nbsp;<br/>
<a href='/ceil.html'>ceil</a> &nbsp;<br/>
<a href='/copysign.html'>copysign</a> &nbsp;<br/>
<a href='/cos.html'>cos</a> &nbsp;<br/>
<a href='/cosh.html'>cosh</a> &nbsp;<br/>
<a href='/dbl.html'>dbl</a> &nbsp;<br/>
<a href='/erf.html'>erf</a> &nbsp;<br/>
<a href='/erfc.html'>erfc</a> &nbsp;<br/>
<a href='/exp.html'>exp</a> &nbsp;<br/>
<a href='/exp2.html'>exp2</a> &nbsp;<br/>
<a href='/floor.html'>floor</a> &nbsp;<br/>
<a href='/fmod.html'>fmod</a> &nbsp;<br/>
<a href='/hypot.html'>hypot</a> &nbsp;<br/>
<a href='/isinf.html'>isinf</a> &nbsp;<br/>
<a href='/isnan.html'>isnan</a> &nbsp;<br/>
<a href='/ldexp.html'>ldexp</a> &nbsp;<br/>
<a href='/lgamma.html'>lgamma</a> &nbsp;<br/>
<a href='/log.html'>log</a> &nbsp;<br/>
<a href='/log10.html'>log10</a> &nbsp;<br/>
<a href='/log2.html'>log2</a> &nbsp;<br/>
<a href='/math-functions.html'>math-functions</a> &nbsp;<br/>
<a href='/nextafter.html'>nextafter</a> &nbsp;<br/>
<a href='/num.html'>num</a> &nbsp;<br/>
<a href='/pow.html'>pow</a> &nbsp;<br/>
<a href='/round.html'>round</a> &nbsp;<br/>
<a href='/sin.html'>sin</a> &nbsp;<br/>
<a href='/sinh.html'>sinh</a> &nbsp;<br/>
<a href='/sqrt.html'>sqrt</a> &nbsp;<br/>
<a href='/tan.html'>tan</a> &nbsp;<br/>
<a href='/tanh.html'>tanh</a> &nbsp;<br/>
<a href='/trunc.html'>trunc</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='/documentation.html'>documentation</a><br/>
<a id='flush-output.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:left;background-color:white;'><a href='https://rimstone-lang.com' style='border-bottom:0px'><img src='https://rimstone-lang.com/rimstone.png' style='width:180px;height:auto'/></a></div><div class='vhub' style='margin-top:10px;'>Flush output</div><hr/><span style="font-weight:bold;">Purpose</span>: Flush output.<br/>
<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_671' class=notranslate>
<span class="Statement">flush-output</span></pre>
<span id=rimstone_copied_671 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_671' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_671, code_671, rimstone_copied_671)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Use flush-output statement to flush any pending output.<br/>
<br/>
This can be useful if the complete output would take longer to produce and intermittent partial output would be needed.<br/>
<div class="vsub"><a id="Examples"></a>Examples</div>
In this case the complete output may take at least 20 seconds. With flush-output, the message "This is partial output" will be flushed out immediately.<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_672' class=notranslate>
<span class="Statement">@</span>This is partial output
<span class="Statement">flush-output</span>
<span class="Statement">pause-program</span> <span class="Constant">20000</span>
<span class="Statement">@</span>This is final output</pre>
<span id=rimstone_copied_672 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_672' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_672, code_672, rimstone_copied_672)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<div class="vsub"><a id="See also"></a>See also</div>
 <a name='Output'></a><span style="font-weight:bold;">Output</span><br/>
<a href='/finish-output.html'>finish-output</a> &nbsp;<br/>
<a href='/flush-output.html'>flush-output</a> &nbsp;<br/>
<a href='/output-statement.html'>output-statement</a> &nbsp;<br/>
<a href='/print-format.html'>print-format</a> &nbsp;<br/>
<a href='/print-out.html'>print-out</a> &nbsp;<br/>
<a href='/print-path.html'>print-path</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='/documentation.html'>documentation</a><br/>
<a id='fmod.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:left;background-color:white;'><a href='https://rimstone-lang.com' style='border-bottom:0px'><img src='https://rimstone-lang.com/rimstone.png' style='width:180px;height:auto'/></a></div><div class='vhub' style='margin-top:10px;'>Fmod</div><hr/><span style="font-weight:bold;">Purpose</span>: Double remainder function.<br/>
<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_673' class=notranslate>
fmod( &lt;var1&gt;, &lt;var2&gt; )</pre>
<span id=rimstone_copied_673 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_673' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_673, code_673, rimstone_copied_673)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
fmod returns the floating-point remainder of dividing &lt;var1&gt; by &lt;var2&gt;. &lt;var1&gt; and &lt;var2&gt; are a number or a double and the result is a double.<br/>
<div class="vsub"><a id="Examples"></a>Examples</div>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_674' class=notranslate>
<span class="Statement">set-double</span> d = fmod(<span class="Constant">3</span><span class="Constant">.3</span>, <span class="Constant">1</span><span class="Constant">.2</span>) + <span class="Constant">1</span></pre>
<span id=rimstone_copied_674 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_674' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_674, code_674, rimstone_copied_674)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<div class="vsub"><a id="See also"></a>See also</div>
 <a name='Math functions'></a><span style="font-weight:bold;">Math functions</span><br/>
<a href='/abd.html'>abd</a> &nbsp;<br/>
<a href='/abn.html'>abn</a> &nbsp;<br/>
<a href='/acos.html'>acos</a> &nbsp;<br/>
<a href='/acosh.html'>acosh</a> &nbsp;<br/>
<a href='/asin.html'>asin</a> &nbsp;<br/>
<a href='/asinh.html'>asinh</a> &nbsp;<br/>
<a href='/atan.html'>atan</a> &nbsp;<br/>
<a href='/atan2.html'>atan2</a> &nbsp;<br/>
<a href='/atanh.html'>atanh</a> &nbsp;<br/>
<a href='/cbrt.html'>cbrt</a> &nbsp;<br/>
<a href='/ceil.html'>ceil</a> &nbsp;<br/>
<a href='/copysign.html'>copysign</a> &nbsp;<br/>
<a href='/cos.html'>cos</a> &nbsp;<br/>
<a href='/cosh.html'>cosh</a> &nbsp;<br/>
<a href='/dbl.html'>dbl</a> &nbsp;<br/>
<a href='/erf.html'>erf</a> &nbsp;<br/>
<a href='/erfc.html'>erfc</a> &nbsp;<br/>
<a href='/exp.html'>exp</a> &nbsp;<br/>
<a href='/exp2.html'>exp2</a> &nbsp;<br/>
<a href='/floor.html'>floor</a> &nbsp;<br/>
<a href='/fmod.html'>fmod</a> &nbsp;<br/>
<a href='/hypot.html'>hypot</a> &nbsp;<br/>
<a href='/isinf.html'>isinf</a> &nbsp;<br/>
<a href='/isnan.html'>isnan</a> &nbsp;<br/>
<a href='/ldexp.html'>ldexp</a> &nbsp;<br/>
<a href='/lgamma.html'>lgamma</a> &nbsp;<br/>
<a href='/log.html'>log</a> &nbsp;<br/>
<a href='/log10.html'>log10</a> &nbsp;<br/>
<a href='/log2.html'>log2</a> &nbsp;<br/>
<a href='/math-functions.html'>math-functions</a> &nbsp;<br/>
<a href='/nextafter.html'>nextafter</a> &nbsp;<br/>
<a href='/num.html'>num</a> &nbsp;<br/>
<a href='/pow.html'>pow</a> &nbsp;<br/>
<a href='/round.html'>round</a> &nbsp;<br/>
<a href='/sin.html'>sin</a> &nbsp;<br/>
<a href='/sinh.html'>sinh</a> &nbsp;<br/>
<a href='/sqrt.html'>sqrt</a> &nbsp;<br/>
<a href='/tan.html'>tan</a> &nbsp;<br/>
<a href='/tanh.html'>tanh</a> &nbsp;<br/>
<a href='/trunc.html'>trunc</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='/documentation.html'>documentation</a><br/>
<a id='get-app.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:left;background-color:white;'><a href='https://rimstone-lang.com' style='border-bottom:0px'><img src='https://rimstone-lang.com/rimstone.png' style='width:180px;height:auto'/></a></div><div class='vhub' style='margin-top:10px;'>Get app</div><hr/><span style="font-weight:bold;">Purpose</span>: Obtain data that describes the application.<br/>
<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_675' class=notranslate>
<span class="Statement">get-app</span> \
       <span class="Identifier"> name</span> |<span class="Identifier"> directory</span> |<span class="Identifier"> file-directory</span> | \
        (<span class="Identifier"> user-directory</span> [<span class="Identifier"> user</span> &lt;user&gt; ] ) | \
        (<span class="Identifier"> socket-file</span> [<span class="Identifier"> user</span> &lt;user&gt; ] [<span class="Identifier"> application</span> &lt;app&gt; ] ) \
        |<span class="Identifier"> db-vendor</span> &lt;database configuration&gt; |<span class="Identifier"> upload-size</span> \
        |<span class="Identifier"> path</span> |<span class="Identifier"> is-service</span> |<span class="Identifier"> stack-depth</span> \
   <span class="Type"> to</span> &lt;variable&gt;</pre>
<span id=rimstone_copied_675 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_675' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_675, code_675, rimstone_copied_675)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Application-related variables can be obtained with get-app statement. The following application variables can be obtained (they are all strings unless indicated otherwise):<br/>
<ul><li>"name" returns the name of your application, as specified when created (see <a href='/mrim.html'>mrim</a>). <br/>
</li><li>"directory" is the directory where your application resides, i.e. the application home directory (see <a href='/directories.html'>directories</a>).<br/>
</li><li>"user-directory" is the user directory, i.e a directory that houses all applications that belong to the user (see <a href='/directories.html'>directories</a>). If "user" is not given, then user is the current Operating system user; otherwise user is &lt;user&gt;. <br/>
</li><li>"socket-file" is the socket-file used to communicate with an application (see <a href='/new-remote.html'>new-remote</a>, <a href='/rimcli.html'>rimcli</a>, <a href='/Client-API.html'>Client-API</a>). If neither "user" nor "application" subclauses are given, then user is current Operating system user and application is the currently running application. If "user" subclause is given, then user is &lt;user&gt;. If "application" subclause is specified, then application is &lt;application&gt;. <br/>
</li><li>"is-service" is a boolean variable that is true if your code is running as a <a href='/service.html'>service</a>, or false if it is running as a <a href='/command-line.html'>command-line</a> program.<br/>
</li><li>"file-directory" is the directory where RimStone file storage system is, i.e. <a href='/file-storage.html'>file-storage</a>.<br/>
</li><li>"db-vendor" is the database vendor name of database given by &lt;database configuration&gt; (as used for example in <a href='/run-query.html'>run-query</a>). You can use it to create database specific conditions. The database vendor name can be compared against predefined string constants RIM_MARIADB (for MariaDB database), RIM_POSTGRES (for Postgres database) and RIM_SQLITE (for SQLite database).<br/>
</li><li>"path" is the leading path of the URL request that can be used to build web forms and links leading back to your application. It returns the same value as used in <a href='/print-path.html'>print-path</a> before &lt;request path&gt; is appended.<br/>
</li><li>"stack-depth" is the maximum allowed stack depth for calling handlers, including recursion.<br/>
</li><li>"upload-size" is the maximum allowed size of an uploaded file - this is a number (see <a href='/rim.html'>rim</a> for setting this value).</li></ul>
<div class="vsub"><a id="Examples"></a>Examples</div>
Get the name of RimStone application:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_676' class=notranslate>
<span class="Statement">get-app</span><span class="Identifier"> name</span><span class="Type"> to</span> appname</pre>
<span id=rimstone_copied_676 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_676' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_676, code_676, rimstone_copied_676)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Get the vendor of database db:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_677' class=notranslate>
<span class="Statement">get-app</span><span class="Identifier"> db-vendor</span> db<span class="Type"> to</span> dbv
<span class="Statement">if-true</span> dbv<span class="Identifier"> equal</span> RIM_POSTGRES
    <span class="Comment">// do something Postgres specific</span>
<span class="Statement">end-if</span></pre>
<span id=rimstone_copied_677 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_677' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_677, code_677, rimstone_copied_677)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<div class="vsub"><a id="See also"></a>See also</div>
 <a name='Application information'></a><span style="font-weight:bold;">Application information</span><br/>
<a href='/get-app.html'>get-app</a> &nbsp;<br/>
<a href='/set-app.html'>set-app</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='/documentation.html'>documentation</a><br/>
<a id='get-cookie.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:left;background-color:white;'><a href='https://rimstone-lang.com' style='border-bottom:0px'><img src='https://rimstone-lang.com/rimstone.png' style='width:180px;height:auto'/></a></div><div class='vhub' style='margin-top:10px;'>Get cookie</div><hr/><span style="font-weight:bold;">Purpose</span>: Get cookie value.<br/>
<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_678' class=notranslate>
<span class="Statement">get-cookie</span> ( &lt;cookie value&gt; = &lt;cookie name&gt; ) ,...</pre>
<span id=rimstone_copied_678 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_678' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_678, code_678, rimstone_copied_678)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
get-cookie obtains string &lt;cookie value&gt; of a cookie with the name given by string &lt;cookie name&gt;. A cookie would be obtained via incoming request from the client (such as web browser) or it would be set using <a href='/set-cookie.html'>set-cookie</a>.<br/>
<br/>
The value of cookie is stored in &lt;cookie value&gt;. &nbsp;<br/>
<br/>
Cookies are often used to persist user data on the client, such as for maintaining session security or for convenience of identifying the user etc.<br/>
<br/>
You can obtain multiple cookies separated by a comma:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_679' class=notranslate>
<span class="Statement">get-cookie</span> c = <span class="Constant">&quot;mycookie&quot;</span>, c1 = <span class="Constant">&quot;mycookie1&quot;</span>, c2=<span class="Constant">&quot;mycookie2&quot;</span></pre>
<span id=rimstone_copied_679 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_679' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_679, code_679, rimstone_copied_679)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<div class="vsub"><a id="Examples"></a>Examples</div>
Get value of cookie named "my_cookie_name" - variable my_cookie_value will hold its value:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_680' class=notranslate>
<span class="Statement">get-cookie</span> my_cookie_value=<span class="Constant">&quot;my_cookie_name&quot;</span></pre>
<span id=rimstone_copied_680 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_680' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_680, code_680, rimstone_copied_680)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<div class="vsub"><a id="See also"></a>See also</div>
 <a name='Cookies'></a><span style="font-weight:bold;">Cookies</span><br/>
<a href='/delete-cookie.html'>delete-cookie</a> &nbsp;<br/>
<a href='/get-cookie.html'>get-cookie</a> &nbsp;<br/>
<a href='/set-cookie.html'>set-cookie</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='/documentation.html'>documentation</a><br/>
<a id='get-hash.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:left;background-color:white;'><a href='https://rimstone-lang.com' style='border-bottom:0px'><img src='https://rimstone-lang.com/rimstone.png' style='width:180px;height:auto'/></a></div><div class='vhub' style='margin-top:10px;'>Get hash</div><hr/><span style="font-weight:bold;">Purpose</span>: Get usage specifics for a hash.<br/>
<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_681' class=notranslate>
<span class="Statement">get-hash</span>  &lt;hash &gt; [<span class="Type"> length</span> &lt;length&gt; ] [<span class="Type"> hash-size</span> &lt;hash size&gt; ] [<span class="Type"> average-reads</span> &lt;reads&gt; ]</pre>
<span id=rimstone_copied_681 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_681' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_681, code_681, rimstone_copied_681)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
get-hash provides usage specifics of a &lt;hash&gt; (created by <a href='/new-hash.html'>new-hash</a>). <br/>
<br/>
Use "length" clause to obtain its &lt;length&gt; (i.e. the number of elements stored in it), "hash-size" clause to obtain its &lt;hash size&gt; (i.e. the number of "buckets", or possible hash codes in the underlying hash table). <br/>
<br/>
"average-reads" clause will obtain in &lt;reads&gt; the average number of reads (i.e. how many string comparisons are needed on average to find a key) multiplied by 100 (so if an average number of reads was 1.5, it will be 150).<br/>
<br/>
This information may be useful in determining the performance of a hash, and whether <a href='/resize-hash.html'>resize-hash</a> is indicated.<br/>
<div class="vsub"><a id="Examples"></a>Examples</div>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_682' class=notranslate>
<span class="Statement">get-hash</span> h<span class="Type"> length</span> l<span class="Type"> hash-size</span> s<span class="Type"> average-reads</span> r</pre>
<span id=rimstone_copied_682 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_682' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_682, code_682, rimstone_copied_682)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<div class="vsub"><a id="See also"></a>See also</div>
 <a name='Hash'></a><span style="font-weight:bold;">Hash</span><br/>
<a href='/get-hash.html'>get-hash</a> &nbsp;<br/>
<a href='/new-hash.html'>new-hash</a> &nbsp;<br/>
<a href='/purge-hash.html'>purge-hash</a> &nbsp;<br/>
<a href='/read-hash.html'>read-hash</a> &nbsp;<br/>
<a href='/resize-hash.html'>resize-hash</a> &nbsp;<br/>
<a href='/write-hash.html'>write-hash</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='/documentation.html'>documentation</a><br/>
<a id='get-lifo.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:left;background-color:white;'><a href='https://rimstone-lang.com' style='border-bottom:0px'><img src='https://rimstone-lang.com/rimstone.png' style='width:180px;height:auto'/></a></div><div class='vhub' style='margin-top:10px;'>Get lifo</div><hr/><span style="font-weight:bold;">Purpose</span>: Get information about linked list.<br/>
<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_683' class=notranslate>
<span class="Statement">get-lifo</span> &lt;list&gt;<span class="Type"> count</span> &lt;count&gt;</pre>
<span id=rimstone_copied_683 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_683' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_683, code_683, rimstone_copied_683)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
get-lifo will obtain information about LIFO &lt;list&gt; created with <a href='/new-lifo.html'>new-lifo</a>. <br/>
<br/>
&lt;count&gt; (in "count" clause) is the number of elements in the list.<br/>
<div class="vsub"><a id="Examples"></a>Examples</div>
Get the number of elements in list "mylist" in number "size":<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_684' class=notranslate>
<span class="Statement">get-list</span> mylist<span class="Type"> count</span> size</pre>
<span id=rimstone_copied_684 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_684' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_684, code_684, rimstone_copied_684)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<div class="vsub"><a id="See also"></a>See also</div>
 <a name='LIFO'></a><span style="font-weight:bold;">LIFO</span><br/>
<a href='/delete-lifo.html'>delete-lifo</a> &nbsp;<br/>
<a href='/get-lifo.html'>get-lifo</a> &nbsp;<br/>
<a href='/new-lifo.html'>new-lifo</a> &nbsp;<br/>
<a href='/purge-lifo.html'>purge-lifo</a> &nbsp;<br/>
<a href='/read-lifo.html'>read-lifo</a> &nbsp;<br/>
<a href='/rewind-lifo.html'>rewind-lifo</a> &nbsp;<br/>
<a href='/write-lifo.html'>write-lifo</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='/documentation.html'>documentation</a><br/>
<a id='get-list.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:left;background-color:white;'><a href='https://rimstone-lang.com' style='border-bottom:0px'><img src='https://rimstone-lang.com/rimstone.png' style='width:180px;height:auto'/></a></div><div class='vhub' style='margin-top:10px;'>Get list</div><hr/><span style="font-weight:bold;">Purpose</span>: Get information about linked list.<br/>
<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_685' class=notranslate>
<span class="Statement">get-list</span> &lt;list&gt;<span class="Type"> count</span> &lt;count&gt;</pre>
<span id=rimstone_copied_685 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_685' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_685, code_685, rimstone_copied_685)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
get-list will obtain information about linked &lt;list&gt; created with <a href='/new-list.html'>new-list</a>. <br/>
<br/>
&lt;count&gt; (in "count" clause) is the number of elements in the list.<br/>
<div class="vsub"><a id="Examples"></a>Examples</div>
Get the number of elements in list "mylist" in number "size":<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_686' class=notranslate>
<span class="Statement">get-list</span> mylist<span class="Type"> count</span> size</pre>
<span id=rimstone_copied_686 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_686' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_686, code_686, rimstone_copied_686)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<div class="vsub"><a id="See also"></a>See also</div>
 <a name='Linked list'></a><span style="font-weight:bold;">Linked list</span><br/>
<a href='/delete-list.html'>delete-list</a> &nbsp;<br/>
<a href='/get-list.html'>get-list</a> &nbsp;<br/>
<a href='/new-list.html'>new-list</a> &nbsp;<br/>
<a href='/position-list.html'>position-list</a> &nbsp;<br/>
<a href='/purge-list.html'>purge-list</a> &nbsp;<br/>
<a href='/read-list.html'>read-list</a> &nbsp;<br/>
<a href='/write-list.html'>write-list</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='/documentation.html'>documentation</a><br/>
<a id='get-message.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:left;background-color:white;'><a href='https://rimstone-lang.com' style='border-bottom:0px'><img src='https://rimstone-lang.com/rimstone.png' style='width:180px;height:auto'/></a></div><div class='vhub' style='margin-top:10px;'>Get message</div><hr/><span style="font-weight:bold;">Purpose</span>: Get string produced by writing a message.<br/>
<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_688' class=notranslate>
<span class="Statement">get-message</span> &lt;message&gt;<span class="Type"> to</span> &lt;string&gt;</pre>
<span id=rimstone_copied_688 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_688' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_688, code_688, rimstone_copied_688)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
get-message will create a &lt;string&gt; from &lt;message&gt; which must have been created with <a href='/new-message.html'>new-message</a>. &lt;string&gt; can then be used elsewhere, for instance sent with a remote call (see <a href='/run-remote.html'>run-remote</a>), written to a file etc.<br/>
<br/>
Once get-message is called, &lt;message&gt; is initialized as if it was just created with <a href='/new-message.html'>new-message</a> without the "from" clause.<br/>
<div class="vsub"><a id="Examples"></a>Examples</div>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_689' class=notranslate>
<span class="Comment">// Create a message</span>
<span class="Statement">new-message</span> msg
<span class="Comment">// Write data</span>
<span class="Statement">write-message</span> msg<span class="Identifier"> key</span> <span class="Constant">&quot;key1&quot;</span><span class="Identifier"> value</span> <span class="Constant">&quot;value1&quot;</span>
<span class="Comment">// Get string from message</span>
<span class="Statement">get-message</span> msg<span class="Type"> to</span> str
<span class="Statement">.</span>..
<span class="Comment">// Create a new message from string</span>
<span class="Statement">new-message</span> new<span class="Identifier"> from</span> str
<span class="Comment">// Read data</span>
<span class="Statement">read-message</span> new<span class="Type"> key</span> k<span class="Type"> value</span> v
<span class="Comment">// Display  data</span>
<span class="Statement">print-format</span> <span class="Constant">&quot;[</span><span class="Special">%s</span><span class="Constant">] [</span><span class="Special">%s</span><span class="Constant">]</span><span class="Special">\n</span><span class="Constant">&quot;</span>, k,v</pre>
<span id=rimstone_copied_689 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_689' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_689, code_689, rimstone_copied_689)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
The result is:<br/>
<div class='ncode' style='position:relative;padding-right:16px;'>
<pre id='code_687' class=notranslate>
[key1] [value1]</pre>
<span id=rimstone_copied_687 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_687' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_687, code_687, rimstone_copied_687)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<div class="vsub"><a id="See also"></a>See also</div>
 <a name='Messages'></a><span style="font-weight:bold;">Messages</span><br/>
<a href='/get-message.html'>get-message</a> &nbsp;<br/>
<a href='/new-message.html'>new-message</a> &nbsp;<br/>
<a href='/read-message.html'>read-message</a> &nbsp;<br/>
<a href='/SEMI.html'>SEMI</a> &nbsp;<br/>
<a href='/write-message.html'>write-message</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='/documentation.html'>documentation</a><br/>
<a id='get-param.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:left;background-color:white;'><a href='https://rimstone-lang.com' style='border-bottom:0px'><img src='https://rimstone-lang.com/rimstone.png' style='width:180px;height:auto'/></a></div><div class='vhub' style='margin-top:10px;'>Get param</div><hr/><span style="font-weight:bold;">Purpose</span>: Get a parameter value.<br/>
<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_692' class=notranslate>
<span class="Statement">get-param</span> ( &lt;name&gt; [<span class="Identifier"> type</span> &lt;type&gt; ] [<span class="Identifier"> default-value</span> &lt;value&gt; ] )<span class="Identifier"> ,</span> ...</pre>
<span id=rimstone_copied_692 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_692' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_692, code_692, rimstone_copied_692)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
get-param stores a parameter value in variable &lt;name&gt;. A parameter is a name/value pair kept by RimStone for each request. The parameter's name must match &lt;name&gt;. A parameter can be of any type. A parameter is set either:<br/>
<ul><li>by the caller in <a href='/request.html'>request URL</a>, or<br/>
</li><li>with <a href='/set-param.html'>set-param</a> statement anywhere during request's execution, including in <a href='/call-handler.html'>call-handler</a>.</li></ul>
If parameter is a string, it is &nbsp;trimmed for whitespaces (both on left and right). You can specify any number of parameters, separated by a comma.<br/>
<div class="vsub"><a id="Types"></a>Types</div>
By default, &lt;name&gt; is a string variable, unless &lt;type&gt; (in "type" clause) is specified. &lt;type&gt; can be "string" for a string variable (the default), "bool" for a boolean variable, "number" for a number variable, "double" for a double variable, "string-array" for an array of strings, "number-array" for an array of numbers, "double-array" for an array of doubles, "bool-array" for an array of booleans, "message" for a <a href='/new-message.html'>message</a> variable, "split-string" for a <a href='/split-string.html'>split-string</a> variable, "hash" for an <a href='/new-hash.html'>hash</a> variable, "tree" for an <a href='/new-tree.html'>tree</a> variable, "tree-cursor" for an <a href='/use-cursor.html'>tree cursor</a> variable, "fifo" for a <a href='/new-fifo.html'>FIFO</a> variable, "lifo" for a <a href='/new-lifo.html'>LIFO</a> variable, "list" for a <a href='/new-list.html'>list</a> variable, "file" for a <a href='/open-file.html'>file</a> variable, and "service" for a <a href='/new-remote.html'>service</a> variable.<br/>
<br/>
The value obtained with get-param is checked to be of the proper &lt;type&gt;, and if it isn't, your request will <a href='/error-handling.html'>error out</a>. The exception to this is that a string parameter can be converted into a number, double or a boolean, assuming the string value represents a valid number, double or is "true"/"false"; this exception is for <a href='/request.html'>request</a> URL parameters only. &nbsp;Parameters of "number", "double" and "bool" types are obtained by value, and others by reference. It means for instance, that you can pass a tree to call-handler and read and write nodes there, and such changes will be visible in the caller request.<br/>
<div class="vsub"><a id="Default value"></a>Default value</div>
If "default-value" clause is used, then &lt;value&gt; will be assigned to &lt;name&gt; variable if there is none provided. For example, if the caller does not specify the value for parameter &lt;name&gt;, then its value will be &lt;value&gt;; note that parameter must always have value so if none is provided and there is no default value specified, your program will <a href='/error-handling.html'>error out</a>. "default-value" can only be used with strings, numbers, doubles and booleans.<br/>
<div class="vsub"><a id="Input parameters from a caller"></a>Input parameters from a caller</div>
Input parameters in an external request (i.e. those &nbsp;parameters set by a caller outside of your application) are specified as name/value pairs (see <a href='/service.html'>service</a> or <a href='/command-line.html'>command-line</a>). Input parameter name can be made up of alphanumeric characters, hyphen or underscore only and cannot start with a digit. Note that a hyphen is automatically converted to underscore, so for instance an input parameter "some-parameter" in HTTP request will be "some_parameter" in get-param. <br/>
<span style="font-weight:bold;">- File uploads</span><br/>
File uploads are handled as input parameters as well, see <a href='/file-uploading.html'>file-uploading</a>.<br/>
<span style="font-weight:bold;">- Web input parameters</span><br/>
As an example, for HTML form input parameters named "param1" with value "value1" and "param2" with value "value2":<br/>
<div class='htmlcode' style='position:relative;padding-right:16px;'>
<pre id='code_690' class=notranslate>
<span class="Identifier">&lt;</span><span class="Statement">input</span><span class="Identifier"> </span><span class="Type">type</span><span class="Identifier">=</span><span class="Constant">'hidden'</span><span class="Identifier"> </span><span class="Type">name</span><span class="Identifier">=</span><span class="Constant">'param1'</span><span class="Identifier"> </span><span class="Type">value</span><span class="Identifier">=</span><span class="Constant">'value1'</span><span class="Identifier">&gt;</span>
<span class="Identifier">&lt;</span><span class="Statement">input</span><span class="Identifier"> </span><span class="Type">type</span><span class="Identifier">=</span><span class="Constant">'hidden'</span><span class="Identifier"> </span><span class="Type">name</span><span class="Identifier">=</span><span class="Constant">'param2'</span><span class="Identifier"> </span><span class="Type">value</span><span class="Identifier">=</span><span class="Constant">'value2'</span><span class="Identifier">&gt;</span></pre>
<span id=rimstone_copied_690 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_690' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_690, code_690, rimstone_copied_690)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
you can get these parameters and print out their values by using:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_694' class=notranslate>
<span class="Statement">get-param</span> param1, param2</pre>
<span id=rimstone_copied_694 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_694' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_694, code_694, rimstone_copied_694)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
A request may be in the form of a web link URL, and getting the parameter values is the same:<br/>
<div class='ncode' style='position:relative;padding-right:16px;'>
<pre id='code_691' class=notranslate>
http://&lt;your web server&gt;/&lt;app name&gt;/&lt;request name&gt;&amp;param1=value1&amp;param2=value2</pre>
<span id=rimstone_copied_691 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_691' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_691, code_691, rimstone_copied_691)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<div class="vsub"><a id="Setting parameters during request's execution"></a>Setting parameters during request's execution</div>
Use <a href='/set-param.html'>set-param</a> to replace the value of an existing parameter, or create a new one. For instance:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_695' class=notranslate>
<span class="Statement">get-param</span> par1
<span class="Statement">.</span>..
<span class="Statement">set-param</span> par1=<span class="Constant">&quot;new value&quot;</span></pre>
<span id=rimstone_copied_695 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_695' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_695, code_695, rimstone_copied_695)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
In this case the value of an existing parameter "par1" is replaced with "new value". In the following code a new parameter is created, which can be retrieved later with get-param:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_696' class=notranslate>
<span class="Statement">set-param</span> par1=<span class="Constant">&quot;new value&quot;</span>
<span class="Statement">get-param</span> par1</pre>
<span id=rimstone_copied_696 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_696' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_696, code_696, rimstone_copied_696)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
See <a href='/call-handler.html'>call-handler</a> for more examples.<br/>
<div class="vsub"><a id="Duplicate input parameter names"></a>Duplicate input parameter names</div>
If there are multiple input parameters with the same name set by the request caller, such as <br/>
<div class='ncode' style='position:relative;padding-right:16px;'>
<pre id='code_693' class=notranslate>
http://&lt;web address&gt;/&lt;app name&gt;/&lt;request name&gt;?par=val1&amp;par=val2</pre>
<span id=rimstone_copied_693 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_693' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_693, code_693, rimstone_copied_693)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
the value of input parameter "par" is undefined. Do not specify multiple input parameters with the same name.<br/>
<div class="vsub"><a id="Input and output parameters to request handlers"></a>Input and output parameters to request handlers</div>
Read more at <a href='/input-output-parameters.html'>input-output-parameters</a>.<br/>
<div class="vsub"><a id="See also"></a>See also</div>
 <a name='Request data'></a><span style="font-weight:bold;">Request data</span><br/>
<a href='/get-param.html'>get-param</a> &nbsp;<br/>
<a href='/input-output-parameters.html'>input-output-parameters</a> &nbsp;<br/>
<a href='/request-body.html'>request-body</a> &nbsp;<br/>
<a href='/set-param.html'>set-param</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='/documentation.html'>documentation</a><br/>
<a id='get-req.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:left;background-color:white;'><a href='https://rimstone-lang.com' style='border-bottom:0px'><img src='https://rimstone-lang.com/rimstone.png' style='width:180px;height:auto'/></a></div><div class='vhub' style='margin-top:10px;'>Get req</div><hr/><span style="font-weight:bold;">Purpose</span>: Obtain data that describes the input request.<br/>
<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_697' class=notranslate>
<span class="Statement">get-req</span> \
       <span class="Identifier"> errno</span> |<span class="Identifier"> error</span> |<span class="Identifier"> cookie-count</span> |<span class="Identifier"> cookie</span> &lt;cookie index&gt; \
        |<span class="Identifier"> arg-count</span> |<span class="Identifier"> arg-value</span> &lt;arg index&gt; \
        |<span class="Identifier"> header</span> &lt;header&gt; |<span class="Identifier"> referring-url</span> |<span class="Identifier"> method</span> \
        |<span class="Identifier"> content-type</span> |<span class="Identifier"> process-id</span> |<span class="Identifier"> name</span> \
        |<span class="Identifier"> external-call</span> |<span class="Identifier"> directory</span> |<span class="Identifier"> source-file</span> \
   <span class="Type"> to</span> &lt;variable&gt;</pre>
<span id=rimstone_copied_697 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_697' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_697, code_697, rimstone_copied_697)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Information related to an input request can be obtained with get-req statement and the result stored into &lt;variable&gt; (in "to" clause). The following can be obtained (all are strings except where stated otherwise):<br/>
<ul><li>"errno" obtains the integer value of operating system "errno" tied to a last RimStone statement that can return a status code. The "errno" value is saved internally; and restored here. It means that if "errno" changed for whatever reason since such RimStone statement (such as with <a href='/call-extended.html'>call-extended</a>), you will still obtain the correct value. See <a href='/error-code.html'>error-code</a> for an example. Note that errno value is undefined if there is no error, and can be 0 if the error is reported by RimStone and not by operating system.<br/>
<br/>
</li><li>"error" returns the error message that correlates to "errno" value. <br/>
<br/>
</li><li>"cookie-count" returns the number of cookies. This means any cookies received from the client plus any cookies added (with <a href='/set-cookie.html'>set-cookie</a>) in the application minus any cookies deleted (with <a href='/delete-cookie.html'>delete-cookie</a>). <br/>
<br/>
</li><li>"cookie" returns the cookie value specified by &lt;cookie index&gt; (a sequential number starting with 1 up to the number of cookies), for instance:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_698' class=notranslate>
<span class="Statement">get-req</span><span class="Identifier"> cookie-count</span><span class="Type"> to</span> cookie_c
<span class="Statement">start-loop</span><span class="Identifier"> repeat</span> cookie_c<span class="Type"> use</span> i
<span class="Statement">    get-req</span><span class="Identifier"> cookie</span> i<span class="Type"> to</span> cookie_val
<span class="Statement">    print-format</span> <span class="Constant">&quot;cookie </span><span class="Special">%s</span><span class="Special">\n</span><span class="Constant">&quot;</span>, cookie_val<span class="Identifier"> web-encode</span>
<span class="Statement">    @</span>&lt;br/&gt;
<span class="Statement">end-loop</span></pre>
<span id=rimstone_copied_698 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_698' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_698, code_698, rimstone_copied_698)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
In this example, we get the number of cookies, and then print out each cookie value.<br/>
<br/>
</li><li>"arg-count" is the number of input arguments to your application (passed from a program caller, see "-a" option in <a href='/mrim.html'>mrim</a> and "--arg" in <a href='/rim.html'>rim</a>).<br/>
<br/>
</li><li>"arg-value" is the string value of a single element from the array of input arguments, specified by &lt;arg_index&gt;. This array is indexed from 1 to the value obtained by "arg-count". Here is an example of using arg-count and arg-value:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_699' class=notranslate>
<span class="Statement">get-req</span><span class="Identifier"> arg-count</span><span class="Type"> to</span> ac
<span class="Statement">print-format</span> <span class="Constant">&quot;Total args [</span><span class="Special">%ld</span><span class="Constant">]&quot;</span>, ac
<span class="Statement">start-loop</span><span class="Identifier"> repeat</span> ac<span class="Type"> use</span> i
<span class="Statement">    get-req</span><span class="Identifier"> arg-value</span> i<span class="Type"> to</span> av
<span class="Statement">    print-format</span> <span class="Constant">&quot;</span><span class="Special">%s</span><span class="Special">\n</span><span class="Constant">&quot;</span>, av
<span class="Statement">end-loop</span></pre>
<span id=rimstone_copied_699 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_699' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_699, code_699, rimstone_copied_699)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
This code will display the number of input arguments (as passed to main() function of your program, excluding the first argument which is the name of the program), and then all the arguments. If there are no arguments, then variable 'ac' would be 0. <br/>
<br/>
</li><li>"header" is the value of HTTP request header &lt;header&gt; that is set by the client. For example, if the HTTP request contains header "My-Header:30", then hval would be "30":<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_700' class=notranslate>
<span class="Statement">get-req</span><span class="Identifier"> header</span> <span class="Constant">&quot;My-Header&quot;</span><span class="Type"> to</span> hval</pre>
<span id=rimstone_copied_700 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_700' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_700, code_700, rimstone_copied_700)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Note that not all HTTP request headers are set by the caller. For example, SERVER_NAME or QUERY_STRING are set by the web server, and to get such headers, use <a href='/get-sys.html'>get-sys</a>.<br/>
<br/>
</li><li>"method" is the request method. This is a number with values of RIM_GET, RIM_POST, RIM_PUT, RIM_PATCH or RIM_DELETE for GET, POST, PUT, PATCH or DELETE requests, respectively. If it is not any of those commonly used ones, then the value is RIM_OTHER and you can use <a href='/get-sys.html'>get-sys</a> with "environment" clause to obtain "REQUEST_METHOD" variable.<br/>
<br/>
</li><li>"content-type" is the request content type. It is a string and generally denotes the content type of a <a href='/request-body.html'>request-body</a>, if included in the request. Common examples are "application/x-www-form-urlencoded", "multipart/form-data" or "application/json".<br/>
<br/>
</li><li>"referring-url" is the referring URL (i.e. the page from which this request was called, for example by clicking a link). <br/>
<br/>
</li><li>"directory" is the current working directory, which is by default the application home directory (see <a href='/directories.html'>directories</a>) and can be changed with <a href='/change-dir.html'>change-dir</a>. Note that maximum length of a directory path should not exceed 1024 bytes.<br/>
<br/>
</li><li>"process-id" is the "PID" (process ID) number of the currently executing process, as a number.<br/>
<br/>
</li><li>"external-call" is a boolean that is true if the call to the current request handler is from an external caller, or false if called from another handler.<br/>
<br/>
</li><li>"source-file" is the name of the current source file (a string).<br/>
<br/>
</li><li>"name" is the request name as specified in the <a href='/request.html'>request</a> URL.</li></ul>
<div class="vsub"><a id="Examples"></a>Examples</div>
Get the process ID:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_701' class=notranslate>
<span class="Statement">get-req</span><span class="Identifier"> process-id</span><span class="Type"> to</span> pid</pre>
<span id=rimstone_copied_701 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_701' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_701, code_701, rimstone_copied_701)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<div class="vsub"><a id="See also"></a>See also</div>
 <a name='Request information'></a><span style="font-weight:bold;">Request information</span><br/>
<a href='/get-req.html'>get-req</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='/documentation.html'>documentation</a><br/>
<a id='get-sys.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:left;background-color:white;'><a href='https://rimstone-lang.com' style='border-bottom:0px'><img src='https://rimstone-lang.com/rimstone.png' style='width:180px;height:auto'/></a></div><div class='vhub' style='margin-top:10px;'>Get sys</div><hr/><span style="font-weight:bold;">Purpose</span>: Obtain data that describes the system.<br/>
<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_702' class=notranslate>
<span class="Statement">get-sys</span> \
   <span class="Identifier"> environment</span> &lt;var name&gt; \
       <span class="Identifier"> directory</span> |<span class="Identifier"> os-name</span> |<span class="Identifier"> os-version</span> |<span class="Identifier"> os-user</span> |<span class="Identifier"> os-dir</span> \
   <span class="Type"> to</span> &lt;variable&gt;</pre>
<span id=rimstone_copied_702 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_702' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_702, code_702, rimstone_copied_702)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
System-describing variables can be obtained with get-sys statement and the result stored into &lt;variable&gt;. The following system variables can be obtained:<br/>
<ul><li>"environment" returns the name of a given environment variable &lt;var name&gt;. If this is a server program, then the environment passed from a remote caller (such as web proxy) is queried. If this is a <a href='/command-line.html'>command-line</a> program, then the environment from the Operating System is queried. In the following example,the QUERY_STRING variable (i.e. the actual query string from URL) is obtained:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_703' class=notranslate>
<span class="Statement">get-sys</span><span class="Identifier"> environment</span> <span class="Constant">&quot;QUERY_STRING&quot;</span><span class="Type"> to</span> qstr</pre>
<span id=rimstone_copied_703 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_703' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_703, code_703, rimstone_copied_703)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<br/>
</li><li>"directory" is the execution directory of the <a href='/command-line.html'>command-line</a> program, i.e. the current working directory when the program was executed. Note that RimStone will change the current working directory immediately afterwards to the application home directory (see <a href='/directories.html'>directories</a>). You can use this clause to work with files in the directory where the program was started. If your program runs as a <a href='/service.html'>service</a>, then "directory" clause always returns application home directory, regardless of which directory <a href='/mrim.html'>mrim</a> program manager started your application from.<br/>
<br/>
</li><li>"os-user" is the name of Operating System user who is running your application.<br/>
<br/>
</li><li>"os-dir" is the full path of home directory of Operating System user who is running your application.<br/>
<br/>
</li><li>"os-name" is the name of Operating System.<br/>
<br/>
</li><li>"os-version" is the version of Operating System.</li></ul>
<div class="vsub"><a id="Examples"></a>Examples</div>
Get the name of the Operating System<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_704' class=notranslate>
<span class="Statement">get-sys</span><span class="Identifier"> os-name</span><span class="Type"> to</span> os_name</pre>
<span id=rimstone_copied_704 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_704' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_704, code_704, rimstone_copied_704)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<div class="vsub"><a id="See also"></a>See also</div>
 <a name='System information'></a><span style="font-weight:bold;">System information</span><br/>
<a href='/get-sys.html'>get-sys</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='/documentation.html'>documentation</a><br/>
<a id='get-time.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:left;background-color:white;'><a href='https://rimstone-lang.com' style='border-bottom:0px'><img src='https://rimstone-lang.com/rimstone.png' style='width:180px;height:auto'/></a></div><div class='vhub' style='margin-top:10px;'>Get time</div><hr/><span style="font-weight:bold;">Purpose</span>: Get time.<br/>
<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_705' class=notranslate>
<span class="Statement">get-time</span><span class="Type"> to</span> &lt;time var&gt; \
    [<span class="Identifier"> since-epoch</span> ] \
    |
    (
        [<span class="Identifier"> timezone</span> &lt;tz&gt; ] \
        [<span class="Identifier"> year</span> &lt;year&gt; ] \
        [<span class="Identifier"> month</span> &lt;month&gt; ] \
        [<span class="Identifier"> day</span> &lt;day&gt; ] \
        [<span class="Identifier"> hour</span> &lt;hour&gt; ] \
        [<span class="Identifier"> minute</span> &lt;minute&gt; ] \
        [<span class="Identifier"> second</span> &lt;second&gt; ] \
        [<span class="Identifier"> format</span> &lt;format&gt; ] \
        [<span class="Identifier"> from-epoch</span> &lt;epoch time&gt; ]
    )</pre>
<span id=rimstone_copied_705 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_705' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_705, code_705, rimstone_copied_705)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
get-time produces &lt;time var&gt; variable that contains string with current time by default (without "since-epoch" clause), or a number of seconds since the Epoch (1970-01-01 00:00:00 +0000 (UTC)) if "since-epoch" clause is used. <br/>
<div class="vsub"><a id="Without "since-epoch" clause"></a>Without "since-epoch" clause</div>
If "from-epoch" clause is used, then &lt;epoch time&gt; is the number of seconds since the Epoch, and get-time will assume it to be the current time (i.e. the actual current time will not be used). Otherwise, if none of "year", "month", "day", "hour", "minute" or "second" clauses are used, then the actual current time is produced. In further text, "current" time means one or the other, depending on whether "from-epoch" clause is used or not.<br/>
<br/>
Use timezone to specify that time produced will be in timezone &lt;tz&gt;. For example if &lt;tz&gt; is "EST", that means Eastern Standard Time, while "MST" means Mountain Standard Time. The exact way to get a full list of timezones recognized on your system may vary, but on many systems you can use:<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_706' class=notranslate>
timedatectl list-timezones</pre>
<span id=rimstone_copied_706 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_706' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_706, code_706, rimstone_copied_706)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
So for example to get the time in Phoenix, Arizona you could use "America/Phoenix" for &lt;tz&gt;. If timezone clause is omitted, then time is produced in "GMT" timezone by default. DST (Daylight Savings Time) is automatically adjusted.<br/>
<br/>
Each variable specified with "year", "month", "day", "hour", "minute" or "second" is a time to be added or subtracted to/from current time (see above for what is "current" time). For example "year 2" means add 2 years to the current time, and "year -4" means subtract 4 years, whereas "hour -4" means &nbsp;subtract 4 hours, etc. So for example, a moment in time that is 2 years into the future minus 5 days minus 1 hour is:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_707' class=notranslate>
<span class="Statement">get-time</span><span class="Type"> to</span> time_var<span class="Identifier"> year</span> <span class="Constant">2</span><span class="Identifier"> day</span> -<span class="Constant">5</span><span class="Identifier"> hour</span> -<span class="Constant">1</span></pre>
<span id=rimstone_copied_707 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_707' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_707, code_707, rimstone_copied_707)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
&lt;format&gt; allows you to get the time in any string format you like, using the specifiers available in C "strftime". For example, if &lt;format&gt; is "%A, %B %d %Y, %l:%M %p %Z", it will produce something like "Sunday, November 28 2021, 9:07 PM MST". The default format is "UTC/GMT" format, which for instance, is suitable for use with cookie timestamps, and looks something like "Mon, 16 Jul 2012 00:03:01 GMT".<br/>
<div class="vsub"><a id="With "since-epoch" clause"></a>With "since-epoch" clause</div>
In this case, &lt;time var&gt; is a number signifying the number of seconds since the Epoch (1970-01-01 00:00:00 +0000 (UTC)) to the present moment. RimStone operates on 64 numbers and the result is always safe (account for 292 billion years into the past and the future). This option is commonly used to obtain time in a form that can be subtracted, resulting in the number of seconds between two points in time, or for any other purpose where obtaining current time is more useful if represented as a number.<br/>
<div class="vsub"><a id="Examples"></a>Examples</div>
To get current time in "GMT" timezone, in a format that is suitable for use with <a href='/set-cookie.html'>set-cookie</a> (for example to set expiration date):<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_708' class=notranslate>
<span class="Statement">get-time</span><span class="Type"> to</span> mytime</pre>
<span id=rimstone_copied_708 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_708' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_708, code_708, rimstone_copied_708)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
To get the time in the same format, only 1 year and 2 months in the future:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_709' class=notranslate>
<span class="Statement">get-time</span><span class="Type"> to</span> mytime<span class="Identifier"> year</span> <span class="Constant">1</span><span class="Identifier"> month</span> <span class="Constant">2</span></pre>
<span id=rimstone_copied_709 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_709' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_709, code_709, rimstone_copied_709)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
An example of a future date (1 year, 3 months, 4 days, 7 hours, 15 minutes and 22 seconds into the future), in a specific format (see "strftime"):<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_710' class=notranslate>
<span class="Statement">get-time</span><span class="Type"> to</span> time_var<span class="Identifier"> timezone</span> <span class="Constant">&quot;MST&quot;</span><span class="Identifier"> year</span> <span class="Constant">1</span><span class="Identifier"> month</span> <span class="Constant">3</span><span class="Identifier"> day</span> <span class="Constant">4</span><span class="Identifier"> hour</span> <span class="Constant">7</span><span class="Identifier"> minute</span> <span class="Constant">15</span><span class="Identifier"> second</span> <span class="Constant">22</span><span class="Identifier"> format</span> <span class="Constant">&quot;</span><span class="Special">%A</span><span class="Constant">, %B </span><span class="Special">%d</span><span class="Constant"> %Y, %l:%M </span><span class="Special">%p</span><span class="Constant"> %Z&quot;</span></pre>
<span id=rimstone_copied_710 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_710' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_710, code_710, rimstone_copied_710)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Get number of seconds sinc Jan 1, 1970:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_711' class=notranslate>
<span class="Statement">get-time</span><span class="Type"> to</span> mytime<span class="Identifier"> since-epoch</span>
<span class="Statement">print-out</span> mytime<span class="Identifier"> new-line</span></pre>
<span id=rimstone_copied_711 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_711' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_711, code_711, rimstone_copied_711)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Produce 2 days after Epoch time stamp of 489326400 (which is July 4th 1985 at noon), and then add 2 days to it:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_712' class=notranslate>
<span class="Statement">get-time</span><span class="Type"> to</span> mytime<span class="Identifier"> from-epoch</span> <span class="Constant">489326400</span> <span class="Constant">2</span> day
<span class="Statement">print-out</span> mytime</pre>
<span id=rimstone_copied_712 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_712' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_712, code_712, rimstone_copied_712)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<div class="vsub"><a id="See also"></a>See also</div>
 <a name='Time'></a><span style="font-weight:bold;">Time</span><br/>
<a href='/get-time.html'>get-time</a> &nbsp;<br/>
<a href='/pause-program.html'>pause-program</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='/documentation.html'>documentation</a><br/>
<a id='get-tree.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:left;background-color:white;'><a href='https://rimstone-lang.com' style='border-bottom:0px'><img src='https://rimstone-lang.com/rimstone.png' style='width:180px;height:auto'/></a></div><div class='vhub' style='margin-top:10px;'>Get tree</div><hr/><span style="font-weight:bold;">Purpose</span>: Get information about a tree.<br/>
<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_713' class=notranslate>
<span class="Statement">get-tree</span> &lt;tree&gt; \
    (<span class="Type"> count</span> &lt;count&gt; ) | (<span class="Type"> hops</span> &lt;hops&gt; )</pre>
<span id=rimstone_copied_713 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_713' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_713, code_713, rimstone_copied_713)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
get-tree provides information about &lt;tree&gt; (created by <a href='/new-tree.html'>new-tree</a>):<br/>
<ul><li>&lt;count&gt; (in "count" clause) provides the number of keys (i.e. nodes) in the tree. <br/>
</li><li>&lt;hops&gt; (in "hops" clause) provides the number of nodes accessed to find a key in the last tree statement executed prior to get-tree. Note that &lt;hops&gt; is available only in debug RimStone build (see <a href='/rim.html'>rim</a> "--devel" option); otherwise it is always zero (if you make your application with "--release" option).</li></ul>
<div class="vsub"><a id="Examples"></a>Examples</div>
Get the number of nodes (keys) in a tree:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_714' class=notranslate>
<span class="Statement">new-tree</span> mytree
<span class="Statement">.</span>..
<span class="Statement">get-tree</span> mytree<span class="Type"> count</span> c</pre>
<span id=rimstone_copied_714 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_714' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_714, code_714, rimstone_copied_714)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<div class="vsub"><a id="See also"></a>See also</div>
 <a name='Tree'></a><span style="font-weight:bold;">Tree</span><br/>
<a href='/delete-tree.html'>delete-tree</a> &nbsp;<br/>
<a href='/get-tree.html'>get-tree</a> &nbsp;<br/>
<a href='/new-tree.html'>new-tree</a> &nbsp;<br/>
<a href='/purge-tree.html'>purge-tree</a> &nbsp;<br/>
<a href='/read-tree.html'>read-tree</a> &nbsp;<br/>
<a href='/use-cursor.html'>use-cursor</a> &nbsp;<br/>
<a href='/write-tree.html'>write-tree</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='/documentation.html'>documentation</a><br/>
<a id='get-upload.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:left;background-color:white;'><a href='https://rimstone-lang.com' style='border-bottom:0px'><img src='https://rimstone-lang.com/rimstone.png' style='width:180px;height:auto'/></a></div><div class='vhub' style='margin-top:10px;'>Get upload</div><hr/><span style="font-weight:bold;">Purpose</span>: Get information about file uploaded.<br/>
<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_715' class=notranslate>
<span class="Statement">get-upload</span> &lt;param&gt;<span class="Type"> local-file</span> &lt;local file&gt;  \
    [<span class="Type"> size</span> &lt;size&gt; ] \
    [<span class="Type"> extension</span> &lt;extension&gt; ] \
    [<span class="Identifier"> status</span> &lt;status&gt; ] \
    [<span class="Type"> client-file</span> &lt;client file&gt; ]</pre>
<span id=rimstone_copied_715 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_715' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_715, code_715, rimstone_copied_715)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
When a file is uploaded by RimStone via any client (such as a browser, curl, <a href='/call-web.html'>call-web</a> etc.), you can obtain the full-path location in your local file system by using get-upload.<br/>
<br/>
&lt;param&gt; is the name of the HTML parameter (in an HTML form used to upload the file, or otherwise specified in other clients such as curl or RimStone's call-web).<br/>
<br/>
&lt;local file&gt; (in "local-file" clause) is the full-path location of the local file (on your computer) where the file is uploaded (see <a href='/file-storage.html'>file-storage</a>).<br/>
<br/>
&lt;size&gt; (in "size" clause) is the size (in bytes) of the file uploaded.<br/>
<br/>
&lt;extension&gt; (in "extension" clause) is the extension of the file uploaded (such as ".jpg"), if any. Note that the extension is always lower case; also ".jpeg" is always abbreviated as ".jpg".<br/>
<br/>
&lt;status&gt; (in "status" clause) is the status of upload; it is RIM_OKAY if successful and RIM_ERR_EXIST if not (most likely &lt;param&gt; parameter is not found, i.e. there was no file uploaded).<br/>
<br/>
&lt;client file&gt; (in "client-file" clause) is the file name as given by the client.<br/>
<br/>
For more details, see <a href='/file-uploading.html'>file-uploading</a>.<br/>
<div class="vsub"><a id="See also"></a>See also</div>
 <a name='Files'></a><span style="font-weight:bold;">Files</span><br/>
<a href='/change-mode.html'>change-mode</a> &nbsp;<br/>
<a href='/close-file.html'>close-file</a> &nbsp;<br/>
<a href='/copy-file.html'>copy-file</a> &nbsp;<br/>
<a href='/delete-file.html'>delete-file</a> &nbsp;<br/>
<a href='/file-position.html'>file-position</a> &nbsp;<br/>
<a href='/file-storage.html'>file-storage</a> &nbsp;<br/>
<a href='/file-uploading.html'>file-uploading</a> &nbsp;<br/>
<a href='/get-upload.html'>get-upload</a> &nbsp;<br/>
<a href='/lock-file.html'>lock-file</a> &nbsp;<br/>
<a href='/open-file.html'>open-file</a> &nbsp;<br/>
<a href='/read-file.html'>read-file</a> &nbsp;<br/>
<a href='/read-line.html'>read-line</a> &nbsp;<br/>
<a href='/rename-file.html'>rename-file</a> &nbsp;<br/>
<a href='/stat-file.html'>stat-file</a> &nbsp;<br/>
<a href='/temporary-file.html'>temporary-file</a> &nbsp;<br/>
<a href='/uniq-file.html'>uniq-file</a> &nbsp;<br/>
<a href='/unlock-file.html'>unlock-file</a> &nbsp;<br/>
<a href='/write-file.html'>write-file</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='/documentation.html'>documentation</a><br/>
<a id='hash-string.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:left;background-color:white;'><a href='https://rimstone-lang.com' style='border-bottom:0px'><img src='https://rimstone-lang.com/rimstone.png' style='width:180px;height:auto'/></a></div><div class='vhub' style='margin-top:10px;'>Hash string</div><hr/><span style="font-weight:bold;">Purpose</span>: Hash a string.<br/>
<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_716' class=notranslate>
<span class="Statement">hash-string</span> &lt;string&gt;<span class="Type"> to</span> &lt;result&gt; \
    [<span class="Identifier"> binary</span> [ &lt;binary&gt; ] \
    [<span class="Identifier"> digest</span> &lt;digest algorithm&gt; ]</pre>
<span id=rimstone_copied_716 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_716' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_716, code_716, rimstone_copied_716)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
hash-string produces by default a SHA256 hash of &lt;string&gt; (if "digest" clause is not used), and stores the result into &lt;result&gt;. You can use a different &lt;digest algorithm&gt; in "digest" clause (for example "SHA3-256"). To see a list of available digests:<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_717' class=notranslate>
<span class="Comment">#get digests</span>
openssl list <span class="Special">-digest-algorithms</span></pre>
<span id=rimstone_copied_717 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_717' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_717, code_717, rimstone_copied_717)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
If "binary" clause is used without boolean variable &lt;binary&gt;, or if &lt;binary&gt; evaluates to true, then the &lt;result&gt; is a binary string that may contain null-characters. With the default SHA256, it is 32 bytes in length, while for instance with SHA3-384 it is 48 bytes in length, etc. <br/>
<br/>
Without "binary" clause, or if &lt;binary&gt; evaluates to false, each binary byte of hashed string is converted to two hexadecimal characters ("0"-"9" and "a"-"f"), hence &lt;result&gt; is twice as long as with "binary" clause. <br/>
<div class="vsub"><a id="Examples"></a>Examples</div>
String "result" will have a hashed value of the given string, an example of which might look like "e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855":<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_718' class=notranslate>
<span class="Statement">hash-string</span> <span class="Constant">&quot;hello world&quot;</span><span class="Type"> to</span> hash</pre>
<span id=rimstone_copied_718 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_718' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_718, code_718, rimstone_copied_718)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Using a different digest:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_719' class=notranslate>
<span class="Statement">hash-string</span> <span class="Constant">&quot;hello world&quot;</span><span class="Type"> to</span> hash<span class="Identifier"> digest</span> <span class="Constant">&quot;sha3-384&quot;</span></pre>
<span id=rimstone_copied_719 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_719' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_719, code_719, rimstone_copied_719)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Producing a binary value instead of a null-terminated hexadecimal string:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_720' class=notranslate>
<span class="Statement">hash-string</span> <span class="Constant">&quot;hello world&quot;</span><span class="Type"> to</span> hash<span class="Identifier"> digest</span> <span class="Constant">&quot;sha3-384&quot;</span><span class="Identifier"> binary</span></pre>
<span id=rimstone_copied_720 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_720' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_720, code_720, rimstone_copied_720)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<div class="vsub"><a id="See also"></a>See also</div>
 <a name='Encryption'></a><span style="font-weight:bold;">Encryption</span><br/>
<a href='/decrypt-data.html'>decrypt-data</a> &nbsp;<br/>
<a href='/derive-key.html'>derive-key</a> &nbsp;<br/>
<a href='/encrypt-data.html'>encrypt-data</a> &nbsp;<br/>
<a href='/hash-string.html'>hash-string</a> &nbsp;<br/>
<a href='/hmac-string.html'>hmac-string</a> &nbsp;<br/>
<a href='/random-crypto.html'>random-crypto</a> &nbsp;<br/>
<a href='/random-string.html'>random-string</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='/documentation.html'>documentation</a><br/>
<a id='hmac-string.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:left;background-color:white;'><a href='https://rimstone-lang.com' style='border-bottom:0px'><img src='https://rimstone-lang.com/rimstone.png' style='width:180px;height:auto'/></a></div><div class='vhub' style='margin-top:10px;'>Hmac string</div><hr/><span style="font-weight:bold;">Purpose</span>: Create HMAC.<br/>
<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_721' class=notranslate>
<span class="Statement">hmac-string</span> &lt;string&gt;<span class="Type"> to</span> &lt;result&gt; \
   <span class="Identifier"> key</span> &lt;key&gt; \
    [<span class="Identifier"> binary</span> [ &lt;binary&gt; ] \
    [<span class="Identifier"> digest</span> &lt;digest algorithm&gt; ]</pre>
<span id=rimstone_copied_721 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_721' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_721, code_721, rimstone_copied_721)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
hmac-string produces by default a SHA256-based HMAC (Hash Message Authentication Code) of &lt;string&gt; (if "digest" clause is not used) using secret &lt;key&gt;, and stores the result into &lt;result&gt;. &nbsp;You can use a different &lt;digest algorithm&gt; in "digest" clause (for example "SHA3-256"). To see a list of available digests:<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_722' class=notranslate>
<span class="Comment">#get digests</span>
openssl list <span class="Special">-digest-algorithms</span></pre>
<span id=rimstone_copied_722 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_722' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_722, code_722, rimstone_copied_722)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
If "binary" clause is used without boolean variable &lt;binary&gt;, or if &lt;binary&gt; evaluates to true, then the &lt;result&gt; is a binary string that may contain null-characters. With the default SHA256, it is 32 bytes in length, while for instance with SHA3-384 it is 48 bytes in length, etc. <br/>
<br/>
Without "binary" clause, or if &lt;binary&gt; evaluates to false, each binary byte of HMAC is converted to two hexadecimal characters ("0"-"9" and "a"-"f"), hence &lt;result&gt; is twice as long as with "binary" clause. <br/>
<div class="vsub"><a id="Examples"></a>Examples</div>
String "result" will have a HMAC value of a given string, an example of which might look like "2d948cc89148ef96fa4f1876e74af4ce984423d355beb12f7fdba5383143bee0"<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_723' class=notranslate>
<span class="Statement">hmac-string</span> <span class="Constant">&quot;some data&quot;</span><span class="Identifier"> key</span> <span class="Constant">&quot;mykey&quot;</span><span class="Type"> to</span> result</pre>
<span id=rimstone_copied_723 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_723' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_723, code_723, rimstone_copied_723)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Using a different digest:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_724' class=notranslate>
<span class="Statement">hmac-string</span> <span class="Constant">&quot;some data&quot;</span><span class="Identifier"> key</span> <span class="Constant">&quot;mykey&quot;</span><span class="Type"> to</span> result<span class="Identifier"> digest</span> <span class="Constant">&quot;sha3-384&quot;</span></pre>
<span id=rimstone_copied_724 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_724' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_724, code_724, rimstone_copied_724)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Producing a binary value instead of a null-terminated hexadecimal string, and then making a Base64 string out of it:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_725' class=notranslate>
<span class="Statement">hmac-string</span> <span class="Constant">&quot;some data&quot;</span><span class="Identifier"> key</span> <span class="Constant">&quot;mykey&quot;</span><span class="Identifier"> digest</span> <span class="Constant">&quot;SHA256&quot;</span><span class="Type"> to</span> result<span class="Identifier"> binary</span>
<span class="Statement">encode-base64</span> result<span class="Type"> to</span> bresult</pre>
<span id=rimstone_copied_725 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_725' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_725, code_725, rimstone_copied_725)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<div class="vsub"><a id="See also"></a>See also</div>
 <a name='Encryption'></a><span style="font-weight:bold;">Encryption</span><br/>
<a href='/decrypt-data.html'>decrypt-data</a> &nbsp;<br/>
<a href='/derive-key.html'>derive-key</a> &nbsp;<br/>
<a href='/encrypt-data.html'>encrypt-data</a> &nbsp;<br/>
<a href='/hash-string.html'>hash-string</a> &nbsp;<br/>
<a href='/hmac-string.html'>hmac-string</a> &nbsp;<br/>
<a href='/random-crypto.html'>random-crypto</a> &nbsp;<br/>
<a href='/random-string.html'>random-string</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='/documentation.html'>documentation</a><br/>
<a id='hypot.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:left;background-color:white;'><a href='https://rimstone-lang.com' style='border-bottom:0px'><img src='https://rimstone-lang.com/rimstone.png' style='width:180px;height:auto'/></a></div><div class='vhub' style='margin-top:10px;'>Hypot</div><hr/><span style="font-weight:bold;">Purpose</span>: Euclidean distance function.<br/>
<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_726' class=notranslate>
hypot( &lt;var1&gt;, &lt;var2&gt; )</pre>
<span id=rimstone_copied_726 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_726' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_726, code_726, rimstone_copied_726)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
hypot returns <br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_727' class=notranslate>
sqrt(&lt;var1&gt;*&lt;var1&gt;+&lt;var2&gt;*&lt;var2&gt;)</pre>
<span id=rimstone_copied_727 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_727' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_727, code_727, rimstone_copied_727)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
, which is the length of the hypotenuse in a right-angled triangle with catheti of &lt;var1&gt; and &lt;var2&gt;. &lt;var1&gt; and &lt;var2&gt; are a number or a double and the result is a double.<br/>
<div class="vsub"><a id="Examples"></a>Examples</div>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_728' class=notranslate>
<span class="Statement">set-double</span> d = hypot(<span class="Constant">3</span>,<span class="Constant">4</span>) + <span class="Constant">1</span></pre>
<span id=rimstone_copied_728 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_728' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_728, code_728, rimstone_copied_728)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<div class="vsub"><a id="See also"></a>See also</div>
 <a name='Math functions'></a><span style="font-weight:bold;">Math functions</span><br/>
<a href='/abd.html'>abd</a> &nbsp;<br/>
<a href='/abn.html'>abn</a> &nbsp;<br/>
<a href='/acos.html'>acos</a> &nbsp;<br/>
<a href='/acosh.html'>acosh</a> &nbsp;<br/>
<a href='/asin.html'>asin</a> &nbsp;<br/>
<a href='/asinh.html'>asinh</a> &nbsp;<br/>
<a href='/atan.html'>atan</a> &nbsp;<br/>
<a href='/atan2.html'>atan2</a> &nbsp;<br/>
<a href='/atanh.html'>atanh</a> &nbsp;<br/>
<a href='/cbrt.html'>cbrt</a> &nbsp;<br/>
<a href='/ceil.html'>ceil</a> &nbsp;<br/>
<a href='/copysign.html'>copysign</a> &nbsp;<br/>
<a href='/cos.html'>cos</a> &nbsp;<br/>
<a href='/cosh.html'>cosh</a> &nbsp;<br/>
<a href='/dbl.html'>dbl</a> &nbsp;<br/>
<a href='/erf.html'>erf</a> &nbsp;<br/>
<a href='/erfc.html'>erfc</a> &nbsp;<br/>
<a href='/exp.html'>exp</a> &nbsp;<br/>
<a href='/exp2.html'>exp2</a> &nbsp;<br/>
<a href='/floor.html'>floor</a> &nbsp;<br/>
<a href='/fmod.html'>fmod</a> &nbsp;<br/>
<a href='/hypot.html'>hypot</a> &nbsp;<br/>
<a href='/isinf.html'>isinf</a> &nbsp;<br/>
<a href='/isnan.html'>isnan</a> &nbsp;<br/>
<a href='/ldexp.html'>ldexp</a> &nbsp;<br/>
<a href='/lgamma.html'>lgamma</a> &nbsp;<br/>
<a href='/log.html'>log</a> &nbsp;<br/>
<a href='/log10.html'>log10</a> &nbsp;<br/>
<a href='/log2.html'>log2</a> &nbsp;<br/>
<a href='/math-functions.html'>math-functions</a> &nbsp;<br/>
<a href='/nextafter.html'>nextafter</a> &nbsp;<br/>
<a href='/num.html'>num</a> &nbsp;<br/>
<a href='/pow.html'>pow</a> &nbsp;<br/>
<a href='/round.html'>round</a> &nbsp;<br/>
<a href='/sin.html'>sin</a> &nbsp;<br/>
<a href='/sinh.html'>sinh</a> &nbsp;<br/>
<a href='/sqrt.html'>sqrt</a> &nbsp;<br/>
<a href='/tan.html'>tan</a> &nbsp;<br/>
<a href='/tanh.html'>tanh</a> &nbsp;<br/>
<a href='/trunc.html'>trunc</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='/documentation.html'>documentation</a><br/>
<a id='if-defined.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:left;background-color:white;'><a href='https://rimstone-lang.com' style='border-bottom:0px'><img src='https://rimstone-lang.com/rimstone.png' style='width:180px;height:auto'/></a></div><div class='vhub' style='margin-top:10px;'>If defined</div><hr/><span style="font-weight:bold;">Purpose</span>: Conditional compilation.<br/>
<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_730' class=notranslate>
<span class="Statement">if-defined</span> &lt;symbol&gt;
    &lt;any code&gt;
<span class="Statement">end-defined</span>

<span class="Statement">if-defined</span> &lt;symbol&gt; [<span class="Identifier"> equal</span> |<span class="Identifier"> not-equal</span> |<span class="Identifier"> lesser-than</span> |<span class="Identifier"> lesser-equal</span> |<span class="Identifier"> greater-than</span> |<span class="Identifier"> greater-equal</span> ] &lt;number&gt;
    &lt;any code&gt;
<span class="Statement">end-defined</span>

<span class="Statement">if-not-defined</span> &lt;symbol&gt;
    &lt;any code&gt;
<span class="Statement">end-defined</span></pre>
<span id=rimstone_copied_730 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_730' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_730, code_730, rimstone_copied_730)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Without a comparison clause, if-defined will cause &lt;any code&gt; to be compiled if &lt;symbol&gt; is defined (see "--cflag" option in <a href='/rim.html'>rim</a>); if &lt;symbol&gt; is not defined, then &lt;any code&gt; is not compiled.<br/>
<br/>
With a comparison clause, if-defined will cause &lt;any code&gt; to be compiled if &lt;symbol&gt; is equal/not equal/lesser than/lesser or equal/greater than/greater or equal than &lt;number&gt; constant, depending on the clause used (see "--cflag" option in <a href='/rim.html'>rim</a>). If &lt;symbol&gt; is not defined, then its value is assumed to be 0, and &lt;any code&gt; may still be compiled if the comparison clause and the &lt;number&gt; are such that the condition is true for &lt;symbol&gt; being 0.<br/>
<br/>
if-not-defined will cause &lt;any code&gt; to be compiled if &lt;symbol&gt; is not defined (see "--cflag" option in <a href='/rim.html'>rim</a>); if &lt;symbol&gt; is defined, then &lt;any code&gt; is not compiled.<br/>
<br/>
Note that &lt;symbol&gt; can start with an underscore, unlike RimStone variable names; this is because defined symbols aren't variables and generally are set by the outside environment or during compilation (see "--cflag" option in <a href='/rim.html'>rim</a>).<br/>
<div class="vsub"><a id="Examples"></a>Examples</div>
The following code will have a different output depending on how is the application compiled:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_733' class=notranslate>
<span class="Statement">if-defined</span> DEF1
<span class="Statement">    @</span>Defined
<span class="Statement">end-defined</span>
<span class="Statement">if-not-defined</span> DEF1
<span class="Statement">    @</span>Not defined
<span class="Statement">end-defined</span>
<span class="Statement">if-defined</span> DEF2<span class="Identifier"> equal</span> <span class="Constant">10</span>
<span class="Statement">    @</span>DEF2 is <span class="Constant">10</span>
<span class="Statement">end-defined</span>
<span class="Statement">if-defined</span> DEF2<span class="Identifier"> equal</span> <span class="Constant">0</span>
<span class="Statement">    @</span>DEF2 is <span class="Constant">0</span>
<span class="Statement">end-defined</span></pre>
<span id=rimstone_copied_733 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_733' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_733, code_733, rimstone_copied_733)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
If compiled with:<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_731' class=notranslate>
rim <span class="Special">-q</span></pre>
<span id=rimstone_copied_731 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_731' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_731, code_731, rimstone_copied_731)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
then the output is:<br/>
<div class='ncode' style='position:relative;padding-right:16px;'>
<pre id='code_729' class=notranslate>
Not defined
DEF2 is 0</pre>
<span id=rimstone_copied_729 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_729' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_729, code_729, rimstone_copied_729)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
If compiled with:<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_734' class=notranslate>
rim <span class="Special">-q</span> <span class="Special">--cflag</span><span class="Statement">=</span><span class="Statement">&quot;</span><span class="Constant">-DDEF1 -DDEF2=10</span><span class="Statement">&quot;</span></pre>
<span id=rimstone_copied_734 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_734' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_734, code_734, rimstone_copied_734)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
then the output is:<br/>
<div class='ncode' style='position:relative;padding-right:16px;'>
<pre id='code_732' class=notranslate>
Defined
DEF2 is 10</pre>
<span id=rimstone_copied_732 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_732' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_732, code_732, rimstone_copied_732)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<div class="vsub"><a id="See also"></a>See also</div>
 <a name='Program flow'></a><span style="font-weight:bold;">Program flow</span><br/>
<a href='/break-loop.html'>break-loop</a> &nbsp;<br/>
<a href='/call-handler.html'>call-handler</a> &nbsp;<br/>
<a href='/code-blocks.html'>code-blocks</a> &nbsp;<br/>
<a href='/continue-loop.html'>continue-loop</a> &nbsp;<br/>
<a href='/do-once.html'>do-once</a> &nbsp;<br/>
<a href='/exit-handler.html'>exit-handler</a> &nbsp;<br/>
<a href='/if-defined.html'>if-defined</a> &nbsp;<br/>
<a href='/if-true.html'>if-true</a> &nbsp;<br/>
<a href='/quit-process.html'>quit-process</a> &nbsp;<br/>
<a href='/return-handler.html'>return-handler</a> &nbsp;<br/>
<a href='/start-loop.html'>start-loop</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='/documentation.html'>documentation</a><br/>
<a id='if-true.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:left;background-color:white;'><a href='https://rimstone-lang.com' style='border-bottom:0px'><img src='https://rimstone-lang.com/rimstone.png' style='width:180px;height:auto'/></a></div><div class='vhub' style='margin-top:10px;'>If true</div><hr/><span style="font-weight:bold;">Purpose</span>: Comparison statement.<br/>
<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_735' class=notranslate>
<span class="Statement">if-true</span> &lt;comparison&gt;
    &lt;any code&gt;
[
else-if &lt;comparison&gt;
    &lt;any code&gt;
] ...
[
else-if
    &lt;any code&gt;
]
<span class="Statement">end-if</span></pre>
<span id=rimstone_copied_735 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_735' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_735, code_735, rimstone_copied_735)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
if-true statement will evaluate a &lt;comparison&gt; and if true, it will execute &lt;any code&gt; that immediately follows; if false, it will evaluate the optional following &lt;comparison&gt; in else-if statement, and if true it will execute &lt;any code&gt; that immediately follows it; and so on; if none of the comparisons are true, then an optional &lt;any code&gt; following else-if statement will execute; regardless of which &lt;any code&gt; executes (or if any does), the execution will continue after end-if.<br/>
<br/>
There can be only one "else-if" statement without a condition, and it must be the last one. <br/>
<br/>
&lt;comparison&gt; is<br/>
<ul><li>For strings:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_736' class=notranslate>
&lt;string&gt; \
   (<span class="Identifier"> equal</span> |<span class="Identifier"> not-equal</span> | \
  <span class="Identifier"> lesser-than</span> |<span class="Identifier"> lesser-equal</span> | \
  <span class="Identifier"> greater-than</span> |<span class="Identifier"> greater-equal</span> | \
  <span class="Identifier"> contain</span> |<span class="Identifier"> not-contain</span> ) \
&lt;check string&gt; \
 [<span class="Identifier"> case-insensitive</span> ] [<span class="Statement"> length</span> &lt;length&gt; ]</pre>
<span id=rimstone_copied_736 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_736' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_736, code_736, rimstone_copied_736)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
If "equal", "not-equal", "lesser-than", "lesser-equal", "greater-than" or "greater-equal" clause is used, a comparison succeeds if &lt;string&gt; is equal, not equal, lesser, lesser or equal, greater or greater-or-equal than &lt;check string&gt;, respectively. <br/>
<br/>
If "contain" or "not-contain" clause is used, a comparison succeeds if &lt;string&gt; is contained or not contained in &lt;check string&gt;, respectively. <br/>
<br/>
If "case-insensitive" clause is used, a comparison is performed without case sensitivity; this option is meant for null-terminated strings, while for non-null terminated strings it produces an undefined result.<br/>
<br/>
If "length" clause is used, only the first &lt;length&gt; bytes of the strings are compared; this clause is not available for "contain" and "not-contain".<br/>
<br/>
</li><li>For numbers and doubles (&lt;value&gt; is a number of a double):<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_737' class=notranslate>
&lt;value&gt; \
   (<span class="Identifier"> equal</span> |<span class="Identifier"> not-equal</span> | \
  <span class="Identifier"> lesser-than</span> |<span class="Identifier"> lesser-equal</span> | \
  <span class="Identifier"> greater-than</span> |<span class="Identifier"> greater-equal</span> | \
  <span class="Identifier"> every</span> |<span class="Identifier"> not-every</span> ) \
&lt;check value&gt;  [<span class="Identifier"> error-margin</span> &lt;error margin&gt; ] ...</pre>
<span id=rimstone_copied_737 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_737' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_737, code_737, rimstone_copied_737)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
If "equal", "not-equal", "lesser-than", "lesser-equal", "greater-than" or "greater-equal" clause is used, a comparison succeeds if &lt;value&gt; is equal, not equal, lesser, lesser or equal, greater or greater-or-equal than &lt;check value&gt;, respectively.<br/>
<br/>
If "every" is used, then the comparison succeeds if the modulo of &lt;value&gt; and &lt;check value&gt; is 0 - this is useful in executing some code every N times but not the ones in between; with "not-every" the comparison success is this modulo is not 0 which is useful to execute code all the times except every Nth.<br/>
<br/>
"error-margin" is valid for "equal" or "not-equal" comparisions, and for double only. Since doubles may be difficult to compare for equality, you can specify the margin of error (i.e. 1E-7), so that comparisions succeed if the difference between two doubles is lesser than this value. For instance, to limit double comparison to two decimals, "error-margin" should be 1e-2. Unless you have a reason not to use "error-margin" when comparing doubles (such as if they are rounded, or if you know how they are calculated and thus what the internal representation would be), you should always use it.<br/>
<br/>
</li><li>For booleans:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_738' class=notranslate>
&lt;boolean&gt; (<span class="Identifier"> equal</span> |<span class="Identifier"> not-equal</span> ) &lt;check boolean&gt;  ...</pre>
<span id=rimstone_copied_738 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_738' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_738, code_738, rimstone_copied_738)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
</li></ul>
If "equal" or "not-equal" clause is used, a comparison succeeds if &lt;boolean&gt; is equal or not equal than &lt;check boolean&gt;, respectively. <br/>
<div class="vsub"><a id="Multiple comparisons"></a>Multiple comparisons</div>
For convenience, multiple &lt;comparisons&gt; can be connected by either "and" or "or" clause, but not both in the same &lt;condition&gt; (in order to keep comparisons readable; see <a href='/boolean-expressions.html'>boolean-expressions</a> for constructing more involved boolean expressions). "and" clause uses logical AND to connect &lt;comparisons&gt; and it succeeds if all &lt;comparison&gt;s succeed. "or" clause uses logical OR to connect &lt;comparisons&gt; and it succeeds if at least one &lt;comparison&gt;s succeeds (if such a &lt;comparison&gt; is found, the following ones are not checked). <br/>
<div class="vsub"><a id="Nesting"></a>Nesting</div>
if-true can be nested, which can be up to 30 levels deep.<br/>
<div class="vsub"><a id="Examples"></a>Examples</div>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_739' class=notranslate>
<span class="Statement">%%</span> /if-test<span class="Identifier"> public</span>
<span class="Statement">    get-param</span> inp
<span class="Statement">    if-true</span> inp<span class="Identifier"> equal</span> <span class="Constant">&quot;1&quot;</span>
<span class="Statement">        @</span>Found &quot;<span class="Constant">1</span>&quot; in input
<span class="Statement">    else-if</span> inp<span class="Identifier"> equal</span> <span class="Constant">&quot;2&quot;</span> <span class="Identifier"> or</span> inp<span class="Identifier"> equal</span> <span class="Constant">&quot;3&quot;</span>
<span class="Statement">        @</span>Found &quot;<span class="Constant">2</span>&quot; or &quot;<span class="Constant">3</span>&quot; in input
<span class="Statement">        get-param</span> inp_num
<span class="Statement">        string-number</span> inp_num<span class="Type"> to</span> n
<span class="Statement">        if-true</span> n<span class="Identifier"> equal</span> <span class="Constant">4</span>
<span class="Statement">            @</span>Found <span class="Constant">4</span> in more input
<span class="Statement">        else-if</span> n<span class="Identifier"> equal</span> <span class="Constant">5</span> <span class="Identifier"> and</span>  inp<span class="Identifier"> equal</span> <span class="Constant">&quot;4&quot;</span>
<span class="Statement">            @</span>Found <span class="Constant">5</span> in more input and &quot;<span class="Constant">4</span>&quot; in input
<span class="Statement">        else-if</span>
<span class="Statement">            @</span>Something else
<span class="Statement">        end-if</span>
<span class="Statement">    else-if</span>
<span class="Statement">        @</span>Found something else
<span class="Statement">    end-if</span>
<span class="Statement">%%</span></pre>
<span id=rimstone_copied_739 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_739' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_739, code_739, rimstone_copied_739)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
&lt;string&gt;, &lt;number&gt; and &lt;boolean&gt; can be expressions, for instance:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_740' class=notranslate>
<span class="Statement">set-string</span> str1=<span class="Constant">&quot;one&quot;</span>
<span class="Statement">set-string</span> str2=<span class="Constant">&quot;two&quot;</span>
<span class="Statement">if-true</span> str1+<span class="Constant">&quot; &quot;</span>+str2<span class="Identifier"> not-equal</span> <span class="Constant">&quot;one two&quot;</span>
<span class="Statement">    @</span>It can't be true!
<span class="Statement">end-if</span>
<span class="Statement">.</span>..
<span class="Statement">set-bool</span> b1 = str1<span class="Identifier"> not-equal</span> <span class="Constant">&quot;one&quot;</span>
<span class="Statement">set-bool</span> b2 = str2<span class="Identifier"> equal</span> <span class="Constant">&quot;two&quot;</span>
<span class="Statement">if-true</span> b1 &amp;&amp; b2<span class="Identifier"> equal</span> <span class="Constant">false</span>
<span class="Statement">    @</span>It is true!
<span class="Statement">end-if</span>
<span class="Statement">.</span>..
<span class="Statement">set-number</span> n1 = <span class="Constant">20</span>
<span class="Statement">if-true</span> n1+<span class="Constant">10</span><span class="Identifier"> equal</span> <span class="Constant">30</span><span class="Identifier"> and</span> !b1<span class="Identifier"> equal</span> <span class="Constant">true</span><span class="Identifier"> and</span> str1<span class="Identifier"> equal</span> <span class="Constant">&quot;one&quot;</span>
<span class="Statement">    @</span>It is true!
<span class="Statement">end-if</span></pre>
<span id=rimstone_copied_740 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_740' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_740, code_740, rimstone_copied_740)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Check two doubles for equality with a margin of error - in this case they are considered equal as the margin of error is greater than the difference:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_741' class=notranslate>
<span class="Statement">set-double</span> d = <span class="Constant">62009</span><span class="Constant">.755529200672754</span>
<span class="Statement">if-true</span> dl<span class="Identifier"> equal</span> <span class="Constant">62009</span><span class="Constant">.755529</span><span class="Identifier"> error-margin</span> <span class="Constant">1</span>E-<span class="Constant">4</span>
<span class="Statement">    @</span>The doubles are equal
<span class="Statement">end-if</span></pre>
<span id=rimstone_copied_741 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_741' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_741, code_741, rimstone_copied_741)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<div class="vsub"><a id="See also"></a>See also</div>
 <a name='Program flow'></a><span style="font-weight:bold;">Program flow</span><br/>
<a href='/break-loop.html'>break-loop</a> &nbsp;<br/>
<a href='/call-handler.html'>call-handler</a> &nbsp;<br/>
<a href='/code-blocks.html'>code-blocks</a> &nbsp;<br/>
<a href='/continue-loop.html'>continue-loop</a> &nbsp;<br/>
<a href='/do-once.html'>do-once</a> &nbsp;<br/>
<a href='/exit-handler.html'>exit-handler</a> &nbsp;<br/>
<a href='/if-defined.html'>if-defined</a> &nbsp;<br/>
<a href='/if-true.html'>if-true</a> &nbsp;<br/>
<a href='/quit-process.html'>quit-process</a> &nbsp;<br/>
<a href='/return-handler.html'>return-handler</a> &nbsp;<br/>
<a href='/start-loop.html'>start-loop</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='/documentation.html'>documentation</a><br/>
<a id='inline-code.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:left;background-color:white;'><a href='https://rimstone-lang.com' style='border-bottom:0px'><img src='https://rimstone-lang.com/rimstone.png' style='width:180px;height:auto'/></a></div><div class='vhub' style='margin-top:10px;'>Inline code</div><hr/><span style="font-weight:bold;">Purpose</span>: Inline RimStone code in an output statement.<br/>
<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_742' class=notranslate>
&lt;&lt;RimStone code&gt;&gt;</pre>
<span id=rimstone_copied_742 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_742' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_742, code_742, rimstone_copied_742)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
You can write RimStone statements within an <a href='/output-statement.html'>output-statement</a> by using them between &lt;&lt; and &gt;&gt; delimiters. <br/>
<br/>
The following statements can be inlined: <a href='/print-out.html'>print-out</a>,<a href='/print-format.html'>print-format</a>, <a href='/current-row.html'>current-row</a>, <a href='/number-string.html'>number-string</a>, <a href='/string-length.html'>string-length</a>, <a href='/call-handler.html'>call-handler</a>.<br/>
<div class="vsub"><a id="Examples"></a>Examples</div>
<a href='/print-out.html'>print-out</a> statement displays a string, and in the following code it's used to display a result within an <a href='/output-statement.html'>output-statement</a> (i.e. within "@" statement):<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_743' class=notranslate>
<span class="Statement">run-query</span> =<span class="Constant">&quot;select firstName, lastName from people&quot;</span><span class="Type"> output</span> firstName, lastName
<span class="Statement">   @</span>&lt;tr&gt;
<span class="Statement">   @</span>    &lt;td&gt;
<span class="Statement">   @</span>        First name is <span class="Statement">&lt;&lt;print-out</span>  firstName<span class="Statement">&gt;&gt;</span>
<span class="Statement">   @</span>    &lt;/td&gt;
<span class="Statement">   @</span>    &lt;td&gt;
<span class="Statement">   @</span>        Last name is <span class="Statement">&lt;&lt;print-out</span> lastName<span class="Statement">&gt;&gt;</span>
<span class="Statement">   @</span>    &lt;/td&gt;
<span class="Statement">   @</span>&lt;/tr&gt;
<span class="Statement">end-query</span></pre>
<span id=rimstone_copied_743 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_743' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_743, code_743, rimstone_copied_743)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
In the code below, "some_req" is a request handler that outputs some text, and it's used inline to output "Hello world":<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_744' class=notranslate>
<span class="Statement">@</span>Hello <span class="Statement">&lt;&lt;call-handler</span> <span class="Constant">&quot;/some-req&quot;</span><span class="Statement">&gt;&gt;</span></pre>
<span id=rimstone_copied_744 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_744' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_744, code_744, rimstone_copied_744)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<a href='/call-handler.html'>call-handler</a> "some-req" would simply output "world":<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_745' class=notranslate>
<span class="Statement">%%</span> /some-req<span class="Identifier"> public</span>
<span class="Statement">    @</span>world
<span class="Statement">%%</span></pre>
<span id=rimstone_copied_745 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_745' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_745, code_745, rimstone_copied_745)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
A <a href='/write-string.html'>write-string</a> is typically used with output statements; in this case we print the value of another string, resulting in "There is 42 minutes left!":<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_746' class=notranslate>
<span class="Statement">set-string</span> mins=<span class="Constant">&quot;42&quot;</span>
<span class="Statement">((</span> my_string
<span class="Statement">@</span>There is <span class="Statement">&lt;&lt;print-out</span> mins<span class="Statement">&gt;&gt;</span> minutes left!
<span class="Statement">))</span></pre>
<span id=rimstone_copied_746 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_746' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_746, code_746, rimstone_copied_746)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<div class="vsub"><a id="See also"></a>See also</div>
 <a name='Language'></a><span style="font-weight:bold;">Language</span><br/>
<a href='/inline-code.html'>inline-code</a> &nbsp;<br/>
<a href='/statements.html'>statements</a> &nbsp;<br/>
<a href='/syntax-highlighting.html'>syntax-highlighting</a> &nbsp;<br/>
<a href='/unused-var.html'>unused-var</a> &nbsp;<br/>
<a href='/variable-scope.html'>variable-scope</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='/documentation.html'>documentation</a><br/>
<a id='input-output-parameters.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:left;background-color:white;'><a href='https://rimstone-lang.com' style='border-bottom:0px'><img src='https://rimstone-lang.com/rimstone.png' style='width:180px;height:auto'/></a></div><div class='vhub' style='margin-top:10px;'>Input output parameters</div><hr/><div class="vsub"><a id="Input and output parameters to request handlers"></a>Input and output parameters to request handlers</div>
Parameters are name/value pairs that are global in scope within a request. The value can be set directly, and obtained in a local variable. The parameters serve a purpose of sharing data between different parts of a request implementation, including as input and output parameters to handlers. Each parameter can be both an input and output parameter.<br/>
<br/>
<a href='/get-param.html'>get-param</a> (either as a standalone statement or as a clause in <a href='/call-handler.html'>call-handler</a> and <a href='/begin-handler.html'>begin-handler</a>) can be used to get <br/>
<ul><li>handler's input parameters into its local variables, and <br/>
</li><li>handler's output parameters into caller's local variables.</li></ul>
Similarly, <a href='/set-param.html'>set-param</a> (either as a standalone statement or as a clause in <a href='/call-handler.html'>call-handler</a>) can be used to set<br/>
<ul><li>handler's input parameters in the caller, and<br/>
</li><li>handler's output parameters.</li></ul>
<div class="vsub"><a id="Global nature with local data"></a>Global nature with local data</div>
The parameters can serve as a functional equivalent of an "input/output parameter" notion. Note that parameters are of global scope within a single request; however, once obtained with "get-param" in a handler they are stored in local variables which makes them the same as a typical input parameter in many languages (see Types discussion in <a href='/get-param.html'>get-param</a> as to which types are copied by value and which by reference).<br/>
<br/>
The same parameter (i.e. of the same name) can be used in any number of handlers, assuming the type is the same everywhere. The global nature of parameters means their value can be obtained anywhere during the processing of the same request; their values are reset with each new request.<br/>
<div class="vsub"><a id="Seamless sharing of data"></a>Seamless sharing of data</div>
This approach makes the data sharing within a single request seamless. For instance, using some value several handler calls down no longer necessitates passing this value down via parameters; it can be simply used by name and delivered to a local variable and either changed without affecting the original or update the original. This approach uses the best of enapsulation and data sharing, with less code and more clarity.<br/>
<br/>
The reason for this is to both provide the same input/output parameter paradigm that's omnipresent in most programming languages, and at the same time to facilitate simpler and clearer sharing of data anywhere during the request processing (thus alleviating the need for classic global variables). In addition, it provides for the same treatment of input parameters regardless of whether a handler is called locally or remotely across servers.<br/>
<div class="vsub"><a id="Examples"></a>Examples</div>
In this example, "set-param" is used to set input parameters "pp1" and "pp2" in <a href='/call-handler.html'>call-handler</a>, and "get-param" is used to get those input parameters in begin-handler ("%%" for short). Conversely, "set-param" is used to set output parameters "res1" and "res2" in "/req/sub-req" handler implementation, and "get-param" is used to get the those output parameters in <a href='/call-handler.html'>call-handler</a>:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_747' class=notranslate>
<span class="Statement">%%</span> /req/sub-req<span class="Identifier"> get-param</span> pp1<span class="Identifier"> type number</span>, pp2<span class="Identifier"> type number</span>
<span class="Statement">    print-out</span> <span class="Constant">&quot;Input is &quot;</span>, pp1, <span class="Constant">&quot;, &quot;</span>, pp2<span class="Identifier"> new-line</span>
<span class="Statement">    set-param</span> res1=pp1+pp2, res2=pp1*pp2
<span class="Statement">%%</span>

<span class="Comment">// Call the above /req/sub-req request handler </span>
<span class="Statement">%%</span> /req<span class="Identifier"> public</span>
<span class="Statement">    call-handler</span> <span class="Constant">&quot;/req/sub-req&quot;</span><span class="Identifier"> set-param</span> pp1=<span class="Constant">10</span>, pp2=<span class="Constant">20</span><span class="Identifier"> get-param</span> res1<span class="Identifier"> type number</span>, res2<span class="Identifier"> type number</span>
<span class="Statement">    print-out</span> <span class="Constant">&quot;Result is &quot;</span>, res1, <span class="Constant">&quot; and &quot;</span>, res2<span class="Identifier"> new-line</span>
<span class="Statement">%%</span></pre>
<span id=rimstone_copied_747 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_747' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_747, code_747, rimstone_copied_747)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
The result in "/req" will be 30 for "res1" variable, and 200 for "res2".<br/>
<br/>
<span style="font-weight:bold;">- Getting and setting parameters anywhere</span><br/>
One of the advantages of parameters mentioned above, is the ability to use them anywhere, even when "skipping" encapsulation layers. For example, in this example, the main handler ("/req") is calling subhandler ("/req/sub-req"), which is calling sub-subhandler ("/req/sub/sub-req"), and the input and output parameters can be obtained and set in the sub-subhandler, completely bypassing the subhandler. This illustrates the semantics of parameters - they are not global variables but rather global parameters:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_748' class=notranslate>
<span class="Statement">%%</span> /req/sub/sub-req<span class="Identifier"> get-param</span> pp1<span class="Identifier"> type number</span>, pp2<span class="Identifier"> type number</span>
<span class="Statement">    print-out</span> <span class="Constant">&quot;Input is &quot;</span>, pp1, <span class="Constant">&quot;, &quot;</span>, pp2<span class="Identifier"> new-line</span>
<span class="Statement">    set-param</span> res1=pp1+pp2, res2=pp1*pp2
<span class="Statement">%%</span>

<span class="Statement">%%</span> /req/sub-req
<span class="Statement">    call-handler</span> <span class="Constant">&quot;/req/sub/sub-req&quot;</span>
<span class="Statement">%%</span>

<span class="Comment">// Call the above /req/sub-req request handler</span>
<span class="Statement">%%</span> /req<span class="Identifier"> public</span>
<span class="Statement">    call-handler</span> <span class="Constant">&quot;/req/sub-req&quot;</span><span class="Identifier"> set-param</span> pp1=<span class="Constant">10</span>, pp2=<span class="Constant">20</span><span class="Identifier"> get-param</span> res1<span class="Identifier"> type number</span>, res2<span class="Identifier"> type number</span>
<span class="Statement">    print-out</span> <span class="Constant">&quot;Result is &quot;</span>, res1, <span class="Constant">&quot; and &quot;</span>, res2<span class="Identifier"> new-line</span>
<span class="Statement">%%</span></pre>
<span id=rimstone_copied_748 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_748' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_748, code_748, rimstone_copied_748)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<div class="vsub"><a id="See also"></a>See also</div>
 <a name='Request data'></a><span style="font-weight:bold;">Request data</span><br/>
<a href='/get-param.html'>get-param</a> &nbsp;<br/>
<a href='/input-output-parameters.html'>input-output-parameters</a> &nbsp;<br/>
<a href='/request-body.html'>request-body</a> &nbsp;<br/>
<a href='/set-param.html'>set-param</a> &nbsp; <br/>
 <a name='Service processing'></a><span style="font-weight:bold;">Service processing</span><br/>
<a href='/after-handler.html'>after-handler</a> &nbsp;<br/>
<a href='/before-handler.html'>before-handler</a> &nbsp;<br/>
<a href='/begin-handler.html'>begin-handler</a> &nbsp;<br/>
<a href='/call-handler.html'>call-handler</a> &nbsp;<br/>
<a href='/input-output-parameters.html'>input-output-parameters</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='/documentation.html'>documentation</a><br/>
<a id='install-package.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:left;background-color:white;'><a href='https://rimstone-lang.com' style='border-bottom:0px'><img src='https://rimstone-lang.com/rimstone.png' style='width:180px;height:auto'/></a></div><div class='vhub' style='margin-top:10px;'>Install package</div><hr/><div class="vsub"><a id="RimStone package"></a>RimStone package</div>
You can install RimStone source code from a RimStone package, available for popular Linux distributions. These packages contain source code only. Once a package is installed, you still need to <a href='/install-rimstone.html'>install RimStone</a> from the source code provided by the package.<br/>
<br/>
Why use a package? For one, if you have multiple developers working on the same machine, they can use the same RimStone source code provided by the RimStone package, and the version control is easier. And secondly, a RimStone package will install all the RimStone's base and toolkit dependencies (such as database drivers, XML library, make sure gcc/make are installed etc).<br/>
<br/>
Since the packages do not contain any binaries, they can be installed on a wide variety of versions (for any given distro), and even on distros not mentioned here (such as on derived ones). Note that only the latest versions are actually tested with each release, so whether a package would work with a particular distro and version you're using is a matter of trying it out. Here are the packages available (all available can be found <a href='https://github.com/rimstone/rimstone/releases'>here</a>). Download the package and then install it:<br/>
<ul><li><span style="font-weight:bold;">Debian and similar</span><br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_749' class=notranslate>
wget <span class="Statement">&quot;</span><span class="Constant"><a href="https://github.com/rimstone/rimstone/releases/latest/download/rimstone_main_deb_any.deb">https://github.com/rimstone/rimstone/releases/latest/download/rimstone_main_deb_any.deb</a></span><span class="Statement">&quot;</span> <span class="Special">-O</span> rimstone_main_deb_any.deb
sudo apt install ./rimstone_main_deb_any.deb</pre>
<span id=rimstone_copied_749 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_749' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_749, code_749, rimstone_copied_749)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
</li><li><span style="font-weight:bold;">Ubuntu and similar</span><br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_750' class=notranslate>
wget <span class="Statement">&quot;</span><span class="Constant"><a href="https://github.com/rimstone/rimstone/releases/latest/download/rimstone_main_ubuntu_any.deb">https://github.com/rimstone/rimstone/releases/latest/download/rimstone_main_ubuntu_any.deb</a></span><span class="Statement">&quot;</span> <span class="Special">-O</span> rimstone_main_ubuntu_any.deb
sudo apt install ./rimstone_main_ubuntu_any.deb</pre>
<span id=rimstone_copied_750 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_750' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_750, code_750, rimstone_copied_750)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
</li><li><span style="font-weight:bold;">Fedora and similar</span><br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_751' class=notranslate>
wget <span class="Statement">&quot;</span><span class="Constant"><a href="https://github.com/rimstone/rimstone/releases/latest/download/rimstone-main-fc.noarch.rpm">https://github.com/rimstone/rimstone/releases/latest/download/rimstone-main-fc.noarch.rpm</a></span><span class="Statement">&quot;</span> <span class="Special">-O</span> rimstone-main-fc.noarch.rpm
sudo dnf install ./rimstone-main-fc.noarch.rpm</pre>
<span id=rimstone_copied_751 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_751' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_751, code_751, rimstone_copied_751)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
</li><li><span style="font-weight:bold;">Redhat and similar</span><br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_752' class=notranslate>
wget <span class="Statement">&quot;</span><span class="Constant"><a href="https://github.com/rimstone/rimstone/releases/latest/download/rimstone-main-redhat.noarch.rpm">https://github.com/rimstone/rimstone/releases/latest/download/rimstone-main-redhat.noarch.rpm</a></span><span class="Statement">&quot;</span> <span class="Special">-O</span> rimstone-main-redhat.noarch.rpm
sudo dnf install ./rimstone-main-redhat.noarch.rpm</pre>
<span id=rimstone_copied_752 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_752' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_752, code_752, rimstone_copied_752)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
</li><li><span style="font-weight:bold;">OpenSUSE and similar</span><br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_753' class=notranslate>
wget <span class="Statement">&quot;</span><span class="Constant"><a href="https://github.com/rimstone/rimstone/releases/latest/download/rimstone-main-opensuse.noarch.rpm">https://github.com/rimstone/rimstone/releases/latest/download/rimstone-main-opensuse.noarch.rpm</a></span><span class="Statement">&quot;</span> <span class="Special">-O</span> rimstone-main-opensuse.noarch.rpm
sudo zypper <span class="Special">--no-gpg-checks</span> install ./rimstone-main-opensuse.noarch.rpm</pre>
<span id=rimstone_copied_753 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_753' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_753, code_753, rimstone_copied_753)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
</li><li><span style="font-weight:bold;">Arch Linux and similar</span><br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_754' class=notranslate>
wget <span class="Statement">&quot;</span><span class="Constant"><a href="https://github.com/rimstone/rimstone/releases/latest/download/rimstone-main-arch-any.pkg.tar.zst">https://github.com/rimstone/rimstone/releases/latest/download/rimstone-main-arch-any.pkg.tar.zst</a></span><span class="Statement">&quot;</span> <span class="Special">-O</span> rimstone-main-arch-any.pkg.tar.zst
sudo pacman <span class="Special">-U</span> ./rimstone-main-arch-any.pkg.tar.zst</pre>
<span id=rimstone_copied_754 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_754' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_754, code_754, rimstone_copied_754)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
</li></ul>
<div class="vsub"><a id="Building packages"></a>Building packages</div>
If you are a packaging developer, the following can be used to build a RimStone package. All of these use <a href='https://github.com/rimstone/rimstone/releases/latest/download/rimstone_4.3.1.orig.tar.gz'>rimstone_4.3.1.orig.tar.gz</a> source archive; the naming convention is obviously for Debian, but all other packages have been made to conform for simplicity.<br/>
<span style="font-weight:bold;">- apt packaging</span><br/>
"debian" folder containing package build files (control, copyright, rules etc.) is <a href='https://github.com/rimstone/rimstone/releases/latest/download/debian.tar.gz'>here</a>.<br/>
<span style="font-weight:bold;">- rpm packaging</span><br/>
"rimstone.spec" file used to build an rpm package is <a href='https://github.com/rimstone/rimstone/releases/latest/download/rimstone.spec'>here</a>.<br/>
<span style="font-weight:bold;">- pacman packaging</span><br/>
"PKGBUILD" file used to build a pacman package is <a href='https://github.com/rimstone/rimstone/releases/latest/download/PKGBUILD'>here</a>.<br/>
<div class="vsub"><a id="See also"></a>See also</div>
 <a name='Install rimstone'></a><span style="font-weight:bold;">Install rimstone</span><br/>
<a href='/install-package.html'>install-package</a> &nbsp;<br/>
<a href='/install-rimstone.html'>install-rimstone</a> &nbsp;<br/>
<a href='/uninstall.html'>uninstall</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='/documentation.html'>documentation</a><br/>
<a id='install-rimstone.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:left;background-color:white;'><a href='https://rimstone-lang.com' style='border-bottom:0px'><img src='https://rimstone-lang.com/rimstone.png' style='width:180px;height:auto'/></a></div><div class='vhub' style='margin-top:10px;'>Install rimstone</div><hr/><div class="vsub"><a id="How to install RimStone"></a>How to install RimStone</div>
There are three ways to install RimStone, pick one that works for you:<br/>
<ul><li>From a zipped file (.tar.gz):<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_755' class=notranslate>
wget <span class="Statement">&quot;</span><span class="Constant"><a href="https://github.com/rimstone/rimstone/archive/refs/heads/main.tar.gz">https://github.com/rimstone/rimstone/archive/refs/heads/main.tar.gz</a></span><span class="Statement">&quot;</span> <span class="Special">-O</span> main.tar.gz
tar xvfz main.tar.gz
<span class="Statement">cd</span> rimstone-main
./riminst.sh
<span class="Statement">. </span><span class="PreProc">$HOME</span>/.bashrc</pre>
<span id=rimstone_copied_755 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_755' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_755, code_755, rimstone_copied_755)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
</li>
<li>If you use git, from its official GitHub repo (depth is 1 for performance and to save space):<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_756' class=notranslate>
git clone <span class="Special">--depth</span> <span class="Constant">1</span> <a href="https://github.com/rimstone/rimstone.git">https://github.com/rimstone/rimstone.git</a>
<span class="Statement">cd</span> rimstone
./riminst.sh
<span class="Statement">. </span><span class="PreProc">$HOME</span>/.bashrc</pre>
<span id=rimstone_copied_756 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_756' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_756, code_756, rimstone_copied_756)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
</li><li>If there's a RimStone package installed on your system, from a package. First, <a href='/install-package.html'>install-package</a>, then:<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_757' class=notranslate>
<span class="Statement">cp</span> /usr/share/rimstone/rimstone.tar.gz .
tar xvfz rimstone.tar.gz
<span class="Statement">cd</span> rimstone
./riminst.sh
<span class="Statement">. </span><span class="PreProc">$HOME</span>/.bashrc</pre>
<span id=rimstone_copied_757 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_757' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_757, code_757, rimstone_copied_757)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
</li>
</ul>
Note that $HOME/.bashrc is run at the end so you can use RimStone in the current session without re-logging.<br/>
<div class="vsub"><a id="Notes about installation"></a>Notes about installation</div>
<span style="font-weight:bold;">- Permissions and install script</span><br/>
RimStone is installed in a home directory (either in a separate user account or in your own home directory). Minimum permissions (required and set by the installation) for home directory are 711 (allowing access to specific sockets but no read, write or directory listing permissions). <br/>
<br/>
<span style="font-weight:bold;">- sudo privilege</span><br/>
RimStone itself does not require sudo as it installs in a local ".rimstone" folder. You may however need sudo privilege to install standard Open Source toolkit libraries (such as MariaDB, SQLite, PostgreSQL, XML, Regex, Curl, OpenSSL etc), base libraries (such as gcc, make etc.; and only if not installed already, which they usually are), or SELinux support (if you use it). They are system-wide by nature and require sudo.<br/>
<br/>
<span style="font-weight:bold;">- Installing toolkit libraries</span><br/>
The default installation (above) will ask you if you'd like to install the above toolkit packages, You can install them if and when you need them, or you can install them now; you will need sudo privilege to do that. If you'd like to install all base and toolkit packages automatically now, then use the following (instead of just ./riminst.sh above):<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_758' class=notranslate>
./riminst.sh all</pre>
<span id=rimstone_copied_758 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_758' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_758, code_758, rimstone_copied_758)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<br/>
<span style="font-weight:bold;">- SELinux</span><br/>
If you have SELinux enabled then you'll need to install SELinux support for RimStone. This requires sudo privilege because it involves setting Operating System permissions for RimStone. This will be done automatically during the installation.<br/>
<br/>
If you don't want or need SELinux support, you can set permissive mode before installing RimStone with:<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_759' class=notranslate>
sudo setenforce <span class="Constant">0</span></pre>
<span id=rimstone_copied_759 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_759' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_759, code_759, rimstone_copied_759)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
in which case you won't need to install SELinux support.<br/>
<br/>
<span style="font-weight:bold;">- Upgrading/downgrading RimStone</span><br/>
To either upgrade or downgrade RimStone, first <a href='/uninstall.html'>uninstall</a> and then install (see above). Look for release notes for any given version at RimStone <a href='/blog.html'>blog</a> for more information about any changes that may affect your RimStone application(s).<br/>
<br/>
<span style="font-weight:bold;">- Uninstall RimStone</span><br/>
Here's how to <a href='/uninstall.html'>uninstall</a>.<br/>
<div class="vsub"><a id="Try RimStone"></a>Try RimStone</div>
Go to <a href='/123-hello-world.html'>123-hello-world</a> for your Hello World.<br/>
<div class="vsub"><a id="See also"></a>See also</div>
 <a name='Install rimstone'></a><span style="font-weight:bold;">Install rimstone</span><br/>
<a href='/install-package.html'>install-package</a> &nbsp;<br/>
<a href='/install-rimstone.html'>install-rimstone</a> &nbsp;<br/>
<a href='/uninstall.html'>uninstall</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='/documentation.html'>documentation</a><br/>
<a id='isinf.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:left;background-color:white;'><a href='https://rimstone-lang.com' style='border-bottom:0px'><img src='https://rimstone-lang.com/rimstone.png' style='width:180px;height:auto'/></a></div><div class='vhub' style='margin-top:10px;'>Isinf</div><hr/><span style="font-weight:bold;">Purpose</span>: Test for infinity.<br/>
<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_760' class=notranslate>
isinf( &lt;var&gt; )</pre>
<span id=rimstone_copied_760 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_760' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_760, code_760, rimstone_copied_760)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
isinf returns 1 if &lt;var&gt; is positive infinity and -1 if negative infinity, where &lt;var&gt; is a double.<br/>
<div class="vsub"><a id="Examples"></a>Examples</div>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_761' class=notranslate>
<span class="Statement">set-double</span> d = isinf(<span class="Constant">100</span>) + <span class="Constant">1</span></pre>
<span id=rimstone_copied_761 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_761' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_761, code_761, rimstone_copied_761)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<div class="vsub"><a id="See also"></a>See also</div>
 <a name='Math functions'></a><span style="font-weight:bold;">Math functions</span><br/>
<a href='/abd.html'>abd</a> &nbsp;<br/>
<a href='/abn.html'>abn</a> &nbsp;<br/>
<a href='/acos.html'>acos</a> &nbsp;<br/>
<a href='/acosh.html'>acosh</a> &nbsp;<br/>
<a href='/asin.html'>asin</a> &nbsp;<br/>
<a href='/asinh.html'>asinh</a> &nbsp;<br/>
<a href='/atan.html'>atan</a> &nbsp;<br/>
<a href='/atan2.html'>atan2</a> &nbsp;<br/>
<a href='/atanh.html'>atanh</a> &nbsp;<br/>
<a href='/cbrt.html'>cbrt</a> &nbsp;<br/>
<a href='/ceil.html'>ceil</a> &nbsp;<br/>
<a href='/copysign.html'>copysign</a> &nbsp;<br/>
<a href='/cos.html'>cos</a> &nbsp;<br/>
<a href='/cosh.html'>cosh</a> &nbsp;<br/>
<a href='/dbl.html'>dbl</a> &nbsp;<br/>
<a href='/erf.html'>erf</a> &nbsp;<br/>
<a href='/erfc.html'>erfc</a> &nbsp;<br/>
<a href='/exp.html'>exp</a> &nbsp;<br/>
<a href='/exp2.html'>exp2</a> &nbsp;<br/>
<a href='/floor.html'>floor</a> &nbsp;<br/>
<a href='/fmod.html'>fmod</a> &nbsp;<br/>
<a href='/hypot.html'>hypot</a> &nbsp;<br/>
<a href='/isinf.html'>isinf</a> &nbsp;<br/>
<a href='/isnan.html'>isnan</a> &nbsp;<br/>
<a href='/ldexp.html'>ldexp</a> &nbsp;<br/>
<a href='/lgamma.html'>lgamma</a> &nbsp;<br/>
<a href='/log.html'>log</a> &nbsp;<br/>
<a href='/log10.html'>log10</a> &nbsp;<br/>
<a href='/log2.html'>log2</a> &nbsp;<br/>
<a href='/math-functions.html'>math-functions</a> &nbsp;<br/>
<a href='/nextafter.html'>nextafter</a> &nbsp;<br/>
<a href='/num.html'>num</a> &nbsp;<br/>
<a href='/pow.html'>pow</a> &nbsp;<br/>
<a href='/round.html'>round</a> &nbsp;<br/>
<a href='/sin.html'>sin</a> &nbsp;<br/>
<a href='/sinh.html'>sinh</a> &nbsp;<br/>
<a href='/sqrt.html'>sqrt</a> &nbsp;<br/>
<a href='/tan.html'>tan</a> &nbsp;<br/>
<a href='/tanh.html'>tanh</a> &nbsp;<br/>
<a href='/trunc.html'>trunc</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='/documentation.html'>documentation</a><br/>
<a id='isnan.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:left;background-color:white;'><a href='https://rimstone-lang.com' style='border-bottom:0px'><img src='https://rimstone-lang.com/rimstone.png' style='width:180px;height:auto'/></a></div><div class='vhub' style='margin-top:10px;'>Isnan</div><hr/><span style="font-weight:bold;">Purpose</span>: isnan<br/>
<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_762' class=notranslate>
isnan( &lt;var&gt; )</pre>
<span id=rimstone_copied_762 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_762' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_762, code_762, rimstone_copied_762)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
isnan returns non-zero if double &lt;var&gt; is NAN (Not A Number).<br/>
<div class="vsub"><a id="Examples"></a>Examples</div>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_763' class=notranslate>
<span class="Statement">set-double</span> d = isnan(<span class="Constant">10</span>) + <span class="Constant">1</span></pre>
<span id=rimstone_copied_763 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_763' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_763, code_763, rimstone_copied_763)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<div class="vsub"><a id="See also"></a>See also</div>
 <a name='Math functions'></a><span style="font-weight:bold;">Math functions</span><br/>
<a href='/abd.html'>abd</a> &nbsp;<br/>
<a href='/abn.html'>abn</a> &nbsp;<br/>
<a href='/acos.html'>acos</a> &nbsp;<br/>
<a href='/acosh.html'>acosh</a> &nbsp;<br/>
<a href='/asin.html'>asin</a> &nbsp;<br/>
<a href='/asinh.html'>asinh</a> &nbsp;<br/>
<a href='/atan.html'>atan</a> &nbsp;<br/>
<a href='/atan2.html'>atan2</a> &nbsp;<br/>
<a href='/atanh.html'>atanh</a> &nbsp;<br/>
<a href='/cbrt.html'>cbrt</a> &nbsp;<br/>
<a href='/ceil.html'>ceil</a> &nbsp;<br/>
<a href='/copysign.html'>copysign</a> &nbsp;<br/>
<a href='/cos.html'>cos</a> &nbsp;<br/>
<a href='/cosh.html'>cosh</a> &nbsp;<br/>
<a href='/dbl.html'>dbl</a> &nbsp;<br/>
<a href='/erf.html'>erf</a> &nbsp;<br/>
<a href='/erfc.html'>erfc</a> &nbsp;<br/>
<a href='/exp.html'>exp</a> &nbsp;<br/>
<a href='/exp2.html'>exp2</a> &nbsp;<br/>
<a href='/floor.html'>floor</a> &nbsp;<br/>
<a href='/fmod.html'>fmod</a> &nbsp;<br/>
<a href='/hypot.html'>hypot</a> &nbsp;<br/>
<a href='/isinf.html'>isinf</a> &nbsp;<br/>
<a href='/isnan.html'>isnan</a> &nbsp;<br/>
<a href='/ldexp.html'>ldexp</a> &nbsp;<br/>
<a href='/lgamma.html'>lgamma</a> &nbsp;<br/>
<a href='/log.html'>log</a> &nbsp;<br/>
<a href='/log10.html'>log10</a> &nbsp;<br/>
<a href='/log2.html'>log2</a> &nbsp;<br/>
<a href='/math-functions.html'>math-functions</a> &nbsp;<br/>
<a href='/nextafter.html'>nextafter</a> &nbsp;<br/>
<a href='/num.html'>num</a> &nbsp;<br/>
<a href='/pow.html'>pow</a> &nbsp;<br/>
<a href='/round.html'>round</a> &nbsp;<br/>
<a href='/sin.html'>sin</a> &nbsp;<br/>
<a href='/sinh.html'>sinh</a> &nbsp;<br/>
<a href='/sqrt.html'>sqrt</a> &nbsp;<br/>
<a href='/tan.html'>tan</a> &nbsp;<br/>
<a href='/tanh.html'>tanh</a> &nbsp;<br/>
<a href='/trunc.html'>trunc</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='/documentation.html'>documentation</a><br/>
<a id='json-doc.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:left;background-color:white;'><a href='https://rimstone-lang.com' style='border-bottom:0px'><img src='https://rimstone-lang.com/rimstone.png' style='width:180px;height:auto'/></a></div><div class='vhub' style='margin-top:10px;'>Json doc</div><hr/><span style="font-weight:bold;">Purpose</span>: Parse JSON text.<br/>
<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_765' class=notranslate>
<span class="Statement">json-doc</span> &lt;text&gt;<span class="Type"> to</span> &lt;json&gt; \
    [<span class="Type"> status</span> &lt;status&gt; ] [<span class="Identifier"> length</span> &lt;length&gt; ] [<span class="Identifier"> noencode</span> ] [<span class="Identifier"> no-enum</span> ] \
    [<span class="Type"> error-text</span> &lt;error text&gt; ] \
        [<span class="Type"> error-position</span> &lt;error position&gt; ] \
        [<span class="Type"> error-line</span> &lt;line&gt; ] \
        [<span class="Type"> error-char</span> &lt;<span class="Type">char</span>&gt; ]

<span class="Statement">json-doc</span> <span class="Identifier"> delete</span> &lt;json&gt;</pre>
<span id=rimstone_copied_765 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_765' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_765, code_765, rimstone_copied_765)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
json-doc will parse JSON &lt;text&gt; into &lt;json&gt; variable, which can be used with <a href='/read-json.html'>read-json</a> to get the data.<br/>
<br/>
The length of &lt;text&gt; may be specified with "length" clause in &lt;length&gt; variable, or if not, it will be the string length of &lt;text&gt;.<br/>
<br/>
The "status" clause specifies the return &lt;status&gt; number, which is RIM_OKAY if successful or RIM_ERR_JSON if there is an error. The number &lt;error position&gt; in "error-position" clause is the byte position in &lt;text&gt; where error was found (starting with "0"), in which case &lt;error text&gt; in "error-text" clause is the error message. You can also obtain the error's line number (with number &lt;line&gt; in clause "error-line") and the character position within that line (with number &lt;char&gt; in clause "error-char").<br/>
<br/>
"noencode" clause will not encode strings, i.e. convert from JSON Unicode strings to UTF, nor will it perform any validity checks on strings. This may be useful as a performance boost or to pass along strings unencoded, however in most cases it is not needed.<br/>
<br/>
"no-enum" clause will not include indexing of arrays in normalized names (with "[..]"), see <a href='/read-json.html'>read-json</a>. This is useful if you want to check the path of each data element, and not worry about counting them; this happens often when using JSON in a structured way to transfer arrays when data elements repeat in a predictable fashion. Parsing of JSON is also faster with "no-enum".<br/>
<br/>
The maximum depth of nested structures in JSON document (i.e. objects and arrays) is 32, and the maximum length of normalized leaf node name is 1024 (see <a href='/read-json.html'>read-json</a> for more on normalized names). There is no limit on document size.<br/>
<div class="vsub"><a id="Deleting"></a>Deleting</div>
To delete a JSON variable, use "delete" clause with the &lt;json&gt;. This will delete all memory associated with it, and the variable &lt;json&gt; itself.<br/>
<div class="vsub"><a id="Surrogate UTF8"></a>Surrogate UTF8</div>
JSON uses surrogate UTF8 pairs to represent the full 32-bit UTF characters. In general UTF8, a "\UXXXXXXXX" notation is used instead.<br/>
<div class="vsub"><a id="Examples"></a>Examples</div>
Parse the following JSON document and display all keys and values from it. You can use them as they come along, or store them into <a href='/new-hash.html'>new-hash</a> or <a href='/new-tree.html'>new-tree</a> for instance for searching of large documents. This also demonstrates usage of UTF8 characters (\uD834\uDD1E for a G Clef symbol):<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_766' class=notranslate>

<span class="Comment">// JSON to parse</span>
<span class="Statement">set-string</span> jd<span class="Identifier"> unquoted</span> = {<span class="Constant">&quot;menu&quot;</span>:\
    {<span class="Constant">&quot;id&quot;</span>: <span class="Constant">&quot;file&quot;</span>,\
    <span class="Constant">&quot;value&quot;</span>: <span class="Constant">23091</span>,\
    <span class="Constant">&quot;active&quot;</span>: <span class="Constant">false</span>,\
    <span class="Constant">&quot;popup&quot;</span>:\
        {<span class="Constant">&quot;menuitem&quot;</span>:\
            [{<span class="Constant">&quot;value&quot;</span>: <span class="Constant">&quot;New&quot;</span>, <span class="Constant">&quot;onclick&quot;</span>: <span class="Constant">&quot;CreateNewDoc with</span><span class="Special">\uD834\uDD1E</span><span class="Constant">music&quot;</span>},\
            {<span class="Constant">&quot;value&quot;</span>: <span class="Constant">&quot;Open&quot;</span>, <span class="Constant">&quot;onclick&quot;</span>: <span class="Constant">&quot;OpenDoc() with </span><span class="Special">\uD834\uDD1E\uD834\uDD1E</span><span class="Constant">, and with non-surrogate character </span><span class="Special">\u21d7</span><span class="Constant">&quot;</span>},\
            {<span class="Constant">&quot;value&quot;</span>: <span class="Constant">&quot;Close&quot;</span>, <span class="Constant">&quot;onclick&quot;</span>: <span class="Constant">&quot;</span><span class="Special">\uD834\uDD1E</span><span class="Constant">CloseDoc()&quot;</span>}\
            ]\
        }\
    }\
}

<span class="Comment">// Parse JSON</span>
<span class="Statement">json-doc</span> jd<span class="Type"> status</span> st<span class="Type"> error-text</span> et<span class="Type"> error-position</span> ep<span class="Type"> to</span> nj

<span class="Comment">// Check parsing okay, if not display error details</span>
<span class="Statement">if-true</span> st<span class="Identifier"> not-equal</span> RIM_OKAY
<span class="Statement">    @</span>Error [<span class="Statement">&lt;&lt;print-out</span> et<span class="Statement">&gt;&gt;</span>] at [<span class="Statement">&lt;&lt;print-out</span> ep<span class="Statement">&gt;&gt;</span>]
<span class="Statement">    exit-handler</span> -<span class="Constant">1</span>
<span class="Statement">end-if</span>

<span class="Comment">// Display all data elements in order from top to bottom</span>
<span class="Statement">start-loop</span>
<span class="Statement">    read-json</span> nj<span class="Type"> key</span> k<span class="Type"> value</span> v<span class="Type"> type</span> t<span class="Identifier"> next</span>
<span class="Statement">    if-true</span> t<span class="Identifier"> equal</span> RIM_JSON_TYPE_NONE
<span class="Statement">        break-loop</span>
<span class="Statement">    end-if</span>
<span class="Statement">    @</span>Key [<span class="Statement">&lt;&lt;print-out</span> k<span class="Statement">&gt;&gt;</span>]
<span class="Statement">    @</span>Value [<span class="Statement">&lt;&lt;print-out</span> v<span class="Statement">&gt;&gt;</span>]
<span class="Statement">    @</span>Type [<span class="Statement">&lt;&lt;print-out</span> t<span class="Statement">&gt;&gt;</span>]
<span class="Statement">    @</span>--------
<span class="Statement">end-loop</span>
<span class="Statement">@</span>

<span class="Comment">// Delete JSON document</span>
<span class="Statement">json-doc</span><span class="Identifier"> delete</span> nj</pre>
<span id=rimstone_copied_766 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_766' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_766, code_766, rimstone_copied_766)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
The output would be:<br/>
<div class='ncode' style='position:relative;padding-right:16px;'>
<pre id='code_764' class=notranslate>
Key [&quot;menu&quot;.&quot;id&quot;]
Value [file]
Type [0]
--------
Key [&quot;menu&quot;.&quot;value&quot;]
Value [23091]
Type [1]
--------
Key [&quot;menu&quot;.&quot;active&quot;]
Value [false]
Type [3]
--------
Key [&quot;menu&quot;.&quot;popup&quot;.&quot;menuitem&quot;[0].&quot;value&quot;]
Value [New]
Type [0]
--------
Key [&quot;menu&quot;.&quot;popup&quot;.&quot;menuitem&quot;[0].&quot;onclick&quot;]
Value [CreateNewDoc withmusic]
Type [0]
--------
Key [&quot;menu&quot;.&quot;popup&quot;.&quot;menuitem&quot;[1].&quot;value&quot;]
Value [Open]
Type [0]
--------
Key [&quot;menu&quot;.&quot;popup&quot;.&quot;menuitem&quot;[1].&quot;onclick&quot;]
Value [OpenDoc() with , and with non-surrogate character ]
Type [0]
--------
Key [&quot;menu&quot;.&quot;popup&quot;.&quot;menuitem&quot;[2].&quot;value&quot;]
Value [Close]
Type [0]
--------
Key [&quot;menu&quot;.&quot;popup&quot;.&quot;menuitem&quot;[2].&quot;onclick&quot;]
Value [CloseDoc()]
Type [0]
--------</pre>
<span id=rimstone_copied_764 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_764' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_764, code_764, rimstone_copied_764)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Note that if "no-enum" were used in json-doc, then all keys with arrays would not have "[..]", for instance the very last key above would be "menu"."popup"."menuitem"."onclick", i.e. there would be no indexing of arrays.<br/>
<div class="vsub"><a id="See also"></a>See also</div>
 <a name='JSON parsing'></a><span style="font-weight:bold;">JSON parsing</span><br/>
<a href='/json-doc.html'>json-doc</a> &nbsp;<br/>
<a href='/read-json.html'>read-json</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='/documentation.html'>documentation</a><br/>
<a id='ldexp.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:left;background-color:white;'><a href='https://rimstone-lang.com' style='border-bottom:0px'><img src='https://rimstone-lang.com/rimstone.png' style='width:180px;height:auto'/></a></div><div class='vhub' style='margin-top:10px;'>Ldexp</div><hr/><span style="font-weight:bold;">Purpose</span>: ldexp<br/>
<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_767' class=notranslate>
ldexp( &lt;var1&gt;, &lt;var2&gt; )</pre>
<span id=rimstone_copied_767 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_767' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_767, code_767, rimstone_copied_767)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
ldexp returns the multiplication of &lt;var1&gt; by 2 raised to the power of &lt;var2&gt;. &lt;var1&gt; is a double or a number, and &lt;var2&gt; is a number, and the result is a double.<br/>
<div class="vsub"><a id="Examples"></a>Examples</div>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_768' class=notranslate>
<span class="Statement">set-double</span> d = ldexp(<span class="Constant">3</span>, <span class="Constant">4</span>) + <span class="Constant">1</span></pre>
<span id=rimstone_copied_768 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_768' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_768, code_768, rimstone_copied_768)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<div class="vsub"><a id="See also"></a>See also</div>
 <a name='Math functions'></a><span style="font-weight:bold;">Math functions</span><br/>
<a href='/abd.html'>abd</a> &nbsp;<br/>
<a href='/abn.html'>abn</a> &nbsp;<br/>
<a href='/acos.html'>acos</a> &nbsp;<br/>
<a href='/acosh.html'>acosh</a> &nbsp;<br/>
<a href='/asin.html'>asin</a> &nbsp;<br/>
<a href='/asinh.html'>asinh</a> &nbsp;<br/>
<a href='/atan.html'>atan</a> &nbsp;<br/>
<a href='/atan2.html'>atan2</a> &nbsp;<br/>
<a href='/atanh.html'>atanh</a> &nbsp;<br/>
<a href='/cbrt.html'>cbrt</a> &nbsp;<br/>
<a href='/ceil.html'>ceil</a> &nbsp;<br/>
<a href='/copysign.html'>copysign</a> &nbsp;<br/>
<a href='/cos.html'>cos</a> &nbsp;<br/>
<a href='/cosh.html'>cosh</a> &nbsp;<br/>
<a href='/dbl.html'>dbl</a> &nbsp;<br/>
<a href='/erf.html'>erf</a> &nbsp;<br/>
<a href='/erfc.html'>erfc</a> &nbsp;<br/>
<a href='/exp.html'>exp</a> &nbsp;<br/>
<a href='/exp2.html'>exp2</a> &nbsp;<br/>
<a href='/floor.html'>floor</a> &nbsp;<br/>
<a href='/fmod.html'>fmod</a> &nbsp;<br/>
<a href='/hypot.html'>hypot</a> &nbsp;<br/>
<a href='/isinf.html'>isinf</a> &nbsp;<br/>
<a href='/isnan.html'>isnan</a> &nbsp;<br/>
<a href='/ldexp.html'>ldexp</a> &nbsp;<br/>
<a href='/lgamma.html'>lgamma</a> &nbsp;<br/>
<a href='/log.html'>log</a> &nbsp;<br/>
<a href='/log10.html'>log10</a> &nbsp;<br/>
<a href='/log2.html'>log2</a> &nbsp;<br/>
<a href='/math-functions.html'>math-functions</a> &nbsp;<br/>
<a href='/nextafter.html'>nextafter</a> &nbsp;<br/>
<a href='/num.html'>num</a> &nbsp;<br/>
<a href='/pow.html'>pow</a> &nbsp;<br/>
<a href='/round.html'>round</a> &nbsp;<br/>
<a href='/sin.html'>sin</a> &nbsp;<br/>
<a href='/sinh.html'>sinh</a> &nbsp;<br/>
<a href='/sqrt.html'>sqrt</a> &nbsp;<br/>
<a href='/tan.html'>tan</a> &nbsp;<br/>
<a href='/tanh.html'>tanh</a> &nbsp;<br/>
<a href='/trunc.html'>trunc</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='/documentation.html'>documentation</a><br/>
<a id='lgamma.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:left;background-color:white;'><a href='https://rimstone-lang.com' style='border-bottom:0px'><img src='https://rimstone-lang.com/rimstone.png' style='width:180px;height:auto'/></a></div><div class='vhub' style='margin-top:10px;'>Lgamma</div><hr/><span style="font-weight:bold;">Purpose</span>: Lgamma function.<br/>
<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_769' class=notranslate>
lgamma( &lt;var&gt; )</pre>
<span id=rimstone_copied_769 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_769' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_769, code_769, rimstone_copied_769)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
lgamma returns the natural logarithm of the absolute value of the gamma function, typically used in numerical analysis and statistics. &lt;var&gt; is a number or a double and the result is a double.<br/>
<div class="vsub"><a id="Examples"></a>Examples</div>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_770' class=notranslate>
<span class="Statement">set-double</span> d = lgamma(<span class="Constant">1</span>) + <span class="Constant">1</span></pre>
<span id=rimstone_copied_770 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_770' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_770, code_770, rimstone_copied_770)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<div class="vsub"><a id="See also"></a>See also</div>
 <a name='Math functions'></a><span style="font-weight:bold;">Math functions</span><br/>
<a href='/abd.html'>abd</a> &nbsp;<br/>
<a href='/abn.html'>abn</a> &nbsp;<br/>
<a href='/acos.html'>acos</a> &nbsp;<br/>
<a href='/acosh.html'>acosh</a> &nbsp;<br/>
<a href='/asin.html'>asin</a> &nbsp;<br/>
<a href='/asinh.html'>asinh</a> &nbsp;<br/>
<a href='/atan.html'>atan</a> &nbsp;<br/>
<a href='/atan2.html'>atan2</a> &nbsp;<br/>
<a href='/atanh.html'>atanh</a> &nbsp;<br/>
<a href='/cbrt.html'>cbrt</a> &nbsp;<br/>
<a href='/ceil.html'>ceil</a> &nbsp;<br/>
<a href='/copysign.html'>copysign</a> &nbsp;<br/>
<a href='/cos.html'>cos</a> &nbsp;<br/>
<a href='/cosh.html'>cosh</a> &nbsp;<br/>
<a href='/dbl.html'>dbl</a> &nbsp;<br/>
<a href='/erf.html'>erf</a> &nbsp;<br/>
<a href='/erfc.html'>erfc</a> &nbsp;<br/>
<a href='/exp.html'>exp</a> &nbsp;<br/>
<a href='/exp2.html'>exp2</a> &nbsp;<br/>
<a href='/floor.html'>floor</a> &nbsp;<br/>
<a href='/fmod.html'>fmod</a> &nbsp;<br/>
<a href='/hypot.html'>hypot</a> &nbsp;<br/>
<a href='/isinf.html'>isinf</a> &nbsp;<br/>
<a href='/isnan.html'>isnan</a> &nbsp;<br/>
<a href='/ldexp.html'>ldexp</a> &nbsp;<br/>
<a href='/lgamma.html'>lgamma</a> &nbsp;<br/>
<a href='/log.html'>log</a> &nbsp;<br/>
<a href='/log10.html'>log10</a> &nbsp;<br/>
<a href='/log2.html'>log2</a> &nbsp;<br/>
<a href='/math-functions.html'>math-functions</a> &nbsp;<br/>
<a href='/nextafter.html'>nextafter</a> &nbsp;<br/>
<a href='/num.html'>num</a> &nbsp;<br/>
<a href='/pow.html'>pow</a> &nbsp;<br/>
<a href='/round.html'>round</a> &nbsp;<br/>
<a href='/sin.html'>sin</a> &nbsp;<br/>
<a href='/sinh.html'>sinh</a> &nbsp;<br/>
<a href='/sqrt.html'>sqrt</a> &nbsp;<br/>
<a href='/tan.html'>tan</a> &nbsp;<br/>
<a href='/tanh.html'>tanh</a> &nbsp;<br/>
<a href='/trunc.html'>trunc</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='/documentation.html'>documentation</a><br/>
<a id='lock-file.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:left;background-color:white;'><a href='https://rimstone-lang.com' style='border-bottom:0px'><img src='https://rimstone-lang.com/rimstone.png' style='width:180px;height:auto'/></a></div><div class='vhub' style='margin-top:10px;'>Lock file</div><hr/><span style="font-weight:bold;">Purpose</span>: Locks file exclusively.<br/>
<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_772' class=notranslate>
<span class="Statement">lock-file</span> &lt;file path&gt;<span class="Type"> id</span> &lt;lock id&gt; [<span class="Type"> status</span> &lt;status&gt; ]</pre>
<span id=rimstone_copied_772 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_772' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_772, code_772, rimstone_copied_772)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
lock-file attempts to create file with the full path of &lt;file path&gt; (deleting it if existed), and exclusively lock it. If successful, no other process can do the same unless current process ends or calls <a href='/unlock-file.html'>unlock-file</a>. This statement is non-blocking, thus you can check in a sleepy loop for success (see <a href='/pause-program.html'>pause-program</a>). <br/>
<br/>
&lt;file path&gt; should be either an existing or non-existing file with a valid file path. If existing, it will be deleted.<br/>
<br/>
&lt;lock id&gt; (in "id" clause) is a file descriptor associated with locked file. <br/>
<br/>
&lt;status&gt; (in "status" clause) represents the status of file locking: RIM_OKAY if successfully locked, RIM_ERR_FAILED if cannot lock (likely because another process holds a lock), RIM_ERR_INVALID if the path of the file is invalid (i.e. if it is empty), RIM_ERR_CREATE if lock file cannot be created. <br/>
<br/>
Generally, this statement is used for process control. A process would use lock-file to start working on a job that only one process can do at a time; once done, by using <a href='/unlock-file.html'>unlock-file</a> statement, another process will be able to issue a successful lock-file call. Typically, lock-file is issued in a sleepy loop (see <a href='/pause-program.html'>pause-program</a>), waiting for a resource to be released.<br/>
<br/>
Note that file lock is not carried across children processes (i.e. if your process creates children, such as with <a href='/exec-program.html'>exec-program</a>, then such children must obtain their own lock). In addition, if a process serving a request terminates before the request could issue <a href='/unlock-file.html'>unlock-file</a>, the lock will be automatically released.<br/>
<br/>
You can use any file name (likely choose a name that signifies the purpose of a lock, as long as you have permissions to create it), and create any number of them. This way you can create as many "binary semaphore"-like objects as you like.<br/>
<div class="vsub"><a id="Examples"></a>Examples</div>
In a new directory, create a file "lock.rim" with:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_775' class=notranslate>
cat &lt;&lt; '<span class="Constant">EOF</span>' &gt; lock.rim
<span class="Statement">%%</span> /lock<span class="Identifier"> public</span>
    <span class="Comment">// Get application home directory</span>
<span class="Statement">    get-app</span><span class="Identifier"> directory</span><span class="Type"> to</span> dir
    <span class="Comment">// Create lock file name</span>
<span class="Statement">    set-string</span> fname = dir + <span class="Constant">&quot;/.lock&quot;</span>
    <span class="Comment">// Enter loop in which something is done, OR, program waits for others to complete their work before doing its own</span>
<span class="Statement">    start-loop</span>
        <span class="Comment">// Attempt to lock file</span>
<span class="Statement">        lock-file</span> fname<span class="Type"> id</span> lockid<span class="Type"> status</span> lockst
        <span class="Comment">// Check the status of locking</span>
<span class="Statement">        if-true</span> lockst<span class="Identifier"> equal</span> RIM_OKAY
            <span class="Comment">// File successfully locked, simulate working for </span><span class="Constant">20</span><span class="Comment"> seconds</span>
<span class="Statement">            @</span>WORKING
<span class="Statement">            pause-program</span> <span class="Constant">20000</span>
<span class="Statement">            @</span>DONE
            <span class="Comment">// Once done, unlock file</span>
<span class="Statement">            unlock-file</span><span class="Identifier"> id</span> lockid
<span class="Statement">            break-loop</span>
<span class="Statement">        else-if</span> lockst<span class="Identifier"> equal</span> RIM_ERR_FAILED
            <span class="Comment">// Another process holds the lock, wait, try again for </span><span class="Constant">1</span><span class="Comment"> second</span>
<span class="Statement">            pause-program</span> <span class="Constant">1000</span>
<span class="Statement">            @</span>WAITING
<span class="Statement">            continue-loop</span>
<span class="Statement">        else-if</span> lockst<span class="Identifier"> equal</span> RIM_ERR_OPEN<span class="Identifier"> or</span> lockst<span class="Identifier"> equal</span> RIM_ERR_INVALID
            <span class="Comment">// Errors</span>
<span class="Statement">            @</span>BAD LOCK
<span class="Statement">            exit-handler</span>
<span class="Statement">        end-if</span>
<span class="Statement">    end-loop</span>
<span class="Statement">%%</span>
<span class="Constant">EOF</span></pre>
<span id=rimstone_copied_775 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_775' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_775, code_775, rimstone_copied_775)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Create and build a new app:<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_773' class=notranslate>
rim <span class="Special">-k</span> lock-app <span class="Special">-q</span></pre>
<span id=rimstone_copied_773 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_773' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_773, code_773, rimstone_copied_773)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Run it twice at the same time in two different terminal windows with:<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_776' class=notranslate>
rim <span class="Special">-r</span> <span class="Special">--req</span><span class="Statement">=</span><span class="Statement">&quot;</span><span class="Constant">/lock</span><span class="Statement">&quot;</span> <span class="Special">--exec</span> <span class="Special">--app</span><span class="Statement">=</span><span class="Statement">&quot;</span><span class="Constant">/lock</span><span class="Statement">&quot;</span> <span class="Special">--silent-header</span></pre>
<span id=rimstone_copied_776 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_776' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_776, code_776, rimstone_copied_776)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
One window will show the following (WORKING and then after20 seconds DONE):<br/>
<div class='ncode' style='position:relative;padding-right:16px;'>
<pre id='code_771' class=notranslate>
WORKING
DONE</pre>
<span id=rimstone_copied_771 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_771' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_771, code_771, rimstone_copied_771)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
The other window will show it waiting for 20 seconds to acquire the lock (held by the first process), and then work for 20 seconds just like the first one:<br/>
<div class='ncode' style='position:relative;padding-right:16px;'>
<pre id='code_774' class=notranslate>
WAITING
WAITING
WAITING
WAITING
WAITING
WAITING
WAITING
WAITING
WAITING
WAITING
WAITING
WAITING
WAITING
WAITING
WAITING
WAITING
WAITING
WAITING
WAITING
WORKING
DONE</pre>
<span id=rimstone_copied_774 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_774' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_774, code_774, rimstone_copied_774)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<div class="vsub"><a id="See also"></a>See also</div>
 <a name='Files'></a><span style="font-weight:bold;">Files</span><br/>
<a href='/change-mode.html'>change-mode</a> &nbsp;<br/>
<a href='/close-file.html'>close-file</a> &nbsp;<br/>
<a href='/copy-file.html'>copy-file</a> &nbsp;<br/>
<a href='/delete-file.html'>delete-file</a> &nbsp;<br/>
<a href='/file-position.html'>file-position</a> &nbsp;<br/>
<a href='/file-storage.html'>file-storage</a> &nbsp;<br/>
<a href='/file-uploading.html'>file-uploading</a> &nbsp;<br/>
<a href='/get-upload.html'>get-upload</a> &nbsp;<br/>
<a href='/lock-file.html'>lock-file</a> &nbsp;<br/>
<a href='/open-file.html'>open-file</a> &nbsp;<br/>
<a href='/read-file.html'>read-file</a> &nbsp;<br/>
<a href='/read-line.html'>read-line</a> &nbsp;<br/>
<a href='/rename-file.html'>rename-file</a> &nbsp;<br/>
<a href='/stat-file.html'>stat-file</a> &nbsp;<br/>
<a href='/temporary-file.html'>temporary-file</a> &nbsp;<br/>
<a href='/uniq-file.html'>uniq-file</a> &nbsp;<br/>
<a href='/unlock-file.html'>unlock-file</a> &nbsp;<br/>
<a href='/write-file.html'>write-file</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='/documentation.html'>documentation</a><br/>
<a id='log10.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:left;background-color:white;'><a href='https://rimstone-lang.com' style='border-bottom:0px'><img src='https://rimstone-lang.com/rimstone.png' style='width:180px;height:auto'/></a></div><div class='vhub' style='margin-top:10px;'>Log10</div><hr/><span style="font-weight:bold;">Purpose</span>: Base-10 logarithmic function.<br/>
<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_777' class=notranslate>
log10( &lt;var&gt; )</pre>
<span id=rimstone_copied_777 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_777' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_777, code_777, rimstone_copied_777)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
log10 returns the base-10 logarithm of &lt;var&gt;. &lt;var&gt; is a number or a double and the result is a double.<br/>
<div class="vsub"><a id="Examples"></a>Examples</div>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_778' class=notranslate>
<span class="Statement">set-double</span> d = log10(<span class="Constant">1</span>) + <span class="Constant">1</span></pre>
<span id=rimstone_copied_778 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_778' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_778, code_778, rimstone_copied_778)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<div class="vsub"><a id="See also"></a>See also</div>
 <a name='Math functions'></a><span style="font-weight:bold;">Math functions</span><br/>
<a href='/abd.html'>abd</a> &nbsp;<br/>
<a href='/abn.html'>abn</a> &nbsp;<br/>
<a href='/acos.html'>acos</a> &nbsp;<br/>
<a href='/acosh.html'>acosh</a> &nbsp;<br/>
<a href='/asin.html'>asin</a> &nbsp;<br/>
<a href='/asinh.html'>asinh</a> &nbsp;<br/>
<a href='/atan.html'>atan</a> &nbsp;<br/>
<a href='/atan2.html'>atan2</a> &nbsp;<br/>
<a href='/atanh.html'>atanh</a> &nbsp;<br/>
<a href='/cbrt.html'>cbrt</a> &nbsp;<br/>
<a href='/ceil.html'>ceil</a> &nbsp;<br/>
<a href='/copysign.html'>copysign</a> &nbsp;<br/>
<a href='/cos.html'>cos</a> &nbsp;<br/>
<a href='/cosh.html'>cosh</a> &nbsp;<br/>
<a href='/dbl.html'>dbl</a> &nbsp;<br/>
<a href='/erf.html'>erf</a> &nbsp;<br/>
<a href='/erfc.html'>erfc</a> &nbsp;<br/>
<a href='/exp.html'>exp</a> &nbsp;<br/>
<a href='/exp2.html'>exp2</a> &nbsp;<br/>
<a href='/floor.html'>floor</a> &nbsp;<br/>
<a href='/fmod.html'>fmod</a> &nbsp;<br/>
<a href='/hypot.html'>hypot</a> &nbsp;<br/>
<a href='/isinf.html'>isinf</a> &nbsp;<br/>
<a href='/isnan.html'>isnan</a> &nbsp;<br/>
<a href='/ldexp.html'>ldexp</a> &nbsp;<br/>
<a href='/lgamma.html'>lgamma</a> &nbsp;<br/>
<a href='/log.html'>log</a> &nbsp;<br/>
<a href='/log10.html'>log10</a> &nbsp;<br/>
<a href='/log2.html'>log2</a> &nbsp;<br/>
<a href='/math-functions.html'>math-functions</a> &nbsp;<br/>
<a href='/nextafter.html'>nextafter</a> &nbsp;<br/>
<a href='/num.html'>num</a> &nbsp;<br/>
<a href='/pow.html'>pow</a> &nbsp;<br/>
<a href='/round.html'>round</a> &nbsp;<br/>
<a href='/sin.html'>sin</a> &nbsp;<br/>
<a href='/sinh.html'>sinh</a> &nbsp;<br/>
<a href='/sqrt.html'>sqrt</a> &nbsp;<br/>
<a href='/tan.html'>tan</a> &nbsp;<br/>
<a href='/tanh.html'>tanh</a> &nbsp;<br/>
<a href='/trunc.html'>trunc</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='/documentation.html'>documentation</a><br/>
<a id='log2.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:left;background-color:white;'><a href='https://rimstone-lang.com' style='border-bottom:0px'><img src='https://rimstone-lang.com/rimstone.png' style='width:180px;height:auto'/></a></div><div class='vhub' style='margin-top:10px;'>Log2</div><hr/><span style="font-weight:bold;">Purpose</span>: Base-2 logarithmic function.<br/>
<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_780' class=notranslate>
log2( &lt;var&gt; )</pre>
<span id=rimstone_copied_780 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_780' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_780, code_780, rimstone_copied_780)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
log2 returns the base-2 logarithm of &lt;var&gt;. &lt;var&gt; is a number or a double and the result is a double.<br/>
<div class="vsub"><a id="Examples"></a>Examples</div>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_781' class=notranslate>
<span class="Statement">set-double</span> d = log2(<span class="Constant">1</span>) + <span class="Constant">1</span></pre>
<span id=rimstone_copied_781 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_781' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_781, code_781, rimstone_copied_781)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<div class="vsub"><a id="See also"></a>See also</div>
 <a name='Math functions'></a><span style="font-weight:bold;">Math functions</span><br/>
<a href='/abd.html'>abd</a> &nbsp;<br/>
<a href='/abn.html'>abn</a> &nbsp;<br/>
<a href='/acos.html'>acos</a> &nbsp;<br/>
<a href='/acosh.html'>acosh</a> &nbsp;<br/>
<a href='/asin.html'>asin</a> &nbsp;<br/>
<a href='/asinh.html'>asinh</a> &nbsp;<br/>
<a href='/atan.html'>atan</a> &nbsp;<br/>
<a href='/atan2.html'>atan2</a> &nbsp;<br/>
<a href='/atanh.html'>atanh</a> &nbsp;<br/>
<a href='/cbrt.html'>cbrt</a> &nbsp;<br/>
<a href='/ceil.html'>ceil</a> &nbsp;<br/>
<a href='/copysign.html'>copysign</a> &nbsp;<br/>
<a href='/cos.html'>cos</a> &nbsp;<br/>
<a href='/cosh.html'>cosh</a> &nbsp;<br/>
<a href='/dbl.html'>dbl</a> &nbsp;<br/>
<a href='/erf.html'>erf</a> &nbsp;<br/>
<a href='/erfc.html'>erfc</a> &nbsp;<br/>
<a href='/exp.html'>exp</a> &nbsp;<br/>
<a href='/exp2.html'>exp2</a> &nbsp;<br/>
<a href='/floor.html'>floor</a> &nbsp;<br/>
<a href='/fmod.html'>fmod</a> &nbsp;<br/>
<a href='/hypot.html'>hypot</a> &nbsp;<br/>
<a href='/isinf.html'>isinf</a> &nbsp;<br/>
<a href='/isnan.html'>isnan</a> &nbsp;<br/>
<a href='/ldexp.html'>ldexp</a> &nbsp;<br/>
<a href='/lgamma.html'>lgamma</a> &nbsp;<br/>
<a href='/log.html'>log</a> &nbsp;<br/>
<a href='/log10.html'>log10</a> &nbsp;<br/>
<a href='/log2.html'>log2</a> &nbsp;<br/>
<a href='/math-functions.html'>math-functions</a> &nbsp;<br/>
<a href='/nextafter.html'>nextafter</a> &nbsp;<br/>
<a href='/num.html'>num</a> &nbsp;<br/>
<a href='/pow.html'>pow</a> &nbsp;<br/>
<a href='/round.html'>round</a> &nbsp;<br/>
<a href='/sin.html'>sin</a> &nbsp;<br/>
<a href='/sinh.html'>sinh</a> &nbsp;<br/>
<a href='/sqrt.html'>sqrt</a> &nbsp;<br/>
<a href='/tan.html'>tan</a> &nbsp;<br/>
<a href='/tanh.html'>tanh</a> &nbsp;<br/>
<a href='/trunc.html'>trunc</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='/documentation.html'>documentation</a><br/>
<a id='log.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:left;background-color:white;'><a href='https://rimstone-lang.com' style='border-bottom:0px'><img src='https://rimstone-lang.com/rimstone.png' style='width:180px;height:auto'/></a></div><div class='vhub' style='margin-top:10px;'>Log</div><hr/><span style="font-weight:bold;">Purpose</span>: Natural logarithmic function.<br/>
<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_779' class=notranslate>
log( &lt;var&gt; )</pre>
<span id=rimstone_copied_779 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_779' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_779, code_779, rimstone_copied_779)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
log returns the natural logarithm of &lt;var&gt;. &lt;var&gt; is a number or a double and the result is a double.<br/>
<div class="vsub"><a id="Examples"></a>Examples</div>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_782' class=notranslate>
<span class="Statement">set-double</span> d = log(<span class="Constant">1</span>) + <span class="Constant">1</span></pre>
<span id=rimstone_copied_782 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_782' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_782, code_782, rimstone_copied_782)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<div class="vsub"><a id="See also"></a>See also</div>
 <a name='Math functions'></a><span style="font-weight:bold;">Math functions</span><br/>
<a href='/abd.html'>abd</a> &nbsp;<br/>
<a href='/abn.html'>abn</a> &nbsp;<br/>
<a href='/acos.html'>acos</a> &nbsp;<br/>
<a href='/acosh.html'>acosh</a> &nbsp;<br/>
<a href='/asin.html'>asin</a> &nbsp;<br/>
<a href='/asinh.html'>asinh</a> &nbsp;<br/>
<a href='/atan.html'>atan</a> &nbsp;<br/>
<a href='/atan2.html'>atan2</a> &nbsp;<br/>
<a href='/atanh.html'>atanh</a> &nbsp;<br/>
<a href='/cbrt.html'>cbrt</a> &nbsp;<br/>
<a href='/ceil.html'>ceil</a> &nbsp;<br/>
<a href='/copysign.html'>copysign</a> &nbsp;<br/>
<a href='/cos.html'>cos</a> &nbsp;<br/>
<a href='/cosh.html'>cosh</a> &nbsp;<br/>
<a href='/dbl.html'>dbl</a> &nbsp;<br/>
<a href='/erf.html'>erf</a> &nbsp;<br/>
<a href='/erfc.html'>erfc</a> &nbsp;<br/>
<a href='/exp.html'>exp</a> &nbsp;<br/>
<a href='/exp2.html'>exp2</a> &nbsp;<br/>
<a href='/floor.html'>floor</a> &nbsp;<br/>
<a href='/fmod.html'>fmod</a> &nbsp;<br/>
<a href='/hypot.html'>hypot</a> &nbsp;<br/>
<a href='/isinf.html'>isinf</a> &nbsp;<br/>
<a href='/isnan.html'>isnan</a> &nbsp;<br/>
<a href='/ldexp.html'>ldexp</a> &nbsp;<br/>
<a href='/lgamma.html'>lgamma</a> &nbsp;<br/>
<a href='/log.html'>log</a> &nbsp;<br/>
<a href='/log10.html'>log10</a> &nbsp;<br/>
<a href='/log2.html'>log2</a> &nbsp;<br/>
<a href='/math-functions.html'>math-functions</a> &nbsp;<br/>
<a href='/nextafter.html'>nextafter</a> &nbsp;<br/>
<a href='/num.html'>num</a> &nbsp;<br/>
<a href='/pow.html'>pow</a> &nbsp;<br/>
<a href='/round.html'>round</a> &nbsp;<br/>
<a href='/sin.html'>sin</a> &nbsp;<br/>
<a href='/sinh.html'>sinh</a> &nbsp;<br/>
<a href='/sqrt.html'>sqrt</a> &nbsp;<br/>
<a href='/tan.html'>tan</a> &nbsp;<br/>
<a href='/tanh.html'>tanh</a> &nbsp;<br/>
<a href='/trunc.html'>trunc</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='/documentation.html'>documentation</a><br/>
<a id='lower-string.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:left;background-color:white;'><a href='https://rimstone-lang.com' style='border-bottom:0px'><img src='https://rimstone-lang.com/rimstone.png' style='width:180px;height:auto'/></a></div><div class='vhub' style='margin-top:10px;'>Lower string</div><hr/><span style="font-weight:bold;">Purpose</span>: Lower-case a string.<br/>
<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_783' class=notranslate>
<span class="Statement">lower-string</span> &lt;string&gt;</pre>
<span id=rimstone_copied_783 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_783' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_783, code_783, rimstone_copied_783)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
lower-string converts all &lt;string&gt;'s characters to lower case.<br/>
<div class="vsub"><a id="Examples"></a>Examples</div>
The resulting "str" is "good":<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_784' class=notranslate>
<span class="Statement">set-string</span> str=<span class="Constant">&quot;GOOD&quot;</span>
<span class="Statement">lower-string</span> str</pre>
<span id=rimstone_copied_784 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_784' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_784, code_784, rimstone_copied_784)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<div class="vsub"><a id="See also"></a>See also</div>
 <a name='Strings'></a><span style="font-weight:bold;">Strings</span><br/>
<a href='/copy-string.html'>copy-string</a> &nbsp;<br/>
<a href='/count-substring.html'>count-substring</a> &nbsp;<br/>
<a href='/delete-string.html'>delete-string</a> &nbsp;<br/>
<a href='/double-string.html'>double-string</a> &nbsp;<br/>
<a href='/lower-string.html'>lower-string</a> &nbsp;<br/>
<a href='/match-regex.html'>match-regex</a> &nbsp;<br/>
<a href='/new-string.html'>new-string</a> &nbsp;<br/>
<a href='/number-string.html'>number-string</a> &nbsp;<br/>
<a href='/read-split.html'>read-split</a> &nbsp;<br/>
<a href='/replace-string.html'>replace-string</a> &nbsp;<br/>
<a href='/scan-string.html'>scan-string</a> &nbsp;<br/>
<a href='/set-string.html'>set-string</a> &nbsp;<br/>
<a href='/split-string.html'>split-string</a> &nbsp;<br/>
<a href='/string-double.html'>string-double</a> &nbsp;<br/>
<a href='/string-expressions.html'>string-expressions</a> &nbsp;<br/>
<a href='/string-length.html'>string-length</a> &nbsp;<br/>
<a href='/string-number.html'>string-number</a> &nbsp;<br/>
<a href='/trim-string.html'>trim-string</a> &nbsp;<br/>
<a href='/upper-string.html'>upper-string</a> &nbsp;<br/>
<a href='/write-string.html'>write-string</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='/documentation.html'>documentation</a><br/>
<a id='mariadb-database.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:left;background-color:white;'><a href='https://rimstone-lang.com' style='border-bottom:0px'><img src='https://rimstone-lang.com/rimstone.png' style='width:180px;height:auto'/></a></div><div class='vhub' style='margin-top:10px;'>Mariadb database</div><hr/>MariaDB configuration file is written as a MariaDB client options file. <br/>
<br/>
You can see the parameters available at <a href='https://mariadb.com/kb/en/configuring-mariadb-connectorc-with-option-files/#options'>https://mariadb.com/kb/en/configuring-mariadb-connectorc-with-option-files/#options</a>. <br/>
<br/>
Most of the time, though, you would likely use only a few of those options, as in (for local connection):<br/>
<div class='ncode' style='position:relative;padding-right:16px;'>
<pre id='code_785' class=notranslate>
[client]
user=myuser
password=mypwd 
database=mydb
socket=/run/mysqld/mysqld.sock</pre>
<span id=rimstone_copied_785 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_785' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_785, code_785, rimstone_copied_785)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
The above file has fields "user" (MariaDB user), "password" (the password for MariaDB user), "database" (the MariaDB database name) and MariaDB communication "socket" location (assuming your database is local to your computer - if the database is across network you would not use sockets!). <br/>
<br/>
If you use passwordless MariaDB login (such as when the MariaDB user name is the same as your Operating System user name and where unix socket plugin is used for authentication), the password would be empty.<br/>
<br/>
To get the location of the socket, you might use:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_786' class=notranslate>
sudo mysql -u root -e <span class="Constant">&quot;show variables like 'socket'&quot;</span></pre>
<span id=rimstone_copied_786 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_786' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_786, code_786, rimstone_copied_786)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<div class="vsub"><a id="See also"></a>See also</div>
 <a name='Database'></a><span style="font-weight:bold;">Database</span><br/>
<a href='/begin-transaction.html'>begin-transaction</a> &nbsp;<br/>
<a href='/commit-transaction.html'>commit-transaction</a> &nbsp;<br/>
<a href='/current-row.html'>current-row</a> &nbsp;<br/>
<a href='/database-config-file.html'>database-config-file</a> &nbsp;<br/>
<a href='/db-error.html'>db-error</a> &nbsp;<br/>
<a href='/mariadb-database.html'>mariadb-database</a> &nbsp;<br/>
<a href='/postgresql-database.html'>postgresql-database</a> &nbsp;<br/>
<a href='/rollback-transaction.html'>rollback-transaction</a> &nbsp;<br/>
<a href='/run-query.html'>run-query</a> &nbsp;<br/>
<a href='/sqlite-database.html'>sqlite-database</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='/documentation.html'>documentation</a><br/>
<a id='match-regex.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:left;background-color:white;'><a href='https://rimstone-lang.com' style='border-bottom:0px'><img src='https://rimstone-lang.com/rimstone.png' style='width:180px;height:auto'/></a></div><div class='vhub' style='margin-top:10px;'>Match regex</div><hr/><span style="font-weight:bold;">Purpose</span>: Find, or find and replace patterns in strings using regex (regular expressions).<br/>
<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_788' class=notranslate>
<span class="Statement">match-regex</span> &lt;pattern&gt;<span class="Identifier"> in</span> &lt;target&gt; \
    [ \
        (<span class="Identifier"> replace-with</span> &lt;replace pattern&gt; \
           <span class="Type"> result</span> &lt;result&gt; \
            [<span class="Type"> status</span> &lt;status&gt; ] )  \
    | \
        (<span class="Type"> status</span> &lt;status&gt; \
            [<span class="Identifier"> case-insensitive</span> [ &lt;case-insensitive&gt; ] ] \
            [<span class="Identifier"> single-match</span> [ &lt;single-match&gt; ] ] \
            [<span class="Identifier"> utf</span> [ &lt;utf&gt; ] ] ) \
    ] \
    [<span class="Identifier"> cache</span> ] \
    [<span class="Identifier"> clear-cache</span> &lt;clear cache&gt; )</pre>
<span id=rimstone_copied_788 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_788' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_788, code_788, rimstone_copied_788)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
match-regex searches &lt;target&gt; string for regex &lt;pattern&gt;. If "replace-with" is specified, then instance(s) of &lt;pattern&gt; in &lt;target&gt; are replaced with &lt;replace pattern&gt; string, and the result is stored in &lt;result&gt; string.<br/>
<br/>
The number of found or found/replaced patterns can be obtained in number &lt;status&gt; variable (in "status" clause). <br/>
<br/>
If "replace-with" is not specified, then the number of matched &lt;pattern&gt;s within &lt;target&gt; is given in &lt;status&gt; number, which in this case must be specified.<br/>
<br/>
If "case-insensitive" is used without boolean variable &lt;case-insensitive&gt;, or if &lt;case-insensitive&gt; evaluates to true, then searching for pattern is case insensitive. By default, it is case sensitive.<br/>
<br/>
If "single-match" is specified without boolean variable &lt;single-match&gt;, or if &lt;single-match&gt; evaluates to true, then only the very first occurrence of &lt;pattern&gt; in &lt;target&gt; is processed. Otherwise, all occurrences are processed.<br/>
<br/>
If "utf" is used, then the pattern itself and all data strings used for matching are treated as UTF-8 strings.<br/>
<br/>
&lt;result&gt; and &lt;status&gt; variables can be created within the statement.<br/>
<br/>
If the pattern is bad (i.e. &lt;pattern&gt; is not a correct regular expression), RimStone will <a href='/error-handling.html'>error out</a> with a message.<br/>
<div class="vsub"><a id="PCRE2 and Posix Regex"></a>PCRE2 and Posix Regex</div>
By default, <a href='https://www.pcre.org/current/doc/html/pcre2pattern.html'>PCRE2 regex syntax</a> (Perl-compatible Regular Expressions v2) is used. To use <a href='https://en.wikibooks.org/wiki/Regular_Expressions/POSIX-Extended_Regular_Expressions'>extended regex syntax</a> (Posix ERE), specify "--posix-regex" when building your application with <a href='/rim.html'>rim</a>. See more below in Limitations about differences.<br/>
<div class="vsub"><a id="Caching and performance"></a>Caching and performance</div>
If "cache" clause is used, then regex compilation of &lt;pattern&gt; will be done only once and saved for future use. There is a significant performance benefit when match-regex executes repeatedly with "cache" (such as in case of web applications or in any kind of loop). If &lt;pattern&gt; changes and you need to recompile it once in a while, use "clear-cache" clause. &lt;clear cache&gt; is a "bool" variable; the regex cache is cleared if it is true, and stays if it is false. For example:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_789' class=notranslate>
<span class="Statement">set-bool</span> cl_c
<span class="Statement">if-true</span> q<span class="Identifier"> equal</span> <span class="Constant">0</span>
<span class="Statement">    set-bool</span> cl_c = <span class="Constant">true</span>
<span class="Statement">end-if</span>
<span class="Statement">match-regex</span> ps<span class="Identifier"> in</span> look_in<span class="Identifier"> replace-with</span> <span class="Constant">&quot;Yes it is </span><span class="Special">\\</span><span class="Constant">1!&quot;</span><span class="Type"> result</span> res<span class="Identifier"> cache clear-cache</span> cl_c</pre>
<span id=rimstone_copied_789 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_789' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_789, code_789, rimstone_copied_789)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
In this case, when "q" is 0, cache will be cleared, and the pattern in variable "ps" will be recompiled. In all other cases, the last computed regex stays the same. <br/>
<br/>
While every pattern is different, when using cache, even a relatively small pattern was seen in tests to speed up the match-regex by about 500%, or 5x faster. Use cache whenever possible as it brings parsing performance close to its theoretical limits.<br/>
<div class="vsub"><a id="Subexpressions and back-referencing"></a>Subexpressions and back-referencing</div>
Subexpressions are referenced via a backslash followed by a number. Because in strings a backslash followed by a number is an octal number, you must use double backslash (\\). For example:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_790' class=notranslate>
<span class="Statement">match-regex</span> <span class="Constant">&quot;(good).*(day)&quot;</span> \
   <span class="Identifier"> in</span> <span class="Constant">&quot;Hello, good day!&quot;</span> \
   <span class="Identifier"> replace-with</span> <span class="Constant">&quot;</span><span class="Special">\\</span><span class="Constant">2 </span><span class="Special">\\</span><span class="Constant">1&quot;</span> \
   <span class="Type"> result</span> res</pre>
<span id=rimstone_copied_790 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_790' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_790, code_790, rimstone_copied_790)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
will produce string "Hello, day good!" as a result in "res" variable. Each subexpression is within () parenthesis, so for instance "day" in the above pattern is the 2nd subexpression, and is back-referenced as \\2 in replacement.<br/>
<br/>
There can be a maximum of 23 subexpressions. <br/>
<br/>
Note that backreferences to non-existing subexpressions are ignored - for example \\4 when there are only 3 subexpressions. RimStone is "smart" about using two digits and differentiating between \\1 and \\10 for instance - it takes into account the actual number of subexpressions and their validity, and selects a proper subexpression even when two digits are used in a backreference.<br/>
<div class="vsub"><a id="Lookaheads and lookbehinds"></a>Lookaheads and lookbehinds</div>
match-regex supports syntax for lookaheads (i.e. "(?=...)" and "(?!...)") and lookbehinds (i.e. "(?&lt;=...)" and "(?&lt;!...)"). See <a href='https://www.pcre.org/current/doc/html/pcre2pattern.html'>PCRE2 pattern matching</a> for more details. For instance, the following matches "bar" only if preceded by "foo":<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_791' class=notranslate>
<span class="Statement">match-regex</span> <span class="Constant">&quot;</span><span class="Special">\\</span><span class="Constant">w*(?&lt;=foo)bar&quot;</span><span class="Identifier"> in</span> <span class="Constant">&quot;foobar&quot;</span><span class="Type"> status</span> st<span class="Identifier"> single-match</span></pre>
<span id=rimstone_copied_791 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_791' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_791, code_791, rimstone_copied_791)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
and the following matches "foo" if followed by "bar":<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_792' class=notranslate>
<span class="Statement">match-regex</span> <span class="Constant">&quot;</span><span class="Special">\\</span><span class="Constant">w*foo(?=bar)&quot;</span><span class="Identifier"> in</span> <span class="Constant">&quot;foofoo&quot;</span><span class="Type"> status</span> st<span class="Identifier"> single-match</span></pre>
<span id=rimstone_copied_792 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_792' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_792, code_792, rimstone_copied_792)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<div class="vsub"><a id="Limitations"></a>Limitations</div>
If you are using older versions of PCRE2 (10.36 or earlier) such as by default in Debian 10 or Ubuntu 18, then instead of PCRE2, an <a href='https://en.wikibooks.org/wiki/Regular_Expressions/POSIX-Extended_Regular_Expressions'>Extended Regex Expressions</a> (ERE) from the &nbsp;built-in Linux regex library is used, due to older PCRE2 versions having name conflicts with other libraries. In this case, "utf" clause will have no effect, and lookaheads/lookbehinds functionality will not work; possibly a few others as well, however for the most part the two are compatible. If your system uses an older PCRE2 library, you can upgrade to 10.37 or later to use PCRE2.<br/>
<br/>
In any case, if you need to use Posix ERE instead of PCRE2 (for compatibility, to reduce memory footprint or some other reason), you can use "--posix-regex" option of <a href='/rim.html'>rim</a>; the same limitations as above apply. Note that PCRE2 (the default) is generally faster than ERE.<br/>
<div class="vsub"><a id="Examples"></a>Examples</div>
Use match-regex statement to find out if a string matches a pattern, for example:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_793' class=notranslate>
<span class="Statement">match-regex</span> <span class="Constant">&quot;SOME (.*) IS (.*)&quot;</span><span class="Identifier"> in</span> <span class="Constant">&quot;WOW SOME THING IS GOOD HERE&quot;</span><span class="Type"> status</span> st</pre>
<span id=rimstone_copied_793 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_793' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_793, code_793, rimstone_copied_793)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
In this case, the first parameter ("SOME (.*) IS (.*)") is a pattern and you're matching it with string ("WOW SOME THING IS GOOD HERE"). Since there is a match, status variable (defined on the fly as integer) "st" will be "1" (meaning one match was found) - in general it will contain the number of patterns matched. <br/>
<br/>
Search for patterns and replace them by using replace-with clause, for example:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_794' class=notranslate>
<span class="Statement">match-regex</span> <span class="Constant">&quot;SOME (.*) IS ([^ ]+)&quot;</span><span class="Identifier"> in</span> <span class="Constant">&quot;WOW SOME THING IS GOOD HERE FOR SURE&quot;</span><span class="Identifier"> replace-with</span> <span class="Constant">&quot;THINGS ARE </span><span class="Special">\\</span><span class="Constant">2 YES!&quot;</span><span class="Type"> result</span> res<span class="Type"> status</span> st</pre>
<span id=rimstone_copied_794 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_794' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_794, code_794, rimstone_copied_794)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
In this case, the result from replacement will be in a new string variable "res" specified with the result clause, and it will be <br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_795' class=notranslate>
WOW THINGS ARE GOOD YES! HERE FOR SURE</pre>
<span id=rimstone_copied_795 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_795' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_795, code_795, rimstone_copied_795)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
The above demonstrates a typical use of subexpressions in regex (meaning "()" statements) and their referencing with "\\1", "\\2" etc. in the order in which they appear. Consult regex documentation for more information. &nbsp;Status variable specified with status clause ("st" in this example) will contain the number of patterns matched and replaced. <br/>
<br/>
Matching is by default case sensitive. Use "case-insensitive" clause to change it to case insensitive, for instance:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_796' class=notranslate>
<span class="Statement">match-regex</span> <span class="Constant">&quot;SOME (.*) IS (.*)&quot;</span><span class="Identifier"> in</span> <span class="Constant">&quot;WOW some THING IS GOOD HERE&quot;</span><span class="Type"> status</span> st<span class="Identifier"> case-insensitive</span></pre>
<span id=rimstone_copied_796 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_796' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_796, code_796, rimstone_copied_796)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
In the above case, the pattern would not be found without "case-insensitive" clause because "SOME" and "some" would not match. This clause works the same in matching-only as well as replacing strings.<br/>
<br/>
If you want to match only the first occurrence of a pattern, use "single-match" option:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_787' class=notranslate>
<span class="Statement">match-regex</span> <span class="Constant">&quot;SOME ([^ ]+) IS ([^ ]+)&quot;</span><span class="Identifier"> in</span> <span class="Constant">&quot;WOW SOME THING IS GOOD HERE AND SOME STUFF IS GOOD TOO&quot;</span><span class="Type"> status</span> st<span class="Identifier"> single-match</span></pre>
<span id=rimstone_copied_787 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_787' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_787, code_787, rimstone_copied_787)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
In this case there would be two matches by default ("SOME THING IS GOOD" and "SOME STUFF IS GOOD") but only the first would be found. This clause works the same for replacing as well - only the first occurrence would be replaced.<br/>
<div class="vsub"><a id="See also"></a>See also</div>
 <a name='Regex'></a><span style="font-weight:bold;">Regex</span><br/>
<a href='/match-regex.html'>match-regex</a> &nbsp; <br/>
 <a name='Strings'></a><span style="font-weight:bold;">Strings</span><br/>
<a href='/copy-string.html'>copy-string</a> &nbsp;<br/>
<a href='/count-substring.html'>count-substring</a> &nbsp;<br/>
<a href='/delete-string.html'>delete-string</a> &nbsp;<br/>
<a href='/double-string.html'>double-string</a> &nbsp;<br/>
<a href='/lower-string.html'>lower-string</a> &nbsp;<br/>
<a href='/match-regex.html'>match-regex</a> &nbsp;<br/>
<a href='/new-string.html'>new-string</a> &nbsp;<br/>
<a href='/number-string.html'>number-string</a> &nbsp;<br/>
<a href='/read-split.html'>read-split</a> &nbsp;<br/>
<a href='/replace-string.html'>replace-string</a> &nbsp;<br/>
<a href='/scan-string.html'>scan-string</a> &nbsp;<br/>
<a href='/set-string.html'>set-string</a> &nbsp;<br/>
<a href='/split-string.html'>split-string</a> &nbsp;<br/>
<a href='/string-double.html'>string-double</a> &nbsp;<br/>
<a href='/string-expressions.html'>string-expressions</a> &nbsp;<br/>
<a href='/string-length.html'>string-length</a> &nbsp;<br/>
<a href='/string-number.html'>string-number</a> &nbsp;<br/>
<a href='/trim-string.html'>trim-string</a> &nbsp;<br/>
<a href='/upper-string.html'>upper-string</a> &nbsp;<br/>
<a href='/write-string.html'>write-string</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='/documentation.html'>documentation</a><br/>
<a id='math-functions.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:left;background-color:white;'><a href='https://rimstone-lang.com' style='border-bottom:0px'><img src='https://rimstone-lang.com/rimstone.png' style='width:180px;height:auto'/></a></div><div class='vhub' style='margin-top:10px;'>Math functions</div><hr/>This is a list of math functions.<br/>
<br/>
The following functions return a double:<br/>
<ul><li><a href='/dbl.html'>dbl</a><br/>
</li><li><a href='/sin.html'>sin</a><br/>
</li><li><a href='/cos.html'>cos</a><br/>
</li><li><a href='/tan.html'>tan</a><br/>
</li><li><a href='/asin.html'>asin</a><br/>
</li><li><a href='/acos.html'>acos</a><br/>
</li><li><a href='/atan.html'>atan</a><br/>
</li><li><a href='/sinh.html'>sinh</a><br/>
</li><li><a href='/cosh.html'>cosh</a><br/>
</li><li><a href='/tanh.html'>tanh</a><br/>
</li><li><a href='/asinh.html'>asinh</a><br/>
</li><li><a href='/acosh.html'>acosh</a><br/>
</li><li><a href='/atanh.html'>atanh</a><br/>
</li><li><a href='/exp.html'>exp</a><br/>
</li><li><a href='/exp2.html'>exp2</a><br/>
</li><li><a href='/log.html'>log</a><br/>
</li><li><a href='/log10.html'>log10</a><br/>
</li><li><a href='/log2.html'>log2</a><br/>
</li><li><a href='/sqrt.html'>sqrt</a><br/>
</li><li><a href='/cbrt.html'>cbrt</a><br/>
</li><li><a href='/abd.html'>abd</a><br/>
</li><li><a href='/ceil.html'>ceil</a><br/>
</li><li><a href='/floor.html'>floor</a><br/>
</li><li><a href='/round.html'>round</a><br/>
</li><li><a href='/trunc.html'>trunc</a><br/>
</li><li><a href='/erf.html'>erf</a><br/>
</li><li><a href='/erfc.html'>erfc</a><br/>
</li><li><a href='/lgamma.html'>lgamma</a><br/>
</li><li><a href='/atan2.html'>atan2</a><br/>
</li><li><a href='/pow.html'>pow</a><br/>
</li><li><a href='/hypot.html'>hypot</a><br/>
</li><li><a href='/fmod.html'>fmod</a><br/>
</li><li><a href='/copysign.html'>copysign</a><br/>
</li><li><a href='/ldexp.html'>ldexp</a><br/>
</li><li><a href='/nextafter.html'>nextafter</a></li></ul>
The following functions return a number - especially usefull is a num() function that converts a double to int (see ceil(), round(), floor(), trunc()):<br/>
<ul><li><a href='/abn.html'>abn</a> <br/>
</li><li><a href='/num.html'>num</a><br/>
</li><li><a href='/isinf.html'>isinf</a><br/>
</li><li><a href='/isnan.html'>isnan</a></ul>
<div class="vsub"><a id="See also"></a>See also</div>
 <a name='Math functions'></a><span style="font-weight:bold;">Math functions</span><br/>
<a href='/abd.html'>abd</a> &nbsp;<br/>
<a href='/abn.html'>abn</a> &nbsp;<br/>
<a href='/acos.html'>acos</a> &nbsp;<br/>
<a href='/acosh.html'>acosh</a> &nbsp;<br/>
<a href='/asin.html'>asin</a> &nbsp;<br/>
<a href='/asinh.html'>asinh</a> &nbsp;<br/>
<a href='/atan.html'>atan</a> &nbsp;<br/>
<a href='/atan2.html'>atan2</a> &nbsp;<br/>
<a href='/atanh.html'>atanh</a> &nbsp;<br/>
<a href='/cbrt.html'>cbrt</a> &nbsp;<br/>
<a href='/ceil.html'>ceil</a> &nbsp;<br/>
<a href='/copysign.html'>copysign</a> &nbsp;<br/>
<a href='/cos.html'>cos</a> &nbsp;<br/>
<a href='/cosh.html'>cosh</a> &nbsp;<br/>
<a href='/dbl.html'>dbl</a> &nbsp;<br/>
<a href='/erf.html'>erf</a> &nbsp;<br/>
<a href='/erfc.html'>erfc</a> &nbsp;<br/>
<a href='/exp.html'>exp</a> &nbsp;<br/>
<a href='/exp2.html'>exp2</a> &nbsp;<br/>
<a href='/floor.html'>floor</a> &nbsp;<br/>
<a href='/fmod.html'>fmod</a> &nbsp;<br/>
<a href='/hypot.html'>hypot</a> &nbsp;<br/>
<a href='/isinf.html'>isinf</a> &nbsp;<br/>
<a href='/isnan.html'>isnan</a> &nbsp;<br/>
<a href='/ldexp.html'>ldexp</a> &nbsp;<br/>
<a href='/lgamma.html'>lgamma</a> &nbsp;<br/>
<a href='/log.html'>log</a> &nbsp;<br/>
<a href='/log10.html'>log10</a> &nbsp;<br/>
<a href='/log2.html'>log2</a> &nbsp;<br/>
<a href='/math-functions.html'>math-functions</a> &nbsp;<br/>
<a href='/nextafter.html'>nextafter</a> &nbsp;<br/>
<a href='/num.html'>num</a> &nbsp;<br/>
<a href='/pow.html'>pow</a> &nbsp;<br/>
<a href='/round.html'>round</a> &nbsp;<br/>
<a href='/sin.html'>sin</a> &nbsp;<br/>
<a href='/sinh.html'>sinh</a> &nbsp;<br/>
<a href='/sqrt.html'>sqrt</a> &nbsp;<br/>
<a href='/tan.html'>tan</a> &nbsp;<br/>
<a href='/tanh.html'>tanh</a> &nbsp;<br/>
<a href='/trunc.html'>trunc</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='/documentation.html'>documentation</a><br/>
<a id='memory-handling.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:left;background-color:white;'><a href='https://rimstone-lang.com' style='border-bottom:0px'><img src='https://rimstone-lang.com/rimstone.png' style='width:180px;height:auto'/></a></div><div class='vhub' style='margin-top:10px;'>Memory handling</div><hr/>RimStone is a memory-safe language. <br/>
<br/>
Your application cannot access memory outside of valid statement results. Trying to do so will result in your program <a href='/error-handling.html'>erroring out</a>. <br/>
<br/>
Memory allocated by RimStone statements is tracked and freed at the end of the request. <br/>
<br/>
With RimStone there is no need to free memory manually. Memory is automatically freed even if it is no longer accessible to the program, thus preventing memory leaks; this is important for stability of long-running processes. <br/>
<br/>
Some statements (<a href='/new-tree.html'>new-tree</a>, <a href='/new-hash.html'>new-hash</a>, <a href='/new-list.html'>new-list</a>, <a href='/new-array.html'>new-array</a> and <a href='/set-string.html'>set-string</a>) have the option of allocating memory that won't get freed at the end of the request and is available to any request served by the same process. This kind of memory is called "process-scoped". A process-scoped string can be manually freed.<br/>
<br/>
RimStone handles memory references and assignments automatically, preventing dangling memory.<br/>
<br/>
String results of any RimStone <a href='/statements.html'>statements</a> will always create new memory, unless stated otherwise.<br/>
<div class="vsub"><a id="Open file descriptors"></a>Open file descriptors</div>
Any files opened by <a href='/open-file.html'>open-file</a> statement are automatically closed by RimStone at the end of the request. This enhances stability of long-running server processes because Linux system by default offers only about 1000 open files to a process. A bug can quickly exhaust this pool and cause a malfunction or a crash - RimStone prevents this by closing any such open files when the request ends. <br/>
<div class="vsub"><a id="See also"></a>See also</div>
 <a name='Memory'></a><span style="font-weight:bold;">Memory</span><br/>
<a href='/memory-handling.html'>memory-handling</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='/documentation.html'>documentation</a><br/>
<a id='mixing-doubles-and-numbers.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:left;background-color:white;'><a href='https://rimstone-lang.com' style='border-bottom:0px'><img src='https://rimstone-lang.com/rimstone.png' style='width:180px;height:auto'/></a></div><div class='vhub' style='margin-top:10px;'>Mixing doubles and numbers</div><hr/>Without conversion functions (see <a href='/math-functions.html'>math-functions</a>), double and number expressions do not mix, as they are separate types. One exception to this is using numbers (i.e. whole numbers) in double expressions, since in that case they are automatically promoted; the reason for this is that this conversion is lossless.<br/>
<br/>
The opposite is not true; doubles would generally lose precision when promoted to numbers, and for this you can use floor(), ceil(), round() etc. <br/>
<div class="vsub"><a id="Using numbers in double expressions is fine"></a>Using numbers in double expressions is fine</div>
For example, the following is valid, because a number (3) is promoted to a double:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_797' class=notranslate>
<span class="Statement">set-double</span> d = <span class="Constant">4</span><span class="Constant">.5</span> + <span class="Constant">3</span></pre>
<span id=rimstone_copied_797 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_797' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_797, code_797, rimstone_copied_797)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<div class="vsub"><a id="Using doubles in number expressions is not, however..."></a>Using doubles in number expressions is not, however...</div>
In general, a double cannot be automatically promoted to a number without loss. In some languages, there is an automatic promotion of this kind, however it is a bad idea and a source of potential bugs since the method of demotion can vary and often the developer isn't aware of it:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_798' class=notranslate>
<span class="Statement">set-number</span> n = <span class="Constant">3</span> + <span class="Constant">4</span><span class="Constant">.5</span>  <span class="Comment">// this won't work</span></pre>
<span id=rimstone_copied_798 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_798' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_798, code_798, rimstone_copied_798)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Instead you can use functions like num(), round(), ceil(), floor() etc. (see <a href='/math-functions.html'>math-functions</a>):<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_799' class=notranslate>
<span class="Statement">set-number</span> n = <span class="Constant">3</span> + round(<span class="Constant">4</span><span class="Constant">.5</span>)</pre>
<span id=rimstone_copied_799 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_799' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_799, code_799, rimstone_copied_799)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<div class="vsub"><a id="Comparisions"></a>Comparisions</div>
When it comes to comparisons, the type determination is performed from left to right. So the following works:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_800' class=notranslate>
<span class="Statement">if-true</span> <span class="Constant">3</span><span class="Constant">.5</span> &gt; <span class="Constant">3</span>
<span class="Statement">    @</span>Yes
<span class="Statement">end-if</span></pre>
<span id=rimstone_copied_800 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_800' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_800, code_800, rimstone_copied_800)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
because a double (3.5) comes first and then a number (3) is promoted to a double. However, this will not compile:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_801' class=notranslate>
<span class="Statement">if-true</span> <span class="Constant">3</span> &lt; <span class="Constant">3</span><span class="Constant">.5</span>
<span class="Statement">    @</span>Yes
<span class="Statement">end-if</span></pre>
<span id=rimstone_copied_801 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_801' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_801, code_801, rimstone_copied_801)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
because a number (3) comes first and then a double (3.5) cannot be automatically promoted to a number. When writing comparisons between the two, either use the appropriate conversion functions, or write double expressions first. For instance you can use dbl() function (see <a href='/math-functions.html'>math-functions</a>):<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_802' class=notranslate>
<span class="Statement">if-true</span> dbl(<span class="Constant">3</span>) &lt; <span class="Constant">3</span><span class="Constant">.5</span>
<span class="Statement">    @</span>Yes
<span class="Statement">end-if</span></pre>
<span id=rimstone_copied_802 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_802' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_802, code_802, rimstone_copied_802)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<div class="vsub"><a id="See also"></a>See also</div>
 <a name='Doubles'></a><span style="font-weight:bold;">Doubles</span><br/>
<a href='/abs-double.html'>abs-double</a> &nbsp;<br/>
<a href='/double-expressions.html'>double-expressions</a> &nbsp;<br/>
<a href='/double-string.html'>double-string</a> &nbsp;<br/>
<a href='/mixing-doubles-and-numbers.html'>mixing-doubles-and-numbers</a> &nbsp;<br/>
<a href='/set-double.html'>set-double</a> &nbsp;<br/>
<a href='/string-double.html'>string-double</a> &nbsp; <br/>
 <a name='Numbers'></a><span style="font-weight:bold;">Numbers</span><br/>
<a href='/abs-number.html'>abs-number</a> &nbsp;<br/>
<a href='/mixing-doubles-and-numbers.html'>mixing-doubles-and-numbers</a> &nbsp;<br/>
<a href='/number-expressions.html'>number-expressions</a> &nbsp;<br/>
<a href='/number-string.html'>number-string</a> &nbsp;<br/>
<a href='/set-number.html'>set-number</a> &nbsp;<br/>
<a href='/string-number.html'>string-number</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='/documentation.html'>documentation</a><br/>
<a id='mrim.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:left;background-color:white;'><a href='https://rimstone-lang.com' style='border-bottom:0px'><img src='https://rimstone-lang.com/rimstone.png' style='width:180px;height:auto'/></a></div><div class='vhub' style='margin-top:10px;'>Mrim</div><hr/><span style="font-weight:bold;">Purpose</span>: Run and manage services.<br/>
<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_804' class=notranslate>
mrim <span class="Statement">&lt;</span>options<span class="Statement">&gt;</span> <span class="Statement">&lt;</span>app name<span class="Statement">&gt;</span></pre>
<span id=rimstone_copied_804 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_804' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_804, code_804, rimstone_copied_804)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
mrim is a service manager. A service is started as a number of concurrent processes serving application requests, typically from reverse-proxy servers such as Apache, Nginx, HAProxy or others. Use mrim to create RimStone applications, including both service and command-line.<br/>
<br/>
A number of options are available to setup and manage the execution of a RimStone program as an application server, which can be accessed either via TCP/IP or a Unix domain socket. <br/>
<br/>
&lt;app name&gt; specifies the name of your application. Each application must have a unique name. &lt;app name&gt; may contain alphanumeric characters and an underscore, must start with a character and its maximum length is 30. <br/>
<br/>
mrim runs as a light-weight daemon (often requiring only 100-150K of resident RAM), with a separate instance for each application specified by the &lt;app name&gt;. When mrim starts your service, its current directory is set to $HOME/.rimstone/apps/&lt;app name&gt;/app. The permissions context is inherited from the caller, so the effective user ID, group ID and any supplemental groups are that of the caller. You can use tools like runuser to specifically set the permissions context.<br/>
<br/>
mrim will re-start service processes that exited or died, keeping the number of processes as specified, unless -n option is used. The number of worker processes can be specified with a fixed (-w) option, or it can dynamically change based on the load (-d option), including none at all. Hence, it is possible to have no worker processes at all, and they will be started when incoming request(s) come in, and stay up as determined by the request load.<br/>
<br/>
&lt;options&gt; are:<br/>
<ul><li>-i<br/>
Initialize the directory and file structure for application &lt;app name&gt;. If you are building application from source code, this must be executed in the source code directory; mrim will create file ".rimapp" which identifies the application so <a href='/rim.html'>rim</a> can run in the directory. The directory structure is setup in $HOME/.rimstone/apps/&lt;app name&gt; (see <a href='/directories.html'>directories</a>).<br/>
</li><li>-u &lt;OS user&gt;<br/>
The owner of your application. This is only used when initializing directory structure used by mrim (see -i option). Do not use it otherwise. It cannot be root. <br/>
</li><li>-r &lt;proxy group&gt;<br/>
The group of proxy web server (such as Apache or Nginx). This is only used when initializing directory structure used by mrim (see -i option). Do not use it otherwise. It restricts the ability to connect to your application only to the members of said group (in addition to the user who owns your server) when a Unix socket is used, otherwise anyone can connect. If you are not a member of this group, then you must invoke mrim with sudo - this is the only time this is necessary (see below an example on how to run with sudo).<br/>
</li><li>-f<br/>
Run in the foreground. The process does not return to the command line prompt until it is stopped. Useful for debugging and where foreground processing is required.<br/>
</li><li>-p &lt;port number&gt;<br/>
TCP/IP port number your service program will listen on (and accept connections), if you are using TCP/IP. You typically need to specify ProxyPass, "location" or similar FastCGI directives in your proxy web server so it can connect to your application. If you are using <a href='/Client-API.html'>Client-API</a> or <a href='/call-remote.html'>call-remote</a>, you would use "&lt;host name&gt;:&lt;port number&gt;", for instance "127.0.0.1:2301" if the server is local and &lt;port number&gt; is 2301. You can either use TCP/IP or Unix domain sockets (-x option). Typically, you would use Unix domain sockets if proxy web server runs on the same computer as your application server. If you specify neither -x nor -p, -x (unix domain socket) is the default. <br/>
</li><li>-x<br/>
Use Unix domain socket to connect from proxy web server to your application server. This socket is automatically created by mrim and its full path name is "$HOME/.rimstone/apps/&lt;app name&gt;/sock/sock" (you can connect to it via <a href='/Client-API.html'>Client-API</a>, <a href='/call-remote.html'>call-remote</a> etc.). When using a proxy web server (like Apache or Nginx), you typically need to specify ProxyPass, "location" or similar FastCGI directives so it can connect to your application. If you specify neither -x nor -p (TCP/IP socket), then -x (unix domain socket) is the default.<br/>
</li><li>-l &lt;backlog size&gt;<br/>
The size of socket listening backlog for incoming connections. It must be a number between 10 and SOMAXCONN-1, inclusive. The default is 400. Increase it if your system is very busy to improve performance.<br/>
</li><li>-d<br/>
Dynamically change the number of service processes ("worker" processes) to match the request load (adaptive mode). Use with "max-worker" and "min-worker" options. You cannot use -w with this option. The number of processes needed is determined based on any pending connections that are not answered by any running processes. If there are more incoming connections than processes, the number of processes will grow. If no such connections are detected (i.e. existing processes are capable of handling any incoming requests), the number of processes does not grow and will decrease to the point of minimum necessary number of workers. In that case, given release time (-t option), the number of processes will slowly decline until the incoming requests warrant otherwise. The number of running processes thus will fluctuate based on the actual load, these options, as well as --min-worker and --max-worker options. If neither -d nor -w is specified, -d is the default.<br/>
</li><li>--min-worker=&lt;min workers&gt;<br/>
Minimum number of service processes that run in adaptive mode (-d option). The default is 5. You can set this to 0 if needed to save memory. This option can be used only with -d option.<br/>
</li><li>--max-worker=&lt;max workers&gt;<br/>
Maximum number of service processes that run in adaptive mode (-d option). The default is 20. This option can be used only with -d option.<br/>
</li><li>-t &lt;release time&gt;<br/>
Timeout before the number of service processes is reduced to meet the reduced load. The default is 30 seconds, and it can be a value between 5 seconds and 86400 seconds (i.e. a day).<br/>
</li><li>-w &lt;worker processes&gt;<br/>
Number of parallel service processes ("worker" processes) that will be started. These processes do not exit; they serve incoming requests in parallel, one request per process. The number of processes should be guided by the concurrent user demand of your application. If neither -d nor -w is specified, -d is the default.<br/>
</li><li>-m &lt;command&gt;<br/>
Send a command to mrim daemon serving an application. &lt;command&gt; can be "start" (to start service processes), "stop" (to stop them), "restart" (to restart them), "quit" (to stop mrim daemon altogether) or "status" (to display status of mrim). <br/>
</li><li>-n<br/>
Do not restart service processes if they exit or die. However, in adaptive mode (-d option), this option has no effect.<br/>
</li><li>-g<br/>
Do not restart service processes when their executable changes. By default, they will be automatically restarted, which is useful when in development, or upgrading the server executable.<br/>
</li><li>-a &lt;args&gt;<br/>
Specify any command-line arguments for your application (see "arg-count" and "arg-value" clauses in <a href='/get-req.html'>get-req</a>). The &lt;args&gt; should be double-quoted as a whole, while use of single quotes to quote arguments that contain whitespaces is permitted. <br/>
</li><li>-z<br/>
Suppress HTTP headers in all <a href='/service.html'>service</a> handlers in the application. This is equivalent to having <a href='/silent-header.html'>silent-header</a> implied at the beginning of each <a href='/begin-handler.html'>service handler</a>. Use this option only if service is not used as a web service (i.e. the output will not have HTTP headers), or for testing or elsewhere where such headers may not be needed. Otherwise, you can use "--silent-header" option in <a href='/rim.html'>rim</a> or "RIM_SILENT_HEADER" environment variable in <a href='/Client-API.html'>Client-API</a> to control from command-line or a client if headers are output or not.<br/>
</li><li>-s &lt;sleep millisecs&gt;<br/>
The basis time period (in milliseconds) that mrim will sleep before checking for commands (specified by -m option), or check for dead service processes that need restarting. It can be between 100 and 5000 milliseconds. Smaller value will mean higher responsiveness but also higher CPU usage. The default value usually suffices, and should not be changed without due consideration.<br/>
</li><li>-e<br/>
Display verbose messages.<br/>
</li><li>-c &lt;program&gt;<br/>
Full absolute path to your service program. If omitted, the executable $HOME/.rimstone/bld/&lt;app name&gt;/&lt;app name&gt;.srvc is assumed, which is the standard RimStone service executable. If present, but without any slashes in it to indicate path (including current directory as ./), then this executable is assumed to be $HOME/.rimstone/bld/&lt;app name&gt;/&lt;program&gt;.<br/>
</li><li>-v<br/>
Display mrim version (which matches RimStone version) as well as copyright and license.<br/>
</li><li>-h,--help<br/>
Display help.<br/>
</li></ul>
mrim writes log file at $HOME/.rimstone/apps/&lt;app name&gt;/.mrimlog file. This file is overwritten when mrim starts, so it contains the log of the current daemon instance only.<br/>
<div class="vsub"><a id="Exit code"></a>Exit code</div>
When starting, mrim exits with 0 if successful and 1 if it is already running. If service executable cannot run, the exit code is -1. When creating application, mrim exits with 0 if successful, and -1 if not.<br/>
<div class="vsub"><a id="Process control"></a>Process control</div>
When mrim is told to stop the application (with "-m stop" arguments), it will send SIGTERM signal to all its children. All RimStone processes will complete the current request before exiting, assuming they are currently processing a request; otherwise they will exit immediately. <br/>
<br/>
If mrim is terminated without "-m stop", (for example with SIGKILL signal), then all its chidlren will immediately terminate with SIGKILL as well, regardless of whether they are currently processing any requests or not.<br/>
<div class="vsub"><a id="Examples"></a>Examples</div>
<ul><li>To begin using mrim for a specific application, you must initialize it first. For example, if your application name is "myapp" and the user who will run application is the currently logged-on user:<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_805' class=notranslate>
rim <span class="Special">-k</span> myapp</pre>
<span id=rimstone_copied_805 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_805' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_805, code_805, rimstone_copied_805)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Note that you need to use $(which mrim) when using sudo, since root's user directory has no RimStone installation and mrim executable won't be found. Since shell $() construct is executed by bash prior to the command, this will produce the correct executable path for mrim.<br/>
</li><li>The initialization needs to be done only once. Following the above, you can start your service application with 3 server processes:<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_806' class=notranslate>
mrim <span class="Special">-w</span> <span class="Constant">3</span> myapp</pre>
<span id=rimstone_copied_806 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_806' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_806, code_806, rimstone_copied_806)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
</li><li>To stop your service processes:<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_807' class=notranslate>
mrim <span class="Special">-m</span> <span class="Statement">stop</span> <span class="Special">--</span> myapp</pre>
<span id=rimstone_copied_807 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_807' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_807, code_807, rimstone_copied_807)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
</li><li>To restart them:<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_808' class=notranslate>
mrim <span class="Special">-m</span> restart <span class="Special">--</span> myapp</pre>
<span id=rimstone_copied_808 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_808' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_808, code_808, rimstone_copied_808)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
</li><li>To stop the server entirely (meaning to stop the resident mrim daemon serving your particular application):<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_809' class=notranslate>
mrim <span class="Special">-m</span> quit <span class="Special">--</span> myapp</pre>
<span id=rimstone_copied_809 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_809' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_809, code_809, rimstone_copied_809)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
</li><li>To view status of mrim daemon for your application:<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_810' class=notranslate>
mrim <span class="Special">-m</span> status <span class="Special">--</span> myapp</pre>
<span id=rimstone_copied_810 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_810' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_810, code_810, rimstone_copied_810)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
</li></ul>
<div class="vsub"><a id="Running your application server on system startup"></a>Running your application server on system startup</div>
If you want your application to run on system startup (so you don't have to run it manually), you can add it to systemd configuration. Here is an example (replace &lt;app name&gt; with your application name and &lt;app owner&gt; with the name of the Operating System user under which your application is installed):<br/>
<div class='ncode' style='position:relative;padding-right:16px;'>
<pre id='code_803' class=notranslate>
[Unit]
Description=RimStone Service Program Manager for [&lt;app name&gt;] application.
After=network.target

[Service]
Type=forking
ExecStart=/usr/bin/mrim &lt;app name&gt;
ExecStop=/usr/bin/mrim -m quit &lt;app name&gt;
KillMode=process
Restart=on-failure
User=&lt;app owner&gt;

[Install]
WantedBy=multi-user.target</pre>
<span id=rimstone_copied_803 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_803' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_803, code_803, rimstone_copied_803)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
The above should be saved in the directory given by the output of the following system command:<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_811' class=notranslate>
pkg-config systemd <span class="Special">--variable</span><span class="Statement">=</span>systemdsystemunitdir</pre>
<span id=rimstone_copied_811 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_811' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_811, code_811, rimstone_copied_811)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
The file should be saved as &lt;app name&gt;.service (or similar). Once saved, you can use standard systemctl commands to start, stop and restart your service.<br/>
<div class="vsub"><a id="See also"></a>See also</div>
 <a name='Service manager'></a><span style="font-weight:bold;">Service manager</span><br/>
<a href='/mrim.html'>mrim</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='/documentation.html'>documentation</a><br/>
<a id='new-array.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:left;background-color:white;'><a href='https://rimstone-lang.com' style='border-bottom:0px'><img src='https://rimstone-lang.com/rimstone.png' style='width:180px;height:auto'/></a></div><div class='vhub' style='margin-top:10px;'>New array</div><hr/><span style="font-weight:bold;">Purpose</span>: Create array.<br/>
<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_812' class=notranslate>
<span class="Statement">new-array</span> &lt;array&gt; [<span class="Identifier"> max-size</span> &lt;max-size&gt; ] [<span class="Identifier"> process-scope</span> ]  [<span class="Identifier"> type string</span> |<span class="Identifier"> number</span> |<span class="Identifier"> double</span> |<span class="Identifier"> bool</span> ]</pre>
<span id=rimstone_copied_812 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_812' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_812, code_812, rimstone_copied_812)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
new-array creates new &lt;array&gt;. An array is an indexed array, with a number as an index, and with a either a string, number, double or boolean as an element in the array. By default (without "type" clause), &lt;array&gt; is an array of strings. You can specify "string", "number", "double" or "bool" in "type" clause, in which case &lt;array&gt; is an array of strings, numbers, doubles or booleans respectively.<br/>
<br/>
An array is flexible, which means that it will grow as needed. By default, an array allocates room for 256 elements that can grow up to 1,000,000 elements, unless &lt;max-size&gt; number (in "max-size" clause) is specified in which case it can grow up to &lt;max-size&gt; elements. &lt;max-size&gt; must be at least 256.<br/>
<br/>
Note that max-size specifies only the upper limit of allocation. The actual amount of memory allocated can vary.<br/>
<br/>
You do not need to pre-size the array; rather when you write an element, it will resize automatically. For instance, you can set an array element arr[0] and then arr[1000] (with nothing in-between), the array will be automatically extended to accommodate. Note that it will not automatically contract when tailing elements are deleted. Use <a href='/purge-array.html'>purge-array</a> to delete all elements in the array and shrink its memory footprint when your processing is done.<br/>
<div class="vsub"><a id="Scope"></a>Scope</div>
Note that an array is accessible to the current request only, unless "process-scope" clause is used, in which case all requests served by a process can use it (see <a href='/do-once.html'>do-once</a> for a typical way to do this).<br/>
<br/>
If "process-scope" is used, then &lt;array&gt; will keep its data across all requests in a given process. See <a href='/write-array.html'>write-array</a> for an example of a process-scoped array.<br/>
<div class="vsub"><a id="Examples"></a>Examples</div>
Create a new array:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_813' class=notranslate>
<span class="Statement">new-array</span> arr</pre>
<span id=rimstone_copied_813 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_813' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_813, code_813, rimstone_copied_813)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<div class="vsub"><a id="See also"></a>See also</div>
 <a name='Array'></a><span style="font-weight:bold;">Array</span><br/>
<a href='/new-array.html'>new-array</a> &nbsp;<br/>
<a href='/purge-array.html'>purge-array</a> &nbsp;<br/>
<a href='/read-array.html'>read-array</a> &nbsp;<br/>
<a href='/write-array.html'>write-array</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='/documentation.html'>documentation</a><br/>
<a id='new-dir.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:left;background-color:white;'><a href='https://rimstone-lang.com' style='border-bottom:0px'><img src='https://rimstone-lang.com/rimstone.png' style='width:180px;height:auto'/></a></div><div class='vhub' style='margin-top:10px;'>New dir</div><hr/><span style="font-weight:bold;">Purpose</span>: Create new directory.<br/>
<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_814' class=notranslate>
<span class="Statement">new-dir</span> &lt;directory&gt; [<span class="Identifier"> mode</span> &lt;mode&gt; ] [<span class="Type"> status</span> &lt;status&gt; ]</pre>
<span id=rimstone_copied_814 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_814' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_814, code_814, rimstone_copied_814)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
new-dir creates new &lt;directory&gt;, which is a string that is an absolute or relative path. You can specify permission &lt;mode&gt; (in "mode" clause) as a number, based on standard Linux permissions (see <a href='/permissions.html'>permissions</a>).<br/>
<br/>
If "status" clauses is used, &lt;status&gt; is a number with value of RIM_OKAY if successful, RIM_ERR_EXIST if directory exists, or RIM_ERR_FAILED for other errors (in which case you can use "errno" clause in <a href='/get-req.html'>get-req</a> to find the specific reason why).<br/>
<div class="vsub"><a id="Examples"></a>Examples</div>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_815' class=notranslate>
<span class="Statement">new-dir</span> <span class="Constant">&quot;new_dir&quot;</span></pre>
<span id=rimstone_copied_815 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_815' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_815, code_815, rimstone_copied_815)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<div class="vsub"><a id="See also"></a>See also</div>
 <a name='Directories'></a><span style="font-weight:bold;">Directories</span><br/>
<a href='/change-dir.html'>change-dir</a> &nbsp;<br/>
<a href='/change-mode.html'>change-mode</a> &nbsp;<br/>
<a href='/delete-dir.html'>delete-dir</a> &nbsp;<br/>
<a href='/directories.html'>directories</a> &nbsp;<br/>
<a href='/new-dir.html'>new-dir</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='/documentation.html'>documentation</a><br/>
<a id='new-fifo.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:left;background-color:white;'><a href='https://rimstone-lang.com' style='border-bottom:0px'><img src='https://rimstone-lang.com/rimstone.png' style='width:180px;height:auto'/></a></div><div class='vhub' style='margin-top:10px;'>New fifo</div><hr/><span style="font-weight:bold;">Purpose</span>: Create FIFO list.<br/>
<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_816' class=notranslate>
<span class="Statement">new-fifo</span> &lt;list&gt;</pre>
<span id=rimstone_copied_816 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_816' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_816, code_816, rimstone_copied_816)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
new-fifo initializes new FIFO &lt;list&gt; (First In First Out). <br/>
<br/>
&lt;list&gt; contains data stored on a first-in, first out basis. Note that a list is accessible to the current process only.<br/>
<br/>
Information is retrieved (possibly many times, see <a href='/rewind-fifo.html'>rewind-fifo</a>) in the same order in which it was stored.<br/>
<br/>
The internal positions for <a href='/write-fifo.html'>write-fifo</a> and <a href='/read-fifo.html'>read-fifo</a> actions are separate so you can keep writing data to the list, and read it independently of writes in any number of retrieval passes by using <a href='/rewind-fifo.html'>rewind-fifo</a>.<br/>
<div class="vsub"><a id="Examples"></a>Examples</div>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_817' class=notranslate>
<span class="Statement">new-fifo</span> nf</pre>
<span id=rimstone_copied_817 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_817' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_817, code_817, rimstone_copied_817)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<div class="vsub"><a id="See also"></a>See also</div>
 <a name='FIFO'></a><span style="font-weight:bold;">FIFO</span><br/>
<a href='/delete-fifo.html'>delete-fifo</a> &nbsp;<br/>
<a href='/new-fifo.html'>new-fifo</a> &nbsp;<br/>
<a href='/purge-fifo.html'>purge-fifo</a> &nbsp;<br/>
<a href='/read-fifo.html'>read-fifo</a> &nbsp;<br/>
<a href='/rewind-fifo.html'>rewind-fifo</a> &nbsp;<br/>
<a href='/write-fifo.html'>write-fifo</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='/documentation.html'>documentation</a><br/>
<a id='new-hash.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:left;background-color:white;'><a href='https://rimstone-lang.com' style='border-bottom:0px'><img src='https://rimstone-lang.com/rimstone.png' style='width:180px;height:auto'/></a></div><div class='vhub' style='margin-top:10px;'>New hash</div><hr/><span style="font-weight:bold;">Purpose</span>: Create hash.<br/>
<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_818' class=notranslate>
<span class="Statement">new-hash</span> &lt;hash&gt; \
    [<span class="Identifier"> process-scope</span> ] \
    [<span class="Identifier"> hash-size</span> &lt;hash size&gt; ]</pre>
<span id=rimstone_copied_818 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_818' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_818, code_818, rimstone_copied_818)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
new-hash creates new &lt;hash&gt;. A hash is a collection of key/value pairs, called "elements". A value of an element is obtained based on its key value.<br/>
<div class="vsub"><a id="Scope"></a>Scope</div>
Note that a hash is accessible to the current request only, unless "process-scope" clause is used, in which case all requests served by a process can use it (see <a href='/do-once.html'>do-once</a> for a typical way to create a hash with a process scope). <br/>
<br/>
If "process-scope" is used, then &lt;hash&gt; will keep its data across all requests in a given process. See <a href='/write-hash.html'>write-hash</a> for an example of a process-scoped hash.<br/>
<div class="vsub"><a id="Sizing a hash"></a>Sizing a hash</div>
A hash can be of any size, as long as there is enough memory for it. The "hash-size" refers to the size of a hash table used to provide high-performance access to its elements based on a key.<br/>
<br/>
&lt;hash size&gt; is the number of "buckets" used by the hash (it is 10 by default). All hash elements with the same hash code are stored in a linked list within the same bucket. Greater &lt;hash size&gt; generally means less elements per bucket and better performance. However, memory usage grows with a bigger hash table, so &lt;hash size&gt; should be balanced based on the program needs.<br/>
<br/>
RimStone uses high-performing <a href='https://en.wikipedia.org/wiki/Fowler%E2%80%93Noll%E2%80%93Vo_hash_function'>FNV1_a</a> hash algorithm. Each element in a bucket list is lightweight, containing pointers to a key, value and next element in the linked list.<br/>
<br/>
&lt;hash size&gt; must be at least 256; if less, it will be set to 256.<br/>
<div class="vsub"><a id="Examples"></a>Examples</div>
Create a new hash with 5000 buckets:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_819' class=notranslate>
<span class="Statement">new-hash</span> h<span class="Identifier"> hash-size</span> <span class="Constant">5000</span></pre>
<span id=rimstone_copied_819 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_819' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_819, code_819, rimstone_copied_819)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
See <a href='/read-hash.html'>read-hash</a> for more examples.<br/>
<div class="vsub"><a id="See also"></a>See also</div>
 <a name='Hash'></a><span style="font-weight:bold;">Hash</span><br/>
<a href='/get-hash.html'>get-hash</a> &nbsp;<br/>
<a href='/new-hash.html'>new-hash</a> &nbsp;<br/>
<a href='/purge-hash.html'>purge-hash</a> &nbsp;<br/>
<a href='/read-hash.html'>read-hash</a> &nbsp;<br/>
<a href='/resize-hash.html'>resize-hash</a> &nbsp;<br/>
<a href='/write-hash.html'>write-hash</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='/documentation.html'>documentation</a><br/>
<a id='new-lifo.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:left;background-color:white;'><a href='https://rimstone-lang.com' style='border-bottom:0px'><img src='https://rimstone-lang.com/rimstone.png' style='width:180px;height:auto'/></a></div><div class='vhub' style='margin-top:10px;'>New lifo</div><hr/><span style="font-weight:bold;">Purpose</span>: Create LIFO list.<br/>
<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_820' class=notranslate>
<span class="Statement">new-lifo</span> &lt;list&gt;</pre>
<span id=rimstone_copied_820 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_820' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_820, code_820, rimstone_copied_820)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
new-lifo initializes new LIFO &lt;list&gt; (Last In First Out).<br/>
<br/>
&lt;list&gt; contains data stored on a last-in, first-out basis. Note that a list is accessible to the current process only.<br/>
<br/>
Information is retrieved (possibly many times, see <a href='/rewind-lifo.html'>rewind-lifo</a>) in the opposite order in which it was stored.<br/>
<div class="vsub"><a id="Examples"></a>Examples</div>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_821' class=notranslate>
<span class="Statement">new-lifo</span> mylifo</pre>
<span id=rimstone_copied_821 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_821' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_821, code_821, rimstone_copied_821)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<div class="vsub"><a id="See also"></a>See also</div>
 <a name='LIFO'></a><span style="font-weight:bold;">LIFO</span><br/>
<a href='/delete-lifo.html'>delete-lifo</a> &nbsp;<br/>
<a href='/get-lifo.html'>get-lifo</a> &nbsp;<br/>
<a href='/new-lifo.html'>new-lifo</a> &nbsp;<br/>
<a href='/purge-lifo.html'>purge-lifo</a> &nbsp;<br/>
<a href='/read-lifo.html'>read-lifo</a> &nbsp;<br/>
<a href='/rewind-lifo.html'>rewind-lifo</a> &nbsp;<br/>
<a href='/write-lifo.html'>write-lifo</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='/documentation.html'>documentation</a><br/>
<a id='new-list.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:left;background-color:white;'><a href='https://rimstone-lang.com' style='border-bottom:0px'><img src='https://rimstone-lang.com/rimstone.png' style='width:180px;height:auto'/></a></div><div class='vhub' style='margin-top:10px;'>New list</div><hr/><span style="font-weight:bold;">Purpose</span>: Create linked list.<br/>
<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_822' class=notranslate>
<span class="Statement">new-list</span> &lt;list&gt; [<span class="Identifier"> process-scope</span> ]</pre>
<span id=rimstone_copied_822 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_822' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_822, code_822, rimstone_copied_822)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
new-list initializes new linked &lt;list&gt;, where each element is connected to the previous and next ones. <br/>
<br/>
In a linked &lt;list&gt; data that can be added anywhere in the list, and also accessed anywhere as well. Access to a list is sequential, meaning you can position to the first, last, next or previous element. Note that a list is accessible to the current process only.<br/>
<br/>
Generally information is stored in a linked list, and retrieved (possibly many times) in any order later.<br/>
<br/>
A list has a current position where an element can be read, updated, inserted or deleted (via <a href='/read-list.html'>read-list</a>, <a href='/write-list.html'>write-list</a> and <a href='/delete-list.html'>delete-list</a>), and this position can be explicitly changed with <a href='/position-list.html'>position-list</a>.<br/>
<div class="vsub"><a id="Scope"></a>Scope</div>
A linked list is accessible to the current process only, unless "process-scope" clause is used, in which case all requests served by the process can use it (see <a href='/do-once.html'>do-once</a> for a typical way to create an object with a process scope). If "process-scope" is used, then elements of the list will keep their value between requests in the same process. <br/>
<br/>
See <a href='/write-list.html'>write-list</a> for an example of a process-scoped list.<br/>
<div class="vsub"><a id="Examples"></a>Examples</div>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_823' class=notranslate>
<span class="Statement">new-list</span> mylist</pre>
<span id=rimstone_copied_823 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_823' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_823, code_823, rimstone_copied_823)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<div class="vsub"><a id="See also"></a>See also</div>
 <a name='Linked list'></a><span style="font-weight:bold;">Linked list</span><br/>
<a href='/delete-list.html'>delete-list</a> &nbsp;<br/>
<a href='/get-list.html'>get-list</a> &nbsp;<br/>
<a href='/new-list.html'>new-list</a> &nbsp;<br/>
<a href='/position-list.html'>position-list</a> &nbsp;<br/>
<a href='/purge-list.html'>purge-list</a> &nbsp;<br/>
<a href='/read-list.html'>read-list</a> &nbsp;<br/>
<a href='/write-list.html'>write-list</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='/documentation.html'>documentation</a><br/>
<a id='new-message.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:left;background-color:white;'><a href='https://rimstone-lang.com' style='border-bottom:0px'><img src='https://rimstone-lang.com/rimstone.png' style='width:180px;height:auto'/></a></div><div class='vhub' style='margin-top:10px;'>New message</div><hr/><span style="font-weight:bold;">Purpose</span>: Create new message.<br/>
<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_824' class=notranslate>
<span class="Statement">new-message</span> &lt;message&gt; [<span class="Identifier"> from</span> &lt;string&gt; ]</pre>
<span id=rimstone_copied_824 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_824' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_824, code_824, rimstone_copied_824)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
new-message will create a new &lt;message&gt; object.<br/>
<br/>
If &lt;string&gt; is specified (in "from" clause), then it is used to create a &lt;message&gt; from it. The &lt;string&gt; must be in <a href='/SEMI.html'>SEMI</a> format, which may be in request's input, from <a href='/get-message.html'>get-message</a>, from reading a file etc; in this case &lt;message&gt; can only be read from with <a href='/read-message.html'>read-message</a>.<br/>
<br/>
If new-message is used without "from" clause, data can be added to &lt;message&gt; with <a href='/write-message.html'>write-message</a>. <br/>
<div class="vsub"><a id="Examples"></a>Examples</div>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_825' class=notranslate>
<span class="Statement">begin-handler</span> /msg<span class="Identifier"> public</span>
<span class="Statement">    new-message</span> msg
<span class="Statement">    write-message</span> msg<span class="Identifier"> key</span> <span class="Constant">&quot;weather&quot;</span><span class="Identifier"> value</span> <span class="Constant">&quot;nice&quot;</span>
<span class="Statement">    write-message</span> msg<span class="Identifier"> key</span> <span class="Constant">&quot;distance&quot;</span><span class="Identifier"> value</span> <span class="Constant">&quot;near&quot;</span>
<span class="Statement">    start-loop</span>
<span class="Statement">        read-message</span> msg<span class="Type"> key</span> k<span class="Type"> value</span> v<span class="Type"> status</span> s
<span class="Statement">        if-true</span> s<span class="Identifier"> not-equal</span> RIM_OKAY
<span class="Statement">            break-loop</span>
<span class="Statement">        end-if</span>
<span class="Statement">        @</span>Key is <span class="Statement">&lt;&lt;print-out</span> k<span class="Statement">&gt;&gt;</span> and value is <span class="Statement">&lt;&lt;print-out</span> v<span class="Statement">&gt;&gt;</span>
<span class="Statement">    end-loop</span>
<span class="Statement">end-handler</span></pre>
<span id=rimstone_copied_825 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_825' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_825, code_825, rimstone_copied_825)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<div class="vsub"><a id="See also"></a>See also</div>
 <a name='Messages'></a><span style="font-weight:bold;">Messages</span><br/>
<a href='/get-message.html'>get-message</a> &nbsp;<br/>
<a href='/new-message.html'>new-message</a> &nbsp;<br/>
<a href='/read-message.html'>read-message</a> &nbsp;<br/>
<a href='/SEMI.html'>SEMI</a> &nbsp;<br/>
<a href='/write-message.html'>write-message</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='/documentation.html'>documentation</a><br/>
<a id='new-remote.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:left;background-color:white;'><a href='https://rimstone-lang.com' style='border-bottom:0px'><img src='https://rimstone-lang.com/rimstone.png' style='width:180px;height:auto'/></a></div><div class='vhub' style='margin-top:10px;'>New remote</div><hr/><span style="font-weight:bold;">Purpose</span>: Create resources for a service call.<br/>
<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_827' class=notranslate>
<span class="Statement">new-remote</span> &lt;service&gt; \
    (<span class="Identifier"> local</span> &lt;app name&gt; ) | (<span class="Identifier"> location</span> &lt;location&gt; ) \
   <span class="Identifier"> url-path</span> &lt;service URL&gt; |
        ( \
       <span class="Identifier"> app-path</span> &lt;app path&gt; \
       <span class="Identifier"> request-path</span> &lt;request path&gt; \
        [<span class="Identifier"> url-params</span> &lt;url params&gt; ] \
        ) \
    [<span class="Identifier"> request-body content</span> &lt;content&gt; \
        [<span class="Identifier"> content-length</span> &lt;content length&gt; ] \
        [<span class="Identifier"> content-type</span> &lt;content type&gt; ] ] \
    [<span class="Identifier"> method</span> &lt;request method&gt; ] \
    [<span class="Identifier"> environment</span> &lt;name&gt;=&lt;value&gt; [<span class="Statement"> ,</span> ... ] ] \
    [<span class="Identifier"> timeout</span> &lt;timeout&gt; ]</pre>
<span id=rimstone_copied_827 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_827' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_827, code_827, rimstone_copied_827)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
new-remote will create resources needed for a service call (see <a href='/call-remote.html'>call-remote</a>); these resources are contained in variable &lt;service&gt;.<br/>
<div class="vsub"><a id="Local or location"></a>Local or location</div>
If "local" clause is used, then service is a RimStone application running on the same computer, and the name of this application is string &lt;app name&gt;. <br/>
<br/>
If "local" is not used, then you must use "location" clause. &lt;location&gt; (in "location" clause) is a string representing either a Unix socket or a TCP socket of a remote service, and is:<br/>
<ul><li>for a Unix socket, a fully qualified name to a Unix socket file used to communicate with the service (for a RimStone server, it's "$HOME/.rimstone/apps/&lt;app name&gt;/sock/sock", where &lt;app name&gt; is the application name), or<br/>
</li><li>for a TCP socket, a host name and a port number in the form of "&lt;host name&gt;:&lt;port number&gt;", specifying where the service is listening on (for instance "127.0.0.1:2301" if the service is local and runs on TCP port 2301).</li></ul>
<div class="vsub"><a id="url-path or its components"></a>url-path or its components</div>
If "url-path" is used, then it's a <a href='/request.html'>URL path</a> to a service. <br/>
<br/>
If "url-path" is not used, then you must use "app-path" and "request-path" clauses with optional "url-params" clause. &lt;app path&gt; string (in "app-path" clause) is the application path used to access a URL resource in service &lt;location&gt;, &lt;request path&gt; string (in "request-path" clause) is the <a href='/request.html'>request</a> path used to access a URL resource in service &lt;location&gt;, while &lt;url params&gt; string (in "url-params" clause) is the URL parameters, see <a href='/request.html'>request</a>.<br/>
<div class="vsub"><a id="Optional"></a>Optional</div>
&lt;request method&gt; string (in "method" clause) is a request method, such as "GET", "POST", "DELETE", "PUT" etc. The default is "GET".<br/>
<br/>
Request body (i.e. body content) is specified via "request-body" clause. Within it, &lt;content&gt; (in "content" subclause) is the actual body content string. &lt;content length&gt; &nbsp;(in "content-length" subclause) specifies the number of bytes in &lt;content&gt;; by default it will be the string length of &lt;content&gt; (see <a href='/string-length.html'>string-length</a>). Mandatory &lt;content type&gt; (in "content-type" subclause) is the body content type (for instance &nbsp;"application/json" or "image/jpg").<br/>
<br/>
&lt;url params&gt; string (in "url-params" clause) is the URL parameters, see <a href='/request.html'>request</a>.<br/>
<br/>
&lt;environment&gt; (in "environment" clause) is the environment passed to a service call, in the form of "name"="value" string list where such environment elements are separated by a comma. This way you can send any environment variables to the request executed remotely. For a RimStone server, you can access those variables in a remote request by using "environment" clause of <a href='/get-sys.html'>get-sys</a> statement. There is no limit on the number of environment variables you can use this way, other than the underlying communication library.<br/>
<br/>
&lt;timeout&gt; (in "timeout" clause) is the number of seconds after which a service call will timeout; meaning the duration of a service call should not exceed this period of time. For no timeout, specify 0. Note that time needed for a DNS resolution of &lt;location&gt; is not counted in &lt;timeout&gt;. Maximum value is 86400 seconds. Even though it's optional, it is recommended to specify &lt;timeout&gt; in order to avoid a RimStone process waiting for a very long time. Note that even if your service call times out, the actual request executing on the server may continue until it's done.<br/>
<div class="vsub"><a id="Examples"></a>Examples</div>
In this example, 3 service calls are created ("srv1", "srv2" and "srv3"), and they will each make a service request. <br/>
<br/>
Each service request will add a key ("key1" with data "data_1", "key2" with data "data_2" and "key3" with data "data_3"). <br/>
<br/>
All three service calls connect via Unix socket. <br/>
<br/>
A full URL path of a service request (for "srv1" for example), would be "/app/manage-keys/op=add/key=key_1/data=data_1" (note that "app" is the application name and "manage-keys" is the request handler that provides the service).<br/>
<br/>
Copy this to "manage_keys.rim" source file:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_829' class=notranslate>
<span class="Statement">%%</span> /manage-keys<span class="Identifier"> public</span>
<span class="Statement">   do-once</span>
<span class="Statement">   new-hash</span> h<span class="Identifier"> hash-size</span> <span class="Constant">1024</span><span class="Identifier"> process-scope</span>
<span class="Statement">   end-do-once</span>

   <span class="Comment">// Get input parameters</span>
<span class="Statement">   get-param</span> op
<span class="Statement">   get-param</span> key
<span class="Statement">   get-param</span> data<span class="Identifier"> default-value</span> <span class="Constant">&quot;&quot;</span>

<span class="Statement">   if-true</span> op<span class="Identifier"> equal</span> <span class="Constant">&quot;add&quot;</span> <span class="Comment">// Add data to hash,</span>
<span class="Statement">       write-hash</span> h<span class="Identifier"> key</span> (key)<span class="Identifier"> value</span> data<span class="Type"> status</span> st
<span class="Statement">       @</span>Added [<span class="Statement">&lt;&lt;print-out</span> key<span class="Statement">&gt;&gt;</span>]
<span class="Statement">   else-if</span> op<span class="Identifier"> equal</span> <span class="Constant">&quot;delete&quot;</span> <span class="Comment">// Delete data and obtain the value deleted</span>
<span class="Statement">       read-hash</span> h<span class="Type"> key</span> (key)<span class="Type"> value</span> val \
          <span class="Identifier"> delete</span> \
          <span class="Type"> status</span> st
<span class="Statement">       if-true</span> st<span class="Identifier"> equal</span> RIM_ERR_EXIST
<span class="Statement">           @</span>Not found [<span class="Statement">&lt;&lt;print-out</span> key<span class="Statement">&gt;&gt;</span>]
<span class="Statement">       else-if</span>
           <span class="Comment">// If found, then delete key and value</span>
<span class="Statement">           @</span>Deleted [<span class="Statement">&lt;&lt;print-out</span> val<span class="Statement">&gt;&gt;</span>]
<span class="Statement">           delete-string</span> val
<span class="Statement">       end-if</span>
<span class="Statement">   else-if</span> op<span class="Identifier"> equal</span> <span class="Constant">&quot;query&quot;</span> <span class="Comment">// Query hash based on key value</span>
<span class="Statement">       read-hash</span> h<span class="Type"> key</span> (key)<span class="Type"> value</span> val<span class="Type"> status</span> st
<span class="Statement">       if-true</span> st<span class="Identifier"> equal</span> RIM_ERR_EXIST
<span class="Statement">           @</span>Not found, queried [<span class="Statement">&lt;&lt;print-out</span> key<span class="Statement">&gt;&gt;</span>]
<span class="Statement">       else-if</span>
<span class="Statement">           @</span>Value [<span class="Statement">&lt;&lt;print-out</span> val<span class="Statement">&gt;&gt;</span>]
<span class="Statement">       end-if</span>
<span class="Statement">   end-if</span>
<span class="Statement">%%</span></pre>
<span id=rimstone_copied_829 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_829' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_829, code_829, rimstone_copied_829)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Then <a href='/call-remote.html'>call-remote</a> will make three service calls to the above request handler in parallel (i.e. as threads executing at the same time). You can examine if everything went okay, how many threads have started, and how many finished with a reply from the service (this means any kind of reply, even if an error). Finally, the output from each call is displayed (that's "data" clause in <a href='/read-remote.html'>read-remote</a> statement at the end).<br/>
<br/>
Create file "srv.rim" and copy to it this code:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_831' class=notranslate>
<span class="Statement">begin-handler</span> /srv<span class="Identifier"> public</span>
 <span class="Comment">// Create resources (prepare) for </span><span class="Constant">3</span><span class="Comment"> service calls</span>
 <span class="Comment">// We pass environment variable RIM_SILENT_HEADER to these calls</span>
 <span class="Comment">// so they don't emit HTTP header</span>
<span class="Statement"> new-remote</span> srv1<span class="Identifier"> local</span> <span class="Constant">&quot;app&quot;</span> \
    <span class="Identifier"> url-path</span> <span class="Constant">&quot;/app/manage-keys/op=add/key=key1/data=data1&quot;</span> \
    <span class="Identifier"> environment</span> <span class="Constant">&quot;RIM_SILENT_HEADER&quot;</span>=<span class="Constant">&quot;yes&quot;</span>
<span class="Statement"> new-remote</span> srv2<span class="Identifier"> local</span> <span class="Constant">&quot;app&quot;</span> \
    <span class="Identifier"> url-path</span> <span class="Constant">&quot;/app/manage-keys/op=add/key=key2/data=data2&quot;</span> \
    <span class="Identifier"> environment</span> <span class="Constant">&quot;RIM_SILENT_HEADER&quot;</span>=<span class="Constant">&quot;yes&quot;</span>
<span class="Statement"> new-remote</span> srv3<span class="Identifier"> local</span> <span class="Constant">&quot;app&quot;</span> \
    <span class="Identifier"> url-path</span> <span class="Constant">&quot;/app/manage-keys/op=add/key=key3/data=data3&quot;</span> \
    <span class="Identifier"> environment</span> <span class="Constant">&quot;RIM_SILENT_HEADER&quot;</span>=<span class="Constant">&quot;yes&quot;</span>
 <span class="Comment">// Make </span><span class="Constant">3</span><span class="Comment"> service calls in parallel, each in it own thread</span>
<span class="Statement"> call-remote</span> srv1, srv2, srv3<span class="Type"> status</span> st \
    <span class="Type"> started</span> start \
    <span class="Type"> finished-okay</span> fok
 <span class="Comment">// Check if all calls were completed</span>
<span class="Statement"> if-true</span> st<span class="Identifier"> equal</span> RIM_OKAY
<span class="Statement">     @</span>No errors from call-remote
<span class="Statement"> end-if</span>
<span class="Statement"> if-true</span> start<span class="Identifier"> equal</span> <span class="Constant">3</span>
<span class="Statement">     @</span>All three service calls started.
<span class="Statement"> end-if</span>
<span class="Statement"> if-true</span> fok<span class="Identifier"> equal</span> <span class="Constant">3</span>
<span class="Statement">     @</span>All three service calls finished.
<span class="Statement"> end-if</span>
<span class="Statement"> read-remote</span> srv1<span class="Identifier"> data</span> rdata1
<span class="Statement"> read-remote</span> srv2<span class="Identifier"> data</span> rdata2
<span class="Statement"> read-remote</span> srv3<span class="Identifier"> data</span> rdata3
<span class="Statement"> print-out</span> rdata1
<span class="Statement"> @</span>
<span class="Statement"> print-out</span> rdata2
<span class="Statement"> @</span>
<span class="Statement"> print-out</span> rdata3
<span class="Statement"> @</span>
<span class="Statement">end-handler</span></pre>
<span id=rimstone_copied_831 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_831' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_831, code_831, rimstone_copied_831)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Create the application:<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_828' class=notranslate>
rim <span class="Special">-k</span> app</pre>
<span id=rimstone_copied_828 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_828' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_828, code_828, rimstone_copied_828)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Make it:<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_830' class=notranslate>
rim <span class="Special">-q</span></pre>
<span id=rimstone_copied_830 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_830' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_830, code_830, rimstone_copied_830)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Run it:<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_832' class=notranslate>
mrim <span class="Special">-w</span> <span class="Constant">1</span> app</pre>
<span id=rimstone_copied_832 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_832' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_832, code_832, rimstone_copied_832)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_833' class=notranslate>
rim <span class="Special">-r</span> <span class="Special">--req</span><span class="Statement">=</span><span class="Statement">&quot;</span><span class="Constant">/srv</span><span class="Statement">&quot;</span> <span class="Special">--exec</span> <span class="Special">--silent-header</span></pre>
<span id=rimstone_copied_833 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_833' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_833, code_833, rimstone_copied_833)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
And the result is (assuming you have started hash example above):<br/>
<div class='ncode' style='position:relative;padding-right:16px;'>
<pre id='code_826' class=notranslate>
No errors from call-remote
All three service calls started.
All three service calls finished.
Added [key1]

Added [key2]

Added [key3]</pre>
<span id=rimstone_copied_826 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_826' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_826, code_826, rimstone_copied_826)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<div class="vsub"><a id="See also"></a>See also</div>
 <a name='Distributed computing'></a><span style="font-weight:bold;">Distributed computing</span><br/>
<a href='/call-remote.html'>call-remote</a> &nbsp;<br/>
<a href='/new-remote.html'>new-remote</a> &nbsp;<br/>
<a href='/read-remote.html'>read-remote</a> &nbsp;<br/>
<a href='/run-remote.html'>run-remote</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='/documentation.html'>documentation</a><br/>
<a id='new-string.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:left;background-color:white;'><a href='https://rimstone-lang.com' style='border-bottom:0px'><img src='https://rimstone-lang.com/rimstone.png' style='width:180px;height:auto'/></a></div><div class='vhub' style='margin-top:10px;'>New string</div><hr/><span style="font-weight:bold;">Purpose</span>: Create a new string.<br/>
<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_834' class=notranslate>
<span class="Statement">new-string</span> &lt;variable&gt;<span class="Identifier"> length</span> &lt;length&gt;</pre>
<span id=rimstone_copied_834 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_834' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_834, code_834, rimstone_copied_834)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
New empty string &lt;variable&gt; of length &lt;length&gt; is allocated. The &lt;variable&gt; is an empty string (i.e. ""), however &lt;length&gt; bytes are allocated.<br/>
<br/>
new-string is useful when you need to create a block of memory of certain length, and then change its individual bytes (such as with set-string).<br/>
<br/>
Note that if &lt;length&gt; is a numeric literal, then &lt;variable&gt; will be allocated statically if &lt;length&gt; is lesser than 1024 bytes; this makes such strings faster at run time, especially for server processes. In all other cases, &lt;variable&gt; is dynamically allocated from the heap.<br/>
<br/>
Also note that &lt;variable&gt; (like all strings, text, binary and however allocated) has an implicit null byte placed after &lt;length&gt; bytes.<br/>
<div class="vsub"><a id="Examples"></a>Examples</div>
Create new string and alter it with new content and to be of length 2:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_835' class=notranslate>
<span class="Statement">new-string</span> my_string<span class="Identifier"> length</span> <span class="Constant">30</span>
<span class="Statement">set-string</span> my_string[<span class="Constant">0</span>] = 'A'
<span class="Statement">set-string</span> my_string[<span class="Constant">1</span>] = 'B'
<span class="Statement">set-string</span> my_string<span class="Identifier"> length</span> <span class="Constant">2</span>
<span class="Statement">print-out</span> my_string<span class="Identifier"> new-line</span></pre>
<span id=rimstone_copied_835 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_835' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_835, code_835, rimstone_copied_835)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
The output of above code would be "AB".<br/>
<div class="vsub"><a id="See also"></a>See also</div>
 <a name='Strings'></a><span style="font-weight:bold;">Strings</span><br/>
<a href='/copy-string.html'>copy-string</a> &nbsp;<br/>
<a href='/count-substring.html'>count-substring</a> &nbsp;<br/>
<a href='/delete-string.html'>delete-string</a> &nbsp;<br/>
<a href='/double-string.html'>double-string</a> &nbsp;<br/>
<a href='/lower-string.html'>lower-string</a> &nbsp;<br/>
<a href='/match-regex.html'>match-regex</a> &nbsp;<br/>
<a href='/new-string.html'>new-string</a> &nbsp;<br/>
<a href='/number-string.html'>number-string</a> &nbsp;<br/>
<a href='/read-split.html'>read-split</a> &nbsp;<br/>
<a href='/replace-string.html'>replace-string</a> &nbsp;<br/>
<a href='/scan-string.html'>scan-string</a> &nbsp;<br/>
<a href='/set-string.html'>set-string</a> &nbsp;<br/>
<a href='/split-string.html'>split-string</a> &nbsp;<br/>
<a href='/string-double.html'>string-double</a> &nbsp;<br/>
<a href='/string-expressions.html'>string-expressions</a> &nbsp;<br/>
<a href='/string-length.html'>string-length</a> &nbsp;<br/>
<a href='/string-number.html'>string-number</a> &nbsp;<br/>
<a href='/trim-string.html'>trim-string</a> &nbsp;<br/>
<a href='/upper-string.html'>upper-string</a> &nbsp;<br/>
<a href='/write-string.html'>write-string</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='/documentation.html'>documentation</a><br/>
<a id='new-tree.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:left;background-color:white;'><a href='https://rimstone-lang.com' style='border-bottom:0px'><img src='https://rimstone-lang.com/rimstone.png' style='width:180px;height:auto'/></a></div><div class='vhub' style='margin-top:10px;'>New tree</div><hr/><span style="font-weight:bold;">Purpose</span>: Create new tree structure for fast key searching.<br/>
<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_836' class=notranslate>
<span class="Statement">new-tree</span> &lt;tree&gt; \
    [<span class="Identifier"> key-as</span> <span class="Constant">&quot;positive integer&quot;</span> ] \
    [<span class="Identifier"> unsorted</span> ]
    [<span class="Identifier"> process-scope</span> ]</pre>
<span id=rimstone_copied_836 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_836' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_836, code_836, rimstone_copied_836)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
new-tree initializes a new &lt;tree&gt;. <br/>
<br/>
An tree is a hierarchical balanced binary tree structure that allows data access in O(log N) time, meaning that at most approximately "log N" comparisons are needed to find a key in it. For instance, that would mean to find a key among 1,000,000 keys it would take at most about 20 comparisons. By default (if "unsorted" is omitted), finding the next lesser or greater key is O(1), meaning iterating in a sorted order is nearly instantaneous. A tree is a hybrid tree structure (taking elements from both B and AVL varieties) optimized for in-memory access.<br/>
<br/>
Information in a tree can be inserted, updated or deleted in any order, and accessed in any order as well.<br/>
<br/>
Information in a tree is organized in nodes. Each node has a key and a value. A key is used to search for a node in a tree. By default (if "unsorted" is omitted), all nodes in a RimStone tree are also connected in an ordered linked list, allowing for very fast range searches.<br/>
<div class="vsub"><a id="Keys and data"></a>Keys and data</div>
A node in a tree consists of two strings: key and value. There is no limit on the number of nodes in the tree, other than available memory. Each key in the tree must be unique. Keys should be as short as possible. Generally, longer keys take longer to search for, insert or delete. <br/>
<div class="vsub"><a id="Key comparison"></a>Key comparison</div>
In order for any data tree structure to function, a key comparison must be performed certain number of times in order to find a specific key. Keys are compared using C's strcmp() function, meaning using ASCII lexicographic order.<br/>
<div class="vsub"><a id="Number keys"></a>Number keys</div>
"key-as" clause allows one to treat a key as something other than a string when it comes to ordering. When "positive integer" value is used, it will treat a key as a string representation of a positive integer number. Such numbers must be zero or positive integers in the 64 bit range, and they must not contain leading zeros, spaces or other prefix (or suffix) characters. For example, key strings may be "0", "123" or "891347". With this clause, sorting these strings according to their converted numerical values is much faster than using schemes such as prefixing numbers with zeros or spaces.<br/>
<br/>
Note that when using "positive integer", you can use numbers in any base (from 2 to 36). In fact, numbers expressed in a higher base are generally faster to search for, because they are shorter in length.<br/>
<div class="vsub"><a id="Unsorted tree"></a>Unsorted tree</div>
If "unsorted" clause is used, &lt;tree&gt; will not be sorted in a double-linked list, which means that finding the next smaller or next greater node in repetition (i.e. range search) will be done by using the tree structure and not a linked list. This is slower, as each such search is generally done in O(log N) time. Regardless, you can perform range searches in either case (see <a href='/use-cursor.html'>use-cursor</a>).<br/>
<br/>
As a rule of thumb, if you do not need range searches or your memory is scarce, use "unsorted" as it will save 2 pointers (i.e. 16 bytes) per key and insertion/deletion will be a bit faster, but be aware that range searches will be slower. <br/>
<br/>
If you need faster range searches or the extra memory is not an issue (it would be for instance extra 16MB per 1,0000,0000 keys), then do not use "unsorted", as your range searches will be faster. Note that in this case, insertion and deletion are a bit slower because they need to maintain a double linked list, however in general the effect is minimized by faster range searches. <br/>
<div class="vsub"><a id="Scope"></a>Scope</div>
A tree is accessible to the current process only, unless "process-scope" clause is used, in which case all requests served by the process can use it (see <a href='/do-once.html'>do-once</a> for a typical way to create an object with a process scope). If "process-scope" is used, then &lt;tree&gt; that will keep its nodes between all requests served by the same process; otherwise &lt;tree&gt; is purged at the end of request. <br/>
<div class="vsub"><a id="Examples"></a>Examples</div>
Create a new tree:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_837' class=notranslate>
<span class="Statement">new-tree</span> my_tree</pre>
<span id=rimstone_copied_837 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_837' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_837, code_837, rimstone_copied_837)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<div class="vsub"><a id="See also"></a>See also</div>
 <a name='Tree'></a><span style="font-weight:bold;">Tree</span><br/>
<a href='/delete-tree.html'>delete-tree</a> &nbsp;<br/>
<a href='/get-tree.html'>get-tree</a> &nbsp;<br/>
<a href='/new-tree.html'>new-tree</a> &nbsp;<br/>
<a href='/purge-tree.html'>purge-tree</a> &nbsp;<br/>
<a href='/read-tree.html'>read-tree</a> &nbsp;<br/>
<a href='/use-cursor.html'>use-cursor</a> &nbsp;<br/>
<a href='/write-tree.html'>write-tree</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='/documentation.html'>documentation</a><br/>
<a id='nextafter.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:left;background-color:white;'><a href='https://rimstone-lang.com' style='border-bottom:0px'><img src='https://rimstone-lang.com/rimstone.png' style='width:180px;height:auto'/></a></div><div class='vhub' style='margin-top:10px;'>Nextafter</div><hr/><span style="font-weight:bold;">Purpose</span>: Next representable double function.<br/>
<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_838' class=notranslate>
nextafter( &lt;var1&gt;, &lt;var2&gt; )</pre>
<span id=rimstone_copied_838 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_838' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_838, code_838, rimstone_copied_838)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
nextafter returns return the next representable double following &lt;var1&gt; in the direction of &lt;var2&gt;. &nbsp;If &lt;var2&gt; is less than &lt;var1&gt;, it returns the largest representable number less than &lt;var1&gt;. If &lt;var1&gt; and &lt;var2&gt; are equal, the functions return &lt;var2&gt;.<br/>
<br/>
&lt;var1&gt; and &lt;var2&gt; are a number or a double and the result is a double.<br/>
<div class="vsub"><a id="Examples"></a>Examples</div>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_839' class=notranslate>
<span class="Statement">set-double</span> d = nextafter(<span class="Constant">1</span><span class="Constant">.2</span>, <span class="Constant">1</span><span class="Constant">.8</span>) + <span class="Constant">1</span></pre>
<span id=rimstone_copied_839 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_839' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_839, code_839, rimstone_copied_839)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<div class="vsub"><a id="See also"></a>See also</div>
 <a name='Math functions'></a><span style="font-weight:bold;">Math functions</span><br/>
<a href='/abd.html'>abd</a> &nbsp;<br/>
<a href='/abn.html'>abn</a> &nbsp;<br/>
<a href='/acos.html'>acos</a> &nbsp;<br/>
<a href='/acosh.html'>acosh</a> &nbsp;<br/>
<a href='/asin.html'>asin</a> &nbsp;<br/>
<a href='/asinh.html'>asinh</a> &nbsp;<br/>
<a href='/atan.html'>atan</a> &nbsp;<br/>
<a href='/atan2.html'>atan2</a> &nbsp;<br/>
<a href='/atanh.html'>atanh</a> &nbsp;<br/>
<a href='/cbrt.html'>cbrt</a> &nbsp;<br/>
<a href='/ceil.html'>ceil</a> &nbsp;<br/>
<a href='/copysign.html'>copysign</a> &nbsp;<br/>
<a href='/cos.html'>cos</a> &nbsp;<br/>
<a href='/cosh.html'>cosh</a> &nbsp;<br/>
<a href='/dbl.html'>dbl</a> &nbsp;<br/>
<a href='/erf.html'>erf</a> &nbsp;<br/>
<a href='/erfc.html'>erfc</a> &nbsp;<br/>
<a href='/exp.html'>exp</a> &nbsp;<br/>
<a href='/exp2.html'>exp2</a> &nbsp;<br/>
<a href='/floor.html'>floor</a> &nbsp;<br/>
<a href='/fmod.html'>fmod</a> &nbsp;<br/>
<a href='/hypot.html'>hypot</a> &nbsp;<br/>
<a href='/isinf.html'>isinf</a> &nbsp;<br/>
<a href='/isnan.html'>isnan</a> &nbsp;<br/>
<a href='/ldexp.html'>ldexp</a> &nbsp;<br/>
<a href='/lgamma.html'>lgamma</a> &nbsp;<br/>
<a href='/log.html'>log</a> &nbsp;<br/>
<a href='/log10.html'>log10</a> &nbsp;<br/>
<a href='/log2.html'>log2</a> &nbsp;<br/>
<a href='/math-functions.html'>math-functions</a> &nbsp;<br/>
<a href='/nextafter.html'>nextafter</a> &nbsp;<br/>
<a href='/num.html'>num</a> &nbsp;<br/>
<a href='/pow.html'>pow</a> &nbsp;<br/>
<a href='/round.html'>round</a> &nbsp;<br/>
<a href='/sin.html'>sin</a> &nbsp;<br/>
<a href='/sinh.html'>sinh</a> &nbsp;<br/>
<a href='/sqrt.html'>sqrt</a> &nbsp;<br/>
<a href='/tan.html'>tan</a> &nbsp;<br/>
<a href='/tanh.html'>tanh</a> &nbsp;<br/>
<a href='/trunc.html'>trunc</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='/documentation.html'>documentation</a><br/>
<a id='number-expressions.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:left;background-color:white;'><a href='https://rimstone-lang.com' style='border-bottom:0px'><img src='https://rimstone-lang.com/rimstone.png' style='width:180px;height:auto'/></a></div><div class='vhub' style='margin-top:10px;'>Number expressions</div><hr/>A number expression uses operators plus (+), minus (-), multiply (*), divide (/), modulus (%), bitwise operators (&amp; for and, | for or, ^ for xor and ~ for negation), parenthesis () and <a href='/math-functions.html'>math-functions</a> that return a number. For example:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_842' class=notranslate>
<span class="Statement">set-number</span> n1 = <span class="Constant">10</span>+(<span class="Constant">4</span>*n2-<span class="Constant">5</span>)%<span class="Constant">3</span></pre>
<span id=rimstone_copied_842 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_842' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_842, code_842, rimstone_copied_842)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
You can use number expressions anywhere number is expected as an input to any statement.<br/>
<br/>
Note that character constants (such as 'A', 'z' etc.) are considered numbers with the value equal to their single-byte ASCII equivalent (i.e. unsigned numbers 0-255), for example this will assign 65 to "n":<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_843' class=notranslate>
<span class="Statement">set-number</span> n = 'A'</pre>
<span id=rimstone_copied_843 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_843' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_843, code_843, rimstone_copied_843)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Any subscripted string is also considered a number, for instance "n" would be 117 (since 's' is 115):<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_844' class=notranslate>
<span class="Statement">set-string</span> str = 'some'
<span class="Statement">set-number</span> n = str[<span class="Constant">0</span>] + <span class="Constant">2</span></pre>
<span id=rimstone_copied_844 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_844' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_844, code_844, rimstone_copied_844)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Other than decimals and character constants, you can also use hexadecimal numbers (such as 0xffaa), and octal numbers (such as 0710).<br/>
<div class="vsub"><a id="String subscription"></a>String subscription</div>
You can access each byte of a string as an unsigned 8-bit number:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_845' class=notranslate>
<span class="Statement">set-string</span> str = <span class="Constant">&quot;GOAT&quot;</span>
<span class="Statement">set-string</span> n = <span class="Constant">10</span>+str[<span class="Constant">2</span>]</pre>
<span id=rimstone_copied_845 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_845' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_845, code_845, rimstone_copied_845)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Variable "n" will have a value of 75 (10+'A' or 10+65).<br/>
<div class="vsub"><a id="Subscription shortcut"></a>Subscription shortcut</div>
You can reference number arrays elements (see <a href='/new-array.html'>new-array</a>) by using subscription operator ([]), for instance:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_846' class=notranslate>
<span class="Statement">new-array</span> narr<span class="Identifier"> type number</span>
<span class="Statement">write-array</span> narr<span class="Identifier"> key</span> <span class="Constant">0</span><span class="Identifier"> value</span> <span class="Constant">10</span>
<span class="Statement">write-array</span> narr<span class="Identifier"> key</span> <span class="Constant">1</span><span class="Identifier"> value</span> narr[<span class="Constant">0</span>]
<span class="Statement">set-number</span> n = <span class="Constant">1</span> + narr[<span class="Constant">1</span>] * <span class="Constant">2</span></pre>
<span id=rimstone_copied_846 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_846' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_846, code_846, rimstone_copied_846)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Read about <a href='/mixing-doubles-and-numbers.html'>mixing-doubles-and-numbers</a>.<br/>
<br/>
Note that no checks are performed to catch overflows and underflows. With number expressions, such events may produce incorrect results but the program will continue, and represent bugs in your code. Division by zero however will cause your program to <a href='/error-handling.html'>error out</a>. Use "--fpe" option in <a href='/rim.html'>rim</a> during debugging and testing to catch such problems.<br/>
<div class="vsub"><a id="See also"></a>See also</div>
 <a name='Numbers'></a><span style="font-weight:bold;">Numbers</span><br/>
<a href='/abs-number.html'>abs-number</a> &nbsp;<br/>
<a href='/mixing-doubles-and-numbers.html'>mixing-doubles-and-numbers</a> &nbsp;<br/>
<a href='/number-expressions.html'>number-expressions</a> &nbsp;<br/>
<a href='/number-string.html'>number-string</a> &nbsp;<br/>
<a href='/set-number.html'>set-number</a> &nbsp;<br/>
<a href='/string-number.html'>string-number</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='/documentation.html'>documentation</a><br/>
<a id='number-string.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:left;background-color:white;'><a href='https://rimstone-lang.com' style='border-bottom:0px'><img src='https://rimstone-lang.com/rimstone.png' style='width:180px;height:auto'/></a></div><div class='vhub' style='margin-top:10px;'>Number string</div><hr/><span style="font-weight:bold;">Purpose</span>: Convert number to string.<br/>
<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_847' class=notranslate>
<span class="Statement">number-string</span> &lt;number&gt; [<span class="Type"> to</span> &lt;string&gt; ] \
    [<span class="Identifier"> base</span> &lt;base&gt; ] \
    [<span class="Type"> status</span> &lt;status&gt; ]</pre>
<span id=rimstone_copied_847 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_847' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_847, code_847, rimstone_copied_847)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
&lt;number&gt; is converted to &lt;string&gt; in "to" clause, using &lt;base&gt; in "base" clause, where &lt;base&gt; is by default 10. &lt;base&gt; can be between 2 and 36, inclusive. &lt;number&gt; can be positive or negative (i.e. signed) and can be of any integer type up to 64-bit (char, int, long, long long etc.). &nbsp;If "to" clause is omitted, then &lt;number&gt; is printed out.<br/>
<br/>
Note that any letters in &lt;string&gt; (depending on the &lt;base&gt;) are always lower-case.<br/>
<br/>
If there is an error, such as if &lt;base&gt; is incorrect, then &lt;status&gt; number (in "status" clause) is RIM_ERR_FAILED, otherwise it's RIM_OKAY.<br/>
<br/>
If number-string prints out a number (i.e. "to" clause is omitted), and this is within <a href='/write-string.html'>write-string</a>, then &lt;number&gt; is output into the buffer that builds a new string.<br/>
<div class="vsub"><a id="Shortcut"></a>Shortcut</div>
For convenience, you can use a shortcut for converting a number to a string, by prepending a "$" sign to the variable name, for example:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_848' class=notranslate>
<span class="Statement">set-number</span> n = -<span class="Constant">10</span>
<span class="Statement">set-string</span> s = <span class="Constant">&quot;This is number &quot;</span> + $n</pre>
<span id=rimstone_copied_848 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_848' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_848, code_848, rimstone_copied_848)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
The above is the same as:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_849' class=notranslate>
<span class="Statement">set-number</span> n = -<span class="Constant">10</span>
<span class="Statement">number-string</span> n<span class="Type"> to</span> sval
<span class="Statement">set-string</span> s = <span class="Constant">&quot;This is number &quot;</span> + sval</pre>
<span id=rimstone_copied_849 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_849' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_849, code_849, rimstone_copied_849)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Effectively, $ in front of a number variable is the same as number-string that converts it to a string with the base of 10. If a string cannot be converted to a number, your program will error out. To check values with a status, or to use different bases, use number-string.<br/>
<br/>
You can use $ for an expression, in which case the expression must be within parenthesis:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_850' class=notranslate>
<span class="Statement">set-number</span> n1 = -<span class="Constant">10</span>
<span class="Statement">set-number</span> n2 = <span class="Constant">15</span>
<span class="Statement">set-string</span> s = <span class="Constant">&quot;This is number &quot;</span> + $(n1+n2)</pre>
<span id=rimstone_copied_850 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_850' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_850, code_850, rimstone_copied_850)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
In this case number "s" will have value of "This is number 5", because numbers -10 and 15 are added to produce 5, which is then converted to a string and finally added to the first string.<br/>
<div class="vsub"><a id="Examples"></a>Examples</div>
The following will allocate memory for string "x" to be "801":<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_851' class=notranslate>
<span class="Statement">set-number</span> x = <span class="Constant">801</span>
<span class="Statement">number-string</span> x<span class="Type"> to</span> res</pre>
<span id=rimstone_copied_851 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_851' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_851, code_851, rimstone_copied_851)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
The following will store "-238f" to string "res":<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_852' class=notranslate>
<span class="Statement">set-number</span> x = -<span class="Constant">9103</span>
<span class="Statement">number-string</span> x<span class="Type"> to</span> res<span class="Identifier"> base</span> <span class="Constant">16</span></pre>
<span id=rimstone_copied_852 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_852' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_852, code_852, rimstone_copied_852)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
To print out a number -131:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_853' class=notranslate>
<span class="Statement">set-number</span> x = -<span class="Constant">131</span>
<span class="Statement">number-string</span> x</pre>
<span id=rimstone_copied_853 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_853' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_853, code_853, rimstone_copied_853)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<div class="vsub"><a id="See also"></a>See also</div>
 <a name='Numbers'></a><span style="font-weight:bold;">Numbers</span><br/>
<a href='/abs-number.html'>abs-number</a> &nbsp;<br/>
<a href='/mixing-doubles-and-numbers.html'>mixing-doubles-and-numbers</a> &nbsp;<br/>
<a href='/number-expressions.html'>number-expressions</a> &nbsp;<br/>
<a href='/number-string.html'>number-string</a> &nbsp;<br/>
<a href='/set-number.html'>set-number</a> &nbsp;<br/>
<a href='/string-number.html'>string-number</a> &nbsp; <br/>
 <a name='Strings'></a><span style="font-weight:bold;">Strings</span><br/>
<a href='/copy-string.html'>copy-string</a> &nbsp;<br/>
<a href='/count-substring.html'>count-substring</a> &nbsp;<br/>
<a href='/delete-string.html'>delete-string</a> &nbsp;<br/>
<a href='/double-string.html'>double-string</a> &nbsp;<br/>
<a href='/lower-string.html'>lower-string</a> &nbsp;<br/>
<a href='/match-regex.html'>match-regex</a> &nbsp;<br/>
<a href='/new-string.html'>new-string</a> &nbsp;<br/>
<a href='/number-string.html'>number-string</a> &nbsp;<br/>
<a href='/read-split.html'>read-split</a> &nbsp;<br/>
<a href='/replace-string.html'>replace-string</a> &nbsp;<br/>
<a href='/scan-string.html'>scan-string</a> &nbsp;<br/>
<a href='/set-string.html'>set-string</a> &nbsp;<br/>
<a href='/split-string.html'>split-string</a> &nbsp;<br/>
<a href='/string-double.html'>string-double</a> &nbsp;<br/>
<a href='/string-expressions.html'>string-expressions</a> &nbsp;<br/>
<a href='/string-length.html'>string-length</a> &nbsp;<br/>
<a href='/string-number.html'>string-number</a> &nbsp;<br/>
<a href='/trim-string.html'>trim-string</a> &nbsp;<br/>
<a href='/upper-string.html'>upper-string</a> &nbsp;<br/>
<a href='/write-string.html'>write-string</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='/documentation.html'>documentation</a><br/>
<a id='num.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:left;background-color:white;'><a href='https://rimstone-lang.com' style='border-bottom:0px'><img src='https://rimstone-lang.com/rimstone.png' style='width:180px;height:auto'/></a></div><div class='vhub' style='margin-top:10px;'>Num</div><hr/><span style="font-weight:bold;">Purpose</span>: A double cast as a number.<br/>
<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_840' class=notranslate>
num( &lt;var&gt; )</pre>
<span id=rimstone_copied_840 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_840' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_840, code_840, rimstone_copied_840)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
num returns the truncated value of a double &lt;var&gt;, as a number. <br/>
<br/>
This is different from trunc() in that trunc() returns a double value. If your goal is to obtain a number from a double value where the decimal part is removed, use num(); if you want the same but the result should be a double, use trunc(). <br/>
<br/>
If you wish to get a number from a double by some other method, consider floor(), ceil() and round() (all of which return a double) and then apply num() to the result.<br/>
<div class="vsub"><a id="Examples"></a>Examples</div>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_841' class=notranslate>
<span class="Statement">set-double</span> d = num(<span class="Constant">1</span><span class="Constant">.2</span>) + <span class="Constant">1</span></pre>
<span id=rimstone_copied_841 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_841' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_841, code_841, rimstone_copied_841)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<div class="vsub"><a id="See also"></a>See also</div>
 <a name='Math functions'></a><span style="font-weight:bold;">Math functions</span><br/>
<a href='/abd.html'>abd</a> &nbsp;<br/>
<a href='/abn.html'>abn</a> &nbsp;<br/>
<a href='/acos.html'>acos</a> &nbsp;<br/>
<a href='/acosh.html'>acosh</a> &nbsp;<br/>
<a href='/asin.html'>asin</a> &nbsp;<br/>
<a href='/asinh.html'>asinh</a> &nbsp;<br/>
<a href='/atan.html'>atan</a> &nbsp;<br/>
<a href='/atan2.html'>atan2</a> &nbsp;<br/>
<a href='/atanh.html'>atanh</a> &nbsp;<br/>
<a href='/cbrt.html'>cbrt</a> &nbsp;<br/>
<a href='/ceil.html'>ceil</a> &nbsp;<br/>
<a href='/copysign.html'>copysign</a> &nbsp;<br/>
<a href='/cos.html'>cos</a> &nbsp;<br/>
<a href='/cosh.html'>cosh</a> &nbsp;<br/>
<a href='/dbl.html'>dbl</a> &nbsp;<br/>
<a href='/erf.html'>erf</a> &nbsp;<br/>
<a href='/erfc.html'>erfc</a> &nbsp;<br/>
<a href='/exp.html'>exp</a> &nbsp;<br/>
<a href='/exp2.html'>exp2</a> &nbsp;<br/>
<a href='/floor.html'>floor</a> &nbsp;<br/>
<a href='/fmod.html'>fmod</a> &nbsp;<br/>
<a href='/hypot.html'>hypot</a> &nbsp;<br/>
<a href='/isinf.html'>isinf</a> &nbsp;<br/>
<a href='/isnan.html'>isnan</a> &nbsp;<br/>
<a href='/ldexp.html'>ldexp</a> &nbsp;<br/>
<a href='/lgamma.html'>lgamma</a> &nbsp;<br/>
<a href='/log.html'>log</a> &nbsp;<br/>
<a href='/log10.html'>log10</a> &nbsp;<br/>
<a href='/log2.html'>log2</a> &nbsp;<br/>
<a href='/math-functions.html'>math-functions</a> &nbsp;<br/>
<a href='/nextafter.html'>nextafter</a> &nbsp;<br/>
<a href='/num.html'>num</a> &nbsp;<br/>
<a href='/pow.html'>pow</a> &nbsp;<br/>
<a href='/round.html'>round</a> &nbsp;<br/>
<a href='/sin.html'>sin</a> &nbsp;<br/>
<a href='/sinh.html'>sinh</a> &nbsp;<br/>
<a href='/sqrt.html'>sqrt</a> &nbsp;<br/>
<a href='/tan.html'>tan</a> &nbsp;<br/>
<a href='/tanh.html'>tanh</a> &nbsp;<br/>
<a href='/trunc.html'>trunc</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='/documentation.html'>documentation</a><br/>
<a id='open-file.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:left;background-color:white;'><a href='https://rimstone-lang.com' style='border-bottom:0px'><img src='https://rimstone-lang.com/rimstone.png' style='width:180px;height:auto'/></a></div><div class='vhub' style='margin-top:10px;'>Open file</div><hr/><span style="font-weight:bold;">Purpose</span>: Open file for reading and writing.<br/>
<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_854' class=notranslate>
<span class="Statement">open-file</span> &lt;file name&gt;<span class="Type"> file-id</span> &lt;file id&gt; \
    [<span class="Identifier"> new-truncate</span> ] \
    [<span class="Type"> status</span> &lt;status&gt; ]</pre>
<span id=rimstone_copied_854 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_854' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_854, code_854, rimstone_copied_854)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Opens file given by &lt;file name&gt; for reading and writing and creates an open file variable identified by &lt;file id&gt;.<br/>
<br/>
&lt;file name&gt; can be a full path name, or a path relative to the application home directory (see <a href='/directories.html'>directories</a>).<br/>
<br/>
You can obtain the status of file opening via &lt;status&gt; number (in "status" clause). The &lt;status&gt; is RIM_OKAY if file is opened, or RIM_ERR_OPEN if could not open file.<br/>
<br/>
If "new-truncate" clause is used, a new file is created if it doesn't exist, or it is truncated if it does.<br/>
<div class="vsub"><a id="Examples"></a>Examples</div>
Create a file (or truncate an existing one), write 25,000 rows and the read back those rows and display them, then close file:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_855' class=notranslate>
<span class="Statement">%%</span> /ofile<span class="Identifier"> public</span>
    <span class="Comment">// Create new file, or truncate an old file if it exists</span>
<span class="Statement">    open-file</span> <span class="Constant">&quot;testwrite&quot;</span><span class="Type"> file-id</span> nf<span class="Identifier"> new-truncate</span>

    <span class="Comment">// Write </span><span class="Constant">25000</span><span class="Comment"> rows</span>
<span class="Statement">    start-loop</span><span class="Identifier"> repeat</span> <span class="Constant">25000</span><span class="Type"> use</span> i
<span class="Statement">       ((</span> line
<span class="Statement">       @</span>some text in line <span class="Statement">&lt;&lt;print-out</span> i<span class="Statement">&gt;&gt;</span>
<span class="Statement">       ))</span><span class="Identifier"> notrim</span>
<span class="Statement">       string-length</span> line<span class="Type"> to</span> line_len
<span class="Statement">       write-file</span><span class="Identifier"> file-id</span> nf<span class="Identifier"> from</span> line<span class="Identifier"> length</span> line_len
<span class="Statement">    end-loop</span>

    <span class="Comment">// Rewind back to the beginning</span>
<span class="Statement">    file-position</span><span class="Identifier"> set</span> <span class="Constant">0</span><span class="Identifier"> file-id</span> nf

    <span class="Comment">// Read all </span><span class="Constant">25000</span><span class="Comment"> rows back, and print them out</span>
<span class="Statement">    read-file</span><span class="Identifier"> file-id</span> nf <span class="Type"> to</span> whole_file
<span class="Statement">    print-out</span> whole_file

    <span class="Comment">// Close the file</span>
<span class="Statement">    close-file</span><span class="Identifier"> file-id</span> nf
<span class="Statement">%%</span></pre>
<span id=rimstone_copied_855 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_855' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_855, code_855, rimstone_copied_855)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<div class="vsub"><a id="See also"></a>See also</div>
 <a name='Files'></a><span style="font-weight:bold;">Files</span><br/>
<a href='/change-mode.html'>change-mode</a> &nbsp;<br/>
<a href='/close-file.html'>close-file</a> &nbsp;<br/>
<a href='/copy-file.html'>copy-file</a> &nbsp;<br/>
<a href='/delete-file.html'>delete-file</a> &nbsp;<br/>
<a href='/file-position.html'>file-position</a> &nbsp;<br/>
<a href='/file-storage.html'>file-storage</a> &nbsp;<br/>
<a href='/file-uploading.html'>file-uploading</a> &nbsp;<br/>
<a href='/get-upload.html'>get-upload</a> &nbsp;<br/>
<a href='/lock-file.html'>lock-file</a> &nbsp;<br/>
<a href='/open-file.html'>open-file</a> &nbsp;<br/>
<a href='/read-file.html'>read-file</a> &nbsp;<br/>
<a href='/read-line.html'>read-line</a> &nbsp;<br/>
<a href='/rename-file.html'>rename-file</a> &nbsp;<br/>
<a href='/stat-file.html'>stat-file</a> &nbsp;<br/>
<a href='/temporary-file.html'>temporary-file</a> &nbsp;<br/>
<a href='/uniq-file.html'>uniq-file</a> &nbsp;<br/>
<a href='/unlock-file.html'>unlock-file</a> &nbsp;<br/>
<a href='/write-file.html'>write-file</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='/documentation.html'>documentation</a><br/>
<a id='out-header.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:left;background-color:white;'><a href='https://rimstone-lang.com' style='border-bottom:0px'><img src='https://rimstone-lang.com/rimstone.png' style='width:180px;height:auto'/></a></div><div class='vhub' style='margin-top:10px;'>Out header</div><hr/><span style="font-weight:bold;">Purpose</span>: Output HTTP header.<br/>
<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_856' class=notranslate>
<span class="Statement">out-header</span><span class="Identifier"> default</span>
|
<span class="Statement">out-header</span><span class="Identifier"> use</span> \
    [<span class="Identifier"> content-type</span> &lt;content type&gt; ] \
    [<span class="Identifier"> download</span> [ &lt;download&gt; ] ] \
    [<span class="Identifier"> etag</span> [ &lt;etag&gt; ] ] \
    [<span class="Identifier"> file-name</span> &lt;file name&gt; ] \
    [ (<span class="Identifier"> cache-control</span> &lt;cache control&gt; ) |<span class="Identifier"> no-cache</span> ] \
    [<span class="Identifier"> status-id</span> &lt;status id&gt; ] \
    [<span class="Identifier"> status-text</span> &lt;status text&gt; ] \
    [<span class="Identifier"> custom</span> &lt;header name&gt;=&lt;header value&gt; [ , ... ] ]</pre>
<span id=rimstone_copied_856 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_856' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_856, code_856, rimstone_copied_856)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
out-header outputs HTTP header and also sends any cookies produced by <a href='/set-cookie.html'>set-cookie</a> and <a href='/delete-cookie.html'>delete-cookie</a>. A web page must have an HTTP header output before any other response. <br/>
<br/>
If out-header is not used, a default HTTP header is sent out just before the very first output (see <a href='/output-statement.html'>output-statement</a>, <a href='/print-out.html'>print-out</a> etc.) at which point any cookie updates are sent as well; this default header is the same as using "out-header default".<br/>
<br/>
If you use out-header multiple times, all but the very first one are ignored.<br/>
<br/>
If you wish to output a file (such as an image or a PDF document), do not use out-header; rather use <a href='/send-file.html'>send-file</a> instead which outputs its own header.<br/>
<br/>
The HTTP header is sent back to a client who initiated a request. You can specify any custom headers with "use" clause.<br/>
<div class="vsub"><a id="Default header"></a>Default header</div>
If no out-header is used, or if "default" clause is in place, a default header is constructed, which uses a status of 200/OK and content type of<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_857' class=notranslate>
text/html;charset=utf-8</pre>
<span id=rimstone_copied_857 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_857' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_857, code_857, rimstone_copied_857)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
and cache control of<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_858' class=notranslate>
Cache-Control:max-age=<span class="Constant">0</span>, no-cache; <span class="Statement">Pragma</span>: no-cache</pre>
<span id=rimstone_copied_858 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_858' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_858, code_858, rimstone_copied_858)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
The default header is typical for dynamically generated web pages, and most of the time you would use the default header - meaning you don't need to specify out-header statement.<br/>
<div class="vsub"><a id="Headers"></a>Headers</div>
The following are subclauses that allow setting any custom header:<br/>
<ul><li>&lt;content type&gt; is content type (such as "text/html" or "image/jpg" etc.) If you are sending a file to a client for download and you don't know its content type, you can use "application/octet-stream" for a generic binary file.<br/>
</li><li>If "download" is used without boolean variable &lt;download&gt;, or if &lt;download&gt; evaluates to true, then the file is sent to a client for downloading - otherwise the default is to display file in client.<br/>
</li><li>&lt;file name&gt; is the name of the file being sent to a client. This is not the local file name - it is the file name that client will use for its own purposes.<br/>
</li><li>&lt;cache control&gt; is the cache control HTTP header. "no-cache" instructs the client not to cache. Only one of "cache-control" and "no-cache" can be used. An example of &lt;cache control&gt;:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_859' class=notranslate>
<span class="Statement">send-file</span> <span class="Constant">&quot;somepic.jpg&quot;</span><span class="Identifier"> headers cache-control</span> <span class="Constant">&quot;max-age: 3600&quot;</span></pre>
<span id=rimstone_copied_859 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_859' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_859, code_859, rimstone_copied_859)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
</li><li>If "etag" is used without boolean variable &lt;etag&gt;, or if &lt;etag&gt; evaluates to true, then "ETAG" header will be generated (a timestamp) and included, otherwise it is not. The time stamp is of last modification date of the file (and typically used to cache a file on client if it hasn't changed on the server). "etag" is useful to let the client know to download the file only once if it hasn't changed, thus saving network and computing resources. ETAG header is used only for <a href='/send-file.html'>send-file</a>.<br/>
</li><li>&lt;status id&gt; and &lt;status text&gt; are status settings for the response, as strings (such as "425" for "status-id" and "Too early" for "status-text"). <br/>
</li><li>To set any type of generic HTTP header, use "custom" subclause, where &lt;header name&gt; and &lt;header value&gt; represent the name and value of a single header. Multiple headers are separated by a comma. There is no limit on the maximum number of such headers, other than of the underyling HTTP protocol. You must not use "custom" to set headers already set elsewhere (such as "etag" for instance), as that may cause unpredictable behavior. For instance this sets two custom headers:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_860' class=notranslate>
<span class="Statement">out-header</span><span class="Identifier"> use custom</span> <span class="Constant">&quot;CustomOption3&quot;</span>=<span class="Constant">&quot;CustomValue3&quot;</span>, <span class="Constant">&quot;Status&quot;</span>=<span class="Constant">&quot;418 I'm a teapot&quot;</span></pre>
<span id=rimstone_copied_860 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_860' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_860, code_860, rimstone_copied_860)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
"custom" subclause lets you use any custom headers that exist today or may be added in the future, as well as any headers of your own design.</li></ul>
You can use <a href='/silent-header.html'>silent-header</a> before output-header in order to suppress its output.<br/>
<div class="vsub"><a id="Examples"></a>Examples</div>
Sometimes you may want to output the default header immediately, for instance if the first output produces may take some time:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_861' class=notranslate>
<span class="Statement">out-header</span><span class="Identifier"> default</span></pre>
<span id=rimstone_copied_861 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_861' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_861, code_861, rimstone_copied_861)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
To set a custom header for a web page that changes cache control and adds two new headers:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_862' class=notranslate>
<span class="Statement">out-header</span><span class="Identifier"> use content-type</span> <span class="Constant">&quot;text/html&quot;</span><span class="Identifier"> cache-control</span> <span class="Constant">&quot;max-age:3600&quot;</span><span class="Identifier"> custom</span> <span class="Constant">&quot;some_HTTP_option&quot;</span>=<span class="Constant">&quot;value_for_some_HTTP_option&quot;</span>, <span class="Constant">&quot;some_HTTP_option_1&quot;</span>=<span class="Constant">&quot;value_for_some_HTTP_option_1&quot;</span></pre>
<span id=rimstone_copied_862 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_862' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_862, code_862, rimstone_copied_862)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<div class="vsub"><a id="See also"></a>See also</div>
 <a name='Web'></a><span style="font-weight:bold;">Web</span><br/>
<a href='/call-web.html'>call-web</a> &nbsp;<br/>
<a href='/out-header.html'>out-header</a> &nbsp;<br/>
<a href='/send-file.html'>send-file</a> &nbsp;<br/>
<a href='/silent-header.html'>silent-header</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='/documentation.html'>documentation</a><br/>
<a id='output-statement.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:left;background-color:white;'><a href='https://rimstone-lang.com' style='border-bottom:0px'><img src='https://rimstone-lang.com/rimstone.png' style='width:180px;height:auto'/></a></div><div class='vhub' style='margin-top:10px;'>Output statement</div><hr/><span style="font-weight:bold;">Purpose</span>: Output text.<br/>
<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_864' class=notranslate>
<span class="Statement">@</span>&lt;text&gt;

<span class="Statement">!</span>&lt;verbatim text&gt;</pre>
<span id=rimstone_copied_864 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_864' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_864, code_864, rimstone_copied_864)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Outputting free form text is done by starting the line with "@" or "!". The text is output unencoded with a new line appended.<br/>
<br/>
With "@" statement, any <a href='/inline-code.html'>inline-code</a> executes and any output from those statements is output.<br/>
<br/>
With "!" statement, all text is output verbatim, and any inline code is not executed. This is useful when the text printed out should not be checked for any <a href='/inline-code.html'>inline-code</a>.<br/>
<br/>
All trailing whitespaces are trimmed from each source code line. If you need to write trailing whitespaces, with "@" statement you can use <a href='/print-out.html'>print-out</a> as <a href='/inline-code.html'>inline-code</a>. Maximum line length is 8KB - this is the source code line length, the actual run-time output length is unlimited.<br/>
<br/>
Note that all characters are output as they are written, including the escape character (\). If you wish to output characters requiring an escape character, such as new line and tab (as is done in C by using \n, \t etc.), use <a href='/print-out.html'>print-out</a> as <a href='/inline-code.html'>inline-code</a>.<br/>
<div class="vsub"><a id="Examples"></a>Examples</div>
Outputting "Hello there": <br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_866' class=notranslate>
<span class="Statement">@</span>Hello there</pre>
<span id=rimstone_copied_866 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_866' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_866, code_866, rimstone_copied_866)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
You can use other RimStone statements inlined and mixed with the text you are outputting:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_867' class=notranslate>
<span class="Statement">set-string</span> weatherType=<span class="Constant">&quot;sunny&quot;</span>
<span class="Statement">@</span>Today's weather is <span class="Statement">&lt;&lt;print-out</span> weatherType<span class="Statement">&gt;&gt;</span></pre>
<span id=rimstone_copied_867 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_867' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_867, code_867, rimstone_copied_867)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
which would output <br/>
<div class='ncode' style='position:relative;padding-right:16px;'>
<pre id='code_863' class=notranslate>
Today&apos;s weather is sunny</pre>
<span id=rimstone_copied_863 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_863' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_863, code_863, rimstone_copied_863)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
With "!" statement, the text is also output, and this example produces the same "Hello there" output as "@":<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_868' class=notranslate>
<span class="Statement">!</span>Hello there</pre>
<span id=rimstone_copied_868 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_868' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_868, code_868, rimstone_copied_868)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
In contrast to "@" statement, "!" statement outputs all texts verbatim &nbsp;and does not execute any inline code:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_869' class=notranslate>
<span class="Statement">set-string</span> weatherType=<span class="Constant">&quot;sunny&quot;</span>
<span class="Statement">!</span>Today's weather is &lt;&lt;print-out weatherType&gt;&gt;</pre>
<span id=rimstone_copied_869 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_869' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_869, code_869, rimstone_copied_869)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
which would output <br/>
<div class='ncode' style='position:relative;padding-right:16px;'>
<pre id='code_865' class=notranslate>
Today&apos;s weather is &lt;&lt;print-out weatherType&gt;&gt;</pre>
<span id=rimstone_copied_865 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_865' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_865, code_865, rimstone_copied_865)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<div class="vsub"><a id="See also"></a>See also</div>
 <a name='Output'></a><span style="font-weight:bold;">Output</span><br/>
<a href='/finish-output.html'>finish-output</a> &nbsp;<br/>
<a href='/flush-output.html'>flush-output</a> &nbsp;<br/>
<a href='/output-statement.html'>output-statement</a> &nbsp;<br/>
<a href='/print-format.html'>print-format</a> &nbsp;<br/>
<a href='/print-out.html'>print-out</a> &nbsp;<br/>
<a href='/print-path.html'>print-path</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='/documentation.html'>documentation</a><br/>
<a id='pause-program.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:left;background-color:white;'><a href='https://rimstone-lang.com' style='border-bottom:0px'><img src='https://rimstone-lang.com/rimstone.png' style='width:180px;height:auto'/></a></div><div class='vhub' style='margin-top:10px;'>Pause program</div><hr/><span style="font-weight:bold;">Purpose</span>: Pause request execution.<br/>
<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_870' class=notranslate>
<span class="Statement">pause-program</span> &lt;milli seconds&gt;</pre>
<span id=rimstone_copied_870 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_870' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_870, code_870, rimstone_copied_870)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
pause-program will delay request execution (i.e. sleep, meaning not utilize computing resources) for a number of &lt;milli seconds&gt;. For instance:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_871' class=notranslate>
<span class="Statement">pause-program</span> <span class="Constant">1500</span></pre>
<span id=rimstone_copied_871 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_871' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_871, code_871, rimstone_copied_871)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
will pause for 1.5 seconds.<br/>
<div class="vsub"><a id="Examples"></a>Examples</div>
Pause execution for 0.25 seconds:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_872' class=notranslate>
<span class="Statement">pause-program</span> <span class="Constant">250</span></pre>
<span id=rimstone_copied_872 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_872' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_872, code_872, rimstone_copied_872)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<div class="vsub"><a id="See also"></a>See also</div>
 <a name='Time'></a><span style="font-weight:bold;">Time</span><br/>
<a href='/get-time.html'>get-time</a> &nbsp;<br/>
<a href='/pause-program.html'>pause-program</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='/documentation.html'>documentation</a><br/>
<a id='permissions.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:left;background-color:white;'><a href='https://rimstone-lang.com' style='border-bottom:0px'><img src='https://rimstone-lang.com/rimstone.png' style='width:180px;height:auto'/></a></div><div class='vhub' style='margin-top:10px;'>Permissions</div><hr/>File and directory permissions are given with standard Linux permissions. A permission "mode" is typically given as an octal number (such as 0750), where each digit is made of read (carrying value of 4), write (carrying value of 2) and execute/search permissions (carrying value of 1), so for example 7 means having read, write and execute/search permissions (since 7=4+2+1). The first digit refers to permissions given to user, second digit to those given to user's group, and third digit to those given to everyone.<br/>
<br/>
Files in RimStone <a href='/directories.html'>directories</a> are generally created with 700 privileges, meaning only the user who owns the application can access them and other users (even within the same group) cannot. The same goes for directories created by <a href='/new-dir.html'>new-dir</a> by default, unless "mode" specifies differently.<br/>
<br/>
Files created by RimStone (including <a href='/open-file.html'>open-file</a> and <a href='/write-file.html'>write-file</a>) are created with 600 permissions, meaning only the user who owns the application can access them and other users (even within the same group) cannot.<br/>
<br/>
You can use <a href='/stat-file.html'>stat-file</a> to obtain permission mode for a file or directory, and <a href='/change-mode.html'>change-mode</a> to set it. Note that, most of the time, you won't need to do this at all. If you do, however, you should change permission modes carefully and keep in mind the implications for both your application's security and functionality.<br/>
<div class="vsub"><a id="See also"></a>See also</div>
 <a name='General'></a><span style="font-weight:bold;">General</span><br/>
<a href='/about-rimstone.html'>about-rimstone</a> &nbsp;<br/>
<a href='/devel-versus-release.html'>devel-versus-release</a> &nbsp;<br/>
<a href='/directories.html'>directories</a> &nbsp;<br/>
<a href='/permissions.html'>permissions</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='/documentation.html'>documentation</a><br/>
<a id='position-list.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:left;background-color:white;'><a href='https://rimstone-lang.com' style='border-bottom:0px'><img src='https://rimstone-lang.com/rimstone.png' style='width:180px;height:auto'/></a></div><div class='vhub' style='margin-top:10px;'>Position list</div><hr/><span style="font-weight:bold;">Purpose</span>: Set current element in a linked list.<br/>
<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_873' class=notranslate>
<span class="Statement">position-list</span> &lt;list&gt; \
    [<span class="Identifier"> first</span> |<span class="Identifier"> last</span> |<span class="Identifier"> end</span> |<span class="Identifier"> previous</span> |<span class="Identifier"> next</span> | \
    [<span class="Type"> status</span> &lt;status&gt; ]</pre>
<span id=rimstone_copied_873 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_873' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_873, code_873, rimstone_copied_873)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
position-list changes the current element of linked &lt;list&gt;. A current element is the one that is read with <a href='/read-list.html'>read-list</a>. A newly added element is written with <a href='/write-list.html'>write-list</a> by inserting it just before the current element, thus becoming a new current element. Reading from &lt;list&gt; does not change its current element; use position-list to explicitly change it.<br/>
<br/>
To position to the first element, use "first" clause. Use "last" clause to make the last element the current one. Use "previous" and "next" to change the current element to just before or just after it. <br/>
<br/>
A position just beyond the last element in &lt;list&gt; is considered the "end" of it; in this case write-list will append an element to &lt;list&gt; and this element becomes its last, which is equivalent to using write-list statement with "append" clause. <br/>
<br/>
Use "end" clause to set current element to &lt;list&gt;'s end. Note that "end" clause is equivalent to using "next" clause on the last element in &lt;list&gt;.<br/>
<br/>
If you attempt to position prior to the first element, after the end of &lt;list&gt;, or anywhere in an empty list, then &lt;status&gt; number (in "status" clause") is RIM_ERR_EXIST, otherwise it is RIM_OKAY. Note that if &lt;status&gt; is RIM_ERR_EXIST, the current element will not change.<br/>
<div class="vsub"><a id="Examples"></a>Examples</div>
Position to the next element in list:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_874' class=notranslate>
<span class="Statement">position-list</span> mylist<span class="Identifier"> next</span><span class="Type"> status</span> st
<span class="Statement">if-true</span> st<span class="Identifier"> equal</span> RIM_ERR_EXIST
<span class="Statement">    @</span>Beyond the end of list
<span class="Statement">end-if</span></pre>
<span id=rimstone_copied_874 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_874' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_874, code_874, rimstone_copied_874)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Position to the first element in list:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_875' class=notranslate>
<span class="Statement">position-list</span> mylist<span class="Identifier"> first</span></pre>
<span id=rimstone_copied_875 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_875' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_875, code_875, rimstone_copied_875)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<div class="vsub"><a id="See also"></a>See also</div>
 <a name='Linked list'></a><span style="font-weight:bold;">Linked list</span><br/>
<a href='/delete-list.html'>delete-list</a> &nbsp;<br/>
<a href='/get-list.html'>get-list</a> &nbsp;<br/>
<a href='/new-list.html'>new-list</a> &nbsp;<br/>
<a href='/position-list.html'>position-list</a> &nbsp;<br/>
<a href='/purge-list.html'>purge-list</a> &nbsp;<br/>
<a href='/read-list.html'>read-list</a> &nbsp;<br/>
<a href='/write-list.html'>write-list</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='/documentation.html'>documentation</a><br/>
<a id='postgresql-database.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:left;background-color:white;'><a href='https://rimstone-lang.com' style='border-bottom:0px'><img src='https://rimstone-lang.com/rimstone.png' style='width:180px;height:auto'/></a></div><div class='vhub' style='margin-top:10px;'>Postgresql database</div><hr/>Postgres database configuration file has a Postgres connection string. <br/>
<br/>
You can see the parameters available at <a href='https://www.postgresql.org/docs/14/libpq-connect.html#LIBPQ-CONNSTRING'>https://www.postgresql.org/docs/14/libpq-connect.html#LIBPQ-CONNSTRING</a>. <br/>
<br/>
Most of the time, though, you may be using only a few of those options, as in:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_876' class=notranslate>
user=myuser password=mypwd dbname=mydb</pre>
<span id=rimstone_copied_876 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_876' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_876, code_876, rimstone_copied_876)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
The above file has parameters "user" (Postgres user), "password" (the password for Postgres user), "dbname" (the Postgres database name). If you use peer-authenticated (i.e. passwordless) login, then omit "password" - this is when the Postgres user name is the same as your Operating System user name and where local unix domain socket is used for authentication.<br/>
<div class="vsub"><a id="See also"></a>See also</div>
 <a name='Database'></a><span style="font-weight:bold;">Database</span><br/>
<a href='/begin-transaction.html'>begin-transaction</a> &nbsp;<br/>
<a href='/commit-transaction.html'>commit-transaction</a> &nbsp;<br/>
<a href='/current-row.html'>current-row</a> &nbsp;<br/>
<a href='/database-config-file.html'>database-config-file</a> &nbsp;<br/>
<a href='/db-error.html'>db-error</a> &nbsp;<br/>
<a href='/mariadb-database.html'>mariadb-database</a> &nbsp;<br/>
<a href='/postgresql-database.html'>postgresql-database</a> &nbsp;<br/>
<a href='/rollback-transaction.html'>rollback-transaction</a> &nbsp;<br/>
<a href='/run-query.html'>run-query</a> &nbsp;<br/>
<a href='/sqlite-database.html'>sqlite-database</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='/documentation.html'>documentation</a><br/>
<a id='pow.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:left;background-color:white;'><a href='https://rimstone-lang.com' style='border-bottom:0px'><img src='https://rimstone-lang.com/rimstone.png' style='width:180px;height:auto'/></a></div><div class='vhub' style='margin-top:10px;'>Pow</div><hr/><span style="font-weight:bold;">Purpose</span>: Power function.<br/>
<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_877' class=notranslate>
pow( &lt;var1&gt;, &lt;var2&gt; )</pre>
<span id=rimstone_copied_877 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_877' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_877, code_877, rimstone_copied_877)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
pow returns &lt;var1&gt; to the power of &lt;var2&gt;. &lt;var1&gt; and &lt;var2&gt; are a number or a double and the result is a double.<br/>
<div class="vsub"><a id="Examples"></a>Examples</div>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_878' class=notranslate>
<span class="Statement">set-double</span> d = pow(<span class="Constant">10</span>,<span class="Constant">3</span>) + <span class="Constant">1</span></pre>
<span id=rimstone_copied_878 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_878' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_878, code_878, rimstone_copied_878)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<div class="vsub"><a id="See also"></a>See also</div>
 <a name='Math functions'></a><span style="font-weight:bold;">Math functions</span><br/>
<a href='/abd.html'>abd</a> &nbsp;<br/>
<a href='/abn.html'>abn</a> &nbsp;<br/>
<a href='/acos.html'>acos</a> &nbsp;<br/>
<a href='/acosh.html'>acosh</a> &nbsp;<br/>
<a href='/asin.html'>asin</a> &nbsp;<br/>
<a href='/asinh.html'>asinh</a> &nbsp;<br/>
<a href='/atan.html'>atan</a> &nbsp;<br/>
<a href='/atan2.html'>atan2</a> &nbsp;<br/>
<a href='/atanh.html'>atanh</a> &nbsp;<br/>
<a href='/cbrt.html'>cbrt</a> &nbsp;<br/>
<a href='/ceil.html'>ceil</a> &nbsp;<br/>
<a href='/copysign.html'>copysign</a> &nbsp;<br/>
<a href='/cos.html'>cos</a> &nbsp;<br/>
<a href='/cosh.html'>cosh</a> &nbsp;<br/>
<a href='/dbl.html'>dbl</a> &nbsp;<br/>
<a href='/erf.html'>erf</a> &nbsp;<br/>
<a href='/erfc.html'>erfc</a> &nbsp;<br/>
<a href='/exp.html'>exp</a> &nbsp;<br/>
<a href='/exp2.html'>exp2</a> &nbsp;<br/>
<a href='/floor.html'>floor</a> &nbsp;<br/>
<a href='/fmod.html'>fmod</a> &nbsp;<br/>
<a href='/hypot.html'>hypot</a> &nbsp;<br/>
<a href='/isinf.html'>isinf</a> &nbsp;<br/>
<a href='/isnan.html'>isnan</a> &nbsp;<br/>
<a href='/ldexp.html'>ldexp</a> &nbsp;<br/>
<a href='/lgamma.html'>lgamma</a> &nbsp;<br/>
<a href='/log.html'>log</a> &nbsp;<br/>
<a href='/log10.html'>log10</a> &nbsp;<br/>
<a href='/log2.html'>log2</a> &nbsp;<br/>
<a href='/math-functions.html'>math-functions</a> &nbsp;<br/>
<a href='/nextafter.html'>nextafter</a> &nbsp;<br/>
<a href='/num.html'>num</a> &nbsp;<br/>
<a href='/pow.html'>pow</a> &nbsp;<br/>
<a href='/round.html'>round</a> &nbsp;<br/>
<a href='/sin.html'>sin</a> &nbsp;<br/>
<a href='/sinh.html'>sinh</a> &nbsp;<br/>
<a href='/sqrt.html'>sqrt</a> &nbsp;<br/>
<a href='/tan.html'>tan</a> &nbsp;<br/>
<a href='/tanh.html'>tanh</a> &nbsp;<br/>
<a href='/trunc.html'>trunc</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='/documentation.html'>documentation</a><br/>
<a id='print-format.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:left;background-color:white;'><a href='https://rimstone-lang.com' style='border-bottom:0px'><img src='https://rimstone-lang.com/rimstone.png' style='width:180px;height:auto'/></a></div><div class='vhub' style='margin-top:10px;'>Print format</div><hr/><span style="font-weight:bold;">Purpose</span>: Outputs formatted data.<br/>
<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_879' class=notranslate>
<span class="Statement">print-format</span> &lt;format&gt;<span class="Identifier"> ,</span> &lt;variable&gt; [<span class="Identifier"> ,</span> &lt;variable&gt; ]... \
    [<span class="Identifier"> to-error</span> ] \
    [<span class="Identifier"> to</span> &lt;string&gt; ] [<span class="Identifier"> url-encode</span> |<span class="Identifier"> web-encode</span> ]</pre>
<span id=rimstone_copied_879 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_879' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_879, code_879, rimstone_copied_879)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
print-format will format a string according to the &lt;format&gt; string and a list of &lt;variable&gt;s and then outputs the result. By default, the output is not encoded (meaning a string is output exactly as it is, and the client may interpret such text in any way it sees fit). If "web-encode" clause is used, then the output is web-encoded (or HTML-encoded);this means such output is suited for use in web pages - meaning any HTML-markup will be properly encoded. If "url-encode" clause is used, then the output is URL-encoded; this means such output is suited for use in URL parameters.<br/>
<div class="vsub"><a id="Format"></a>Format</div>
&lt;format&gt; string must be a literal. Variables must follow &lt;format&gt; separated by commas in the same order as placeholders. If you use any placeholders other than specified below, or the type of variables you use do not match the type of a corresponding placeholder in &lt;format&gt;, your program will <a href='/error-handling.html'>error out</a>. You can use the following placeholders in &lt;format&gt;:<br/>
<ul><li>%s for a string<br/>
</li><li>%c for a number displayed as a character,<br/>
</li><li>%&lt;number&gt;s for a string output with a width of at least &lt;number&gt; (any excess filled with spaces to the left),<br/>
</li><li>%ld for a 64-bit signed number. Use "lo" for displaying in octal notation and "lx" for hexadecimal notation.<br/>
</li><li>%&lt;number&gt;ld for a 64-bit signed number output with a width of at least &lt;number&gt; (any excess filled with spaces to the left). Use "lo" for displaying in octal notation and "lx" for hexadecimal notation.</li>
</li><li>%hd for a 32-bit signed number. Use "hu" for displaying as unsigned number, "ho" for displaying in octal notation and "hx" for hexadecimal notation.<br/>
</li><li>%&lt;number&gt;hd for a 32-bit signed number output with a width of at least &lt;number&gt; (any excess filled with spaces to the left). Use "ho" for displaying as unsigned number, "ho" for displaying in octal notation and "hx" for hexadecimal notation.<br/>
</li><li>%hhd for a signed 8-bit number. Use "hhu" for displaying as unsigned number, "hho" for displaying in octal notation and "hhx" for hexadecimal notation.<br/>
</li><li>%&lt;number&gt;hhd for a number output with a width of at least &lt;number&gt; (any excess filled with spaces to the left). Use "hhu" for displaying as unsigned number, "hho" for displaying in octal notation and "hhx" for hexadecimal notation.<br/>
</li><li>%&lt;width&gt;f for a double output in fixed-point notation, with the 6 digits after decimal point ("format-floating" clause in <a href='/double-string.html'>double-string</a>); %&lt;width&gt;e for scientific notation with one digit before the decimal point, along with the exponent ("format-scientific" clause in <a href='/double-string.html'>double-string</a>); %&lt;width&gt;g displays either %f or %e format based on which is more compact ("format-compact" clause in <a href='/double-string.html'>double-string</a>); in any case &lt;width&gt; represents the width of at least &lt;width&gt; bytes output. You can also use &lt;widith&gt;.&lt;precision&gt; to specify both width and precision, or ".&lt;precision&gt;" for just precision; for instance, "%10f" or "%12.4e" etc.</li></ul>
If "to-error" clause is used, the output is sent to "stderr", or standard output stream.<br/>
<br/>
If "to" clause is used, then the output of print-format is stored into &lt;string&gt;. <br/>
To output data (the string output is "the number is 20"):<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_880' class=notranslate>
<span class="Statement">print-format</span> <span class="Constant">&quot;</span><span class="Special">%s</span><span class="Constant"> is </span><span class="Special">%hd</span><span class="Constant">&quot;</span>, <span class="Constant">&quot;the number&quot;</span>, <span class="Constant">20</span></pre>
<span id=rimstone_copied_880 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_880' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_880, code_880, rimstone_copied_880)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Create a query text string by means of <a href='/write-string.html'>write-string</a> statement:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_881' class=notranslate>
<span class="Comment">//</span>
/ Construct the run-time text of dynamic SQL
<span class="Comment">//</span>
<span class="Statement">write-string</span> qry_txt
<span class="Statement">@</span>select * from <span class="Statement">&lt;&lt;print-format</span> <span class="Constant">&quot;</span><span class="Special">%s</span><span class="Constant"> where id=&quot;</span><span class="Special">%ld</span><span class="Constant">&quot;, table_name, id_num&gt;&gt;</span>
<span class="Constant">end-write-string</span></pre>
<span id=rimstone_copied_881 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_881' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_881, code_881, rimstone_copied_881)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
This example of web encoding displayes text containing HTML tags without them being rendered in the browser:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_882' class=notranslate>
<span class="Statement">print-format</span> <span class="Constant">&quot;We use </span><span class="Special">%s</span><span class="Constant"> markup&quot;</span>, <span class="Constant">&quot;&lt;hr/&gt;&quot;</span><span class="Identifier"> web-encode</span></pre>
<span id=rimstone_copied_882 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_882' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_882, code_882, rimstone_copied_882)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Here's an example of URL encoding. It creates a URL based on arbitrary strings used as URL parameters - for instance space would be encoded as "%20" in the final output:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_883' class=notranslate>
<span class="Statement">@</span>&lt;a href='<span class="Statement">&lt;&lt;print-path</span> <span class="Constant">&quot;/update&quot;</span><span class="Statement">&gt;&gt;</span>?val=<span class="Statement">&lt;&lt;print-format</span> <span class="Constant">&quot;Purchased </span><span class="Special">%s</span><span class="Constant"> for </span><span class="Special">%ld</span><span class="Constant"> dollars&quot;</span>, piece_desc, price<span class="Statement"> url-encode&gt;&gt;</span>'&gt;Log transaction&lt;/a&gt;</pre>
<span id=rimstone_copied_883 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_883' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_883, code_883, rimstone_copied_883)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<div class="vsub"><a id="See also"></a>See also</div>
 <a name='Output'></a><span style="font-weight:bold;">Output</span><br/>
<a href='/finish-output.html'>finish-output</a> &nbsp;<br/>
<a href='/flush-output.html'>flush-output</a> &nbsp;<br/>
<a href='/output-statement.html'>output-statement</a> &nbsp;<br/>
<a href='/print-format.html'>print-format</a> &nbsp;<br/>
<a href='/print-out.html'>print-out</a> &nbsp;<br/>
<a href='/print-path.html'>print-path</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='/documentation.html'>documentation</a><br/>
<a id='print-out.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:left;background-color:white;'><a href='https://rimstone-lang.com' style='border-bottom:0px'><img src='https://rimstone-lang.com/rimstone.png' style='width:180px;height:auto'/></a></div><div class='vhub' style='margin-top:10px;'>Print out</div><hr/><span style="font-weight:bold;">Purpose</span>: Print data out.<br/>
<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_893' class=notranslate>
<span class="Statement">print-out</span> ( ( &lt;string&gt; [<span class="Identifier"> length</span> &lt;length&gt; ] [<span class="Identifier"> url-encode</span> |<span class="Identifier"> web-encode</span> ] [<span class="Identifier"> new-line</span> ] ) \
          | ( &lt;number&gt; | &lt;<span class="Type">double</span>&gt; )<span class="Identifier"> new-line</span> \
          |<span class="Identifier"> source-file</span> [<span class="Identifier"> new-line</span> ] \
          |<span class="Identifier"> source-line</span> [<span class="Identifier"> new-line</span> ] )<span class="Identifier"> ,</span> ...</pre>
<span id=rimstone_copied_893 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_893' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_893, code_893, rimstone_copied_893)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
print-out outputs various kinds of data:<br/>
<ul><li>A &lt;string&gt; is output:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_894' class=notranslate>
<span class="Statement">print-out</span> &lt;string&gt; [ &lt;length&gt; ] [<span class="Identifier"> url-encode</span> |<span class="Identifier"> web-encode</span> ] [<span class="Identifier"> new-line</span> ]</pre>
<span id=rimstone_copied_894 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_894' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_894, code_894, rimstone_copied_894)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<ul><li>By default, &lt;string&gt; is output without any encoding (meaning a string is output exactly as it appears). To output data verbatim to a client:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_895' class=notranslate>
<span class="Statement">set-string</span> mydata=<span class="Constant">&quot;Hello world&quot;</span>
<span class="Statement">print-out</span> mydata</pre>
<span id=rimstone_copied_895 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_895' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_895, code_895, rimstone_copied_895)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Writing to client, outputting text followed by a horizontal rule - the text is output to a client (such as browser) as it is, and the browser will interpret tags "&lt;br/&gt;" and "&lt;hr/&gt;" as a line break and a horizonal line and display them as such:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_896' class=notranslate>
<span class="Statement">print-out</span> <span class="Constant">&quot;This is a non-encoded output&lt;br/&gt;&quot;</span><span class="Identifier"> new-line</span>
<span class="Statement">print-out</span> <span class="Constant">&quot;&lt;hr/&gt;&quot;</span></pre>
<span id=rimstone_copied_896 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_896' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_896, code_896, rimstone_copied_896)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Create a query text string by means of <a href='/write-string.html'>write-string</a> statement:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_897' class=notranslate>
<span class="Comment">//</span>
<span class="Comment">// Construct the run-time text of dynamic SQL</span>
<span class="Comment">//</span>
<span class="Statement">write-string</span> qry_txt
<span class="Statement">   @</span>select * from <span class="Statement">&lt;&lt;print-out</span> table_name<span class="Statement">&gt;&gt;</span>
<span class="Statement">end-write-string</span></pre>
<span id=rimstone_copied_897 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_897' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_897, code_897, rimstone_copied_897)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
</li><li>If "url-encode" clause is used, then the output is URL-encoded. This means such output is suited for use in URL parameters. Create a URL based on arbitrary strings used as URL parameters - for instance a space would be encoded as "%20" in the final output:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_898' class=notranslate>
<span class="Statement">@</span>&lt;a href='<span class="Statement">&lt;&lt;print-out</span> <span class="Constant">&quot;/update&quot;</span><span class="Statement">&gt;&gt;</span>?item=<span class="Statement">&lt;&lt;print-out</span> item_name<span class="Statement"> url-encode&gt;&gt;</span>'&gt;Update&lt;/a&gt;</pre>
<span id=rimstone_copied_898 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_898' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_898, code_898, rimstone_copied_898)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
</li></ul>If "web-encode" clause is used, then the output is web-encoded (or HTML-encoded). This means such output is suited for use in web pages - the text will be displayed verbatim without HTML-markup being interpreted. Display "We use &lt;hr/&gt; markup" text, without "&lt;hr/&gt;" being displayed as a horizontal line:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_899' class=notranslate>
<span class="Statement">print-out</span> <span class="Constant">&quot;We use &lt;hr/&gt; markup&quot;</span><span class="Identifier"> web-encode</span></pre>
<span id=rimstone_copied_899 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_899' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_899, code_899, rimstone_copied_899)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
If "length" clause is used, then only &lt;length&gt; leading bytes of &lt;string&gt; are output. <br/>
<br/>
If "new-line" clause is used, then a new line ("\n") is output after &lt;string&gt;.<br/>
<br/>
Note that all bytes of &lt;string&gt; are output, even if &lt;string&gt; contains null-bytes.<br/>
<br/>
</li><li>Outputs a number, given by &lt;number&gt;:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_900' class=notranslate>
<span class="Statement">print-out</span> &lt;number&gt; [<span class="Identifier"> new-line</span> ]</pre>
<span id=rimstone_copied_900 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_900' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_900, code_900, rimstone_copied_900)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
If "new-line" clause is used, then a new line ("\n") is output after &lt;number&gt;.<br/>
<br/>
To output a number to a client:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_901' class=notranslate>
<span class="Statement">set-number</span> x = <span class="Constant">100</span>
<span class="Statement">print-out</span> x</pre>
<span id=rimstone_copied_901 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_901' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_901, code_901, rimstone_copied_901)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<br/>
</li><li>Outputs a double, given by &lt;double&gt; (in a "format-floating" format, see <a href='/double-string.html'>double-string</a>):<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_884' class=notranslate>
<span class="Statement">print-out</span> &lt;<span class="Type">double</span>&gt; [<span class="Identifier"> new-line</span> ]</pre>
<span id=rimstone_copied_884 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_884' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_884, code_884, rimstone_copied_884)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
If "new-line" clause is used, then a new line ("\n") is output after &lt;number&gt;.<br/>
<br/>
To output a number to a client:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_885' class=notranslate>
<span class="Statement">set-number</span> x = <span class="Constant">100</span>
<span class="Statement">print-out</span> x</pre>
<span id=rimstone_copied_885 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_885' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_885, code_885, rimstone_copied_885)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<br/>
</li><li>Outputs a boolean, given by &lt;bool&gt;:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_886' class=notranslate>
<span class="Statement">print-out</span> &lt;<span class="Type">bool</span>&gt; [<span class="Identifier"> new-line</span> ]</pre>
<span id=rimstone_copied_886 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_886' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_886, code_886, rimstone_copied_886)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
If "new-line" clause is used, then a new line ("\n") is output after &lt;bool&gt;. The value of &lt;bool&gt; is output as 1 if true, and 0 if false.<br/>
<br/>
To output a boolean to a client (outputs 1):<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_887' class=notranslate>
<span class="Statement">set-bool</span> b = <span class="Constant">true</span>
<span class="Statement">print-out</span> b</pre>
<span id=rimstone_copied_887 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_887' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_887, code_887, rimstone_copied_887)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<br/>
</li><li>Outputs the file name of the current source file.<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_888' class=notranslate>
<span class="Statement">print-out</span><span class="Identifier"> source-file</span> [<span class="Identifier"> new-line</span> ]</pre>
<span id=rimstone_copied_888 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_888' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_888, code_888, rimstone_copied_888)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
This outputs the file name (relative to the source code directory) of the source file where the statement is located; this is often used for debugging.<br/>
<br/>
If "new-line" clause is used, then a new line ("\n") is output afterwards.<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_889' class=notranslate>
<span class="Statement">@</span>This file is <span class="Statement">&lt;&lt;print-out source-file&gt;&gt;</span></pre>
<span id=rimstone_copied_889 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_889' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_889, code_889, rimstone_copied_889)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<br/>
</li><li>Outputs current line number in the source file.<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_890' class=notranslate>
<span class="Statement">print-out</span><span class="Identifier"> source-line</span> [<span class="Identifier"> new-line</span> ]</pre>
<span id=rimstone_copied_890 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_890' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_890, code_890, rimstone_copied_890)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
This outputs the line number in the source file where the statement is located. It is often used for debugging purposes.<br/>
<br/>
If "new-line" clause is used, then a new line ("\n") is output afterwards.<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_891' class=notranslate>
<span class="Statement">@</span>This line is #<span class="Statement">&lt;&lt;print-out source-line&gt;&gt;</span></pre>
<span id=rimstone_copied_891 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_891' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_891, code_891, rimstone_copied_891)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
</li></ul>
<div class="vsub"><a id="List of expressions"></a>List of expressions</div>
You can specify a list of expressions separated by a comma to print them out in the order specified, with the end result the same as if they were separate print-outs, for instance:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_892' class=notranslate>
<span class="Statement">print-out</span> str<span class="Identifier"> new-line</span>, n, <span class="Constant">&quot; some string &quot;</span>, str1<span class="Identifier"> web-encode new-line</span></pre>
<span id=rimstone_copied_892 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_892' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_892, code_892, rimstone_copied_892)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
In this case, you'll be outputting string "str", number "n", a string constant " some string ", and a web-encoded string "str1". There are no whitespaces between each item output.<br/>
<div class="vsub"><a id="See also"></a>See also</div>
 <a name='Output'></a><span style="font-weight:bold;">Output</span><br/>
<a href='/finish-output.html'>finish-output</a> &nbsp;<br/>
<a href='/flush-output.html'>flush-output</a> &nbsp;<br/>
<a href='/output-statement.html'>output-statement</a> &nbsp;<br/>
<a href='/print-format.html'>print-format</a> &nbsp;<br/>
<a href='/print-out.html'>print-out</a> &nbsp;<br/>
<a href='/print-path.html'>print-path</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='/documentation.html'>documentation</a><br/>
<a id='print-path.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:left;background-color:white;'><a href='https://rimstone-lang.com' style='border-bottom:0px'><img src='https://rimstone-lang.com/rimstone.png' style='width:180px;height:auto'/></a></div><div class='vhub' style='margin-top:10px;'>Print path</div><hr/><span style="font-weight:bold;">Purpose</span>: Print out URL that leads to a request handler.<br/>
<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_904' class=notranslate>
<span class="Statement">print-path</span> &lt;request path&gt; [<span class="Identifier"> new-line</span> ]</pre>
<span id=rimstone_copied_904 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_904' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_904, code_904, rimstone_copied_904)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
print-path outputs URL application path of a URL that called this <a href='/request.html'>request</a> handler, followed by string &lt;request path&gt;.<br/>
<br/>
If no "--path" option in <a href='/rim.html'>rim</a> is used to specify URL application path, then it is the same as application name prepended with a forward slash, followed by "/&lt;request path&gt;":<br/>
<div class='ncode' style='position:relative;padding-right:16px;'>
<pre id='code_903' class=notranslate>
/&lt;app name&gt;/&lt;request path&gt;</pre>
<span id=rimstone_copied_903 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_903' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_903, code_903, rimstone_copied_903)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
print-path is used in construction of URLs or HTML forms (either for HTML or API) to refer back to the same application. Use it to create the absolute URL path to refer back to a service of yours so you can issue <a href='/request.html'>request</a>s to it. <br/>
<br/>
For example, this is a link that specifies request to service "/show-notes":<br/>
<div class='htmlcode' style='position:relative;padding-right:16px;'>
<pre id='code_902' class=notranslate>
@<span class="Identifier">&lt;</span><span class="Statement">a</span><span class="Identifier"> </span><span class="Type">href</span><span class="Identifier">=</span><span class="Constant">&quot;&lt;&lt;print-path &quot;</span><span class="Identifier">/show-notes</span><span class="Constant">&quot;&gt;&gt;?date=yesterday&quot;</span><span class="Identifier">&gt;</span><span class="Underlined">Show Notes</span><span class="Identifier">&lt;/</span><span class="Statement">a</span><span class="Identifier">&gt;</span></pre>
<span id=rimstone_copied_902 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_902' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_902, code_902, rimstone_copied_902)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
If you are building HTML forms, you can add a note with:<br/>
<div class='htmlcode' style='position:relative;padding-right:16px;'>
<pre id='code_905' class=notranslate>
@<span class="Identifier">&lt;</span><span class="Statement">form</span><span class="Identifier"> </span><span class="Type">action</span><span class="Identifier">=</span><span class="Constant">'&lt;&lt;print-path &quot;/add-note&quot;&gt;&gt;'</span><span class="Identifier"> </span><span class="Type">method</span><span class="Identifier">=</span><span class="Constant">&quot;POST&quot;</span><span class="Identifier">&gt;</span>
@<span class="Identifier">&lt;</span><span class="Statement">input</span><span class="Identifier"> </span><span class="Type">type</span><span class="Identifier">=</span><span class="Constant">&quot;text&quot;</span><span class="Identifier"> </span><span class="Type">name</span><span class="Identifier">=</span><span class="Constant">&quot;note&quot;</span><span class="Identifier"> </span><span class="Type">value</span><span class="Identifier">=</span><span class="Constant">&quot;&quot;</span><span class="Identifier">&gt;</span>
@<span class="Identifier">&lt;/</span><span class="Statement">form</span><span class="Identifier">&gt;</span></pre>
<span id=rimstone_copied_905 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_905' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_905, code_905, rimstone_copied_905)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
See <a href='/request.html'>request</a> for more on URL structure.<br/>
<br/>
If "new-line" clause is used, then a new line ("\n") is output after the URL path.<br/>
<div class="vsub"><a id="See also"></a>See also</div>
 <a name='Output'></a><span style="font-weight:bold;">Output</span><br/>
<a href='/finish-output.html'>finish-output</a> &nbsp;<br/>
<a href='/flush-output.html'>flush-output</a> &nbsp;<br/>
<a href='/output-statement.html'>output-statement</a> &nbsp;<br/>
<a href='/print-format.html'>print-format</a> &nbsp;<br/>
<a href='/print-out.html'>print-out</a> &nbsp;<br/>
<a href='/print-path.html'>print-path</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='/documentation.html'>documentation</a><br/>
<a id='purge-array.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:left;background-color:white;'><a href='https://rimstone-lang.com' style='border-bottom:0px'><img src='https://rimstone-lang.com/rimstone.png' style='width:180px;height:auto'/></a></div><div class='vhub' style='margin-top:10px;'>Purge array</div><hr/><span style="font-weight:bold;">Purpose</span>: Purge an array.<br/>
<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_906' class=notranslate>
<span class="Statement">purge-array</span> &lt;array&gt;</pre>
<span id=rimstone_copied_906 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_906' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_906, code_906, rimstone_copied_906)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
purge-array deletes all elements from &lt;array&gt; that was created with <a href='/new-array.html'>new-array</a>. <br/>
<br/>
After purge-array, you can use it without calling <a href='/new-array.html'>new-array</a> again; the array is initialized as if it was just created that way.<br/>
<div class="vsub"><a id="Examples"></a>Examples</div>
Create an array, put some data in it and then delete the data:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_907' class=notranslate>
<span class="Statement">new-array</span> arr
<span class="Statement">write-array</span> arr<span class="Identifier"> key</span> <span class="Constant">50</span><span class="Identifier"> value</span> <span class="Constant">&quot;myvalue&quot;</span>
<span class="Statement">purge-array</span> arr</pre>
<span id=rimstone_copied_907 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_907' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_907, code_907, rimstone_copied_907)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
See <a href='/read-array.html'>read-array</a> for more examples.<br/>
<div class="vsub"><a id="See also"></a>See also</div>
 <a name='Array'></a><span style="font-weight:bold;">Array</span><br/>
<a href='/new-array.html'>new-array</a> &nbsp;<br/>
<a href='/purge-array.html'>purge-array</a> &nbsp;<br/>
<a href='/read-array.html'>read-array</a> &nbsp;<br/>
<a href='/write-array.html'>write-array</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='/documentation.html'>documentation</a><br/>
<a id='purge-fifo.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:left;background-color:white;'><a href='https://rimstone-lang.com' style='border-bottom:0px'><img src='https://rimstone-lang.com/rimstone.png' style='width:180px;height:auto'/></a></div><div class='vhub' style='margin-top:10px;'>Purge fifo</div><hr/><span style="font-weight:bold;">Purpose</span>: Delete FIFO list data.<br/>
<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_908' class=notranslate>
<span class="Statement">purge-fifo</span> &lt;list&gt;</pre>
<span id=rimstone_copied_908 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_908' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_908, code_908, rimstone_copied_908)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
purge-fifo will delete all elements from the FIFO &lt;list&gt;, created by <a href='/new-fifo.html'>new-fifo</a>. The list is then empty and you can still put data into it, and get data from it afterwards, without having to call <a href='/new-fifo.html'>new-fifo</a> again.<br/>
<br/>
All keys or values stored in the list are also deleted.<br/>
<div class="vsub"><a id="Examples"></a>Examples</div>
See <a href='/read-fifo.html'>read-fifo</a>.<br/>
<div class="vsub"><a id="See also"></a>See also</div>
 <a name='FIFO'></a><span style="font-weight:bold;">FIFO</span><br/>
<a href='/delete-fifo.html'>delete-fifo</a> &nbsp;<br/>
<a href='/new-fifo.html'>new-fifo</a> &nbsp;<br/>
<a href='/purge-fifo.html'>purge-fifo</a> &nbsp;<br/>
<a href='/read-fifo.html'>read-fifo</a> &nbsp;<br/>
<a href='/rewind-fifo.html'>rewind-fifo</a> &nbsp;<br/>
<a href='/write-fifo.html'>write-fifo</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='/documentation.html'>documentation</a><br/>
<a id='purge-hash.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:left;background-color:white;'><a href='https://rimstone-lang.com' style='border-bottom:0px'><img src='https://rimstone-lang.com/rimstone.png' style='width:180px;height:auto'/></a></div><div class='vhub' style='margin-top:10px;'>Purge hash</div><hr/><span style="font-weight:bold;">Purpose</span>: Purge a hash.<br/>
<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_909' class=notranslate>
<span class="Statement">purge-hash</span> &lt;hash&gt;</pre>
<span id=rimstone_copied_909 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_909' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_909, code_909, rimstone_copied_909)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
purge-hash deletes all elements from &lt;hash&gt; that was created with <a href='/new-hash.html'>new-hash</a>. <br/>
<br/>
After purge-hash, you can use it without calling <a href='/new-hash.html'>new-hash</a> again. Note however, that "average-reads" statistics (see <a href='/get-hash.html'>get-hash</a>) is not reset - it keeps being computed and remains for the life of the hash.<br/>
<div class="vsub"><a id="Examples"></a>Examples</div>
Create a hash, put some data in it and then delete the data:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_910' class=notranslate>
<span class="Statement">new-hash</span> h
<span class="Statement">write-hash</span> h<span class="Identifier"> key</span> <span class="Constant">&quot;mykey&quot;</span><span class="Identifier"> value</span> <span class="Constant">&quot;myvalue&quot;</span>
<span class="Statement">purge-hash</span> h</pre>
<span id=rimstone_copied_910 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_910' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_910, code_910, rimstone_copied_910)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
See <a href='/read-hash.html'>read-hash</a> for more examples.<br/>
<div class="vsub"><a id="See also"></a>See also</div>
 <a name='Hash'></a><span style="font-weight:bold;">Hash</span><br/>
<a href='/get-hash.html'>get-hash</a> &nbsp;<br/>
<a href='/new-hash.html'>new-hash</a> &nbsp;<br/>
<a href='/purge-hash.html'>purge-hash</a> &nbsp;<br/>
<a href='/read-hash.html'>read-hash</a> &nbsp;<br/>
<a href='/resize-hash.html'>resize-hash</a> &nbsp;<br/>
<a href='/write-hash.html'>write-hash</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='/documentation.html'>documentation</a><br/>
<a id='purge-lifo.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:left;background-color:white;'><a href='https://rimstone-lang.com' style='border-bottom:0px'><img src='https://rimstone-lang.com/rimstone.png' style='width:180px;height:auto'/></a></div><div class='vhub' style='margin-top:10px;'>Purge lifo</div><hr/><span style="font-weight:bold;">Purpose</span>: Delete LIFO list data.<br/>
<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_911' class=notranslate>
<span class="Statement">purge-lifo</span> &lt;list&gt;</pre>
<span id=rimstone_copied_911 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_911' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_911, code_911, rimstone_copied_911)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
purge-lifo will delete all elements from the LIFO &lt;list&gt; created by <a href='/new-lifo.html'>new-lifo</a>, including all keys and values. The list is then empty and you can still put data into it, and get data from it afterwards, without having to call <a href='/new-lifo.html'>new-lifo</a> again.<br/>
<div class="vsub"><a id="Examples"></a>Examples</div>
See <a href='/read-lifo.html'>read-lifo</a>.<br/>
<div class="vsub"><a id="See also"></a>See also</div>
 <a name='LIFO'></a><span style="font-weight:bold;">LIFO</span><br/>
<a href='/delete-lifo.html'>delete-lifo</a> &nbsp;<br/>
<a href='/get-lifo.html'>get-lifo</a> &nbsp;<br/>
<a href='/new-lifo.html'>new-lifo</a> &nbsp;<br/>
<a href='/purge-lifo.html'>purge-lifo</a> &nbsp;<br/>
<a href='/read-lifo.html'>read-lifo</a> &nbsp;<br/>
<a href='/rewind-lifo.html'>rewind-lifo</a> &nbsp;<br/>
<a href='/write-lifo.html'>write-lifo</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='/documentation.html'>documentation</a><br/>
<a id='purge-list.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:left;background-color:white;'><a href='https://rimstone-lang.com' style='border-bottom:0px'><img src='https://rimstone-lang.com/rimstone.png' style='width:180px;height:auto'/></a></div><div class='vhub' style='margin-top:10px;'>Purge list</div><hr/><span style="font-weight:bold;">Purpose</span>: Delete linked list data.<br/>
<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_912' class=notranslate>
<span class="Statement">purge-list</span> &lt;list&gt;</pre>
<span id=rimstone_copied_912 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_912' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_912, code_912, rimstone_copied_912)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
purge-list will delete all elements (including their keys and values) from the linked &lt;list&gt;, created by <a href='/new-list.html'>new-list</a>. The list is then empty and you can still put data into it, and get data from it afterwards, without having to call <a href='/new-list.html'>new-list</a> again.<br/>
<div class="vsub"><a id="Examples"></a>Examples</div>
See <a href='/read-list.html'>read-list</a>.<br/>
<div class="vsub"><a id="See also"></a>See also</div>
 <a name='Linked list'></a><span style="font-weight:bold;">Linked list</span><br/>
<a href='/delete-list.html'>delete-list</a> &nbsp;<br/>
<a href='/get-list.html'>get-list</a> &nbsp;<br/>
<a href='/new-list.html'>new-list</a> &nbsp;<br/>
<a href='/position-list.html'>position-list</a> &nbsp;<br/>
<a href='/purge-list.html'>purge-list</a> &nbsp;<br/>
<a href='/read-list.html'>read-list</a> &nbsp;<br/>
<a href='/write-list.html'>write-list</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='/documentation.html'>documentation</a><br/>
<a id='purge-tree.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:left;background-color:white;'><a href='https://rimstone-lang.com' style='border-bottom:0px'><img src='https://rimstone-lang.com/rimstone.png' style='width:180px;height:auto'/></a></div><div class='vhub' style='margin-top:10px;'>Purge tree</div><hr/><span style="font-weight:bold;">Purpose</span>: Delete all tree nodes.<br/>
<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_913' class=notranslate>
<span class="Statement">purge-tree</span> &lt;tree&gt;</pre>
<span id=rimstone_copied_913 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_913' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_913, code_913, rimstone_copied_913)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
purge-tree will delete all &lt;tree&gt; nodes; &lt;tree&gt; must have been created with <a href='/new-tree.html'>new-tree</a>. All of &lt;tree&gt;'s nodes, and their keys/values all deleted.<br/>
<br/>
After purge-tree, the tree is empty and you can use it again (write into it, read from it etc.).<br/>
<div class="vsub"><a id="Examples"></a>Examples</div>
Delete all tree data:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_914' class=notranslate>
<span class="Statement">new-tree</span> mytree
<span class="Statement">.</span>..
<span class="Statement">purge-tree</span> mytree</pre>
<span id=rimstone_copied_914 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_914' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_914, code_914, rimstone_copied_914)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<div class="vsub"><a id="See also"></a>See also</div>
 <a name='Tree'></a><span style="font-weight:bold;">Tree</span><br/>
<a href='/delete-tree.html'>delete-tree</a> &nbsp;<br/>
<a href='/get-tree.html'>get-tree</a> &nbsp;<br/>
<a href='/new-tree.html'>new-tree</a> &nbsp;<br/>
<a href='/purge-tree.html'>purge-tree</a> &nbsp;<br/>
<a href='/read-tree.html'>read-tree</a> &nbsp;<br/>
<a href='/use-cursor.html'>use-cursor</a> &nbsp;<br/>
<a href='/write-tree.html'>write-tree</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='/documentation.html'>documentation</a><br/>
<a id='quit-process.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:left;background-color:white;'><a href='https://rimstone-lang.com' style='border-bottom:0px'><img src='https://rimstone-lang.com/rimstone.png' style='width:180px;height:auto'/></a></div><div class='vhub' style='margin-top:10px;'>Quit process</div><hr/><span style="font-weight:bold;">Purpose</span>: Quit the current process.<br/>
<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_915' class=notranslate>
<span class="Statement">quit-process</span></pre>
<span id=rimstone_copied_915 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_915' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_915, code_915, rimstone_copied_915)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
quit-process will properly terminate the current request and its running process (be it <a href='/service.html'>service</a> or <a href='/command-line.html'>command-line</a>). It does that by sending itself a SIGTERM signal and then executing the process wind-down.<br/>
<br/>
quit-process may be used to stop the service processes (or restart them if setup) in rare cases where you wish to do so programmatically instead of using <a href='/mrim.html'>mrim</a>.<br/>
<div class="vsub"><a id="Examples"></a>Examples</div>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_916' class=notranslate>
<span class="Statement">quit-process</span></pre>
<span id=rimstone_copied_916 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_916' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_916, code_916, rimstone_copied_916)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<div class="vsub"><a id="See also"></a>See also</div>
 <a name='Program flow'></a><span style="font-weight:bold;">Program flow</span><br/>
<a href='/break-loop.html'>break-loop</a> &nbsp;<br/>
<a href='/call-handler.html'>call-handler</a> &nbsp;<br/>
<a href='/code-blocks.html'>code-blocks</a> &nbsp;<br/>
<a href='/continue-loop.html'>continue-loop</a> &nbsp;<br/>
<a href='/do-once.html'>do-once</a> &nbsp;<br/>
<a href='/exit-handler.html'>exit-handler</a> &nbsp;<br/>
<a href='/if-defined.html'>if-defined</a> &nbsp;<br/>
<a href='/if-true.html'>if-true</a> &nbsp;<br/>
<a href='/quit-process.html'>quit-process</a> &nbsp;<br/>
<a href='/return-handler.html'>return-handler</a> &nbsp;<br/>
<a href='/start-loop.html'>start-loop</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='/documentation.html'>documentation</a><br/>
<a id='random-crypto.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:left;background-color:white;'><a href='https://rimstone-lang.com' style='border-bottom:0px'><img src='https://rimstone-lang.com/rimstone.png' style='width:180px;height:auto'/></a></div><div class='vhub' style='margin-top:10px;'>Random crypto</div><hr/><span style="font-weight:bold;">Purpose</span>: Obtain a random string for cryptographic use.<br/>
<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_917' class=notranslate>
<span class="Statement">random-crypto</span><span class="Type"> to</span> &lt;random string&gt; \
    [<span class="Identifier"> length</span> &lt;string length&gt; ]</pre>
<span id=rimstone_copied_917 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_917' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_917, code_917, rimstone_copied_917)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
random-crypto obtains a random string of length &lt;string length&gt;. This statement uses a cryptographically secure pseudo random generator (CSPRNG) from OpenSSL library. &nbsp;If "length" clause is omitted, the length is 20 by default. <br/>
<br/>
The value generated is always binary and may contain null-characters and is null-terminated.<br/>
<br/>
Use this statement only when needed for specific cryptographic uses. In all other cases, use <a href='/random-string.html'>random-string</a> which is considerably faster.<br/>
<div class="vsub"><a id="Examples"></a>Examples</div>
Get a 20-digit long random binary value:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_918' class=notranslate>
<span class="Statement">random-crypto</span><span class="Type"> to</span> str<span class="Identifier"> length</span> <span class="Constant">20</span></pre>
<span id=rimstone_copied_918 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_918' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_918, code_918, rimstone_copied_918)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<div class="vsub"><a id="See also"></a>See also</div>
 <a name='Encryption'></a><span style="font-weight:bold;">Encryption</span><br/>
<a href='/decrypt-data.html'>decrypt-data</a> &nbsp;<br/>
<a href='/derive-key.html'>derive-key</a> &nbsp;<br/>
<a href='/encrypt-data.html'>encrypt-data</a> &nbsp;<br/>
<a href='/hash-string.html'>hash-string</a> &nbsp;<br/>
<a href='/hmac-string.html'>hmac-string</a> &nbsp;<br/>
<a href='/random-crypto.html'>random-crypto</a> &nbsp;<br/>
<a href='/random-string.html'>random-string</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='/documentation.html'>documentation</a><br/>
<a id='random-string.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:left;background-color:white;'><a href='https://rimstone-lang.com' style='border-bottom:0px'><img src='https://rimstone-lang.com/rimstone.png' style='width:180px;height:auto'/></a></div><div class='vhub' style='margin-top:10px;'>Random string</div><hr/><span style="font-weight:bold;">Purpose</span>: Obtain a random string.<br/>
<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_919' class=notranslate>
<span class="Statement">random-string</span><span class="Type"> to</span> &lt;random string&gt; \
    [<span class="Identifier"> length</span> &lt;string length&gt; ] \
    [<span class="Identifier"> number</span> |<span class="Identifier"> binary</span> ]</pre>
<span id=rimstone_copied_919 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_919' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_919, code_919, rimstone_copied_919)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
random-string obtains a random string of length &lt;string length&gt;. If "length" clause is omitted, the length is 20 by default. <br/>
<br/>
If "number" clause is used, then the resulting string is composed of digits only ("0" through "9").<br/>
<br/>
If "binary" clause is used, then the resulting string is binary, i.e. each byte can have an unsigned value of 0-255. <br/>
<br/>
By default, if neither "number" or "binary" is used, the resulting string is alphanumeric, i.e. digits ("0" through "9") and alphabet letters ("a"-"z" and "A"-"Z") are used only.<br/>
<br/>
Random generator is based on the Linux random() generator seeded by local process properties such as its PID and time. A single process is seeded once, and thus any number of requests served by the same process will use a subset of the process' random sequence. Due to joint entropy, each result given to any request is random, not just within a single request, but among any number of different requests.<br/>
<div class="vsub"><a id="Examples"></a>Examples</div>
Get a 100-digit long random value (as an alphanumeric string):<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_920' class=notranslate>
<span class="Statement">random-string</span><span class="Type"> to</span> str<span class="Identifier"> length</span> <span class="Constant">100</span>
<span class="Statement">print-format</span> <span class="Constant">&quot;</span><span class="Special">%s</span><span class="Special">\n</span><span class="Constant">&quot;</span>, str</pre>
<span id=rimstone_copied_920 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_920' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_920, code_920, rimstone_copied_920)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Get a random number of length 10 in string representation:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_921' class=notranslate>
<span class="Statement">random-string</span><span class="Type"> to</span> str<span class="Identifier"> length</span> <span class="Constant">10</span><span class="Identifier"> number</span>
<span class="Statement">print-format</span> <span class="Constant">&quot;</span><span class="Special">%s</span><span class="Special">\n</span><span class="Constant">&quot;</span>, str</pre>
<span id=rimstone_copied_921 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_921' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_921, code_921, rimstone_copied_921)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Get a random binary value that is 8 bytes in length - this value may contain null bytes (i.e. it will contain bytes with values ranging from 0 to 255):<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_922' class=notranslate>
<span class="Statement">random-string</span><span class="Type"> to</span> str<span class="Identifier"> length</span> <span class="Constant">8</span><span class="Identifier"> binary</span></pre>
<span id=rimstone_copied_922 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_922' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_922, code_922, rimstone_copied_922)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<div class="vsub"><a id="See also"></a>See also</div>
 <a name='Encryption'></a><span style="font-weight:bold;">Encryption</span><br/>
<a href='/decrypt-data.html'>decrypt-data</a> &nbsp;<br/>
<a href='/derive-key.html'>derive-key</a> &nbsp;<br/>
<a href='/encrypt-data.html'>encrypt-data</a> &nbsp;<br/>
<a href='/hash-string.html'>hash-string</a> &nbsp;<br/>
<a href='/hmac-string.html'>hmac-string</a> &nbsp;<br/>
<a href='/random-crypto.html'>random-crypto</a> &nbsp;<br/>
<a href='/random-string.html'>random-string</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='/documentation.html'>documentation</a><br/>
<a id='read-array.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:left;background-color:white;'><a href='https://rimstone-lang.com' style='border-bottom:0px'><img src='https://rimstone-lang.com/rimstone.png' style='width:180px;height:auto'/></a></div><div class='vhub' style='margin-top:10px;'>Read array</div><hr/><span style="font-weight:bold;">Purpose</span>: Get data from an array.<br/>
<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_923' class=notranslate>
<span class="Statement">read-array</span> &lt;array&gt; \
   <span class="Identifier"> key</span> &lt;key&gt; \
   <span class="Type"> value</span> &lt;value&gt; \
    [<span class="Identifier"> delete</span> [ &lt;delete&gt; ] ] \
    [<span class="Type"> status</span> [ &lt;status&gt; ] ]</pre>
<span id=rimstone_copied_923 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_923' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_923, code_923, rimstone_copied_923)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
read-array will obtain an element from &lt;array&gt; (that was created with <a href='/new-array.html'>new-array</a>); an element obtained is &lt;value&gt; (in "value" clause) based on a number &lt;key&gt; (in "key" clause). &lt;key&gt; is a number from 0 up to (excluding) the currently allocated array size. The type of &lt;value&gt; is determined when &lt;array&gt; is created (see "type" clause), and can be either a string, number, double or a boolean.<br/>
<br/>
You can also delete an element from the array by using "delete" clause - the &lt;value&gt; is still obtained though it is no longer in the array. The array element is deleted if "delete" clause is used without boolean variable &lt;delete&gt;, or if &lt;delete&gt; evaluates to true. "Deleting" means that an element will no longer hold a valid value; when such an element is read, for a string array it would be an empty string, for a number array it would be 0, for a double array it would be 0.0, and for a boolean array it would be false. The only way to distinguish those from existing array elements with the same values is to obtain &lt;status&gt; number variable (in "status" clause), which is RIM_OKAY if an array element is set and not deleted, or RIM_ERR_EXIST if an array element was never set or was deleted.<br/>
<br/>
Note that array may be allocated beyond the highest index of an element written to it; reading from such elements that have never been written to will produce an empty string, a number 0, a double 0.0, or a boolean false value (depending on the type of array).<br/>
<div class="vsub"><a id="Subscription shortcut"></a>Subscription shortcut</div>
You can also get the value of an &lt;array&gt; element by using subscription operator ([]), for instance here you'd reference the 3rd element of array 'arr' in the comparison statement:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_924' class=notranslate>
<span class="Statement">new-array</span> arr<span class="Identifier"> type number</span>
<span class="Statement">write-array</span> arr<span class="Identifier"> key</span> <span class="Constant">3</span><span class="Identifier"> value</span> <span class="Constant">20</span>
<span class="Statement">if-true</span> arr[<span class="Constant">3</span>]<span class="Identifier"> equal</span> <span class="Constant">20</span>
<span class="Statement">    @</span>Yes it's <span class="Constant">20</span>
<span class="Statement">end-if</span></pre>
<span id=rimstone_copied_924 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_924' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_924, code_924, rimstone_copied_924)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
This works for any array type, so you can use the subscriptive form of &lt;array&gt;[&lt;index&gt;] in any expression, where &lt;index&gt; is a number. <br/>
<div class="vsub"><a id="Examples"></a>Examples</div>
In this example, a new array is created, a value is written to it, and then the value is obtained and the element deleted:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_925' class=notranslate>
<span class="Comment">// Create new array</span>
<span class="Statement">new-array</span> arr<span class="Identifier"> type string</span>

<span class="Comment">// Write to array</span>
<span class="Statement">write-array</span> arr<span class="Identifier"> key</span> <span class="Constant">500</span><span class="Identifier"> value</span> <span class="Constant">&quot;some data&quot;</span>

<span class="Comment">// Read from array</span>
<span class="Statement">read-array</span> arr<span class="Identifier"> key</span> <span class="Constant">500</span><span class="Type"> value</span> res<span class="Identifier"> delete</span>
<span class="Statement">@</span>Deleted value is <span class="Statement">&lt;&lt;print-out</span> res<span class="Statement">&gt;&gt;</span></pre>
<span id=rimstone_copied_925 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_925' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_925, code_925, rimstone_copied_925)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<div class="vsub"><a id="See also"></a>See also</div>
 <a name='Array'></a><span style="font-weight:bold;">Array</span><br/>
<a href='/new-array.html'>new-array</a> &nbsp;<br/>
<a href='/purge-array.html'>purge-array</a> &nbsp;<br/>
<a href='/read-array.html'>read-array</a> &nbsp;<br/>
<a href='/write-array.html'>write-array</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='/documentation.html'>documentation</a><br/>
<a id='read-fifo.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:left;background-color:white;'><a href='https://rimstone-lang.com' style='border-bottom:0px'><img src='https://rimstone-lang.com/rimstone.png' style='width:180px;height:auto'/></a></div><div class='vhub' style='margin-top:10px;'>Read fifo</div><hr/><span style="font-weight:bold;">Purpose</span>: Reads key/value pair from a FIFO list.<br/>
<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_926' class=notranslate>
<span class="Statement">read-fifo</span> &lt;list&gt; \
   <span class="Type"> key</span> &lt;key&gt; \
   <span class="Type"> value</span> &lt;value&gt; \
    [<span class="Type"> status</span> &lt;status&gt; ]</pre>
<span id=rimstone_copied_926 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_926' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_926, code_926, rimstone_copied_926)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
read-fifo retrieves an element from the FIFO &lt;list&gt; into &lt;key&gt; string &nbsp;(in "key" clause) and &lt;value&gt; string (in "value" clause).<br/>
<br/>
Once an element has been retrieved, the next use of read-fifo will obtain the following one, in the same order they were put in. read-fifo starts with the first element put in, and moves forward from there, unless <a href='/rewind-fifo.html'>rewind-fifo</a> is called, which positions back to the first one.<br/>
<br/>
If the element is successfully retrieved, &lt;status&gt; number (in "status" clause) is RIM_OKAY, otherwise it is RIM_ERR_EXIST, which means there are no more elements to retrieve.<br/>
<div class="vsub"><a id="Examples"></a>Examples</div>
In this example, a FIFO list is created, and two key/value pairs added. They are then retrieved in a loop and printed out (twice with rewind), and then the list is purged:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_927' class=notranslate>
<span class="Comment">// Create a list</span>
<span class="Statement">new-fifo</span> mylist

<span class="Comment">// Add data to the list</span>
<span class="Statement">write-fifo</span> mylist<span class="Identifier"> key</span> <span class="Constant">&quot;key1&quot;</span><span class="Identifier"> value</span> <span class="Constant">&quot;value1&quot;</span>
<span class="Statement">write-fifo</span> mylist<span class="Identifier"> key</span> <span class="Constant">&quot;some2&quot;</span><span class="Identifier"> value</span> <span class="Constant">&quot;other2&quot;</span>

<span class="Statement">start-loop</span>
    <span class="Comment">// Get data from the list</span>
<span class="Statement">    read-fifo</span> mylist<span class="Type"> key</span> k<span class="Type"> value</span> v<span class="Type"> status</span> st

    <span class="Comment">// Check if no more data</span>
<span class="Statement">    if-true</span> st<span class="Identifier"> not-equal</span> RIM_OKAY
<span class="Statement">        break-loop</span>
<span class="Statement">    end-if</span>

<span class="Statement">    @</span>Obtained key <span class="Statement">&lt;&lt;print-out</span> k<span class="Statement">&gt;&gt;</span> with value <span class="Statement">&lt;&lt;print-out</span> v<span class="Statement">&gt;&gt;</span>
<span class="Statement">end-loop</span>

<span class="Comment">// Go through the list again, use rewind-fifo for that</span>
<span class="Statement">rewind-fifo</span> mylist

<span class="Statement">start-loop</span>
<span class="Statement">    read-fifo</span> mylist<span class="Type"> key</span> k<span class="Type"> value</span> v<span class="Type"> status</span> st
<span class="Statement">    if-true</span> st<span class="Identifier"> not-equal</span> RIM_OKAY
<span class="Statement">        break-loop</span>
<span class="Statement">    end-if</span>
<span class="Statement">    @</span>Again obtained key <span class="Statement">&lt;&lt;print-out</span> k<span class="Statement">&gt;&gt;</span> with value <span class="Statement">&lt;&lt;print-out</span> v<span class="Statement">&gt;&gt;</span>
<span class="Statement">end-loop</span>

<span class="Statement">purge-fifo</span> mylist</pre>
<span id=rimstone_copied_927 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_927' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_927, code_927, rimstone_copied_927)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<div class="vsub"><a id="See also"></a>See also</div>
 <a name='FIFO'></a><span style="font-weight:bold;">FIFO</span><br/>
<a href='/delete-fifo.html'>delete-fifo</a> &nbsp;<br/>
<a href='/new-fifo.html'>new-fifo</a> &nbsp;<br/>
<a href='/purge-fifo.html'>purge-fifo</a> &nbsp;<br/>
<a href='/read-fifo.html'>read-fifo</a> &nbsp;<br/>
<a href='/rewind-fifo.html'>rewind-fifo</a> &nbsp;<br/>
<a href='/write-fifo.html'>write-fifo</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='/documentation.html'>documentation</a><br/>
<a id='read-file.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:left;background-color:white;'><a href='https://rimstone-lang.com' style='border-bottom:0px'><img src='https://rimstone-lang.com/rimstone.png' style='width:180px;height:auto'/></a></div><div class='vhub' style='margin-top:10px;'>Read file</div><hr/><span style="font-weight:bold;">Purpose</span>: Read file into a string variable.<br/>
<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_928' class=notranslate>
<span class="Statement">read-file</span> &lt;file&gt; | (<span class="Identifier"> file-id</span> &lt;file id&gt; ) \
   <span class="Type"> to</span> &lt;content&gt; \
    [<span class="Identifier"> position</span> &lt;position&gt; ] \
    [<span class="Identifier"> length</span> &lt;length&gt; ] \
    [<span class="Type"> status</span> &lt;status&gt; ] \
    [<span class="Type"> end-of-file</span> &lt;eof&gt; ]</pre>
<span id=rimstone_copied_928 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_928' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_928, code_928, rimstone_copied_928)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<div class="vsub"><a id="Without file-id"></a>Without file-id</div>
This is a simple method of reading a file. File named &lt;file&gt; is opened, data read, and file is closed. <br/>
<br/>
&lt;file&gt; can be a full path name, or a path relative to the application home directory (see <a href='/directories.html'>directories</a>).<br/>
<br/>
Data read is stored into string &lt;content&gt;. Note that file can be binary or text and &lt;content&gt; may have null-bytes. <br/>
<br/>
If "position" and "length" clauses are not specified, read-file reads the entire &lt;file&gt; into &lt;content&gt;.<br/>
<br/>
If "position" clause is used, then reading starts at byte &lt;position&gt;, otherwise it starts at the beginning of the file. Position of zero (0) represents the beginning of the file. <br/>
<br/>
If "length" clause is used, then &lt;length&gt; number of bytes is read, otherwise the rest of the file is read. If &lt;length&gt; &nbsp;is 0, &lt;content&gt; is empty string and &lt;status&gt; is 0.<br/>
<br/>
If "status" clause is used, then the number of bytes read is stored to &lt;status&gt;, unless error occurred, in which case &lt;status&gt; is negative and has the error code. The error code can be RIM_ERR_POSITION (if &lt;position&gt; is negative, outside the file, or file does not support it), RIM_ERR_READ (if &lt;length&gt; is negative or there is an error reading file) or RIM_ERR_OPEN if file cannot be opened. If the number of bytes read isn't what's requested, you can use "end-of-file" clause to get boolean &lt;eof&gt;, which is true if the end of file happened, or false if there is an error (in which case you can use "errno" clause in <a href='/get-req.html'>get-req</a> to obtain the actual reason for error).<br/>
<div class="vsub"><a id="With file-id"></a>With file-id</div>
This method uses a &lt;file id&gt; that was created with <a href='/open-file.html'>open-file</a>. You can then read (and write) file using this &lt;file id&gt; and the file stays open until <a href='/close-file.html'>close-file</a> is called, or the <a href='/request.html'>request</a> ends (i.e. RimStone will automatically close any such open files). <br/>
<br/>
Data read is stored into string &lt;content&gt;. Note that file can be binary or text and &lt;content&gt; may have null-bytes. <br/>
<br/>
If "position" clause is used, then data is read starting from byte &lt;position&gt; (with position of 0 being the first byte), otherwise reading starts from the current file position determined by the previous reads/writes or as set by using "set" clause in <a href='/file-position.html'>file-position</a>. Note that after each read or write, the file position is advanced by the number of bytes read or written.<br/>
<br/>
If "length" clause is used, then &lt;length&gt; number of bytes is read, otherwise the rest of the file is read. If &lt;length&gt; &nbsp;is 0, &lt;content&gt; is empty string and &lt;status&gt; is 0.<br/>
<br/>
Note that when you reach the end of file and no more bytes can be read, &lt;status&gt; is 0.<br/>
<br/>
If "status" clause is used, then the number of bytes read is stored to &lt;status&gt;, unless error occurred, in which case &lt;status&gt; has the error code. The error code can be RIM_ERR_POSITION (if &lt;position&gt; is negative, outside the file, or file does not support it), RIM_ERR_READ (if &lt;length&gt; is negative or there is an error reading file) or RIM_ERR_OPEN if file is not open. If the number of bytes read isn't what's requested, you can use "end-of-file" clause to get boolean &lt;eof&gt;, which is true if the end of file happened, or false if there is an error (in which case you can use "errno" clause in <a href='/get-req.html'>get-req</a> to obtain the actual reason for error).<br/>
<div class="vsub"><a id="Examples"></a>Examples</div>
To read the entire file and create both the variable that holds its content and the status variable:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_929' class=notranslate>
<span class="Statement">read-file</span> <span class="Constant">&quot;/home/user/some_file&quot;</span><span class="Type"> to</span> file_content<span class="Type"> status</span> st
<span class="Statement">if-true</span> st<span class="Identifier"> greater-than</span> <span class="Constant">0</span>
<span class="Statement">    @</span>Read:
<span class="Statement">    @</span>&lt;hr/&gt;
<span class="Statement">    print-out</span> file_content<span class="Identifier"> web-encode</span>
<span class="Statement">    @</span>&lt;hr/&gt;
<span class="Statement">else-if</span>
<span class="Statement">    @</span>Could not read (<span class="Statement">&lt;&lt;print-format</span> <span class="Constant">&quot;</span><span class="Special">%ld</span><span class="Constant">&quot;</span>, st<span class="Statement">&gt;&gt;</span>)
<span class="Statement">end-if</span></pre>
<span id=rimstone_copied_929 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_929' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_929, code_929, rimstone_copied_929)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
To read 10 bytes starting at position 20 (with position 0 being the first byte):<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_930' class=notranslate>
<span class="Statement">read-file</span> <span class="Constant">&quot;/home/user/some_file&quot;</span><span class="Type"> to</span> file_content<span class="Identifier"> position</span> <span class="Constant">20</span><span class="Identifier"> length</span> <span class="Constant">10</span></pre>
<span id=rimstone_copied_930 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_930' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_930, code_930, rimstone_copied_930)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
See <a href='/open-file.html'>open-file</a> for an example with "file-id" clause.<br/>
<div class="vsub"><a id="See also"></a>See also</div>
 <a name='Files'></a><span style="font-weight:bold;">Files</span><br/>
<a href='/change-mode.html'>change-mode</a> &nbsp;<br/>
<a href='/close-file.html'>close-file</a> &nbsp;<br/>
<a href='/copy-file.html'>copy-file</a> &nbsp;<br/>
<a href='/delete-file.html'>delete-file</a> &nbsp;<br/>
<a href='/file-position.html'>file-position</a> &nbsp;<br/>
<a href='/file-storage.html'>file-storage</a> &nbsp;<br/>
<a href='/file-uploading.html'>file-uploading</a> &nbsp;<br/>
<a href='/get-upload.html'>get-upload</a> &nbsp;<br/>
<a href='/lock-file.html'>lock-file</a> &nbsp;<br/>
<a href='/open-file.html'>open-file</a> &nbsp;<br/>
<a href='/read-file.html'>read-file</a> &nbsp;<br/>
<a href='/read-line.html'>read-line</a> &nbsp;<br/>
<a href='/rename-file.html'>rename-file</a> &nbsp;<br/>
<a href='/stat-file.html'>stat-file</a> &nbsp;<br/>
<a href='/temporary-file.html'>temporary-file</a> &nbsp;<br/>
<a href='/uniq-file.html'>uniq-file</a> &nbsp;<br/>
<a href='/unlock-file.html'>unlock-file</a> &nbsp;<br/>
<a href='/write-file.html'>write-file</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='/documentation.html'>documentation</a><br/>
<a id='read-hash.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:left;background-color:white;'><a href='https://rimstone-lang.com' style='border-bottom:0px'><img src='https://rimstone-lang.com/rimstone.png' style='width:180px;height:auto'/></a></div><div class='vhub' style='margin-top:10px;'>Read hash</div><hr/><span style="font-weight:bold;">Purpose</span>: Get data from hash.<br/>
<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_931' class=notranslate>
<span class="Comment">// Random access to hash data:</span>

<span class="Statement">read-hash</span> &lt;hash&gt; \
   <span class="Type"> key</span> &lt;key&gt; \
   <span class="Type"> value</span> &lt;value&gt; \
    [<span class="Identifier"> delete</span> [ &lt;delete&gt; ] ] \
    [<span class="Type"> status</span> &lt;status&gt; ]

<span class="Comment">// Sequential access to hash data:</span>

<span class="Statement">read-hash</span> &lt;hash&gt;<span class="Identifier"> traverse begin</span>

<span class="Statement">read-hash</span> &lt;hash&gt;<span class="Identifier"> traverse</span> \
   <span class="Type"> key</span> &lt;key&gt; \
   <span class="Type"> value</span> &lt;value&gt;  \
    [<span class="Identifier"> delete</span> [ &lt;delete&gt; ] ] \
    [<span class="Type"> status</span> &lt;status&gt; ] \</pre>
<span id=rimstone_copied_931 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_931' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_931, code_931, rimstone_copied_931)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<div class="vsub"><a id="Without "traverse" clause"></a>Without "traverse" clause</div>
read-hash will obtain an element from &lt;hash&gt;, which is a string &lt;value&gt; (in "value" clause) based on a string &lt;key&gt; (in "key" clause). &lt;hash&gt; was created by <a href='/new-hash.html'>new-hash</a>. <br/>
<br/>
You can also delete an element from the hash by using "delete" clause - the &lt;value&gt; is still obtained though it is no longer in the hash. The hash element is deleted if "delete" clause is used without boolean variable &lt;delete&gt;, or if &lt;delete&gt; evaluates to true.<br/>
<br/>
If no &lt;key&gt; was found in the hash, &lt;status&gt; number (in "status" clause) is RIM_ERR_EXIST and &lt;value&gt; is unchanged, otherwise &lt;status&gt; is RIM_OKAY. <br/>
<br/>
<span style="font-weight:bold;">- Subscription shortcut</span><br/>
You can also get the value of a &lt;hash&gt; element by using subscription operator ([]), for instance here you'd reference the element "one" of hash 'vals' in the comparison statement:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_932' class=notranslate>
<span class="Statement">new-hash</span> sub
<span class="Statement">write-hash</span> sub<span class="Identifier"> key</span> <span class="Constant">&quot;three&quot;</span><span class="Identifier"> value</span> <span class="Constant">&quot;some value&quot;</span>
<span class="Statement">.</span>..
<span class="Statement">if-true</span> sub[<span class="Constant">&quot;three&quot;</span>]<span class="Identifier"> equal</span> <span class="Constant">&quot;some value&quot;</span>
<span class="Statement">    @</span>Found element
<span class="Statement">end-if</span></pre>
<span id=rimstone_copied_932 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_932' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_932, code_932, rimstone_copied_932)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
You can use the subscriptive form of &lt;hash&gt;[&lt;index&gt;] in any expression, where &lt;index&gt; is a string value that matches the hash key. Note that if element &lt;hash&gt;[&lt;index&gt;] does not exist, the value returned is an empty string (""); use read-hash form to check status or delete an element.<br/>
<div class="vsub"><a id="With "traverse" clause"></a>With "traverse" clause</div>
read-hash with "traverse" clause obtains &lt;key&gt; and &lt;value&gt; of the current element, and then positions to the next one. You can also delete this element from the hash by using "delete" clause - the &lt;key&gt; and &lt;value&gt; are still obtained though the element is no longer in the hash. The hash element is deleted if "delete" clause is used without boolean variable &lt;delete&gt;, or if &lt;delete&gt; evaluates to true.<br/>
<br/>
Use "begin" clause to position at the very first element. This is useful if you wish to get all the key/value pairs from a hash - note they are not extracted in any particular order. When there are no more elements, &lt;key&gt; and &lt;value&gt; are unchanged and &lt;status&gt; number (in "status" clause) is RIM_ERR_EXIST, otherwise &lt;status&gt; is RIM_OKAY.<br/>
<br/>
You may search, add or delete elements while traversing a hash, and this will be reflected in all elements not yet traversed.<br/>
<div class="vsub"><a id="Examples"></a>Examples</div>
In this example, a new hash is created, a key/value pair is written to it, and then the value is obtained and the element deleted; return status is checked:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_933' class=notranslate>
<span class="Comment">// Create new hash</span>
<span class="Statement">new-hash</span> h

<span class="Comment">// Write to a hash</span>
<span class="Statement">write-hash</span> h<span class="Identifier"> key</span> <span class="Constant">&quot;X0029&quot;</span><span class="Identifier"> value</span> <span class="Constant">&quot;some data&quot;</span>

<span class="Comment">// Read from a hash </span>
<span class="Statement">read-hash</span> h<span class="Type"> key</span> <span class="Constant">&quot;X0029&quot;</span><span class="Type"> value</span> res<span class="Type"> status</span> f<span class="Identifier"> delete</span>
<span class="Statement">if-true</span> f<span class="Identifier"> equal</span> RIM_ERR_EXIST
<span class="Statement">    @</span>No data in the hash!
<span class="Statement">else-if</span>
<span class="Statement">    @</span>Deleted value is <span class="Statement">&lt;&lt;print-out</span> res<span class="Statement">&gt;&gt;</span>
<span class="Statement">end-if</span></pre>
<span id=rimstone_copied_933 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_933' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_933, code_933, rimstone_copied_933)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
The following will traverse the entire hash and display all the data:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_934' class=notranslate>
<span class="Comment">// Position at the beginning of the hash </span>
<span class="Statement">read-hash</span> h<span class="Identifier"> traverse begin</span>
<span class="Statement">start-loop</span>
    <span class="Comment">// Get elements, one by one, until NULL returned as a key</span>
<span class="Statement">    read-hash</span> h<span class="Identifier"> traverse</span><span class="Type"> key</span> k<span class="Type"> value</span> r<span class="Type"> status</span> f
<span class="Statement">    if-true</span> f<span class="Identifier"> equal</span> RIM_ERR_EXIST
        <span class="Statement">break</span>;
<span class="Statement">    end-if</span>
<span class="Statement">    print-format</span> <span class="Constant">&quot;Key [</span><span class="Special">%s</span><span class="Constant">] data [</span><span class="Special">%s</span><span class="Constant">]</span><span class="Special">\n</span><span class="Constant">&quot;</span>, k, r
<span class="Statement">end-loop</span></pre>
<span id=rimstone_copied_934 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_934' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_934, code_934, rimstone_copied_934)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<div class="vsub"><a id="See also"></a>See also</div>
 <a name='Hash'></a><span style="font-weight:bold;">Hash</span><br/>
<a href='/get-hash.html'>get-hash</a> &nbsp;<br/>
<a href='/new-hash.html'>new-hash</a> &nbsp;<br/>
<a href='/purge-hash.html'>purge-hash</a> &nbsp;<br/>
<a href='/read-hash.html'>read-hash</a> &nbsp;<br/>
<a href='/resize-hash.html'>resize-hash</a> &nbsp;<br/>
<a href='/write-hash.html'>write-hash</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='/documentation.html'>documentation</a><br/>
<a id='read-json.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:left;background-color:white;'><a href='https://rimstone-lang.com' style='border-bottom:0px'><img src='https://rimstone-lang.com/rimstone.png' style='width:180px;height:auto'/></a></div><div class='vhub' style='margin-top:10px;'>Read json</div><hr/><span style="font-weight:bold;">Purpose</span>: Read data elements of JSON document.<br/>
<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_935' class=notranslate>
<span class="Statement">read-json</span> &lt;json&gt; \
    [<span class="Type"> key</span> &lt;key&gt; ] \
    [<span class="Type"> value</span> &lt;value&gt; ] \
    [<span class="Type"> type</span> &lt;type&gt; ] \
    [<span class="Identifier"> next</span> ]</pre>
<span id=rimstone_copied_935 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_935' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_935, code_935, rimstone_copied_935)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
read-json reads data elements from &lt;json&gt; variable, which is created with <a href='/json-doc.html'>json-doc</a>. A data element is a string &lt;key&gt;/&lt;value&gt; pair of a leaf node, where key (in "key" clause) is a normalized key name, which is the value's name preceded with the names of all objects and array members leading up to it, separated by a dot ("."). <br/>
<br/>
The actual &lt;value&gt; is obtained with "value" clause, and the &lt;type&gt; of value can be obtained with "type" clause. <br/>
<br/>
&lt;type&gt; is a number that can be RIM_JSON_TYPE_STRING, RIM_JSON_TYPE_NUMBER, RIM_JSON_TYPE_REAL, RIM_JSON_TYPE_BOOL and RIM_JSON_TYPE_NULL for string, number, real (floating point), boolean and null values respectively. Note that &lt;value&gt; is always a string representation of these types.<br/>
<br/>
Use "next" clause to move to the next sequential key/value pair in the document, from top down. Typically, you would get a key first, examine if it's of interest to you, and then obtain value. This is because RimStone uses "lazy" approach where value is not copied until needed; with this approach JSON parsing is faster. You can use also use "key", "value" and "next" at the same time if you're going through all elements.<br/>
<br/>
If there are no more data elements to read, &lt;type&gt; is RIM_JSON_TYPE_NONE.<br/>
<br/>
&lt;key&gt; in "key" clause is a normalized name of any given leaf node in JSON text. This means every non-leaf node is included (such as arrays and objects), separated by a dot ("."), and arrays are indexed with "[]". An example would be:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_936' class=notranslate>
<span class="Constant">&quot;menu&quot;</span>.<span class="Constant">&quot;popup&quot;</span>.<span class="Constant">&quot;menuitem&quot;</span>[<span class="Constant">1</span>].<span class="Constant">&quot;onclick&quot;</span></pre>
<span id=rimstone_copied_936 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_936' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_936, code_936, rimstone_copied_936)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<div class="vsub"><a id="Examples"></a>Examples</div>
See <a href='/json-doc.html'>json-doc</a>.<br/>
<div class="vsub"><a id="See also"></a>See also</div>
 <a name='JSON parsing'></a><span style="font-weight:bold;">JSON parsing</span><br/>
<a href='/json-doc.html'>json-doc</a> &nbsp;<br/>
<a href='/read-json.html'>read-json</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='/documentation.html'>documentation</a><br/>
<a id='read-lifo.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:left;background-color:white;'><a href='https://rimstone-lang.com' style='border-bottom:0px'><img src='https://rimstone-lang.com/rimstone.png' style='width:180px;height:auto'/></a></div><div class='vhub' style='margin-top:10px;'>Read lifo</div><hr/><span style="font-weight:bold;">Purpose</span>: Reads key/value pair from a LIFO list.<br/>
<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_937' class=notranslate>
<span class="Statement">read-lifo</span> &lt;list&gt; \
   <span class="Type"> key</span> &lt;key&gt; \
   <span class="Type"> value</span> &lt;value&gt; \
    [<span class="Type"> status</span> &lt;status&gt; ]</pre>
<span id=rimstone_copied_937 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_937' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_937, code_937, rimstone_copied_937)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
read-lifo retrieves an element from the LIFO &lt;list&gt; into &lt;key&gt; string &nbsp;(in "key" clause) and &lt;value&gt; string (in "value" clause).<br/>
<br/>
Once an element has been retrieved, the next use of read-lifo will obtain the following one, in the reverse order they were put in. read-lifo starts with the last element put in, and moves backwards from there, unless <a href='/rewind-lifo.html'>rewind-lifo</a> is called, which positions back to the last one. Note that <a href='/write-lifo.html'>write-lifo</a> will cause the next read-lifo to start with the element just written, i.e. it implicitly calls <a href='/rewind-lifo.html'>rewind-lifo</a>.<br/>
<br/>
If the element is successfully retrieved, &lt;status&gt; number (in "status" clause) is RIM_OKAY, otherwise it is RIM_ERR_EXIST, which means there are no more elements to retrieve. <br/>
<div class="vsub"><a id="Examples"></a>Examples</div>
In this example, a LIFO list is created, and two key/value pairs added. They are then retrieved in a loop and printed out (twice with rewind), and then the list is purged:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_938' class=notranslate>
<span class="Statement">%%</span> /lifo<span class="Identifier"> public</span>
<span class="Statement">    new-lifo</span> mylist

    <span class="Comment">// Add data to the list</span>
<span class="Statement">    write-lifo</span> mylist<span class="Identifier"> key</span> <span class="Constant">&quot;key1&quot;</span><span class="Identifier"> value</span> <span class="Constant">&quot;value1&quot;</span>
<span class="Statement">    write-lifo</span> mylist<span class="Identifier"> key</span> <span class="Constant">&quot;some2&quot;</span><span class="Identifier"> value</span> <span class="Constant">&quot;other2&quot;</span>

<span class="Statement">    start-loop</span>
       <span class="Comment">// Get data from the list</span>
<span class="Statement">       read-lifo</span> mylist<span class="Type"> key</span> k<span class="Type"> value</span> v<span class="Type"> status</span> st

       <span class="Comment">// Check if no more data</span>
<span class="Statement">       if-true</span> st<span class="Identifier"> not-equal</span> RIM_OKAY
<span class="Statement">           break-loop</span>
<span class="Statement">       end-if</span>

<span class="Statement">       @</span>Obtained key <span class="Statement">&lt;&lt;print-out</span> k<span class="Statement">&gt;&gt;</span> with value <span class="Statement">&lt;&lt;print-out</span> v<span class="Statement">&gt;&gt;</span>
<span class="Statement">    end-loop</span>

    <span class="Comment">// Go through the list again, use rewind-lifo for that</span>
<span class="Statement">    rewind-lifo</span> mylist

<span class="Statement">    start-loop</span>
<span class="Statement">       read-lifo</span> mylist<span class="Type"> key</span> k<span class="Type"> value</span> v<span class="Type"> status</span> st
<span class="Statement">       if-true</span> st<span class="Identifier"> not-equal</span> RIM_OKAY
<span class="Statement">           break-loop</span>
<span class="Statement">       end-if</span>
<span class="Statement">       @</span>Again obtained key <span class="Statement">&lt;&lt;print-out</span> k<span class="Statement">&gt;&gt;</span> with value <span class="Statement">&lt;&lt;print-out</span> v<span class="Statement">&gt;&gt;</span>
<span class="Statement">    end-loop</span>

    <span class="Comment">// Delete all in LIFO</span>
<span class="Statement">    purge-lifo</span> mylist
    <span class="Comment">// Verify nothing is left</span>
<span class="Statement">    rewind-lifo</span> mylist
<span class="Statement">    read-lifo</span> mylist<span class="Type"> key</span> k<span class="Type"> value</span> v<span class="Type"> status</span> st
<span class="Statement">    unused-var</span> k, v
<span class="Statement">    if-true</span> st<span class="Identifier"> not-equal</span> RIM_OKAY
<span class="Statement">       @</span>LIFO is empty
<span class="Statement">    end-if</span>
<span class="Statement">%%</span></pre>
<span id=rimstone_copied_938 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_938' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_938, code_938, rimstone_copied_938)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<div class="vsub"><a id="See also"></a>See also</div>
 <a name='LIFO'></a><span style="font-weight:bold;">LIFO</span><br/>
<a href='/delete-lifo.html'>delete-lifo</a> &nbsp;<br/>
<a href='/get-lifo.html'>get-lifo</a> &nbsp;<br/>
<a href='/new-lifo.html'>new-lifo</a> &nbsp;<br/>
<a href='/purge-lifo.html'>purge-lifo</a> &nbsp;<br/>
<a href='/read-lifo.html'>read-lifo</a> &nbsp;<br/>
<a href='/rewind-lifo.html'>rewind-lifo</a> &nbsp;<br/>
<a href='/write-lifo.html'>write-lifo</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='/documentation.html'>documentation</a><br/>
<a id='read-line.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:left;background-color:white;'><a href='https://rimstone-lang.com' style='border-bottom:0px'><img src='https://rimstone-lang.com/rimstone.png' style='width:180px;height:auto'/></a></div><div class='vhub' style='margin-top:10px;'>Read line</div><hr/><span style="font-weight:bold;">Purpose</span>: Read text file line by line in a loop.<br/>
<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_939' class=notranslate>
<span class="Statement">read-line</span> &lt;file&gt;<span class="Type"> to</span> &lt;line content&gt; [<span class="Type"> status</span> &lt;status&gt; ] [<span class="Identifier"> delimiter</span> &lt;delimiter&gt; ]

&lt;any code&gt;

<span class="Statement">end-read-line</span></pre>
<span id=rimstone_copied_939 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_939' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_939, code_939, rimstone_copied_939)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
read-line starts the loop in which a text &lt;file&gt; is read line by line into string &lt;line content&gt;, with end-read-line ending this loop. Once the end of &lt;file&gt; has been reached, or an error occurs, the loop exits. <br/>
<br/>
&lt;file&gt; can be a full path name, or a path relative to the application home directory (see <a href='/directories.html'>directories</a>). <br/>
<br/>
&lt;status&gt; number will be RIM_ERR_READ if there is an error in reading file, or RIM_ERR_OPEN if file cannot be opened, or RIM_OKAY if end-of-file has been reached. Check for error after end-read-line statement. If a line was read successfully, then &lt;status&gt; is its length. <br/>
<br/>
&lt;line content&gt; is allocated when a line is read and freed just before the next line is read or if there are no more lines to read. If you want to use &lt;line content&gt; outside of this scope, save it or stash it somewhere first.<br/>
<br/>
String &lt;delimiter&gt; separates the lines in the file, and is by default new line, however it can be any character (note that it is a first character of string &lt;delimiter&gt;).<br/>
<br/>
A new line (or a &lt;delimiter&gt;) remains in &lt;line content&gt; if it was present in the file (note that the very last line may not have it). <br/>
<br/>
<br/>
Use <a href='/break-loop.html'>break-loop</a> and <a href='/continue-loop.html'>continue-loop</a> statements to exit and continue the loop.<br/>
<div class="vsub"><a id="Examples"></a>Examples</div>
To read a text file line by line, and display as a web page with line breaks:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_940' class=notranslate>
<span class="Statement">read-line</span> <span class="Constant">&quot;/home/bear/tmp/ll/filexx&quot;</span><span class="Type"> to</span> one_line<span class="Type"> status</span> st
<span class="Statement">    string-length</span> one_line<span class="Type"> to</span> line_len
<span class="Statement">    @</span>Line length is <span class="Statement">&lt;&lt;print-out</span> line_len<span class="Statement">&gt;&gt;</span>, line is <span class="Statement">&lt;&lt;print-out</span> one_line<span class="Statement"> web-encode&gt;&gt;</span> status <span class="Statement">&lt;&lt;print-out</span> st<span class="Statement">&gt;&gt;</span>&lt;br/&gt;
<span class="Statement">end-read-line</span>
<span class="Statement">if-true</span> st<span class="Identifier"> lesser-than</span> <span class="Constant">0</span>
<span class="Statement">    get-req</span><span class="Identifier"> error</span><span class="Type"> to</span> err
<span class="Statement">    @</span>Error in reading, error [<span class="Statement">&lt;&lt;print-out</span> err<span class="Statement">&gt;&gt;</span>]
<span class="Statement">end-if</span></pre>
<span id=rimstone_copied_940 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_940' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_940, code_940, rimstone_copied_940)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
To read a text file delimited by "|" character:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_941' class=notranslate>
<span class="Statement">read-line</span> <span class="Constant">&quot;/home/user/dir/file&quot;</span><span class="Type"> to</span> one_line<span class="Type"> status</span> len<span class="Identifier"> delimiter</span> '|'
<span class="Statement">.</span>..</pre>
<span id=rimstone_copied_941 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_941' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_941, code_941, rimstone_copied_941)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<div class="vsub"><a id="See also"></a>See also</div>
 <a name='Files'></a><span style="font-weight:bold;">Files</span><br/>
<a href='/change-mode.html'>change-mode</a> &nbsp;<br/>
<a href='/close-file.html'>close-file</a> &nbsp;<br/>
<a href='/copy-file.html'>copy-file</a> &nbsp;<br/>
<a href='/delete-file.html'>delete-file</a> &nbsp;<br/>
<a href='/file-position.html'>file-position</a> &nbsp;<br/>
<a href='/file-storage.html'>file-storage</a> &nbsp;<br/>
<a href='/file-uploading.html'>file-uploading</a> &nbsp;<br/>
<a href='/get-upload.html'>get-upload</a> &nbsp;<br/>
<a href='/lock-file.html'>lock-file</a> &nbsp;<br/>
<a href='/open-file.html'>open-file</a> &nbsp;<br/>
<a href='/read-file.html'>read-file</a> &nbsp;<br/>
<a href='/read-line.html'>read-line</a> &nbsp;<br/>
<a href='/rename-file.html'>rename-file</a> &nbsp;<br/>
<a href='/stat-file.html'>stat-file</a> &nbsp;<br/>
<a href='/temporary-file.html'>temporary-file</a> &nbsp;<br/>
<a href='/uniq-file.html'>uniq-file</a> &nbsp;<br/>
<a href='/unlock-file.html'>unlock-file</a> &nbsp;<br/>
<a href='/write-file.html'>write-file</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='/documentation.html'>documentation</a><br/>
<a id='read-list.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:left;background-color:white;'><a href='https://rimstone-lang.com' style='border-bottom:0px'><img src='https://rimstone-lang.com/rimstone.png' style='width:180px;height:auto'/></a></div><div class='vhub' style='margin-top:10px;'>Read list</div><hr/><span style="font-weight:bold;">Purpose</span>: Read/update key/value pair from a linked list.<br/>
<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_942' class=notranslate>
<span class="Statement">read-list</span> &lt;list&gt; \
   <span class="Type"> key</span> &lt;key&gt; \
   <span class="Type"> value</span> &lt;value&gt; \
    [<span class="Identifier"> update-value</span> &lt;update value&gt; ] [<span class="Identifier"> update-key</span> &lt;update key&gt; ] \
    [<span class="Type"> status</span> &lt;status&gt; ]</pre>
<span id=rimstone_copied_942 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_942' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_942, code_942, rimstone_copied_942)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
read-list retrieves an element from the linked &lt;list&gt;, storing it into &lt;key&gt; string (in "key" clause) and &lt;value&gt; string (in "value" clause). After each read-list, the list's current element remains at the element read; use <a href='/position-list.html'>position-list</a> to move it (for instance to the next one). <br/>
<br/>
If an element could not be retrieved, &lt;status&gt; number (in "status" clause) will be RIM_ERR_EXIST and &lt;key&gt; and &lt;value&gt; will be unchanged (this can happen if current list element is beyond the last element, such as for instance if "end" clause is used in position-list statement), otherwise &lt;status&gt; is RIM_OKAY. <br/>
<br/>
Initially when the list is created with <a href='/new-list.html'>new-list</a>, <a href='/read-list.html'>read-list</a> starts with the first element in the list. Use <a href='/position-list.html'>position-list</a> to change the default list's current element.<br/>
<br/>
You can update the element's value with "update-value" clause by specifying &lt;update value&gt; string. This update is performed after a &lt;value&gt; has been retrieved, allowing you to obtain the previous value in the same statement. <br/>
<br/>
You can update the element's key with "update-key" clause by specifying &lt;update key&gt; string. This update is performed after a &lt;key&gt; has been retrieved, allowing you to obtain the previous key in the same statement. <br/>
<div class="vsub"><a id="Examples"></a>Examples</div>
In this example, a linked list is created, and three key/value pairs added. They are then retrieved from the last towards the first element, and then again in the opposite direction:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_943' class=notranslate>
<span class="Statement">new-list</span> mylist

<span class="Comment">// Add data to the list</span>
<span class="Statement">write-list</span> mylist<span class="Identifier"> key</span> <span class="Constant">&quot;key1&quot;</span><span class="Identifier"> value</span> <span class="Constant">&quot;value1&quot;</span>
<span class="Statement">write-list</span> mylist<span class="Identifier"> key</span> <span class="Constant">&quot;key2&quot;</span><span class="Identifier"> value</span> <span class="Constant">&quot;value2&quot;</span>
<span class="Statement">write-list</span> mylist<span class="Identifier"> key</span> <span class="Constant">&quot;key3&quot;</span><span class="Identifier"> value</span> <span class="Constant">&quot;value3&quot;</span>

<span class="Statement">position-list</span> mylist<span class="Identifier"> last</span>
<span class="Statement">start-loop</span>
   <span class="Comment">// Get data from the list starting with the last one, producing value1, value2, value3</span>
<span class="Statement">   read-list</span> mylist<span class="Type"> key</span> k<span class="Type"> value</span> v
<span class="Statement">   @</span>Obtained key <span class="Statement">&lt;&lt;print-out</span> k<span class="Statement">&gt;&gt;</span> with value <span class="Statement">&lt;&lt;print-out</span> v<span class="Statement">&gt;&gt;</span>
<span class="Statement">   position-list</span> mylist<span class="Identifier"> previous</span><span class="Type"> status</span> s
   <span class="Comment">// Check if no more data</span>
<span class="Statement">   if-true</span> s<span class="Identifier"> equal</span> RIM_ERR_EXIST
<span class="Statement">       break-loop</span>
<span class="Statement">   end-if</span>
<span class="Statement">end-loop</span>

<span class="Comment">// Now the list is positioned at the first element, reading produces value3, value2, value1</span>
<span class="Statement">start-loop</span>
<span class="Statement">   read-list</span> mylist<span class="Type"> key</span> k<span class="Type"> value</span> v<span class="Type"> status</span> s
<span class="Statement">   if-true</span> s<span class="Identifier"> equal</span> RIM_ERR_EXIST
<span class="Statement">       break-loop</span>
<span class="Statement">   end-if</span>
<span class="Statement">   @</span>Again obtained key <span class="Statement">&lt;&lt;print-out</span> k<span class="Statement">&gt;&gt;</span> with value <span class="Statement">&lt;&lt;print-out</span> v<span class="Statement">&gt;&gt;</span>
<span class="Statement">   position-list</span> mylist<span class="Identifier"> next</span>
<span class="Statement">end-loop</span>

<span class="Statement">purge-list</span> mylist</pre>
<span id=rimstone_copied_943 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_943' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_943, code_943, rimstone_copied_943)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<div class="vsub"><a id="See also"></a>See also</div>
 <a name='Linked list'></a><span style="font-weight:bold;">Linked list</span><br/>
<a href='/delete-list.html'>delete-list</a> &nbsp;<br/>
<a href='/get-list.html'>get-list</a> &nbsp;<br/>
<a href='/new-list.html'>new-list</a> &nbsp;<br/>
<a href='/position-list.html'>position-list</a> &nbsp;<br/>
<a href='/purge-list.html'>purge-list</a> &nbsp;<br/>
<a href='/read-list.html'>read-list</a> &nbsp;<br/>
<a href='/write-list.html'>write-list</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='/documentation.html'>documentation</a><br/>
<a id='read-message.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:left;background-color:white;'><a href='https://rimstone-lang.com' style='border-bottom:0px'><img src='https://rimstone-lang.com/rimstone.png' style='width:180px;height:auto'/></a></div><div class='vhub' style='margin-top:10px;'>Read message</div><hr/><span style="font-weight:bold;">Purpose</span>: Read key/value from message.<br/>
<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_944' class=notranslate>
<span class="Statement">read-message</span> &lt;message&gt; \
   <span class="Type"> key</span> &lt;key&gt; \
   <span class="Type"> value</span> &lt;value&gt; \
    [<span class="Type"> status</span> &lt;status&gt;</pre>
<span id=rimstone_copied_944 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_944' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_944, code_944, rimstone_copied_944)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
read-message reads strings &lt;key&gt; (in "key" clause) and &lt;value&gt; (in "value" clause) from &lt;message&gt;, which must have been created with <a href='/new-message.html'>new-message</a>. <br/>
<br/>
The reading of key/value pairs starts from the beginning of message and proceeds sequentially forward. Once a key/value pair is read it cannot be read again.<br/>
<br/>
&lt;status&gt; number (in "status" clause) will be RIM_OKAY for a successful read, RIM_ERR_FORMAT if message is not in <a href='/SEMI.html'>SEMI</a> format or RIM_ERR_LENGTH if message isn't of proper length.<br/>
<br/>
Once a message is read from, it cannot be written to (see <a href='/write-message.html'>write-message</a>).<br/>
<div class="vsub"><a id="Examples"></a>Examples</div>
See <a href='/new-message.html'>new-message</a>.<br/>
<div class="vsub"><a id="See also"></a>See also</div>
 <a name='Messages'></a><span style="font-weight:bold;">Messages</span><br/>
<a href='/get-message.html'>get-message</a> &nbsp;<br/>
<a href='/new-message.html'>new-message</a> &nbsp;<br/>
<a href='/read-message.html'>read-message</a> &nbsp;<br/>
<a href='/SEMI.html'>SEMI</a> &nbsp;<br/>
<a href='/write-message.html'>write-message</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='/documentation.html'>documentation</a><br/>
<a id='read-remote.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:left;background-color:white;'><a href='https://rimstone-lang.com' style='border-bottom:0px'><img src='https://rimstone-lang.com/rimstone.png' style='width:180px;height:auto'/></a></div><div class='vhub' style='margin-top:10px;'>Read remote</div><hr/><span style="font-weight:bold;">Purpose</span>: Get results of a service call.<br/>
<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_945' class=notranslate>
<span class="Statement">read-remote</span> &lt;service&gt; \
    [<span class="Identifier"> data</span> &lt;data&gt; ] \
    [<span class="Identifier"> error</span> &lt;error&gt; ] \
    [<span class="Identifier"> status</span> &lt;status&gt; ] \
    [<span class="Identifier"> status-text</span> &lt;status text&gt; ] \
    [<span class="Identifier"> exit-status</span> &lt;service status&gt; ]</pre>
<span id=rimstone_copied_945 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_945' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_945, code_945, rimstone_copied_945)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Use read-remote to get the results of <a href='/call-remote.html'>call-remote</a> created in <a href='/new-remote.html'>new-remote</a>; the same &lt;service&gt; must be used in all.<br/>
<br/>
<span style="font-weight:bold;">- Getting the reply from server</span><br/>
The service reply is split in two. One part is the actual result of processing (called "stdout" or standard output), and that is "data". The other is the error messages (called "stderr" or standard error), and that's "error". The standard output goes to "data", except from <a href='/report-error.html'>report-error</a> and <a href='/print-format.html'>print-format</a> (with "to-error" clause) which goes to "error". Note that "data" and "error" streams can be co-mingled when output by the service, but they will be obtained separately. This allows for clean separation of output from any error messages.<br/>
<br/>
&lt;data&gt; is the "data" reply of a service call (in "data" clause). &lt;error&gt; is the "error" reply (in "error" clause). <br/>
<br/>
<span style="font-weight:bold;">- Getting status of a service call</span><br/>
The status of a service call (as a number) can be obtained in &lt;status&gt; (in "status" clause). This is the protocol status, and it may be:<br/>
<ul><li>RIM_OKAY if request succeeded,<br/>
</li><li>RIM_CLI_ERR_RESOLVE_ADDR if host name for TCP connection cannot be resolved,<br/>
</li><li>RIM_CLI_ERR_PATH_TOO_LONG if path name of Unix socket is too long,<br/>
</li><li>RIM_CLI_ERR_SOCKET if cannot create a socket (for instance they are exhausted for the process or system),<br/>
</li><li>RIM_CLI_ERR_CONNECT if cannot connect to server (TCP or Unix alike),<br/>
</li><li>RIM_CLI_ERR_SOCK_WRITE if cannot write data to server (for instance if server has encountered an error or is down, or if network connection is no longer available),<br/>
</li><li>RIM_CLI_ERR_SOCK_READ if cannot read data from server (for instance if server has encountered an error or is down, or if network connection is no longer available),<br/>
</li><li>RIM_CLI_ERR_PROT_ERR if there is a protocol error, which indicates a protocol issue on either or both sides,<br/>
</li><li>RIM_CLI_ERR_BAD_VER if either side does not support protocol used by the other,<br/>
</li><li>RIM_CLI_ERR_SRV if server cannot complete the request,<br/>
</li><li>RIM_CLI_ERR_UNK if server does not recognize record types used by the client,<br/>
</li><li>RIM_CLI_ERR_OUT_MEM if client is out of memory,<br/>
</li><li>RIM_CLI_ERR_ENV_TOO_LONG if the combined length of all environment variables is too long,<br/>
</li><li>RIM_CLI_ERR_ENV_ODD if the number of supplied environment name/value pairs is incorrect,<br/>
</li><li>RIM_CLI_ERR_BAD_TIMEOUT if the value for timeout is incorrect,<br/>
</li><li>RIM_CLI_ERR_TIMEOUT if the request timed out based on "timeout" parameter or otherwise if the underlying Operating System libraries declared their own timeout.</li></ul>
You can also obtain the status text in &lt;status text&gt; (in "status-text" clause); this is a human readable status message which is am empty string (i.e. "") if there is no error (meaning if &lt;status&gt; is RIM_OKAY).<br/>
<br/>
<span style="font-weight:bold;">- Getting service status</span><br/>
&lt;service status&gt; (in "exit-status" clause) is the return status (as a number) of the code executing a remote service handler; it is conceptually similar to a return value from a function (as a number). The particular service handler you are calling may or may not return the status; if it does, its return status can be sent back via <a href='/exit-status.html'>exit-status</a> and/or <a href='/exit-handler.html'>exit-handler</a> statement.<br/>
<br/>
You must specify at least one value to obtain in read-remote, or any number of them.<br/>
<div class="vsub"><a id="Examples"></a>Examples</div>
See examples in <a href='/new-remote.html'>new-remote</a> and <a href='/call-remote.html'>call-remote</a>.<br/>
<div class="vsub"><a id="See also"></a>See also</div>
 <a name='Distributed computing'></a><span style="font-weight:bold;">Distributed computing</span><br/>
<a href='/call-remote.html'>call-remote</a> &nbsp;<br/>
<a href='/new-remote.html'>new-remote</a> &nbsp;<br/>
<a href='/read-remote.html'>read-remote</a> &nbsp;<br/>
<a href='/run-remote.html'>run-remote</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='/documentation.html'>documentation</a><br/>
<a id='read-split.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:left;background-color:white;'><a href='https://rimstone-lang.com' style='border-bottom:0px'><img src='https://rimstone-lang.com/rimstone.png' style='width:180px;height:auto'/></a></div><div class='vhub' style='margin-top:10px;'>Read split</div><hr/><span style="font-weight:bold;">Purpose</span>: Obtain split string pieces.<br/>
<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_946' class=notranslate>
<span class="Statement">read-split</span> &lt;piece number&gt;<span class="Identifier"> from</span> &lt;split string&gt;<span class="Type"> to</span> &lt;piece&gt; [<span class="Type"> status</span> &lt;status&gt; ]</pre>
<span id=rimstone_copied_946 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_946' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_946, code_946, rimstone_copied_946)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
read-split will read split string pieces from &lt;split string&gt; which is produced by <a href='/split-string.html'>split-string</a>. &lt;piece number&gt; is the number (starting with 1) of the piece to retrieve in string &lt;piece&gt;. &lt;status&gt; number (in "status" clause) is RIM_OKAY if successful, or RIM_ERR_OVERFLOW if &lt;piece number&gt; is not valid (meaning it's outside of the range of pieces parsed by split-string).<br/>
<div class="vsub"><a id="Examples"></a>Examples</div>
See <a href='/split-string.html'>split-string</a>.<br/>
<div class="vsub"><a id="See also"></a>See also</div>
 <a name='Strings'></a><span style="font-weight:bold;">Strings</span><br/>
<a href='/copy-string.html'>copy-string</a> &nbsp;<br/>
<a href='/count-substring.html'>count-substring</a> &nbsp;<br/>
<a href='/delete-string.html'>delete-string</a> &nbsp;<br/>
<a href='/double-string.html'>double-string</a> &nbsp;<br/>
<a href='/lower-string.html'>lower-string</a> &nbsp;<br/>
<a href='/match-regex.html'>match-regex</a> &nbsp;<br/>
<a href='/new-string.html'>new-string</a> &nbsp;<br/>
<a href='/number-string.html'>number-string</a> &nbsp;<br/>
<a href='/read-split.html'>read-split</a> &nbsp;<br/>
<a href='/replace-string.html'>replace-string</a> &nbsp;<br/>
<a href='/scan-string.html'>scan-string</a> &nbsp;<br/>
<a href='/set-string.html'>set-string</a> &nbsp;<br/>
<a href='/split-string.html'>split-string</a> &nbsp;<br/>
<a href='/string-double.html'>string-double</a> &nbsp;<br/>
<a href='/string-expressions.html'>string-expressions</a> &nbsp;<br/>
<a href='/string-length.html'>string-length</a> &nbsp;<br/>
<a href='/string-number.html'>string-number</a> &nbsp;<br/>
<a href='/trim-string.html'>trim-string</a> &nbsp;<br/>
<a href='/upper-string.html'>upper-string</a> &nbsp;<br/>
<a href='/write-string.html'>write-string</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='/documentation.html'>documentation</a><br/>
<a id='read-tree.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:left;background-color:white;'><a href='https://rimstone-lang.com' style='border-bottom:0px'><img src='https://rimstone-lang.com/rimstone.png' style='width:180px;height:auto'/></a></div><div class='vhub' style='margin-top:10px;'>Read tree</div><hr/><span style="font-weight:bold;">Purpose</span>: Search/update a tree.<br/>
<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_947' class=notranslate>
<span class="Statement">read-tree</span> &lt;tree&gt; \
    (<span class="Identifier"> equal</span> &lt;search key&gt; |<span class="Identifier"> lesser</span> &lt;search key&gt; |<span class="Identifier"> greater</span> &lt;search key&gt; | \
       <span class="Identifier"> lesser-equal</span> &lt;search key&gt; |<span class="Identifier"> greater-equal</span> &lt;search key&gt; | \
       <span class="Identifier"> min-key</span> |<span class="Identifier"> max-key</span> ) \
    [<span class="Type"> value</span> &lt;value&gt; ] \
    [<span class="Identifier"> update-value</span> &lt;update value&gt; ] \
    [<span class="Type"> key</span> &lt;key&gt; ] \
    [<span class="Type"> status</span> &lt;status&gt; ] \
    [<span class="Type"> new-cursor</span> &lt;cursor&gt; ]</pre>
<span id=rimstone_copied_947 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_947' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_947, code_947, rimstone_copied_947)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
read-tree will search &lt;tree&gt; (created with <a href='/new-tree.html'>new-tree</a>) for a node with the string key that is:<br/>
<ul><li>equal to &lt;search key&gt; ("equal" clause)<br/>
</li><li>lesser than &lt;search key&gt; ("lesser" clause)<br/>
</li><li>greater than &lt;search key&gt; ("greater" clause)<br/>
</li><li>lesser or equal than &lt;search key&gt; ("lesser-equal" clause)<br/>
</li><li>greater or equal than &lt;search key&gt; ("greater-equal" clause)<br/>
</li><li>a minimum key in the tree ("min-key" clause)<br/>
</li><li>a maximum key in the tree ("max-key" clause)</li></ul>
The &lt;status&gt; in "status" clause will be RIM_OKAY if a key conforming to one of these criteria is found, and RIM_ERR_EXIST if not. <br/>
<br/>
If a key is found, the value associated with the key can be obtained with "value" clause in &lt;value&gt;; an existing key used to originally insert this value into the tree can be obtained with "key" clause in string &lt;key&gt;. If a key is not found, both &lt;value&gt; and &lt;key&gt; are unchanged. <br/>
<br/>
You can update the value associated with a found key with "update-value" clause by specifying &lt;update value&gt; string. This update is performed after &lt;value&gt; has been retrieved, allowing you to obtain the previous value in the same statement. <br/>
<br/>
If you'd like to iterate the ordered list of keys in a tree, create a &lt;cursor&gt; by using "new-cursor" clause, in which case &lt;cursor&gt; will be positioned on a found tree node. See <a href='/use-cursor.html'>use-cursor</a> for more on using cursors. Cursors are useful in range searches; typically you'd find a key that is an upper or lower bound of a range and then keep iterating to a lesser or greater value until some criteria is met, such as when the opposite bound is found. RimStone treees are by default constructed so that such iterations are O(1) in complexity, meaning each is a single tree node access (see <a href='/new-tree.html'>new-tree</a>). <br/>
<div class="vsub"><a id="Examples"></a>Examples</div>
In this example, a million key/value pairs are inserted into a tree, and then each of them is searched for and then displayed back (see <a href='/write-tree.html'>write-tree</a> for more on inserting into a tree). Both the key and the data are a numerical value of a key:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_948' class=notranslate>
<span class="Statement">%%</span> /tree-example<span class="Identifier"> public</span>

<span class="Statement">    new-tree</span> mytree<span class="Identifier"> key-as</span> <span class="Constant">&quot;positive integer&quot;</span> <span class="Comment">// create new tree</span>

<span class="Statement">    set-number</span> i
<span class="Statement">    start-loop</span><span class="Type"> use</span> i<span class="Identifier"> start-with</span> <span class="Constant">0</span><span class="Identifier"> repeat</span> <span class="Constant">1000000</span>
<span class="Statement">        number-string</span> i<span class="Type"> to</span> key
<span class="Statement">        set-string</span> data=key
<span class="Statement">        write-tree</span> mytree<span class="Identifier"> key</span> (key)<span class="Identifier"> value</span> data <span class="Comment">// insert key/data to the tree</span>
<span class="Statement">    end-loop</span>

<span class="Statement">    start-loop</span><span class="Type"> use</span> i<span class="Identifier"> start-with</span> <span class="Constant">0</span><span class="Identifier"> repeat</span> <span class="Constant">1000000</span>
<span class="Statement">        number-string</span> i<span class="Type"> to</span> key
        <span class="Comment">// search tree for each key previously inserted</span>
<span class="Statement">        read-tree</span> mytree<span class="Identifier"> equal</span> (key)<span class="Type"> status</span> st<span class="Type"> value</span> data
<span class="Statement">        if-true</span> st<span class="Identifier"> not-equal</span> RIM_OKAY
<span class="Statement">            @</span>Could not find key <span class="Statement">&lt;&lt;print-out</span> key<span class="Statement">&gt;&gt;</span>
<span class="Statement">        else-if</span>
<span class="Statement">            @</span>Found data <span class="Statement">&lt;&lt;print-out</span> data<span class="Statement">&gt;&gt;</span> associated with key <span class="Statement">&lt;&lt;print-out</span> key<span class="Statement">&gt;&gt;</span>
<span class="Statement">        end-if</span>
<span class="Statement">        delete-string</span> key
<span class="Statement">    end-loop</span>
<span class="Statement">%%</span></pre>
<span id=rimstone_copied_948 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_948' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_948, code_948, rimstone_copied_948)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<div class="vsub"><a id="See also"></a>See also</div>
 <a name='Tree'></a><span style="font-weight:bold;">Tree</span><br/>
<a href='/delete-tree.html'>delete-tree</a> &nbsp;<br/>
<a href='/get-tree.html'>get-tree</a> &nbsp;<br/>
<a href='/new-tree.html'>new-tree</a> &nbsp;<br/>
<a href='/purge-tree.html'>purge-tree</a> &nbsp;<br/>
<a href='/read-tree.html'>read-tree</a> &nbsp;<br/>
<a href='/use-cursor.html'>use-cursor</a> &nbsp;<br/>
<a href='/write-tree.html'>write-tree</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='/documentation.html'>documentation</a><br/>
<a id='read-xml.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:left;background-color:white;'><a href='https://rimstone-lang.com' style='border-bottom:0px'><img src='https://rimstone-lang.com/rimstone.png' style='width:180px;height:auto'/></a></div><div class='vhub' style='margin-top:10px;'>Read xml</div><hr/><span style="font-weight:bold;">Purpose</span>: Read data elements from XML document.<br/>
<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_949' class=notranslate>
<span class="Statement">read-xml</span> &lt;xml&gt; \
    [<span class="Type"> key</span> &lt;key&gt; ] \
    [<span class="Type"> value</span> &lt;value&gt; ] \
    [<span class="Type"> status</span> &lt;status&gt; ] \
    [<span class="Identifier"> next</span> ]</pre>
<span id=rimstone_copied_949 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_949' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_949, code_949, rimstone_copied_949)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
read-xml reads data elements from &lt;xml&gt; variable, which is created with <a href='/xml-doc.html'>xml-doc</a>. A data element is a string &lt;key&gt;/&lt;value&gt; pair, where key (in "key" clause) is a normalized key name, which is the current name preceded with the names of all elements leading up to it, separated by a forward slash ("/"). Node that attribute elements end with "@".<br/>
<br/>
The actual &lt;value&gt; is obtained with "value" clause, and the &lt;status&gt; can be obtained with "status" clause. &lt;status&gt; is RIM_OKAY if key/value is obtained, and RIM_ERR_EXIST if there are no more to get. <br/>
<br/>
Use "next" clause to move to the next sequential key/value pair in the document, from top down as available. Typically, you would get a key first, examine if it's of interest to you, and then obtain value. You can use also use "key", "value" and "next" at the same time if you're going through all elements.<br/>
<br/>
&lt;key&gt; in "key" clause is a normalized name of any given element in XML text. This means every non-leaf element is included, separated by a forward slash ("/"), and arguments end with "@". An example would be, if "onclick" is a element of "menuitem":<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_950' class=notranslate>
menu/popup/menuitem/onclick</pre>
<span id=rimstone_copied_950 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_950' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_950, code_950, rimstone_copied_950)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
or if "onclick" is an attribute of "menuitem":<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_951' class=notranslate>
menu/popup/menuitem/onclick/@</pre>
<span id=rimstone_copied_951 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_951' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_951, code_951, rimstone_copied_951)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<div class="vsub"><a id="Examples"></a>Examples</div>
See <a href='/xml-doc.html'>xml-doc</a>.<br/>
<div class="vsub"><a id="See also"></a>See also</div>
 <a name='XML parsing'></a><span style="font-weight:bold;">XML parsing</span><br/>
<a href='/read-xml.html'>read-xml</a> &nbsp;<br/>
<a href='/xml-doc.html'>xml-doc</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='/documentation.html'>documentation</a><br/>
<a id='rename-file.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:left;background-color:white;'><a href='https://rimstone-lang.com' style='border-bottom:0px'><img src='https://rimstone-lang.com/rimstone.png' style='width:180px;height:auto'/></a></div><div class='vhub' style='margin-top:10px;'>Rename file</div><hr/><span style="font-weight:bold;">Purpose</span>: Renames a file.<br/>
<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_952' class=notranslate>
<span class="Statement">rename-file</span> &lt;from file&gt;<span class="Identifier"> to</span> &lt;to file&gt; [<span class="Type"> status</span> &lt;status&gt; ]</pre>
<span id=rimstone_copied_952 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_952' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_952, code_952, rimstone_copied_952)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
rename-file will rename &lt;from file&gt; to &lt;to file&gt;. &lt;status&gt; number is RIM_OKAY on success and RIM_ERR_RENAME on failure.<br/>
<br/>
&lt;from file&gt; and &lt;to file&gt; must be specified with full paths unless they are in the current working directory (see <a href='/directories.html'>directories</a>), in which case a name alone will suffice. &lt;from file&gt; and &lt;to file&gt; can be in different directories. <br/>
<div class="vsub"><a id="Examples"></a>Examples</div>
Rename files:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_953' class=notranslate>
<span class="Statement">rename-file</span> <span class="Constant">&quot;/home/u1/d1/f1&quot;</span><span class="Identifier"> to</span> <span class="Constant">&quot;/home/u1/d2/f2&quot;</span><span class="Type"> status</span> st
<span class="Statement">if-true</span> st<span class="Identifier"> equal</span> RIM_OKAY
<span class="Statement">    @</span>Rename successful. &lt;br/&gt;
<span class="Statement">end-if</span></pre>
<span id=rimstone_copied_953 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_953' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_953, code_953, rimstone_copied_953)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Rename files in the current working directory:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_954' class=notranslate>
<span class="Statement">rename-file</span> <span class="Constant">&quot;f1&quot;</span><span class="Identifier"> to</span> <span class="Constant">&quot;f2&quot;</span><span class="Type"> status</span> st
<span class="Statement">if-true</span> st<span class="Identifier"> equal</span> RIM_OKAY
<span class="Statement">    @</span>Rename successful. &lt;br/&gt;
<span class="Statement">end-if</span></pre>
<span id=rimstone_copied_954 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_954' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_954, code_954, rimstone_copied_954)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<div class="vsub"><a id="See also"></a>See also</div>
 <a name='Files'></a><span style="font-weight:bold;">Files</span><br/>
<a href='/change-mode.html'>change-mode</a> &nbsp;<br/>
<a href='/close-file.html'>close-file</a> &nbsp;<br/>
<a href='/copy-file.html'>copy-file</a> &nbsp;<br/>
<a href='/delete-file.html'>delete-file</a> &nbsp;<br/>
<a href='/file-position.html'>file-position</a> &nbsp;<br/>
<a href='/file-storage.html'>file-storage</a> &nbsp;<br/>
<a href='/file-uploading.html'>file-uploading</a> &nbsp;<br/>
<a href='/get-upload.html'>get-upload</a> &nbsp;<br/>
<a href='/lock-file.html'>lock-file</a> &nbsp;<br/>
<a href='/open-file.html'>open-file</a> &nbsp;<br/>
<a href='/read-file.html'>read-file</a> &nbsp;<br/>
<a href='/read-line.html'>read-line</a> &nbsp;<br/>
<a href='/rename-file.html'>rename-file</a> &nbsp;<br/>
<a href='/stat-file.html'>stat-file</a> &nbsp;<br/>
<a href='/temporary-file.html'>temporary-file</a> &nbsp;<br/>
<a href='/uniq-file.html'>uniq-file</a> &nbsp;<br/>
<a href='/unlock-file.html'>unlock-file</a> &nbsp;<br/>
<a href='/write-file.html'>write-file</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='/documentation.html'>documentation</a><br/>
<a id='replace-string.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:left;background-color:white;'><a href='https://rimstone-lang.com' style='border-bottom:0px'><img src='https://rimstone-lang.com/rimstone.png' style='width:180px;height:auto'/></a></div><div class='vhub' style='margin-top:10px;'>Replace string</div><hr/><span style="font-weight:bold;">Purpose</span>: Replaces part of string.<br/>
<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_955' class=notranslate>
<span class="Statement">replace-string</span> &lt;string&gt; \
    (<span class="Identifier"> copy</span> &lt;replacement&gt; ) | (<span class="Identifier"> copy-end</span> &lt;replacement&gt; ) \
    [<span class="Identifier"> start-with</span> &lt;start with&gt; ] \
    [<span class="Identifier"> length</span> &lt;length&gt; ]</pre>
<span id=rimstone_copied_955 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_955' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_955, code_955, rimstone_copied_955)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
replace-string will replace part of &lt;string&gt; with &lt;replacement&gt; string. "copy" clause will make a replacement in the leading part of &lt;string&gt;, while "copy-end" will make a replacement in the trailing part of &lt;string&gt;.<br/>
<br/>
If "length" clause is not used, then the entire &lt;replacement&gt; string is used, otherwise only the &lt;length&gt; leading bytes of it.<br/>
<br/>
If "start-with" clause is used, then &lt;replacement&gt; will be copied starting with byte &lt;start with&gt; in &lt;string&gt; ("0" being the first byte) (with "copy" clause) or starting with &lt;start with&gt; bytes prior to the end of &lt;string&gt; (with "copy-end" clause).<br/>
<br/>
If "start-with" clause is not used, then &lt;replacement&gt; will replace the leading part of &lt;string&gt; (with "copy" clause") or the very last part of &lt;string&gt; (with "copy-end" clause). In either case, the number of bytes copied is determined by whether "length" clause is used or not.<br/>
<br/>
If either "start-with" or "length" is negative, it's the same as if not specified. <br/>
<div class="vsub"><a id="Examples"></a>Examples</div>
After replace-string below, string "a" will be "none string is here":<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_956' class=notranslate>
<span class="Statement">set-string</span> b=<span class="Constant">&quot;none&quot;</span>
<span class="Statement">set-string</span> a=<span class="Constant">&quot;some string is here&quot;</span>
<span class="Statement">replace-string</span> a<span class="Identifier"> copy</span> b</pre>
<span id=rimstone_copied_956 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_956' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_956, code_956, rimstone_copied_956)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
After replace-string below, string "a" will be "some string is none":<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_957' class=notranslate>
<span class="Statement">set-string</span> b=<span class="Constant">&quot;none&quot;</span>
<span class="Statement">set-string</span> a=<span class="Constant">&quot;some string is here&quot;</span>
<span class="Statement">replace-string</span> a<span class="Identifier"> copy-end</span> b</pre>
<span id=rimstone_copied_957 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_957' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_957, code_957, rimstone_copied_957)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
In this example, "a" will be "somnontring is here":<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_958' class=notranslate>
<span class="Statement">set-string</span> b=<span class="Constant">&quot;none&quot;</span>
<span class="Statement">set-string</span> a=<span class="Constant">&quot;some string is here&quot;</span>
<span class="Statement">replace-string</span> a<span class="Identifier"> copy</span> b<span class="Identifier"> start-with</span> <span class="Constant">3</span><span class="Identifier"> length</span> <span class="Constant">3</span></pre>
<span id=rimstone_copied_958 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_958' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_958, code_958, rimstone_copied_958)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
In the following example, "a" will be "some string inohere":<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_959' class=notranslate>
<span class="Statement">set-string</span> b=<span class="Constant">&quot;none&quot;</span>
<span class="Statement">set-string</span> a=<span class="Constant">&quot;some string is here&quot;</span>
<span class="Statement">replace-string</span> a<span class="Identifier"> copy-end</span> b<span class="Identifier"> start-with</span> <span class="Constant">6</span><span class="Identifier"> length</span> <span class="Constant">2</span></pre>
<span id=rimstone_copied_959 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_959' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_959, code_959, rimstone_copied_959)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<div class="vsub"><a id="See also"></a>See also</div>
 <a name='Strings'></a><span style="font-weight:bold;">Strings</span><br/>
<a href='/copy-string.html'>copy-string</a> &nbsp;<br/>
<a href='/count-substring.html'>count-substring</a> &nbsp;<br/>
<a href='/delete-string.html'>delete-string</a> &nbsp;<br/>
<a href='/double-string.html'>double-string</a> &nbsp;<br/>
<a href='/lower-string.html'>lower-string</a> &nbsp;<br/>
<a href='/match-regex.html'>match-regex</a> &nbsp;<br/>
<a href='/new-string.html'>new-string</a> &nbsp;<br/>
<a href='/number-string.html'>number-string</a> &nbsp;<br/>
<a href='/read-split.html'>read-split</a> &nbsp;<br/>
<a href='/replace-string.html'>replace-string</a> &nbsp;<br/>
<a href='/scan-string.html'>scan-string</a> &nbsp;<br/>
<a href='/set-string.html'>set-string</a> &nbsp;<br/>
<a href='/split-string.html'>split-string</a> &nbsp;<br/>
<a href='/string-double.html'>string-double</a> &nbsp;<br/>
<a href='/string-expressions.html'>string-expressions</a> &nbsp;<br/>
<a href='/string-length.html'>string-length</a> &nbsp;<br/>
<a href='/string-number.html'>string-number</a> &nbsp;<br/>
<a href='/trim-string.html'>trim-string</a> &nbsp;<br/>
<a href='/upper-string.html'>upper-string</a> &nbsp;<br/>
<a href='/write-string.html'>write-string</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='/documentation.html'>documentation</a><br/>
<a id='report-error.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:left;background-color:white;'><a href='https://rimstone-lang.com' style='border-bottom:0px'><img src='https://rimstone-lang.com/rimstone.png' style='width:180px;height:auto'/></a></div><div class='vhub' style='margin-top:10px;'>Report error</div><hr/><span style="font-weight:bold;">Purpose</span>: Reports a fatal error.<br/>
<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_960' class=notranslate>
<span class="Statement">report-error</span> &lt;format&gt;, &lt;variable&gt; [<span class="Identifier"> ,</span> ... ]</pre>
<span id=rimstone_copied_960 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_960' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_960, code_960, rimstone_copied_960)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
report-error will report a fatal error. It will format an error message according to the &lt;format&gt; string and a list of &lt;variable&gt;s and then &nbsp;write it to the standard error output; no HTTP header is output specifically for report-error. <br/>
<br/>
In general, before issuing report-error, you would provide an output for the client that is appropriate. report-error's purpose is only to output a message to the standard error output, stop the processing of the current request, and move on to the next one for the <a href='/service.html'>service</a> or exit if this is a <a href='/command-line.html'>command-line</a> program; it is your responsibility to provide any meaningful output to the client prior to that.<br/>
<br/>
See <a href='/error-handling.html'>error-handling</a> when report-error is called.<br/>
<br/>
&lt;format&gt; string must be present and there must be at least one &lt;variable&gt; (it means if you want to output a simple string literal you still have to use "%s" as format). The reason for this is to avoid formatting errors, and to use formatting in a consistent fashion.<br/>
<br/>
<div class="vsub"><a id="Format"></a>Format</div>
&lt;format&gt; string must be a literal. Variables must follow &lt;format&gt; separated by commas in the same order as placeholders. If you use any placeholders other than specified below, or the type of variables you use do not match the type of a corresponding placeholder in &lt;format&gt;, your program will <a href='/error-handling.html'>error out</a>. You can use the following placeholders in &lt;format&gt;:<br/>
<ul><li>%s for a string<br/>
</li><li>%c for a number displayed as a character,<br/>
</li><li>%&lt;number&gt;s for a string output with a width of at least &lt;number&gt; (any excess filled with spaces to the left),<br/>
</li><li>%ld for a 64-bit signed number. Use "lo" for displaying in octal notation and "lx" for hexadecimal notation.<br/>
</li><li>%&lt;number&gt;ld for a 64-bit signed number output with a width of at least &lt;number&gt; (any excess filled with spaces to the left). Use "lo" for displaying in octal notation and "lx" for hexadecimal notation.</li>
</li><li>%hd for a 32-bit signed number. Use "hu" for displaying as unsigned number, "ho" for displaying in octal notation and "hx" for hexadecimal notation.<br/>
</li><li>%&lt;number&gt;hd for a 32-bit signed number output with a width of at least &lt;number&gt; (any excess filled with spaces to the left). Use "ho" for displaying as unsigned number, "ho" for displaying in octal notation and "hx" for hexadecimal notation.<br/>
</li><li>%hhd for a signed 8-bit number. Use "hhu" for displaying as unsigned number, "hho" for displaying in octal notation and "hhx" for hexadecimal notation.<br/>
</li><li>%&lt;number&gt;hhd for a number output with a width of at least &lt;number&gt; (any excess filled with spaces to the left). Use "hhu" for displaying as unsigned number, "hho" for displaying in octal notation and "hhx" for hexadecimal notation.<br/>
</li><li>%&lt;width&gt;f for a double output in fixed-point notation, with the 6 digits after decimal point ("format-floating" clause in <a href='/double-string.html'>double-string</a>); %&lt;width&gt;e for scientific notation with one digit before the decimal point, along with the exponent ("format-scientific" clause in <a href='/double-string.html'>double-string</a>); %&lt;width&gt;g displays either %f or %e format based on which is more compact ("format-compact" clause in <a href='/double-string.html'>double-string</a>); in any case &lt;width&gt; represents the width of at least &lt;width&gt; bytes output. You can also use &lt;widith&gt;.&lt;precision&gt; to specify both width and precision, or ".&lt;precision&gt;" for just precision; for instance, "%10f" or "%12.4e" etc.</li></ul>
<div class="vsub"><a id="Examples"></a>Examples</div>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_961' class=notranslate>
<span class="Statement">report-error</span> <span class="Constant">&quot;Too many input parameters for </span><span class="Special">%s</span><span class="Constant">, encountered total of [</span><span class="Special">%ld</span><span class="Constant">]&quot;</span>, <span class="Constant">&quot;customer&quot;</span>, num_count</pre>
<span id=rimstone_copied_961 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_961' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_961, code_961, rimstone_copied_961)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<div class="vsub"><a id="See also"></a>See also</div>
 <a name='Error handling'></a><span style="font-weight:bold;">Error handling</span><br/>
<a href='/db-error.html'>db-error</a> &nbsp;<br/>
<a href='/error-code.html'>error-code</a> &nbsp;<br/>
<a href='/error-handling.html'>error-handling</a> &nbsp;<br/>
<a href='/report-error.html'>report-error</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='/documentation.html'>documentation</a><br/>
<a id='request-body.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:left;background-color:white;'><a href='https://rimstone-lang.com' style='border-bottom:0px'><img src='https://rimstone-lang.com/rimstone.png' style='width:180px;height:auto'/></a></div><div class='vhub' style='margin-top:10px;'>Request body</div><hr/><span style="font-weight:bold;">Purpose</span>: Get the body of an HTTP request.<br/>
<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_976' class=notranslate>
<span class="Statement">request-body</span> &lt;request body&gt;</pre>
<span id=rimstone_copied_976 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_976' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_976, code_976, rimstone_copied_976)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
request-body stores the request body of an HTTP request into string &lt;request body&gt;.<br/>
<br/>
If the content type of the request is "multipart/form-data", the request body is empty because all the data (including any attached files) can be obtained by using <a href='/get-param.html'>get-param</a> (see <a href='/file-uploading.html'>file-uploading</a> for files). In all other cases, request body is available.<br/>
<br/>
Typical use of request-body is when some text or binary information is attached to the request, such as JSON for example, though it can be anything else, for example an image, some text, or a PDF document. Usually request body is present for POST, PUT or PATCH requests, but you can also obtain it for GET or DELETE requests, if supplied (for instance identifying a resource may require more information than can fit in a query string), or for any custom request method.<br/>
<div class="vsub"><a id="Examples"></a>Examples</div>
String variable "reqb" will hold request body of a request:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_977' class=notranslate>
<span class="Statement">request-body</span> reqb</pre>
<span id=rimstone_copied_977 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_977' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_977, code_977, rimstone_copied_977)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<div class="vsub"><a id="See also"></a>See also</div>
 <a name='Request data'></a><span style="font-weight:bold;">Request data</span><br/>
<a href='/get-param.html'>get-param</a> &nbsp;<br/>
<a href='/input-output-parameters.html'>input-output-parameters</a> &nbsp;<br/>
<a href='/request-body.html'>request-body</a> &nbsp;<br/>
<a href='/set-param.html'>set-param</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='/documentation.html'>documentation</a><br/>
<a id='request.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:left;background-color:white;'><a href='https://rimstone-lang.com' style='border-bottom:0px'><img src='https://rimstone-lang.com/rimstone.png' style='width:180px;height:auto'/></a></div><div class='vhub' style='margin-top:10px;'>Request</div><hr/>RimStone applications run by processing requests. A request always takes form of an HTTP request, meaning a URL, an optional HTTP request body, and any environment variables. This is regardless of whether it's a <a href='/service.html'>service</a> or a <a href='/command-line.html'>command-line</a> program. <br/>
<div class="vsub"><a id="Request URL"></a>Request URL</div>
A "request URL" is a URL that an outside caller (such as a web browser) uses to execute your RimStone code. Aside from the scheme, domain and port, it's made up of:<br/>
<ul><li>application path,<br/>
</li><li>request path, and<br/>
</li><li>URL parameters.</li></ul>
Here's a breakdown of URL structure:<br/>
<div class='ncode' style='position:relative;padding-right:16px;'>
<pre id='code_962' class=notranslate>
&lt;scheme&gt;://&lt;domain&gt;[:&lt;port&gt;]&lt;application path&gt;&lt;request path&gt;&lt;parameters&gt;</pre>
<span id=rimstone_copied_962 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_962' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_962, code_962, rimstone_copied_962)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
For example, in the following URL:<br/>
<div class='ncode' style='position:relative;padding-right:16px;'>
<pre id='code_965' class=notranslate>
https://your.website.com/my-app/my-request/par1=val1/par2=val2</pre>
<span id=rimstone_copied_965 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_965' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_965, code_965, rimstone_copied_965)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
"/my-app" is application path, "/my-request" is request path and "/par1=val1/par2=val2" are parameters "par1" and "par2" with values "val1" and "val2". Together, application path and request path are called URL path.<br/>
<div class="vsub"><a id="Application path"></a>Application path</div>
The leading part of URL's path is called "application path". By default, application path is the application name (see <a href='/mrim.html'>mrim</a> with "-i" option) preceded by forward slash ("/"); if it's "shopping", then the default application path is:<br/>
<div class='ncode' style='position:relative;padding-right:16px;'>
<pre id='code_967' class=notranslate>
/shopping</pre>
<span id=rimstone_copied_967 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_967' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_967, code_967, rimstone_copied_967)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Application name can contain alphanumerical characters and hyphens.<br/>
<br/>
<span style="font-weight:bold;">- Customizing application path</span><br/>
You can change the application path by specifying it with "--path" parameter in <a href='/rim.html'>rim</a> when building; each application must have its own unique path. Note that whatever it may be, the application name must always be its last path segment. For example, if your application name is "shopping", then the application path may be:<br/>
<div class='ncode' style='position:relative;padding-right:16px;'>
<pre id='code_969' class=notranslate>
/api/v2/shopping</pre>
<span id=rimstone_copied_969 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_969' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_969, code_969, rimstone_copied_969)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
An example of specifying the custom application path:<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_964' class=notranslate>
rim <span class="Special">-q</span> <span class="Special">--path</span><span class="Statement">=</span><span class="Statement">&quot;</span><span class="Constant">/api/v2/shopping</span><span class="Statement">&quot;</span></pre>
<span id=rimstone_copied_964 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_964' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_964, code_964, rimstone_copied_964)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<div class="vsub"><a id="Request path"></a>Request path</div>
Request path follows the application path, for instance:<br/>
<div class='ncode' style='position:relative;padding-right:16px;'>
<pre id='code_971' class=notranslate>
https://some.web.site/shopping/buy-item</pre>
<span id=rimstone_copied_971 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_971' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_971, code_971, rimstone_copied_971)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
In this case the application path is "/shopping" and the request path is "/buy-item". It means that file "buy-item.rim" handles request "/buy-item" by implementing a <a href='/begin-handler.html'>begin-handler</a> "/buy-item" in it. As another example, file "services/manage-home.rim" (meaning "manage-home.rim" file in subdirectory "services") handles request "/services/manage-home" etc.<br/>
<br/>
The request path must match (fully or partially) the path of the file name that implements it, with source directory being the root ("/"). Here is an example of implementing a request "/buy-item" in file "buy-item.rim":<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_963' class=notranslate>
<span class="Statement">begin-handler</span> /buy-item<span class="Identifier"> public</span>
<span class="Statement">    get-param</span> some_param
<span class="Statement">    @</span>Bought item: <span class="Statement">&lt;&lt;print-out</span> some_param<span class="Statement">&gt;&gt;</span>
<span class="Statement">end-handler</span></pre>
<span id=rimstone_copied_963 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_963' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_963, code_963, rimstone_copied_963)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
As an example of a path hierarchy, such as for example a hierarchy of resources, methods etc, <a href='/begin-handler.html'>begin-handler</a> may be:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_966' class=notranslate>
<span class="Statement">begin-handler</span> /items/wine-collection/red-wine/buy-item<span class="Identifier"> public</span>
<span class="Statement">    .</span>..
<span class="Statement">end-handler</span></pre>
<span id=rimstone_copied_966 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_966' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_966, code_966, rimstone_copied_966)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
then the URL to call it would be:<br/>
<div class='ncode' style='position:relative;padding-right:16px;'>
<pre id='code_972' class=notranslate>
https://some.web.site/shopping/items/wine-collection/red-wine/buy-item</pre>
<span id=rimstone_copied_972 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_972' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_972, code_972, rimstone_copied_972)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
and might be implemented in file "items/wine-collection/red-wine/buy-item.rim", meaning under subdirectory "items", then subdirectory "wine-collection", then subdirectory "red-wine", then file "buy-item.rim".<br/>
<br/>
<span style="font-weight:bold;">- File/path naming conventions</span><br/>
By default, a request handler would be implemented in a source file whose path matches the request path, either fully or partially. <br/>
<br/>
The simplest example is that "/buy-item" request must be implemented in file "buy-item.rim". <br/>
<br/>
As a more involved example, request handler for "/items/wine-collection/red-wine/buy-item" can be implemented in file "items.rim" or file "items/wine-collection.rim" or file "items/wine-collection/red-wine.rim" or file "items/wine-collection/red-wine/buy-item.rim". <br/>
<br/>
Each of these source files can contain any number of matching requests. For instance, file "items.rim" can contain request handlers for both "/items/wine-collection/red-wine/buy-item" and "/items/beer-collection/ipa-beer/buy-item"; while file "items/wine-collection.rim" can contain request handlers for both "items/wine-collection/red-wine" and "items/wine-collection/white-wine". <br/>
<br/>
By the same token, file "items/wine-collection/red-wine/buy-item.rim" can implement both "/items/wine-collection/red-wine/buy-item" and "/items/wine-collection/red-wine/buy-item/sale" requests, as both requests match the file path.<br/>
<br/>
Note that if you use "--single-file" option in <a href='/rim.html'>rim</a>, then each source ".rim" file must contain only a single request, and its request path must match the file path fully. So in this case, request handler for "/items/wine-collection/red-wine/buy-item" must be in file "items/wine-collection/red-wine/buy-item.rim", and no other request can be implemented in it.<br/>
<div class="vsub"><a id="URL parameters"></a>URL parameters</div>
The actual input parameters follow after the request path, and can be specified in a number of ways. A parameter value is generally URL encoded in any case.<br/>
<br/>
<span style="font-weight:bold;">- Path segments</span><br/>
A common way is to specify name and value separated by an equal sign within a single path segment:<br/>
<div class='ncode' style='position:relative;padding-right:16px;'>
<pre id='code_973' class=notranslate>
https://some.web.site/shopping/buy-item/sku=4811/price=600/</pre>
<span id=rimstone_copied_973 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_973' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_973, code_973, rimstone_copied_973)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
This way, you have a readable representation of parameter names and values, while still maintaining the hierarchical form which conveys how are the parameters structured.<br/>
<br/>
Here, the required request path is "/buy-item" and there are two input parameters ("sku" and "price") with values of "4811" and "600" respectively. <br/>
<br/>
<span style="font-weight:bold;">- Query string</span><br/>
Parameters can be specified after a question mark in a "name=value" form. For example, the full URL (with the same parameter values as above) may be:<br/>
<div class='ncode' style='position:relative;padding-right:16px;'>
<pre id='code_974' class=notranslate>
https://some.web.site/shopping/buy-item?sku=4811&amp;price=600</pre>
<span id=rimstone_copied_974 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_974' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_974, code_974, rimstone_copied_974)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<span style="font-weight:bold;">- Mixed</span><br/>
You can specify a mix of the above ways to write parameters, for instance the above URL can be written as:<br/>
<div class='ncode' style='position:relative;padding-right:16px;'>
<pre id='code_975' class=notranslate>
https://some.web.site/shopping/buy-item/sku=4811?price=600</pre>
<span id=rimstone_copied_975 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_975' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_975, code_975, rimstone_copied_975)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<span style="font-weight:bold;">- Parameters</span><br/>
A parameter name can be comprised of alphanumeric characters, hyphens and underscores, and it must start with an alphabet character. Any hyphens are converted to underscores for the purpose of obtaining parameter value, see <a href='/get-param.html'>get-param</a>. Do not use double underscore ("__") in parameter names. <br/>
<br/>
Structuring your parameters, i.e. the order in a query path or path segments, and which ones (if any) are in a query string, is determined by you. Regardless of your choices, the code that handles a request is the same. In the example used here, you can obtain the parameters in request handler source file "buy-item.rim":<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_968' class=notranslate>
<span class="Statement">begin-handler</span> /buy-item<span class="Identifier"> public</span>
<span class="Statement">    get-param</span> sku
<span class="Statement">    get-param</span> price

<span class="Statement">    run-query</span> @mydb = <span class="Constant">&quot;update wine_items set price='</span><span class="Special">%s</span><span class="Constant">' where sku='</span><span class="Special">%s</span><span class="Constant">'&quot;</span><span class="Identifier"> :</span> price, sku<span class="Identifier"> no-loop</span>
<span class="Statement">    @</span>OKAY
<span class="Statement">end-handler</span></pre>
<span id=rimstone_copied_968 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_968' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_968, code_968, rimstone_copied_968)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
For a hierarchical URL path, you would write the same:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_970' class=notranslate>
<span class="Statement">begin-handler</span> /items/wine-collection/red-wine/buy-item<span class="Identifier"> public</span>
<span class="Statement">    get-param</span> sku
<span class="Statement">    get-param</span> price

<span class="Statement">    run-query</span> @mydb = <span class="Constant">&quot;update wine_items set price='</span><span class="Special">%s</span><span class="Constant">' where sku='</span><span class="Special">%s</span><span class="Constant">'&quot;</span><span class="Identifier"> :</span> price, sku<span class="Identifier"> no-loop</span>
<span class="Statement">end-handler</span></pre>
<span id=rimstone_copied_970 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_970' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_970, code_970, rimstone_copied_970)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Note that each parameter name must be unique; your program will <a href='/error-handling.html'>error out</a> if you have duplicate parameter names.<br/>
<div class="vsub"><a id="Maximum length"></a>Maximum length</div>
Maximum length of a request URL is 2500 bytes.<br/>
<div class="vsub"><a id="How RimStone handles requests"></a>How RimStone handles requests</div>
There are generally two kinds of requests, depending on their origin. If a request comes from outside the process that's serving it, then it's an "external" request (such as from a web browser, a web API client, from command line execution etc). Conversely, if a request comes from inside the process that's serving it, it's an "internal" request - meaning one request handler is calling another within one the process(es) serving an application. Internal requests are made using <a href='/call-handler.html'>call-handler</a> statement.<br/>
<br/>
An external request is handled by a first available process:<br/>
<ul><li>For a <a href='/command-line.html'>command-line</a> program, there is only a single process, and it handles a single requests before it exits. <br/>
</li><li>For a <a href='/service.html'>service</a> application, there can be any number of processes running. A process is chosen to service a request if it is currently not serving other requests; this way there are no processes waiting idle unnecessarily. Each process is identical and can serve any request, i.e. it has all request handlers available to it. Thus, when a process is chosen to serve a request, then this process will simply execute its begin-handler.</li></ul>
<span style="font-weight:bold;">- Processing a request</span><br/>
To handle a request, RimStone dispatcher (which is automatically generated) is called first. It uses a request name to call the appropriate request handler, as explained above. <br/>
<br/>
You can implement two hooks into request handling: one that executes before each request (<a href='/before-handler.html'>before-handler</a>) and one that executes afterwards (<a href='/after-handler.html'>after-handler</a>). <br/>
<br/>
At the end of the request, all request memory and all file handles allocated by RimStone will be freed, except for process-scoped memory (see <a href='/memory-handling.html'>memory-handling</a>).<br/>
<br/>
<span style="font-weight:bold;">- Performance</span><br/>
RimStone uses a hash table to match a request with a handler function, as well to match parameters. Typically, it takes only a single lookup to find the handler function/parameters, regardless of the number of possible request names/parameters a process may serve (be it 10 or 10,000 different names). RimStone pre-generates a hash table at compile time, so no run-time cycles are spent on creating it. Also, the hash table is created as a continuous block of memory in the program's data segment, which loads as a part of the program (as a single memory copy) and is very fast because accessing the data needs no pointer translations. As a result, RimStone dispatcher is extremely fast.<br/>
<br/>
<span style="font-weight:bold;">- Unrecognized requests</span><br/>
If no request has been recognized (i.e. request name does not match any request-handling ".rim" source file), then <br/>
<ul><li>no request handler will execute, <br/>
</li><li><a href='/before-handler.html'>before-handler</a> and <a href='/after-handler.html'>after-handler</a> will not execute either,<br/>
</li><li>and a "Request not found" error will be reported via <a href='/report-error.html'>report-error</a>.</li></ul>
<div class="vsub"><a id="See also"></a>See also</div>
 <a name='Requests'></a><span style="font-weight:bold;">Requests</span><br/>
<a href='/request.html'>request</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='/documentation.html'>documentation</a><br/>
<a id='resize-hash.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:left;background-color:white;'><a href='https://rimstone-lang.com' style='border-bottom:0px'><img src='https://rimstone-lang.com/rimstone.png' style='width:180px;height:auto'/></a></div><div class='vhub' style='margin-top:10px;'>Resize hash</div><hr/><span style="font-weight:bold;">Purpose</span>: Resize hash table.<br/>
<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_978' class=notranslate>
<span class="Statement">resize-hash</span> &lt;hash&gt;<span class="Identifier"> hash-size</span> &lt;new size&gt;</pre>
<span id=rimstone_copied_978 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_978' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_978, code_978, rimstone_copied_978)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
resize-hash will resize &lt;hash&gt; table (created by <a href='/new-hash.html'>new-hash</a>) to size &lt;new size&gt;, which refers to the number of "buckets", or possible hash codes derived from keys stored.<br/>
<br/>
When a number of elements stored grows, the search performance may decline if hash size remains the same. Consequently, if the number of elements shrinks, the memory allocated by the hash may be wasted. Use <a href='/get-hash.html'>get-hash</a> to obtain its current hash-size, its length (the number of elements currently stored in it) and the statistics (such as average reads) to determine if you need to resize it.<br/>
<br/>
Resizing is generally expensive, so it should not be done too often, and only when needed. The goal is to amortize this expense through future gain of lookup performance. For that reason it may be better to resize proportionally (i.e. by a percentage), unless you have a specific application reason to do otherwise, or to avoid exponential growth.<br/>
<div class="vsub"><a id="Examples"></a>Examples</div>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_979' class=notranslate>
<span class="Statement">resize-hash</span> h<span class="Identifier"> hash-size</span> <span class="Constant">100000</span></pre>
<span id=rimstone_copied_979 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_979' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_979, code_979, rimstone_copied_979)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<div class="vsub"><a id="See also"></a>See also</div>
 <a name='Hash'></a><span style="font-weight:bold;">Hash</span><br/>
<a href='/get-hash.html'>get-hash</a> &nbsp;<br/>
<a href='/new-hash.html'>new-hash</a> &nbsp;<br/>
<a href='/purge-hash.html'>purge-hash</a> &nbsp;<br/>
<a href='/read-hash.html'>read-hash</a> &nbsp;<br/>
<a href='/resize-hash.html'>resize-hash</a> &nbsp;<br/>
<a href='/write-hash.html'>write-hash</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='/documentation.html'>documentation</a><br/>
<a id='return-handler.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:left;background-color:white;'><a href='https://rimstone-lang.com' style='border-bottom:0px'><img src='https://rimstone-lang.com/rimstone.png' style='width:180px;height:auto'/></a></div><div class='vhub' style='margin-top:10px;'>Return handler</div><hr/><span style="font-weight:bold;">Purpose</span>: Return from current request handler back to its caller.<br/>
<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_980' class=notranslate>
<span class="Statement">return-handler</span>  [ &lt;return code&gt; ]</pre>
<span id=rimstone_copied_980 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_980' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_980, code_980, rimstone_copied_980)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Returns from current request handler by transferring control back to its caller. If the current request handler is handling an external request (such as from a web browser, API, command line etc.), then return-handler is equivalent to <a href='/exit-handler.html'>exit-handler</a>. If the current request handler was handling an internal request (i.e. called from another request handler with <a href='/call-handler.html'>call-handler</a>), then control transfers back to that handler immediately after call-handler.<br/>
<br/>
For internal requests, the number &lt;return code&gt; will be passed back to the caller, who can obtain it via "return-code" clause in <a href='/call-handler.html'>call-handler</a>. If &lt;return code&gt; is omitted, or if no return-handler is used (and the request handler finished by reaching its end), then it is 0. If current request handler is handling an external request, then &lt;return code&gt; will also set the handler's exit status (see <a href='/exit-status.html'>exit-status</a> and <a href='/exit-handler.html'>exit-handler</a>).<br/>
<div class="vsub"><a id="Examples"></a>Examples</div>
In this example, "req-handler" (the caller) will call "other-handler" (the callee), which will return to the caller (immediately after call-handler). Here's the caller:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_981' class=notranslate>
<span class="Statement">begin-handler</span> /req-handler<span class="Identifier"> public</span>
<span class="Statement">    .</span>..
<span class="Statement">    call-handler</span> <span class="Constant">&quot;/other-handler&quot;</span><span class="Type"> return-code</span> rval
<span class="Statement">    .</span>..
<span class="Statement">end-handler</span></pre>
<span id=rimstone_copied_981 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_981' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_981, code_981, rimstone_copied_981)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
The callee handler:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_982' class=notranslate>
<span class="Statement">begin-handler</span> /other-handler<span class="Identifier"> public</span>
<span class="Statement">    .</span>..
<span class="Statement">    return-handler</span> <span class="Constant">5</span>
<span class="Statement">    .</span>..
<span class="Statement">end-handler</span>
The value of <span class="Constant">&quot;rval&quot;</span> in the caller will be <span class="Constant">5.</span></pre>
<span id=rimstone_copied_982 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_982' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_982, code_982, rimstone_copied_982)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<div class="vsub"><a id="See also"></a>See also</div>
 <a name='Program flow'></a><span style="font-weight:bold;">Program flow</span><br/>
<a href='/break-loop.html'>break-loop</a> &nbsp;<br/>
<a href='/call-handler.html'>call-handler</a> &nbsp;<br/>
<a href='/code-blocks.html'>code-blocks</a> &nbsp;<br/>
<a href='/continue-loop.html'>continue-loop</a> &nbsp;<br/>
<a href='/do-once.html'>do-once</a> &nbsp;<br/>
<a href='/exit-handler.html'>exit-handler</a> &nbsp;<br/>
<a href='/if-defined.html'>if-defined</a> &nbsp;<br/>
<a href='/if-true.html'>if-true</a> &nbsp;<br/>
<a href='/quit-process.html'>quit-process</a> &nbsp;<br/>
<a href='/return-handler.html'>return-handler</a> &nbsp;<br/>
<a href='/start-loop.html'>start-loop</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='/documentation.html'>documentation</a><br/>
<a id='rewind-fifo.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:left;background-color:white;'><a href='https://rimstone-lang.com' style='border-bottom:0px'><img src='https://rimstone-lang.com/rimstone.png' style='width:180px;height:auto'/></a></div><div class='vhub' style='margin-top:10px;'>Rewind fifo</div><hr/><span style="font-weight:bold;">Purpose</span>: Rewind FIFO list to the beginning.<br/>
<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_983' class=notranslate>
<span class="Statement">rewind-fifo</span> &lt;list&gt;</pre>
<span id=rimstone_copied_983 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_983' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_983, code_983, rimstone_copied_983)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
rewind-fifo will position at the very first data element put into &lt;list&gt; which was created with <a href='/new-fifo.html'>new-fifo</a>. Each time <a href='/read-fifo.html'>read-fifo</a> is used, the internal position moves to the next element in the order they were put in. rewind-fifo rewinds back to the very first one.<br/>
<div class="vsub"><a id="Examples"></a>Examples</div>
See <a href='/read-fifo.html'>read-fifo</a>.<br/>
<div class="vsub"><a id="See also"></a>See also</div>
 <a name='FIFO'></a><span style="font-weight:bold;">FIFO</span><br/>
<a href='/delete-fifo.html'>delete-fifo</a> &nbsp;<br/>
<a href='/new-fifo.html'>new-fifo</a> &nbsp;<br/>
<a href='/purge-fifo.html'>purge-fifo</a> &nbsp;<br/>
<a href='/read-fifo.html'>read-fifo</a> &nbsp;<br/>
<a href='/rewind-fifo.html'>rewind-fifo</a> &nbsp;<br/>
<a href='/write-fifo.html'>write-fifo</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='/documentation.html'>documentation</a><br/>
<a id='rewind-lifo.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:left;background-color:white;'><a href='https://rimstone-lang.com' style='border-bottom:0px'><img src='https://rimstone-lang.com/rimstone.png' style='width:180px;height:auto'/></a></div><div class='vhub' style='margin-top:10px;'>Rewind lifo</div><hr/><span style="font-weight:bold;">Purpose</span>: Rewind LIFO list.<br/>
<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_984' class=notranslate>
<span class="Statement">rewind-lifo</span> &lt;list&gt;</pre>
<span id=rimstone_copied_984 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_984' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_984, code_984, rimstone_copied_984)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
rewind-lifo will position at the very last data element put into &lt;list&gt; which was created with <a href='/new-lifo.html'>new-lifo</a>. Each time <a href='/read-lifo.html'>read-lifo</a> is used, the internal position moves to the previous element in the reverse order they were put in.<br/>
<div class="vsub"><a id="Examples"></a>Examples</div>
See <a href='/read-lifo.html'>read-lifo</a>.<br/>
<div class="vsub"><a id="See also"></a>See also</div>
 <a name='LIFO'></a><span style="font-weight:bold;">LIFO</span><br/>
<a href='/delete-lifo.html'>delete-lifo</a> &nbsp;<br/>
<a href='/get-lifo.html'>get-lifo</a> &nbsp;<br/>
<a href='/new-lifo.html'>new-lifo</a> &nbsp;<br/>
<a href='/purge-lifo.html'>purge-lifo</a> &nbsp;<br/>
<a href='/read-lifo.html'>read-lifo</a> &nbsp;<br/>
<a href='/rewind-lifo.html'>rewind-lifo</a> &nbsp;<br/>
<a href='/write-lifo.html'>write-lifo</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='/documentation.html'>documentation</a><br/>
<a id='rimcli.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:left;background-color:white;'><a href='https://rimstone-lang.com' style='border-bottom:0px'><img src='https://rimstone-lang.com/rimstone.png' style='width:180px;height:auto'/></a></div><div class='vhub' style='margin-top:10px;'>Rimcli</div><hr/><span style="font-weight:bold;">Purpose</span>: FastCGI client utility.<br/>
<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_996' class=notranslate>
rimcli <span class="Statement">&lt;</span>address:port<span class="Statement">&gt;</span> | <span class="Statement">&lt;</span>Unix socket<span class="Statement">&gt;</span></pre>
<span id=rimstone_copied_996 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_996' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_996, code_996, rimstone_copied_996)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
rimcli will contact FastCGI server running on TCP/IP machine specified by &lt;address:port&gt;, where address can be an IP of the machine or its address, and port is the port number. For local sockets, use &lt;Unix socket&gt;, which is a file name of a socket used by the server; note you need to have proper permissions to access this socket file.<br/>
<br/>
rimcli will send a request to the server, receive a reply and display it to standard output. Any errors are displayed to standard error stream.<br/>
<br/>
Use standard environment variables in order to specify the details of the request. The environment variables recognized by rimcli are CONTENT_TYPE, CONTENT_LENGTH, REQUEST_METHOD, SCRIPT_NAME, PATH_INFO, QUERY_STRING (which are all standard HTTP CGI variables), as well as RimStone's variable RIM_SILENT_HEADER which is used to suppress header output (value of "yes" will do that).<br/>
<br/>
The above variables are not explained here; you can find much about them in many other sources. Please note that if CONTENT_LENGTH is specified, then rimcli expect content data to be provided to its standard input.<br/>
<br/>
You can see the examples of setting the above environment variables and the usage of rimcli if you use "-r" option of <a href='/rim.html'>rim</a>; if you skip "--exec" option, rim will display the settings and the usage of rimcli utility.<br/>
<br/>
Note that you should be able to use rimcli when talking to any FastCGI server (such as PHP), not just RimStone.<br/>
<div class="vsub"><a id="See also"></a>See also</div>
 <a name='FastCGI client'></a><span style="font-weight:bold;">FastCGI client</span><br/>
<a href='/rimcli.html'>rimcli</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='/documentation.html'>documentation</a><br/>
<a id='rim.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:left;background-color:white;'><a href='https://rimstone-lang.com' style='border-bottom:0px'><img src='https://rimstone-lang.com/rimstone.png' style='width:180px;height:auto'/></a></div><div class='vhub' style='margin-top:10px;'>Rim</div><hr/><span style="font-weight:bold;">Purpose</span>: RimStone general purpose utility: build, test, run, miscellaneous.<br/>
<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_986' class=notranslate>
rim <span class="Statement">&lt;</span>options<span class="Statement">&gt;</span></pre>
<span id=rimstone_copied_986 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_986' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_986, code_986, rimstone_copied_986)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<div class="vsub"><a id="Command-line options"></a>Command-line options</div>
<ul><li>-k &lt;app name&gt;<br/>
Create RimStone application &lt;app name&gt; with default settings (see <a href='/mrim.html'>mrim</a> with "-i" option on creating applications with non-default settings). The default settings mean that your application is owned by the currently-logged on Operating System user (see "-u" option in mrim), and that a Unix socket connecting to your application server isn't restricted by any group (see "-r" option in mrim). You must have sudo privilege to create an application. This option does nothing if the application already exists. You can combine this option with "-q" to create and then build an application in the same step.<br/>
<br/>
</li><li>-q Build RimStone application from source code in the current directory. <a href='/mrim.html'>mrim</a> must run first in this directory with "-i" option to create the application. You must have at least one RimStone source file (.rim file), with each such file implementing a single <a href='/request.html'>request</a> handler. All application source files must be contained in a flat directory; however, each request handler can handle any hierarchical path, so your API can be fully hierarchical. On rare occassions when C compiler version changes, you'll need sudo privileges to recompile and install RimStone's LTO objects.<br/>
<br/>
The following options can be used when building an application:<br/>
<br/>
<ul><li>--db="&lt;database vendor&gt;:&lt;db config file&gt; ..."<br/>
Specify a list of databases used in your application. Each element of the list is &lt;database vendor&gt; (which is 'mariadb', 'postgres' or 'sqlite'), followed by a colon (:) and then &lt;db config file&gt;, where &lt;db config file&gt; is used to refer to a database in <a href='/statements.html'>statements</a> such as <a href='/run-query.html'>run-query</a>. <br/>
<br/>
Each &lt;database vendor&gt;:&lt;db config file&gt; is separated by a space. You can list any number of databases for use in your application. A file in current directory with name &lt;db config file&gt; must exist and contain the connection parameters for database access, and is copied to RimStone's database configuration directory (see <a href='/directories.html'>directories</a>). See <a href='/database-config-file.html'>database-config-file</a> for more details on the content of this file.<br/>
<br/>
</li><li>--lflag=&lt;linker flags&gt;<br/>
If you wish to add any additional linker flags (such as any non-RimStone libraries), specify them quoted under this option. <br/>
<br/>
</li><li>--cflag=&lt;C flags&gt;<br/>
If you wish to add any additional C compiler (gcc) flags, specify them quoted under this option. <br/>
<br/>
</li><li>--path=&lt;application path&gt;<br/>
This option lets you specify the <a href='/request.html'>application path</a> for your request URLs. It is a leading path of a URL prior to request name and any parameters. If empty, the default is the application name preceded by a forward slash:<br/>
<div class='ncode' style='position:relative;padding-right:16px;'>
<pre id='code_985' class=notranslate>
/&lt;app name&gt;</pre>
<span id=rimstone_copied_985 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_985' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_985, code_985, rimstone_copied_985)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
</li><li>--maxupload=&lt;max upload size&gt;<br/>
Specify maximum upload size for a file (in bytes). The default is approximately 25MB. <br/>
<br/>
</li><li>--client-timeout=&lt;timeout&gt;<br/>
Specify number of seconds that RimStone server will wait for first data to arrive from a client after it connected. If the client doesn't send any data within &lt;timeout&gt; seconds after establishing the connection to RimStone server, it will be disconnected.<br/>
<br/>
</li><li>--max-errors=&lt;max errors&gt;<br/>
During building of C code precompiled from .rim source code, gcc will emit a maximum of &lt;max errors&gt; diagnostic messages per .rim source file. The default is 5. Note that RimStone precompiler stops after the first error in most cases and this setting doesn't apply to it.<br/>
<br/>
</li><li>--devel<br/>
"--devel" will not use all of the compile-time optimizations and will not use any link-time optimizations (LTO). This is the default when developing applications. Use "--release" option when you want to create release executables, which typically exhibit considerably higher performance (thus always use "--release" when testing performance or for release). Note that compiler debugging information is always included, though with this option more of it is present.<br/>
<br/>
</li><li>--fpe<br/>
"--fpe" will add floating point and signed integer checks that are designed to catch problems such as overflow, division by zero and illegal instructions; with this option such issues will cause your program to <a href='/error-handling.html'>error out</a>. Note that division by zero is always checked for numbers; however for doubles, this option is needed to do so. For both numbers and doubles, this option is needed to detect overflows. <br/>
<br/>
This option can only be used with "--devel" option, since it will affect performance and should not be used in release/production code. Use this option during the development and testing to catch potential bugs with floating point and signed number arithmetic. Note that if your gcc version is lower than 14, then overflows for signed integers may not error out your program, but rather the error message will display on standard error and the program will continue; to produce the behaviour described above, upgrade your gcc or the distribution you're running.<br/>
<br/>
Note: for some distributions, you may need to install libubsan package before you can use --fpe option; you will be prompted to do so during your program's compilation.<br/>
<br/>
</li><li>--release<br/>
This will include all optimizations, including LTO. Use when you wish to build release executables, for performance testing etc. Applications made with "--release" typically exibit better performance, sometimes 2 times faster or more. Note that compiler debugging information is still included regardless, because it enables basic debugging even for release executables and does not affect run-time performance. Making an application with "--release" can be considerably slower; because of that, during the development you'd probably not use this option.<br/>
<br/>
</li><li>--c-lines<br/>
Skip generating line information when compiling .rim files. By default line information is included, which allows errors to be reported with line numbers in .rim files. If you want only generated C code line numbers to be used, use this option. This is mostly useful if you think you found a bug in RimStone in order to pinpoint the issue.<br/>
<br/>
</li><li>--public<br/>
Change the default behavior of request handler safety so that request handlers without "public" or "private" clause are by default "public"; see <a href='/begin-handler.html'>begin-handler</a> for more details.<br/>
<br/>
</li><li>--single-file<br/>
A request handler is written in a source file whose path matches fully or partially that of the <a href='/request.html'>request</a>, and such a file can contain any number of request handlers that match, see <a href='/request.html'>request</a>. If, however "--single-file" is used, each request has to be in its own file whose path matches fully the request path, and no other request can be implemented in such file. For example, with "--single-file", request "/myreq" has to be in file "myreq.rim" in the source directory, while request "/other/newreq" has to be in file "other/newreq.rim" (meaning in file "newreq.rim" in subdirectory "other" in the source directory).<br/>
<br/>
</li><li>--exclude-dir<br/>
By default, all ".rim" files (including in all subdirectories regardless of how many levels there may be), are picked up for compilation. If "--exclude-dir" is used, then you can specify any number of subdirectories, separated by commas, to be excluded. <br/>
<br/>
</li><li>--ignore-warn<br/>
Do not display any warnings during compilation of a RimStone application.<br/>
<br/>
</li><li>--verbose<br/>
Display more detailed information about the making of your application.<br/>
<br/>
</li><li>--parallel=&lt;threads&gt;<br/>
Use &lt;threads&gt; number of threads to compile application. By default, the number of threads is equal to the number of CPUs (including virtual), allowing each CPU to compile one source files at a time; this is usually the fastest way. You can serialize compilation with "--parallel=1"; or you can set &lt;threads&gt; to any number between 1 and three time the number of CPUs in order to reach your performance and CPU utilization goals.<br/>
<br/>
</li><li>--posix-regex<br/>
Use ERE (Extended Regular Expression) POSIX regex library built into Linux instead of default PCRE2, see <a href='/match-regex.html'>match-regex</a>. While the two are largely compatible, you can use either one depending on your needs.<br/>
<br/>
</li><li>-c,--clean <br/>
Clean all object and other intermediate files, so that consequent application build is a full recompilation. Use it alone and prior to rebuilding the application.</li></ul>
<br/>
Note that when any rim compilation options change, the application is rebuilt (i.e. the change has the effect of "--clean").<br/>
<br/>
</li><li>-i<br/>
Display both include and linking flags for an application that uses <a href='/Client-API.html'>Client-API</a> to connect to RimStone <a href='/service.html'>service</a>. The flags are for C compiler (gcc). If "--include" option is used in addition, then only include flags are displayed. If "--link" option is used in addition, then only linking flags are displayed. Use this to automate building of client applications with tools like Makefile.<br/>
<br/>
</li><li>-v<br/>
Display RimStone version as well as the Operating System version. <br/>
<br/>
</li><li>-s<br/>
Trace the execution of rim utility and display all the steps in making your application. <br/>
<br/>
</li><li>-e &lt;number of stack traces&gt;<br/>
Display the last &lt;number of stack traces&gt;, i.e. the most recent stack trace files, which receive stack traces when program errors out, such as for instance due to your program attempting to access memory outside of it (but not for <a href='/report-error.html'>report-error</a> statement). See <a href='/error-handling.html'>error-handling</a>.<br/>
<br/>
<br/>
</li><li>-o<br/>
Show documentation directory - web page documentation is located here in the form of a rimstonedoc.html file.<br/>
<br/>
</li><li>-g<br/>
Show RimStone root directory (i.e. where RimStone is installed, see <a href='/directories.html'>directories</a>). <br/>
<br/>
</li><li>-l<br/>
Show library directory - RimStone's libraries and v1 code processor are located there.<br/>
<br/>
</li><li>-p &lt;app name&gt; --version &lt;version&gt; [ --force-user ]<br/>
Create application package file for application &lt;app name&gt;, which can be used to install the application on a different computer; such computer must have a compatible Operating System (the same Linux distribution and the same or higher minor version number) and the compatible version of RimStone must be installed (the same major and the same or higher minor version number). &lt;version&gt; is your application's version number, which is assigned by you. If "--force-user" is used, then this application, when installed elsewhere, must be installed into Operating System user account with the same user name as the current user when package is created. <br/>
Note that packaging an application will transfer all that's necessary for your application to run elsewhere (executables, database configuration files, the information about which libraries are required etc.). It does not (and cannot) deal with your own infrastructure, such as for example your own actual databases; those external dependencies are your responsibility. <br/>
If you have client applications built (see <a href='/Client-API.html'>Client-API</a>), you can copy their built executables as-is to a target machine, provided above versioning rules are observed and no extra libraries were linked with it. This is because RimStone client executables do not have any external dependencies, other than any that you introduce (by linking with additional external libraries).<br/>
Note that if your application uses databases, check database files (specified in "--db" option when your application is built), and blank out any database passwords you do not wish packaged. You should use passwordless database authentication or "dummy" passwords on the development and testing sites and never actual production passwords.<br/>
The result of packaging is a file &lt;app name&gt;.tar.gz which you can use elsewhere with "-a" option to install the application; you can rename this file as long as it remains with ".tar.gz" extension.<br/>
<br/>
</li><li>-a &lt;packaged .tar.gz file&gt; [ --downgrade ] [ --all ]<br/>
Installs your application on a different computer from a file created with "-p" option (i.e. &lt;packaged .tar.gz file&gt;). If "-all" is used, then all required tool kit libraries are installed automatically; otherwise you'd need to install them yourself. If "--downgrade" is used, then the installer will allow you to install a lower version of your application; normally that's not allowed. Note that same version of RimStone must be installed prior to installing any applications (see "-p" option). <br/>
If you do not plan to build any other RimStone applications on this target computer, you can uninstall gcc and make after RimStone is installed.<br/>
Note that if your application uses databases, check database files located in $HOME/.rimstone/apps/&lt;app name&gt;/db/ (where &lt;app name&gt; is your application name), and review/update them for the application deployment site.<br/>
<br/>
</li><li>-r [ --req="/&lt;request name&gt;[&lt;url parameters&gt;]" <br/>
 &nbsp; &nbsp;[ --app="application path" ] <br/>
 &nbsp; &nbsp;[ --service [ --remote="server:port" ] [ --socket="socket path" ] ] <br/>
 &nbsp; &nbsp;[ --method="&lt;request method&gt;" ] <br/>
 &nbsp; &nbsp;[ --content="&lt;input file&gt;" --content-type="&lt;content type&gt;" ] <br/>
 &nbsp; &nbsp;[ --silent-header ] <br/>
 &nbsp; &nbsp;[ --arg="&lt;arguments&gt;" ] <br/>
 &nbsp; &nbsp;[ --exec ] <br/>
Run a <a href='/command-line.html'>command-line</a> program, or make a <a href='/service.html'>service</a> request, or display bash code to do the same for use in scripts. <br/>
<br/>
If you are not in application's source code directory, then you must specify "--app" option to supply the application path (typically "/&lt;application name&gt;", see <a href='/request.html'>request</a>). You can use "--req" option to specify the request name and optional URL parameters (see <a href='/request.html'>request</a>), for example it may be:<br/>
<div class='ncode' style='position:relative;padding-right:16px;'>
<pre id='code_987' class=notranslate>
rim -r --req=&quot;/encrypt&quot; --exec</pre>
<span id=rimstone_copied_987 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_987' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_987, code_987, rimstone_copied_987)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
to execute request "encrypt", or<br/>
<div class='ncode' style='position:relative;padding-right:16px;'>
<pre id='code_989' class=notranslate>
rim -r --req=&quot;/encrypt/data=somedata?method=aes256&quot; --exec</pre>
<span id=rimstone_copied_989 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_989' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_989, code_989, rimstone_copied_989)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
where "/encrypt" is the request name, and "/data=somedata?method=aes256" represents the URL parameters. <br/>
<br/>
Use --method to specify the HTTP request method, for instance:<br/>
<div class='ncode' style='position:relative;padding-right:16px;'>
<pre id='code_991' class=notranslate>
rim -r --req=&quot;/encrypt/data=somedata?method=aes256&quot; --method=POST --exec</pre>
<span id=rimstone_copied_991 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_991' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_991, code_991, rimstone_copied_991)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
If not specified, the default method is "GET". <br/>
<br/>
If "--service" is not used, then <a href='/command-line.html'>command-line</a> program will execute and you can specify program arguments with "--arg" option, in which case "&lt;arguments&gt;" is a string (double or single quoted) that contains any number of program arguments. To specify arguments for a service see "-a" option in <a href='/mrim.html'>mrim</a>.<br/>
<br/>
If "--service" is used, then application server will be contacted to execute a service; in this case if "--remote" is not specified, a local Unix socket is used to contact the server; otherwise "server:port" specified in "--remote" is the IP/name and port of the server to call, separated by a colon (":"). In case of a local Unix socket, for the default location of the socket path see "socket-file" clause in <a href='/get-app.html'>get-app</a>; otherwise the socket path is given by "--socket" option. <br/>
<br/>
By default, the output in any case will have the HTTP headers. If you don't want those to appear, use "--silent-header" option.<br/>
<br/>
If "--content" is used, then file &lt;input file&gt; is either piped to the standard input of a command-line program (if "--service" is not used), or sent as a content to the application server (if "--service" is used). You can also specify content type with "--content-type". For example:<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_988' class=notranslate>
rim <span class="Special">-r</span> <span class="Special">-app</span><span class="Statement">=</span><span class="Statement">&quot;</span><span class="Constant">/my_app</span><span class="Statement">&quot;</span> <span class="Special">--req</span><span class="Statement">=</span><span class="Statement">&quot;</span><span class="Constant">/some_request?par1=val1&amp;par2=20&amp;par3=4</span><span class="Statement">&quot;</span> <span class="Special">--method</span><span class="Statement">=</span>PATCH <span class="Special">--content</span><span class="Statement">=</span>something.json <span class="Special">--content-type</span><span class="Statement">=</span>application/json <span class="Special">--exec</span></pre>
<span id=rimstone_copied_988 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_988' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_988, code_988, rimstone_copied_988)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Examples of using "-r" option to execute <a href='/command-line.html'>command-line</a> program or to call a <a href='/service.html'>service</a>:<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_990' class=notranslate>
<span class="Comment">#Execute current application as a command-line program, request &quot;json&quot;</span>
rim <span class="Special">-r</span> <span class="Special">--req</span><span class="Statement">=</span><span class="Statement">&quot;</span><span class="Constant">/json</span><span class="Statement">&quot;</span> <span class="Special">--exec</span>

<span class="Comment">#Execute application &quot;app_name&quot;, service &quot;json&quot; by calling the application server running with a Unix socket</span>
rim <span class="Special">-r</span> <span class="Special">--req</span><span class="Statement">=</span><span class="Statement">&quot;</span><span class="Constant">/json</span><span class="Statement">&quot;</span> <span class="Special">--app</span><span class="Statement">=</span><span class="Statement">&quot;</span><span class="Constant">/app_name</span><span class="Statement">&quot;</span> <span class="Special">--service</span>  <span class="Special">--exec</span>

<span class="Comment">#Execute application &quot;app_name&quot;, service &quot;json&quot; by calling the application server running with a Unix socket (specified explicitly)</span>
<span class="Comment">#Request has input parameter &quot;act&quot; with value &quot;perf&quot;</span>
rim <span class="Special">-r</span> <span class="Special">--req</span><span class="Statement">=</span><span class="Statement">&quot;</span><span class="Constant">/json?act=perf</span><span class="Statement">&quot;</span> <span class="Special">--app</span><span class="Statement">=</span><span class="Statement">&quot;</span><span class="Constant">/app_name</span><span class="Statement">&quot;</span> <span class="Special">--service</span> <span class="Special">--socket</span><span class="Statement">=</span><span class="Statement">&quot;</span><span class="Constant">/sock_path/sock</span><span class="Statement">&quot;</span>  <span class="Special">--exec</span>

<span class="Comment">#Execute application &quot;app_name&quot;, service &quot;json&quot; by calling the application server running with a TCP socket on port 2301</span>
<span class="Comment">#Request has input parameter &quot;act&quot; with value &quot;perf&quot;</span>
rim <span class="Special">-r</span> <span class="Special">--req</span><span class="Statement">=</span><span class="Statement">&quot;</span><span class="Constant">/json/act=perf</span><span class="Statement">&quot;</span> <span class="Special">--app</span><span class="Statement">=</span><span class="Statement">&quot;</span><span class="Constant">/app_name</span><span class="Statement">&quot;</span> <span class="Special">--service</span> <span class="Special">--remote</span><span class="Statement">=</span><span class="Statement">&quot;</span><span class="Constant">192.168.0.21:2301</span><span class="Statement">&quot;</span>  <span class="Special">--exec</span></pre>
<span id=rimstone_copied_990 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_990' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_990, code_990, rimstone_copied_990)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<span style="font-weight:bold;">- Performance</span><br/>
"rim -r" can be used both for testing and in production, however for maximum performance, skip "--exec" option to display direct bash code that you can copy and paste to use in production. This direct code is about 300% faster than using "rim -r"; keep this in mind if performance of using "rim -r" is important. When "--exec" is not used, the output may look like this:<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_992' class=notranslate>
<span class="Statement">export</span> <span class="Identifier">CONTENT_TYPE</span>=
<span class="Statement">export</span> <span class="Identifier">CONTENT_LENGTH</span>=
<span class="Statement">unset</span><span class="Identifier"> RIM_SILENT_HEADER</span>
<span class="Statement">export</span> RIM_SILENT_HEADER
<span class="Statement">export</span> <span class="Identifier">REQUEST_METHOD</span>=GET
<span class="Statement">export</span> <span class="Identifier">SCRIPT_NAME</span>=<span class="Statement">&quot;</span><span class="Constant">/app_name</span><span class="Statement">&quot;</span>
<span class="Statement">export</span> <span class="Identifier">PATH_INFO</span>=<span class="Statement">&quot;</span><span class="Constant">/json/act=perf</span><span class="Statement">&quot;</span>
<span class="Statement">export</span> <span class="Identifier">QUERY_STRING</span>=<span class="Statement">&quot;&quot;</span>
/home/os-user/.rimstone/lib/rimcli <span class="Statement">&quot;</span><span class="Constant">192.168.0.21:2301</span><span class="Statement">&quot;</span></pre>
<span id=rimstone_copied_992 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_992' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_992, code_992, rimstone_copied_992)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
If you copy the above and paste into bash shell, it will execute the command line program which handles the request specified (which rim would do when "--exec" is specified, but not as fast). Note that SCRIPT_NAME will be set to whatever application path you use (i.e. the default or if set with "--path" option when making the application; or with "--app" option here), see <a href='/request.html'>request</a>. <br/>
</li><li>-u <br/>
Read stdin (standard input) and substitute any environment variables in the form of ${&lt;var name&gt;} with their values, and output to stdout (stdout). This is useful in processing configuration files that do not have parameter values hardcoded, but rather take them from the environment.<br/>
<br/>
</li><li>-m<br/>
Add RimStone syntax and keyword highlighting rules for files with .rim extension to Vim editor for the currently logged on user. Note that you must have Vim installed; vi alone will not work.<br/>
<br/>
</li><li>--man &lt;topic|all&gt;<br/>
Display list of all man pages for RimStone (if '--man all' is used), or display manual page for a particular topic (for instance '--man read-file'). If man program is available on your system, you can als use 'man &lt;topic&gt;' directly to get help.<br/>
<br/>
</li><li>-h<br/>
Display help. </li></ul>
<div class="vsub"><a id="Examples"></a>Examples</div>
<ul><li>Make application (-q), use three databases (--db) named mdb (MariaDB database), pdb (PostgreSQL) and sdb (SQLite):<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_993' class=notranslate>
rim <span class="Special">-q</span> <span class="Special">--db</span><span class="Statement">=</span><span class="Statement">&quot;</span><span class="Constant">mariadb:mdb postgres:pdb sqlite:sdb</span><span class="Statement">&quot;</span></pre>
<span id=rimstone_copied_993 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_993' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_993, code_993, rimstone_copied_993)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
</li><li>make application, use MariaDB database db (--db), specify linker and C compilation flags, specify maximum upload size of about 18M:<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_994' class=notranslate>
rim <span class="Special">-q</span> <span class="Special">--db</span><span class="Statement">=</span><span class="Statement">&quot;</span><span class="Constant">mariadb:db</span><span class="Statement">&quot;</span> <span class="Special">--lflag</span> <span class="Statement">&quot;</span><span class="Constant">-Wl,-z,defs</span><span class="Statement">&quot;</span> <span class="Special">--cflag</span> <span class="Statement">&quot;</span><span class="Constant">-DXYZ123</span><span class="Statement">&quot;</span> <span class="Special">--maxupload</span> <span class="Constant">18000000</span></pre>
<span id=rimstone_copied_994 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_994' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_994, code_994, rimstone_copied_994)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
</li><li>Make application that doesn't use any databases:<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_995' class=notranslate>
rim <span class="Special">-q</span></pre>
<span id=rimstone_copied_995 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_995' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_995, code_995, rimstone_copied_995)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
</li></ul>
<div class="vsub"><a id="See also"></a>See also</div>
 <a name='Rimstone compiler and utility'></a><span style="font-weight:bold;">Rimstone compiler and utility</span><br/>
<a href='/rim.html'>rim</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='/documentation.html'>documentation</a><br/>
<a id='rimstone-license.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:left;background-color:white;'><a href='https://rimstone-lang.com' style='border-bottom:0px'><img src='https://rimstone-lang.com/rimstone.png' style='width:180px;height:auto'/></a></div><div class='vhub' style='margin-top:10px;'>Rimstone license</div><hr/><div class="vsub"><a id="Licensing and copyright"></a>Licensing and copyright</div>
RimStone is Free Open Source software licensed under <a href='https://www.apache.org/licenses/LICENSE-2.0'>Apache License 2</a>. <br/>
<div class="vsub"><a id="Discussion"></a>Discussion</div>
The following discussion is not legal advice. <br/>
<div class="vsub"><a id="Copyright"></a>Copyright</div>
RimStone is copyright (c) 2019-2025 Gliim LLC. RimStone uses the following Free Open Source libraries; their licenses are stated below and they are copyright by their respective owners. <br/>
<div class="vsub"><a id="Dynamically linked libraries"></a>Dynamically linked libraries</div>
RimStone makes use of the following dynamically-linked libraries (with copyright by their respective owners), and only if your application actually uses them:<br/>
<ul><li><a href='https://spdx.org/licenses/LGPL-2.1-or-later.html'>LGPL-licensed</a> MariaDB C connector (<a href='https://mariadb.com/kb/en/mariadb-connector-c/'>https://mariadb.com/kb/en/mariadb-connector-c/</a>),<br/>
</li><li><a href='https://spdx.org/licenses/PostgreSQL.html'>Postgres-licensed</a> Postgres C library (<a href='https://www.postgresql.org/docs/current/libpq.html'>https://www.postgresql.org/docs/current/libpq.html</a>),<br/>
</li><li><a href='https://www.sqlite.org/copyright.html'>SQLite (public domain)</a> SQLite C library (<a href='https://www.sqlite.org/docs.html'>https://www.sqlite.org/docs.html</a>),<br/>
</li><li><a href='https://spdx.org/licenses/curl.html'>Curl-licensed</a> Curl library (<a href='https://curl.se/'>https://curl.se/</a>),<br/>
</li><li><a href='https://www.pcre.org/original/license.txt'>BSD-licensed</a> PCRE2 (regex) library (<a href='https://www.pcre.org/'>https://www.pcre.org/</a>),<br/>
</li><li><a href='https://gitlab.gnome.org/GNOME/libxml2'>MIT-licensed</a> libXML2 library (<a href='https://gitlab.gnome.org/GNOME/libxml2'>https://gitlab.gnome.org/GNOME/libxml2</a>),<br/>
</li><li><a href='https://spdx.org/licenses/OpenSSL.html'>OpenSSL-licensed</a> OpenSSL/crypto library (<a href='https://www.openssl.org/'>https://www.openssl.org/</a>).</li></ul>
You would install these libraries yourself (they are not distributed with RimStone) as dependencies for compiling the source code. <br/>
<div class="vsub"><a id="Included libraries"></a>Included libraries</div>
RimStone incorporates the source code of the following libraries:<br/>
<ul><li><a href='https://spdx.org/licenses/BSD-3-Clause.html'>BSD 3 Clause Licensed</a> libbacktrace (<a href='https://github.com/ianlancetaylor/libbacktrace'>https://github.com/ianlancetaylor/libbacktrace/</a>). Copyright (C) 2012-2016 Free Software Foundation, Inc. See btrace subdirectory for its LICENSE file with the copyright notice.<br/>
</li><li><a href='https://spdx.org/licenses/preview/OML.html'>Open Market Licensed</a> FastCGI library (<a href='https://fastcgi-archives.github.io/FastCGI_Developers_Kit_FastCGI.html'>https://fastcgi-archives.github.io/FastCGI_Developers_Kit_FastCGI.html</a>). See fcgi subdirectory for its LICENSE file with the copyright notice.</li></ul>
<div class="vsub"><a id="Algorithms"></a>Algorithms</div>
RimStone uses FNV-1a hash function, which is released in the public domain (see <a href='https://en.wikipedia.org/wiki/Fowler%E2%80%93Noll%E2%80%93Vo_hash_function'>wikipedia page</a>) and is not patented (see <a href='http://www.isthe.com/chongo/tech/comp/fnv/index.html'>Landon Noll's</a> web page).<br/>
<div class="vsub"><a id="Copyright in RimStone source code"></a>Copyright in RimStone source code</div>
RimStone source code uses <a href='https://spdx.dev/'>SPDX</a>, an open ISO standard for communicating software bill of material information (such as licenses), to improve on open source licensing compliance for companies and communities.<br/>
<div class="vsub"><a id="See also"></a>See also</div>
 <a name='License'></a><span style="font-weight:bold;">License</span><br/>
<a href='/rimstone-license.html'>rimstone-license</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='/documentation.html'>documentation</a><br/>
<a id='rollback-transaction.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:left;background-color:white;'><a href='https://rimstone-lang.com' style='border-bottom:0px'><img src='https://rimstone-lang.com/rimstone.png' style='width:180px;height:auto'/></a></div><div class='vhub' style='margin-top:10px;'>Rollback transaction</div><hr/><span style="font-weight:bold;">Purpose</span>: Rollbacks a SQL transaction.<br/>
<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_997' class=notranslate>
<span class="Statement">rollback-transaction</span> [ @&lt;database&gt; ] \
    [<span class="Identifier"> on-error-continue</span> |<span class="Identifier"> on-error-exit</span> ] \
    [<span class="Type"> error</span> &lt;error&gt; ] [<span class="Type"> error-text</span> &lt;error text&gt; ] \
    [<span class="Identifier"> options</span> &lt;options&gt; ]</pre>
<span id=rimstone_copied_997 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_997' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_997, code_997, rimstone_copied_997)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
rollback-transaction will roll back a transaction started with <a href='/begin-transaction.html'>begin-transaction</a>. <br/>
<br/>
&lt;options&gt; (in "options" clause) is any additional options to send to database you wish to supply for this functionality.<br/>
<br/>
Once you start a transaction with <a href='/begin-transaction.html'>begin-transaction</a>, you must either commit it with <a href='/commit-transaction.html'>commit-transaction</a> or rollback with <a href='/rollback-transaction.html'>rollback-transaction</a>. If you do neither, your transaction will be rolled back once the <a href='/request.html'>request</a> has completed and your program will stop with an error message. This is because opening a transaction and leaving without committing or a rollback is a bug in your program. &nbsp;<br/>
<br/>
You must use begin-transaction, commit-transaction and rollback-transaction instead of calling this functionality through <a href='/run-query.html'>run-query</a>.<br/>
<div class="vsub"><a id="Database"></a>Database</div>
&lt;database&gt; is specified in "@" clause and is the name of the <a href='/database-config-file.html'>database-config-file</a>. If omitted, your program must use exactly one database (see --db option in <a href='/rim.html'>rim</a>).<br/>
<div class="vsub"><a id="Error handling"></a>Error handling</div>
The error code is available in &lt;error&gt; variable in "error" clause - this code is always "0" if successful. The &lt;error&gt; code may or may not be a number but is always returned as a string value. In case of error, error text is available in "error-text" clause in &lt;error text&gt; string.<br/>
<br/>
"on-error-continue" clause specifies that <a href='/request.html'>request</a> processing will continue in case of an error, whereas "on-error-exit" clause specifies that it will exit. This setting overrides database-level <a href='/db-error.html'>db-error</a> for this specific statement only. If you use "on-error-continue", be sure to check the error code.<br/>
<br/>
Note that if database connection was lost, and could not be reestablished, the request will error out (see <a href='/error-handling.html'>error-handling</a>).<br/>
<div class="vsub"><a id="Examples"></a>Examples</div>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_998' class=notranslate>
<span class="Statement">begin-transaction</span> @mydb
<span class="Statement">run-query</span> @mydb=<span class="Constant">&quot;insert into employee (name, dateOfHire) values ('Terry', now())&quot;</span>
<span class="Statement">run-query</span> @mydb=<span class="Constant">&quot;insert into payroll (name, salary) values ('Terry', 100000)&quot;</span>
<span class="Statement">rollback-transaction</span> @mydb</pre>
<span id=rimstone_copied_998 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_998' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_998, code_998, rimstone_copied_998)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<div class="vsub"><a id="See also"></a>See also</div>
 <a name='Database'></a><span style="font-weight:bold;">Database</span><br/>
<a href='/begin-transaction.html'>begin-transaction</a> &nbsp;<br/>
<a href='/commit-transaction.html'>commit-transaction</a> &nbsp;<br/>
<a href='/current-row.html'>current-row</a> &nbsp;<br/>
<a href='/database-config-file.html'>database-config-file</a> &nbsp;<br/>
<a href='/db-error.html'>db-error</a> &nbsp;<br/>
<a href='/mariadb-database.html'>mariadb-database</a> &nbsp;<br/>
<a href='/postgresql-database.html'>postgresql-database</a> &nbsp;<br/>
<a href='/rollback-transaction.html'>rollback-transaction</a> &nbsp;<br/>
<a href='/run-query.html'>run-query</a> &nbsp;<br/>
<a href='/sqlite-database.html'>sqlite-database</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='/documentation.html'>documentation</a><br/>
<a id='round.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:left;background-color:white;'><a href='https://rimstone-lang.com' style='border-bottom:0px'><img src='https://rimstone-lang.com/rimstone.png' style='width:180px;height:auto'/></a></div><div class='vhub' style='margin-top:10px;'>Round</div><hr/><span style="font-weight:bold;">Purpose</span>: Round function.<br/>
<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_999' class=notranslate>
round( &lt;var&gt; )</pre>
<span id=rimstone_copied_999 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_999' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_999, code_999, rimstone_copied_999)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
round returns the rounded value of &lt;var&gt;, where "rounded" means to the nearest number. When &lt;var&gt; is half way between numbers, round() moves away from zero. &lt;var&gt; is a number or a double and the result is a double.<br/>
<div class="vsub"><a id="Examples"></a>Examples</div>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_1000' class=notranslate>
<span class="Statement">set-double</span> d = round(<span class="Constant">1</span>) + <span class="Constant">1</span></pre>
<span id=rimstone_copied_1000 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_1000' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_1000, code_1000, rimstone_copied_1000)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<div class="vsub"><a id="See also"></a>See also</div>
 <a name='Math functions'></a><span style="font-weight:bold;">Math functions</span><br/>
<a href='/abd.html'>abd</a> &nbsp;<br/>
<a href='/abn.html'>abn</a> &nbsp;<br/>
<a href='/acos.html'>acos</a> &nbsp;<br/>
<a href='/acosh.html'>acosh</a> &nbsp;<br/>
<a href='/asin.html'>asin</a> &nbsp;<br/>
<a href='/asinh.html'>asinh</a> &nbsp;<br/>
<a href='/atan.html'>atan</a> &nbsp;<br/>
<a href='/atan2.html'>atan2</a> &nbsp;<br/>
<a href='/atanh.html'>atanh</a> &nbsp;<br/>
<a href='/cbrt.html'>cbrt</a> &nbsp;<br/>
<a href='/ceil.html'>ceil</a> &nbsp;<br/>
<a href='/copysign.html'>copysign</a> &nbsp;<br/>
<a href='/cos.html'>cos</a> &nbsp;<br/>
<a href='/cosh.html'>cosh</a> &nbsp;<br/>
<a href='/dbl.html'>dbl</a> &nbsp;<br/>
<a href='/erf.html'>erf</a> &nbsp;<br/>
<a href='/erfc.html'>erfc</a> &nbsp;<br/>
<a href='/exp.html'>exp</a> &nbsp;<br/>
<a href='/exp2.html'>exp2</a> &nbsp;<br/>
<a href='/floor.html'>floor</a> &nbsp;<br/>
<a href='/fmod.html'>fmod</a> &nbsp;<br/>
<a href='/hypot.html'>hypot</a> &nbsp;<br/>
<a href='/isinf.html'>isinf</a> &nbsp;<br/>
<a href='/isnan.html'>isnan</a> &nbsp;<br/>
<a href='/ldexp.html'>ldexp</a> &nbsp;<br/>
<a href='/lgamma.html'>lgamma</a> &nbsp;<br/>
<a href='/log.html'>log</a> &nbsp;<br/>
<a href='/log10.html'>log10</a> &nbsp;<br/>
<a href='/log2.html'>log2</a> &nbsp;<br/>
<a href='/math-functions.html'>math-functions</a> &nbsp;<br/>
<a href='/nextafter.html'>nextafter</a> &nbsp;<br/>
<a href='/num.html'>num</a> &nbsp;<br/>
<a href='/pow.html'>pow</a> &nbsp;<br/>
<a href='/round.html'>round</a> &nbsp;<br/>
<a href='/sin.html'>sin</a> &nbsp;<br/>
<a href='/sinh.html'>sinh</a> &nbsp;<br/>
<a href='/sqrt.html'>sqrt</a> &nbsp;<br/>
<a href='/tan.html'>tan</a> &nbsp;<br/>
<a href='/tanh.html'>tanh</a> &nbsp;<br/>
<a href='/trunc.html'>trunc</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='/documentation.html'>documentation</a><br/>
<a id='run-query.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:left;background-color:white;'><a href='https://rimstone-lang.com' style='border-bottom:0px'><img src='https://rimstone-lang.com/rimstone.png' style='width:180px;height:auto'/></a></div><div class='vhub' style='margin-top:10px;'>Run query</div><hr/><span style="font-weight:bold;">Purpose</span>: Execute a query and loop through result set.<br/>
<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_1001' class=notranslate>
<span class="Statement">run-query</span> \
    [ @&lt;database&gt; ] \
    = &lt;query text&gt; \
    [<span class="Identifier"> input</span> &lt;input parameter&gt; [ , ... ] ] \
    [<span class="Type"> output</span> ( &lt;column name&gt; [<span class="Identifier"> noencode</span> | urlencode | webencode ] ) [ , ... ] ] \
    [<span class="Identifier"> no-loop</span> ] \
    [<span class="Type"> error</span> &lt;error&gt; ] \
    [<span class="Type"> error-text</span> &lt;error text&gt; ] \
    [<span class="Type"> affected-rows</span> &lt;affected rows&gt; ] \
    [<span class="Type"> row-count</span> &lt;row count&gt; ] \
    [<span class="Identifier"> on-error-continue</span> |<span class="Identifier"> on-error-exit</span> ]

    &lt;any code&gt;

[ end-query ]

<span class="Statement">run-prepared-query</span> \
    ... ( the same as run-query ) ...</pre>
<span id=rimstone_copied_1001 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_1001' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_1001, code_1001, rimstone_copied_1001)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
run-query executes a query specified with string &lt;query text&gt;.<br/>
<div class="vsub"><a id="Database"></a>Database</div>
&lt;database&gt; is specified in "@" clause and is the name of the <a href='/database-config-file.html'>database-config-file</a>. If omitted, your program must use exactly one database (see --db option in <a href='/rim.html'>rim</a>).<br/>
<div class="vsub"><a id="Output"></a>Output</div>
<span style="font-weight:bold;">- output clause</span><br/>
"output" clause is a comma-delimited list of the query's output columns. The column names do not need to match the actual query column names, rather you can name them anyway you want, as long as they positionally correspond. String variables with the same name are created for each column name and query's output assigned to them. For example:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_1003' class=notranslate>
<span class="Statement">run-query</span> @db = <span class="Constant">&quot;select firstName, lastName from employees&quot;</span><span class="Type"> output</span> first_name, last_name
<span class="Statement">    @</span>First name <span class="Statement">&lt;&lt;print-out</span> first_name<span class="Statement">&gt;&gt;</span>
<span class="Statement">    @</span>Last name <span class="Statement">&lt;&lt;print-out</span> last_name<span class="Statement">&gt;&gt;</span>
<span class="Statement">end-loop</span></pre>
<span id=rimstone_copied_1003 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_1003' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_1003, code_1003, rimstone_copied_1003)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Note that the output is by default web-encoded. You can set the encoding of column output by using either "noencode" (for no encoding), "urlencode" (for URL-encoding) or "webencode" (for web-encoding) clause right after column name (see <a href='/encode-web.html'>encode-web</a>, <a href='/encode-url.html'>encode-url</a> for description of encodings). For example, here the first output column will not be encoded, and the second will be URL-encoded:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_1004' class=notranslate>
<span class="Statement">run-query</span> @db = <span class="Constant">&quot;select firstName, lastName from employees&quot;</span><span class="Type"> output</span> first_name<span class="Identifier"> noencode</span>, last_name urlencode
<span class="Statement">    @</span>First name <span class="Statement">&lt;&lt;print-out</span> first_name<span class="Statement">&gt;&gt;</span>
<span class="Statement">    @</span>Last name <span class="Statement">&lt;&lt;print-out</span> last_name<span class="Statement">&gt;&gt;</span>
<span class="Statement">end-loop</span></pre>
<span id=rimstone_copied_1004 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_1004' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_1004, code_1004, rimstone_copied_1004)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<div class="vsub"><a id="Input"></a>Input</div>
The query's input parameters (if any) are specified with '%s' in the &lt;query text&gt; (note that single quotes must be included). The actual input parameters are provided after "input" clause (you can instead use semicolon, i.e. ":"), in a comma-separated list. Each input variable is a string regardless of the actual column type, as the database engine will interpret the data according to its usage. Each input variable is trimmed (left and right) before used in a query. <br/>
<div class="vsub"><a id="Looping through data"></a>Looping through data</div>
"end-query" statement ends the loop in which query results are available through "output" clause. "no-loop" clause includes implicit "end-query", and in that case no "end-query" statement can be used. This is useful if you don't want to access any output columns (or there aren't any), but rather only affected rows (in INSERT or UPDATE for example), row count (in SELECT) or error code. "end-query" is also unnecessary for DDL statements like "CREATE INDEX" for instance.<br/>
<div class="vsub"><a id="Affected rows"></a>Affected rows</div>
"affected-rows" clause provides the number of &lt;affected rows&gt; (such as number of rows inserted by INSERT). The number of rows affected is typically used for DML operations such as INSERT, UPDATE or DELETE. For SELECT, it may or may not be the same as "row-count" which returns the number of rows from a query. See your database documentation for more. <br/>
<div class="vsub"><a id="Rows returned"></a>Rows returned</div>
The number of rows returned by a query can be obtained in &lt;row count&gt; in "row-count" clause. <br/>
<div class="vsub"><a id="Error handling"></a>Error handling</div>
The error code is available in &lt;error&gt; variable in "error" clause - this code is always "0" if successful. The &lt;error&gt; code may or may not be a number but is always returned as a string value. In case of error, error text is available in "error-text" clause in &lt;error text&gt; string.<br/>
<br/>
"on-error-continue" clause specifies that <a href='/request.html'>request</a> processing will continue in case of an error, whereas "on-error-exit" clause specifies that it will exit. This setting overrides database-level <a href='/db-error.html'>db-error</a> for this specific statement only. If you use "on-error-continue", be sure to check the error code.<br/>
<br/>
Note that if database connection was lost, and could not be reestablished, the request will error out (see <a href='/error-handling.html'>error-handling</a>).<br/>
<div class="vsub"><a id="Space before = and @"></a>Space before = and @</div>
"=" and "@" clauses may or may not have a space before the data that follows. So for example, these are both valid:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_1005' class=notranslate>
<span class="Comment">// No space after </span><span class="Constant">&quot;@&quot;</span><span class="Comment"> and </span><span class="Constant">&quot;=&quot;</span>
<span class="Statement">run-query</span> @db =<span class="Constant">&quot;select firstName, lastName from employee where employeeId='</span><span class="Special">%s</span><span class="Constant">'&quot;</span><span class="Type"> output</span> firstName, lastName<span class="Identifier"> input</span> empid

<span class="Comment">// Space after </span><span class="Constant">&quot;@&quot;</span><span class="Comment"> and </span><span class="Constant">&quot;=&quot;</span>
<span class="Statement">run-query</span><span class="Identifier"> @</span> db = <span class="Constant">&quot;select firstName, lastName from employee where employeeId='</span><span class="Special">%s</span><span class="Constant">'&quot;</span><span class="Type"> output</span> firstName, lastName<span class="Identifier"> input</span> empid</pre>
<span id=rimstone_copied_1005 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_1005' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_1005, code_1005, rimstone_copied_1005)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<div class="vsub"><a id="run-prepared-query"></a>run-prepared-query</div>
run-prepared-query is the same as run-query except that a &lt;query&gt; is prepared. That means it is pre-compiled and its execution plan is created once, instead of each time a query executes. The statement is cached going forward for the life of the process (with the rare exception of re-establishing a lost database connection). It means effectively an unlimited number of requests will be reusing the query statement, which generally implies higher performance. Note that databases do not allow prepared queries for DDL (Data Definition Language), as there is not much benefit in general, hence only DML queries (such as INSERT, DELETE etc.) and SELECT can be prepared.<br/>
<br/>
In order for database to cache a query statement, RimStone will save query text that actually executes the very first time it runs. Then, regardless of what query text you supply in the following executions, it will not mutate anymore. It means from that moment onward, the query will always execute that very same query text, just with different input parameters. In practicallity it means that &lt;query&gt; should be a string constant if you are using a prepared query (which is usually the case).<br/>
<br/>
In some cases, you might not want to use prepared statements. Some reasons may be: <br/>
<ul><li>your statements are often changing and dynamically constructed to the point where managing a great many equivalent prepared statements may be impractical - for example there may be a part of your query text that comes from outside your code,<br/>
</li><li>your dynamic statements do not execute as many times, which makes prepared statements slower, since they require two trips to the database server to begin with,<br/>
</li><li>your query cannot be written as a prepared statement due to database restrictions,<br/>
</li><li>in some cases prepared statements are slower because the execution plan depends on the actual data used, in which case non-prepared statement may be a better choice,<br/>
</li><li>in some cases the database support for prepared statements may still have issues compared to non-prepared,<br/>
</li><li>typically prepared statements do not use database query cache, so repeating identical queries with identical input data may be faster without them.</li></ul>
Note that in Postgres, with prepared statements you may get an error like "could not determine data type of parameter $N". This is an issue with Postgres server. In this case you can use "::&lt;type&gt;" qualifier, such as for instance to tell Postgres the input parameter is text:<br/>
<div class='sqlcode' style='position:relative;padding-right:16px;'>
<pre id='code_1002' class=notranslate>
<span class="Statement">select</span> col1 <span class="Special">from</span> test <span class="Special">where</span> someId&gt;=<span class="Special">'</span><span class="Constant">%s</span><span class="Special">'</span> <span class="Statement">and</span> col1 <span class="Statement">like</span> <span class="Identifier">concat</span>( <span class="Special">'</span><span class="Constant">%s</span><span class="Special">'</span>::text ,<span class="Special">'</span><span class="Constant">%</span><span class="Special">'</span>)</pre>
<span id=rimstone_copied_1002 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_1002' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_1002, code_1002, rimstone_copied_1002)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Note that SQL statements in SQLite are always prepared regardless of whether you use "run-query" or "run-prepared-query" due to how SQLite native interface works.<br/>
<div class="vsub"><a id="Examples"></a>Examples</div>
Select first and last name (output is firstName and lastName) based on employee ID (specified by input parameter empid):<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_1006' class=notranslate>
<span class="Statement">get-param</span> empid
<span class="Statement">run-query</span> @db = <span class="Constant">&quot;select firstName, lastName from employee where employeeId='</span><span class="Special">%s</span><span class="Constant">'&quot;</span><span class="Type"> output</span> firstName, lastName<span class="Identifier"> input</span> empid
<span class="Statement">    @</span>Employee is <span class="Statement">&lt;&lt;print-out</span>  firstName<span class="Statement">&gt;&gt;</span> <span class="Statement">&lt;&lt;print-out</span> lastName<span class="Statement">&gt;&gt;</span>
<span class="Statement">end-query</span></pre>
<span id=rimstone_copied_1006 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_1006' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_1006, code_1006, rimstone_copied_1006)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Prepared query without a loop and obtain error code and affected rows:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_1007' class=notranslate>
<span class="Statement">run-prepared-query</span> @db = qry<span class="Identifier"> no-loop</span> \
   <span class="Type"> error</span> ecode<span class="Type"> affected-rows</span> arows<span class="Identifier"> input</span> stock_name, stock_price, stock_price</pre>
<span id=rimstone_copied_1007 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_1007' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_1007, code_1007, rimstone_copied_1007)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<div class="vsub"><a id="See also"></a>See also</div>
 <a name='Database'></a><span style="font-weight:bold;">Database</span><br/>
<a href='/begin-transaction.html'>begin-transaction</a> &nbsp;<br/>
<a href='/commit-transaction.html'>commit-transaction</a> &nbsp;<br/>
<a href='/current-row.html'>current-row</a> &nbsp;<br/>
<a href='/database-config-file.html'>database-config-file</a> &nbsp;<br/>
<a href='/db-error.html'>db-error</a> &nbsp;<br/>
<a href='/mariadb-database.html'>mariadb-database</a> &nbsp;<br/>
<a href='/postgresql-database.html'>postgresql-database</a> &nbsp;<br/>
<a href='/rollback-transaction.html'>rollback-transaction</a> &nbsp;<br/>
<a href='/run-query.html'>run-query</a> &nbsp;<br/>
<a href='/sqlite-database.html'>sqlite-database</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='/documentation.html'>documentation</a><br/>
<a id='run-remote.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:left;background-color:white;'><a href='https://rimstone-lang.com' style='border-bottom:0px'><img src='https://rimstone-lang.com/rimstone.png' style='width:180px;height:auto'/></a></div><div class='vhub' style='margin-top:10px;'>Run remote</div><hr/><span style="font-weight:bold;">Purpose</span>: Call a remote service in a single statement.<br/>
<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_1008' class=notranslate>
<span class="Statement">run-remote</span> &lt;service&gt; \
    (<span class="Identifier"> local</span> &lt;app name&gt; ) | (<span class="Identifier"> location</span> &lt;location&gt; ) \
   <span class="Identifier"> url-path</span> &lt;service URL&gt; |
        ( \
       <span class="Identifier"> app-path</span> &lt;app path&gt; \
       <span class="Identifier"> request-path</span> &lt;request path&gt; \
        [<span class="Identifier"> url-params</span> &lt;url params&gt; ] \
        ) \
    [<span class="Identifier"> request-body content</span> &lt;content&gt; \
        [<span class="Identifier"> content-length</span> &lt;content length&gt; ] \
        [<span class="Identifier"> content-type</span> &lt;content type&gt; ] ] \
    [<span class="Identifier"> method</span> &lt;request method&gt; ] \
    [<span class="Identifier"> environment</span> &lt;name&gt;=&lt;value&gt; [<span class="Statement"> ,</span> ... ] ] \
    [<span class="Identifier"> timeout</span> &lt;timeout&gt; ]\
    [<span class="Type"> status</span> &lt;status&gt; ]  \
    [<span class="Identifier"> started</span> &lt;started&gt; ] \
    [<span class="Identifier"> finished-okay</span> &lt;finished okay&gt; ]\
    [<span class="Identifier"> data</span> &lt;data&gt; ] \
    [<span class="Type"> error</span> &lt;error&gt; ] \
    [<span class="Type"> status</span> &lt;status&gt; ] \
    [<span class="Identifier"> status-text</span> &lt;status text&gt; ] \
    [<span class="Identifier"> exit-status</span> &lt;service status&gt; ]</pre>
<span id=rimstone_copied_1008 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_1008' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_1008, code_1008, rimstone_copied_1008)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<br/>
run-remote is a combination of <a href='/new-remote.html'>new-remote</a>, <a href='/call-remote.html'>call-remote</a> and <a href='/read-remote.html'>read-remote</a> in one. Clauses for each of those can be specified in any order. Only a single &lt;service&gt; can be used. If a call to &lt;service&gt; succeeds, its results are read. Use either:<br/>
<ul><li>&lt;status&gt; (in "status" clause) to check if there are results to be read: if it is RIM_OKAY, then you can use the results.<br/>
</li><li>&lt;finished okay&gt; (in "finished-okay" clause) to check if service call executed: if it's 1, then it has.</li></ul>
See details for each clause in <a href='/new-remote.html'>new-remote</a> (for "local" through "timeout" clauses), <a href='/call-remote.html'>call-remote</a> (for "status" through "finished-okay" clauses) and <a href='/read-remote.html'>read-remote</a> (for "data" through "exit-status" clauses).<br/>
<div class="vsub"><a id="Examples"></a>Examples</div>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_1009' class=notranslate>
<span class="Statement">begin-handler</span> /serv<span class="Identifier"> public</span>
<span class="Statement">    run-remote</span> nf<span class="Identifier"> local</span> <span class="Constant">&quot;hash-server-yey&quot;</span> \
       <span class="Identifier"> url-path</span> <span class="Constant">&quot;/hash-server-yey/server/op=add/key=sb_XYZ/data=sdb_123&quot;</span> \
       <span class="Identifier"> finished-okay</span> sfok \
       <span class="Identifier"> data</span> rdata<span class="Identifier"> error</span> edata  \
       <span class="Identifier"> status</span> st<span class="Identifier"> exit-status</span> rstatus
<span class="Statement">    if-true</span> sfok <span class="Identifier"> not-equal</span>  <span class="Constant">1</span><span class="Identifier"> or</span> st <span class="Identifier"> not-equal</span>  RIM_OKAY
<span class="Statement">        @</span>Call did not succeed
<span class="Statement">    else-if</span>
<span class="Statement">        @</span>Result is <span class="Statement">&lt;&lt;print-out</span> rdata&gt; and (any) error is <span class="Statement">&lt;&lt;print-out</span> edata<span class="Statement">&gt;&gt;</span>
<span class="Statement">    end-if</span>

<span class="Statement">end-handler</span></pre>
<span id=rimstone_copied_1009 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_1009' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_1009, code_1009, rimstone_copied_1009)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<div class="vsub"><a id="See also"></a>See also</div>
 <a name='Distributed computing'></a><span style="font-weight:bold;">Distributed computing</span><br/>
<a href='/call-remote.html'>call-remote</a> &nbsp;<br/>
<a href='/new-remote.html'>new-remote</a> &nbsp;<br/>
<a href='/read-remote.html'>read-remote</a> &nbsp;<br/>
<a href='/run-remote.html'>run-remote</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='/documentation.html'>documentation</a><br/>
<a id='scan-string.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:left;background-color:white;'><a href='https://rimstone-lang.com' style='border-bottom:0px'><img src='https://rimstone-lang.com/rimstone.png' style='width:180px;height:auto'/></a></div><div class='vhub' style='margin-top:10px;'>Scan string</div><hr/><span style="font-weight:bold;">Purpose</span>: Scans string for another string or a character.<br/>
<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_1010' class=notranslate>
<span class="Statement">scan-string</span> &lt;string&gt; [<span class="Identifier"> start-with</span> &lt;start with&gt; ] [<span class="Identifier"> length</span> &lt;length&gt; ] \
   <span class="Identifier"> for</span> &lt;for string&gt; \
   <span class="Type"> status</span> &lt;status&gt;</pre>
<span id=rimstone_copied_1010 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_1010' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_1010, code_1010, rimstone_copied_1010)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
scan-string will search &lt;string&gt; for &lt;for string&gt; (which can be a string or character such as 'A' for instance) specified in "for" clause.<br/>
<br/>
If "start-with" clause is used, then the first byte to start the scan from is &lt;start with&gt;; with the very first byte being specified as 0.<br/>
<br/>
If "length" clause is used, then only the &lt;length&gt; bytes are scanned, starting either from the beginning of &lt;string&gt; or from byte &lt;start with&gt; if "start-with" clause is specified.<br/>
<br/>
&lt;status&gt; in "status" clause will be the byte position from the beginning of &lt;string&gt; where &lt;for string&gt; is found, or RIM_ERR_POSITION if &lt;for string&gt; is not found.<br/>
<div class="vsub"><a id="Examples"></a>Examples</div>
Getting the byte position of a string:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_1011' class=notranslate>
<span class="Statement">set-string</span> s = <span class="Constant">&quot;wow this is a string!&quot;</span>
<span class="Statement">scan-string</span> s<span class="Identifier"> start-with</span> <span class="Constant">3</span><span class="Identifier"> length</span> <span class="Constant">13</span><span class="Identifier"> for</span> <span class="Constant">&quot;this&quot;</span><span class="Type"> status</span> pos
<span class="Statement">if-true</span> pos<span class="Identifier"> equal</span> <span class="Constant">4</span>
<span class="Statement">    @</span>Found string where it should be!
<span class="Statement">end-if</span></pre>
<span id=rimstone_copied_1011 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_1011' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_1011, code_1011, rimstone_copied_1011)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Getting the byte position of a character:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_1012' class=notranslate>
<span class="Statement">set-string</span> s = <span class="Constant">&quot;wow this is a string!&quot;</span>
<span class="Statement">scan-string</span> s<span class="Identifier"> for</span> 'g'<span class="Type"> status</span> pos
<span class="Statement">if-true</span> pos<span class="Identifier"> equal</span> <span class="Constant">19</span>
<span class="Statement">    @</span>Found character where it should be!
<span class="Statement">end-if</span></pre>
<span id=rimstone_copied_1012 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_1012' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_1012, code_1012, rimstone_copied_1012)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<div class="vsub"><a id="See also"></a>See also</div>
 <a name='Strings'></a><span style="font-weight:bold;">Strings</span><br/>
<a href='/copy-string.html'>copy-string</a> &nbsp;<br/>
<a href='/count-substring.html'>count-substring</a> &nbsp;<br/>
<a href='/delete-string.html'>delete-string</a> &nbsp;<br/>
<a href='/double-string.html'>double-string</a> &nbsp;<br/>
<a href='/lower-string.html'>lower-string</a> &nbsp;<br/>
<a href='/match-regex.html'>match-regex</a> &nbsp;<br/>
<a href='/new-string.html'>new-string</a> &nbsp;<br/>
<a href='/number-string.html'>number-string</a> &nbsp;<br/>
<a href='/read-split.html'>read-split</a> &nbsp;<br/>
<a href='/replace-string.html'>replace-string</a> &nbsp;<br/>
<a href='/scan-string.html'>scan-string</a> &nbsp;<br/>
<a href='/set-string.html'>set-string</a> &nbsp;<br/>
<a href='/split-string.html'>split-string</a> &nbsp;<br/>
<a href='/string-double.html'>string-double</a> &nbsp;<br/>
<a href='/string-expressions.html'>string-expressions</a> &nbsp;<br/>
<a href='/string-length.html'>string-length</a> &nbsp;<br/>
<a href='/string-number.html'>string-number</a> &nbsp;<br/>
<a href='/trim-string.html'>trim-string</a> &nbsp;<br/>
<a href='/upper-string.html'>upper-string</a> &nbsp;<br/>
<a href='/write-string.html'>write-string</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='/documentation.html'>documentation</a><br/>
<a id='SELinux.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:left;background-color:white;'><a href='https://rimstone-lang.com' style='border-bottom:0px'><img src='https://rimstone-lang.com/rimstone.png' style='width:180px;height:auto'/></a></div><div class='vhub' style='margin-top:10px;'>SELinux</div><hr/>If you do not use SELinux, you can ignore this. <br/>
<br/>
SELinux is MAC (Mandatory Access Control) system, which means anything that isn't allowed is prohibited. This is as opposed to DAC, Discretionary Access Control, where everything is allowed except what's prohibited. MAC generally works on top of DAC, and they are expected to work in a complementary fashion. RimStone deploys both methods for enhanced security.<br/>
<br/>
RimStone comes with a SELinux policy out-of-the-box, which covers its general functioning. However, you can write any code with RimStone, and if you are using SELinux, you may run afoul of its other policies, which may not be conducive to your code. In that case, use temporarily a permissive mode (via setenforce), and then audit2allow to get a clue on what is the issue and then take action to allow what's requested.<br/>
<br/>
Note that OpenSUSE package does not come with SELinux policy as of this release, because OpenSUSE at this time does not come with a default base policy and SELinux installation.<br/>
<br/>
<div class="vsub"><a id="General"></a>General</div>
RimStone policy files (including .te files) can be found here:<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_1013' class=notranslate>
<span class="Statement">ls</span> <span class="PreProc">$(</span><span class="Special">rim </span><span class="Special">-l</span><span class="PreProc">)</span>/selinux/</pre>
<span id=rimstone_copied_1013 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_1013' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_1013, code_1013, rimstone_copied_1013)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
As a part of installing RimStone, the following SELinux types will be installed:<br/>
<ul><li>rrfile_t: all files within RimStone directory ($HOME/.rimstone) are labeled with this type.<br/>
</li><li>rim_t: domain type (process type) of all RimStone executables that communicate with other processes (be it Unix or TCP sockets). Only files labeled rrfile_t can run as this process type.<br/>
</li><li>rrport_t: port type that any RimStone process is allowed to bind to, accept and listen. No other process types are allowed to do so.</ul>
RimStone policy:<br/>
<ul><li>allows RimStone processes unconfined access. This is expected as RimStone is a general purpose framework. It means you do not have to do anything to connect to database, use files, connect to other servers etc.<br/>
</li><li>allows web servers (httpd_t domain type) to connect to sockets labeled with rrfile_t, but does not allow any other access. This allows communication between reverse-proxy web servers and RimStone applications.<br/>
</li><li>allows web servers to connect to any RimStone process that is listening on a TCP port (see <a href='/rim.html'>rim</a>), but does not allow any other access (i.e. to any other ports).</ul>
RimStone policy allows normal functioning of RimStone features only, but does not introduce any unnecessary privileges to the rest of the system.<br/>
<br/>
Note: RimStone installation does not distribute .pp (compile) policy files, because it is not currently part of distro repos. Due to changes in SELinux and difference in versions installed across derived distros, RimStone will compile source .te files during the installation, ensuring the best possibility of successful SELinux policy setup.<br/>
<div class="vsub"><a id="Unix domain sockets"></a>Unix domain sockets</div>
Using Unix domain sockets for RimStone processes to communicate with a web server (see <a href='/rim.html'>rim</a>) is the default method and no further action is needed.<br/>
<div class="vsub"><a id="Unix TCP sockets"></a>Unix TCP sockets</div>
Using TCP sockets for RimStone processes to communicate with a web server (see <a href='/rim.html'>rim</a>) requires you to label such ports as rrport_t, for example if you plan to use port 2109:<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_1014' class=notranslate>
sudo semanage port <span class="Special">-a</span> <span class="Special">-t</span> rrport_t <span class="Special">-p</span> tcp  <span class="Constant">2109</span></pre>
<span id=rimstone_copied_1014 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_1014' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_1014, code_1014, rimstone_copied_1014)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
When you no longer need a port, for example if you are switching to another port (for instance 2209), remove the old one and add the new one:<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_1015' class=notranslate>
sudo semanage port <span class="Special">-d</span> <span class="Special">-t</span> rrport_t <span class="Special">-p</span> tcp  <span class="Constant">2109</span>
sudo semanage port <span class="Special">-a</span> <span class="Special">-t</span> rrport_t <span class="Special">-p</span> tcp  <span class="Constant">2209</span></pre>
<span id=rimstone_copied_1015 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_1015' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_1015, code_1015, rimstone_copied_1015)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<div class="vsub"><a id="Changing or adding directories"></a>Changing or adding directories</div>
If you are adding directories to be used by RimStone program, or changing a directory, for example using a different storage instead of "$HOME/.rimstone" (see <a href='/directories.html'>directories</a>), you need to label files in new directories:<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_1016' class=notranslate>
sudo semanage fcontext <span class="Special">-a</span> <span class="Special">-t</span> rrfile_t <span class="Statement">&quot;</span><span class="Constant">/your/new/dir(/.*)?</span><span class="Statement">&quot;</span>
sudo restorecon <span class="Special">-R</span> /your/new/dir</pre>
<span id=rimstone_copied_1016 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_1016' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_1016, code_1016, rimstone_copied_1016)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
To remove context from such directories (if you are not using them anymore), use:<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_1017' class=notranslate>
sudo semanage fcontext <span class="Special">-d</span> <span class="Special">-t</span> rrfile_t <span class="Statement">&quot;</span><span class="Constant">/your/new/dir(/.*)?</span><span class="Statement">&quot;</span>
sudo restorecon <span class="Special">-R</span> /your/new/dir</pre>
<span id=rimstone_copied_1017 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_1017' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_1017, code_1017, rimstone_copied_1017)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<div class="vsub"><a id="See also"></a>See also</div>
 <a name='SELinux'></a><span style="font-weight:bold;">SELinux</span><br/>
<a href='/SELinux.html'>SELinux</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='/documentation.html'>documentation</a><br/>
<a id='SEMI.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:left;background-color:white;'><a href='https://rimstone-lang.com' style='border-bottom:0px'><img src='https://rimstone-lang.com/rimstone.png' style='width:180px;height:auto'/></a></div><div class='vhub' style='margin-top:10px;'>SEMI</div><hr/>SEMI (SimplE Message Interface) is a binary format used to write (pack) and read (unpack) messages consisting of key/value pairs in the form of:<br/>
<div class='ncode' style='position:relative;padding-right:16px;'>
<pre id='code_1018' class=notranslate>
&lt;key&gt;=&lt;8 bytes reserved&gt;&lt;8 byte length of value&gt;&lt;value&gt;</pre>
<span id=rimstone_copied_1018 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_1018' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_1018, code_1018, rimstone_copied_1018)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
&lt;key&gt; can be comprised of any alphanumeric characters, spaces, underscores or hyphens, and any surrounding whitespaces are trimmed. &nbsp;<br/>
<br/>
Value is always preceded by a 8-byte length of value (as a binary number in big-endian 64bit format), followed by the value itself, followed by the new line ("\n") at the end which is not counted in length. A special &lt;key&gt; is "comment", which is always ignored, and serves the purpose of general commenting. <br/>
<br/>
SEMI implicitly supports binary data without the need for any kind of encoding, and the number of bytes is specified ahead of a value, making parsing efficient. <br/>
<div class="vsub"><a id="See also"></a>See also</div>
 <a name='Messages'></a><span style="font-weight:bold;">Messages</span><br/>
<a href='/get-message.html'>get-message</a> &nbsp;<br/>
<a href='/new-message.html'>new-message</a> &nbsp;<br/>
<a href='/read-message.html'>read-message</a> &nbsp;<br/>
<a href='/SEMI.html'>SEMI</a> &nbsp;<br/>
<a href='/write-message.html'>write-message</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='/documentation.html'>documentation</a><br/>
<a id='send-file.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:left;background-color:white;'><a href='https://rimstone-lang.com' style='border-bottom:0px'><img src='https://rimstone-lang.com/rimstone.png' style='width:180px;height:auto'/></a></div><div class='vhub' style='margin-top:10px;'>Send file</div><hr/><span style="font-weight:bold;">Purpose</span>: Send file to client.<br/>
<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_1019' class=notranslate>
<span class="Statement">send-file</span> &lt;file&gt; [<span class="Identifier"> headers</span> \
    [<span class="Identifier"> content-type</span> &lt;content type&gt; ] \
    [<span class="Identifier"> download</span> [ &lt;download&gt; ] ] \
    [<span class="Identifier"> etag</span> [ &lt;etag&gt; ] ] \
    [<span class="Identifier"> file-name</span> &lt;file name&gt; ] \
    [ (<span class="Identifier"> cache-control</span> &lt;cache control&gt; ) |<span class="Identifier"> no-cache</span> ] \
    [<span class="Identifier"> status-id</span> &lt;status id&gt; ] \
    [<span class="Identifier"> status-text</span> &lt;status text&gt; ] \
    [<span class="Identifier"> custom</span> &lt;header name&gt;=&lt;header value&gt; [ , ... ] ]
    <span class="Error">]</span></pre>
<span id=rimstone_copied_1019 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_1019' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_1019, code_1019, rimstone_copied_1019)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
When a client requests download of a file, you can use send-file to provide &lt;file&gt;, which is its location on the server, and is either a full path or relative to the application home directory (see <a href='/directories.html'>directories</a>). Note however that you can never use dot-dot (i.e. "..") in &lt;file&gt; - this is a security measure to avoid path-traversal attacks. Thus the file name should never have ".." in it, and if it does, the program will <a href='/error-handling.html'>error out</a>.<br/>
<div class="vsub"><a id="Headers"></a>Headers</div>
The following are subclauses that allow setting any custom header:<br/>
<ul><li>&lt;content type&gt; is content type (such as "text/html" or "image/jpg" etc.) If you are sending a file to a client for download and you don't know its content type, you can use "application/octet-stream" for a generic binary file.<br/>
</li><li>If "download" is used without boolean variable &lt;download&gt;, or if &lt;download&gt; evaluates to true, then the file is sent to a client for downloading - otherwise the default is to display file in client.<br/>
</li><li>&lt;file name&gt; is the name of the file being sent to a client. This is not the local file name - it is the file name that client will use for its own purposes.<br/>
</li><li>&lt;cache control&gt; is the cache control HTTP header. "no-cache" instructs the client not to cache. Only one of "cache-control" and "no-cache" can be used. An example of &lt;cache control&gt;:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_1020' class=notranslate>
<span class="Statement">send-file</span> <span class="Constant">&quot;somepic.jpg&quot;</span><span class="Identifier"> headers cache-control</span> <span class="Constant">&quot;max-age: 3600&quot;</span></pre>
<span id=rimstone_copied_1020 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_1020' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_1020, code_1020, rimstone_copied_1020)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
</li><li>If "etag" is used without boolean variable &lt;etag&gt;, or if &lt;etag&gt; evaluates to true, then "ETAG" header will be generated (a timestamp) and included, otherwise it is not. The time stamp is of last modification date of the file (and typically used to cache a file on client if it hasn't changed on the server). "etag" is useful to let the client know to download the file only once if it hasn't changed, thus saving network and computing resources. ETAG header is used only for <a href='/send-file.html'>send-file</a>.<br/>
</li><li>&lt;status id&gt; and &lt;status text&gt; are status settings for the response, as strings (such as "425" for "status-id" and "Too early" for "status-text"). <br/>
</li><li>To set any type of generic HTTP header, use "custom" subclause, where &lt;header name&gt; and &lt;header value&gt; represent the name and value of a single header. Multiple headers are separated by a comma. There is no limit on the maximum number of such headers, other than of the underyling HTTP protocol. You must not use "custom" to set headers already set elsewhere (such as "etag" for instance), as that may cause unpredictable behavior. For instance this sets two custom headers:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_1021' class=notranslate>
<span class="Statement">out-header</span><span class="Identifier"> use custom</span> <span class="Constant">&quot;CustomOption3&quot;</span>=<span class="Constant">&quot;CustomValue3&quot;</span>, <span class="Constant">&quot;Status&quot;</span>=<span class="Constant">&quot;418 I'm a teapot&quot;</span></pre>
<span id=rimstone_copied_1021 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_1021' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_1021, code_1021, rimstone_copied_1021)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
"custom" subclause lets you use any custom headers that exist today or may be added in the future, as well as any headers of your own design.</li></ul>
<div class="vsub"><a id="Cookies"></a>Cookies</div>
Any cookies set prior to send-file (see <a href='/set-cookie.html'>set-cookie</a> and <a href='/delete-cookie.html'>delete-cookie</a>) will be sent along with the file to the web client.<br/>
<div class="vsub"><a id="Examples"></a>Examples</div>
To send a document back to the browser and show it (i.e. display):<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_1022' class=notranslate>
<span class="Statement">send-file</span> <span class="Constant">&quot;/home/user/files/myfile.jpg&quot;</span><span class="Identifier"> headers content-type</span> <span class="Constant">&quot;image/jpg&quot;</span></pre>
<span id=rimstone_copied_1022 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_1022' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_1022, code_1022, rimstone_copied_1022)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
An example to display a PDF document:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_1023' class=notranslate>
<span class="Statement">set-string</span> pdf_doc=<span class="Constant">&quot;/home/mydir/myfile.pdf&quot;</span>
<span class="Statement">send-file</span> pdf_doc<span class="Identifier"> headers content-type</span> <span class="Constant">&quot;application/pdf&quot;</span></pre>
<span id=rimstone_copied_1023 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_1023' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_1023, code_1023, rimstone_copied_1023)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
If you want to send a file for download (with the dialog), use "download" clause. This way the document is not displayed but the "Save As" (or similar) window shows up, for example to download a "PDF" document:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_1024' class=notranslate>
<span class="Statement">send-file</span> <span class="Constant">&quot;/home/user/file.pdf&quot;</span><span class="Identifier"> headers download content-type</span> <span class="Constant">&quot;application/pdf&quot;</span></pre>
<span id=rimstone_copied_1024 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_1024' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_1024, code_1024, rimstone_copied_1024)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<div class="vsub"><a id="See also"></a>See also</div>
 <a name='Web'></a><span style="font-weight:bold;">Web</span><br/>
<a href='/call-web.html'>call-web</a> &nbsp;<br/>
<a href='/out-header.html'>out-header</a> &nbsp;<br/>
<a href='/send-file.html'>send-file</a> &nbsp;<br/>
<a href='/silent-header.html'>silent-header</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='/documentation.html'>documentation</a><br/>
<a id='Server-API.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:left;background-color:white;'><a href='https://rimstone-lang.com' style='border-bottom:0px'><img src='https://rimstone-lang.com/rimstone.png' style='width:180px;height:auto'/></a></div><div class='vhub' style='margin-top:10px;'>Server API</div><hr/>RimStone can be used in <a href='/extended-mode.html'>extended-mode</a>, where non-RimStone code or libraries can be linked with your application.<br/>
<br/>
Such code can be from a library (see --llflag and --cflag options in <a href='/rim.html'>rim</a>), or can be written directly as C code, i.e. files with .c and .h extension together with your RimStone application. To do this, use <a href='/call-extended.html'>call-extended</a> statement.<br/>
<br/>
Any function with C linkage can be used provided:<br/>
<ul><li>its parameters are (by value or reference) only of type: "int64_t" (number type in RimStone), "bool" (bool type in RimStone) or "char *" (string type in RimStone).<br/>
</li><li>it must not return any value (i.e. it must have a "void" return type).</li></ul>
When allocating strings in extended code, you must use RimStone memory management functions. These functions are based on standard C library (such as malloc or free), but are not compatible with them because RimStone manages such memory on top of the standard C library.<br/>
<br/>
The functions you can use are:<br/>
<ul><li><span style="font-weight:bold;">char *rim_strdup (char *s)</span> which creates a copy of a null-terminated string "s". A pointer to memory data is returned.<br/>
<br/>
</li><li><span style="font-weight:bold;">char *rim_strdupl (char *s, rim_num from, rim_num l)</span> which creates a copy of memory data pointed to by "s", starting from byte "from" of length "l". Note that "from" is indexed from 0. A pointer to memory data is returned.<br/>
<br/>
</li><li><span style="font-weight:bold;">void *rim_malloc(size_t size)</span> which allocates memory of size "s" and returns a pointer to it.<br/>
<br/>
</li><li><span style="font-weight:bold;">void *rim_calloc(size_t nmemb, size_t size)</span> allocates "nmemb" blocks of memory (each of size "size") and returns a pointer to it. Memory is initialized to all zero bytes.<br/>
<br/>
</li><li><span style="font-weight:bold;">num rim_mem_get_id (void *ptr)</span> returns RimStone memory handle for memory "ptr".<br/>
<br/>
</li><li><span style="font-weight:bold;">void *rim_realloc(rim_num r, size_t size)</span> reallocates memory identified with RimStone memory handle "r" (see rim_mem_get_id()) to a new size of "size" and returns a pointer to it. Note that you can only reallocate the memory you created with rim_malloc() and rim_calloc() - do not attempt to reallocate RimStone memory passed to your function. RimStone in general never reallocates any existing memory in any statement.<br/>
<br/>
</li><li><span style="font-weight:bold;">void rim_mem_set_len (rim_num r, rim_num len)</span> sets the length of memory identified with RimStone memory handle "r" to "len" bytes. Note that all RimStone memory must have a null-byte at the end for consistency, regardless of whether such memory holds pure binary data or an actual null-delimited string. So for example, a string "abc" would have "len" set to 4 to include a null byte, and binary data "\xFF\x00\x01" (which consists of 3 bytes, the middle of which is a null byte) would have "len" also set to 4 and you would place an extra zero byte at the end of it even if it's not part of the actual useful data. Note that whatever memory length you set, it must be lesser or equal to the length of memory you have actually allocated.<br/>
<br/>
</li><li><span style="font-weight:bold;">num rim_mem_get_len (rim_num r)</span> returns the length of memory identified with RimStone memory handle "r". The length returned is 1 bytes less than the memory set by rim_mem_set_len(), so for example for string "abc" the return value would be 3, as it would be for "\xFF\x00\x01".</li></ul>
<br/>
You can use rim_malloc(), rim_calloc() and rim_realloc() to create new RimStone-compatible memory - and assuming you have set the last byte of any such memory to a null byte, the resulting memory will be properly sized for RimStone usage. <br/>
<br/>
If you have memory that's already provided from elsewhere, you can use rim_strdup() or rim_strdupl() to create a copy of it that's compatible with RimStone. <br/>
<br/>
If RimStone memory you created with these functions has extra unused bytes, you can use either rim_realloc() to reduce its footprint, or you can use rim_mem_set_len() to set its length.<br/>
<br/>
Note that if you use C code included with a RimStone project, you must include "rim.h" file in each of them. You do not need to manually include any other ".h" files (header files), as they will be automatically picked up.<br/>
<div class="vsub"><a id="Examples"></a>Examples</div>
Place the following files in a separate directory for demonstration purposes.<br/>
<br/>
In this example, "example.rim" will use C functions from "example.c", and "example.h" will have declarations of those functions. File "example.c" implements a factorial function, as well as a function that will store the factorial result in an output message that's allocated and passed back to your RimStone code:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_1026' class=notranslate>
<span class="PreProc">#include </span><span class="Constant">&quot;rim.h&quot;</span>

<span class="Type">void</span> get_factorial(rim_num f, rim_num *res)
<span class="Statement">{</span>
    *res = <span class="Constant">1</span>;
    rim_num i;
    <span class="Statement">for</span> (i = <span class="Constant">2</span>; i &lt;= f; i++) {
        *res *= i;
<span class="Statement">    }</span>
<span class="Statement">}</span>

<span class="PreProc">#</span>define<span class="PreProc"> </span>MEMSIZE<span class="PreProc"> </span><span class="Constant">200</span>
<span class="Type">void</span> fact_msg (rim_num i, <span class="Type">char</span> **res)
<span class="Statement">{</span>
    <span class="Comment">// rimstone rule: outgoing string must NOT free or realloc its incoming value</span>
    <span class="Comment">// all else is allowed</span>
    <span class="Type">char</span> *r = rim_malloc (MEMSIZE);
    rim_num f;
    get_factorial (i, &amp;f);
    rim_num bw = snprintf(r, MEMSIZE, <span class="Constant">&quot;Factorial value (message from C function) is </span><span class="Special">%ld</span><span class="Constant">&quot;</span>, f) + <span class="Constant">1</span>;
    <span class="Comment">// reduce memory footprint to match the memory used (including the null byte)</span>
    <span class="Comment">// you can also use rim_mem_set_len() with bw as length for better performance </span>
    <span class="Comment">// (but also higher memory usage)</span>
    *res = rim_realloc (rim_mem_get_id(r), bw);
<span class="Statement">}</span></pre>
<span id=rimstone_copied_1026 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_1026' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_1026, code_1026, rimstone_copied_1026)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
File "example.h" declares the above functions:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_1028' class=notranslate>
<span class="Type">void</span> get_factorial(rim_num f, rim_num *res);
<span class="Type">void</span> fact_msg (rim_num i, <span class="Type">char</span> **res);</pre>
<span id=rimstone_copied_1028 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_1028' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_1028, code_1028, rimstone_copied_1028)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
File "example.rim" will call the above functions and display the results:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_1030' class=notranslate>
<span class="Statement">extended-mode</span>

<span class="Statement">begin-handler</span> /example<span class="Identifier"> public</span>

<span class="Statement">    set-number</span> fact
<span class="Statement">    call-extended</span> get_factorial (<span class="Constant">10</span>, &amp;fact)
<span class="Statement">    @</span>Factorial is <span class="Statement">&lt;&lt;print-out</span> fact<span class="Statement">&gt;&gt;</span>

<span class="Statement">    set-string</span> res
<span class="Statement">    call-extended</span> fact_msg (<span class="Constant">10</span>, &amp;res)
<span class="Statement">    print-out</span> res
<span class="Statement">    @</span>
<span class="Statement">end-handler</span></pre>
<span id=rimstone_copied_1030 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_1030' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_1030, code_1030, rimstone_copied_1030)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Create application "example":<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_1027' class=notranslate>
rim <span class="Special">-k</span> example</pre>
<span id=rimstone_copied_1027 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_1027' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_1027, code_1027, rimstone_copied_1027)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Make the application:<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_1029' class=notranslate>
rim <span class="Special">-q</span></pre>
<span id=rimstone_copied_1029 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_1029' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_1029, code_1029, rimstone_copied_1029)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Run it:<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_1031' class=notranslate>
rim <span class="Special">-r</span> <span class="Special">--req</span><span class="Statement">=</span><span class="Statement">&quot;</span><span class="Constant">/example</span><span class="Statement">&quot;</span> <span class="Special">--exec</span> <span class="Special">--silent-header</span></pre>
<span id=rimstone_copied_1031 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_1031' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_1031, code_1031, rimstone_copied_1031)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
The output is, as expected:<br/>
<div class='ncode' style='position:relative;padding-right:16px;'>
<pre id='code_1025' class=notranslate>
Factorial is 3628800
Factorial value (message from C function) is 362880</pre>
<span id=rimstone_copied_1025 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_1025' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_1025, code_1025, rimstone_copied_1025)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<div class="vsub"><a id="See also"></a>See also</div>
 <a name='API'></a><span style="font-weight:bold;">API</span><br/>
<a href='/Client-API.html'>Client-API</a> &nbsp;<br/>
<a href='/Client-API-and-messaging.html'>Client-API-and-messaging</a> &nbsp;<br/>
<a href='/Server-API.html'>Server-API</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='/documentation.html'>documentation</a><br/>
<a id='service.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:left;background-color:white;'><a href='https://rimstone-lang.com' style='border-bottom:0px'><img src='https://rimstone-lang.com/rimstone.png' style='width:180px;height:auto'/></a></div><div class='vhub' style='margin-top:10px;'>Service</div><hr/>You can run a RimStone application as a service by using <a href='/mrim.html'>mrim</a> program manager. Your application can then use commonly used web servers or load balancers (such as Apache, Nginx or HAProxy) so it becomes available on the web.<br/>
<br/>
You can access your server application by means of:<br/>
<ul><li>A web server (which is probably the most common way). You need to setup a reverse proxy, i.e. a web server that will forward requests and send replies back to clients; see below.<br/>
</li><li>The command line, in which case you can use <a href='/rim.html'>rim</a> (see -r option). <br/>
</li><li><a href='/Client-API.html'>Client-API</a>, which allows any application in any programming language to access your server, as long as it has C linkage (by far most do). This method allows for MT (multithreaded) access to your application, where many client requests can be made in parallel.</ul>
RimStone server runs as a number of (zero or more) background processes in parallel, processing requests simultaneously.<br/>
<div class="vsub"><a id="Setting up reverse proxy (web server)"></a>Setting up reverse proxy (web server)</div>
To access your application via a reverse proxy (i.e. web server), generally you need to add a proxy directive and restart the web server. <br/>
<br/>
If you use Apache, you need to connect it to your application, see <a href='/connect-apache-tcp-socket.html'>connect-apache-tcp-socket</a> (for using TCP sockets) and <a href='/connect-apache-unix-socket.html'>connect-apache-unix-socket</a> (for using Unix sockets). If you use Nginx, you need to connect it to your application, see <a href='/connect-nginx-tcp-socket.html'>connect-nginx-tcp-socket</a> (for using TCP sockets) and <a href='/connect-nginx-unix-socket.html'>connect-nginx-unix-socket</a> (for using Unix sockets). For HAProxy, see <a href='/connect-haproxy-tcp-socket.html'>connect-haproxy-tcp-socket</a>. Virtually all web servers/proxies support FastCGI protocol used by RimStone; please see your server's documentation.<br/>
<div class="vsub"><a id="Starting RimStone server processes"></a>Starting RimStone server processes</div>
Use <a href='/mrim.html'>mrim</a>, for example:<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_1032' class=notranslate>
mrim <span class="Statement">&lt;</span>app name<span class="Statement">&gt;</span></pre>
<span id=rimstone_copied_1032 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_1032' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_1032, code_1032, rimstone_copied_1032)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
which in general will (based on the request load) start zero or more background resident process(es) (daemons) that process requests in parallel, or for instance:<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_1033' class=notranslate>
mrim <span class="Special">-w</span> <span class="Constant">20</span> <span class="Statement">&lt;</span>app name<span class="Statement">&gt;</span></pre>
<span id=rimstone_copied_1033 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_1033' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_1033, code_1033, rimstone_copied_1033)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
which will start 20 processes.<br/>
<div class="vsub"><a id="Connection timeout"></a>Connection timeout</div>
In a heavy-load environment, a client's connection may be rejected by the server. This may happen if the client runs very slowly due to swapping perhaps. Once a client establishes a connection, it has up to 5 seconds by default to send data; if it doesn't, the server will close the connection. Typically, clients send data right away, but due to a heavy load, this time may be longer. To set the connection timeout in seconds, use "--client-timeout" option in rim when making the application:<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_1034' class=notranslate>
rim <span class="Special">-q</span> <span class="Special">--client-timeout</span><span class="Statement">=</span><span class="Constant">8</span></pre>
<span id=rimstone_copied_1034 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_1034' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_1034, code_1034, rimstone_copied_1034)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
In this case, the timeout is set to 8 seconds.<br/>
<div class="vsub"><a id="See also"></a>See also</div>
 <a name='Running application'></a><span style="font-weight:bold;">Running application</span><br/>
<a href='/application-setup.html'>application-setup</a> &nbsp;<br/>
<a href='/CGI.html'>CGI</a> &nbsp;<br/>
<a href='/command-line.html'>command-line</a> &nbsp;<br/>
<a href='/service.html'>service</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='/documentation.html'>documentation</a><br/>
<a id='set-app.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:left;background-color:white;'><a href='https://rimstone-lang.com' style='border-bottom:0px'><img src='https://rimstone-lang.com/rimstone.png' style='width:180px;height:auto'/></a></div><div class='vhub' style='margin-top:10px;'>Set app</div><hr/><span style="font-weight:bold;">Purpose</span>: Set data used by the application.<br/>
<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_1035' class=notranslate>
<span class="Statement">set-app</span><span class="Identifier"> stack-depth</span> &lt;stack depth&gt;</pre>
<span id=rimstone_copied_1035 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_1035' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_1035, code_1035, rimstone_copied_1035)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Set maximum &lt;stack depth&gt; for calling handlers (see <a href='/call-handler.html'>call-handler</a>), including recursion. The default is 300 and cannot be lower than 100. The &lt;stack depth&gt; value must be a number constant.<br/>
<br/>
Be careful when setting &lt;stack depth&gt; too high, as it may cause application and system stability issues that are unrelated to RimStone.<br/>
<br/>
Once set, this setting applies to the current process and all future requests it handles. Typically you'd set the stack depth in <a href='/do-once.html'>do-once</a> statement, so it's set only once.<br/>
<div class="vsub"><a id="See also"></a>See also</div>
 <a name='Application information'></a><span style="font-weight:bold;">Application information</span><br/>
<a href='/get-app.html'>get-app</a> &nbsp;<br/>
<a href='/set-app.html'>set-app</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='/documentation.html'>documentation</a><br/>
<a id='set-bool.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:left;background-color:white;'><a href='https://rimstone-lang.com' style='border-bottom:0px'><img src='https://rimstone-lang.com/rimstone.png' style='width:180px;height:auto'/></a></div><div class='vhub' style='margin-top:10px;'>Set bool</div><hr/><span style="font-weight:bold;">Purpose</span>: Set value of a boolean variable.<br/>
<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_1036' class=notranslate>
<span class="Statement">set-bool</span> &lt;variable&gt; [ = &lt;boolean expression&gt; | &lt;comparison&gt; ] [<span class="Identifier"> process-scope</span> ]</pre>
<span id=rimstone_copied_1036 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_1036' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_1036, code_1036, rimstone_copied_1036)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
If equal sign (=) is not used, the boolean variable &lt;variable&gt; is assign "false".<br/>
<br/>
If &lt;boolean expression&gt; is specified (see <a href='/boolean-expressions.html'>boolean-expressions</a>), then &lt;variable&gt; is assigned its computed value.<br/>
<br/>
If &lt;comparison&gt; is specified (see "comparison" definition in <a href='/if-true.html'>if-true</a>), then &lt;variable&gt; is assigned true if &lt;comparison&gt; evaluates to "true" and false if it evaluates to "false".<br/>
<br/>
If "process-scope" clause is used, then boolean is of process scope, meaning its value will persist from one request to another for the life of the process; in the statement where &lt;variable&gt; is created, the assignment will take place only once. This clause can only be used if &lt;variable&gt; did not already exist.<br/>
<div class="vsub"><a id="Examples"></a>Examples</div>
Assign "true" value to boolean variable "my_bool":<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_1037' class=notranslate>
<span class="Statement">set-bool</span> my_bool = <span class="Constant">true</span></pre>
<span id=rimstone_copied_1037 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_1037' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_1037, code_1037, rimstone_copied_1037)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Assign boolean value based on comparison:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_1038' class=notranslate>
<span class="Statement">.</span>..
<span class="Statement">set-bool</span> my_bool = num1<span class="Identifier"> equal</span> num2<span class="Identifier"> or</span> str1<span class="Identifier"> not-equal</span> str2</pre>
<span id=rimstone_copied_1038 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_1038' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_1038, code_1038, rimstone_copied_1038)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<div class="vsub"><a id="See also"></a>See also</div>
 <a name='Booleans'></a><span style="font-weight:bold;">Booleans</span><br/>
<a href='/boolean-expressions.html'>boolean-expressions</a> &nbsp;<br/>
<a href='/set-bool.html'>set-bool</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='/documentation.html'>documentation</a><br/>
<a id='set-cookie.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:left;background-color:white;'><a href='https://rimstone-lang.com' style='border-bottom:0px'><img src='https://rimstone-lang.com/rimstone.png' style='width:180px;height:auto'/></a></div><div class='vhub' style='margin-top:10px;'>Set cookie</div><hr/><span style="font-weight:bold;">Purpose</span>: Set cookie.<br/>
<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_1039' class=notranslate>
<span class="Statement">set-cookie</span> ( &lt;cookie name&gt;=&lt;cookie value&gt; \
    [<span class="Identifier"> expires</span> &lt;expiration&gt; ] \
    [<span class="Identifier"> path</span> &lt;path&gt; ] \
    [<span class="Identifier"> same-site</span> <span class="Constant">&quot;Lax&quot;</span>|<span class="Constant">&quot;Strict&quot;</span>|<span class="Constant">&quot;None&quot;</span> ] \
    [<span class="Identifier"> no-http-only</span> [ &lt;no-http-only&gt; ] ] \
    [<span class="Identifier"> secure</span> [ &lt;secure&gt; ] ] ) ,...</pre>
<span id=rimstone_copied_1039 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_1039' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_1039, code_1039, rimstone_copied_1039)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
To set a cookie named by string &lt;cookie name&gt; to string value &lt;cookie value&gt;, use set-cookie statement. A cookie must be set prior to outputting any actual response (such as with <a href='/output-statement.html'>output-statement</a> or <a href='/print-out.html'>print-out</a> for example), or the program will <a href='/error-handling.html'>error out</a> and stop. <br/>
<br/>
Cookie's &lt;expiration&gt; date (as a string, see <a href='/get-time.html'>get-time</a>) is given with "expires" clause. The default is session cookie meaning the cookie expires when client session closes.<br/>
<br/>
Cookie's &lt;path&gt; is specified with "path" clause. The default is the URL path of the <a href='/request.html'>request</a> URL.<br/>
<br/>
Whether a cookie applies to the same site is given with "same-site" clause along with possible values of "Lax", "Strict" or "None". <br/>
<br/>
By default a cookie is not accessible to client scripting (i.e. "HttpOnly") -you can change this with "no-http-only" clause. That will be the case if "no-http-only" clause is used without bool expression &lt;no-http-only&gt;, or if &lt;no-http-only&gt; evaluates to true.<br/>
<br/>
Use "secure" if a secure connection (https) is used, in order to specify this cookie is available only with a secure connection. That will be the case if "secure" is used without bool expression &lt;secure&gt;, or if &lt;secure&gt; evaluates to true.<br/>
<br/>
Cookies are commonly used for session maintenance, tracking and other purposes. Use <a href='/get-cookie.html'>get-cookie</a> and <a href='/delete-cookie.html'>delete-cookie</a> together with set-cookie to manage cookies.<br/>
<br/>
You can set multiple cookies separated by a comma:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_1040' class=notranslate>
<span class="Statement">get-time</span><span class="Type"> to</span> tm<span class="Identifier"> year</span> <span class="Constant">1</span>
<span class="Statement">set-cookie</span> <span class="Constant">&quot;mycookie1&quot;</span>=<span class="Constant">&quot;4900&quot;</span><span class="Identifier"> expires</span> tm<span class="Identifier"> path</span> <span class="Constant">&quot;/&quot;</span>, <span class="Constant">&quot;mycookie2&quot;</span>=<span class="Constant">&quot;900&quot;</span><span class="Identifier"> expires</span> tm <span class="Identifier"> path</span> <span class="Constant">&quot;/my-app&quot;</span><span class="Identifier"> same-site</span> <span class="Constant">&quot;Strict&quot;</span></pre>
<span id=rimstone_copied_1040 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_1040' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_1040, code_1040, rimstone_copied_1040)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<div class="vsub"><a id="Examples"></a>Examples</div>
To set a cookie named "my_cookie_name" to value "XYZ", that will go with the reply and expire in 1 year and 2 months from now, use:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_1041' class=notranslate>
<span class="Statement">get-time</span><span class="Type"> to</span> mytime<span class="Identifier"> year</span> <span class="Constant">1</span><span class="Identifier"> month</span> <span class="Constant">2</span>
<span class="Statement">set-string</span> my_cookie_value=<span class="Constant">&quot;XYZ&quot;</span>
<span class="Statement">set-cookie</span> <span class="Constant">&quot;my_cookie_name&quot;</span>=my_cookie_value<span class="Identifier"> expires</span> mytime<span class="Identifier"> path</span> <span class="Constant">&quot;/&quot;</span><span class="Identifier"> same-site</span> <span class="Constant">&quot;Lax&quot;</span></pre>
<span id=rimstone_copied_1041 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_1041' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_1041, code_1041, rimstone_copied_1041)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
A cookie that can be used by JavaScript (meaning we use no-http-only clause):<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_1042' class=notranslate>
<span class="Statement">set-cookie</span> <span class="Constant">&quot;my_cookie_name&quot;</span>=my_cookie_value<span class="Identifier"> no-http-only</span></pre>
<span id=rimstone_copied_1042 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_1042' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_1042, code_1042, rimstone_copied_1042)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<div class="vsub"><a id="See also"></a>See also</div>
 <a name='Cookies'></a><span style="font-weight:bold;">Cookies</span><br/>
<a href='/delete-cookie.html'>delete-cookie</a> &nbsp;<br/>
<a href='/get-cookie.html'>get-cookie</a> &nbsp;<br/>
<a href='/set-cookie.html'>set-cookie</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='/documentation.html'>documentation</a><br/>
<a id='set-double.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:left;background-color:white;'><a href='https://rimstone-lang.com' style='border-bottom:0px'><img src='https://rimstone-lang.com/rimstone.png' style='width:180px;height:auto'/></a></div><div class='vhub' style='margin-top:10px;'>Set double</div><hr/><span style="font-weight:bold;">Purpose</span>: Set value of a double (floating point) variable.<br/>
<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_1043' class=notranslate>
<span class="Statement">set-double</span> &lt;variable&gt; [ = &lt;<span class="Type">double</span>&gt; ]  [<span class="Identifier"> process-scope</span> ]</pre>
<span id=rimstone_copied_1043 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_1043' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_1043, code_1043, rimstone_copied_1043)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Double variable &lt;variable&gt; is either assigned value &lt;double&gt; with "=" clause, or it is assigned 0.0 if equal clause ("=") is omitted. A number is a signed 64-bit floating point value (double precision) with a range of approximately +/- 1.7*10E-308 to 1.7*10E308.<br/>
<br/>
If "process-scope" clause is used, then double is of process scope, meaning its value will persist from one request to another for the life of the proces; in the statement where &lt;variable&gt; is created, the assignment will take place only once. This clause can only be used if &lt;variable&gt; did not already exist.<br/>
<div class="vsub"><a id="Examples"></a>Examples</div>
Initialize double "my_dbl" to 0.0 and the value of this variable, however it changes, will persist through any number of requests in the same process:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_1044' class=notranslate>
<span class="Statement">set-double</span> my_dbl<span class="Identifier"> process-scope</span></pre>
<span id=rimstone_copied_1044 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_1044' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_1044, code_1044, rimstone_copied_1044)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Initialize number "my_dbl" to 101.34:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_1045' class=notranslate>
<span class="Statement">set-number</span> my_dbl = <span class="Constant">101</span><span class="Constant">.34</span></pre>
<span id=rimstone_copied_1045 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_1045' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_1045, code_1045, rimstone_copied_1045)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Subtract 5:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_1046' class=notranslate>
<span class="Statement">set-double</span> my_dbl = my_dbl-<span class="Constant">5</span></pre>
<span id=rimstone_copied_1046 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_1046' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_1046, code_1046, rimstone_copied_1046)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Assign an expression:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_1047' class=notranslate>
<span class="Statement">set-double</span> my_dbl = (some_dbl*<span class="Constant">3</span><span class="Constant">.4</span>+<span class="Constant">1</span>)/<span class="Constant">5</span></pre>
<span id=rimstone_copied_1047 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_1047' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_1047, code_1047, rimstone_copied_1047)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<div class="vsub"><a id="See also"></a>See also</div>
 <a name='Doubles'></a><span style="font-weight:bold;">Doubles</span><br/>
<a href='/abs-double.html'>abs-double</a> &nbsp;<br/>
<a href='/double-expressions.html'>double-expressions</a> &nbsp;<br/>
<a href='/double-string.html'>double-string</a> &nbsp;<br/>
<a href='/mixing-doubles-and-numbers.html'>mixing-doubles-and-numbers</a> &nbsp;<br/>
<a href='/set-double.html'>set-double</a> &nbsp;<br/>
<a href='/string-double.html'>string-double</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='/documentation.html'>documentation</a><br/>
<a id='set-number.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:left;background-color:white;'><a href='https://rimstone-lang.com' style='border-bottom:0px'><img src='https://rimstone-lang.com/rimstone.png' style='width:180px;height:auto'/></a></div><div class='vhub' style='margin-top:10px;'>Set number</div><hr/><span style="font-weight:bold;">Purpose</span>: Set value of a number variable.<br/>
<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_1048' class=notranslate>
<span class="Statement">set-number</span> &lt;variable&gt; [ = &lt;number&gt; ]  [<span class="Identifier"> process-scope</span> ]</pre>
<span id=rimstone_copied_1048 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_1048' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_1048, code_1048, rimstone_copied_1048)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Number variable &lt;variable&gt; is either assigned value &lt;number&gt; with "=" clause, or it is assigned 0 if equal clause ("=") is omitted. A number is a signed 64-bit integer betwen LLONG_MIN+1 and LLONG_MAX-1 inclusive (i.e. between -9,223,372,036,854,775,807 and 9,223,372,036,854,775,806)<br/>
<br/>
If "process-scope" clause is used, then number is of process scope, meaning its value will persist from one request to another for the life of the proces; in the statement where &lt;variable&gt; is created, the assignment will take place only once. This clause can only be used if &lt;variable&gt; did not already exist.<br/>
<br/>
Note that &lt;number&gt; can also be a string character produced by using "[" and "]" to specify the index within a string (with 0 being the first character), as in:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_1049' class=notranslate>
<span class="Statement">set-string</span> my_str = <span class="Constant">&quot;Some string&quot;</span>
<span class="Statement">set-number</span> my_num = my_str[<span class="Constant">2</span>]</pre>
<span id=rimstone_copied_1049 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_1049' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_1049, code_1049, rimstone_copied_1049)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
In the above example, "my_num" will be 109, which is the integer representation of character 'm'.<br/>
<div class="vsub"><a id="Examples"></a>Examples</div>
Initialize number "my_num" to 0 and the value of this variable, however it changes, will persist through any number of requests in the same process:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_1050' class=notranslate>
<span class="Statement">set-number</span> my_num<span class="Identifier"> process-scope</span></pre>
<span id=rimstone_copied_1050 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_1050' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_1050, code_1050, rimstone_copied_1050)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Initialize number "my_num" to 10:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_1051' class=notranslate>
<span class="Statement">set-number</span> my_num = <span class="Constant">10</span></pre>
<span id=rimstone_copied_1051 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_1051' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_1051, code_1051, rimstone_copied_1051)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Subtract 5:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_1052' class=notranslate>
<span class="Statement">set-number</span> my_num = my_num-<span class="Constant">5</span></pre>
<span id=rimstone_copied_1052 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_1052' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_1052, code_1052, rimstone_copied_1052)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Assign an expression:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_1053' class=notranslate>
<span class="Statement">set-number</span> my_num = (some_num*<span class="Constant">3</span>+<span class="Constant">1</span>)%<span class="Constant">5</span></pre>
<span id=rimstone_copied_1053 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_1053' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_1053, code_1053, rimstone_copied_1053)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<div class="vsub"><a id="See also"></a>See also</div>
 <a name='Numbers'></a><span style="font-weight:bold;">Numbers</span><br/>
<a href='/abs-number.html'>abs-number</a> &nbsp;<br/>
<a href='/mixing-doubles-and-numbers.html'>mixing-doubles-and-numbers</a> &nbsp;<br/>
<a href='/number-expressions.html'>number-expressions</a> &nbsp;<br/>
<a href='/number-string.html'>number-string</a> &nbsp;<br/>
<a href='/set-number.html'>set-number</a> &nbsp;<br/>
<a href='/string-number.html'>string-number</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='/documentation.html'>documentation</a><br/>
<a id='set-param.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:left;background-color:white;'><a href='https://rimstone-lang.com' style='border-bottom:0px'><img src='https://rimstone-lang.com/rimstone.png' style='width:180px;height:auto'/></a></div><div class='vhub' style='margin-top:10px;'>Set param</div><hr/><span style="font-weight:bold;">Purpose</span>: Set or create a parameter.<br/>
<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_1054' class=notranslate>
<span class="Statement">set-param</span> ( &lt;name&gt; [ = &lt;value&gt; ] ) , ...</pre>
<span id=rimstone_copied_1054 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_1054' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_1054, code_1054, rimstone_copied_1054)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
set-param sets or creates parameter &lt;name&gt; (see <a href='/get-param.html'>get-param</a>). <br/>
<br/>
If parameter &lt;name&gt; does not exist, it's created with &lt;value&gt;. If it does exist, its value is replaced with &lt;value&gt;. Note that &lt;value&gt; can be of any type. <br/>
<br/>
If equal sign ("=") and &lt;value&gt; are omitted, then &lt;value&gt; is the same as &lt;name&gt;, so:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_1055' class=notranslate>
<span class="Statement">set-param</span> something</pre>
<span id=rimstone_copied_1055 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_1055' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_1055, code_1055, rimstone_copied_1055)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
is the same as:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_1056' class=notranslate>
<span class="Statement">set-param</span> something = something</pre>
<span id=rimstone_copied_1056 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_1056' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_1056, code_1056, rimstone_copied_1056)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
where the first "something" is the parameter set/created, and the second "something" is an actual variable in your code. In this example, the two just happen to have the same name; this generally happens often, so this form is a shortcut for that.<br/>
<br/>
You can specify any number of parameters separated by a comma, for instance in this case par1 is a boolean, par2 is a number and par3 is a string:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_1057' class=notranslate>
<span class="Statement">set-number</span> par2 = <span class="Constant">10</span>
<span class="Statement">set-param</span> par1=<span class="Constant">true</span>, par, par3=<span class="Constant">&quot;hi&quot;</span></pre>
<span id=rimstone_copied_1057 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_1057' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_1057, code_1057, rimstone_copied_1057)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<div class="vsub"><a id="Examples"></a>Examples</div>
Set the value of parameter "quantity" to "10", which is also the output:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_1058' class=notranslate>
<span class="Statement">set-param</span> quantity = <span class="Constant">&quot;10&quot;</span>
<span class="Statement">.</span>..
<span class="Statement">get-param</span> quantity
<span class="Statement">print-out</span> quantity</pre>
<span id=rimstone_copied_1058 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_1058' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_1058, code_1058, rimstone_copied_1058)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<div class="vsub"><a id="Input and output parameters to request handlers"></a>Input and output parameters to request handlers</div>
Read more at <a href='/input-output-parameters.html'>input-output-parameters</a>.<br/>
<div class="vsub"><a id="See also"></a>See also</div>
 <a name='Request data'></a><span style="font-weight:bold;">Request data</span><br/>
<a href='/get-param.html'>get-param</a> &nbsp;<br/>
<a href='/input-output-parameters.html'>input-output-parameters</a> &nbsp;<br/>
<a href='/request-body.html'>request-body</a> &nbsp;<br/>
<a href='/set-param.html'>set-param</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='/documentation.html'>documentation</a><br/>
<a id='set-string.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:left;background-color:white;'><a href='https://rimstone-lang.com' style='border-bottom:0px'><img src='https://rimstone-lang.com/rimstone.png' style='width:180px;height:auto'/></a></div><div class='vhub' style='margin-top:10px;'>Set string</div><hr/><span style="font-weight:bold;">Purpose</span>: Set value of a string variable.<br/>
<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_1060' class=notranslate>
<span class="Statement">set-string</span> &lt;variable&gt; [<span class="Identifier"> unquoted</span> ] [ = &lt;string&gt; ] [<span class="Identifier"> process-scope</span> ]

<span class="Statement">set-string</span> &lt;variable&gt; [ &lt;index&gt; ] = &lt;number&gt;

<span class="Statement">set-string</span> &lt;variable&gt;<span class="Identifier"> length</span> &lt;length&gt;</pre>
<span id=rimstone_copied_1060 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_1060' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_1060, code_1060, rimstone_copied_1060)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
String variable &lt;variable&gt; will be assigned a value of &lt;string&gt; if clause "=" is present; otherwise &lt;variable&gt; is assigned an empty string. If "process-scope" clause is used, then &lt;string&gt; is assigned only the first time set-string executes.<br/>
<div class="vsub"><a id="With process-scope clause"></a>With process-scope clause</div>
If "process-scope" clause is used, then &lt;variable&gt; keeps its value across requests, i.e. for the life of the process. Note that a process-scoped string variable can only be assigned in set-string. However, it can be used as a regular string in any other statement.<br/>
<div class="vsub"><a id="With length clause"></a>With length clause</div>
If "length" clause is used, then the length of string &lt;variable&gt; is set to &lt;length&gt;. Just like with all other string statements, you can only set the new length of the string between zero and the current string length. This is useful mostly when manipulating string's individual bytes, and generally not in other cases (see <a href='/new-string.html'>new-string</a>).<br/>
<div class="vsub"><a id="With unquoted clause"></a>With unquoted clause</div>
If "unquoted" clause is used, then &lt;string&gt; literal is unquoted, and everything from equal clause ("=") to the rest of the line is a &lt;string&gt;; in this case there is no need to escape double quotes or backslashes. Note that in this case, "unquoted" and any other clause must appear prior to equal clause ("=") and after variable, because they wouldn't otherwise be recognized. For instance:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_1061' class=notranslate>
<span class="Statement">set-string</span> my_string<span class="Identifier"> unquoted</span> = this is <span class="Constant">&quot;some&quot;</span> string where escape characters like \n do <span class="Constant">&quot;not work&quot;</span></pre>
<span id=rimstone_copied_1061 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_1061' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_1061, code_1061, rimstone_copied_1061)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
This is the same as:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_1062' class=notranslate>
<span class="Statement">set-string</span> my_string = <span class="Constant">&quot;this is </span><span class="Special">\&quot;</span><span class="Constant">some</span><span class="Special">\&quot;</span><span class="Constant"> string where escape characters like </span><span class="Special">\n</span><span class="Constant"> do </span><span class="Special">\&quot;</span><span class="Constant">not work</span><span class="Special">\&quot;</span><span class="Constant">&quot;</span></pre>
<span id=rimstone_copied_1062 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_1062' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_1062, code_1062, rimstone_copied_1062)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
"unquoted" clause is useful when writing string literals that would otherwise need lots of escaping. You can use double backslash at the end of the line to split the line with new line in between:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_1063' class=notranslate>
<span class="Statement">set-string</span> unq1<span class="Identifier"> unquoted</span> =This is one line\
        second line and\
        third!</pre>
<span id=rimstone_copied_1063 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_1063' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_1063, code_1063, rimstone_copied_1063)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
The above will create a string:<br/>
<div class='ncode' style='position:relative;padding-right:16px;'>
<pre id='code_1059' class=notranslate>
This is one line
second line and
third!</pre>
<span id=rimstone_copied_1059 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_1059' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_1059, code_1059, rimstone_copied_1059)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<div class="vsub"><a id="Concatenating string literals"></a>Concatenating string literals</div>
A string can be represented as a concatenation of string literals; this is useful when you want to preserve spaces, for instance:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_1064' class=notranslate>
<span class="Statement">set-string</span> a=<span class="Constant">&quot;something is &quot;</span> \
    <span class="Constant">&quot;  very good &quot;</span> \
    <span class="Constant">&quot; with spaces!! &quot;</span>
<span class="Comment">// string is </span><span class="Constant">&quot;something is   very good  with spaces!! &quot;</span></pre>
<span id=rimstone_copied_1064 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_1064' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_1064, code_1064, rimstone_copied_1064)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<div class="vsub"><a id="Set a byte in a string"></a>Set a byte in a string</div>
You can also use set-string to set a byte in it; in this case &lt;index&gt; byte in &lt;variable&gt; string is set to &lt;number&gt;. &lt;index&gt; starts with 0 for the first byte. For instance, the resulting "str" will be "Aome string" since 65 is a number representation of 'A':<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_1065' class=notranslate>
<span class="Statement">set-string</span> str = <span class="Constant">&quot;some string&quot;</span>
<span class="Statement">set-string</span> str[<span class="Constant">0</span>] = <span class="Constant">65</span>
<span class="Comment">// or using a character constant as a number, to the same effect</span>
<span class="Statement">set-string</span> str[<span class="Constant">0</span>] = 'A'</pre>
<span id=rimstone_copied_1065 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_1065' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_1065, code_1065, rimstone_copied_1065)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<div class="vsub"><a id="Examples"></a>Examples</div>
Initialize "my_string" variable to "":<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_1066' class=notranslate>
<span class="Statement">set-string</span> my_string</pre>
<span id=rimstone_copied_1066 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_1066' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_1066, code_1066, rimstone_copied_1066)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Initialize "my_string" variable to "abc":<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_1067' class=notranslate>
<span class="Statement">set-string</span> my_string = <span class="Constant">&quot;abc&quot;</span></pre>
<span id=rimstone_copied_1067 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_1067' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_1067, code_1067, rimstone_copied_1067)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<div class="vsub"><a id="See also"></a>See also</div>
 <a name='Strings'></a><span style="font-weight:bold;">Strings</span><br/>
<a href='/copy-string.html'>copy-string</a> &nbsp;<br/>
<a href='/count-substring.html'>count-substring</a> &nbsp;<br/>
<a href='/delete-string.html'>delete-string</a> &nbsp;<br/>
<a href='/double-string.html'>double-string</a> &nbsp;<br/>
<a href='/lower-string.html'>lower-string</a> &nbsp;<br/>
<a href='/match-regex.html'>match-regex</a> &nbsp;<br/>
<a href='/new-string.html'>new-string</a> &nbsp;<br/>
<a href='/number-string.html'>number-string</a> &nbsp;<br/>
<a href='/read-split.html'>read-split</a> &nbsp;<br/>
<a href='/replace-string.html'>replace-string</a> &nbsp;<br/>
<a href='/scan-string.html'>scan-string</a> &nbsp;<br/>
<a href='/set-string.html'>set-string</a> &nbsp;<br/>
<a href='/split-string.html'>split-string</a> &nbsp;<br/>
<a href='/string-double.html'>string-double</a> &nbsp;<br/>
<a href='/string-expressions.html'>string-expressions</a> &nbsp;<br/>
<a href='/string-length.html'>string-length</a> &nbsp;<br/>
<a href='/string-number.html'>string-number</a> &nbsp;<br/>
<a href='/trim-string.html'>trim-string</a> &nbsp;<br/>
<a href='/upper-string.html'>upper-string</a> &nbsp;<br/>
<a href='/write-string.html'>write-string</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='/documentation.html'>documentation</a><br/>
<a id='silent-header.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:left;background-color:white;'><a href='https://rimstone-lang.com' style='border-bottom:0px'><img src='https://rimstone-lang.com/rimstone.png' style='width:180px;height:auto'/></a></div><div class='vhub' style='margin-top:10px;'>Silent header</div><hr/><span style="font-weight:bold;">Purpose</span>: Do not output HTTP headers.<br/>
<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_1068' class=notranslate>
<span class="Statement">silent-header</span></pre>
<span id=rimstone_copied_1068 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_1068' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_1068, code_1068, rimstone_copied_1068)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
silent-header will suppress the output of HTTP headers, such as with <a href='/out-header.html'>out-header</a>, or in any other case where headers are output. The effect applies to current <a href='/request.html'>request</a> only; if you use it conditionally, then you can have it on or off dynamically. <br/>
<br/>
If you want to suppress the headers for all <a href='/begin-handler.html'>service handlers</a> (as if silent-header were implied at the beginning of each), then for a <a href='/command-line.html'>command-line</a> program, use "--silent-header" option in "rim -r" when running it; to suppress the headers in <a href='/service.html'>service</a>s, use "-z" option in <a href='/mrim.html'>mrim</a>.<br/>
<br/>
silent-header must be used prior to outputting headers, meaning either prior to any output (if out-header is not used) or prior to first out-header.<br/>
<br/>
There are many uses for silent-header, among them:<br/>
<ul><li>A command-line program (such as a command line program) may use it to produce generic output, without any headers,<br/>
</li><li>the output from a program may be redirected to a web file (such as html), in case of dynamic content that rarely changes,<br/>
</li><li>a web program may output a completely different (non-HTTP) set of headers, etc.</li></ul>
<div class="vsub"><a id="Examples"></a>Examples</div>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_1069' class=notranslate>
<span class="Statement">silent-header</span>

<span class="Comment">// No headers output </span></pre>
<span id=rimstone_copied_1069 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_1069' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_1069, code_1069, rimstone_copied_1069)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<div class="vsub"><a id="See also"></a>See also</div>
 <a name='Web'></a><span style="font-weight:bold;">Web</span><br/>
<a href='/call-web.html'>call-web</a> &nbsp;<br/>
<a href='/out-header.html'>out-header</a> &nbsp;<br/>
<a href='/send-file.html'>send-file</a> &nbsp;<br/>
<a href='/silent-header.html'>silent-header</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='/documentation.html'>documentation</a><br/>
<a id='sinh.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:left;background-color:white;'><a href='https://rimstone-lang.com' style='border-bottom:0px'><img src='https://rimstone-lang.com/rimstone.png' style='width:180px;height:auto'/></a></div><div class='vhub' style='margin-top:10px;'>Sinh</div><hr/><span style="font-weight:bold;">Purpose</span>: Hyperbolic sine function.<br/>
<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_1072' class=notranslate>
sinh( &lt;var&gt; )</pre>
<span id=rimstone_copied_1072 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_1072' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_1072, code_1072, rimstone_copied_1072)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
sinh returns hyperbolic sine of &lt;var&gt;, defined as:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_1073' class=notranslate>
sinh(var) = (exp(var) - exp(-var)) / <span class="Constant">2</span></pre>
<span id=rimstone_copied_1073 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_1073' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_1073, code_1073, rimstone_copied_1073)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
&lt;var&gt; is a number or a double and the result is a double.<br/>
<div class="vsub"><a id="Examples"></a>Examples</div>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_1074' class=notranslate>
<span class="Statement">set-double</span> d = sinh(<span class="Constant">1</span>) + <span class="Constant">1</span></pre>
<span id=rimstone_copied_1074 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_1074' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_1074, code_1074, rimstone_copied_1074)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<div class="vsub"><a id="See also"></a>See also</div>
 <a name='Math functions'></a><span style="font-weight:bold;">Math functions</span><br/>
<a href='/abd.html'>abd</a> &nbsp;<br/>
<a href='/abn.html'>abn</a> &nbsp;<br/>
<a href='/acos.html'>acos</a> &nbsp;<br/>
<a href='/acosh.html'>acosh</a> &nbsp;<br/>
<a href='/asin.html'>asin</a> &nbsp;<br/>
<a href='/asinh.html'>asinh</a> &nbsp;<br/>
<a href='/atan.html'>atan</a> &nbsp;<br/>
<a href='/atan2.html'>atan2</a> &nbsp;<br/>
<a href='/atanh.html'>atanh</a> &nbsp;<br/>
<a href='/cbrt.html'>cbrt</a> &nbsp;<br/>
<a href='/ceil.html'>ceil</a> &nbsp;<br/>
<a href='/copysign.html'>copysign</a> &nbsp;<br/>
<a href='/cos.html'>cos</a> &nbsp;<br/>
<a href='/cosh.html'>cosh</a> &nbsp;<br/>
<a href='/dbl.html'>dbl</a> &nbsp;<br/>
<a href='/erf.html'>erf</a> &nbsp;<br/>
<a href='/erfc.html'>erfc</a> &nbsp;<br/>
<a href='/exp.html'>exp</a> &nbsp;<br/>
<a href='/exp2.html'>exp2</a> &nbsp;<br/>
<a href='/floor.html'>floor</a> &nbsp;<br/>
<a href='/fmod.html'>fmod</a> &nbsp;<br/>
<a href='/hypot.html'>hypot</a> &nbsp;<br/>
<a href='/isinf.html'>isinf</a> &nbsp;<br/>
<a href='/isnan.html'>isnan</a> &nbsp;<br/>
<a href='/ldexp.html'>ldexp</a> &nbsp;<br/>
<a href='/lgamma.html'>lgamma</a> &nbsp;<br/>
<a href='/log.html'>log</a> &nbsp;<br/>
<a href='/log10.html'>log10</a> &nbsp;<br/>
<a href='/log2.html'>log2</a> &nbsp;<br/>
<a href='/math-functions.html'>math-functions</a> &nbsp;<br/>
<a href='/nextafter.html'>nextafter</a> &nbsp;<br/>
<a href='/num.html'>num</a> &nbsp;<br/>
<a href='/pow.html'>pow</a> &nbsp;<br/>
<a href='/round.html'>round</a> &nbsp;<br/>
<a href='/sin.html'>sin</a> &nbsp;<br/>
<a href='/sinh.html'>sinh</a> &nbsp;<br/>
<a href='/sqrt.html'>sqrt</a> &nbsp;<br/>
<a href='/tan.html'>tan</a> &nbsp;<br/>
<a href='/tanh.html'>tanh</a> &nbsp;<br/>
<a href='/trunc.html'>trunc</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='/documentation.html'>documentation</a><br/>
<a id='sin.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:left;background-color:white;'><a href='https://rimstone-lang.com' style='border-bottom:0px'><img src='https://rimstone-lang.com/rimstone.png' style='width:180px;height:auto'/></a></div><div class='vhub' style='margin-top:10px;'>Sin</div><hr/><span style="font-weight:bold;">Purpose</span>: Sinus function.<br/>
<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_1070' class=notranslate>
sin( &lt;var&gt; )</pre>
<span id=rimstone_copied_1070 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_1070' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_1070, code_1070, rimstone_copied_1070)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
sin returns sine of &lt;var&gt;, where &lt;var&gt; is given in radians. &lt;var&gt; is a number or a double and the result is a double.<br/>
<div class="vsub"><a id="Examples"></a>Examples</div>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_1071' class=notranslate>
<span class="Statement">set-double</span> d = sin(<span class="Constant">1</span>) + <span class="Constant">1</span></pre>
<span id=rimstone_copied_1071 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_1071' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_1071, code_1071, rimstone_copied_1071)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<div class="vsub"><a id="See also"></a>See also</div>
 <a name='Math functions'></a><span style="font-weight:bold;">Math functions</span><br/>
<a href='/abd.html'>abd</a> &nbsp;<br/>
<a href='/abn.html'>abn</a> &nbsp;<br/>
<a href='/acos.html'>acos</a> &nbsp;<br/>
<a href='/acosh.html'>acosh</a> &nbsp;<br/>
<a href='/asin.html'>asin</a> &nbsp;<br/>
<a href='/asinh.html'>asinh</a> &nbsp;<br/>
<a href='/atan.html'>atan</a> &nbsp;<br/>
<a href='/atan2.html'>atan2</a> &nbsp;<br/>
<a href='/atanh.html'>atanh</a> &nbsp;<br/>
<a href='/cbrt.html'>cbrt</a> &nbsp;<br/>
<a href='/ceil.html'>ceil</a> &nbsp;<br/>
<a href='/copysign.html'>copysign</a> &nbsp;<br/>
<a href='/cos.html'>cos</a> &nbsp;<br/>
<a href='/cosh.html'>cosh</a> &nbsp;<br/>
<a href='/dbl.html'>dbl</a> &nbsp;<br/>
<a href='/erf.html'>erf</a> &nbsp;<br/>
<a href='/erfc.html'>erfc</a> &nbsp;<br/>
<a href='/exp.html'>exp</a> &nbsp;<br/>
<a href='/exp2.html'>exp2</a> &nbsp;<br/>
<a href='/floor.html'>floor</a> &nbsp;<br/>
<a href='/fmod.html'>fmod</a> &nbsp;<br/>
<a href='/hypot.html'>hypot</a> &nbsp;<br/>
<a href='/isinf.html'>isinf</a> &nbsp;<br/>
<a href='/isnan.html'>isnan</a> &nbsp;<br/>
<a href='/ldexp.html'>ldexp</a> &nbsp;<br/>
<a href='/lgamma.html'>lgamma</a> &nbsp;<br/>
<a href='/log.html'>log</a> &nbsp;<br/>
<a href='/log10.html'>log10</a> &nbsp;<br/>
<a href='/log2.html'>log2</a> &nbsp;<br/>
<a href='/math-functions.html'>math-functions</a> &nbsp;<br/>
<a href='/nextafter.html'>nextafter</a> &nbsp;<br/>
<a href='/num.html'>num</a> &nbsp;<br/>
<a href='/pow.html'>pow</a> &nbsp;<br/>
<a href='/round.html'>round</a> &nbsp;<br/>
<a href='/sin.html'>sin</a> &nbsp;<br/>
<a href='/sinh.html'>sinh</a> &nbsp;<br/>
<a href='/sqrt.html'>sqrt</a> &nbsp;<br/>
<a href='/tan.html'>tan</a> &nbsp;<br/>
<a href='/tanh.html'>tanh</a> &nbsp;<br/>
<a href='/trunc.html'>trunc</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='/documentation.html'>documentation</a><br/>
<a id='split-string.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:left;background-color:white;'><a href='https://rimstone-lang.com' style='border-bottom:0px'><img src='https://rimstone-lang.com/rimstone.png' style='width:180px;height:auto'/></a></div><div class='vhub' style='margin-top:10px;'>Split string</div><hr/><span style="font-weight:bold;">Purpose</span>: Split a string into pieces based on a delimiter.<br/>
<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_1076' class=notranslate>
<span class="Statement">split-string</span>  &lt;string&gt;<span class="Identifier"> with</span> &lt;delimiter&gt;<span class="Type"> to</span> &lt;result&gt; [<span class="Type"> count</span> &lt;count&gt; ]

<span class="Statement">split-string</span><span class="Identifier"> delete</span> &lt;result&gt;</pre>
<span id=rimstone_copied_1076 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_1076' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_1076, code_1076, rimstone_copied_1076)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
split-string will find all instances of string &lt;delimiter&gt; in &lt;string&gt; and then split it into pieces delimited by string &lt;delimiter&gt;. The &lt;result&gt; can be used with <a href='/read-split.html'>read-split</a> to obtain the pieces and with split-string to delete it (use "delete" clause with &lt;result&gt; to delete it).<br/>
<br/>
If "count" clause is used, then the number of pieces is in &lt;count&gt;.<br/>
<br/>
All pieces produced will be trimmed both on left and right. If a piece is double quoted, then double quotes are removed. For instance save this code in "ps.rim" in a separate directory:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_1079' class=notranslate>
<span class="Statement">%%</span> /parse<span class="Identifier"> public</span>
<span class="Statement">    set-string</span> clist = <span class="Constant">&quot;a , b, </span><span class="Special">\&quot;</span><span class="Constant">c , d</span><span class="Special">\&quot;</span><span class="Constant"> , e&quot;</span>
<span class="Statement">    split-string</span> clist<span class="Identifier"> with</span> <span class="Constant">&quot;,&quot;</span><span class="Type"> to</span> res<span class="Type"> count</span> tot
<span class="Statement">    start-loop</span><span class="Identifier"> repeat</span> tot<span class="Type"> use</span> i
<span class="Statement">        read-split</span> i<span class="Identifier"> from</span> res<span class="Type"> to</span> item<span class="Type"> status</span> st
<span class="Statement">        if-true</span> st<span class="Identifier"> not-equal</span> RIM_OKAY
<span class="Statement">            break-loop</span>
<span class="Statement">        end-if</span>
        <span class="Comment">// Output each item</span>
<span class="Statement">        print-format</span> <span class="Constant">&quot; [</span><span class="Special">%s</span><span class="Constant">]&quot;</span>, item
<span class="Statement">    end-loop</span>
<span class="Statement">%%</span></pre>
<span id=rimstone_copied_1079 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_1079' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_1079, code_1079, rimstone_copied_1079)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Create the application, build and run it:<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_1077' class=notranslate>
rim <span class="Special">-k</span> ps
rim <span class="Special">-q</span>
rim <span class="Special">-r</span> <span class="Special">--req</span><span class="Statement">=</span><span class="Statement">&quot;</span><span class="Constant">/parse</span><span class="Statement">&quot;</span> <span class="Special">--exec</span> <span class="Special">--silent-header</span></pre>
<span id=rimstone_copied_1077 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_1077' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_1077, code_1077, rimstone_copied_1077)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
The output would be:<br/>
<div class='ncode' style='position:relative;padding-right:16px;'>
<pre id='code_1075' class=notranslate>
 [a] [b] [c , d] [e]</pre>
<span id=rimstone_copied_1075 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_1075' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_1075, code_1075, rimstone_copied_1075)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
split-string is useful for parsing CSV (Comma Separated Values) or any other kind of separated values, where separator can be any string of any length, for example if you're parsing an encoded URL-string, then "&amp;amp;" may be a separator, as in the example below.<br/>
<div class="vsub"><a id="Examples"></a>Examples</div>
The following will parse a string containing name/value pairs (such as "name=value") separated by string "&amp;amp;":<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_1080' class=notranslate>
<span class="Statement">%%</span> /parse-url<span class="Identifier"> public</span>
    <span class="Comment">// Data to parse - data/value pairs delimited by </span><span class="Constant">&quot;&amp;amp;&quot;</span><span class="Comment"> string, and data and value delimited by equal sign:</span>
<span class="Statement">    set-string</span> url =<span class="Constant">&quot;x=23&amp;amp;y=good&amp;amp;z=hello_world&quot;</span>

    <span class="Comment">// Split string first into pieces based on </span><span class="Constant">&quot;amp;&quot;</span>
<span class="Statement">    split-string</span> url<span class="Identifier"> with</span> <span class="Constant">&quot;&amp;amp;&quot;</span><span class="Type"> to</span> url_var<span class="Type"> count</span> tot

    <span class="Comment">// For each of name=value pairs, split it with equal sign</span>
<span class="Statement">    start-loop</span><span class="Identifier"> repeat</span> tot<span class="Type"> use</span> i
        <span class="Comment">// Get a url pair (each separated with </span><span class="Constant">&quot;&amp;amp;&quot;</span><span class="Comment">)</span>
<span class="Statement">        read-split</span> i<span class="Identifier"> from</span> url_var<span class="Type"> to</span> item
        <span class="Comment">// Then split that with </span><span class="Constant">&quot;=&quot;</span><span class="Comment"> </span>
<span class="Statement">        split-string</span> item<span class="Identifier"> with</span> <span class="Constant">&quot;=&quot;</span><span class="Type"> to</span> item_var
        <span class="Comment">// Get name and value</span>
<span class="Statement">        read-split</span> <span class="Constant">1</span><span class="Identifier"> from</span> item_var<span class="Type"> to</span> name
<span class="Statement">        read-split</span> <span class="Constant">2</span><span class="Identifier"> from</span> item_var<span class="Type"> to</span> val
<span class="Statement">        print-format</span> <span class="Constant">&quot;Variable </span><span class="Special">%s</span><span class="Constant"> has value </span><span class="Special">%s</span><span class="Special">\n</span><span class="Constant">&quot;</span>, name, val
<span class="Statement">    end-loop</span>
<span class="Statement">%%</span></pre>
<span id=rimstone_copied_1080 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_1080' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_1080, code_1080, rimstone_copied_1080)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
The result is:<br/>
<div class='ncode' style='position:relative;padding-right:16px;'>
<pre id='code_1078' class=notranslate>
Variable x has value 23
Variable y has value good
Variable z has value hello_world</pre>
<span id=rimstone_copied_1078 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_1078' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_1078, code_1078, rimstone_copied_1078)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<div class="vsub"><a id="See also"></a>See also</div>
 <a name='Strings'></a><span style="font-weight:bold;">Strings</span><br/>
<a href='/copy-string.html'>copy-string</a> &nbsp;<br/>
<a href='/count-substring.html'>count-substring</a> &nbsp;<br/>
<a href='/delete-string.html'>delete-string</a> &nbsp;<br/>
<a href='/double-string.html'>double-string</a> &nbsp;<br/>
<a href='/lower-string.html'>lower-string</a> &nbsp;<br/>
<a href='/match-regex.html'>match-regex</a> &nbsp;<br/>
<a href='/new-string.html'>new-string</a> &nbsp;<br/>
<a href='/number-string.html'>number-string</a> &nbsp;<br/>
<a href='/read-split.html'>read-split</a> &nbsp;<br/>
<a href='/replace-string.html'>replace-string</a> &nbsp;<br/>
<a href='/scan-string.html'>scan-string</a> &nbsp;<br/>
<a href='/set-string.html'>set-string</a> &nbsp;<br/>
<a href='/split-string.html'>split-string</a> &nbsp;<br/>
<a href='/string-double.html'>string-double</a> &nbsp;<br/>
<a href='/string-expressions.html'>string-expressions</a> &nbsp;<br/>
<a href='/string-length.html'>string-length</a> &nbsp;<br/>
<a href='/string-number.html'>string-number</a> &nbsp;<br/>
<a href='/trim-string.html'>trim-string</a> &nbsp;<br/>
<a href='/upper-string.html'>upper-string</a> &nbsp;<br/>
<a href='/write-string.html'>write-string</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='/documentation.html'>documentation</a><br/>
<a id='sqlite-database.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:left;background-color:white;'><a href='https://rimstone-lang.com' style='border-bottom:0px'><img src='https://rimstone-lang.com/rimstone.png' style='width:180px;height:auto'/></a></div><div class='vhub' style='margin-top:10px;'>Sqlite database</div><hr/>SQLite database configuration file should contain a single line of text, and it must be the full path to the SQLite database file used, for example (if you keep it in RimStone's application directory):<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_1081' class=notranslate>
/home/myuser/.rimstone/apps/&lt;app name&gt;/app/&lt;db name&gt;.db</pre>
<span id=rimstone_copied_1081 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_1081' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_1081, code_1081, rimstone_copied_1081)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Note that you can use tilde (~) as the first character of the path to signify user's home directory, so in the above example it could be "~/.rimstone/apps/&lt;app name&gt;/app/&lt;db name&gt;.db".<br/>
<div class="vsub"><a id="See also"></a>See also</div>
 <a name='Database'></a><span style="font-weight:bold;">Database</span><br/>
<a href='/begin-transaction.html'>begin-transaction</a> &nbsp;<br/>
<a href='/commit-transaction.html'>commit-transaction</a> &nbsp;<br/>
<a href='/current-row.html'>current-row</a> &nbsp;<br/>
<a href='/database-config-file.html'>database-config-file</a> &nbsp;<br/>
<a href='/db-error.html'>db-error</a> &nbsp;<br/>
<a href='/mariadb-database.html'>mariadb-database</a> &nbsp;<br/>
<a href='/postgresql-database.html'>postgresql-database</a> &nbsp;<br/>
<a href='/rollback-transaction.html'>rollback-transaction</a> &nbsp;<br/>
<a href='/run-query.html'>run-query</a> &nbsp;<br/>
<a href='/sqlite-database.html'>sqlite-database</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='/documentation.html'>documentation</a><br/>
<a id='sqrt.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:left;background-color:white;'><a href='https://rimstone-lang.com' style='border-bottom:0px'><img src='https://rimstone-lang.com/rimstone.png' style='width:180px;height:auto'/></a></div><div class='vhub' style='margin-top:10px;'>Sqrt</div><hr/><span style="font-weight:bold;">Purpose</span>: Square root.<br/>
<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_1082' class=notranslate>
sqrt( &lt;var&gt; )</pre>
<span id=rimstone_copied_1082 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_1082' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_1082, code_1082, rimstone_copied_1082)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
sqrt returns the non-negative square root of &lt;var&gt;. &lt;var&gt; is a number or a double and the result is a double.<br/>
<div class="vsub"><a id="Examples"></a>Examples</div>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_1083' class=notranslate>
<span class="Statement">set-double</span> d = sqrt(<span class="Constant">1</span>) + <span class="Constant">1</span></pre>
<span id=rimstone_copied_1083 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_1083' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_1083, code_1083, rimstone_copied_1083)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<div class="vsub"><a id="See also"></a>See also</div>
 <a name='Math functions'></a><span style="font-weight:bold;">Math functions</span><br/>
<a href='/abd.html'>abd</a> &nbsp;<br/>
<a href='/abn.html'>abn</a> &nbsp;<br/>
<a href='/acos.html'>acos</a> &nbsp;<br/>
<a href='/acosh.html'>acosh</a> &nbsp;<br/>
<a href='/asin.html'>asin</a> &nbsp;<br/>
<a href='/asinh.html'>asinh</a> &nbsp;<br/>
<a href='/atan.html'>atan</a> &nbsp;<br/>
<a href='/atan2.html'>atan2</a> &nbsp;<br/>
<a href='/atanh.html'>atanh</a> &nbsp;<br/>
<a href='/cbrt.html'>cbrt</a> &nbsp;<br/>
<a href='/ceil.html'>ceil</a> &nbsp;<br/>
<a href='/copysign.html'>copysign</a> &nbsp;<br/>
<a href='/cos.html'>cos</a> &nbsp;<br/>
<a href='/cosh.html'>cosh</a> &nbsp;<br/>
<a href='/dbl.html'>dbl</a> &nbsp;<br/>
<a href='/erf.html'>erf</a> &nbsp;<br/>
<a href='/erfc.html'>erfc</a> &nbsp;<br/>
<a href='/exp.html'>exp</a> &nbsp;<br/>
<a href='/exp2.html'>exp2</a> &nbsp;<br/>
<a href='/floor.html'>floor</a> &nbsp;<br/>
<a href='/fmod.html'>fmod</a> &nbsp;<br/>
<a href='/hypot.html'>hypot</a> &nbsp;<br/>
<a href='/isinf.html'>isinf</a> &nbsp;<br/>
<a href='/isnan.html'>isnan</a> &nbsp;<br/>
<a href='/ldexp.html'>ldexp</a> &nbsp;<br/>
<a href='/lgamma.html'>lgamma</a> &nbsp;<br/>
<a href='/log.html'>log</a> &nbsp;<br/>
<a href='/log10.html'>log10</a> &nbsp;<br/>
<a href='/log2.html'>log2</a> &nbsp;<br/>
<a href='/math-functions.html'>math-functions</a> &nbsp;<br/>
<a href='/nextafter.html'>nextafter</a> &nbsp;<br/>
<a href='/num.html'>num</a> &nbsp;<br/>
<a href='/pow.html'>pow</a> &nbsp;<br/>
<a href='/round.html'>round</a> &nbsp;<br/>
<a href='/sin.html'>sin</a> &nbsp;<br/>
<a href='/sinh.html'>sinh</a> &nbsp;<br/>
<a href='/sqrt.html'>sqrt</a> &nbsp;<br/>
<a href='/tan.html'>tan</a> &nbsp;<br/>
<a href='/tanh.html'>tanh</a> &nbsp;<br/>
<a href='/trunc.html'>trunc</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='/documentation.html'>documentation</a><br/>
<a id='start-loop.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:left;background-color:white;'><a href='https://rimstone-lang.com' style='border-bottom:0px'><img src='https://rimstone-lang.com/rimstone.png' style='width:180px;height:auto'/></a></div><div class='vhub' style='margin-top:10px;'>Start loop</div><hr/><span style="font-weight:bold;">Purpose</span>: Loop execution based on a condition.<br/>
<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_1084' class=notranslate>
<span class="Statement">start-loop</span>  [<span class="Identifier"> repeat</span> &lt;repeat&gt; ] \
    [<span class="Type"> use</span> &lt;loop counter&gt; \
        [<span class="Identifier"> start-with</span> &lt;start with&gt; ] [<span class="Identifier"> add</span> &lt;add&gt; ] ]

    &lt;any code&gt;

<span class="Statement">end-loop</span></pre>
<span id=rimstone_copied_1084 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_1084' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_1084, code_1084, rimstone_copied_1084)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
start-loop will execute code between start-loop and "end-loop" clauses certain number of times based on a condition specified and the usage of <a href='/continue-loop.html'>continue-loop</a> and <a href='/break-loop.html'>break-loop</a>, which can be used in-between the two.<br/>
<br/>
&lt;repeat&gt; number (in "repeat" clause) specifies how many times to execute the loop (barring use of <a href='/continue-loop.html'>continue-loop</a> and <a href='/break-loop.html'>break-loop</a>). <br/>
<br/>
&lt;loop counter&gt; (in "use" clause) is a number that by default starts with value of 1, and is incremented by 1 each time execution loops back to start-loop, unless "start-with" and/or "add" clauses are used. The end value of &lt;loop counter&gt; (just outside "end-loop") is the first value past the last loop.<br/>
<br/>
If &lt;start with&gt; (in "start-with" clause) is used, that's the initial value for &lt;loop counter&gt; (instead of the default 1), and if &lt;add&gt; is specified (in "add" clause), then &lt;loop counter&gt; is incremented by &lt;add&gt; each time execution loops back to start-loop (instead of the default 1). &lt;add&gt; can be positive or negative.<br/>
<br/>
If either of "start-with" or "add" clauses is used, then "use" must be specified. <br/>
<div class="vsub"><a id="Examples"></a>Examples</div>
Print numbers 0 through 19:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_1085' class=notranslate>
<span class="Statement">start-loop</span><span class="Identifier"> repeat</span> <span class="Constant">20</span><span class="Type"> use</span> p<span class="Identifier"> start-with</span> <span class="Constant">0</span>
<span class="Statement">    print-out</span> p
<span class="Statement">    @</span>
<span class="Statement">end-loop</span></pre>
<span id=rimstone_copied_1085 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_1085' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_1085, code_1085, rimstone_copied_1085)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
A loop that is controlled via <a href='/continue-loop.html'>continue-loop</a> and <a href='/break-loop.html'>break-loop</a> statements, displaying numbers from 1 through 30 but omitting those divisible with 3:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_1086' class=notranslate>
<span class="Statement">set-number</span> n
<span class="Statement">set-number</span> max = <span class="Constant">30</span>
<span class="Statement">start-loop</span>
<span class="Statement">    set-number</span> n add <span class="Constant">1</span>
<span class="Statement">    if-true</span> n<span class="Identifier"> every</span> <span class="Constant">3</span>
<span class="Statement">        continue-loop</span>
<span class="Statement">    end-if</span>
<span class="Statement">    if-true</span> n<span class="Identifier"> greater-than</span> max
<span class="Statement">        break-loop</span>
<span class="Statement">    end-if</span>
<span class="Statement">    print-out</span> n
<span class="Statement">end-loop</span></pre>
<span id=rimstone_copied_1086 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_1086' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_1086, code_1086, rimstone_copied_1086)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<div class="vsub"><a id="See also"></a>See also</div>
 <a name='Program flow'></a><span style="font-weight:bold;">Program flow</span><br/>
<a href='/break-loop.html'>break-loop</a> &nbsp;<br/>
<a href='/call-handler.html'>call-handler</a> &nbsp;<br/>
<a href='/code-blocks.html'>code-blocks</a> &nbsp;<br/>
<a href='/continue-loop.html'>continue-loop</a> &nbsp;<br/>
<a href='/do-once.html'>do-once</a> &nbsp;<br/>
<a href='/exit-handler.html'>exit-handler</a> &nbsp;<br/>
<a href='/if-defined.html'>if-defined</a> &nbsp;<br/>
<a href='/if-true.html'>if-true</a> &nbsp;<br/>
<a href='/quit-process.html'>quit-process</a> &nbsp;<br/>
<a href='/return-handler.html'>return-handler</a> &nbsp;<br/>
<a href='/start-loop.html'>start-loop</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='/documentation.html'>documentation</a><br/>
<a id='statements.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:left;background-color:white;'><a href='https://rimstone-lang.com' style='border-bottom:0px'><img src='https://rimstone-lang.com/rimstone.png' style='width:180px;height:auto'/></a></div><div class='vhub' style='margin-top:10px;'>Statements</div><hr/><div class="vsub"><a id="Statements"></a>Statements</div>
RimStone statements generally have three components separated by space(s):<br/>
<ul><li>a name,<br/>
</li><li>an object,<br/>
</li><li>clauses.</li></ul>
A statement starts with a name, which designates its main purpose. <br/>
<br/>
An object denotes what is referenced by a statement. <br/>
<br/>
Each clause that follows consist of a clause name followed either with no arguments, or with one or more arguments. A clause may have subclauses immediately afterwards, which follow the same structure. Most clauses are separated by space(s), however some (like "=" or "@") may not need space(s) before any data; the statement's documentation would clearly specify this.<br/>
<br/>
An object must immediately follow the statement's name, while clauses may be specified in any order.<br/>
<br/>
For example, in the following RimStone code:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_1087' class=notranslate>
<span class="Statement">encrypt-data</span> orig_data<span class="Identifier"> input-length</span> <span class="Constant">6</span><span class="Identifier"> password</span> <span class="Constant">&quot;mypass&quot;</span><span class="Identifier"> salt</span> newsalt<span class="Type"> to</span> res<span class="Identifier"> binary</span></pre>
<span id=rimstone_copied_1087 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_1087' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_1087, code_1087, rimstone_copied_1087)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
encrypt-data is the statement's name, and "orig_data" is its object. The clauses are:<br/>
<ul><li>input-length 6<br/>
</li><li>password "mypass"<br/>
</li><li>salt newsalt<br/>
</li><li>to res <br/>
</li><li>binary</li></ul>
The clauses can be in any order, so the above can be restated as:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_1088' class=notranslate>
<span class="Statement">encrypt-data</span> orig_data<span class="Type"> to</span> res<span class="Identifier"> password</span> <span class="Constant">&quot;mypass&quot;</span><span class="Identifier"> salt</span> newsalt<span class="Identifier"> binary input-length</span> <span class="Constant">6</span></pre>
<span id=rimstone_copied_1088 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_1088' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_1088, code_1088, rimstone_copied_1088)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
RimStone documentation provides a concise BNF-like notation of how each statement works, which in case of <a href='/encrypt-data.html'>encrypt-data</a> is (backslash simply allows continuing to multiple lines):<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_1089' class=notranslate>
<span class="Statement">encrypt-data</span> &lt;data&gt;<span class="Type"> to</span> &lt;result&gt; \
    [<span class="Identifier"> input-length</span> &lt;input length&gt; ] \
    [<span class="Identifier"> binary</span> [ &lt;binary&gt; ] ] \
    (<span class="Identifier"> password</span> &lt;password&gt; \
        [<span class="Identifier"> salt</span> &lt;salt&gt; [<span class="Identifier"> salt-length</span> &lt;salt length&gt; ] ] \
        [<span class="Identifier"> iterations</span> &lt;iterations&gt; ] \
        [<span class="Identifier"> cipher</span> &lt;cipher algorithm&gt; ] \
        [<span class="Identifier"> digest</span> &lt;digest algorithm&gt; ]
        [<span class="Identifier"> cache</span> ]
        [<span class="Identifier"> clear-cache</span> &lt;clear cache&gt; <span class="Error">)</span> \
    [<span class="Identifier"> init-vector</span> &lt;init vector&gt; ]</pre>
<span id=rimstone_copied_1089 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_1089' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_1089, code_1089, rimstone_copied_1089)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Note the color scheme: clauses with input data are in blue, and with output data in green.<br/>
<br/>
Optional clauses are enclosed with angle brackets (i.e between "[" and "]").<br/>
<br/>
Arguments (in general variables and constants) are stated between "&lt;" and "&gt;". <br/>
<br/>
If only one of a number of clauses may appear, such clauses are separated by "|".<br/>
<br/>
A group of clauses that cannot be separated, or to remove ambiguity, are enclosed with "(" and ")". <br/>
<br/>
Keywords (other than statement names such as encrypt-data above) are generally specific to each statement. So, keyword "salt", for example, has meaning only within encrypt-data and a few other related statements. In order to have the freedom to choose your variable names, you can simply surround them in parenthesis (i.e. "(" and ")") and use any names you want, even keywords, for example:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_1090' class=notranslate>
<span class="Statement">set-string</span> password = <span class="Constant">&quot;some password&quot;</span>
<span class="Statement">set-string</span> salt = <span class="Constant">&quot;0123456789012345&quot;</span>
<span class="Statement">encrypt-data</span> <span class="Constant">&quot;some data&quot;</span><span class="Identifier"> password</span> (password)<span class="Identifier"> salt</span> (salt)<span class="Type"> to</span> enc_data
<span class="Statement">print-out</span> enc_data</pre>
<span id=rimstone_copied_1090 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_1090' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_1090, code_1090, rimstone_copied_1090)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
In this example, keywords "password" and "salt" are used as variable names as well.<br/>
<br/>
Note that while you can use tab characters at the beginning of the line (such as for indentation), as well as in string literals, do not use tabs in RimStone statements otherwise as they are not supported for lack of readability - use plain spaces.<br/>
<div class="vsub"><a id="Splitting statement into multiple lines, space trimming"></a>Splitting statement into multiple lines, space trimming</div>
To split a statement into multiple lines (including string continuations), use a backslash (\), for instance:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_1091' class=notranslate>
<span class="Statement">encrypt-data</span> orig_data<span class="Identifier"> input-length</span> <span class="Constant">6</span> \
   <span class="Identifier"> password</span> <span class="Constant">&quot;my</span><span class="Special">\</span>
<span class="Constant">    pass&quot;</span><span class="Identifier"> salt</span> \
    newsalt<span class="Type"> to</span> res<span class="Identifier"> binary</span></pre>
<span id=rimstone_copied_1091 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_1091' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_1091, code_1091, rimstone_copied_1091)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Note that all statements are always left-trimmed for whitespace. Thus the resulting string literal in the above example is "mypass", and not "my &nbsp; pass", as the whitespaces prior to line starting with "pass" are trimmed first. Also, all statements are right-trimmed for white space, except if backslash is used at the end, in which case any spaces prior to backslash are conserved. For that reason, in the above example there is a space prior to a backslash where clauses need to be separated.<br/>
<br/>
Note that <a href='/begin-handler.html'>begin-handler</a> statement cannot be split with backsplash, i.e. it must always be on a single line for readability.<br/>
<div class="vsub"><a id="Comments"></a>Comments</div>
You can use both C style (i.e. /* ... */) and C++ style (i.e. //) comments with RimStone statements, including within statements (with the exception of /*..*/ before statement name for readability), for example:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_1092' class=notranslate>
<span class="Statement">run-query</span> @db = \
    <span class="Constant">&quot;select firstName, lastName from employee where yearOfHire&gt;='</span><span class="Special">%s</span><span class="Constant">'&quot;</span> \
   <span class="Type"> output</span> <span class="Comment">/*</span><span class="Comment"> comment within </span><span class="Comment">*/</span> firstName, lastName<span class="Identifier"> :</span> <span class="Constant">&quot;2015&quot;</span> <span class="Comment">// other comment</span></pre>
<span id=rimstone_copied_1092 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_1092' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_1092, code_1092, rimstone_copied_1092)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<div class="vsub"><a id="Error handling"></a>Error handling</div>
A statement that fails for reasons that are generally irrecoverable will <a href='/error-handling.html'>error out</a>, for example out of memory or disk space, bad input parameters etc. <br/>
<br/>
RimStone philosophy is to minimize the need to check for such conditions by preventing the program from continuing. This is preferable, as forgetting to check usually results in unforeseen bugs and safety issues, and the program should have stopped anyway. <br/>
<br/>
Errors that are correctable programmatically are reported and you can check them, for example when opening a file that may or may not exist.<br/>
<br/>
Overall, the goal is to stop execution when necessary and to offer the ability to handle an issue when warranted, in order to increase run-time safety and provide instant clues about conditions that must be corrected.<br/>
<div class="vsub"><a id="An interesting side effect"></a>An interesting side effect</div>
One side effect of how RimStone does things is that each statement uses whatever natural words describe its function. For instance <a href='/call-web.html'>call-web</a> statement (which calls a web resource like an URL) will use clauses like "response", "status", "method", "request-body", "cookie-jar" etc, which are obviously evocative of the data either supplied or expected from the statement. And such clauses can be put in any order. That's great. In another statement however, all these clauses can be variable names. It means that RimStone is natively context sensitive. While that can be achieved with most parsing tools, it does get dicey, which is why RimStone parser is hand made.<br/>
<div class="vsub"><a id="See also"></a>See also</div>
 <a name='Language'></a><span style="font-weight:bold;">Language</span><br/>
<a href='/inline-code.html'>inline-code</a> &nbsp;<br/>
<a href='/statements.html'>statements</a> &nbsp;<br/>
<a href='/syntax-highlighting.html'>syntax-highlighting</a> &nbsp;<br/>
<a href='/unused-var.html'>unused-var</a> &nbsp;<br/>
<a href='/variable-scope.html'>variable-scope</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='/documentation.html'>documentation</a><br/>
<a id='stat-file.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:left;background-color:white;'><a href='https://rimstone-lang.com' style='border-bottom:0px'><img src='https://rimstone-lang.com/rimstone.png' style='width:180px;height:auto'/></a></div><div class='vhub' style='margin-top:10px;'>Stat file</div><hr/><span style="font-weight:bold;">Purpose</span>: Get information about a file.<br/>
<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_1093' class=notranslate>
<span class="Statement">stat-file</span> &lt;file&gt; \
    [<span class="Type"> size</span> &lt;size&gt; ] [<span class="Type"> type</span> &lt;type&gt; ] \
    [<span class="Type"> path</span> &lt;path&gt; ] [<span class="Type"> name</span> &lt;name&gt; ] \
    [<span class="Type"> mode</span> &lt;mode&gt; ]</pre>
<span id=rimstone_copied_1093 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_1093' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_1093, code_1093, rimstone_copied_1093)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
stat-file obtains information about &lt;file&gt;, which is a string that is an absolute or relative path.<br/>
<br/>
Clause "size" will store file's size in bytes to number &lt;size&gt;, or it will be RIM_ERR_FAILED (if operation failed, likely because file does not exist or you have no permissions to access it). <br/>
<br/>
Clause "type" will store file's type to number &lt;type&gt;, and it can be either RIM_FILE (if it's a file) or RIM_DIR (if it's a directory) or RIM_ERR_FAILED (if operation failed, likely because file does not exist or you have no permissions to access it). <br/>
<br/>
Clause "path" (in string &lt;path&gt;) obtains the fully resolved path of the &lt;file&gt; (including symbolic links), and "name" will provide its &lt;name&gt; (meaning a basename, without the path). If path cannot be resolved, then &lt;path&gt; is an empty string.<br/>
<br/>
Clause "mode" will store file's permission mode to number &lt;mode&gt;, see <a href='/permissions.html'>permissions</a>.<br/>
<div class="vsub"><a id="Examples"></a>Examples</div>
To get file size in variable "sz", which is created here:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_1094' class=notranslate>
<span class="Statement">stat-file</span> <span class="Constant">&quot;/home/user/file&quot;</span><span class="Type"> size</span> sz</pre>
<span id=rimstone_copied_1094 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_1094' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_1094, code_1094, rimstone_copied_1094)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
To determine if the object is a file or a directory:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_1095' class=notranslate>
<span class="Statement">stat-file</span> <span class="Constant">&quot;/home/user/some_name&quot;</span><span class="Type"> type</span> what
<span class="Statement">if-true</span> what<span class="Identifier"> equal</span> RIM_FILE
<span class="Statement">   @</span>It's a file!
<span class="Statement">else-if</span> what<span class="Identifier"> equal</span> RIM_DIR
<span class="Statement">   @</span>It's a directory!
<span class="Statement">else-if</span>
<span class="Statement">   @</span>Doesn't exist!
<span class="Statement">end-if</span></pre>
<span id=rimstone_copied_1095 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_1095' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_1095, code_1095, rimstone_copied_1095)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Get the fully resolved path of a file to string variable "fp" and the name of the file:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_1096' class=notranslate>
<span class="Statement">stat-file</span> <span class="Constant">&quot;../file&quot;</span><span class="Type"> path</span> fp<span class="Type"> name</span> fn</pre>
<span id=rimstone_copied_1096 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_1096' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_1096, code_1096, rimstone_copied_1096)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<div class="vsub"><a id="See also"></a>See also</div>
 <a name='Files'></a><span style="font-weight:bold;">Files</span><br/>
<a href='/change-mode.html'>change-mode</a> &nbsp;<br/>
<a href='/close-file.html'>close-file</a> &nbsp;<br/>
<a href='/copy-file.html'>copy-file</a> &nbsp;<br/>
<a href='/delete-file.html'>delete-file</a> &nbsp;<br/>
<a href='/file-position.html'>file-position</a> &nbsp;<br/>
<a href='/file-storage.html'>file-storage</a> &nbsp;<br/>
<a href='/file-uploading.html'>file-uploading</a> &nbsp;<br/>
<a href='/get-upload.html'>get-upload</a> &nbsp;<br/>
<a href='/lock-file.html'>lock-file</a> &nbsp;<br/>
<a href='/open-file.html'>open-file</a> &nbsp;<br/>
<a href='/read-file.html'>read-file</a> &nbsp;<br/>
<a href='/read-line.html'>read-line</a> &nbsp;<br/>
<a href='/rename-file.html'>rename-file</a> &nbsp;<br/>
<a href='/stat-file.html'>stat-file</a> &nbsp;<br/>
<a href='/temporary-file.html'>temporary-file</a> &nbsp;<br/>
<a href='/uniq-file.html'>uniq-file</a> &nbsp;<br/>
<a href='/unlock-file.html'>unlock-file</a> &nbsp;<br/>
<a href='/write-file.html'>write-file</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='/documentation.html'>documentation</a><br/>
<a id='string-double.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:left;background-color:white;'><a href='https://rimstone-lang.com' style='border-bottom:0px'><img src='https://rimstone-lang.com/rimstone.png' style='width:180px;height:auto'/></a></div><div class='vhub' style='margin-top:10px;'>String double</div><hr/><span style="font-weight:bold;">Purpose</span>: Convert string to double.<br/>
<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_1097' class=notranslate>
<span class="Statement">string-double</span> &lt;string&gt; [<span class="Type"> to</span> &lt;<span class="Type">double</span>&gt; ] \
    [<span class="Type"> status</span> &lt;status&gt; ]</pre>
<span id=rimstone_copied_1097 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_1097' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_1097, code_1097, rimstone_copied_1097)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
&lt;string&gt; is converted to &lt;double&gt; in "to" clause.<br/>
<br/>
&lt;status&gt; double (in "status" clause) is RIM_OKAY if conversion was successful. If it wasn't successful, &lt;double&gt; is 0.0 and &lt;status&gt; is RIM_ERR_OVERFLOW if &lt;string&gt; represents a double that requires over 64 bits of storage, RIM_ERR_INVALID if cannot convert, RIM_ERR_EXIST if &lt;string&gt; is empty or no digits specified. If there are trailing invalid characters (for instance "182.33xy"), &lt;double&gt; is the result of conversion up to the first invalid character and &lt;status&gt; is RIM_ERR_TOO_MANY. In this example, &lt;double&gt; would be 182.33.<br/>
<div class="vsub"><a id="Shortcut"></a>Shortcut</div>
For convenience, you can use a shortcut for converting a string to a double, by prepending "##" to the variable name, for example:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_1098' class=notranslate>
<span class="Statement">set-string</span> s = <span class="Constant">&quot;-10.31&quot;</span>
<span class="Statement">set-double</span> n = ##s + <span class="Constant">10</span></pre>
<span id=rimstone_copied_1098 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_1098' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_1098, code_1098, rimstone_copied_1098)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
The above is the same as:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_1099' class=notranslate>
<span class="Statement">set-string</span> s = <span class="Constant">&quot;-10.31&quot;</span>
<span class="Statement">string-double</span> s<span class="Type"> to</span> val
<span class="Statement">set-double</span> n = val + <span class="Constant">10</span></pre>
<span id=rimstone_copied_1099 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_1099' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_1099, code_1099, rimstone_copied_1099)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Effectively, ## in front of a string variable is the same as string-double that converts it to a double. If a string cannot be converted to a double, your program will <a href='/error-handling.html'>error out</a>. To check values with a status, use string-double.<br/>
<br/>
You can use ## for an expression, in which case the expression must be within parenthesis:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_1100' class=notranslate>
<span class="Statement">set-string</span> s1 = <span class="Constant">&quot;-10.31&quot;</span>
<span class="Statement">set-string</span> s2 = <span class="Constant">&quot;2&quot;</span>
<span class="Statement">set-double</span> n = ##(s1+s2) + <span class="Constant">10</span></pre>
<span id=rimstone_copied_1100 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_1100' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_1100, code_1100, rimstone_copied_1100)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
In this case double "n" will have value of -0.312, because strings "s1" and "s2" concatenate to produce "-10.312", which is then converted to a double and finally 10 added to it, producing -0.312.<br/>
<div class="vsub"><a id="Examples"></a>Examples</div>
In this example, double "n" would be 49.11 and status "st" would be RIM_OKAY:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_1101' class=notranslate>
<span class="Statement">string-double</span> <span class="Constant">&quot;49.11&quot;</span><span class="Type"> to</span> n<span class="Type"> status</span> st</pre>
<span id=rimstone_copied_1101 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_1101' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_1101, code_1101, rimstone_copied_1101)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<div class="vsub"><a id="See also"></a>See also</div>
 <a name='Doubles'></a><span style="font-weight:bold;">Doubles</span><br/>
<a href='/abs-double.html'>abs-double</a> &nbsp;<br/>
<a href='/double-expressions.html'>double-expressions</a> &nbsp;<br/>
<a href='/double-string.html'>double-string</a> &nbsp;<br/>
<a href='/mixing-doubles-and-numbers.html'>mixing-doubles-and-numbers</a> &nbsp;<br/>
<a href='/set-double.html'>set-double</a> &nbsp;<br/>
<a href='/string-double.html'>string-double</a> &nbsp; <br/>
 <a name='Strings'></a><span style="font-weight:bold;">Strings</span><br/>
<a href='/copy-string.html'>copy-string</a> &nbsp;<br/>
<a href='/count-substring.html'>count-substring</a> &nbsp;<br/>
<a href='/delete-string.html'>delete-string</a> &nbsp;<br/>
<a href='/double-string.html'>double-string</a> &nbsp;<br/>
<a href='/lower-string.html'>lower-string</a> &nbsp;<br/>
<a href='/match-regex.html'>match-regex</a> &nbsp;<br/>
<a href='/new-string.html'>new-string</a> &nbsp;<br/>
<a href='/number-string.html'>number-string</a> &nbsp;<br/>
<a href='/read-split.html'>read-split</a> &nbsp;<br/>
<a href='/replace-string.html'>replace-string</a> &nbsp;<br/>
<a href='/scan-string.html'>scan-string</a> &nbsp;<br/>
<a href='/set-string.html'>set-string</a> &nbsp;<br/>
<a href='/split-string.html'>split-string</a> &nbsp;<br/>
<a href='/string-double.html'>string-double</a> &nbsp;<br/>
<a href='/string-expressions.html'>string-expressions</a> &nbsp;<br/>
<a href='/string-length.html'>string-length</a> &nbsp;<br/>
<a href='/string-number.html'>string-number</a> &nbsp;<br/>
<a href='/trim-string.html'>trim-string</a> &nbsp;<br/>
<a href='/upper-string.html'>upper-string</a> &nbsp;<br/>
<a href='/write-string.html'>write-string</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='/documentation.html'>documentation</a><br/>
<a id='string-expressions.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:left;background-color:white;'><a href='https://rimstone-lang.com' style='border-bottom:0px'><img src='https://rimstone-lang.com/rimstone.png' style='width:180px;height:auto'/></a></div><div class='vhub' style='margin-top:10px;'>String expressions</div><hr/><span style="font-weight:bold;">Purpose</span>: Add strings using a plus ("+") sign.<br/>
<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_1102' class=notranslate>
&lt;string&gt; + &lt;string&gt; [ + ... ]</pre>
<span id=rimstone_copied_1102 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_1102' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_1102, code_1102, rimstone_copied_1102)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
String variables and literals can produce a new string by concatenation, using plus ("+") clause.<br/>
<br/>
Concatenation in this manner can be used in any statement where a string is expected.<br/>
<br/>
Note that you can concatenate binary strings too, i.e. strings that do not end with a null character, with each binary string used in its true length. The result will in general be a binary string.<br/>
<div class="vsub"><a id="Subscription shortcut"></a>Subscription shortcut</div>
You can reference string arrays and hash elements (see <a href='/new-array.html'>new-array</a> and <a href='/new-hash.html'>new-hash</a>) by using subscription operator ([]), for instance:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_1103' class=notranslate>
<span class="Statement">new-array</span> sarr<span class="Identifier"> type string</span>
<span class="Statement">new-hash</span> h
<span class="Statement">write-array</span> sarr<span class="Identifier"> key</span> <span class="Constant">0</span><span class="Identifier"> value</span> <span class="Constant">&quot;some string&quot;</span>
<span class="Statement">write-hash</span> h<span class="Identifier"> key</span> <span class="Constant">&quot;one&quot;</span><span class="Identifier"> value</span> <span class="Constant">&quot;uno&quot;</span>
<span class="Statement">set-string</span> str = sarr[<span class="Constant">0</span>] + <span class="Constant">&quot; another string&quot;</span> + h[<span class="Constant">&quot;one&quot;</span>]</pre>
<span id=rimstone_copied_1103 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_1103' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_1103, code_1103, rimstone_copied_1103)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<div class="vsub"><a id="Number to string shortcut"></a>Number to string shortcut</div>
You can use "#" in front of a number expression to convert it to a string; see Shortcut in <a href='/number-string.html'>number-string</a>.<br/>
<div class="vsub"><a id="Substrings within expressions"></a>Substrings within expressions</div>
You can use "@" to extract a substring and use it as a &lt;string&gt; in additions; see <a href='/copy-string.html'>copy-string</a>.<br/>
<div class="vsub"><a id="Examples"></a>Examples</div>
For instance, here we'll concatenate two string constants and a variable "var":<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_1104' class=notranslate>
<span class="Statement">set-string</span> var = <span class="Constant">&quot;day&quot;</span>
<span class="Statement">set-string</span> newstr = <span class="Constant">&quot;nice &quot;</span> + var + <span class="Constant">&quot; it is!&quot;</span>
<span class="Statement">print-out</span> newstr<span class="Identifier"> new-line</span></pre>
<span id=rimstone_copied_1104 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_1104' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_1104, code_1104, rimstone_copied_1104)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
The result will be "nice day it is!". <br/>
<br/>
In the following case, directory (variable "dir") is concatenated with a forward slash ("/") and then file name (variable "file") to produce full path of a file to read:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_1105' class=notranslate>
<span class="Statement">read-file</span> dir+<span class="Constant">&quot;/&quot;</span>+file<span class="Type"> to</span> content</pre>
<span id=rimstone_copied_1105 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_1105' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_1105, code_1105, rimstone_copied_1105)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<div class="vsub"><a id="See also"></a>See also</div>
 <a name='Strings'></a><span style="font-weight:bold;">Strings</span><br/>
<a href='/copy-string.html'>copy-string</a> &nbsp;<br/>
<a href='/count-substring.html'>count-substring</a> &nbsp;<br/>
<a href='/delete-string.html'>delete-string</a> &nbsp;<br/>
<a href='/double-string.html'>double-string</a> &nbsp;<br/>
<a href='/lower-string.html'>lower-string</a> &nbsp;<br/>
<a href='/match-regex.html'>match-regex</a> &nbsp;<br/>
<a href='/new-string.html'>new-string</a> &nbsp;<br/>
<a href='/number-string.html'>number-string</a> &nbsp;<br/>
<a href='/read-split.html'>read-split</a> &nbsp;<br/>
<a href='/replace-string.html'>replace-string</a> &nbsp;<br/>
<a href='/scan-string.html'>scan-string</a> &nbsp;<br/>
<a href='/set-string.html'>set-string</a> &nbsp;<br/>
<a href='/split-string.html'>split-string</a> &nbsp;<br/>
<a href='/string-double.html'>string-double</a> &nbsp;<br/>
<a href='/string-expressions.html'>string-expressions</a> &nbsp;<br/>
<a href='/string-length.html'>string-length</a> &nbsp;<br/>
<a href='/string-number.html'>string-number</a> &nbsp;<br/>
<a href='/trim-string.html'>trim-string</a> &nbsp;<br/>
<a href='/upper-string.html'>upper-string</a> &nbsp;<br/>
<a href='/write-string.html'>write-string</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='/documentation.html'>documentation</a><br/>
<a id='string-length.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:left;background-color:white;'><a href='https://rimstone-lang.com' style='border-bottom:0px'><img src='https://rimstone-lang.com/rimstone.png' style='width:180px;height:auto'/></a></div><div class='vhub' style='margin-top:10px;'>String length</div><hr/><span style="font-weight:bold;">Purpose</span>: Get string length.<br/>
<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_1106' class=notranslate>
<span class="Statement">string-length</span> &lt;string&gt;<span class="Type"> to</span> &lt;length&gt;</pre>
<span id=rimstone_copied_1106 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_1106' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_1106, code_1106, rimstone_copied_1106)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
string-length will place the number of bytes in &lt;string&gt; into number &lt;length&gt;.<br/>
<br/>
Note that &lt;string&gt; does not need to be null-terminated, meaning it can be a binary or text string. &lt;length&gt; is the number of bytes comprising any such string. <br/>
<br/>
Note that length of the string is not calculated; rather it is kept in a pre-fetched, cached location right next to the data itself for fast retrieval.<br/>
<div class="vsub"><a id="String length as a function"></a>String length as a function</div>
You can also use "strlen()" function to obtain string length as a number. You can use it in number or double expressions. The following two are equivalent:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_1107' class=notranslate>
<span class="Statement">set-string</span> s = <span class="Constant">&quot;string&quot;</span>
<span class="Statement">string-length</span> s<span class="Type"> to</span> len
<span class="Statement">print-out</span> <span class="Constant">&quot;Half of length is &quot;</span>, len/<span class="Constant">2</span><span class="Identifier"> new-line</span></pre>
<span id=rimstone_copied_1107 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_1107' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_1107, code_1107, rimstone_copied_1107)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
and<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_1108' class=notranslate>
<span class="Statement">set-string</span> s = <span class="Constant">&quot;string&quot;</span>
<span class="Statement">print-out</span> <span class="Constant">&quot;Half of length is &quot;</span>, strlen(s)/<span class="Constant">2</span><span class="Identifier"> new-line</span></pre>
<span id=rimstone_copied_1108 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_1108' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_1108, code_1108, rimstone_copied_1108)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
which would yield "3".<br/>
<br/>
An example in expression:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_1109' class=notranslate>
<span class="Statement">set-string</span> s = <span class="Constant">&quot;other string&quot;</span>
<span class="Statement">set-number</span> n = strlen(<span class="Constant">&quot;some string&quot;</span>) + strlen (s) -<span class="Constant">1</span></pre>
<span id=rimstone_copied_1109 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_1109' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_1109, code_1109, rimstone_copied_1109)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
The result for "n" would be 22.<br/>
<div class="vsub"><a id="Examples"></a>Examples</div>
Variable "len" will be 6:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_1110' class=notranslate>
<span class="Statement">set-string</span> str = <span class="Constant">&quot;string&quot;</span>
<span class="Statement">string-length</span> str<span class="Type"> to</span> len</pre>
<span id=rimstone_copied_1110 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_1110' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_1110, code_1110, rimstone_copied_1110)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Variable "len2" will be 18 - the string has a null character in the middle of it:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_1111' class=notranslate>
<span class="Statement">set-string</span> str2 = <span class="Constant">&quot;string&quot;</span> <span class="Constant">&quot;</span><span class="Special">\x00</span><span class="Constant"> after null&quot;</span>
<span class="Statement">string-length</span> str2<span class="Type"> to</span> len2</pre>
<span id=rimstone_copied_1111 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_1111' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_1111, code_1111, rimstone_copied_1111)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<div class="vsub"><a id="See also"></a>See also</div>
 <a name='Strings'></a><span style="font-weight:bold;">Strings</span><br/>
<a href='/copy-string.html'>copy-string</a> &nbsp;<br/>
<a href='/count-substring.html'>count-substring</a> &nbsp;<br/>
<a href='/delete-string.html'>delete-string</a> &nbsp;<br/>
<a href='/double-string.html'>double-string</a> &nbsp;<br/>
<a href='/lower-string.html'>lower-string</a> &nbsp;<br/>
<a href='/match-regex.html'>match-regex</a> &nbsp;<br/>
<a href='/new-string.html'>new-string</a> &nbsp;<br/>
<a href='/number-string.html'>number-string</a> &nbsp;<br/>
<a href='/read-split.html'>read-split</a> &nbsp;<br/>
<a href='/replace-string.html'>replace-string</a> &nbsp;<br/>
<a href='/scan-string.html'>scan-string</a> &nbsp;<br/>
<a href='/set-string.html'>set-string</a> &nbsp;<br/>
<a href='/split-string.html'>split-string</a> &nbsp;<br/>
<a href='/string-double.html'>string-double</a> &nbsp;<br/>
<a href='/string-expressions.html'>string-expressions</a> &nbsp;<br/>
<a href='/string-length.html'>string-length</a> &nbsp;<br/>
<a href='/string-number.html'>string-number</a> &nbsp;<br/>
<a href='/trim-string.html'>trim-string</a> &nbsp;<br/>
<a href='/upper-string.html'>upper-string</a> &nbsp;<br/>
<a href='/write-string.html'>write-string</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='/documentation.html'>documentation</a><br/>
<a id='string-number.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:left;background-color:white;'><a href='https://rimstone-lang.com' style='border-bottom:0px'><img src='https://rimstone-lang.com/rimstone.png' style='width:180px;height:auto'/></a></div><div class='vhub' style='margin-top:10px;'>String number</div><hr/><span style="font-weight:bold;">Purpose</span>: Convert string to number.<br/>
<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_1112' class=notranslate>
<span class="Statement">string-number</span> &lt;string&gt; [<span class="Type"> to</span> &lt;number&gt; ] \
    [<span class="Identifier"> base</span> &lt;base&gt; ] \
    [<span class="Type"> status</span> &lt;status&gt; ]</pre>
<span id=rimstone_copied_1112 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_1112' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_1112, code_1112, rimstone_copied_1112)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
&lt;string&gt; is converted to &lt;number&gt; in "to" clause, using &lt;base&gt; in "base" clause, where &lt;base&gt; is by default either 10, or 16 (if number is prefixed with "0x" or "0X", excluding any leading minus or plus sign) or 8 (if number is prefixed with "0", excluding any leading minus or plus sign). <br/>
<br/>
&lt;base&gt; can be between 2 and 36, inclusive. &lt;number&gt; can be positive or negative (i.e. signed) and can be up to 64-bit in length. If &lt;base&gt; is 0, it is the same as if it is not specified, i.e. default behavior applies.<br/>
<br/>
&lt;status&gt; number (in "status" clause) is RIM_OKAY if conversion was successful. If it wasn't successful, &lt;number&gt; is 0 and &lt;status&gt; is RIM_ERR_OVERFLOW if &lt;string&gt; represents a number that requires over 64 bits of storage, RIM_ERR_INVALID if &lt;base&gt; is incorrect or invalid conversion, RIM_ERR_EXIST if &lt;string&gt; is empty or no digits specified. If there are trailing invalid characters (for instance "182xy" for base 10), &lt;number&gt; is the result of conversion up to the first invalid character and &lt;status&gt; is RIM_ERR_TOO_MANY. In this example, &lt;number&gt; would be 182.<br/>
<div class="vsub"><a id="Shortcut"></a>Shortcut</div>
For convenience, you can use a shortcut for converting a string to a number, by prepending a "#" sign to the variable name, for example:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_1113' class=notranslate>
<span class="Statement">set-string</span> s = <span class="Constant">&quot;-10&quot;</span>
<span class="Statement">set-number</span> n = #s + <span class="Constant">10</span></pre>
<span id=rimstone_copied_1113 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_1113' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_1113, code_1113, rimstone_copied_1113)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
The above is the same as:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_1114' class=notranslate>
<span class="Statement">set-string</span> s = <span class="Constant">&quot;-10&quot;</span>
<span class="Statement">string-number</span> s<span class="Type"> to</span> val
<span class="Statement">set-number</span> n = val + <span class="Constant">10</span></pre>
<span id=rimstone_copied_1114 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_1114' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_1114, code_1114, rimstone_copied_1114)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Effectively, # in front of a string variable is the same as string-number that converts it to a number with the base being the default (see above). If a string cannot be converted to a number, your program will <a href='/error-handling.html'>error out</a>. To check values with a status, use string-number.<br/>
<br/>
You can use # for an expression, in which case the expression must be within parenthesis:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_1115' class=notranslate>
<span class="Statement">set-string</span> s1 = <span class="Constant">&quot;-10&quot;</span>
<span class="Statement">set-string</span> s2 = <span class="Constant">&quot;2&quot;</span>
<span class="Statement">set-number</span> n = #(s1+s2) + <span class="Constant">10</span></pre>
<span id=rimstone_copied_1115 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_1115' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_1115, code_1115, rimstone_copied_1115)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
In this case number "n" will have value of -92, because strings "s1" and "s2" concatenate to produce "-102", which is then converted to a number and finally 10 added to it, producing -92.<br/>
<div class="vsub"><a id="Examples"></a>Examples</div>
In this example, number "n" would be 49 and status "st" would be RIM_OKAY:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_1116' class=notranslate>
<span class="Statement">string-number</span> <span class="Constant">&quot;49&quot;</span><span class="Type"> to</span> n<span class="Identifier"> base</span> <span class="Constant">10</span><span class="Type"> status</span> st</pre>
<span id=rimstone_copied_1116 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_1116' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_1116, code_1116, rimstone_copied_1116)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<div class="vsub"><a id="See also"></a>See also</div>
 <a name='Numbers'></a><span style="font-weight:bold;">Numbers</span><br/>
<a href='/abs-number.html'>abs-number</a> &nbsp;<br/>
<a href='/mixing-doubles-and-numbers.html'>mixing-doubles-and-numbers</a> &nbsp;<br/>
<a href='/number-expressions.html'>number-expressions</a> &nbsp;<br/>
<a href='/number-string.html'>number-string</a> &nbsp;<br/>
<a href='/set-number.html'>set-number</a> &nbsp;<br/>
<a href='/string-number.html'>string-number</a> &nbsp; <br/>
 <a name='Strings'></a><span style="font-weight:bold;">Strings</span><br/>
<a href='/copy-string.html'>copy-string</a> &nbsp;<br/>
<a href='/count-substring.html'>count-substring</a> &nbsp;<br/>
<a href='/delete-string.html'>delete-string</a> &nbsp;<br/>
<a href='/double-string.html'>double-string</a> &nbsp;<br/>
<a href='/lower-string.html'>lower-string</a> &nbsp;<br/>
<a href='/match-regex.html'>match-regex</a> &nbsp;<br/>
<a href='/new-string.html'>new-string</a> &nbsp;<br/>
<a href='/number-string.html'>number-string</a> &nbsp;<br/>
<a href='/read-split.html'>read-split</a> &nbsp;<br/>
<a href='/replace-string.html'>replace-string</a> &nbsp;<br/>
<a href='/scan-string.html'>scan-string</a> &nbsp;<br/>
<a href='/set-string.html'>set-string</a> &nbsp;<br/>
<a href='/split-string.html'>split-string</a> &nbsp;<br/>
<a href='/string-double.html'>string-double</a> &nbsp;<br/>
<a href='/string-expressions.html'>string-expressions</a> &nbsp;<br/>
<a href='/string-length.html'>string-length</a> &nbsp;<br/>
<a href='/string-number.html'>string-number</a> &nbsp;<br/>
<a href='/trim-string.html'>trim-string</a> &nbsp;<br/>
<a href='/upper-string.html'>upper-string</a> &nbsp;<br/>
<a href='/write-string.html'>write-string</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='/documentation.html'>documentation</a><br/>
<a id='syntax-highlighting.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:left;background-color:white;'><a href='https://rimstone-lang.com' style='border-bottom:0px'><img src='https://rimstone-lang.com/rimstone.png' style='width:180px;height:auto'/></a></div><div class='vhub' style='margin-top:10px;'>Syntax highlighting</div><hr/>For syntax highlighting of RimStone programs in Vim, do this once:<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_1118' class=notranslate>
rim <span class="Special">-m</span></pre>
<span id=rimstone_copied_1118 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_1118' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_1118, code_1118, rimstone_copied_1118)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
The above will create a syntax file in your local Vim syntax directory:<br/>
<div class='ncode' style='position:relative;padding-right:16px;'>
<pre id='code_1117' class=notranslate>
$HOME/.vim/syntax/rim.vim</pre>
<span id=rimstone_copied_1117 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_1117' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_1117, code_1117, rimstone_copied_1117)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
and also update your local $HOME/.vimrc file to use this syntax for files with .rim extension. All files updated are local, i.e. they affect only the current user. Each user who wants this feature must issue the above command.<br/>
<br/>
You can then change the color scheme to anything you like by using ":colorscheme" directly in editor, or by specifying "colorscheme" in your ".vimrc" file for a persistent change.<br/>
<br/>
The RimStone highlighting syntax is tested with Vim 8.1.<br/>
<div class="vsub"><a id="See also"></a>See also</div>
 <a name='Language'></a><span style="font-weight:bold;">Language</span><br/>
<a href='/inline-code.html'>inline-code</a> &nbsp;<br/>
<a href='/statements.html'>statements</a> &nbsp;<br/>
<a href='/syntax-highlighting.html'>syntax-highlighting</a> &nbsp;<br/>
<a href='/unused-var.html'>unused-var</a> &nbsp;<br/>
<a href='/variable-scope.html'>variable-scope</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='/documentation.html'>documentation</a><br/>
<a id='tanh.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:left;background-color:white;'><a href='https://rimstone-lang.com' style='border-bottom:0px'><img src='https://rimstone-lang.com/rimstone.png' style='width:180px;height:auto'/></a></div><div class='vhub' style='margin-top:10px;'>Tanh</div><hr/><span style="font-weight:bold;">Purpose</span>: Hyperbolic tangent function.<br/>
<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_1121' class=notranslate>
tanh( &lt;var&gt; )</pre>
<span id=rimstone_copied_1121 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_1121' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_1121, code_1121, rimstone_copied_1121)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
tanh returns hyperbolic tangent of &lt;var&gt;, defined as:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_1122' class=notranslate>
tanh(var) = sinh(var) / cosh(var)</pre>
<span id=rimstone_copied_1122 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_1122' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_1122, code_1122, rimstone_copied_1122)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
&lt;var&gt; is a number or a double and the result is a double.<br/>
<div class="vsub"><a id="Examples"></a>Examples</div>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_1123' class=notranslate>
<span class="Statement">set-double</span> d = tanh(<span class="Constant">1</span>) + <span class="Constant">1</span></pre>
<span id=rimstone_copied_1123 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_1123' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_1123, code_1123, rimstone_copied_1123)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<div class="vsub"><a id="See also"></a>See also</div>
 <a name='Math functions'></a><span style="font-weight:bold;">Math functions</span><br/>
<a href='/abd.html'>abd</a> &nbsp;<br/>
<a href='/abn.html'>abn</a> &nbsp;<br/>
<a href='/acos.html'>acos</a> &nbsp;<br/>
<a href='/acosh.html'>acosh</a> &nbsp;<br/>
<a href='/asin.html'>asin</a> &nbsp;<br/>
<a href='/asinh.html'>asinh</a> &nbsp;<br/>
<a href='/atan.html'>atan</a> &nbsp;<br/>
<a href='/atan2.html'>atan2</a> &nbsp;<br/>
<a href='/atanh.html'>atanh</a> &nbsp;<br/>
<a href='/cbrt.html'>cbrt</a> &nbsp;<br/>
<a href='/ceil.html'>ceil</a> &nbsp;<br/>
<a href='/copysign.html'>copysign</a> &nbsp;<br/>
<a href='/cos.html'>cos</a> &nbsp;<br/>
<a href='/cosh.html'>cosh</a> &nbsp;<br/>
<a href='/dbl.html'>dbl</a> &nbsp;<br/>
<a href='/erf.html'>erf</a> &nbsp;<br/>
<a href='/erfc.html'>erfc</a> &nbsp;<br/>
<a href='/exp.html'>exp</a> &nbsp;<br/>
<a href='/exp2.html'>exp2</a> &nbsp;<br/>
<a href='/floor.html'>floor</a> &nbsp;<br/>
<a href='/fmod.html'>fmod</a> &nbsp;<br/>
<a href='/hypot.html'>hypot</a> &nbsp;<br/>
<a href='/isinf.html'>isinf</a> &nbsp;<br/>
<a href='/isnan.html'>isnan</a> &nbsp;<br/>
<a href='/ldexp.html'>ldexp</a> &nbsp;<br/>
<a href='/lgamma.html'>lgamma</a> &nbsp;<br/>
<a href='/log.html'>log</a> &nbsp;<br/>
<a href='/log10.html'>log10</a> &nbsp;<br/>
<a href='/log2.html'>log2</a> &nbsp;<br/>
<a href='/math-functions.html'>math-functions</a> &nbsp;<br/>
<a href='/nextafter.html'>nextafter</a> &nbsp;<br/>
<a href='/num.html'>num</a> &nbsp;<br/>
<a href='/pow.html'>pow</a> &nbsp;<br/>
<a href='/round.html'>round</a> &nbsp;<br/>
<a href='/sin.html'>sin</a> &nbsp;<br/>
<a href='/sinh.html'>sinh</a> &nbsp;<br/>
<a href='/sqrt.html'>sqrt</a> &nbsp;<br/>
<a href='/tan.html'>tan</a> &nbsp;<br/>
<a href='/tanh.html'>tanh</a> &nbsp;<br/>
<a href='/trunc.html'>trunc</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='/documentation.html'>documentation</a><br/>
<a id='tan.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:left;background-color:white;'><a href='https://rimstone-lang.com' style='border-bottom:0px'><img src='https://rimstone-lang.com/rimstone.png' style='width:180px;height:auto'/></a></div><div class='vhub' style='margin-top:10px;'>Tan</div><hr/><span style="font-weight:bold;">Purpose</span>: Tangent function.<br/>
<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_1119' class=notranslate>
tan( &lt;var&gt; )</pre>
<span id=rimstone_copied_1119 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_1119' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_1119, code_1119, rimstone_copied_1119)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
tan returns tangent of &lt;var&gt;, where &lt;var&gt; is given in radians. &lt;var&gt; is a number or a double and the result is a double.<br/>
<div class="vsub"><a id="Examples"></a>Examples</div>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_1120' class=notranslate>
<span class="Statement">set-double</span> d = tan(<span class="Constant">1</span>) + <span class="Constant">1</span></pre>
<span id=rimstone_copied_1120 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_1120' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_1120, code_1120, rimstone_copied_1120)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<div class="vsub"><a id="See also"></a>See also</div>
 <a name='Math functions'></a><span style="font-weight:bold;">Math functions</span><br/>
<a href='/abd.html'>abd</a> &nbsp;<br/>
<a href='/abn.html'>abn</a> &nbsp;<br/>
<a href='/acos.html'>acos</a> &nbsp;<br/>
<a href='/acosh.html'>acosh</a> &nbsp;<br/>
<a href='/asin.html'>asin</a> &nbsp;<br/>
<a href='/asinh.html'>asinh</a> &nbsp;<br/>
<a href='/atan.html'>atan</a> &nbsp;<br/>
<a href='/atan2.html'>atan2</a> &nbsp;<br/>
<a href='/atanh.html'>atanh</a> &nbsp;<br/>
<a href='/cbrt.html'>cbrt</a> &nbsp;<br/>
<a href='/ceil.html'>ceil</a> &nbsp;<br/>
<a href='/copysign.html'>copysign</a> &nbsp;<br/>
<a href='/cos.html'>cos</a> &nbsp;<br/>
<a href='/cosh.html'>cosh</a> &nbsp;<br/>
<a href='/dbl.html'>dbl</a> &nbsp;<br/>
<a href='/erf.html'>erf</a> &nbsp;<br/>
<a href='/erfc.html'>erfc</a> &nbsp;<br/>
<a href='/exp.html'>exp</a> &nbsp;<br/>
<a href='/exp2.html'>exp2</a> &nbsp;<br/>
<a href='/floor.html'>floor</a> &nbsp;<br/>
<a href='/fmod.html'>fmod</a> &nbsp;<br/>
<a href='/hypot.html'>hypot</a> &nbsp;<br/>
<a href='/isinf.html'>isinf</a> &nbsp;<br/>
<a href='/isnan.html'>isnan</a> &nbsp;<br/>
<a href='/ldexp.html'>ldexp</a> &nbsp;<br/>
<a href='/lgamma.html'>lgamma</a> &nbsp;<br/>
<a href='/log.html'>log</a> &nbsp;<br/>
<a href='/log10.html'>log10</a> &nbsp;<br/>
<a href='/log2.html'>log2</a> &nbsp;<br/>
<a href='/math-functions.html'>math-functions</a> &nbsp;<br/>
<a href='/nextafter.html'>nextafter</a> &nbsp;<br/>
<a href='/num.html'>num</a> &nbsp;<br/>
<a href='/pow.html'>pow</a> &nbsp;<br/>
<a href='/round.html'>round</a> &nbsp;<br/>
<a href='/sin.html'>sin</a> &nbsp;<br/>
<a href='/sinh.html'>sinh</a> &nbsp;<br/>
<a href='/sqrt.html'>sqrt</a> &nbsp;<br/>
<a href='/tan.html'>tan</a> &nbsp;<br/>
<a href='/tanh.html'>tanh</a> &nbsp;<br/>
<a href='/trunc.html'>trunc</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='/documentation.html'>documentation</a><br/>
<a id='temporary-file.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:left;background-color:white;'><a href='https://rimstone-lang.com' style='border-bottom:0px'><img src='https://rimstone-lang.com/rimstone.png' style='width:180px;height:auto'/></a></div><div class='vhub' style='margin-top:10px;'>Temporary file</div><hr/>To create a temporary file, use <a href='/uniq-file.html'>uniq-file</a> with a "temporary" clause. Temporary files are the same as any other files in the <a href='/file-storage.html'>file-storage</a> (and are organized in the same fashion), except that they are all under the subdirectory named "t":<br/>
<div class='ncode' style='position:relative;padding-right:16px;'>
<pre id='code_1124' class=notranslate>
$HOME/.rimstone/apps/&lt;app_name&gt;/file/t</pre>
<span id=rimstone_copied_1124 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_1124' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_1124, code_1124, rimstone_copied_1124)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
A temporary file is not automatically deleted - you can remove it with <a href='/delete-file.html'>delete-file</a> statement when not needed (or use a periodic shell script to remove old temporary files). The reason for this is that the nature of temporary files varies, and they may not necessarily span a given time frame (such as a lifetime of a <a href='/request.html'>request</a>, or a lifetime of a process that serves any number of such requests), and they may be used across number of requests for a specific purpose. Thus, it is your responsibility to remove a temporary file when it's appropriate for your application to do so.<br/>
<br/>
The reason for storing temporary files in a separate directory is to gain a separation of temporary files (which likely at some point can be freely deleted) from other files.<br/>
<br/>
See <a href='/uniq-file.html'>uniq-file</a> for an example of creating a temporary file.<br/>
<div class="vsub"><a id="See also"></a>See also</div>
 <a name='Files'></a><span style="font-weight:bold;">Files</span><br/>
<a href='/change-mode.html'>change-mode</a> &nbsp;<br/>
<a href='/close-file.html'>close-file</a> &nbsp;<br/>
<a href='/copy-file.html'>copy-file</a> &nbsp;<br/>
<a href='/delete-file.html'>delete-file</a> &nbsp;<br/>
<a href='/file-position.html'>file-position</a> &nbsp;<br/>
<a href='/file-storage.html'>file-storage</a> &nbsp;<br/>
<a href='/file-uploading.html'>file-uploading</a> &nbsp;<br/>
<a href='/get-upload.html'>get-upload</a> &nbsp;<br/>
<a href='/lock-file.html'>lock-file</a> &nbsp;<br/>
<a href='/open-file.html'>open-file</a> &nbsp;<br/>
<a href='/read-file.html'>read-file</a> &nbsp;<br/>
<a href='/read-line.html'>read-line</a> &nbsp;<br/>
<a href='/rename-file.html'>rename-file</a> &nbsp;<br/>
<a href='/stat-file.html'>stat-file</a> &nbsp;<br/>
<a href='/temporary-file.html'>temporary-file</a> &nbsp;<br/>
<a href='/uniq-file.html'>uniq-file</a> &nbsp;<br/>
<a href='/unlock-file.html'>unlock-file</a> &nbsp;<br/>
<a href='/write-file.html'>write-file</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='/documentation.html'>documentation</a><br/>
<a id='text-utf.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:left;background-color:white;'><a href='https://rimstone-lang.com' style='border-bottom:0px'><img src='https://rimstone-lang.com/rimstone.png' style='width:180px;height:auto'/></a></div><div class='vhub' style='margin-top:10px;'>Text utf</div><hr/><span style="font-weight:bold;">Purpose</span>: Convert text to UTF-8 string. <br/>
<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_1125' class=notranslate>
<span class="Statement">text-utf</span> &lt;text&gt; \
    [<span class="Type"> status</span> &lt;status&gt; ] \
    [<span class="Type"> error-text</span> &lt;error text&gt; ]</pre>
<span id=rimstone_copied_1125 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_1125' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_1125, code_1125, rimstone_copied_1125)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
text-utf will convert string value &lt;text&gt; to UTF-8. &lt;text&gt; itself will hold the resulting UTF-8 string. If you don't wish &lt;text&gt; to be modified, make a copy of it first (see <a href='/copy-string.html'>copy-string</a>). See <a href='/utf-text.html'>utf-text</a> for the reverse conversion and data standards information.<br/>
<br/>
You can obtain &lt;status&gt; in "status" clause. &lt;status&gt; number is RIM_OKAY if successful, or RIM_ERR_UTF if there was an error, in which case &lt;error text&gt; string in "error-text" clause will contain the error message.<br/>
<br/>
Note that text-utf will process normal "\u..." and "\U..." UTF-8 characters, and in addition will also process surrogate "\u...\u..." characters (as used in JSON text). This is useful, as many languages and parsers won't do both (technically JSON's surrogate extension is not really UTF-8 but rather a historical throwback to UTF-16).<br/>
<div class="vsub"><a id="Examples"></a>Examples</div>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_1126' class=notranslate>
<span class="Comment">// Unicode value to encode to UTF-8 (including surrogate characters for JSON, for instance \uD834\uDD1E for G Clef symbol):</span>
<span class="Statement">set-string</span> txt = <span class="Constant">&quot;</span><span class="Special">\u0459\\\&quot;</span><span class="Constant">Doc</span><span class="Special">\\\&quot;\\</span><span class="Constant">n</span><span class="Special">\\</span><span class="Constant">t</span><span class="Special">\\</span><span class="Constant">b</span><span class="Special">\\</span><span class="Constant">f</span><span class="Special">\\</span><span class="Constant">r</span><span class="Special">\\</span><span class="Constant">t</span><span class="Special">\u21d7\u21d8\\</span><span class="Constant">t</span><span class="Special">\u25b7\u25ee\uD834\uDD1E\u13eb\u2ca0\u0448\\</span><span class="Constant">n</span><span class="Special">\\</span><span class="Constant">/</span><span class="Special">\\\&quot;</span><span class="Constant">()</span><span class="Special">\\</span><span class="Constant">t</span><span class="Special">\U0001d11e</span><span class="Constant">&quot;</span>

<span class="Comment">// Convert to UTF </span>
<span class="Statement">text-utf</span> txt<span class="Type"> status</span> txt_status<span class="Type"> error-text</span> txt_error

<span class="Comment">// Expected UTF result</span>
<span class="Statement">set-string</span> utf = <span class="Constant">&quot;</span><span class="Special">\&quot;</span><span class="Constant">Doc</span><span class="Special">\&quot;\n\t\b\f\r\t</span><span class="Constant"></span><span class="Special">\t</span><span class="Constant"></span><span class="Special">\n</span><span class="Constant">/</span><span class="Special">\&quot;</span><span class="Constant">()</span><span class="Special">\t</span><span class="Constant">&quot;</span>

<span class="Comment">// Make sure conversion was successful</span>
<span class="Statement">if-true</span> utf<span class="Identifier"> not-equal</span> txt<span class="Identifier"> or</span> txt_status<span class="Identifier"> not-equal</span> RIM_OKAY<span class="Identifier"> or</span> txt_error<span class="Identifier"> not-equal</span> <span class="Constant">&quot;&quot;</span>
<span class="Statement">    @</span>Error in converting string to UTF
<span class="Statement">end-if</span></pre>
<span id=rimstone_copied_1126 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_1126' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_1126, code_1126, rimstone_copied_1126)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<div class="vsub"><a id="See also"></a>See also</div>
 <a name='UTF'></a><span style="font-weight:bold;">UTF</span><br/>
<a href='/text-utf.html'>text-utf</a> &nbsp;<br/>
<a href='/utf-text.html'>utf-text</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='/documentation.html'>documentation</a><br/>
<a id='trim-string.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:left;background-color:white;'><a href='https://rimstone-lang.com' style='border-bottom:0px'><img src='https://rimstone-lang.com/rimstone.png' style='width:180px;height:auto'/></a></div><div class='vhub' style='margin-top:10px;'>Trim string</div><hr/><span style="font-weight:bold;">Purpose</span>: Trim a string.<br/>
<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_1127' class=notranslate>
<span class="Statement">trim-string</span> &lt;string&gt;</pre>
<span id=rimstone_copied_1127 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_1127' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_1127, code_1127, rimstone_copied_1127)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
trim-string trims &lt;string&gt;, both on left and right. <br/>
<div class="vsub"><a id="Examples"></a>Examples</div>
The variable "str" will be "some string" after trim-string:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_1128' class=notranslate>
<span class="Statement">set-string</span> str = <span class="Constant">&quot;  some string  &quot;</span>;
<span class="Statement">trim-string</span> str</pre>
<span id=rimstone_copied_1128 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_1128' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_1128, code_1128, rimstone_copied_1128)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<div class="vsub"><a id="See also"></a>See also</div>
 <a name='Strings'></a><span style="font-weight:bold;">Strings</span><br/>
<a href='/copy-string.html'>copy-string</a> &nbsp;<br/>
<a href='/count-substring.html'>count-substring</a> &nbsp;<br/>
<a href='/delete-string.html'>delete-string</a> &nbsp;<br/>
<a href='/double-string.html'>double-string</a> &nbsp;<br/>
<a href='/lower-string.html'>lower-string</a> &nbsp;<br/>
<a href='/match-regex.html'>match-regex</a> &nbsp;<br/>
<a href='/new-string.html'>new-string</a> &nbsp;<br/>
<a href='/number-string.html'>number-string</a> &nbsp;<br/>
<a href='/read-split.html'>read-split</a> &nbsp;<br/>
<a href='/replace-string.html'>replace-string</a> &nbsp;<br/>
<a href='/scan-string.html'>scan-string</a> &nbsp;<br/>
<a href='/set-string.html'>set-string</a> &nbsp;<br/>
<a href='/split-string.html'>split-string</a> &nbsp;<br/>
<a href='/string-double.html'>string-double</a> &nbsp;<br/>
<a href='/string-expressions.html'>string-expressions</a> &nbsp;<br/>
<a href='/string-length.html'>string-length</a> &nbsp;<br/>
<a href='/string-number.html'>string-number</a> &nbsp;<br/>
<a href='/trim-string.html'>trim-string</a> &nbsp;<br/>
<a href='/upper-string.html'>upper-string</a> &nbsp;<br/>
<a href='/write-string.html'>write-string</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='/documentation.html'>documentation</a><br/>
<a id='trunc.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:left;background-color:white;'><a href='https://rimstone-lang.com' style='border-bottom:0px'><img src='https://rimstone-lang.com/rimstone.png' style='width:180px;height:auto'/></a></div><div class='vhub' style='margin-top:10px;'>Trunc</div><hr/><span style="font-weight:bold;">Purpose</span>: Truncate function.<br/>
<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_1129' class=notranslate>
trunc( &lt;var&gt; )</pre>
<span id=rimstone_copied_1129 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_1129' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_1129, code_1129, rimstone_copied_1129)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
trunc returns rounded value of &lt;var&gt; that is the nearest number value that is not larger as an absolute value than &lt;var&gt;. <br/>
<br/>
In practice, it means that trunc() removes the decimal point, so for example trunc() applied to -2.6 will return -2 and applied to 2.6 will also return 2. However round() applied to -2.6 will return -3, and applied to 2.6 will return 3. &nbsp;<br/>
<br/>
&lt;var&gt; is a number or a double and the result is a double.<br/>
<div class="vsub"><a id="Examples"></a>Examples</div>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_1130' class=notranslate>
<span class="Statement">set-double</span> d = trunc(<span class="Constant">1</span>) + <span class="Constant">1</span></pre>
<span id=rimstone_copied_1130 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_1130' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_1130, code_1130, rimstone_copied_1130)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<div class="vsub"><a id="See also"></a>See also</div>
 <a name='Math functions'></a><span style="font-weight:bold;">Math functions</span><br/>
<a href='/abd.html'>abd</a> &nbsp;<br/>
<a href='/abn.html'>abn</a> &nbsp;<br/>
<a href='/acos.html'>acos</a> &nbsp;<br/>
<a href='/acosh.html'>acosh</a> &nbsp;<br/>
<a href='/asin.html'>asin</a> &nbsp;<br/>
<a href='/asinh.html'>asinh</a> &nbsp;<br/>
<a href='/atan.html'>atan</a> &nbsp;<br/>
<a href='/atan2.html'>atan2</a> &nbsp;<br/>
<a href='/atanh.html'>atanh</a> &nbsp;<br/>
<a href='/cbrt.html'>cbrt</a> &nbsp;<br/>
<a href='/ceil.html'>ceil</a> &nbsp;<br/>
<a href='/copysign.html'>copysign</a> &nbsp;<br/>
<a href='/cos.html'>cos</a> &nbsp;<br/>
<a href='/cosh.html'>cosh</a> &nbsp;<br/>
<a href='/dbl.html'>dbl</a> &nbsp;<br/>
<a href='/erf.html'>erf</a> &nbsp;<br/>
<a href='/erfc.html'>erfc</a> &nbsp;<br/>
<a href='/exp.html'>exp</a> &nbsp;<br/>
<a href='/exp2.html'>exp2</a> &nbsp;<br/>
<a href='/floor.html'>floor</a> &nbsp;<br/>
<a href='/fmod.html'>fmod</a> &nbsp;<br/>
<a href='/hypot.html'>hypot</a> &nbsp;<br/>
<a href='/isinf.html'>isinf</a> &nbsp;<br/>
<a href='/isnan.html'>isnan</a> &nbsp;<br/>
<a href='/ldexp.html'>ldexp</a> &nbsp;<br/>
<a href='/lgamma.html'>lgamma</a> &nbsp;<br/>
<a href='/log.html'>log</a> &nbsp;<br/>
<a href='/log10.html'>log10</a> &nbsp;<br/>
<a href='/log2.html'>log2</a> &nbsp;<br/>
<a href='/math-functions.html'>math-functions</a> &nbsp;<br/>
<a href='/nextafter.html'>nextafter</a> &nbsp;<br/>
<a href='/num.html'>num</a> &nbsp;<br/>
<a href='/pow.html'>pow</a> &nbsp;<br/>
<a href='/round.html'>round</a> &nbsp;<br/>
<a href='/sin.html'>sin</a> &nbsp;<br/>
<a href='/sinh.html'>sinh</a> &nbsp;<br/>
<a href='/sqrt.html'>sqrt</a> &nbsp;<br/>
<a href='/tan.html'>tan</a> &nbsp;<br/>
<a href='/tanh.html'>tanh</a> &nbsp;<br/>
<a href='/trunc.html'>trunc</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='/documentation.html'>documentation</a><br/>
<a id='uninstall.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:left;background-color:white;'><a href='https://rimstone-lang.com' style='border-bottom:0px'><img src='https://rimstone-lang.com/rimstone.png' style='width:180px;height:auto'/></a></div><div class='vhub' style='margin-top:10px;'>Uninstall</div><hr/><div class="vsub"><a id="Uninstall RimStone if installed from source"></a>Uninstall RimStone if installed from source</div>
Run from command line:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_1131' class=notranslate>
make uninstall</pre>
<span id=rimstone_copied_1131 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_1131' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_1131, code_1131, rimstone_copied_1131)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<div class="vsub"><a id="Application files"></a>Application files</div>
Note that $HOME/.rimstone/apps/&lt;app name&gt; directory will not be removed for any application, since it may contain application files; you may delete it if there's no data there you care about, or you backed it up.<br/>
<div class="vsub"><a id="See also"></a>See also</div>
 <a name='Install rimstone'></a><span style="font-weight:bold;">Install rimstone</span><br/>
<a href='/install-package.html'>install-package</a> &nbsp;<br/>
<a href='/install-rimstone.html'>install-rimstone</a> &nbsp;<br/>
<a href='/uninstall.html'>uninstall</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='/documentation.html'>documentation</a><br/>
<a id='uniq-file.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:left;background-color:white;'><a href='https://rimstone-lang.com' style='border-bottom:0px'><img src='https://rimstone-lang.com/rimstone.png' style='width:180px;height:auto'/></a></div><div class='vhub' style='margin-top:10px;'>Uniq file</div><hr/><span style="font-weight:bold;">Purpose</span>: Create a new empty file with a unique name.<br/>
<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_1132' class=notranslate>
<span class="Statement">uniq-file</span> &lt;file name&gt; [<span class="Identifier"> temporary</span> ]</pre>
<span id=rimstone_copied_1132 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_1132' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_1132, code_1132, rimstone_copied_1132)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
One of the common tasks in many applications is creating a unique file (of any kind, including temporary). uniq-file statement does that - it creates a new unique file of zero size, with &lt;file name&gt; being its fully qualified name, which is always within the <a href='/file-storage.html'>file-storage</a>. <br/>
<br/>
The file itself is created empty. If "temporary" clause is used, then the file created is a <a href='/temporary-file.html'>temporary-file</a>.<br/>
<br/>
The file has no extension. You can rename it after it has been created to reflect its usage or purpose. <br/>
<br/>
All files created are setup with owner and group read/write only permissions.<br/>
<div class="vsub"><a id="Examples"></a>Examples</div>
The following creates an empty file with auto-generated name that will be stored in "mydoc" variable. String variable "mydoc" is defined in the statement. The string "some data" is written to a newly created file:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_1133' class=notranslate>
<span class="Statement">uniq-file</span> mydoc
<span class="Statement">write-file</span> mydoc<span class="Identifier"> from</span> <span class="Constant">&quot;some data&quot;</span></pre>
<span id=rimstone_copied_1133 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_1133' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_1133, code_1133, rimstone_copied_1133)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
To create a temporary file:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_1134' class=notranslate>
<span class="Statement">uniq-file</span> temp_file<span class="Identifier"> temporary</span>
<span class="Statement">.</span>..
<span class="Comment">// use file named </span><span class="Constant">&quot;temp_file&quot;</span>
<span class="Statement">.</span>.
<span class="Statement">delete-file</span> temp_file</pre>
<span id=rimstone_copied_1134 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_1134' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_1134, code_1134, rimstone_copied_1134)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<div class="vsub"><a id="See also"></a>See also</div>
 <a name='Files'></a><span style="font-weight:bold;">Files</span><br/>
<a href='/change-mode.html'>change-mode</a> &nbsp;<br/>
<a href='/close-file.html'>close-file</a> &nbsp;<br/>
<a href='/copy-file.html'>copy-file</a> &nbsp;<br/>
<a href='/delete-file.html'>delete-file</a> &nbsp;<br/>
<a href='/file-position.html'>file-position</a> &nbsp;<br/>
<a href='/file-storage.html'>file-storage</a> &nbsp;<br/>
<a href='/file-uploading.html'>file-uploading</a> &nbsp;<br/>
<a href='/get-upload.html'>get-upload</a> &nbsp;<br/>
<a href='/lock-file.html'>lock-file</a> &nbsp;<br/>
<a href='/open-file.html'>open-file</a> &nbsp;<br/>
<a href='/read-file.html'>read-file</a> &nbsp;<br/>
<a href='/read-line.html'>read-line</a> &nbsp;<br/>
<a href='/rename-file.html'>rename-file</a> &nbsp;<br/>
<a href='/stat-file.html'>stat-file</a> &nbsp;<br/>
<a href='/temporary-file.html'>temporary-file</a> &nbsp;<br/>
<a href='/uniq-file.html'>uniq-file</a> &nbsp;<br/>
<a href='/unlock-file.html'>unlock-file</a> &nbsp;<br/>
<a href='/write-file.html'>write-file</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='/documentation.html'>documentation</a><br/>
<a id='unlock-file.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:left;background-color:white;'><a href='https://rimstone-lang.com' style='border-bottom:0px'><img src='https://rimstone-lang.com/rimstone.png' style='width:180px;height:auto'/></a></div><div class='vhub' style='margin-top:10px;'>Unlock file</div><hr/><span style="font-weight:bold;">Purpose</span>: Unlocks file.<br/>
<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_1135' class=notranslate>
<span class="Statement">unlock-file</span><span class="Identifier"> id</span> &lt;lock id&gt;</pre>
<span id=rimstone_copied_1135 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_1135' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_1135, code_1135, rimstone_copied_1135)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
unlock-file will unlock file that was locked with <a href='/lock-file.html'>lock-file</a>. &lt;lock id&gt; is the value obtained in <a href='/lock-file.html'>lock-file</a>'s "id" clause.<br/>
<div class="vsub"><a id="Examples"></a>Examples</div>
See <a href='/lock-file.html'>lock-file</a>.<br/>
<div class="vsub"><a id="See also"></a>See also</div>
 <a name='Files'></a><span style="font-weight:bold;">Files</span><br/>
<a href='/change-mode.html'>change-mode</a> &nbsp;<br/>
<a href='/close-file.html'>close-file</a> &nbsp;<br/>
<a href='/copy-file.html'>copy-file</a> &nbsp;<br/>
<a href='/delete-file.html'>delete-file</a> &nbsp;<br/>
<a href='/file-position.html'>file-position</a> &nbsp;<br/>
<a href='/file-storage.html'>file-storage</a> &nbsp;<br/>
<a href='/file-uploading.html'>file-uploading</a> &nbsp;<br/>
<a href='/get-upload.html'>get-upload</a> &nbsp;<br/>
<a href='/lock-file.html'>lock-file</a> &nbsp;<br/>
<a href='/open-file.html'>open-file</a> &nbsp;<br/>
<a href='/read-file.html'>read-file</a> &nbsp;<br/>
<a href='/read-line.html'>read-line</a> &nbsp;<br/>
<a href='/rename-file.html'>rename-file</a> &nbsp;<br/>
<a href='/stat-file.html'>stat-file</a> &nbsp;<br/>
<a href='/temporary-file.html'>temporary-file</a> &nbsp;<br/>
<a href='/uniq-file.html'>uniq-file</a> &nbsp;<br/>
<a href='/unlock-file.html'>unlock-file</a> &nbsp;<br/>
<a href='/write-file.html'>write-file</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='/documentation.html'>documentation</a><br/>
<a id='unused-var.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:left;background-color:white;'><a href='https://rimstone-lang.com' style='border-bottom:0px'><img src='https://rimstone-lang.com/rimstone.png' style='width:180px;height:auto'/></a></div><div class='vhub' style='margin-top:10px;'>Unused var</div><hr/><span style="font-weight:bold;">Purpose</span>: Prevent compiler error if variable is not used.<br/>
<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_1136' class=notranslate>
<span class="Statement">unused-var</span> &lt;variable name&gt; [<span class="Identifier"> ,</span> ... ]</pre>
<span id=rimstone_copied_1136 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_1136' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_1136, code_1136, rimstone_copied_1136)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
unused-var prevents <a href='/error-handling.html'>erroring out</a> if &lt;variable name&gt; is unused; a list of variable names can be specified separated by a comma. Generally, you don't want to have unused variables - they typically indicate bugs or clutter. However, in some cases you might need such variables as a reminder for a future enhancement, or for some other reason it is unavoidable. In any case, you can use unused-var to shield such instances from causing errors.<br/>
<div class="vsub"><a id="Examples"></a>Examples</div>
In the following, variable "hw" is created and initialized. Such variable is not used at the moment, however if you would do so in the future and want to keep it, use unused-var to prevent compiler errors:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_1137' class=notranslate>
<span class="Statement">set-string</span> hw = <span class="Constant">&quot;Hello world&quot;</span>
<span class="Statement">unused-var</span> hw</pre>
<span id=rimstone_copied_1137 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_1137' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_1137, code_1137, rimstone_copied_1137)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<div class="vsub"><a id="See also"></a>See also</div>
 <a name='Language'></a><span style="font-weight:bold;">Language</span><br/>
<a href='/inline-code.html'>inline-code</a> &nbsp;<br/>
<a href='/statements.html'>statements</a> &nbsp;<br/>
<a href='/syntax-highlighting.html'>syntax-highlighting</a> &nbsp;<br/>
<a href='/unused-var.html'>unused-var</a> &nbsp;<br/>
<a href='/variable-scope.html'>variable-scope</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='/documentation.html'>documentation</a><br/>
<a id='upper-string.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:left;background-color:white;'><a href='https://rimstone-lang.com' style='border-bottom:0px'><img src='https://rimstone-lang.com/rimstone.png' style='width:180px;height:auto'/></a></div><div class='vhub' style='margin-top:10px;'>Upper string</div><hr/><span style="font-weight:bold;">Purpose</span>: Upper-case a string.<br/>
<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_1138' class=notranslate>
<span class="Statement">upper-string</span> &lt;string&gt;</pre>
<span id=rimstone_copied_1138 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_1138' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_1138, code_1138, rimstone_copied_1138)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
upper-string converts all &lt;string&gt;'s characters to upper case.<br/>
<div class="vsub"><a id="Examples"></a>Examples</div>
The resulting "str" is "GOOD":<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_1139' class=notranslate>
<span class="Statement">set-string</span> str=<span class="Constant">&quot;good&quot;</span>
<span class="Statement">upper-string</span> str</pre>
<span id=rimstone_copied_1139 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_1139' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_1139, code_1139, rimstone_copied_1139)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<div class="vsub"><a id="See also"></a>See also</div>
 <a name='Strings'></a><span style="font-weight:bold;">Strings</span><br/>
<a href='/copy-string.html'>copy-string</a> &nbsp;<br/>
<a href='/count-substring.html'>count-substring</a> &nbsp;<br/>
<a href='/delete-string.html'>delete-string</a> &nbsp;<br/>
<a href='/double-string.html'>double-string</a> &nbsp;<br/>
<a href='/lower-string.html'>lower-string</a> &nbsp;<br/>
<a href='/match-regex.html'>match-regex</a> &nbsp;<br/>
<a href='/new-string.html'>new-string</a> &nbsp;<br/>
<a href='/number-string.html'>number-string</a> &nbsp;<br/>
<a href='/read-split.html'>read-split</a> &nbsp;<br/>
<a href='/replace-string.html'>replace-string</a> &nbsp;<br/>
<a href='/scan-string.html'>scan-string</a> &nbsp;<br/>
<a href='/set-string.html'>set-string</a> &nbsp;<br/>
<a href='/split-string.html'>split-string</a> &nbsp;<br/>
<a href='/string-double.html'>string-double</a> &nbsp;<br/>
<a href='/string-expressions.html'>string-expressions</a> &nbsp;<br/>
<a href='/string-length.html'>string-length</a> &nbsp;<br/>
<a href='/string-number.html'>string-number</a> &nbsp;<br/>
<a href='/trim-string.html'>trim-string</a> &nbsp;<br/>
<a href='/upper-string.html'>upper-string</a> &nbsp;<br/>
<a href='/write-string.html'>write-string</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='/documentation.html'>documentation</a><br/>
<a id='use-cursor.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:left;background-color:white;'><a href='https://rimstone-lang.com' style='border-bottom:0px'><img src='https://rimstone-lang.com/rimstone.png' style='width:180px;height:auto'/></a></div><div class='vhub' style='margin-top:10px;'>Use cursor</div><hr/><span style="font-weight:bold;">Purpose</span>: Iterate to a lesser or greater key in a tree.<br/>
<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_1140' class=notranslate>
<span class="Statement">use-cursor</span> &lt;cursor&gt; (<span class="Identifier"> current</span> |<span class="Identifier"> get-lesser</span> |<span class="Identifier"> get-greater</span> ) \
    [<span class="Type"> key</span> &lt;key&gt; ] \
    [<span class="Type"> value</span> &lt;value&gt; ] \
    [<span class="Identifier"> update-value</span> &lt;update value&gt; ] \
    [<span class="Type"> status</span> &lt;status&gt; ]</pre>
<span id=rimstone_copied_1140 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_1140' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_1140, code_1140, rimstone_copied_1140)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
use-cursor uses &lt;cursor&gt; previously created (see <a href='/read-tree.html'>read-tree</a>, <a href='/write-tree.html'>write-tree</a>) for iteration over tree nodes with lesser or greater key values. It can also obtain keys and values for such nodes, as well as update their values.<br/>
<div class="vsub"><a id="Current node"></a>Current node</div>
A &lt;cursor&gt; has a current node, which is first computed by using "current", "get-lesser" or "get-greater" clauses, and then any other clauses are applied to it (such as "key", "value" and "update-value"). <br/>
<br/>
The computation of a current node is performed by using a &lt;cursor&gt;'s "previous current node", i.e. the current node just before use-cursor executes. If "current" clause is used, the current node remains the same as previous current node. If "get-lesser" clause is used, a node with a key that is the next lesser from the previous current will become the new current. If "get-greater" clause is used, a node with a key that is the next greater from the previous current will become the new current. <br/>
<br/>
If the new current node can be found, then other use-cursor clauses are applied to it, such as to obtain a &lt;key&gt; or &lt;value&gt;, or to &lt;update value&gt;. If, as a result of either of these clauses, the new current node cannot be found (for instance there is no lesser or greater key in the tree), the current node will be unchanged and &lt;status&gt; (in "status" clause) will be RIM_ERR_EXIST.<br/>
<div class="vsub"><a id="Key, value, updating value, status"></a>Key, value, updating value, status</div>
"key" clause will obtain the key in a current node into &lt;key&gt; string. The value of current node can be obtained in &lt;value&gt; in "value" clause; &lt;value&gt; is a string. The value of current node can be updated to &lt;update value&gt; in "update-value" clause; &lt;update value&gt; is a string. This update is performed after &lt;value&gt; has been retrieved, allowing you to obtain the previous value in the same statement. <br/>
<br/>
"status" clause can be used to obtain &lt;status&gt; number, which is RIM_ERR_EXIST if the new current node cannot be found, in which case the current node, &lt;key&gt; and &lt;value&gt; are unchanged. Otherwise, &lt;status&gt; is RIM_OKAY.<br/>
<div class="vsub"><a id="Examples"></a>Examples</div>
The following will find a value with key "999", and then iterate in the tree to find all lesser values (in descending order):<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_1141' class=notranslate>
<span class="Statement">set-string</span> k = <span class="Constant">&quot;999&quot;</span>
<span class="Statement">read-tree</span> mytree<span class="Identifier"> equal</span> k<span class="Type"> status</span> st \
   <span class="Type"> value</span> val<span class="Type"> new-cursor</span> cur
<span class="Statement">start-loop</span>
<span class="Statement">    if-true</span> st<span class="Identifier"> equal</span> RIM_OKAY
<span class="Statement">        @</span>Value found is [<span class="Statement">&lt;&lt;print-out</span> val<span class="Statement">&gt;&gt;</span>] for key [<span class="Statement">&lt;&lt;print-out</span> k<span class="Statement">&gt;&gt;</span>]
<span class="Statement">        use-cursor</span> cur<span class="Identifier"> get-lesser</span><span class="Type"> status</span> st<span class="Type"> value</span> val<span class="Type"> key</span> k
<span class="Statement">    else-if</span>
<span class="Statement">        break-loop</span>
<span class="Statement">    end-if</span>
<span class="Statement">end-loop</span></pre>
<span id=rimstone_copied_1141 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_1141' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_1141, code_1141, rimstone_copied_1141)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
For more examples, see <a href='/new-tree.html'>new-tree</a>.<br/>
<div class="vsub"><a id="See also"></a>See also</div>
 <a name='Tree'></a><span style="font-weight:bold;">Tree</span><br/>
<a href='/delete-tree.html'>delete-tree</a> &nbsp;<br/>
<a href='/get-tree.html'>get-tree</a> &nbsp;<br/>
<a href='/new-tree.html'>new-tree</a> &nbsp;<br/>
<a href='/purge-tree.html'>purge-tree</a> &nbsp;<br/>
<a href='/read-tree.html'>read-tree</a> &nbsp;<br/>
<a href='/use-cursor.html'>use-cursor</a> &nbsp;<br/>
<a href='/write-tree.html'>write-tree</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='/documentation.html'>documentation</a><br/>
<a id='utf-text.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:left;background-color:white;'><a href='https://rimstone-lang.com' style='border-bottom:0px'><img src='https://rimstone-lang.com/rimstone.png' style='width:180px;height:auto'/></a></div><div class='vhub' style='margin-top:10px;'>Utf text</div><hr/><span style="font-weight:bold;">Purpose</span>: Convert UTF-8 string to text.<br/>
<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_1142' class=notranslate>
<span class="Statement">utf-text</span> &lt;utf&gt; \
    [<span class="Type"> to</span> &lt;text&gt; ] \
    [<span class="Identifier"> length</span> &lt;length&gt; ] \
    [<span class="Type"> status</span> &lt;status&gt; ] \
    [<span class="Type"> error-text</span> &lt;error text&gt; ] \
    [<span class="Identifier"> for-json</span> ]</pre>
<span id=rimstone_copied_1142 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_1142' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_1142, code_1142, rimstone_copied_1142)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
utf-text will convert &lt;utf&gt; text to &lt;text&gt; (specified with "to" clause). If &lt;text&gt; is omitted, then the result of conversion is output.<br/>
<br/>
&lt;utf&gt; is a string that may contain UTF characters (as 2, 3 or 4 bytes representing a Unicode character). Encoding creates a string that can be used as a value where text representation of UTF-8 is required. utf-text is performed according to <a href='https://datatracker.ietf.org/doc/html/rfc7159'>RFC7159</a> and <a href='https://www.rfc-editor.org/rfc/rfc3629'>RFC3629</a> (UTF standard).<br/>
<br/>
Note that hexadecimal characters used for Unicode (such as \u21d7) are always lowercase. Solidus character ("/") is not escaped, although <a href='/text-utf.html'>text-utf</a> will correctly process it if the input has it escaped.<br/>
<br/>
The number of bytes in &lt;utf&gt; to be converted can be specified with &lt;length&gt; in "length" clause. If &lt;length&gt; is not specified, it is the length of string &lt;utf&gt;. Note that a single UTF-8 character can be anywhere between 1 to 4 bytes. For example "" is 2 bytes in length. <br/>
<br/>
The status of encoding can be obtained in number &lt;status&gt;. &lt;status&gt; is the string length of the result in &lt;text&gt; (or the number of bytes output if &lt;text&gt; is omitted), or -1 if error occurred (meaning &lt;utf&gt; is an invalid UTF-8) in which case &lt;text&gt; (if specified) is an empty string and the error text can be obtained in &lt;error text&gt; in "error-text" clause.<br/>
<br/>
"for-json" clause will produce a JSON suitable text representation of &lt;utf&gt; - it means 32 bit values (that cannot be represented with "\uXXXX" notation) will be represented as surrogate pairs (as JSON standard prescribes). Without this clause, a standard "\UXXXXXXXX" notation will be used. For example, a G clef character () will be "\ud834\udd1e" when "for-json" clause is used, otherwise it will be "\U0001d11e".<br/>
<div class="vsub"><a id="Examples"></a>Examples</div>
Convert UTF-8 string to text and verify the expected result:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_1143' class=notranslate>
<span class="Comment">// UTF string </span>
<span class="Statement">set-string</span> utf_str = <span class="Constant">&quot;</span><span class="Special">\&quot;</span><span class="Constant">Doc</span><span class="Special">\&quot;\n\t\b\f\r\t</span><span class="Constant"></span><span class="Special">\t</span><span class="Constant"></span><span class="Special">\n</span><span class="Constant">/</span><span class="Special">\&quot;</span><span class="Constant">()</span><span class="Special">\t</span><span class="Constant">&quot;</span>

<span class="Comment">// Convert UTF string to text</span>
<span class="Statement">utf-text</span> utf_str<span class="Type"> status</span> encstatus<span class="Type"> to</span> text_text<span class="Identifier"> for-json</span>

<span class="Comment">// This is the text expected</span>
<span class="Statement">((</span> expected_result
<span class="Statement">@</span>\&quot;Doc\&quot;\n\t\b\f\r\t\u21d7\u21d8\t\u25b7\u25ee\ud834\udd1e\u13eb\u2ca0\u0448\n/\&quot;()\t
<span class="Statement">))</span>

<span class="Comment">// Make sure conversion was okay, decs is the length of the result (encj string)</span>
<span class="Statement">if-true</span> text_text<span class="Identifier"> equal</span> expected_result<span class="Identifier"> and</span> encstatus<span class="Identifier"> not-equal</span> -<span class="Constant">1</span>
<span class="Statement">    @</span>decode-text worked okay
<span class="Statement">end-if</span></pre>
<span id=rimstone_copied_1143 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_1143' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_1143, code_1143, rimstone_copied_1143)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<div class="vsub"><a id="See also"></a>See also</div>
 <a name='UTF'></a><span style="font-weight:bold;">UTF</span><br/>
<a href='/text-utf.html'>text-utf</a> &nbsp;<br/>
<a href='/utf-text.html'>utf-text</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='/documentation.html'>documentation</a><br/>
<a id='variable-scope.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:left;background-color:white;'><a href='https://rimstone-lang.com' style='border-bottom:0px'><img src='https://rimstone-lang.com/rimstone.png' style='width:180px;height:auto'/></a></div><div class='vhub' style='margin-top:10px;'>Variable scope</div><hr/>RimStone uses scope rules for variables that are similar to other programming languages. Variables are defined within <a href='/code-blocks.html'>code-blocks</a> and their scope is determined by such blocks.<br/>
<br/>
Note that a variable with the same name will not be defined again in a sub-block (see <a href='/code-blocks.html'>code-blocks</a>); rather the same variable will be used. Of course, variable with the same name in two separate blocks (i.e. not nested and within separate code blocks) will be indeed separate variables.<br/>
<div class="vsub"><a id="See also"></a>See also</div>
 <a name='Language'></a><span style="font-weight:bold;">Language</span><br/>
<a href='/inline-code.html'>inline-code</a> &nbsp;<br/>
<a href='/statements.html'>statements</a> &nbsp;<br/>
<a href='/syntax-highlighting.html'>syntax-highlighting</a> &nbsp;<br/>
<a href='/unused-var.html'>unused-var</a> &nbsp;<br/>
<a href='/variable-scope.html'>variable-scope</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='/documentation.html'>documentation</a><br/>
<a id='web-framework-for-C-programming-language.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:left;background-color:white;'><a href='https://rimstone-lang.com' style='border-bottom:0px'><img src='https://rimstone-lang.com/rimstone.png' style='width:180px;height:auto'/></a></div><div class='vhub' style='margin-top:10px;'>Web framework for C programming language</div><hr/><div class="vsub"><a id="RimStone as a web framework for C programming language"></a>RimStone as a web framework for C programming language</div>
RimStone source code translates to C before compilation; as a result, RimStone offers the ability to include C code directly in extended mode (via <a href='/call-extended.html'>call-extended</a> statement and <a href='/Server-API.html'>Server-API</a>) which means RimStone is also an effective framework for C programming language.<br/>
<br/>
RimStone offers simple statements to perform complex common tasks, as well as memory safety. The C code that you'd include via call-extended statement may or may not be memory safe; thus once your application is in extended mode (see <a href='/extended-mode.html'>extended-mode</a>), your application may no longer be memory safe.<br/>
<br/>
To make sure a RimStone application is memory safe, simply search for extended-mode statement from the root source directory:<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_1144' class=notranslate>
<span class="Statement">find</span><span class="Statement"> . </span>-name <span class="Statement">&quot;</span><span class="Constant">*.rim</span><span class="Statement">&quot;</span> <span class="Special">-print</span> <span class="Special">-exec</span> <span class="Statement">grep</span> <span class="Special">-l</span> <span class="Statement">'</span><span class="Constant">^\s*extended\-mode</span><span class="Statement">'</span> <span class="Special">{}</span> \;</pre>
<span id=rimstone_copied_1144 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_1144' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_1144, code_1144, rimstone_copied_1144)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
If no matches are found, the application is memory safe.<br/>
<br/>
However, for applications that are written in C (for performance, access to hardware or OS features, or for any other reason), RimStone offers a framework that can offload many tasks from your project, while you write C code where it's needed or necessary.<br/>
<br/>
The benefit is that the part of your application written in RimStone (which may be a vast majority of it) offers memory safety, ease of development and maintenance, server facilities and lots of functionality. Your RimStone code would call your C code when needed, thus accomplishing the functionality and goals you set out to do.<br/>
<br/>
Just as a note of technicality, when used in extended mode, RimStone is considered a framework and not a library, because RimStone code will call your C code (and not the other way around).<br/>
<div class="vsub"><a id="See also"></a>See also</div>
 <a name='C language'></a><span style="font-weight:bold;">C language</span><br/>
<a href='/call-extended.html'>call-extended</a> &nbsp;<br/>
<a href='/extended-mode.html'>extended-mode</a> &nbsp;<br/>
<a href='/web-framework-for-C-programming-language.html'>web-framework-for-C-programming-language</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='/documentation.html'>documentation</a><br/>
<a id='write-array.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:left;background-color:white;'><a href='https://rimstone-lang.com' style='border-bottom:0px'><img src='https://rimstone-lang.com/rimstone.png' style='width:180px;height:auto'/></a></div><div class='vhub' style='margin-top:10px;'>Write array</div><hr/><span style="font-weight:bold;">Purpose</span>: Store value into an array.<br/>
<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_1145' class=notranslate>
<span class="Statement">write-array</span> &lt;array&gt; \
   <span class="Identifier"> key</span> &lt;key&gt; \
   <span class="Identifier"> value</span> &lt;value&gt; \
    [<span class="Type"> old-value</span> &lt;old value&gt; ]</pre>
<span id=rimstone_copied_1145 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_1145' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_1145, code_1145, rimstone_copied_1145)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
write-array will store a &lt;value&gt; (in "value" clause) under index &lt;key&gt; (in "key" clause) into &lt;array&gt;, which must be created with <a href='/new-array.html'>new-array</a>. &lt;key&gt; is a number from 0 up to (excluding) the currently allocated array size (see <a href='/new-array.html'>new-array</a>). The type of &lt;value&gt; is determined when &lt;array&gt; is created (see "type" clause), and can be either a string, number, double or a boolean.<br/>
<br/>
&lt;key&gt; and &lt;value&gt; are collectively called an "element". <br/>
<br/>
The old value associated under index &lt;key&gt; is returned in &lt;old value&gt; (in "old-value" clause) and &lt;value&gt; will replace the old value.<br/>
<br/>
If an &lt;array&gt; was created with "process-scope" clause (see <a href='/new-array.html'>new-array</a>), then the element &lt;value&gt; will not be freed when the current request ends, rather it will persist while the process runs, unless deleted (see <a href='/read-array.html'>read-array</a> with delete clause).<br/>
<div class="vsub"><a id="Examples"></a>Examples</div>
Writing data to an array:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_1147' class=notranslate>
<span class="Statement">new-array</span> arr
<span class="Statement">write-array</span> arr<span class="Identifier"> key</span> <span class="Constant">100</span><span class="Identifier"> value</span> <span class="Constant">&quot;some data&quot;</span></pre>
<span id=rimstone_copied_1147 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_1147' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_1147, code_1147, rimstone_copied_1147)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Writing new value with the same key index and obtaining the previous value (which is "some data"):<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_1149' class=notranslate>
<span class="Statement">write-array</span> arr<span class="Identifier"> key</span> <span class="Constant">100</span><span class="Identifier"> value</span> <span class="Constant">&quot;new data&quot;</span><span class="Type"> old-value</span> od
<span class="Statement">@</span>Previous value for this key index is <span class="Statement">&lt;&lt;print-out</span> od<span class="Statement">&gt;&gt;</span></pre>
<span id=rimstone_copied_1149 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_1149' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_1149, code_1149, rimstone_copied_1149)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
The following is an array service, where a process-scoped array is created. It provides inserting, deleting and querying indexed keys. Maximum number of keys it holds is 10,000,000 (indexed from 0 to 9,999,999). Such a service process can run indefinitely. Create file arrsrv.rim:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_1150' class=notranslate>
<span class="Statement">%%</span> /arrsrv<span class="Identifier"> public</span>
<span class="Statement">    do-once</span>
<span class="Statement">    new-array</span> arr<span class="Identifier"> max-size</span> <span class="Constant">10000000</span><span class="Identifier"> process-scope type string</span>
<span class="Statement">    end-do-once</span>

    <span class="Comment">// Get input parameters</span>
<span class="Statement">    get-param</span> op
<span class="Statement">    get-param</span> key
<span class="Statement">    get-param</span> data<span class="Identifier"> default-value</span> <span class="Constant">&quot;&quot;</span>
    <span class="Comment">// Convert string key to number</span>
<span class="Statement">    string-number</span> key<span class="Type"> to</span> key_n

<span class="Statement">    if-true</span> op<span class="Identifier"> equal</span> <span class="Constant">&quot;add&quot;</span> <span class="Comment">// Add data to array</span>
<span class="Statement">        write-array</span> arr<span class="Identifier"> key</span> key_n<span class="Identifier"> value</span> data<span class="Type"> old-value</span> old_data
<span class="Statement">        delete-string</span> old_data
<span class="Statement">        @</span>Added [<span class="Statement">&lt;&lt;print-out</span> key<span class="Statement">&gt;&gt;</span>]
<span class="Statement">    else-if</span> op<span class="Identifier"> equal</span> <span class="Constant">&quot;delete&quot;</span> <span class="Comment">// Delete data and obtain the value deleted</span>
<span class="Statement">        read-array</span> arr<span class="Identifier"> key</span> key_n<span class="Type"> value</span> val<span class="Identifier"> delete</span>
<span class="Statement">        @</span>Deleted [<span class="Statement">&lt;&lt;print-out</span> val<span class="Statement">&gt;&gt;</span>]
<span class="Statement">        delete-string</span> val
<span class="Statement">    else-if</span> op<span class="Identifier"> equal</span> <span class="Constant">&quot;query&quot;</span> <span class="Comment">// Query hash based on key value</span>
<span class="Statement">        read-array</span> arr<span class="Identifier"> key</span> key_n<span class="Type"> value</span> val
<span class="Statement">        @</span>Value [<span class="Statement">&lt;&lt;print-out</span> val<span class="Statement">&gt;&gt;</span>]
<span class="Statement">    end-if</span>
<span class="Statement">%%</span></pre>
<span id=rimstone_copied_1150 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_1150' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_1150, code_1150, rimstone_copied_1150)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Create and make the application, then run it as service:<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_1146' class=notranslate>
<span class="Comment"># Create application</span>
rim <span class="Special">-k</span> arr
<span class="Comment"># Make application</span>
rim <span class="Special">-q</span>
<span class="Comment"># Start application (single process key service)</span>
mrim <span class="Special">-w</span> <span class="Constant">1</span> arr</pre>
<span id=rimstone_copied_1146 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_1146' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_1146, code_1146, rimstone_copied_1146)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Try it from a command line client (see <a href='/rim.html'>rim</a>):<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_1148' class=notranslate>
<span class="Comment"># Add data</span>
rim <span class="Special">-r</span> <span class="Special">--req</span><span class="Statement">=</span><span class="Statement">&quot;</span><span class="Constant">/arrsrv/op=add/key=15/data=15</span><span class="Statement">&quot;</span> <span class="Special">--service</span> <span class="Special">--app</span><span class="Statement">=</span><span class="Statement">&quot;</span><span class="Constant">/arr</span><span class="Statement">&quot;</span> <span class="Special">--exec</span>
<span class="Comment"># Query data</span>
rim <span class="Special">-r</span> <span class="Special">--req</span><span class="Statement">=</span><span class="Statement">&quot;</span><span class="Constant">/arrsrv/op=query/key=15</span><span class="Statement">&quot;</span> <span class="Special">--service</span> <span class="Special">--app</span><span class="Statement">=</span><span class="Statement">&quot;</span><span class="Constant">/arr</span><span class="Statement">&quot;</span> <span class="Special">--exec</span>
<span class="Comment"># Delete data</span>
rim <span class="Special">-r</span> <span class="Special">--req</span><span class="Statement">=</span><span class="Statement">&quot;</span><span class="Constant">/arrsrv/op=delete/key=15</span><span class="Statement">&quot;</span> <span class="Special">--service</span> <span class="Special">--app</span><span class="Statement">=</span><span class="Statement">&quot;</span><span class="Constant">/arr</span><span class="Statement">&quot;</span> <span class="Special">--exec</span></pre>
<span id=rimstone_copied_1148 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_1148' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_1148, code_1148, rimstone_copied_1148)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
See <a href='/read-array.html'>read-array</a> for more examples.<br/>
<div class="vsub"><a id="See also"></a>See also</div>
 <a name='Array'></a><span style="font-weight:bold;">Array</span><br/>
<a href='/new-array.html'>new-array</a> &nbsp;<br/>
<a href='/purge-array.html'>purge-array</a> &nbsp;<br/>
<a href='/read-array.html'>read-array</a> &nbsp;<br/>
<a href='/write-array.html'>write-array</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='/documentation.html'>documentation</a><br/>
<a id='write-fifo.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:left;background-color:white;'><a href='https://rimstone-lang.com' style='border-bottom:0px'><img src='https://rimstone-lang.com/rimstone.png' style='width:180px;height:auto'/></a></div><div class='vhub' style='margin-top:10px;'>Write fifo</div><hr/><span style="font-weight:bold;">Purpose</span>: Write key/value pair into a FIFO list.<br/>
<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_1151' class=notranslate>
<span class="Statement">write-fifo</span> &lt;list&gt; \
   <span class="Identifier"> key</span> &lt;key&gt; \
   <span class="Identifier"> value</span> &lt;value&gt;</pre>
<span id=rimstone_copied_1151 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_1151' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_1151, code_1151, rimstone_copied_1151)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
write-fifo adds a pair of key/value pointers to the FIFO &lt;list&gt;, specified with strings &lt;key&gt; and &lt;value&gt; (in "key" and "value" clauses, collectively called an "element"). <br/>
<br/>
It always adds elements to the end of the list. <br/>
<div class="vsub"><a id="Examples"></a>Examples</div>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_1152' class=notranslate>
<span class="Statement">new-fifo</span> nf
<span class="Statement">write-fifo</span> nf<span class="Identifier"> key</span> <span class="Constant">&quot;mykey&quot;</span><span class="Identifier"> value</span> <span class="Constant">&quot;myvalue&quot;</span></pre>
<span id=rimstone_copied_1152 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_1152' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_1152, code_1152, rimstone_copied_1152)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<div class="vsub"><a id="See also"></a>See also</div>
 <a name='FIFO'></a><span style="font-weight:bold;">FIFO</span><br/>
<a href='/delete-fifo.html'>delete-fifo</a> &nbsp;<br/>
<a href='/new-fifo.html'>new-fifo</a> &nbsp;<br/>
<a href='/purge-fifo.html'>purge-fifo</a> &nbsp;<br/>
<a href='/read-fifo.html'>read-fifo</a> &nbsp;<br/>
<a href='/rewind-fifo.html'>rewind-fifo</a> &nbsp;<br/>
<a href='/write-fifo.html'>write-fifo</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='/documentation.html'>documentation</a><br/>
<a id='write-file.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:left;background-color:white;'><a href='https://rimstone-lang.com' style='border-bottom:0px'><img src='https://rimstone-lang.com/rimstone.png' style='width:180px;height:auto'/></a></div><div class='vhub' style='margin-top:10px;'>Write file</div><hr/><span style="font-weight:bold;">Purpose</span>: Write to a file.<br/>
<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_1153' class=notranslate>
<span class="Statement">write-file</span> &lt;file&gt; | (<span class="Identifier"> file-id</span> &lt;file id&gt; ) \
   <span class="Identifier"> from</span> &lt;content&gt; \
    [<span class="Identifier"> length</span> &lt;length&gt; ] \
    [ (<span class="Identifier"> position</span> &lt;position&gt; ) | (<span class="Identifier"> append</span> [ &lt;append&gt; ] ) ] \
    [<span class="Type"> status</span> &lt;status&gt; ]</pre>
<span id=rimstone_copied_1153 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_1153' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_1153, code_1153, rimstone_copied_1153)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<div class="vsub"><a id="Without file-id"></a>Without file-id</div>
This is a simple method of writing a file. File named &lt;file&gt; is opened, data written, and file is closed. &lt;file&gt; can be a full path name, or a path relative to the application home directory (see <a href='/directories.html'>directories</a>).<br/>
<br/>
write-file writes &lt;content&gt; to &lt;file&gt;. If "append" clause is used without boolean variable &lt;append&gt;, or if &lt;append&gt; evaluates to true, the &lt;content&gt; is appended to the file; otherwise the file is overwritten with &lt;content&gt;, unless "position" clause is used in which case file is not overwritten and &lt;content&gt; is written at byte &lt;position&gt; (with 0 being the first byte). Note that &lt;position&gt; can be beyond the end of file, in which case null-bytes are written between the current end of file and &lt;position&gt;.<br/>
<br/>
File is created if it does not exist (even if "append" is used), unless "position" clause is used in which case file must exist. <br/>
<br/>
If "length" is not used, then a whole string &lt;content&gt; is written to a file, and the number of bytes written is the length of that string. If "length" is specified, then exactly &lt;length&gt; bytes are written.<br/>
<br/>
If "status" clause is used, then the number of bytes written is stored to &lt;status&gt;, unless error occurred, in which case &lt;status&gt; has the error code. The error code can be RIM_ERR_POSITION (if &lt;position&gt; is negative or file does not support it), RIM_ERR_WRITE (if there is an error writing file) or RIM_ERR_OPEN if file cannot be open. <br/>
<br/>
<div class="vsub"><a id="With file-id"></a>With file-id</div>
This method uses a &lt;file id&gt; that was created with <a href='/open-file.html'>open-file</a>. You can then write (and read) file using this &lt;file id&gt; and the file stays open until <a href='/close-file.html'>close-file</a> is called or the request ends. <br/>
<br/>
If "position" clause is used, then data is written starting from byte &lt;position&gt;, otherwise writing starts from the current file position determined by the previous reads/writes or as set by using "set" clause in <a href='/file-position.html'>file-position</a>. After each read or write, the file position is advanced by the number of bytes read or written. Position can be set passed the last byte of the file, in which case writing will fill the space between the current end of file and the current position with null-bytes.<br/>
<br/>
If "length" is not used, then a whole string is written to a file, and the number of bytes written is the length of that string. If "length" is specified, then exactly &lt;length&gt; bytes are written.<br/>
<br/>
If "append" clause is used without boolean variable &lt;append&gt;, or if &lt;append&gt; evaluates to true, then file pointer is set at the end of file and data written.<br/>
<br/>
If "status" clause is used, then the number of bytes written is stored to &lt;status&gt;, unless error occurred, in which case &lt;status&gt; has the error code. The error code can be RIM_ERR_POSITION (if &lt;position&gt; is negative or file does not support it), RIM_ERR_WRITE (if there is an error writing file) or RIM_ERR_OPEN if file is not open. <br/>
<div class="vsub"><a id="Examples"></a>Examples</div>
To overwrite file "/path/to/file" with "Hello World":<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_1154' class=notranslate>
<span class="Statement">write-file</span> <span class="Constant">&quot;/path/to/file&quot;</span><span class="Identifier"> from</span> <span class="Constant">&quot;Hello World&quot;</span></pre>
<span id=rimstone_copied_1154 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_1154' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_1154, code_1154, rimstone_copied_1154)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
To append "Hello World" to file:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_1155' class=notranslate>
<span class="Statement">set-string</span> path=<span class="Constant">&quot;/path/to/file&quot;</span>
<span class="Statement">set-string</span> cont=<span class="Constant">&quot;Hello World&quot;</span>
<span class="Statement">write-file</span> path<span class="Identifier"> from</span> cont<span class="Identifier"> append</span></pre>
<span id=rimstone_copied_1155 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_1155' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_1155, code_1155, rimstone_copied_1155)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
To write only 5 bytes (i.e. "Hello") and get status (if successful, number "st" would be "5"):<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_1156' class=notranslate>
<span class="Statement">set-string</span> cont=<span class="Constant">&quot;Hello World&quot;</span>
<span class="Statement">write-file</span> <span class="Constant">&quot;file&quot;</span><span class="Identifier"> from</span> cont<span class="Identifier"> length</span> <span class="Constant">5</span><span class="Type"> status</span> st</pre>
<span id=rimstone_copied_1156 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_1156' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_1156, code_1156, rimstone_copied_1156)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
To write a string "Hello" at byte position 3 in the existing "file":<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_1157' class=notranslate>
<span class="Statement">set-string</span> cont=<span class="Constant">&quot;Hello&quot;</span>
<span class="Statement">write-file</span> <span class="Constant">&quot;file&quot;</span><span class="Identifier"> from</span> cont<span class="Identifier"> position</span> <span class="Constant">3</span><span class="Type"> status</span> st</pre>
<span id=rimstone_copied_1157 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_1157' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_1157, code_1157, rimstone_copied_1157)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
See <a href='/open-file.html'>open-file</a> for an example with "file-id" clause.<br/>
<div class="vsub"><a id="See also"></a>See also</div>
 <a name='Files'></a><span style="font-weight:bold;">Files</span><br/>
<a href='/change-mode.html'>change-mode</a> &nbsp;<br/>
<a href='/close-file.html'>close-file</a> &nbsp;<br/>
<a href='/copy-file.html'>copy-file</a> &nbsp;<br/>
<a href='/delete-file.html'>delete-file</a> &nbsp;<br/>
<a href='/file-position.html'>file-position</a> &nbsp;<br/>
<a href='/file-storage.html'>file-storage</a> &nbsp;<br/>
<a href='/file-uploading.html'>file-uploading</a> &nbsp;<br/>
<a href='/get-upload.html'>get-upload</a> &nbsp;<br/>
<a href='/lock-file.html'>lock-file</a> &nbsp;<br/>
<a href='/open-file.html'>open-file</a> &nbsp;<br/>
<a href='/read-file.html'>read-file</a> &nbsp;<br/>
<a href='/read-line.html'>read-line</a> &nbsp;<br/>
<a href='/rename-file.html'>rename-file</a> &nbsp;<br/>
<a href='/stat-file.html'>stat-file</a> &nbsp;<br/>
<a href='/temporary-file.html'>temporary-file</a> &nbsp;<br/>
<a href='/uniq-file.html'>uniq-file</a> &nbsp;<br/>
<a href='/unlock-file.html'>unlock-file</a> &nbsp;<br/>
<a href='/write-file.html'>write-file</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='/documentation.html'>documentation</a><br/>
<a id='write-hash.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:left;background-color:white;'><a href='https://rimstone-lang.com' style='border-bottom:0px'><img src='https://rimstone-lang.com/rimstone.png' style='width:180px;height:auto'/></a></div><div class='vhub' style='margin-top:10px;'>Write hash</div><hr/><span style="font-weight:bold;">Purpose</span>: Store key/value pair into a hash.<br/>
<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_1158' class=notranslate>
<span class="Statement">write-hash</span> &lt;hash&gt; \
   <span class="Identifier"> key</span> &lt;key&gt; \
   <span class="Identifier"> value</span> &lt;value&gt; \
    [<span class="Type"> status</span> &lt;status&gt; ] \
    [<span class="Type"> old-value</span> &lt;old value&gt; ]</pre>
<span id=rimstone_copied_1158 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_1158' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_1158, code_1158, rimstone_copied_1158)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
write-hash will store string &lt;key&gt; (in "key" clause) and &lt;value&gt; (in "value" clause) into &lt;hash&gt;, which must be created with <a href='/new-hash.html'>new-hash</a>. <br/>
<br/>
&lt;key&gt; and &lt;value&gt; are collectively called an "element". <br/>
<br/>
If &lt;key&gt; already exists in the hash, then the old value associated with it is returned in string &lt;old value&gt; (in "old-value" clause) and &lt;value&gt; will replace the old value - in this case &lt;status&gt; number (in "status" clause) has a value of RIM_INFO_EXIST. <br/>
<br/>
If &lt;key&gt; did not exist, &lt;status&gt; will be RIM_OKAY and &lt;old value&gt; is unchanged.<br/>
<br/>
If a &lt;hash&gt; was created with "process-scope" clause (see <a href='/new-hash.html'>new-hash</a>), then the element (including &lt;key&gt; and &lt;value&gt;) will not be freed when the current request ends, rather it will persist while the process runs, unless deleted (see <a href='/read-hash.html'>read-hash</a> with delete clause).<br/>
<div class="vsub"><a id="Examples"></a>Examples</div>
Writing data to a hash:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_1160' class=notranslate>
<span class="Statement">new-hash</span> h
<span class="Statement">write-hash</span> h<span class="Identifier"> key</span> <span class="Constant">&quot;mykey&quot;</span><span class="Identifier"> value</span> <span class="Constant">&quot;some data&quot;</span></pre>
<span id=rimstone_copied_1160 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_1160' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_1160, code_1160, rimstone_copied_1160)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Writing new value with the same key and obtaining the previous value (which is "some data"):<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_1162' class=notranslate>
<span class="Statement">write-hash</span> h<span class="Identifier"> key</span> <span class="Constant">&quot;mykey&quot;</span><span class="Identifier"> value</span> <span class="Constant">&quot;new data&quot;</span><span class="Type"> status</span> st<span class="Type"> old-value</span> od
<span class="Statement">if-true</span> st<span class="Identifier"> equal</span> RIM_INFO_EXIST
<span class="Statement">    @</span>Previous value for this key is <span class="Statement">&lt;&lt;print-out</span> od<span class="Statement">&gt;&gt;</span>
<span class="Statement">end-if</span></pre>
<span id=rimstone_copied_1162 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_1162' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_1162, code_1162, rimstone_copied_1162)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
The following is a key/value service, where a process-scoped hash is created. It provides inserting, deleting and querying key/value pairs. Such a service process can run indefinitely. Create file keysrv.rim:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_1163' class=notranslate>
<span class="Statement">%%</span> /keysrv<span class="Identifier"> public</span>
<span class="Statement">    do-once</span>
<span class="Statement">    new-hash</span> h<span class="Identifier"> hash-size</span> <span class="Constant">1024</span><span class="Identifier"> process-scope</span>
<span class="Statement">    end-do-once</span>

    <span class="Comment">// Get input parameters</span>
<span class="Statement">    get-param</span> op
<span class="Statement">    get-param</span> key
<span class="Statement">    get-param</span> data<span class="Identifier"> default-value</span> <span class="Constant">&quot;&quot;</span>

<span class="Statement">    if-true</span> op<span class="Identifier"> equal</span> <span class="Constant">&quot;add&quot;</span> <span class="Comment">// Add data to hash </span>
<span class="Statement">        write-hash</span> h<span class="Identifier"> key key value</span> data<span class="Type"> old-value</span> old_data<span class="Type"> status</span> st
<span class="Statement">        if-true</span> st<span class="Identifier"> equal</span> RIM_INFO_EXIST
<span class="Statement">            delete-string</span> old_data
<span class="Statement">        end-if</span>
<span class="Statement">        @</span>Added [<span class="Statement">&lt;&lt;print-out</span> key<span class="Statement">&gt;&gt;</span>]
<span class="Statement">    else-if</span> op<span class="Identifier"> equal</span> <span class="Constant">&quot;delete&quot;</span> <span class="Comment">// Delete data and obtain the value deleted</span>
<span class="Statement">        read-hash</span> h<span class="Type"> key</span> (key)<span class="Type"> value</span> val<span class="Identifier"> delete</span><span class="Type"> status</span> st
<span class="Statement">        if-true</span> st<span class="Identifier"> equal</span> RIM_ERR_EXIST
<span class="Statement">            @</span>Not found [<span class="Statement">&lt;&lt;print-out</span> key<span class="Statement">&gt;&gt;</span>]
<span class="Statement">        else-if</span>
            <span class="Comment">// If found, then delete key and value</span>
<span class="Statement">            @</span>Deleted [<span class="Statement">&lt;&lt;print-out</span> val<span class="Statement">&gt;&gt;</span>]
<span class="Statement">            delete-string</span> val
<span class="Statement">        end-if</span>
<span class="Statement">    else-if</span> op<span class="Identifier"> equal</span> <span class="Constant">&quot;query&quot;</span> <span class="Comment">// Query hash based on key value</span>
<span class="Statement">        read-hash</span> h<span class="Type"> key</span> (key)<span class="Type"> value</span> val<span class="Type"> status</span> st
<span class="Statement">        if-true</span> st<span class="Identifier"> equal</span> RIM_ERR_EXIST
<span class="Statement">            @</span>Not found, queried [<span class="Statement">&lt;&lt;print-out</span> key<span class="Statement">&gt;&gt;</span>]
<span class="Statement">        else-if</span>
<span class="Statement">            @</span>Value [<span class="Statement">&lt;&lt;print-out</span> val<span class="Statement">&gt;&gt;</span>]
<span class="Statement">        end-if</span>
<span class="Statement">    end-if</span>
<span class="Statement">%%</span></pre>
<span id=rimstone_copied_1163 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_1163' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_1163, code_1163, rimstone_copied_1163)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Create and make the application, then run it as service:<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_1159' class=notranslate>
// Create application
rim <span class="Special">-k</span> <span class="Statement">hash</span>
// Make application
rim <span class="Special">-q</span>
// Start application <span class="PreProc">(</span><span class="Special">single process key service</span><span class="PreProc">)</span>
mrim <span class="Special">-w</span> <span class="Constant">1</span> <span class="Statement">hash</span></pre>
<span id=rimstone_copied_1159 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_1159' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_1159, code_1159, rimstone_copied_1159)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Try it from a command line client (see <a href='/rim.html'>rim</a>):<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_1161' class=notranslate>
// Add data
rim <span class="Special">-r</span> <span class="Special">--req</span><span class="Statement">=</span><span class="Statement">&quot;</span><span class="Constant">/keysrv/op=add/key=15/data=15</span><span class="Statement">&quot;</span> <span class="Special">--service</span> <span class="Special">--app</span><span class="Statement">=</span><span class="Statement">&quot;</span><span class="Constant">/hash</span><span class="Statement">&quot;</span> <span class="Special">--exec</span>
// Query data
rim <span class="Special">-r</span> <span class="Special">--req</span><span class="Statement">=</span><span class="Statement">&quot;</span><span class="Constant">/keysrv/op=query/key=15</span><span class="Statement">&quot;</span> <span class="Special">--service</span> <span class="Special">--app</span><span class="Statement">=</span><span class="Statement">&quot;</span><span class="Constant">/hash</span><span class="Statement">&quot;</span> <span class="Special">--exec</span>
// Delete data
rim <span class="Special">-r</span> <span class="Special">--req</span><span class="Statement">=</span><span class="Statement">&quot;</span><span class="Constant">/keysrv/op=delete/key=15</span><span class="Statement">&quot;</span> <span class="Special">--service</span> <span class="Special">--app</span><span class="Statement">=</span><span class="Statement">&quot;</span><span class="Constant">/hash</span><span class="Statement">&quot;</span> <span class="Special">--exec</span></pre>
<span id=rimstone_copied_1161 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_1161' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_1161, code_1161, rimstone_copied_1161)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
See <a href='/read-hash.html'>read-hash</a> for more examples.<br/>
<div class="vsub"><a id="See also"></a>See also</div>
 <a name='Hash'></a><span style="font-weight:bold;">Hash</span><br/>
<a href='/get-hash.html'>get-hash</a> &nbsp;<br/>
<a href='/new-hash.html'>new-hash</a> &nbsp;<br/>
<a href='/purge-hash.html'>purge-hash</a> &nbsp;<br/>
<a href='/read-hash.html'>read-hash</a> &nbsp;<br/>
<a href='/resize-hash.html'>resize-hash</a> &nbsp;<br/>
<a href='/write-hash.html'>write-hash</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='/documentation.html'>documentation</a><br/>
<a id='write-lifo.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:left;background-color:white;'><a href='https://rimstone-lang.com' style='border-bottom:0px'><img src='https://rimstone-lang.com/rimstone.png' style='width:180px;height:auto'/></a></div><div class='vhub' style='margin-top:10px;'>Write lifo</div><hr/><span style="font-weight:bold;">Purpose</span>: Write key/value pair into a LIFO list.<br/>
<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_1164' class=notranslate>
<span class="Statement">write-lifo</span> &lt;list&gt; \
   <span class="Identifier"> key</span> &lt;key&gt; \
   <span class="Identifier"> value</span> &lt;value&gt;</pre>
<span id=rimstone_copied_1164 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_1164' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_1164, code_1164, rimstone_copied_1164)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
write-lifo adds a pair of key/value to the LIFO &lt;list&gt;, specified with strings &lt;key&gt; and &lt;value&gt; (in "key" and "value" clauses, collectively called an "element"). <br/>
<br/>
It always adds an element so that the last one written to &lt;list&gt; &nbsp;would be the first to be read with <a href='/read-lifo.html'>read-lifo</a>.<br/>
<div class="vsub"><a id="Examples"></a>Examples</div>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_1165' class=notranslate>
<span class="Statement">new-lifo</span> nf
<span class="Statement">write-lifo</span> nf<span class="Identifier"> key</span> <span class="Constant">&quot;mykey&quot;</span><span class="Identifier"> value</span> <span class="Constant">&quot;myvalue&quot;</span></pre>
<span id=rimstone_copied_1165 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_1165' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_1165, code_1165, rimstone_copied_1165)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<div class="vsub"><a id="See also"></a>See also</div>
 <a name='LIFO'></a><span style="font-weight:bold;">LIFO</span><br/>
<a href='/delete-lifo.html'>delete-lifo</a> &nbsp;<br/>
<a href='/get-lifo.html'>get-lifo</a> &nbsp;<br/>
<a href='/new-lifo.html'>new-lifo</a> &nbsp;<br/>
<a href='/purge-lifo.html'>purge-lifo</a> &nbsp;<br/>
<a href='/read-lifo.html'>read-lifo</a> &nbsp;<br/>
<a href='/rewind-lifo.html'>rewind-lifo</a> &nbsp;<br/>
<a href='/write-lifo.html'>write-lifo</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='/documentation.html'>documentation</a><br/>
<a id='write-list.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:left;background-color:white;'><a href='https://rimstone-lang.com' style='border-bottom:0px'><img src='https://rimstone-lang.com/rimstone.png' style='width:180px;height:auto'/></a></div><div class='vhub' style='margin-top:10px;'>Write list</div><hr/><span style="font-weight:bold;">Purpose</span>: Write key/value pair into a linked list.<br/>
<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_1166' class=notranslate>
<span class="Statement">write-list</span> &lt;list&gt;<span class="Identifier"> key</span> &lt;key&gt; \
   <span class="Identifier"> value</span> &lt;value&gt; \
    [<span class="Identifier"> append</span> [ &lt;append&gt; ] ]</pre>
<span id=rimstone_copied_1166 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_1166' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_1166, code_1166, rimstone_copied_1166)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
write-list adds a pair of key/value strings to the linked &lt;list&gt;, specified with &lt;key&gt; and &lt;value&gt; (in "key" and "value" clauses, collectively called an "element"). <br/>
<br/>
The key/value pair is added just prior to the list's current position, thus becoming a current element. <br/>
<br/>
If "append" clause is used without boolean variable &lt;append&gt;, or if &lt;append&gt; evaluates to true, then the element is added at the end of the list, and the list's current element becomes the newly added one.<br/>
<div class="vsub"><a id="Examples"></a>Examples</div>
Add a key/value pair to the end of the list:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_1168' class=notranslate>
<span class="Statement">new-list</span> mylist
<span class="Statement">write-list</span> mylist<span class="Identifier"> key</span> <span class="Constant">&quot;mykey&quot;</span><span class="Identifier"> value</span> <span class="Constant">&quot;myvalue&quot;</span><span class="Identifier"> append</span></pre>
<span id=rimstone_copied_1168 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_1168' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_1168, code_1168, rimstone_copied_1168)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
The following is a list that is process-scoped, i.e. it is a linked-list server, which can add, delete, read and position to various elements:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_1170' class=notranslate>
<span class="Statement">%%</span> /llsrv<span class="Identifier"> public</span>
    <span class="Comment">// Create linked list just once for the life of the process</span>
<span class="Statement">    do-once</span>
<span class="Statement">    new-list</span> t<span class="Identifier"> process-scope</span>
<span class="Statement">    end-do-once</span>

    <span class="Comment">// Get input parameters</span>
<span class="Statement">    get-param</span> op
<span class="Statement">    get-param</span> key<span class="Identifier"> default-value</span> <span class="Constant">&quot;&quot;</span>
<span class="Statement">    get-param</span> data<span class="Identifier"> default-value</span> <span class="Constant">&quot;&quot;</span>

<span class="Statement">    if-true</span> op<span class="Identifier"> equal</span> <span class="Constant">&quot;add&quot;</span> <span class="Comment">// Add data to list</span>
        <span class="Comment">// Make a copy of key,data so they are RimStone-allocated</span>
<span class="Statement">        write-list</span> t<span class="Identifier"> key</span> (key)<span class="Identifier"> value</span> data<span class="Identifier"> append</span>
<span class="Statement">        @</span>Added [<span class="Statement">&lt;&lt;print-out</span> key<span class="Statement">&gt;&gt;</span>] value [<span class="Statement">&lt;&lt;print-out</span> data<span class="Statement">&gt;&gt;</span>]

<span class="Statement">    else-if</span> op<span class="Identifier"> equal</span> <span class="Constant">&quot;delete&quot;</span> <span class="Comment">// Delete first data and obtain the value deleted</span>
<span class="Statement">        position-list</span> t<span class="Identifier"> first</span>
<span class="Statement">        read-list</span> t<span class="Type"> key</span> (key)<span class="Type"> value</span> val<span class="Type"> status</span> st
<span class="Statement">        if-true</span> st<span class="Identifier"> equal</span> RIM_ERR_EXIST
<span class="Statement">            @</span>Not found
<span class="Statement">        else-if</span>
            <span class="Comment">// If found, then delete key and value</span>
<span class="Statement">            @</span>Deleted key [<span class="Statement">&lt;&lt;print-out</span> key<span class="Statement">&gt;&gt;</span>], [<span class="Statement">&lt;&lt;print-out</span> val<span class="Statement">&gt;&gt;</span>]
<span class="Statement">            delete-list</span> t
<span class="Statement">        end-if</span>

<span class="Statement">    else-if</span> op<span class="Identifier"> equal</span> <span class="Constant">&quot;next&quot;</span> <span class="Comment">// Position to next element</span>
<span class="Statement">        position-list</span> t<span class="Identifier"> next</span><span class="Type"> status</span> st
<span class="Statement">        if-true</span> st<span class="Identifier"> equal</span> RIM_OKAY
<span class="Statement">            @</span>Okay
<span class="Statement">        else-if</span>
<span class="Statement">            @</span>Not found
<span class="Statement">        end-if</span>

<span class="Statement">    else-if</span> op<span class="Identifier"> equal</span> <span class="Constant">&quot;last&quot;</span> <span class="Comment">// Position to last element</span>
<span class="Statement">        position-list</span> t<span class="Identifier"> last</span><span class="Type"> status</span> st
<span class="Statement">        if-true</span> st<span class="Identifier"> equal</span> RIM_OKAY
<span class="Statement">            @</span>Okay
<span class="Statement">        else-if</span>
<span class="Statement">            @</span>Not found
<span class="Statement">        end-if</span>

<span class="Statement">    else-if</span> op<span class="Identifier"> equal</span> <span class="Constant">&quot;previous&quot;</span> <span class="Comment">// Position to element</span>
<span class="Statement">        position-list</span> t<span class="Identifier"> previous</span><span class="Type"> status</span> st
<span class="Statement">        if-true</span> st<span class="Identifier"> equal</span> RIM_OKAY
<span class="Statement">            @</span>Okay
<span class="Statement">        else-if</span>
<span class="Statement">            @</span>Not found
<span class="Statement">        end-if</span>

<span class="Statement">    else-if</span> op<span class="Identifier"> equal</span> <span class="Constant">&quot;first&quot;</span> <span class="Comment">// Get first element</span>
<span class="Statement">        position-list</span> t<span class="Identifier"> first</span><span class="Type"> status</span> st
<span class="Statement">        if-true</span> st<span class="Identifier"> equal</span> RIM_OKAY
<span class="Statement">            @</span>Okay
<span class="Statement">        else-if</span>
<span class="Statement">            @</span>Not found
<span class="Statement">        end-if</span>

<span class="Statement">    else-if</span> op<span class="Identifier"> equal</span> <span class="Constant">&quot;query&quot;</span> <span class="Comment">// Get current element</span>
<span class="Statement">        read-list</span> t<span class="Type"> key</span> (key)<span class="Type"> value</span> val<span class="Type"> status</span> st
<span class="Statement">        if-true</span> st<span class="Identifier"> equal</span> RIM_ERR_EXIST
<span class="Statement">            @</span>Not found
<span class="Statement">        else-if</span>
<span class="Statement">            @</span>Key [<span class="Statement">&lt;&lt;print-out</span> key<span class="Statement">&gt;&gt;</span>], value [<span class="Statement">&lt;&lt;print-out</span> val<span class="Statement">&gt;&gt;</span>]
<span class="Statement">        end-if</span>

<span class="Statement">    else-if</span> op<span class="Identifier"> equal</span> <span class="Constant">&quot;purge&quot;</span> <span class="Comment">// remove all, keep the list</span>
<span class="Statement">        purge-list</span> t
<span class="Statement">    end-if</span>
<span class="Statement">%%</span></pre>
<span id=rimstone_copied_1170 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_1170' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_1170, code_1170, rimstone_copied_1170)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Create application:<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_1167' class=notranslate>
rim <span class="Special">-k</span> linkserver</pre>
<span id=rimstone_copied_1167 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_1167' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_1167, code_1167, rimstone_copied_1167)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Start the server:<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_1169' class=notranslate>
mrim <span class="Special">-w</span> <span class="Constant">1</span> linkserver</pre>
<span id=rimstone_copied_1169 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_1169' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_1169, code_1169, rimstone_copied_1169)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Try it out:<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_1171' class=notranslate>
rim <span class="Special">-r</span> <span class="Special">--req</span><span class="Statement">=</span><span class="Statement">&quot;</span><span class="Constant">/llsrv/op=add/key=1/data=1</span><span class="Statement">&quot;</span> <span class="Special">--exec</span> <span class="Special">--service</span>
rim <span class="Special">-r</span> <span class="Special">--req</span><span class="Statement">=</span><span class="Statement">&quot;</span><span class="Constant">/llsrv/op=add/key=2/data=2</span><span class="Statement">&quot;</span> <span class="Special">--exec</span> <span class="Special">--service</span>
rim <span class="Special">-r</span> <span class="Special">--req</span><span class="Statement">=</span><span class="Statement">&quot;</span><span class="Constant">/llsrv/op=query</span><span class="Statement">&quot;</span> <span class="Special">--exec</span> <span class="Special">--service</span>
rim <span class="Special">-r</span> <span class="Special">--req</span><span class="Statement">=</span><span class="Statement">&quot;</span><span class="Constant">/llsrv/op=previous</span><span class="Statement">&quot;</span> <span class="Special">--exec</span> <span class="Special">--service</span>
rim <span class="Special">-r</span> <span class="Special">--req</span><span class="Statement">=</span><span class="Statement">&quot;</span><span class="Constant">/llsrv/op=query</span><span class="Statement">&quot;</span> <span class="Special">--exec</span> <span class="Special">--service</span></pre>
<span id=rimstone_copied_1171 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_1171' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_1171, code_1171, rimstone_copied_1171)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<div class="vsub"><a id="See also"></a>See also</div>
 <a name='Linked list'></a><span style="font-weight:bold;">Linked list</span><br/>
<a href='/delete-list.html'>delete-list</a> &nbsp;<br/>
<a href='/get-list.html'>get-list</a> &nbsp;<br/>
<a href='/new-list.html'>new-list</a> &nbsp;<br/>
<a href='/position-list.html'>position-list</a> &nbsp;<br/>
<a href='/purge-list.html'>purge-list</a> &nbsp;<br/>
<a href='/read-list.html'>read-list</a> &nbsp;<br/>
<a href='/write-list.html'>write-list</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='/documentation.html'>documentation</a><br/>
<a id='write-message.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:left;background-color:white;'><a href='https://rimstone-lang.com' style='border-bottom:0px'><img src='https://rimstone-lang.com/rimstone.png' style='width:180px;height:auto'/></a></div><div class='vhub' style='margin-top:10px;'>Write message</div><hr/><span style="font-weight:bold;">Purpose</span>: Write key/value to a message.<br/>
<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_1172' class=notranslate>
<span class="Statement">write-message</span> &lt;message&gt; <span class="Identifier"> key</span> &lt;key&gt;<span class="Identifier"> value</span> &lt;value&gt;</pre>
<span id=rimstone_copied_1172 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_1172' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_1172, code_1172, rimstone_copied_1172)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
write-message will append to &lt;message&gt; a key/value pair, in the form of string &lt;key&gt; (in "key" clause) and string &lt;value&gt; (in "value" clause). <br/>
<br/>
&lt;message&gt; must have been created with <a href='/new-message.html'>new-message</a>. In order to use write-message, a message must not have been read from (see <a href='/read-message.html'>read-message</a>). <br/>
<div class="vsub"><a id="Examples"></a>Examples</div>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_1173' class=notranslate>
<span class="Statement">new-message</span> msg
<span class="Statement">write-message</span> msg<span class="Identifier"> key</span> <span class="Constant">&quot;key1&quot;</span><span class="Identifier"> value</span> <span class="Constant">&quot;value1&quot;</span></pre>
<span id=rimstone_copied_1173 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_1173' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_1173, code_1173, rimstone_copied_1173)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<div class="vsub"><a id="See also"></a>See also</div>
 <a name='Messages'></a><span style="font-weight:bold;">Messages</span><br/>
<a href='/get-message.html'>get-message</a> &nbsp;<br/>
<a href='/new-message.html'>new-message</a> &nbsp;<br/>
<a href='/read-message.html'>read-message</a> &nbsp;<br/>
<a href='/SEMI.html'>SEMI</a> &nbsp;<br/>
<a href='/write-message.html'>write-message</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='/documentation.html'>documentation</a><br/>
<a id='write-string.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:left;background-color:white;'><a href='https://rimstone-lang.com' style='border-bottom:0px'><img src='https://rimstone-lang.com/rimstone.png' style='width:180px;height:auto'/></a></div><div class='vhub' style='margin-top:10px;'>Write string</div><hr/><span style="font-weight:bold;">Purpose</span>: Create complex strings.<br/>
<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_1176' class=notranslate>
<span class="Statement">write-string</span> &lt;string&gt;

&lt;any code&gt;

<span class="Statement">end-write-string</span> [<span class="Identifier"> notrim</span> ]</pre>
<span id=rimstone_copied_1176 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_1176' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_1176, code_1176, rimstone_copied_1176)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Output of any RimStone code can be written into &lt;string&gt; with write-string. In between write-string and end-write-string you can write &lt;any RimStone code&gt;. For instance you can use database queries, comparison statements etc., just as you would for any other RimStone code. <br/>
<div class="vsub"><a id="Shortcut code"></a>Shortcut code</div>
Note that instead of write-string you can also use a shortcut "((" &nbsp;(and instead of end-write-string you can use "))" &nbsp;), for example here a string "fname" holds a full path of a file named "config-install.rim" under the application home directory (see <a href='/directories.html'>directories</a>):<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_1178' class=notranslate>
<span class="Statement">get-app</span><span class="Identifier"> directory</span><span class="Type"> to</span> home_dir
<span class="Statement">((</span> fname
<span class="Statement">@</span><span class="Statement">&lt;&lt;print-out</span> home_dir<span class="Statement">&gt;&gt;</span>/config-install.rim
<span class="Statement">))</span></pre>
<span id=rimstone_copied_1178 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_1178' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_1178, code_1178, rimstone_copied_1178)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<div class="vsub"><a id="Trimming"></a>Trimming</div>
Just like with all other RimStone code, the text of every statement is trimmed both on left and write, so this:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_1180' class=notranslate>
<span class="Statement">((</span> mystr
<span class="Statement">@</span>Some string
<span class="Statement">))</span></pre>
<span id=rimstone_copied_1180 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_1180' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_1180, code_1180, rimstone_copied_1180)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
is the same as:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_1182' class=notranslate>
<span class="Statement">((</span> mystr
<span class="Statement">        @</span>Some string &lt;whitespaces&gt;
<span class="Statement">))</span></pre>
<span id=rimstone_copied_1182 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_1182' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_1182, code_1182, rimstone_copied_1182)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
write-string (or "((") statement must always be on a line by itself (and so does end-write-string, or "))" statement). The string being built starts with the line following write-string, and ends with the line immediately prior to end-write-string. <br/>
<br/>
All trailing whitespaces (including new lines) are removed, for example:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_1184' class=notranslate>
<span class="Statement">((</span> mystr
<span class="Statement">        @</span>My string
<span class="Statement">        @</span>
<span class="Statement">        @</span>
<span class="Statement">))</span></pre>
<span id=rimstone_copied_1184 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_1184' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_1184, code_1184, rimstone_copied_1184)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
the above string would have two trailing empty lines, however they will be removed. If you want to skip trimming the trailing whitespaces, use "notrim" clause in end-write-string.<br/>
<div class="vsub"><a id="Examples"></a>Examples</div>
<span style="font-weight:bold;">- Simple</span><br/>
A simple example:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_1186' class=notranslate>
<span class="Statement">set-string</span> my_str=<span class="Constant">&quot;world&quot;</span>
<span class="Statement">set-string</span> my_str1=<span class="Constant">&quot;and have a nice day too!&quot;</span>

<span class="Statement">write-string</span> result_str
<span class="Statement">@</span>Hello <span class="Statement">&lt;&lt;print-out</span> my_str<span class="Statement">&gt;&gt;</span> (<span class="Statement">&lt;&lt;print-out</span> my_str1<span class="Statement">&gt;&gt;</span>)
<span class="Statement">end-write-string</span>

<span class="Statement">print-out</span> result_str</pre>
<span id=rimstone_copied_1186 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_1186' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_1186, code_1186, rimstone_copied_1186)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
The output is <br/>
<div class='ncode' style='position:relative;padding-right:16px;'>
<pre id='code_1175' class=notranslate>
Hello world (and have a nice day too!)</pre>
<span id=rimstone_copied_1175 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_1175' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_1175, code_1175, rimstone_copied_1175)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<br/>
<span style="font-weight:bold;">- Using code inside</span><br/>
Here is using RimStone code inside write-string, including database query and comparison statements to produce different strings at run-time:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_1188' class=notranslate>
<span class="Statement">get-param</span> selector

<span class="Statement">set-string</span> my_str=<span class="Constant">&quot;world&quot;</span>

<span class="Statement">write-string</span> result_str
<span class="Statement">    if-true</span> selector<span class="Identifier"> equal</span> <span class="Constant">&quot;simple&quot;</span>
<span class="Statement">        @</span>Hello <span class="Statement">&lt;&lt;print-out</span> my_string<span class="Statement">&gt;&gt;</span> (and have a nice day too!)
<span class="Statement">    else-if</span> selector<span class="Identifier"> equal</span> <span class="Constant">&quot;database&quot;</span>
<span class="Statement">        run-query</span> @db=<span class="Constant">&quot;select name from employee&quot;</span><span class="Type"> output</span> name
<span class="Statement">            @</span>Hello <span class="Statement">&lt;&lt;print-out</span> name<span class="Statement">&gt;&gt;</span>
<span class="Statement">            @</span>&lt;br/&gt;
<span class="Statement">        end-query</span>
<span class="Statement">    else-if</span>
<span class="Statement">        @</span>No message
<span class="Statement">    end-if</span>
<span class="Statement">end-write-string</span>

<span class="Statement">print-out</span> result_str</pre>
<span id=rimstone_copied_1188 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_1188' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_1188, code_1188, rimstone_copied_1188)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
If selector variable is "simple", as in URL <br/>
<div class='ncode' style='position:relative;padding-right:16px;'>
<pre id='code_1177' class=notranslate>
https://mysite.com/&lt;app name&gt;/some-service?selector=simple</pre>
<span id=rimstone_copied_1177 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_1177' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_1177, code_1177, rimstone_copied_1177)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
the result is <br/>
<div class='ncode' style='position:relative;padding-right:16px;'>
<pre id='code_1179' class=notranslate>
Hello world (and have a nice day too!)</pre>
<span id=rimstone_copied_1179 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_1179' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_1179, code_1179, rimstone_copied_1179)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
If selector variable is "database", as in URL <br/>
<div class='ncode' style='position:relative;padding-right:16px;'>
<pre id='code_1181' class=notranslate>
https://mysite.com/&lt;app name&gt;/some-service?selector=database</pre>
<span id=rimstone_copied_1181 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_1181' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_1181, code_1181, rimstone_copied_1181)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
the result may be (assuming "Linda" and "John" are the two employees selected):<br/>
<div class='ncode' style='position:relative;padding-right:16px;'>
<pre id='code_1183' class=notranslate>
Hello Linda
&lt;br/&gt;
Hello John
&lt;br/&gt;</pre>
<span id=rimstone_copied_1183 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_1183' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_1183, code_1183, rimstone_copied_1183)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
If selector variable is anything else, as in URL <br/>
<div class='ncode' style='position:relative;padding-right:16px;'>
<pre id='code_1185' class=notranslate>
https://mysite.com/&lt;app name&gt;/some-service?selector=something_else</pre>
<span id=rimstone_copied_1185 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_1185' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_1185, code_1185, rimstone_copied_1185)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
the result is <br/>
<div class='ncode' style='position:relative;padding-right:16px;'>
<pre id='code_1187' class=notranslate>
No message</pre>
<span id=rimstone_copied_1187 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_1187' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_1187, code_1187, rimstone_copied_1187)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<span style="font-weight:bold;">- Using call-handlers calls inside</span><br/>
The following uses a call-handler inside write-string:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_1190' class=notranslate>
<span class="Statement">set-string</span> result_str=<span class="Constant">&quot;&quot;</span>
<span class="Statement">write-string</span> result_str
<span class="Statement">    @</span><span class="Statement">&lt;&lt;print-out</span> <span class="Constant">&quot;Result from other-service&quot;</span><span class="Statement">&gt;&gt;</span> is <span class="Statement">&lt;&lt;call-handler</span> <span class="Constant">&quot;/other-service&quot;</span><span class="Statement">&gt;&gt;</span>
<span class="Statement">end-write-string</span>
<span class="Statement">print-out</span> result_str</pre>
<span id=rimstone_copied_1190 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_1190' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_1190, code_1190, rimstone_copied_1190)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
The "other-service" may be:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_1192' class=notranslate>
<span class="Statement">begin-handler</span> /other-service<span class="Identifier"> public</span>
<span class="Statement">    @</span>&quot;Hello from other service&quot;
<span class="Statement">end-handler</span></pre>
<span id=rimstone_copied_1192 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_1192' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_1192, code_1192, rimstone_copied_1192)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
The output:<br/>
<div class='ncode' style='position:relative;padding-right:16px;'>
<pre id='code_1189' class=notranslate>
Result from other-service is Hello from other service</pre>
<span id=rimstone_copied_1189 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_1189' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_1189, code_1189, rimstone_copied_1189)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<br/>
<span style="font-weight:bold;">- Nesting</span><br/>
An example to nest write-strings:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_1174' class=notranslate>
<span class="Statement">write-string</span> str1
<span class="Statement">    @</span>Hi!
<span class="Statement">    write-string</span> str2
<span class="Statement">        @</span>Hi Again!
<span class="Statement">   end-write-string</span>
<span class="Statement">   print-out</span> str2
<span class="Statement">end-write-string</span>
<span class="Statement">print-out</span> str1</pre>
<span id=rimstone_copied_1174 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_1174' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_1174, code_1174, rimstone_copied_1174)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
The result is <br/>
<div class='ncode' style='position:relative;padding-right:16px;'>
<pre id='code_1191' class=notranslate>
Hi!
Hi Again!</pre>
<span id=rimstone_copied_1191 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_1191' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_1191, code_1191, rimstone_copied_1191)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<div class="vsub"><a id="See also"></a>See also</div>
 <a name='Strings'></a><span style="font-weight:bold;">Strings</span><br/>
<a href='/copy-string.html'>copy-string</a> &nbsp;<br/>
<a href='/count-substring.html'>count-substring</a> &nbsp;<br/>
<a href='/delete-string.html'>delete-string</a> &nbsp;<br/>
<a href='/double-string.html'>double-string</a> &nbsp;<br/>
<a href='/lower-string.html'>lower-string</a> &nbsp;<br/>
<a href='/match-regex.html'>match-regex</a> &nbsp;<br/>
<a href='/new-string.html'>new-string</a> &nbsp;<br/>
<a href='/number-string.html'>number-string</a> &nbsp;<br/>
<a href='/read-split.html'>read-split</a> &nbsp;<br/>
<a href='/replace-string.html'>replace-string</a> &nbsp;<br/>
<a href='/scan-string.html'>scan-string</a> &nbsp;<br/>
<a href='/set-string.html'>set-string</a> &nbsp;<br/>
<a href='/split-string.html'>split-string</a> &nbsp;<br/>
<a href='/string-double.html'>string-double</a> &nbsp;<br/>
<a href='/string-expressions.html'>string-expressions</a> &nbsp;<br/>
<a href='/string-length.html'>string-length</a> &nbsp;<br/>
<a href='/string-number.html'>string-number</a> &nbsp;<br/>
<a href='/trim-string.html'>trim-string</a> &nbsp;<br/>
<a href='/upper-string.html'>upper-string</a> &nbsp;<br/>
<a href='/write-string.html'>write-string</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='/documentation.html'>documentation</a><br/>
<a id='write-tree.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:left;background-color:white;'><a href='https://rimstone-lang.com' style='border-bottom:0px'><img src='https://rimstone-lang.com/rimstone.png' style='width:180px;height:auto'/></a></div><div class='vhub' style='margin-top:10px;'>Write tree</div><hr/><span style="font-weight:bold;">Purpose</span>: Insert a key/value pair into a tree.<br/>
<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_1194' class=notranslate>
<span class="Statement">write-tree</span> &lt;tree&gt;<span class="Identifier"> key</span> &lt;key&gt;<span class="Identifier"> value</span> &lt;value&gt; \
    [<span class="Type"> status</span> &lt;status&gt; ] \
    [<span class="Type"> new-cursor</span> &lt;cursor&gt; ]</pre>
<span id=rimstone_copied_1194 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_1194' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_1194, code_1194, rimstone_copied_1194)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
write-tree inserts string &lt;key&gt; and associated string &lt;value&gt; into &lt;tree&gt; created by <a href='/new-tree.html'>new-tree</a>.<br/>
<br/>
If &lt;key&gt; already exists in &lt;tree&gt;, &lt;status&gt; (in "status" clause) will be RIM_ERR_EXIST and nothing is inserted into &lt;tree&gt;, otherwise it is RIM_OKAY.<br/>
<br/>
If "new-cursor" clause is used, then a &lt;cursor&gt; will be positioned on a newly inserted tree node. You can use <a href='/use-cursor.html'>use-cursor</a> to iterate to nodes with lesser and greater key values.<br/>
<div class="vsub"><a id="Examples"></a>Examples</div>
Insert key "k" with value "d" into "mytree", and obtain status in "st":<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_1197' class=notranslate>
<span class="Statement">write-tree</span> mytree<span class="Identifier"> key</span> k<span class="Identifier"> value</span> d<span class="Type"> status</span> st</pre>
<span id=rimstone_copied_1197 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_1197' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_1197, code_1197, rimstone_copied_1197)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
The following is an example of a process-scoped tree. Such a tree keeps its data across the requests, for as long as the process is alive.<br/>
<br/>
In a new directory, create file treesrv.rim and copy to it:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_1199' class=notranslate>
<span class="Statement">%%</span> /treesrv<span class="Identifier"> public</span>
<span class="Statement">    do-once</span>
<span class="Statement">    new-tree</span> t<span class="Identifier"> process-scope</span>
<span class="Statement">    end-do-once</span>

    <span class="Comment">// Get input parameters</span>
<span class="Statement">    get-param</span> op
<span class="Statement">    get-param</span> key<span class="Identifier"> default-value</span> <span class="Constant">&quot;&quot;</span>
<span class="Statement">    get-param</span> data<span class="Identifier"> default-value</span> <span class="Constant">&quot;&quot;</span>

<span class="Statement">    if-true</span> op<span class="Identifier"> equal</span> <span class="Constant">&quot;add&quot;</span> <span class="Comment">// Add data to tree</span>
<span class="Statement">        write-tree</span> t<span class="Identifier"> key</span> (key)<span class="Identifier"> value</span> data<span class="Type"> status</span> st
<span class="Statement">        if-true</span> st<span class="Identifier"> equal</span> RIM_OKAY
<span class="Statement">            @</span>Added [<span class="Statement">&lt;&lt;print-out</span> key<span class="Statement">&gt;&gt;</span>]
<span class="Statement">        else-if</span>
<span class="Statement">            @</span>Key exists
<span class="Statement">        end-if</span>
<span class="Statement">    else-if</span> op<span class="Identifier"> equal</span> <span class="Constant">&quot;delete&quot;</span> <span class="Comment">// Delete data and obtain the value deleted</span>
<span class="Statement">        delete-tree</span> t<span class="Identifier"> key</span> (key)<span class="Type"> value</span> val<span class="Type"> status</span> st
<span class="Statement">        if-true</span> st<span class="Identifier"> equal</span> RIM_ERR_EXIST
<span class="Statement">            @</span>Not found [<span class="Statement">&lt;&lt;print-out</span> key<span class="Statement">&gt;&gt;</span>]
<span class="Statement">        else-if</span>
            <span class="Comment">// If found, then delete key and value</span>
<span class="Statement">            @</span>Deleted [<span class="Statement">&lt;&lt;print-out</span> val<span class="Statement">&gt;&gt;</span>]
<span class="Statement">            delete-string</span> val
<span class="Statement">        end-if</span>
<span class="Statement">    else-if</span> op<span class="Identifier"> equal</span> <span class="Constant">&quot;query&quot;</span> <span class="Comment">// Query tree based on key value</span>
<span class="Statement">        read-tree</span> t<span class="Identifier"> equal</span> (key)<span class="Type"> value</span> val<span class="Type"> status</span> st
<span class="Statement">        if-true</span> st<span class="Identifier"> equal</span> RIM_ERR_EXIST
<span class="Statement">            @</span>Not found, queried [<span class="Statement">&lt;&lt;print-out</span> key<span class="Statement">&gt;&gt;</span>]
<span class="Statement">        else-if</span>
<span class="Statement">            @</span>Value [<span class="Statement">&lt;&lt;print-out</span> val<span class="Statement">&gt;&gt;</span>]
<span class="Statement">        end-if</span>
<span class="Statement">    end-if</span>
<span class="Statement">%%</span></pre>
<span id=rimstone_copied_1199 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_1199' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_1199, code_1199, rimstone_copied_1199)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Create new application ("pt" for "process tree"):<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_1195' class=notranslate>
rim <span class="Special">-k</span> pt</pre>
<span id=rimstone_copied_1195 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_1195' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_1195, code_1195, rimstone_copied_1195)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Build application:<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_1198' class=notranslate>
rim <span class="Special">-q</span></pre>
<span id=rimstone_copied_1198 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_1198' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_1198, code_1198, rimstone_copied_1198)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Run the tree service:<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_1200' class=notranslate>
mrim <span class="Special">-w</span> <span class="Constant">1</span> pt</pre>
<span id=rimstone_copied_1200 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_1200' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_1200, code_1200, rimstone_copied_1200)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Try it out, add key/value pairs, query, delete, query again:<br/>
<div class='ncode' style='position:relative;padding-right:16px;'>
<pre id='code_1193' class=notranslate>
# Add key=1 and data=d1
rim -r --req=&quot;/treesrv/op=add/key=1/data=d1&quot; --service --exec --silent-header

# Add key=2 and data=d2
rim -r --req=&quot;/treesrv/op=add/key=2/data=d2&quot; --service --exec --silent-header

# Query key=1
rim -r --req=&quot;/treesrv/op=query/key=1&quot; --service --exec --silent-header

# Query key=2
rim -r --req=&quot;/treesrv/op=query/key=2&quot; --service --exec --silent-header

# Delete key=2
rim -r --req=&quot;/treesrv/op=delete/key=2&quot; --service --exec --silent-header

# Query key=2
rim -r --req=&quot;/treesrv/op=query/key=2&quot; --service --exec --silent-header</pre>
<span id=rimstone_copied_1193 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_1193' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_1193, code_1193, rimstone_copied_1193)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
The result:<br/>
<div class='ncode' style='position:relative;padding-right:16px;'>
<pre id='code_1196' class=notranslate>
Added [1]
Added [2]
Value [d1]
Value [d2]
Deleted [d2]
Not found, queried [2]</pre>
<span id=rimstone_copied_1196 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_1196' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_1196, code_1196, rimstone_copied_1196)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
See <a href='/read-tree.html'>read-tree</a> for more examples.<br/>
<div class="vsub"><a id="See also"></a>See also</div>
 <a name='Tree'></a><span style="font-weight:bold;">Tree</span><br/>
<a href='/delete-tree.html'>delete-tree</a> &nbsp;<br/>
<a href='/get-tree.html'>get-tree</a> &nbsp;<br/>
<a href='/new-tree.html'>new-tree</a> &nbsp;<br/>
<a href='/purge-tree.html'>purge-tree</a> &nbsp;<br/>
<a href='/read-tree.html'>read-tree</a> &nbsp;<br/>
<a href='/use-cursor.html'>use-cursor</a> &nbsp;<br/>
<a href='/write-tree.html'>write-tree</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='/documentation.html'>documentation</a><br/>
<a id='xml-doc.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:left;background-color:white;'><a href='https://rimstone-lang.com' style='border-bottom:0px'><img src='https://rimstone-lang.com/rimstone.png' style='width:180px;height:auto'/></a></div><div class='vhub' style='margin-top:10px;'>Xml doc</div><hr/><span style="font-weight:bold;">Purpose</span>: Parse XML text.<br/>
<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_1202' class=notranslate>
<span class="Statement">xml-doc</span> &lt;text&gt;<span class="Type"> to</span> &lt;xml&gt; \
    [<span class="Type"> status</span> &lt;status&gt; ] [<span class="Identifier"> length</span> &lt;length&gt; ] \
    [<span class="Type"> error-text</span> &lt;error text&gt; ] \
        [<span class="Type"> error-line</span> &lt;line&gt; ] \
        [<span class="Type"> error-char</span> &lt;<span class="Type">char</span>&gt; ]

<span class="Statement">xml-doc</span><span class="Identifier"> delete</span> &lt;xml&gt;</pre>
<span id=rimstone_copied_1202 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_1202' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_1202, code_1202, rimstone_copied_1202)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
xml-doc will parse XML &lt;text&gt; into &lt;xml&gt; variable, which can be used with <a href='/read-xml.html'>read-xml</a> to get the data.<br/>
<br/>
The length of &lt;text&gt; may be specified with "length" clause in &lt;length&gt; variable, or if not, it will be the string length of &lt;text&gt;.<br/>
<br/>
The "status" clause specifies the return &lt;status&gt; number, which is RIM_OKAY if successful or RIM_ERR_XML if there is an error in parsing, in which case &lt;error text&gt; in "error-text" clause is the error message. You can also obtain the error's line number (with number &lt;line&gt; in clause "error-line") and the character position within that line (with number &lt;char&gt; in clause "error-char").<br/>
<br/>
The maximum depth of nested elements in XML document is 32, and the maximum length of a normalized element name is 500 (see <a href='/read-xml.html'>read-xml</a> for more on normalized names). <br/>
<br/>
An XML element that is comprised of multiple anonymous sub-elements is presented as a concatenated single element; this is likely how most applications expect to see such data. All data is trimmed for whitespace on left and right.<br/>
<br/>
RimStone uses libxml2 library for XML parsing.<br/>
<div class="vsub"><a id="Deleting"></a>Deleting</div>
To delete an XML variable, use "delete" clause with the &lt;xml&gt;. This will delete all memory associated with it, and the variable &lt;xml&gt; itself.<br/>
<div class="vsub"><a id="Examples"></a>Examples</div>
Parse the following XML document and display all element names and values from it. You can use them as they come along, or store them into <a href='/new-hash.html'>new-hash</a> or <a href='/new-tree.html'>new-tree</a> for instance for searching of large documents. This also demonstrates usage of UTF characters:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_1203' class=notranslate>
<span class="Statement">%%</span> /xml<span class="Identifier"> public</span>
<span class="Statement">    set-string</span> xmld<span class="Identifier"> unquoted</span> =&lt;?xml version=<span class="Constant">&quot;1.0&quot;</span> encoding=<span class="Constant">&quot;UTF-8&quot;</span>?&gt;\
&lt;countries&gt;\
    &lt;country id='<span class="Constant">1</span>'&gt;\
        &lt;name&gt;USA&amp;amp;America&lt;/name&gt;\
        &lt;state id='<span class="Constant">1</span>'&gt;Arizona\
            &lt;city id=<span class="Constant">&quot;1&quot;</span>&gt;\
                &lt;name&gt;Phoenix&lt;/name&gt;\
                &lt;population&gt;<span class="Constant">5000000</span>&lt;/population&gt;\
            &lt;/city&gt;\
            &lt;city id=<span class="Constant">&quot;2&quot;</span>&gt;\
                &lt;name&gt;Tuscon&lt;/name&gt;\
                &lt;population&gt;<span class="Constant">1000000</span>&lt;/population&gt;\
            &lt;/city&gt;\
        &lt;/state&gt;\
        &lt;state id='<span class="Constant">2</span>'&gt;California\
            &lt;city id=<span class="Constant">&quot;1&quot;</span>&gt;\
                &lt;name&gt;Los Angeles&lt;/name&gt;\
                &lt;population&gt;<span class="Constant">19000000</span>&lt;/population&gt;\
            &lt;/city&gt;\
            &lt;city id=<span class="Constant">&quot;2&quot;</span>&gt;\
                &lt;name&gt;Irvine&lt;/name&gt;\
            &lt;/city&gt;\
        &lt;/state&gt;\
    &lt;/country&gt;\
    &lt;country id='<span class="Constant">2</span>'&gt;\
        &lt;name&gt;Mexico&lt;/name&gt;\
        &lt;state id='<span class="Constant">1</span>'&gt;Veracruz\
            &lt;city id=<span class="Constant">&quot;1&quot;</span>&gt;\
                &lt;name&gt;Xalapa-Enriquez&lt;/name&gt;\
                &lt;population&gt;<span class="Constant">8000000</span>&lt;/population&gt;\
            &lt;/city&gt;\
            &lt;city id=<span class="Constant">&quot;2&quot;</span>&gt;\
                &lt;name&gt;C\u00F3rdoba&lt;/name&gt;\
                &lt;population&gt;<span class="Constant">220000</span>&lt;/population&gt;\
            &lt;/city&gt;\
        &lt;/state&gt;\
        &lt;state id='<span class="Constant">2</span>'&gt;Sinaloa\
            &lt;city id=<span class="Constant">&quot;1&quot;</span>&gt;\
                &lt;name&gt;Culiac\u00E1n Rosales&lt;/name&gt;\
                &lt;population&gt;<span class="Constant">3000000</span>&lt;/population&gt;\
            &lt;/city&gt;\
        &lt;/state&gt;\
    &lt;/country&gt;\
&lt;/countries&gt;

<span class="Statement">    xml-doc</span> xmld<span class="Type"> to</span> x
<span class="Statement">    start-loop</span>
<span class="Statement">        read-xml</span> x<span class="Type"> key</span> k<span class="Type"> value</span> v<span class="Type"> status</span> s<span class="Identifier"> next</span>
<span class="Statement">        if-true</span> s<span class="Identifier"> equal</span> RIM_ERR_EXIST
<span class="Statement">            break-loop</span>
<span class="Statement">        end-if</span>
<span class="Statement">        text-utf</span> v
<span class="Statement">        @</span>Key [<span class="Statement">&lt;&lt;print-out</span> k<span class="Statement">&gt;&gt;</span>] Value [<span class="Statement">&lt;&lt;print-out</span> v<span class="Statement">&gt;&gt;</span>]
<span class="Statement">    end-loop</span>
<span class="Statement">    xml-doc</span><span class="Identifier"> delete</span> x
<span class="Statement">%%</span></pre>
<span id=rimstone_copied_1203 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_1203' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_1203, code_1203, rimstone_copied_1203)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
The output would be:<br/>
<div class='ncode' style='position:relative;padding-right:16px;'>
<pre id='code_1201' class=notranslate>
Key [countries/country/id/@] Value [1]
Key [countries/country/name/] Value [USA&amp;America]
Key [countries/country/state/id/@] Value [1]
Key [countries/country/state/city/id/@] Value [1]
Key [countries/country/state/city/name/] Value [Phoenix]
Key [countries/country/state/city/population/] Value [5000000]
Key [countries/country/state/city/id/@] Value [2]
Key [countries/country/state/city/name/] Value [Tuscon]
Key [countries/country/state/city/population/] Value [1000000]
Key [countries/country/state/] Value [Arizona]
Key [countries/country/state/id/@] Value [2]
Key [countries/country/state/city/id/@] Value [1]
Key [countries/country/state/city/name/] Value [Los Angeles]
Key [countries/country/state/city/population/] Value [19000000]
Key [countries/country/state/city/id/@] Value [2]
Key [countries/country/state/city/name/] Value [Irvine]
Key [countries/country/state/] Value [California]
Key [countries/country/id/@] Value [2]
Key [countries/country/name/] Value [Mexico]
Key [countries/country/state/id/@] Value [1]
Key [countries/country/state/city/id/@] Value [1]
Key [countries/country/state/city/name/] Value [Xalapa-Enriquez]
Key [countries/country/state/city/population/] Value [8000000]
Key [countries/country/state/city/id/@] Value [2]
Key [countries/country/state/city/name/] Value [Crdoba]
Key [countries/country/state/city/population/] Value [220000]
Key [countries/country/state/] Value [Veracruz]
Key [countries/country/state/id/@] Value [2]
Key [countries/country/state/city/id/@] Value [1]
Key [countries/country/state/city/name/] Value [Culiacn Rosales]
Key [countries/country/state/city/population/] Value [3000000]
Key [countries/country/state/] Value [Sinaloa]</pre>
<span id=rimstone_copied_1201 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_1201' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_1201, code_1201, rimstone_copied_1201)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<div class="vsub"><a id="See also"></a>See also</div>
 <a name='XML parsing'></a><span style="font-weight:bold;">XML parsing</span><br/>
<a href='/read-xml.html'>read-xml</a> &nbsp;<br/>
<a href='/xml-doc.html'>xml-doc</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='/documentation.html'>documentation</a><br/>
<br/><div style='width:100%;clear:both;'>
<hr/>
<!--RIMFOOT77--><span style='font-size:80%'><a href="/copyright.html">Copyright</a> (c) 2019-2025 Gliim LLC. All contents on this web site is "AS IS" without warranties or guarantees of any kind.</span>
</div><br/></body></html>


