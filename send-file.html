<!DOCTYPE html>
<html lang="en">

<head>
<!--__RIM_REDIRECT__-->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Quicksand:wght@300..700&display=swap" rel="stylesheet">

<title>Send file</title>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
<meta name="HandheldFriendly" content="True"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<link rel="canonical" href="https://rimstone-lang.com/send-file.html" />
<style>


body, html {
    font-family: Quicksand,monospace,Helvetica, Arial, sans-serif;
    line-height: 150%;
    font-size:16px;
}

body {
    padding-left:1vw;
    padding-right:1vw;
}
    
.ncode {
    letter-spacing: 0px;
    font-family: monospace;
    font-size:83%;
    display:inline-block;
    max-width:99%;
    min-width:90%;
    margin:0;
    padding:0;
    padding-left:5px;
    padding-top:3px;
    padding-bottom:3px;
    margin-bottom:8px;
    margin-top:8px;
    border: 2px solid #d6d6d6;
    background-color:#f5f7f4;
    white-space:nowrap;
}

.shcode {
    letter-spacing: 0px;
    font-family: monospace;
    font-size:83%;
    display:inline-block;
    max-width:99%;
    min-width:90%;
    margin:0;
    padding:0;
    padding-left:5px;
    padding-top:3px;
    padding-bottom:3px;
    margin-bottom:8px;
    margin-top:8px;
    border: 2px solid #d6d6d6;
    background-color:#f5f7f4;
    white-space:nowrap;
}

.sqlcode {
    letter-spacing: 0px;
    font-family: monospace;
    font-size:83%;
    display:inline-block;
    max-width:99%;
    min-width:90%;
    margin:0;
    padding:0;
    padding-left:5px;
    padding-top:3px;
    padding-bottom:3px;
    margin-bottom:8px;
    margin-top:8px;
    border: 2px solid #d6d6d6;
    background-color:#f5f7f4;
    white-space:nowrap;
}

.htmlcode {
    letter-spacing: 0px;
    font-family: monospace;
    font-size:83%;
    display:inline-block;
    max-width:99%;
    min-width:90%;
    margin:0;
    padding:0;
    padding-left:5px;
    padding-top:3px;
    padding-bottom:3px;
    margin-bottom:8px;
    margin-top:8px;
    border: 2px solid #d6d6d6;
    background-color:#f5f7f4;
    white-space:nowrap;
}

.code {
    letter-spacing: 0px;
    font-family: monospace;
    font-size:83%;
    display:inline-block;
    max-width:99%;
    min-width:90%;
    margin:0;
    padding:0;
    padding-left:5px;
    padding-top:3px;
    padding-bottom:3px;
    margin-bottom:8px;
    margin-top:8px;
    border: 2px solid #d6d6d6;
    background-color:#f5f7f4;
    white-space:nowrap;
}

/*Just like h1 but for pdf conversion it would be indented this way it's not*/
.vhub {
    display: block;
   font-size: 1.6em;
   margin-top: 0.63em;
   margin-bottom: 0.63em;
   margin-left: 0;
   margin-right: 0;
   font-weight: bold;
}

/*Just like h2 but for pdf conversion it would be indented this way it's not*/
.vsub {
    display: block;
   font-size: 1.25em;
   margin-top: 0.53em;
   margin-bottom: 0.53em;
   margin-left: 0;
   margin-right: 0;
   font-weight: bold;
}

ul {
  margin-left: 0.75vw;
  padding-left: 0;
}
li {
  margin-left: 0.75vw;
  padding-left: 0;
}

/* this must be last, as it overrides previous settings, for mobile */
@media (hover: none) {
a {
   display: inline-block;
   padding-top: 3px;
   padding-bottom: 2px;
}
body {
    padding-left:2vw;
    padding-right:2vw;
    letter-spacing: 1px;
}
}

/*The following is for code snippets that are highlighted by 2html vim*/
pre { overflow-x: scroll; margin:0; padding:0; font-family:monospace; }
.Identifier { color: #008b8b; }
.Statement { color: #af5f00; }
.PreProc { color: #5fd7ff; }
.Type { color: #005f00; }
.Comment { color: blue ; }
.Constant { color: #ff00ff; }
/*end of highlighted snippets*/

a {
    text-decoration:none;
    padding-bottom: 0px; 
    color:inherit;
    border-bottom: 2px solid #6cb8f0;
}
a:hover {
    text-decoration: none;
    color:black;
    border-bottom: 1px solid red;
}
/*do not underline links nor should they be active*/
pre a {
    text-decoration:none;
    color:black;
    border-bottom: none;
    pointer-events: none;
    cursor: default;
}


.golfSnippet {display:none;}

ul {
  list-style-type:square;
  list-style-position: outside;
}

</style>


</head>
<body>
<div id="google_translate_element" style='float:right'></div>
<script type="text/javascript" src="//translate.google.com/translate_a/element.js?cb=googleTranslateElementInit"></script>
<script>
function rim_copy(gt, eid, gc) {
  gt.textContent = eid.textContent;
  gt.select();
  document.execCommand("copy");
  gc.style.visibility="visible"
  setTimeout(()=>{ gc.style.visibility="hidden"; }, 1000);
}
function googleTranslateElementInit() {
   new google.translate.TranslateElement({pageLanguage: 'en'}, 'google_translate_element');
}

</script>

<!--RIMMENU13-->

<!--RIMENDMENU13-->



<!--BEGVDOC90-->
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:left;background-color:white;'><a href='https://rimstone-lang.com' style='border-bottom:0px'><img src='https://rimstone-lang.com/rimstone.png' style='width:180px;height:auto'/></a></div><div class='vhub' style='margin-top:10px;'>Send file</div><hr/><span style="font-weight:bold;">Purpose</span>: Send file to client.<br/>
<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_989' class=notranslate>
<span class="Statement">send-file</span> &lt;file&gt; [<span class="Identifier"> headers</span> \
    [<span class="Identifier"> content-type</span> &lt;content type&gt; ] \
    [<span class="Identifier"> download</span> [ &lt;download&gt; ] ] \
    [<span class="Identifier"> etag</span> [ &lt;etag&gt; ] ] \
    [<span class="Identifier"> file-name</span> &lt;file name&gt; ] \
    [ (<span class="Identifier"> cache-control</span> &lt;cache control&gt; ) |<span class="Identifier"> no-cache</span> ] \
    [<span class="Identifier"> status-id</span> &lt;status id&gt; ] \
    [<span class="Identifier"> status-text</span> &lt;status text&gt; ] \
    [<span class="Identifier"> custom</span> &lt;header name&gt;=&lt;header value&gt; [ , ... ] ]
    <span class="Error">]</span></pre>
<span id=rimstone_copied_989 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_989' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_989, code_989, rimstone_copied_989)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
When a client requests download of a file, you can use send-file to provide &lt;file&gt;, which is its location on the server, and is either a full path or relative to the application home directory (see <a href='https://rimstone-lang.com/directories.html'>directories</a>). Note however that you can never use dot-dot (i.e. "..") in &lt;file&gt; - this is a security measure to avoid path-traversal attacks. Thus the file name should never have ".." in it, and if it does, the program will <a href='https://rimstone-lang.com/error-handling.html'>error out</a>.<br/>
<div class="vsub"><a id="Headers"></a>Headers</div>
The following are subclauses that allow setting any custom header:<br/>
<ul><li>&lt;content type&gt; is content type (such as "text/html" or "image/jpg" etc.) If you are sending a file to a client for download and you don't know its content type, you can use "application/octet-stream" for a generic binary file.<br/>
</li><li>If "download" is used without boolean variable &lt;download&gt;, or if &lt;download&gt; evaluates to true, then the file is sent to a client for downloading - otherwise the default is to display file in client.<br/>
</li><li>&lt;file name&gt; is the name of the file being sent to a client. This is not the local file name - it is the file name that client will use for its own purposes.<br/>
</li><li>&lt;cache control&gt; is the cache control HTTP header. "no-cache" instructs the client not to cache. Only one of "cache-control" and "no-cache" can be used. An example of &lt;cache control&gt;:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_990' class=notranslate>
<span class="Statement">send-file</span> <span class="Constant">&quot;somepic.jpg&quot;</span><span class="Identifier"> headers cache-control</span> <span class="Constant">&quot;max-age: 3600&quot;</span></pre>
<span id=rimstone_copied_990 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_990' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_990, code_990, rimstone_copied_990)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
</li><li>If "etag" is used without boolean variable &lt;etag&gt;, or if &lt;etag&gt; evaluates to true, then "ETAG" header will be generated (a timestamp) and included, otherwise it is not. The time stamp is of last modification date of the file (and typically used to cache a file on client if it hasn't changed on the server). "etag" is useful to let the client know to download the file only once if it hasn't changed, thus saving network and computing resources. ETAG header is used only for <a href='https://rimstone-lang.com/send-file.html'>send-file</a>.<br/>
</li><li>&lt;status id&gt; and &lt;status text&gt; are status settings for the response, as strings (such as "425" for "status-id" and "Too early" for "status-text"). <br/>
</li><li>To set any type of generic HTTP header, use "custom" subclause, where &lt;header name&gt; and &lt;header value&gt; represent the name and value of a single header. Multiple headers are separated by a comma. There is no limit on the maximum number of such headers, other than of the underyling HTTP protocol. You must not use "custom" to set headers already set elsewhere (such as "etag" for instance), as that may cause unpredictable behavior. For instance this sets two custom headers:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_991' class=notranslate>
<span class="Statement">out-header</span><span class="Identifier"> use custom</span> <span class="Constant">&quot;CustomOption3&quot;</span>=<span class="Constant">&quot;CustomValue3&quot;</span>, <span class="Constant">&quot;Status&quot;</span>=<span class="Constant">&quot;418 I'm a teapot&quot;</span></pre>
<span id=rimstone_copied_991 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_991' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_991, code_991, rimstone_copied_991)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
"custom" subclause lets you use any custom headers that exist today or may be added in the future, as well as any headers of your own design.</li></ul>
<div class="vsub"><a id="Cookies"></a>Cookies</div>
Any cookies set prior to send-file (see <a href='https://rimstone-lang.com/set-cookie.html'>set-cookie</a> and <a href='https://rimstone-lang.com/delete-cookie.html'>delete-cookie</a>) will be sent along with the file to the web client.<br/>
<div class="vsub"><a id="Examples"></a>Examples</div>
To send a document back to the browser and show it (i.e. display):<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_992' class=notranslate>
<span class="Statement">send-file</span> <span class="Constant">&quot;/home/user/files/myfile.jpg&quot;</span><span class="Identifier"> headers content-type</span> <span class="Constant">&quot;image/jpg&quot;</span></pre>
<span id=rimstone_copied_992 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_992' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_992, code_992, rimstone_copied_992)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
An example to display a PDF document:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_993' class=notranslate>
<span class="Statement">set-string</span> pdf_doc=<span class="Constant">&quot;/home/mydir/myfile.pdf&quot;</span>
<span class="Statement">send-file</span> pdf_doc<span class="Identifier"> headers content-type</span> <span class="Constant">&quot;application/pdf&quot;</span></pre>
<span id=rimstone_copied_993 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_993' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_993, code_993, rimstone_copied_993)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
If you want to send a file for download (with the dialog), use "download" clause. This way the document is not displayed but the "Save As" (or similar) window shows up, for example to download a "PDF" document:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_994' class=notranslate>
<span class="Statement">send-file</span> <span class="Constant">&quot;/home/user/file.pdf&quot;</span><span class="Identifier"> headers download content-type</span> <span class="Constant">&quot;application/pdf&quot;</span></pre>
<span id=rimstone_copied_994 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_994' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_994, code_994, rimstone_copied_994)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<div class="vsub"><a id="See also"></a>See also</div>
 <a name='Web'></a><span style="font-weight:bold;">Web</span><br/>
<a href='https://rimstone-lang.com/call-web.html'>call-web</a> &nbsp;<br/>
<a href='https://rimstone-lang.com/out-header.html'>out-header</a> &nbsp;<br/>
<a href='https://rimstone-lang.com/send-file.html'>send-file</a> &nbsp;<br/>
<a href='https://rimstone-lang.com/silent-header.html'>silent-header</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='https://rimstone-lang.com/documentation.html'>documentation</a><br/>
<!--ENDVDOC90-->
<br/><div style='width:100%;clear:both;'>
<hr/>
<!--GOLFFOOT77--><span style='font-size:80%'><a href="https://rimstone-lang.com/copyright.html">Copyright</a> (c) 2019-2025 Gliim LLC. All contents on this web site is "AS IS" without warranties or guarantees of any kind.</span>
</div><br/></body></html>


