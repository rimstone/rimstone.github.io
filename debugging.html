<!DOCTYPE html>
<html lang="en">

<head>
<!--__RIM_REDIRECT__-->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Quicksand:wght@300..700&display=swap" rel="stylesheet">

<title>Debugging</title>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
<meta name="HandheldFriendly" content="True"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<link rel="canonical" href="https://rimstone-lang.com/debugging.html" />
<style>


body, html {
    font-family: Quicksand,monospace,Helvetica, Arial, sans-serif;
    line-height: 150%;
    font-size:16px;
}

body {
    padding-left:1vw;
    padding-right:1vw;
}
    
.ncode {
    letter-spacing: 0px;
    font-family: monospace;
    font-size:83%;
    display:inline-block;
    max-width:99%;
    min-width:90%;
    margin:0;
    padding:0;
    padding-left:5px;
    padding-top:3px;
    padding-bottom:3px;
    margin-bottom:8px;
    margin-top:8px;
    border: 2px solid #d6d6d6;
    background-color:#f5f7f4;
    white-space:nowrap;
}

.shcode {
    letter-spacing: 0px;
    font-family: monospace;
    font-size:83%;
    display:inline-block;
    max-width:99%;
    min-width:90%;
    margin:0;
    padding:0;
    padding-left:5px;
    padding-top:3px;
    padding-bottom:3px;
    margin-bottom:8px;
    margin-top:8px;
    border: 2px solid #d6d6d6;
    background-color:#f5f7f4;
    white-space:nowrap;
}

.sqlcode {
    letter-spacing: 0px;
    font-family: monospace;
    font-size:83%;
    display:inline-block;
    max-width:99%;
    min-width:90%;
    margin:0;
    padding:0;
    padding-left:5px;
    padding-top:3px;
    padding-bottom:3px;
    margin-bottom:8px;
    margin-top:8px;
    border: 2px solid #d6d6d6;
    background-color:#f5f7f4;
    white-space:nowrap;
}

.htmlcode {
    letter-spacing: 0px;
    font-family: monospace;
    font-size:83%;
    display:inline-block;
    max-width:99%;
    min-width:90%;
    margin:0;
    padding:0;
    padding-left:5px;
    padding-top:3px;
    padding-bottom:3px;
    margin-bottom:8px;
    margin-top:8px;
    border: 2px solid #d6d6d6;
    background-color:#f5f7f4;
    white-space:nowrap;
}

.code {
    letter-spacing: 0px;
    font-family: monospace;
    font-size:83%;
    display:inline-block;
    max-width:99%;
    min-width:90%;
    margin:0;
    padding:0;
    padding-left:5px;
    padding-top:3px;
    padding-bottom:3px;
    margin-bottom:8px;
    margin-top:8px;
    border: 2px solid #d6d6d6;
    background-color:#f5f7f4;
    white-space:nowrap;
}

/*Just like h1 but for pdf conversion it would be indented this way it's not*/
.vhub {
    display: block;
   font-size: 1.6em;
   margin-top: 0.63em;
   margin-bottom: 0.63em;
   margin-left: 0;
   margin-right: 0;
   font-weight: bold;
}

/*Just like h2 but for pdf conversion it would be indented this way it's not*/
.vsub {
    display: block;
   font-size: 1.25em;
   margin-top: 0.53em;
   margin-bottom: 0.53em;
   margin-left: 0;
   margin-right: 0;
   font-weight: bold;
}

ul {
  margin-left: 0.75vw;
  padding-left: 0;
}
li {
  margin-left: 0.75vw;
  padding-left: 0;
}

/* this must be last, as it overrides previous settings, for mobile */
@media (hover: none) {
a {
   display: inline-block;
   padding-top: 3px;
   padding-bottom: 2px;
}
body {
    padding-left:2vw;
    padding-right:2vw;
    letter-spacing: 1px;
}
}

/*The following is for code snippets that are highlighted by 2html vim*/
pre { overflow-x: scroll; margin:0; padding:0; font-family:monospace; }
.Identifier { color: #008b8b; }
.Statement { color: #af5f00; }
.PreProc { color: #5fd7ff; }
.Type { color: #005f00; }
.Comment { color: blue ; }
.Constant { color: #ff00ff; }
/*end of highlighted snippets*/

a {
    text-decoration:none;
    padding-bottom: 0px; 
    color:inherit;
    border-bottom: 2px solid #6cb8f0;
}
a:hover {
    text-decoration: none;
    color:black;
    border-bottom: 1px solid red;
}
/*do not underline links nor should they be active*/
pre a {
    text-decoration:none;
    color:black;
    border-bottom: none;
    pointer-events: none;
    cursor: default;
}


.golfSnippet {display:none;}

ul {
  list-style-type:square;
  list-style-position: outside;
}

</style>


</head>
<body>
<div id="google_translate_element" style='float:right'></div>
<script type="text/javascript" src="//translate.google.com/translate_a/element.js?cb=googleTranslateElementInit"></script>
<script>
function rim_copy(gt, eid, gc) {
  gt.textContent = eid.textContent;
  gt.select();
  document.execCommand("copy");
  gc.style.visibility="visible"
  setTimeout(()=>{ gc.style.visibility="hidden"; }, 1000);
}
function googleTranslateElementInit() {
   new google.translate.TranslateElement({pageLanguage: 'en'}, 'google_translate_element');
}

</script>

<!--RIMMENU13-->

<!--RIMENDMENU13-->



<!--BEGVDOC90-->
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:left;background-color:white;'><a href='https://rimstone-lang.com' style='border-bottom:0px'><img src='https://rimstone-lang.com/rimstone.png' style='width:180px;height:auto'/></a></div><div class='vhub' style='margin-top:10px;'>Debugging</div><hr/><div class="vsub"><a id="Stack traces"></a>Stack traces</div>
If there is an error in a RimStone program (such as trying to access invalid memory, negative status that hasn't been checked etc.), or if there's an internal issue (such as a bug in RimStone), a stack trace is created in trace directory (see <a href='https://rimstone-lang.com/directories.html'>directories</a>). A single stack trace file is created for each such incident, containing the description of the issue and the file names, function names and line numbers in your source code that led to it. The file names are based on the process-ID of the affected process. There is a limit on how many stack frames RimStone will show this way (from the bottom up) - currently it's 150.<br/>
<div class="vsub"><a id="View stack traces"></a>View stack traces</div>
To see errors reported by RimStone (such as trying to access invalid memory, or crashes; but not those from <a href='https://rimstone-lang.com/report-error.html'>report-error</a>), use -e option of <a href='https://rimstone-lang.com/rim.html'>rim</a> to check the stack trace files, which contain the stack along with file names, function names and line numbers. For example, to see the last 3 errors reported:<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_561' class=notranslate>
rim <span class="Special">-e</span> <span class="Constant">3</span></pre>
<span id=rimstone_copied_561 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_561' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_561, code_561, rimstone_copied_561)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Note that function names are decorated; meaning if a request name has a hyphen ("-"), then it is substituted with an underscore ("_") in a function name; if it has a forward slash ("/"), then it is substituted with a double underscore ("__"). For instance, request "request/sub-request" will be internally represented as function "request__sub_request" and will show up like that in a stack trace.<br/>
<div class="vsub"><a id="Output from RimStone service without a web server"></a>Output from RimStone service without a web server</div>
Use <a href='https://rimstone-lang.com/rim.html'>rim</a> (see -r option) to send a request from command line, and receive reply from your <a href='https://rimstone-lang.com/service.html'>service</a>s. This is useful in debugging issues and automating tests. For instance, the following will issue a request and receive a reply from your service:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_560' class=notranslate>
rim -r --req=<span class="Constant">&quot;/my-service&quot;</span> --service --exec</pre>
<span id=rimstone_copied_560 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_560' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_560, code_560, rimstone_copied_560)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<div class="vsub"><a id="Issues in starting mrim"></a>Issues in starting mrim</div>
<a href='https://rimstone-lang.com/mrim.html'>mrim</a> starts your <a href='https://rimstone-lang.com/service.html'>service</a> process(es). If you're having issues with mrim, check out its log. Assuming your application name is "app-name", the log file is:<br/>
<div class='ncode' style='position:relative;padding-right:16px;'>
<pre id='code_559' class=notranslate>
$HOME/.rimstone/apps/app-name/.mrimlog</pre>
<span id=rimstone_copied_559 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_559' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_559, code_559, rimstone_copied_559)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<div class="vsub"><a id="Web server error log"></a>Web server error log</div>
If you are using a web server as a reverse proxy, check its error log, which would store the error messages emitted. Typically, such files are in the following location:<br/>
<div class='ncode' style='position:relative;padding-right:16px;'>
<pre id='code_562' class=notranslate>
/var/log/&lt;web server&gt;</pre>
<span id=rimstone_copied_562 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_562' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_562, code_562, rimstone_copied_562)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
(for example /var/log/apache2), but the location may vary - consult your web server's documentation.<br/>
<div class="vsub"><a id="Using gdb debugger"></a>Using gdb debugger</div>
In order to use gdb debugger, you don't need to do anything special. RimStone itself as well as applications created with RimStone already come with debugging information.<br/>
<br/>
Ultimately, you can attach a debugger to a running RimStone process. If your application name is "app-name", first find the PID (process ID) of its process(es):<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_563' class=notranslate>
ps <span class="Special">-ef</span>|<span class="Statement">grep</span> app-name.srvc</pre>
<span id=rimstone_copied_563 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_563' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_563, code_563, rimstone_copied_563)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Note that you can control the number of worker processes started, and thus have only a single worker process (or the minimum necessary), which will make attaching to the process that actually processes a request easier (see <a href='https://rimstone-lang.com/rim.html'>rim</a>).<br/>
<br/>
Use gdb to load your program:<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_565' class=notranslate>
sudo gdb <span class="PreProc">$HOME</span>/.rimstone/apps/app-name/.bld/app-name.srvc</pre>
<span id=rimstone_copied_565 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_565' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_565, code_565, rimstone_copied_565)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
and then attach to the process (&lt;PID&gt; is the process ID you obtained above):<br/>
<div class='ncode' style='position:relative;padding-right:16px;'>
<pre id='code_564' class=notranslate>
att &lt;PID&gt;</pre>
<span id=rimstone_copied_564 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_564' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_564, code_564, rimstone_copied_564)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Once attached, you can break in the request you're debugging:<br/>
<div class='ncode' style='position:relative;padding-right:16px;'>
<pre id='code_566' class=notranslate>
br &lt;request name&gt;</pre>
<span id=rimstone_copied_566 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_566' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_566, code_566, rimstone_copied_566)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
or in general RimStone request dispatcher:<br/>
<div class='ncode' style='position:relative;padding-right:16px;'>
<pre id='code_567' class=notranslate>
br rim_dispatch_request</pre>
<span id=rimstone_copied_567 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_567' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_567, code_567, rimstone_copied_567)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
which would handle any request to your application. Request names are decorated to become function names (see above).<br/>
<br/>
Note that by default, gdb will show RimStone code and you can step through it as you've written it, which is easy to follow and understand. <br/>
<br/>
However, if you wish to step through the underlying C libraries, use "--c-lines" option in <a href='https://rimstone-lang.com/rim.html'>rim</a> when making your application. <br/>
<div class="vsub"><a id="See also"></a>See also</div>
 <a name='Debugging'></a><span style="font-weight:bold;">Debugging</span><br/>
<a href='https://rimstone-lang.com/debugging.html'>debugging</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='https://rimstone-lang.com/documentation.html'>documentation</a><br/>
<!--ENDVDOC90-->
<br/><div style='width:100%;clear:both;'>
<hr/>
<!--GOLFFOOT77--><span style='font-size:80%'><a href="https://rimstone-lang.com/copyright.html">Copyright</a> (c) 2019-2025 Gliim LLC. All contents on this web site is "AS IS" without warranties or guarantees of any kind.</span>
</div><br/></body></html>


