<!DOCTYPE html>
<html lang="en">

<head>
<title>Single page documentation - Golf</title>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
<meta name="HandheldFriendly" content="True"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<link rel="canonical" href="__GOLF_URL__" />
<style>


body, html {
    color:black;
    text-rendering: optimizelegibility;
    background-color: white;
    min-height: 150%;
    font-family: "Times New Roman";
    font-weight:400;
    font-size:18px;
    line-height:27px;
    letter-spacing: 2px;
    z-index: 1;
    height: 100%;
    text-align:left;
    width:80%;
    margin-left:auto;
    margin-right:auto;
    padding:0;
    /*font-family: Helvetica, Arial, sans-serif;*/
}

body {
    padding-left:1vw;
    padding-right:1vw;
}
    
.ncode {
    letter-spacing: 0px;
    font-size:14px;
    font-family: monospace;
    display:inline-block;
    max-width:100%;
    min-width:90%;
    margin:0;
    padding:0;
    padding-left:5px;
    padding-top:3px;
    padding-bottom:3px;
    margin-bottom:15px;
    border: 2px solid #d6d6d6;
    background-color:#f5f7f4;
    white-space:nowrap;
}

.shcode {
    letter-spacing: 0px;
    font-size:14px;
    font-family: monospace;
    display:inline-block;
    max-width:100%;
    min-width:90%;
    margin:0;
    padding:0;
    padding-left:5px;
    padding-top:3px;
    padding-bottom:3px;
    margin-bottom:15px;
    border: 2px solid #d6d6d6;
    background-color:#f5f7f4;
    white-space:nowrap;
}

.sqlcode {
    letter-spacing: 0px;
    font-size:14px;
    font-family: monospace;
    display:inline-block;
    max-width:100%;
    min-width:90%;
    margin:0;
    padding:0;
    padding-left:5px;
    padding-top:3px;
    padding-bottom:3px;
    margin-bottom:15px;
    border: 2px solid #d6d6d6;
    background-color:#f5f7f4;
    white-space:nowrap;
}

.htmlcode {
    letter-spacing: 0px;
    font-size:14px;
    font-family: monospace;
    display:inline-block;
    max-width:100%;
    min-width:90%;
    margin:0;
    padding:0;
    padding-left:5px;
    padding-top:3px;
    padding-bottom:3px;
    margin-bottom:15px;
    border: 2px solid #d6d6d6;
    background-color:#f5f7f4;
    white-space:nowrap;
}

.code {
    letter-spacing: 0px;
    font-size:14px;
    font-family: monospace;
    display:inline-block;
    max-width:100%;
    min-width:90%;
    margin:0;
    padding:0;
    padding-left:5px;
    padding-top:3px;
    padding-bottom:3px;
    margin-bottom:15px;
    border: 2px solid #d6d6d6;
    background-color:#f5f7f4;
    white-space:nowrap;
}

/*Just like h1 but for pdf conversion it would be indented this way it's not*/
.vhub {
    display: block;
   font-size: 1.6em;
   margin-top: 0.63em;
   margin-bottom: 0.63em;
   margin-left: 0;
   margin-right: 0;
   font-weight: bold;
}

/*Just like h2 but for pdf conversion it would be indented this way it's not*/
.vsub {
    display: block;
   font-size: 1.25em;
   margin-top: 0.53em;
   margin-bottom: 0.53em;
   margin-left: 0;
   margin-right: 0;
   font-weight: bold;
}

ul {
  margin-left: 0.75vw;
  padding-left: 0;
}
li {
  margin-left: 0.75vw;
  padding-left: 0;
}

/* this must be last, as it overrides previous settings, for mobile */
@media (hover: none) {
a {
   display: inline-block;
   padding-top: 3px;
   padding-bottom: 2px;
}
body {
    padding-left:2vw;
    padding-right:2vw;
    font-size:14px;
    line-height:22px;
    letter-spacing: 1px;
}
}

/*The following is for code snippets that are highlighted by 2html vim*/
pre { overflow-x: scroll; margin:0; padding:0; font-family:monospace; }
.Identifier { color: #008b8b; }
.Statement { color: #af5f00; }
.PreProc { color: #5fd7ff; }
.Type { color: #005f00; }
.Comment { color: blue ; }
.Constant { color: #ff00ff; }
/*end of highlighted snippets*/

a {
    text-decoration:none;
    padding-bottom: 0px; 
    color:inherit;
    border-bottom: 2px solid #6cb8f0;
}
a:hover {
    text-decoration: none;
    color:black;
    border-bottom: 1px solid red;
}
/*do not underline links nor should they be active*/
pre a {
    text-decoration:none;
    color:black;
    border-bottom: none;
    pointer-events: none;
    cursor: default;
}


.golfSnippet {display:none;}

ul {
  list-style-type:square;
  list-style-position: outside;
}

</style>


</head>
<body>

<script>
function gg_copy(gt, eid, gc) {
  gt.textContent = eid.textContent;
  gt.select();
  document.execCommand("copy");
  gc.style.visibility="visible"
  setTimeout(()=>{ gc.style.visibility="hidden"; }, 1000);
}

</script>

<!--GOLFMENU13-->

<!--GOLFENDMENU13-->



<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:right;background-color:white;'><a href='https://golf-lang.com' style='border-bottom:0px'><img src='https://golf-lang.com/golf.png'/></a></div>
<div class='vhub'>Golf Single-Page Documentation for version 191</div><hr/>
This page contains all of Golf documentation topics combined into one. It may be easier to search. <!--GOLFBEGDOC39--><br/><br/>
<a href='#123-hello-world.html'>123-hello-world</a><br/>
<a href='#about-golf.html'>about-golf</a><br/>
<a href='#after-handler.html'>after-handler</a><br/>
<a href='#application-setup.html'>application-setup</a><br/>
<a href='#before-handler.html'>before-handler</a><br/>
<a href='#begin-handler.html'>begin-handler</a><br/>
<a href='#begin-transaction.html'>begin-transaction</a><br/>
<a href='#break-loop.html'>break-loop</a><br/>
<a href='#call-extended.html'>call-extended</a><br/>
<a href='#call-handler.html'>call-handler</a><br/>
<a href='#call-remote.html'>call-remote</a><br/>
<a href='#call-web.html'>call-web</a><br/>
<a href='#CGI.html'>CGI</a><br/>
<a href='#Client-API.html'>Client-API</a><br/>
<a href='#close-file.html'>close-file</a><br/>
<a href='#code-blocks.html'>code-blocks</a><br/>
<a href='#command-line.html'>command-line</a><br/>
<a href='#commit-transaction.html'>commit-transaction</a><br/>
<a href='#connect-apache-tcp-socket.html'>connect-apache-tcp-socket</a><br/>
<a href='#connect-apache-unix-socket.html'>connect-apache-unix-socket</a><br/>
<a href='#connect-haproxy-tcp-socket.html'>connect-haproxy-tcp-socket</a><br/>
<a href='#connect-nginx-tcp-socket.html'>connect-nginx-tcp-socket</a><br/>
<a href='#connect-nginx-unix-socket.html'>connect-nginx-unix-socket</a><br/>
<a href='#continue-loop.html'>continue-loop</a><br/>
<a href='#copy-file.html'>copy-file</a><br/>
<a href='#copy-string.html'>copy-string</a><br/>
<a href='#count-substring.html'>count-substring</a><br/>
<a href='#current-row.html'>current-row</a><br/>
<a href='#database-config-file.html'>database-config-file</a><br/>
<a href='#db-error.html'>db-error</a><br/>
<a href='#debugging.html'>debugging</a><br/>
<a href='#decode-base64.html'>decode-base64</a><br/>
<a href='#decode-hex.html'>decode-hex</a><br/>
<a href='#decode-url.html'>decode-url</a><br/>
<a href='#decode-web.html'>decode-web</a><br/>
<a href='#decrypt-data.html'>decrypt-data</a><br/>
<a href='#delete-cookie.html'>delete-cookie</a><br/>
<a href='#delete-fifo.html'>delete-fifo</a><br/>
<a href='#delete-file.html'>delete-file</a><br/>
<a href='#delete-lifo.html'>delete-lifo</a><br/>
<a href='#delete-list.html'>delete-list</a><br/>
<a href='#delete-string.html'>delete-string</a><br/>
<a href='#delete-tree.html'>delete-tree</a><br/>
<a href='#derive-key.html'>derive-key</a><br/>
<a href='#directories.html'>directories</a><br/>
<a href='#documentation.html'>documentation</a><br/>
<a href='#do-once.html'>do-once</a><br/>
<a href='#encode-base64.html'>encode-base64</a><br/>
<a href='#encode-hex.html'>encode-hex</a><br/>
<a href='#encode-url.html'>encode-url</a><br/>
<a href='#encode-web.html'>encode-web</a><br/>
<a href='#encrypt-data.html'>encrypt-data</a><br/>
<a href='#error-code.html'>error-code</a><br/>
<a href='#error-handling.html'>error-handling</a><br/>
<a href='#exec-program.html'>exec-program</a><br/>
<a href='#exit-handler.html'>exit-handler</a><br/>
<a href='#extended-mode.html'>extended-mode</a><br/>
<a href='#file-position.html'>file-position</a><br/>
<a href='#file-storage.html'>file-storage</a><br/>
<a href='#file-uploading.html'>file-uploading</a><br/>
<a href='#finish-output.html'>finish-output</a><br/>
<a href='#flush-output.html'>flush-output</a><br/>
<a href='#get-app.html'>get-app</a><br/>
<a href='#get-cookie.html'>get-cookie</a><br/>
<a href='#get-hash.html'>get-hash</a><br/>
<a href='#get-list.html'>get-list</a><br/>
<a href='#get-message.html'>get-message</a><br/>
<a href='#get-param.html'>get-param</a><br/>
<a href='#get-req.html'>get-req</a><br/>
<a href='#get-sys.html'>get-sys</a><br/>
<a href='#get-time.html'>get-time</a><br/>
<a href='#get-tree.html'>get-tree</a><br/>
<a href='#gg.html'>gg</a><br/>
<a href='#handler-status.html'>handler-status</a><br/>
<a href='#hash-string.html'>hash-string</a><br/>
<a href='#hmac-string.html'>hmac-string</a><br/>
<a href='#if-defined.html'>if-defined</a><br/>
<a href='#if-true.html'>if-true</a><br/>
<a href='#inline-code.html'>inline-code</a><br/>
<a href='#install-arch.html'>install-arch</a><br/>
<a href='#install-debian.html'>install-debian</a><br/>
<a href='#install-fedora.html'>install-fedora</a><br/>
<a href='#install.html'>install</a><br/>
<a href='#install-opensuse.html'>install-opensuse</a><br/>
<a href='#json-doc.html'>json-doc</a><br/>
<a href='#license.html'>license</a><br/>
<a href='#lock-file.html'>lock-file</a><br/>
<a href='#lower-string.html'>lower-string</a><br/>
<a href='#mariadb-database.html'>mariadb-database</a><br/>
<a href='#match-regex.html'>match-regex</a><br/>
<a href='#memory-handling.html'>memory-handling</a><br/>
<a href='#mgrg.html'>mgrg</a><br/>
<a href='#new-array.html'>new-array</a><br/>
<a href='#new-fifo.html'>new-fifo</a><br/>
<a href='#new-hash.html'>new-hash</a><br/>
<a href='#new-lifo.html'>new-lifo</a><br/>
<a href='#new-list.html'>new-list</a><br/>
<a href='#new-message.html'>new-message</a><br/>
<a href='#new-remote.html'>new-remote</a><br/>
<a href='#new-tree.html'>new-tree</a><br/>
<a href='#number-expressions.html'>number-expressions</a><br/>
<a href='#number-string.html'>number-string</a><br/>
<a href='#open-file.html'>open-file</a><br/>
<a href='#out-header.html'>out-header</a><br/>
<a href='#output-statement.html'>output-statement</a><br/>
<a href='#pause-program.html'>pause-program</a><br/>
<a href='#pf-out.html'>pf-out</a><br/>
<a href='#pf-url.html'>pf-url</a><br/>
<a href='#pf-web.html'>pf-web</a><br/>
<a href='#p-num.html'>p-num</a><br/>
<a href='#position-list.html'>position-list</a><br/>
<a href='#postgresql-database.html'>postgresql-database</a><br/>
<a href='#p-out.html'>p-out</a><br/>
<a href='#p-path.html'>p-path</a><br/>
<a href='#p-source-file.html'>p-source-file</a><br/>
<a href='#p-source-line.html'>p-source-line</a><br/>
<a href='#purge-array.html'>purge-array</a><br/>
<a href='#purge-fifo.html'>purge-fifo</a><br/>
<a href='#purge-hash.html'>purge-hash</a><br/>
<a href='#purge-lifo.html'>purge-lifo</a><br/>
<a href='#purge-list.html'>purge-list</a><br/>
<a href='#purge-tree.html'>purge-tree</a><br/>
<a href='#p-url.html'>p-url</a><br/>
<a href='#p-web.html'>p-web</a><br/>
<a href='#random-crypto.html'>random-crypto</a><br/>
<a href='#random-string.html'>random-string</a><br/>
<a href='#read-array.html'>read-array</a><br/>
<a href='#read-fifo.html'>read-fifo</a><br/>
<a href='#read-file.html'>read-file</a><br/>
<a href='#read-hash.html'>read-hash</a><br/>
<a href='#read-json.html'>read-json</a><br/>
<a href='#read-lifo.html'>read-lifo</a><br/>
<a href='#read-line.html'>read-line</a><br/>
<a href='#read-list.html'>read-list</a><br/>
<a href='#read-message.html'>read-message</a><br/>
<a href='#read-remote.html'>read-remote</a><br/>
<a href='#read-split.html'>read-split</a><br/>
<a href='#read-tree.html'>read-tree</a><br/>
<a href='#rename-file.html'>rename-file</a><br/>
<a href='#replace-string.html'>replace-string</a><br/>
<a href='#report-error.html'>report-error</a><br/>
<a href='#request-body.html'>request-body</a><br/>
<a href='#request.html'>request</a><br/>
<a href='#resize-hash.html'>resize-hash</a><br/>
<a href='#return-handler.html'>return-handler</a><br/>
<a href='#rewind-fifo.html'>rewind-fifo</a><br/>
<a href='#rewind-lifo.html'>rewind-lifo</a><br/>
<a href='#rollback-transaction.html'>rollback-transaction</a><br/>
<a href='#run-query.html'>run-query</a><br/>
<a href='#run-remote.html'>run-remote</a><br/>
<a href='#SELinux.html'>SELinux</a><br/>
<a href='#SEMI.html'>SEMI</a><br/>
<a href='#send-file.html'>send-file</a><br/>
<a href='#Server-API.html'>Server-API</a><br/>
<a href='#service.html'>service</a><br/>
<a href='#set-bool.html'>set-bool</a><br/>
<a href='#set-cookie.html'>set-cookie</a><br/>
<a href='#set-number.html'>set-number</a><br/>
<a href='#set-param.html'>set-param</a><br/>
<a href='#set-string.html'>set-string</a><br/>
<a href='#silent-header.html'>silent-header</a><br/>
<a href='#split-string.html'>split-string</a><br/>
<a href='#sqlite-database.html'>sqlite-database</a><br/>
<a href='#start-loop.html'>start-loop</a><br/>
<a href='#statements.html'>statements</a><br/>
<a href='#stat-file.html'>stat-file</a><br/>
<a href='#string-length.html'>string-length</a><br/>
<a href='#string-number.html'>string-number</a><br/>
<a href='#syntax-highlighting.html'>syntax-highlighting</a><br/>
<a href='#temporary-file.html'>temporary-file</a><br/>
<a href='#text-utf8.html'>text-utf8</a><br/>
<a href='#trace-run.html'>trace-run</a><br/>
<a href='#trim-string.html'>trim-string</a><br/>
<a href='#uninstall.html'>uninstall</a><br/>
<a href='#uniq-file.html'>uniq-file</a><br/>
<a href='#unlock-file.html'>unlock-file</a><br/>
<a href='#unused-var.html'>unused-var</a><br/>
<a href='#upper-string.html'>upper-string</a><br/>
<a href='#use-cursor.html'>use-cursor</a><br/>
<a href='#utf8-text.html'>utf8-text</a><br/>
<a href='#variable-scope.html'>variable-scope</a><br/>
<a href='#write-array.html'>write-array</a><br/>
<a href='#write-fifo.html'>write-fifo</a><br/>
<a href='#write-file.html'>write-file</a><br/>
<a href='#write-hash.html'>write-hash</a><br/>
<a href='#write-lifo.html'>write-lifo</a><br/>
<a href='#write-list.html'>write-list</a><br/>
<a href='#write-message.html'>write-message</a><br/>
<a href='#write-string.html'>write-string</a><br/>
<a href='#write-tree.html'>write-tree</a><br/>
<a id='123-hello-world.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:right;background-color:white;'><a href='https://golf-lang.com' style='border-bottom:0px'><img src='https://golf-lang.com/golf.png'/></a></div><div class='vhub' style='margin-top:10px;'>&nbsp;123 hello world</div><hr/><div class="vsub"><a id="Step 1: Install Golf"></a>Step 1: Install Golf</div>
First <a href='/install.html'>install</a> Golf.<br/>
<div class="vsub"><a id="Step 2: Build it"></a>Step 2: Build it</div>
Create Hello World source file (hello.golf) in a new directory; note it's all one bash command:<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_2'>
<span class="Statement">echo</span><span class="Constant"> </span><span class="Statement">'</span><span class="Constant">begin-handler /hello public</span>
<span class="Constant">    @Hello World!</span>
<span class="Constant">end-handler</span><span class="Statement">'</span><span class="Constant"> </span><span class="Statement">&gt;</span> hello.golf</pre>
<span id=golf_copied_2 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_2' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_2, code_2, golf_copied_2)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Create Hello World application:<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_3'>
gg <span class="Special">-k</span> helloworld</pre>
<span id=golf_copied_3 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_3' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_3, code_3, golf_copied_3)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Make Hello World application:<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_4'>
gg <span class="Special">-q</span></pre>
<span id=golf_copied_4 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_4' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_4, code_4, golf_copied_4)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<div class="vsub"><a id="Step 3: Run it"></a>Step 3: Run it</div>
You can run Hello World both as a service and from command line:<br/>
<ul><li>As a service, first start your Hello World application server:<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_5'>
mgrg <span class="Special">-w</span> <span class="Constant">3</span> helloworld</pre>
<span id=golf_copied_5 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_5' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_5, code_5, golf_copied_5)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
then connect to the <a href='/service.html'>service</a>:<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_6'>
gg <span class="Special">-r</span> <span class="Special">--req</span><span class="Statement">=</span><span class="Statement">&quot;</span><span class="Constant">/hello</span><span class="Statement">&quot;</span> <span class="Special">--silent-header</span> <span class="Special">--service</span> <span class="Special">--exec</span></pre>
<span id=golf_copied_6 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_6' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_6, code_6, golf_copied_6)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
</li><li>Execute as <a href='/command-line.html'>command-line</a> program:<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_7'>
gg <span class="Special">-r</span> <span class="Special">--req</span><span class="Statement">=</span><span class="Statement">&quot;</span><span class="Constant">/hello</span><span class="Statement">&quot;</span> <span class="Special">--silent-header</span> <span class="Special">--exec</span></pre>
<span id=golf_copied_7 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_7' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_7, code_7, golf_copied_7)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
</li></ul>
<div class="vsub"><a id="Expected result"></a>Expected result</div>
<div class='ncode' style='position:relative;padding-right:16px;'>
<pre id='code_1'>
Hello World!</pre>
<span id=golf_copied_1 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_1' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_1, code_1, golf_copied_1)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<!--BEFSAL13--><div class="vsub"><a id="See also"></a>See also</div>
 <a name='Quick start'></a><span style="font-weight:bold;">Quick start</span><br/>
<a href='/123-hello-world.html'>123-hello-world</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='/documentation.html'>documentation</a><br/>
<a id='about-golf.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:right;background-color:white;'><a href='https://golf-lang.com' style='border-bottom:0px'><img src='https://golf-lang.com/golf.png'/></a></div><div class='vhub' style='margin-top:10px;'>&nbsp;About golf</div><hr/><div class="vsub"><a id="What is it"></a>What is it</div>
Golf is a language, tools and application server for building and deploying web services and back-end solutions for any business. Its purpose is rapid and easy development of low-maintenance, memory-safe and high-performance business applications. It's about much less coding and much higher readability of code.<br/>
<br/>
Golf is built with industry-standard Free Open Source libraries, extensible, and licensed under <a href='/license.html'>Apache 2</a> Free Open Source.<br/>
<div class="vsub"><a id="Modeling language"></a>Modeling language</div>
Golf is a very high-level modeling language. It's about solving problems by modeling the solution and connecting the components to create high-performance, low-footprint executables; and not about managing memory, manipulating bits and bytes or writing complex code.<br/>
<div class="vsub"><a id="Syntax matters: expressionless"></a>Syntax matters: expressionless</div>
Syntax of a language matters, not just for writing code now, but for someone else reading it years later. Golf language is designed to be intuitive, easy and rapid, and to be close to the way humans are wired, rather than machines. Golf is near-expressionless, featuring only very limited integer expressions. This is by design: it's simpler to use programmable features to build desired functionality then to build them yourself.<br/>
<div class="vsub"><a id="Service oriented"></a>Service oriented</div>
A Golf program works as a service provider, meaning it handles service <a href='/request.html'>request</a>s by providing a reply. It can be either a <a href='/service.html'>service</a> or a <a href='/command-line.html'>command-line</a> program that processes GET, POST, PUT, PATCH, DELETE or any other HTTP requests. <br/>
<br/>
The URL for a request must state the application name, and a also request name which is the source file handling it. So, "/app-name/my-request" means that application name is "app-name" and that "request_name.golf" file will implement a request handler. A request executes in this order:<br/>
<ul><li>An optional before-handler handler executes (see <a href='/before-handler.html'>before-handler</a>). <br/>
</li><li>Golf's <a href='/request.html'>request dispatcher</a> executes a <a href='/request.html'>request</a> handler. <br/>
</li><li>An optional after-handler handler executes (see <a href='/after-handler.html'>after-handler</a>).</li></ul>
<div class="vsub"><a id="Running as a service"></a>Running as a service</div>
A Golf service is served by either<br/>
<ul><li>a fixed number of service processes, or<br/>
</li><li>a dynamic number based on the request load, from 0 to any maximum number specified.</li></ul>Each Golf service process handles one request at a time, and all such processes work in parallel. This means you do not need to worry about thread-safety with Golf. Server processes generally stay up across any number of requests, increasing response time. The balance between the number of processes and the memory usage during high request loads can be achieved with adaptive feature of <a href='/mgrg.html'>mgrg</a>, Golf's service process manager. <br/>
<br/>
A service can be requested by:<br/>
<ul><li>reverse proxies, such as Apache, Nginx, HAProxy etc.,<br/>
</li><li>programs written in any language using <a href='/Client-API.html'>Client-API</a>,<br/>
</li><li>Golf's own <a href='/gg.html'>gg</a> utility (see -r option)<br/>
</li><li>another Golf service by means of <a href='/call-remote.html'>call-remote</a> (on secure networks) and <a href='/call-web.html'>call-web</a> (on the web via SSL/TSL secure connections).</li></ul>
With <a href='/call-remote.html'>call-remote</a>, you can execute remote requests in parallel, and get results, error messages and exit status in a single statement. This makes it easy to distribute and parallelize your application logic and/or build application tiers on a local or any number of remote machines, without having to write any multi-threaded code.<br/>
<div class="vsub"><a id="Command-line program"></a>Command-line program</div>
A <a href='/command-line.html'>command-line</a> program handles a single request before it exits. This may be suitable for batch jobs, for use in shell scripts, for testing/mocking, as well as any other situation where it is more useful or convenient to execute a command-line program. Note that a command-line program can double as <a href='/CGI.html'>CGI</a> (Common Gateway Interface) as well.<br/>
<div class="vsub"><a id="Usage"></a>Usage</div>
Golf services and command-line programs can implement most back-end application layers, including <br/>
<ul><li>presentation (eg. building a web page), <br/>
</li><li>application logic,<br/>
</li><li>data (eg. database) layers, and any others.</li></ul>
<div class="vsub"><a id="Language"></a>Language</div>
Golf programming language is memory-safe, meaning it will prevent you from accidentally overwriting memory or freeing it when it shouldn't be. Golf's <a href='/memory-handling.html'>memory-handling</a> is not limited to just memory safety; it also includes automatic freeing of memory at the end of a request, preventing memory leaks which can be fatal to long running processes. Similarly, files open with file-handling statements are automatically closed at the end of each request, serving the same purpose. <br/>
<div class="vsub"><a id="Types"></a>Types</div>
Golf is a strongly-typed language, with only three primitive types (numbers, strings and booleans) and a number of structured types (message, split-string, hash, tree, tree-cursor, fifo, lifo, list, file and service). Golf is a declarative language, with a few lines of code implementing large functionalities. Golf is also very simple - it's near expression-free! That's because it's designed to achieve application goals with less coding.<br/>
<br/>
The number type is a signed 64-bit integer. The boolean type evaluates to true (non-zero) or false (zero). The string type evaluates to any sequence of bytes (binary or text) that is always trailed with a null character regardless, which is not counted in string's length. All constants follow C rules of formatting.<br/>
<div class="vsub"><a id="Statements"></a>Statements</div>
Golf <a href='/statements.html'>statements</a> are designed for safety, ease of use, and ability to write stable code. Most statements typically perform common complex tasks with options to easily customize them; such options are compile-time whenever possible, increasing run-time performance.<br/>
<div class="vsub"><a id="Variables, scope"></a>Variables, scope</div>
A variable is created the first time it's encountered in any given scope, and is never created again in the same or inner scopes, which avoids common bugs involving more than one variable with the same name in related scopes. You can still of course create variables with the same name in unrelated scopes. <br/>
<br/>
Some structured types (hash, tree, list) as well as primitive types (numbers, strings and booleans) can be created with process-scope, meaning their value persists throughout any requests served by the same process. This is useful for making services that allow keeping and fast quering of data (such as caches).<br/>
<br/>
Numbers and booleans are assigned by value, while strings are assigned by reference (for obvious reason to avoid unnecessary copying).<br/>
<div class="vsub"><a id="Infrastructure"></a>Infrastructure</div>
Golf includes request-processing and all the necessary infrastructure, such as for process management, files, networking, service protocols, database, string processing etc.<br/>
<div class="vsub"><a id="Performance"></a>Performance</div>
Golf is a compiled languaged. Golf applications are high-performance native executables by design, hence absolutely no byte-code, interpreters and similar. Since Golf is declarative, just a few <a href='/statements.html'>statements</a> are needed to implement lots of functionality. These statements are implemented in pure C, and are not slowed down by memory checks as they are safe internally by implementation. Only developer-facing Golf code needs additional logic to enforce memory safety, and that's a very small part of overall run-time cost. This means Golf can truly be memory-safe and high-performance at the same time.<br/>
<div class="vsub"><a id="Database access"></a>Database access</div>
Golf provides access to a number of popular databases, such as MariaDB/mySQL, PostgreSQL and SQLite. (see <a href='/database-config-file.html'>database-config-file</a>):<br/>
<ul><li>transactional support (begin, commit, rollback),<br/>
</li><li>protection against SQL injections for safety, <br/>
</li><li>automatic and persistent database connections with unlimited reuse across all SQL queries for high performance,<br/>
</li><li>prepared SQL statements for high performance.</li></ul>
<div class="vsub"><a id="Proven libraries"></a>Proven libraries</div>
Golf uses well-known and widely used Free Open Source libraries like cURL, OpenSSL, crypto, FastCGI, standard database-connectivity libraries from MariaDB, PostgreSQL, SQLite etc., for compliance, performance and reliability.<br/>
<div class="vsub"><a id="Names of objects"></a>Names of objects</div>
Do not use object names (such as variables and request names) that start with "_gg_" or "gg_" (including upper-case variations) as those are reserved by Golf.<br/>
<!--BEFSAL13--><div class="vsub"><a id="See also"></a>See also</div>
 <a name='General'></a><span style="font-weight:bold;">General</span><br/>
<a href='/about-golf.html'>about-golf</a> &nbsp;<br/>
<a href='/directories.html'>directories</a> &nbsp;<br/>
<a href='/SELinux.html'>SELinux</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='/documentation.html'>documentation</a><br/>
<a id='after-handler.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:right;background-color:white;'><a href='https://golf-lang.com' style='border-bottom:0px'><img src='https://golf-lang.com/golf.png'/></a></div><div class='vhub' style='margin-top:10px;'>&nbsp;After handler</div><hr/><span style="font-weight:bold;">Purpose</span>: Execute your code after a request is handled.<br/>
<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_8'>
<span class="Statement"> after-handler</span>
<span class="Statement"> .</span>..
<span class="Statement"> end-after-handler</span></pre>
<span id=golf_copied_8 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_8' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_8, code_8, golf_copied_8)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Every Golf request goes through a request dispatcher (see <a href='/request.html'>request</a>()). In order to specify your code to execute after a request is handled, create source file "after-handler.golf" and implement a handler that starts with "after-handler" and ends with "end-after-handler", which will be automatically picked up and compiled with your application. <br/>
<br/>
If no request executes (for example if your application does not handle a given <a href='/request.html'>request</a>), after-handler handler does not execute either. If you use <a href='/exit-handler.html'>exit-handler</a> to exit current request handling, after-handler handler still executes.<br/>
<div class="vsub"><a id="Examples"></a>Examples</div>
Here is a simple implementation of after-handler handler that just outputs "Hi there!!":<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_9'>
<span class="Statement"> after-handler</span>
<span class="Statement">      @</span>Hi there!!
<span class="Statement"> end-after-handler</span></pre>
<span id=golf_copied_9 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_9' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_9, code_9, golf_copied_9)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<!--BEFSAL13--><div class="vsub"><a id="See also"></a>See also</div>
 <a name='Service processing'></a><span style="font-weight:bold;">Service processing</span><br/>
<a href='/after-handler.html'>after-handler</a> &nbsp;<br/>
<a href='/before-handler.html'>before-handler</a> &nbsp;<br/>
<a href='/begin-handler.html'>begin-handler</a> &nbsp;<br/>
<a href='/call-handler.html'>call-handler</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='/documentation.html'>documentation</a><br/>
<a id='application-setup.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:right;background-color:white;'><a href='https://golf-lang.com' style='border-bottom:0px'><img src='https://golf-lang.com/golf.png'/></a></div><div class='vhub' style='margin-top:10px;'>&nbsp;Application setup</div><hr/><div class="vsub"><a id="Initialize application"></a>Initialize application</div>
A Golf application must be initialized first. This means creating a directory structure owned by application owner, which can be any Operating System user. To initialize application &lt;app name&gt; while logged-in as application owner: <br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_12'>
sudo mgrg <span class="Special">-i</span> <span class="Special">-u</span> <span class="PreProc">$(</span><span class="Special">whoami</span><span class="PreProc">)</span> <span class="Statement">&lt;</span>app name<span class="Statement">&gt;</span></pre>
<span id=golf_copied_12 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_12' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_12, code_12, golf_copied_12)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<div class="vsub"><a id="Setup database(s)"></a>Setup database(s)</div>
If your application does not use database(s), you can skip this part.<br/>
<br/>
You can setup your database(s) in any way you see fit, and this includes creating the database objects (such as tables or indexes) used by your application; all Golf needs to know is the connection parameters, which include database login information (but can include other things as well). For each database in use, you must provide a <a href='/database-config-file.html'>database-config-file</a> in the same directory as your Golf source code. This file contains the database connection parameters - these parameters are database-specific. For example, if your code has statements like:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_10'>
<span class="Statement"> run-query</span> @mydb = ...

 <span class="Comment">//or</span>

<span class="Statement"> begin-transaction</span> @sales_db</pre>
<span id=golf_copied_10 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_10' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_10, code_10, golf_copied_10)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
then you must have files "mydb" and "sales_db" present. For example, MariaDB config file might look like:<br/>
<div class='ncode' style='position:relative;padding-right:16px;'>
<pre id='code_11'>
[client]
user=gliimuser
password=pwd
database=gliimdb
protocol=TCP
host=127.0.0.1
port=3306</pre>
<span id=golf_copied_11 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_11' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_11, code_11, golf_copied_11)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
or for PostgreSQL:<br/>
<div class='ncode' style='position:relative;padding-right:16px;'>
<pre id='code_13'>
user=myuser password=mypwd dbname=mydb</pre>
<span id=golf_copied_13 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_13' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_13, code_13, golf_copied_13)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<div class="vsub"><a id="Make application"></a>Make application</div>
To compile and link the application that doesn't use database(s):<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_14'>
gg <span class="Special">-q</span></pre>
<span id=golf_copied_14 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_14' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_14, code_14, golf_copied_14)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
When you have database(s) in use, for instance assuming in above example that "mydb" is MariaDB database, "sales_db" is PostgreSQL, and "contacts" is SQLite database:<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_15'>
gg <span class="Special">-q</span> <span class="Special">--db</span><span class="Statement">=</span><span class="Statement">&quot;</span><span class="Constant">mariadb:mydb postgres:sales_db sqlite:contacts</span><span class="Statement">&quot;</span></pre>
<span id=golf_copied_15 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_15' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_15, code_15, golf_copied_15)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
See <a href='/gg.html'>gg</a> for more options.<br/>
<div class="vsub"><a id="Start application"></a>Start application</div>
Stop the application first in case it was running, then start the application - for example:<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_16'>
mgrg <span class="Special">-m</span> quit <span class="Statement">&lt;</span>app name<span class="Statement">&gt;</span>
mgrg <span class="Special">-w</span> <span class="Constant">3</span> <span class="Statement">&lt;</span>app name<span class="Statement">&gt;</span></pre>
<span id=golf_copied_16 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_16' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_16, code_16, golf_copied_16)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
See <a href='/mgrg.html'>mgrg</a> for more details.<br/>
<div class="vsub"><a id="Running application"></a>Running application</div>
You can run your application as <a href='/service.html'>service</a>, <a href='/CGI.html'>CGI</a> or <a href='/command-line.html'>command-line</a>.<br/>
<!--BEFSAL13--><div class="vsub"><a id="See also"></a>See also</div>
 <a name='Running application'></a><span style="font-weight:bold;">Running application</span><br/>
<a href='/application-setup.html'>application-setup</a> &nbsp;<br/>
<a href='/CGI.html'>CGI</a> &nbsp;<br/>
<a href='/command-line.html'>command-line</a> &nbsp;<br/>
<a href='/service.html'>service</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='/documentation.html'>documentation</a><br/>
<a id='article-distributed.html'></a>
<br/>
<br/><div class='vimg'><img class='imgs' src='distributed_computing.png' alt='Golf'></img>
</div><br/>
<div class="vsub"><a id="What is distributed computing"></a>What is distributed computing</div>
Distributed computing is two or more servers communicating for a common purpose. Typically, some tasks are divvied up between a number of computers, and they all work together to accomplish it. Note that "separate servers" may mean physically separate computers. It may also mean virtual servers such as Virtual Private Servers (VPS) or containers, that may share the same physical hardware, though they appear as separate computers on the network. <br/>
<br/>
There are many reasons why you might need this kind of setup. It may be that resources needed to complete the task aren't all on a single computer. For instance, your application may rely on multiple databases, each residing on a different computer. Or, you may need to distribute requests to your application because a single computer isn't enough to handle them all at the same time. In other cases, you are using remote services (like a REST API-based for instance), and those by nature reside somewhere else.<br/>
<br/>
In any case, the computers comprising your distributed system may be on a local network, or they may be worldwide, or some combination of those. The throughput (how many bytes per second can be exchanged via network) and latency (how long it takes for a packet to travel via network) will obviously vary: for a local network you'd have a higher throughput and lower latency, and for Internet servers it will be the opposite. Plan accordingly based on the quality of service you'd expect.<br/>
<div class="vsub"><a id="How servers communicate"></a>How servers communicate</div>
Depending on your network(s) setup, different kinds of communication are called for. If two servers reside on a local network, then they would typically used the fastest possible means of communication. A local network typically means a secure network, because nobody else has access to it but you. So you would not need TSL/SSL or any other kind of secure protocol as that would just slow things down.<br/>
<br/>
If two servers are on the Internet though, then you must use a secure protocol (like TSL/SSL or some other) because your communication may be spied on, or worse, affected by man-in-the-middle attacks. <br/>
<div class="vsub"><a id="Local network distributed computing"></a>Local network distributed computing</div>
Most of the time, your distributed system would be on a local network. Such network may be separate and private in a physical sense, or (more commonly) in a virtual sense, where some kind of a Private Cloud Network is established for you by the Cloud provider. It's likely that separation is enforced by specialized hardware (such as routers and firewalls) and secure protocols that keep networks belonging to different customers separate. This way, a "local" network can be established even if computers on it are a world apart, though typically they reside as a part of a larger local network. <br/>
<br/>
Either way, as far as your application is concerned, you are looking at a local network. Thus, the example here will be for such a case, as it's most likely what you'll have. A local network means different parts of your application residing on different servers will use some efficient protocol based on TCP/IP. One such protocol is FastCGI, a high-performance binary protocol for communication between servers, clients, and in general programs of all kinds, and that's the one used by Golf. So in principle, the setup will look like this (there'll be more details later):<br/>
<br/><div class='vimg'><img class='imgs' src='distributed_principle.png' alt='Golf'></img>
</div><br/>
Next, in theory you should have two servers, however in this example both servers will be on the same localhost (i.e. "127.0.0.1"). This is just for simplicity; the code is exactly the same if you have two different servers on a local network - simply use another IP (such as "192.168.0.15" for instance) for your "remote" server instead of local "127.0.0.1". The two servers do not even necessarily need to be physically two different computers. You can start a Virtual Machine (VM) on your computer and host another virtual computer there. Popular free software like VirtualBox or KVM Hypervisor can help you do that. <br/>
<br/>
In any case, in this example you will start two simple application servers; they will communicate with one another. The first one will be called "local" and the other one "remote" server. The local application server will make a request to the remote one.<br/>
<div class="vsub"><a id="Local server"></a>Local server</div>
On a local server, create a new directory for your local application server source code:<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_22'>
<span class="Statement">mkdir</span> <span class="PreProc">$HOME</span>/local_server
<span class="Statement">cd</span> <span class="PreProc">$HOME</span>/local_server</pre>
<span id=golf_copied_22 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_22' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_22, code_22, golf_copied_22)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
and then create a new file "status.golf" with the following:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_20'>
<span class="Statement"> begin-handler</span> /status<span class="Identifier"> public</span>
<span class="Statement">     silent-header</span>
<span class="Statement">     get-param</span> server
<span class="Statement">     get-param</span> days

<span class="Statement">     pf-out</span> <span class="Constant">&quot;/server/remote-status/days=</span><span class="Special">%s</span><span class="Constant">&quot;</span>, days<span class="Type"> to</span> payload
<span class="Statement">     pf-out</span> <span class="Constant">&quot;</span><span class="Special">%s</span><span class="Constant">:3800&quot;</span>, server<span class="Type"> to</span> srv_location

<span class="Statement">     new-remote</span> srv<span class="Identifier"> location</span> srv_location \
        <span class="Identifier"> method</span> <span class="Constant">&quot;GET&quot;</span><span class="Identifier"> url-path</span> payload \
        <span class="Identifier"> timeout</span> <span class="Constant">30</span>

<span class="Statement">     call-remote</span> srv
<span class="Statement">     read-remote</span> srv<span class="Type"> data</span> dt
<span class="Statement">     @</span>Output is: [<span class="Statement">&lt;&lt;p-out</span> dt<span class="Statement">&gt;&gt;</span>]
<span class="Statement"> end-handler</span></pre>
<span id=golf_copied_20 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_20' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_20, code_20, golf_copied_20)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
The code here is very simple. <a href='/new-remote.html'>new-remote</a> will create a new connection to a remote server, running on IP address given by input parameter "server" (and obtained with <a href='/get-param.html'>get-param</a>) on TCP port 3800. URL payload created in string variable "payload" is passed to the remote server. If it doesn't reply in 30 seconds, then the code would timeout. Then you're using <a href='/call-remote.html'>call-remote</a> to actually make a call to the remote server (which is served by application "server" and by request handler "remote-status.golf" below), and finally <a href='/read-remote.html'>read-remote</a> to get the reply from it. For simplicity, error handling is omitted here, but you can easily detect a timeout, any network errors, any errors from the remote server, including error code and error text, etc. See the above statements for more on this.<br/>
<div class="vsub"><a id="Make and start the local server"></a>Make and start the local server</div>
Next, create a local application:<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_25'>
gg <span class="Special">-k</span> client</pre>
<span id=golf_copied_25 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_25' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_25, code_25, golf_copied_25)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Make the application (i.e. compile the source code and build the native executable):<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_27'>
gg <span class="Special">-q</span></pre>
<span id=golf_copied_27 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_27' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_27, code_27, golf_copied_27)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Finally, start the local application server:<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_28'>
mgrg <span class="Special">-w</span> <span class="Constant">2</span> client</pre>
<span id=golf_copied_28 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_28' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_28, code_28, golf_copied_28)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
This will start 2 server instances of a local application server.<br/>
<div class="vsub"><a id="Remote server"></a>Remote server</div>
Okay, now you have a local server. Next, you'll setup a remote server. Login to your remote server and create a new directory for your remote application server:<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_29'>
<span class="Statement">mkdir</span> <span class="PreProc">$HOME</span>/remote_server
<span class="Statement">cd</span> <span class="PreProc">$HOME</span>/remote_server</pre>
<span id=golf_copied_29 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_29' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_29, code_29, golf_copied_29)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Then create file "remote-status.golf" with this code:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_23'>
<span class="Statement"> begin-handler</span> /remote-status<span class="Identifier"> public</span>
<span class="Statement">     silent-header</span>
<span class="Statement">     get-param</span> days

<span class="Statement">     pf-out</span> <span class="Constant">&quot;Status in the past </span><span class="Special">%s</span><span class="Constant"> days is okay&quot;</span>, days
<span class="Statement"> end-handler</span></pre>
<span id=golf_copied_23 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_23' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_23, code_23, golf_copied_23)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
This is super simple, and it just replies that the status is okay; it accepts the number of days to check for status and displays that back. In a real service, you might query a database to check for status (see <a href='/run-query.html'>run-query</a>).<br/>
<div class="vsub"><a id="Make and start remote server"></a>Make and start remote server</div>
First create your application:<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_30'>
gg <span class="Special">-k</span> server</pre>
<span id=golf_copied_30 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_30' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_30, code_30, golf_copied_30)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Then make your program:<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_31'>
gg <span class="Special">-q</span></pre>
<span id=golf_copied_31 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_31' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_31, code_31, golf_copied_31)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
And finally start the server:<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_32'>
mgrg <span class="Special">-w</span> <span class="Constant">2</span> <span class="Special">-p</span> <span class="Constant">3800</span> server</pre>
<span id=golf_copied_32 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_32' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_32, code_32, golf_copied_32)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
This will start 2 daemon processes running as background servers. They will serve requests from your local server.<br/>
<br/>
Note that if you're running this example on different computers, some Linux distributions come with a firewall, and you may need to use ufw or firewall-cmd to make port 3800 accessible here. Also if you're using <a href='/SELinux.html'>SELinux</a> on this server, you may either need to allow binding to port 3800, or make SELinux permissive (with "sudo setenforce 0").<br/>
<div class="vsub"><a id="Run distributed calls"></a>Run distributed calls</div>
There is a number of ways you can call the remote service you created. These are calls made from your <span style="font-style:italic">local</span> server, so change directory to it:<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_33'>
<span class="Statement">cd</span> <span class="PreProc">$HOME</span>/local_server</pre>
<span id=golf_copied_33 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_33' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_33, code_33, golf_copied_33)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Here's various way to call the remote application server:<br/>
<ul><li>Execute a command-line program on local server that calls remote application server:<br/>
<br/><div class='vimg'><img class='imgs' src='distributed_command_line.png' alt='Golf'></img>
</div><br/>
To do this, use "-r" option of <a href='/gg.html'>gg</a> utility to generate shell commands you can use to call your program:<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_17'>
gg <span class="Special">-r</span> <span class="Special">--req</span> <span class="Statement">&quot;</span><span class="Constant">/status/days=18/server=127.0.0.1</span><span class="Statement">&quot;</span> <span class="Special">--exec</span></pre>
<span id=golf_copied_17 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_17' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_17, code_17, golf_copied_17)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Here, you're saying that you want to make a request "status" (which is in source file "status.golf" on your local server). You are also saying that input parameter "days" should have a value of "18" and also that input parameter "server" should have a value of "127.0.0.1" - see <a href='/get-param.html'>get-param</a> statements in the above file "status.golf". If you actually have a different server with a different IP, use it instead of "127.0.0.1". <br/>
The result will be:<br/>
<div class='ncode' style='position:relative;padding-right:16px;'>
<pre id='code_21'>
Output is: [Status in the past 18 days is okay]</pre>
<span id=golf_copied_21 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_21' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_21, code_21, golf_copied_21)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
where the part in between "[..]" comes from the remote server, and the "Output is: " part comes from the command line Golf program you executed.<br/>
</li><li>Call remote application server directly from a command-line program:<br/>
<br/><div class='vimg'><img class='imgs' src='distributed_command_utility.png' alt='Golf'></img>
</div><br/>
Do this:<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_18'>
gg <span class="Special">-r</span> <span class="Special">--req</span> <span class="Statement">&quot;</span><span class="Constant">/status/days=18/server=127.0.0.1</span><span class="Statement">&quot;</span> <span class="Special">--exec</span> <span class="Special">--service</span> <span class="Special">--remote</span><span class="Statement">=</span><span class="Statement">&quot;</span><span class="Constant">127.0.0.1:3800</span><span class="Statement">&quot;</span></pre>
<span id=golf_copied_18 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_18' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_18, code_18, golf_copied_18)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
The result is, as expected:<br/>
<div class='ncode' style='position:relative;padding-right:16px;'>
<pre id='code_24'>
Status in the past 12 days is okay</pre>
<span id=golf_copied_24 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_24' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_24, code_24, golf_copied_24)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
In this case, the output comes straight from the remote server, so the "Output is: " part is missing. The above simply copies the output from a remote service to the standard output.<br/>
</li><li>Use a command-line utility to contact local application server, which then calls the remote server, which replies back to local application server, which replies back to your command-line utility:<br/>
<br/><div class='vimg'><img class='imgs' src='distributed_command_local.png' alt='Golf'></img>
</div><br/>
You will use cgi-fcgi to do this:<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_19'>
gg <span class="Special">-r</span> <span class="Special">--req</span> <span class="Statement">&quot;</span><span class="Constant">/status/server=127.0.0.1/days=10</span><span class="Statement">&quot;</span> <span class="Special">--exec</span> <span class="Special">--service</span></pre>
<span id=golf_copied_19 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_19' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_19, code_19, golf_copied_19)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
The result is:<br/>
<div class='ncode' style='position:relative;padding-right:16px;'>
<pre id='code_26'>
Output is: [Status in the past 10 days is okay]</pre>
<span id=golf_copied_26 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_26' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_26, code_26, golf_copied_26)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
which is what you'd expect. In this case we first send a request to your local application server, which sends it to a remote service, so there is "Output is: " output.<br/>
</li></ul>
You have different options when designing your distributed systems, and this article shows how easy it is to implement them.<br/>
<a id='article-encryption.html'></a>
<br/>
<br/><div class='vimg'><img class='imgs' src='encryption.jpg' alt='Golf'></img>
</div><br/>
<div class="vsub"><a id="What is encryption"></a>What is encryption</div>
Encryption is a method of turning data into an unusable form that can be made useful only by means of decryption. The purpose is to make data available solely to those who can decrypt it (i.e. make it usable). Typically, data needs to be encrypted to make sure it cannot be obtained in case of unauthorized access. It is the last line of defense after an attacker has managed to break through authorization systems and access control.<br/>
<br/>
This doesn't mean all data needs to be encrypted, because often times authorization and access systems may be enough, and in addition, there is a performance penalty for encrypting and decrypting data. If and when the data gets encrypted is a matter of application planning and risk assessment, and sometimes it is also a regulatory requirement, such as with HIPAA or GDPR.<br/>
<br/>
Data can be encrypted at-rest, such as on disk, or in transit, such as between two parties communicating over the Internet.<br/>
<br/>
Here you will learn how to encrypt and decrypt data using a password, also known as symmetrical encryption. This password must be known to both parties exchanging information.<br/>
<div class="vsub"><a id="Cipher, digest, salt, iterations, IV"></a>Cipher, digest, salt, iterations, IV</div>
To properly and securely use encryption, there are a few notions that need to be explained.<br/>
<br/>
A cipher is the algorithm used for encryption. For example, AES256 is a cipher. The idea of a cipher is what most people will think of when it comes to encryption.<br/>
<br/>
A digest is basically a hash function that is used to scramble and lengthen the password (i.e. the encryption key) before it's used by the cipher. Why is this done? For one, it creates a well randomized, uniform-length hash of a key that works better for encryption. It's also very suitable for "salting", which is the next one to talk about.<br/>
<br/>
The "salt" is a method of defeating so-called "rainbow" tables. An attacker knows that two hashed values will still look exactly the same if the originals were. However, if you add the salt value to hashing, then they won't. It's called "salt" because it's sort of mixed with the key to produce something different. Now, a rainbow table will attempt to match known hashed values with precomputed data in an effort to guess a password. Usually, salt is randomly generated for each key and stored with it. In order to match known hashes, the attacker would have to precompute rainbow tables for great many random values, which is generally not feasible.<br/>
<br/>
You will often hear about "iterations" in encryption. An iteration is a single cycle in which a key and salt are mixed in such a way to make guessing the key harder. This is done many times so to make it computationally difficult for an attacker to reverse-guess the key, hence "iterations" (plural). Typically, a minimum required number of iterations is 1000, but it can be different than that. If you start with a really strong password, generally you need less.<br/>
<br/>
IV (or "Initialization Vector") is typically a random value that's used for encryption of each message. Now, salt is used for producing a key based on a password. And IV is used when you already have a key and now are encrypting messages. The purpose of IV is to make the same messages appear differently when encrypted. Sometimes, IV also has a sequential component, so it's made of a random string plus a sequence that constantly increases. This makes "replay" attacks difficult, which is where attacker doesn't need to decrypt a message; but rather an encrypted message was "sniffed" (i.e. intercepted between the sender and receiver) and then replayed, hoping to repeat the action already performed. Though in reality, most high-level protocols already have a sequence in place, where each message has, as a part of it, an increasing packet number, so in most cases IV doesn't need it.<br/>
<div class="vsub"><a id="Prerequisites"></a>Prerequisites</div>
This example uses <a href='https://golf-lang.github.io/'>Golf</a> framework. <a href='https://golf-lang.github.io/install.html'>Install</a> it first.<br/>
<div class="vsub"><a id="Encryption example"></a>Encryption example</div>
To run the examples here, create an application "enc" in a directory of its own (see <a href='/mgrg.html'>mgrg</a> for more on Golf's program manager):<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_42'>
<span class="Statement">mkdir</span> enc_example
<span class="Statement">cd</span> enc_example
gg <span class="Special">-k</span> enc</pre>
<span id=golf_copied_42 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_42' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_42, code_42, golf_copied_42)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
To encrypt data use <a href='/encrypt-data.html'>encrypt-data</a> statement. The simplest form is to encrypt a null-terminated string. Create a file "encrypt.golf" and copy this:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_40'>
<span class="Statement"> begin-handler</span> /encrypt<span class="Identifier"> public</span>
<span class="Statement">     set-string</span> str = <span class="Constant">&quot;This contains a secret code, which is Open Sesame!&quot;</span>
     <span class="Comment">// Encrypt</span>
<span class="Statement">     encrypt-data</span> str<span class="Type"> to</span> enc_str<span class="Identifier"> password</span> <span class="Constant">&quot;my_password&quot;</span>
<span class="Statement">     p-out</span> enc_str
<span class="Statement">     @</span>
     <span class="Comment">// Decrypt</span>
<span class="Statement">     decrypt-data</span> enc_str<span class="Identifier"> password</span> <span class="Constant">&quot;my_password&quot;</span><span class="Type"> to</span> dec_str
<span class="Statement">     p-out</span> dec_str
<span class="Statement">     @</span>
<span class="Statement"> end-handler</span></pre>
<span id=golf_copied_40 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_40' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_40, code_40, golf_copied_40)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
You can see the basic usage of encrypt-data and <a href='/decrypt-data.html'>decrypt-data</a>. You supply data (original or encrypted), the password, and off you go. The data is encrypted and then decrypted, yielding the original. <br/>
<br/>
In the source code, a string variable "enc_str" (which is created as a "char *") will contain the encrypted version of "This contains a secret code, which is Open Sesame!" and "dec_str" will be the decrypted data which must be exactly the same.<br/>
<br/>
To run this code from command line, make the application first:<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_45'>
gg <span class="Special">-q</span></pre>
<span id=golf_copied_45 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_45' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_45, code_45, golf_copied_45)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Then have Golf produce the bash code to run it - the request path is "/encrypt", which in our case is handled by function "void encrypt()" defined in source file "encrypt.golf". In Golf, these names always match, making it easy to write, read and execute code. Use "-r" option in <a href='/gg.html'>gg</a> to specify the request path and get the code you need to run the program:<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_48'>
gg <span class="Special">-r</span> <span class="Special">--req</span><span class="Statement">=</span><span class="Statement">&quot;</span><span class="Constant">/encrypt</span><span class="Statement">&quot;</span> <span class="Special">--silent-header</span> <span class="Special">--exec</span></pre>
<span id=golf_copied_48 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_48' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_48, code_48, golf_copied_48)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
You will get a response like this:<br/>
<div class='ncode' style='position:relative;padding-right:16px;'>
<pre id='code_41'>
72ddd44c10e9693be6ac77caabc64e05f809290a109df7cfc57400948cb888cd23c7e98e15bcf21b25ab1337ddc6d02094232111aa20a2d548c08f230b6d56e9
This contains a secret code, which is Open Sesame!</pre>
<span id=golf_copied_41 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_41' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_41, code_41, golf_copied_41)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
What you have here is the encrypted data, and then this encrypted data is decrypted using the same password. Unsurprisingly, the result matches the string you encrypted in the first place.<br/>
<br/>
Note that by default encrypt-data will produce encrypted value in a human-readable hexadecimal form, which means consisting of hexadecimal characters "0" to "9" and "a" to "f". This way you can store the encrypted data into a regular string. For instance it may go to a JSON document or into a VARCHAR column in a database, or pretty much anywhere else. However you can also produce a binary encrypted data. More on that in a bit.<br/>
<div class="vsub"><a id="Encrypt data into a binary result"></a>Encrypt data into a binary result</div>
In the previous example, the resulting encrypted data is in a human-readable hexadecimal form. You can also create binary encrypted data, which is not a human-readable string and is also shorter. To do that, use "binary" clause. Replace the code in "encrypt.golf" with:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_43'>
<span class="Statement"> begin-handler</span> /encrypt<span class="Identifier"> public</span>
<span class="Statement">     set-string</span> str = <span class="Constant">&quot;This contains a secret code, which is Open Sesame!&quot;</span>
     <span class="Comment">// Encrypt</span>
<span class="Statement">     encrypt-data</span> str<span class="Type"> to</span> enc_str<span class="Identifier"> password</span> <span class="Constant">&quot;my_password&quot;</span><span class="Identifier"> binary</span>
     <span class="Comment">// Save the encrypted data to a file</span>
<span class="Statement">     write-file</span> <span class="Constant">&quot;encrypted_data&quot;</span><span class="Identifier"> from</span> enc_str
<span class="Statement">     get-app</span><span class="Identifier"> directory</span><span class="Type"> to</span> app_dir
<span class="Statement">     @</span>Encrypted data written to file <span class="Statement">&lt;&lt;p-out</span> app_dir<span class="Statement">&gt;&gt;</span>/encrypted_data
     <span class="Comment">// Decrypt data</span>
<span class="Statement">     decrypt-data</span> enc_str<span class="Identifier"> password</span> <span class="Constant">&quot;my_password&quot;</span><span class="Identifier"> binary</span><span class="Type"> to</span> dec_str
<span class="Statement">     p-out</span> dec_str
<span class="Statement">     @</span>
<span class="Statement"> end-handler</span></pre>
<span id=golf_copied_43 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_43' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_43, code_43, golf_copied_43)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
When you want to get binary encrypted data, you should get its length in bytes too, or otherwise you won't know where it ends, since it may contain null bytes in it. Use "output-length" clause for that purpose. In this code, the encrypted data in variable "enc_str" is written to file "encrypted_data", and the length written is "outlen" bytes. When a file is written without a path, it's always written in the application home directory (see <a href='/directories.html'>directories</a>), so you'd use <a href='/get-app.html'>get-app</a> to get that directory.<br/>
<br/>
When decrypting data, notice the use of "input-length" clause. It says how many bytes the encrypted data has. Obviously you can get that from "outlen" variable, where encrypt-data stored the length of encrypted data. When encryption and decryption are decoupled, i.e. running in separate programs, you'd make sure this length is made available.<br/>
<br/>
Notice also that when data is encrypted as "binary" (meaning producing a binary output), the decryption must use the same.<br/>
<br/>
Make the application:<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_51'>
gg <span class="Special">-q</span></pre>
<span id=golf_copied_51 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_51' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_51, code_51, golf_copied_51)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Run it the same as before:<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_54'>
gg <span class="Special">-r</span> <span class="Special">--req</span><span class="Statement">=</span><span class="Statement">&quot;</span><span class="Constant">/encrypt</span><span class="Statement">&quot;</span> <span class="Special">--silent-header</span> <span class="Special">--exec</span></pre>
<span id=golf_copied_54 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_54' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_54, code_54, golf_copied_54)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
The result is:<br/>
<div class='ncode' style='position:relative;padding-right:16px;'>
<pre id='code_44'>
Encrypted data written to file /var/lib/gg/enc/app/encrypted_data
This contains a secret code, which is Open Sesame!</pre>
<span id=golf_copied_44 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_44' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_44, code_44, golf_copied_44)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
The decrypted data is exactly the same as the original.<br/>
<br/>
You can see the actual encrypted data written to the file by using "octal dump" ("od") Linux utility:<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_57'>
od <span class="Special">-c</span> /var/lib/gg/enc/app/encrypted_data</pre>
<span id=golf_copied_57 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_57' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_57, code_57, golf_copied_57)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
with the result like:<br/>
<div class='ncode' style='position:relative;padding-right:16px;'>
<pre id='code_47'>
$ od -c /var/lib/gg/enc/app/encrypted_data
0000000   r 335 324   L 020 351   i   ; 346 254   w 312 253 306   N 005
0000020 370  \t   )  \n 020 235 367 317 305   t  \0 224 214 270 210 315
0000040   # 307 351 216 025 274 362 033   % 253 023   7 335 306 320
0000060 224   #   ! 021 252     242 325   H 300 217   #  \v   m   V 351
0000100</pre>
<span id=golf_copied_47 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_47' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_47, code_47, golf_copied_47)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
There you have it. You will notice the data is binary and it actually contains the null byte(s).<br/>
<div class="vsub"><a id="Encrypt binary data"></a>Encrypt binary data</div>
The data to encrypt in these examples is a string, i.e. null-delimited. You can encrypt binary data just as easily by specifying it whole (since Golf keeps track of how many bytes are there!), or specifying its length in "input-length" clause, for example copy this to "encrypt.golf":<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_46'>
<span class="Statement"> begin-handler</span> /encrypt<span class="Identifier"> public</span>
<span class="Statement">     set-string</span> str = <span class="Constant">&quot;This c</span><span class="Special">\000</span><span class="Constant">ontains a secret code, which is Open Sesame!&quot;</span>
     <span class="Comment">// Encrypt</span>
<span class="Statement">     encrypt-data</span> str<span class="Type"> to</span> enc_str<span class="Identifier"> password</span> <span class="Constant">&quot;my_password&quot;</span><span class="Identifier"> input-length</span> <span class="Constant">12</span>
<span class="Statement">     p-out</span> enc_str
<span class="Statement">     @</span>
     <span class="Comment">// Decrypt</span>
<span class="Statement">     decrypt-data</span> enc_str<span class="Identifier"> password</span> <span class="Constant">&quot;my_password&quot;</span><span class="Type"> to</span> dec_str
     <span class="Comment">// Output binary data; present null byte as octal \</span><span class="PreProc">0</span><span class="Constant">00</span>

<span class="Statement">     string-length</span> dec_str<span class="Type"> to</span> res_len
<span class="Statement">     start-loop</span><span class="Identifier"> repeat</span> res_len<span class="Type"> use</span> i<span class="Identifier"> start-with</span> <span class="Constant">0</span>
<span class="Statement">         if-true</span> dec_str[i]<span class="Identifier"> equal</span> <span class="Constant">0</span>
<span class="Statement">             p-out</span> <span class="Constant">&quot;</span><span class="Special">\\</span><span class="Constant">000&quot;</span>
<span class="Statement">         else-if</span>
<span class="Statement">             pf-out</span> <span class="Constant">&quot;</span><span class="Special">%c</span><span class="Constant">&quot;</span>, dec_str[i]
<span class="Statement">         end-if</span>
<span class="Statement">     end-loop</span>
<span class="Statement">     @</span>
<span class="Statement"> end-handler</span></pre>
<span id=golf_copied_46 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_46' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_46, code_46, golf_copied_46)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
This will encrypt 12 bytes at memory location "enc_str" regardless of any null bytes. In this case that's "This c" followed by a null byte followed by "ontain" string, but it can be any kind of binary data, for example the contents of a JPG file.<br/>
<br/>
On the decrypt side, you'd obtain the number of bytes decrypted in "output-length" clause. Finally, the decrypted data is shown to be exactly the original and the null byte is presented in a typical octal representation.<br/>
<br/>
Make the application:<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_59'>
gg <span class="Special">-q</span></pre>
<span id=golf_copied_59 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_59' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_59, code_59, golf_copied_59)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Run it the same as before:<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_60'>
gg <span class="Special">-r</span> <span class="Special">--req</span><span class="Statement">=</span><span class="Statement">&quot;</span><span class="Constant">/encrypt</span><span class="Statement">&quot;</span> <span class="Special">--silent-header</span> <span class="Special">--exec</span></pre>
<span id=golf_copied_60 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_60' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_60, code_60, golf_copied_60)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
The result is:<br/>
<div class='ncode' style='position:relative;padding-right:16px;'>
<pre id='code_50'>
6bea45c2f901c0913c87fccb9b347d0a
This c\000ontai</pre>
<span id=golf_copied_50 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_50' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_50, code_50, golf_copied_50)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
The encrypted value is shorter because the data is shorter in this case too, and the result matches exactly the original.<br/>
<div class="vsub"><a id="Use any cipher or digest"></a>Use any cipher or digest</div>
The encryption used by default is <a href='https://en.wikipedia.org/wiki/Advanced_Encryption_Standard'>AES256</a> and <a href='https://en.wikipedia.org/wiki/SHA-2'>SHA256</a> hashing from the standard <a href='https://www.openssl.org/'>OpenSSL</a> library, both of which are widely used in cryptography. You can however use any available cipher and digest (i.e. hash) that is supported by OpenSSL (even the custom ones you provide).<br/>
<br/>
To see which algorithms are available, do this in command line:<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_61'>
<span class="Comment">#get list of cipher providers</span>
openssl list <span class="Special">-cipher-algorithms</span>

<span class="Comment">#get list of digest providers</span>
openssl list <span class="Special">-digest-algorithms</span></pre>
<span id=golf_copied_61 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_61' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_61, code_61, golf_copied_61)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
These two will provide a list of cipher and digest (hash) algorithms. Some of them may be weaker than the default ones chosen by Golf, and others may be there just for backward compatibility with older systems. Yet others may be quite new and did not have enough time to be validated to the extent you may want them to be. So be careful when choosing these algorithms and be sure to know why you're changing the default ones. That said, here's an example of using Camellia-256 (i.e. "CAMELLIA-256-CFB1") encryption with "SHA3-512" digest. Replace the code in "encrypt.golf" with:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_49'>
<span class="Statement"> begin-handler</span> /encrypt<span class="Identifier"> public</span>
<span class="Statement">     set-string</span> str = <span class="Constant">&quot;This contains a secret code, which is Open Sesame!&quot;</span>
     <span class="Comment">// Encrypt data</span>
<span class="Statement">     encrypt-data</span> str<span class="Type"> to</span> enc_str<span class="Identifier"> password</span> <span class="Constant">&quot;my_password&quot;</span> \
        <span class="Identifier"> cipher</span> <span class="Constant">&quot;CAMELLIA-256-CFB1&quot;</span><span class="Identifier"> digest</span> <span class="Constant">&quot;SHA3-512&quot;</span>
<span class="Statement">     p-out</span> enc_str
<span class="Statement">     @</span>
     <span class="Comment">// Decrypt data</span>
<span class="Statement">     decrypt-data</span> enc_str<span class="Identifier"> password</span> <span class="Constant">&quot;my_password&quot;</span> <span class="Type"> to</span> dec_str \
        <span class="Identifier"> cipher</span> <span class="Constant">&quot;CAMELLIA-256-CFB1&quot;</span><span class="Identifier"> digest</span> <span class="Constant">&quot;SHA3-512&quot;</span>
<span class="Statement">     p-out</span> dec_str
<span class="Statement">     @</span>
<span class="Statement"> end-handler</span></pre>
<span id=golf_copied_49 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_49' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_49, code_49, golf_copied_49)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Make the application:<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_34'>
gg <span class="Special">-q</span></pre>
<span id=golf_copied_34 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_34' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_34, code_34, golf_copied_34)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Run it:<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_35'>
gg <span class="Special">-r</span> <span class="Special">--req</span><span class="Statement">=</span><span class="Statement">&quot;</span><span class="Constant">/encrypt</span><span class="Statement">&quot;</span> <span class="Special">--silent-header</span> <span class="Special">--exec</span></pre>
<span id=golf_copied_35 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_35' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_35, code_35, golf_copied_35)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
In this case the result is:<br/>
<div class='ncode' style='position:relative;padding-right:16px;'>
<pre id='code_53'>
f4d64d920756f7220516567727cef2c47443973de03449915d50a1d2e5e8558e7e06914532a0b0bf13842f67f0a268c98da6
This contains a secret code, which is Open Sesame!</pre>
<span id=golf_copied_53 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_53' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_53, code_53, golf_copied_53)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Again, you get the original data. Note you have to use the same cipher and digest in both encrypt-data and decrypt-data!<br/>
<br/>
You can of course produce the binary encrypted value just like before by using "binary" and "output-length" clauses.<br/>
<br/>
If you've got external systems that encrypt data, and you know which cipher and digest they use, you can match those and make your code interoperable. Golf uses standard OpenSSL library so chances are that other software may too.<br/>
<div class="vsub"><a id="Using salt"></a>Using salt</div>
To add a salt to encryption, use "salt" clause. You can generate random salt by using <a href='/random-string.html'>random-string</a> statement (or <a href='/random-crypto.html'>random-crypto</a> if there is a need). Here is the code for "encrypt.golf":<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_52'>
<span class="Statement"> begin-handler</span> /encrypt<span class="Identifier"> public</span>
<span class="Statement">     set-string</span> str = <span class="Constant">&quot;This contains a secret code, which is Open Sesame!&quot;</span>
     <span class="Comment">// Get salt</span>
<span class="Statement">     random-string</span><span class="Type"> to</span> rs<span class="Identifier"> length</span> <span class="Constant">16</span>
     <span class="Comment">// Encrypt data</span>
<span class="Statement">     encrypt-data</span> str<span class="Type"> to</span> enc_str<span class="Identifier"> password</span> <span class="Constant">&quot;my_password&quot;</span><span class="Identifier"> salt</span> rs
<span class="Statement">     @</span>Salt used is <span class="Statement">&lt;&lt;p-out</span> rs<span class="Statement">&gt;&gt;</span>, and the encrypted string is <span class="Statement">&lt;&lt;p-out</span> enc_str<span class="Statement">&gt;&gt;</span>
     <span class="Comment">// Decrypt data</span>
<span class="Statement">     decrypt-data</span> enc_str<span class="Identifier"> password</span> <span class="Constant">&quot;my_password&quot;</span><span class="Identifier"> salt</span> rs<span class="Type"> to</span> dec_str
<span class="Statement">     p-out</span> dec_str
<span class="Statement">     @</span>
<span class="Statement"> end-handler</span></pre>
<span id=golf_copied_52 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_52' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_52, code_52, golf_copied_52)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Make the application:<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_36'>
gg <span class="Special">-q</span></pre>
<span id=golf_copied_36 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_36' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_36, code_36, golf_copied_36)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Run it a few times:<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_37'>
gg <span class="Special">-r</span> <span class="Special">--req</span><span class="Statement">=</span><span class="Statement">&quot;</span><span class="Constant">/encrypt</span><span class="Statement">&quot;</span> <span class="Special">--silent-header</span> <span class="Special">--exec</span>
gg <span class="Special">-r</span> <span class="Special">--req</span><span class="Statement">=</span><span class="Statement">&quot;</span><span class="Constant">/encrypt</span><span class="Statement">&quot;</span> <span class="Special">--silent-header</span> <span class="Special">--exec</span>
gg <span class="Special">-r</span> <span class="Special">--req</span><span class="Statement">=</span><span class="Statement">&quot;</span><span class="Constant">/encrypt</span><span class="Statement">&quot;</span> <span class="Special">--silent-header</span> <span class="Special">--exec</span></pre>
<span id=golf_copied_37 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_37' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_37, code_37, golf_copied_37)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
The result:<br/>
<div class='ncode' style='position:relative;padding-right:16px;'>
<pre id='code_56'>
Salt used is VA9agPKxL9hf3bMd, and the encrypted string is 3272aa49c9b10cb2edf5d8a5e23803a5aa153c1b124296d318e3b3ad22bc911d1c0889d195d800c2bd92153ef7688e8d1cd368dbca3c5250d456f05c81ce0fdd
This contains a secret code, which is Open Sesame!
Salt used is FeWcGkBO5hQ1uo1A, and the encrypted string is 48b97314c1bc88952c798dfde7a416180dda6b00361217ea25278791c43b34f9c2e31cab6d9f4f28eea59baa70aadb4e8f1ed0709db81dff19f24cb7677c7371
This contains a secret code, which is Open Sesame!
Salt used is nCQClR0NMjdetTEf, and the encrypted string is f19cdd9c1ddec487157ac727b2c8d0cdeb728a4ecaf838ca8585e279447bcdce83f7f95fa53b054775be1bb2de3b95f2e66a8b26b216ea18aa8b47f3d177e917
This contains a secret code, which is Open Sesame!</pre>
<span id=golf_copied_56 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_56' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_56, code_56, golf_copied_56)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
As you can see, a random salt value (16 bytes long in this case) is generated for each encryption, and the encrypted value is different each time, even though the data being encrypted was the same! This makes it difficult to crack encryption like this.<br/>
<br/>
Of course, to decrypt, you must record the salt and use it exactly as you did when encrypting. In the code here, variable "rs" holds the salt. If you store the encrypted values in the database, you'd likely store the salt right next to it.<br/>
<div class="vsub"><a id="Initialization vector"></a>Initialization vector</div>
In practice, you wouldn't use a different salt value for each message. It creates a new key every time, and that can reduce performance. And there's really no need for it: the use of salt is to make each key (even the same ones) much harder to guess. Once you've done that, you might not need to do it again, or often.<br/>
<br/>
Instead, you'd use an IV (Initialization Vector) for each message. It's usually a random string that makes same messages appear different, and increases the computational cost of cracking the password. Here is the new code for "encrypt.golf":<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_55'>
<span class="Statement"> begin-handler</span> /encrypt<span class="Identifier"> public</span>
     <span class="Comment">// Get salt</span>
<span class="Statement">     random-string</span><span class="Type"> to</span> rs<span class="Identifier"> length</span> <span class="Constant">16</span>
     <span class="Comment">// Encrypt data</span>
<span class="Statement">     start-loop</span><span class="Identifier"> repeat</span> <span class="Constant">10</span><span class="Type"> use</span> i<span class="Identifier"> start-with</span> <span class="Constant">0</span>
<span class="Statement">         random-string</span><span class="Type"> to</span> iv<span class="Identifier"> length</span> <span class="Constant">16</span>
<span class="Statement">         encrypt-data</span> <span class="Constant">&quot;The same message&quot;</span><span class="Type"> to</span> enc_str<span class="Identifier"> password</span> <span class="Constant">&quot;my_password&quot;</span><span class="Identifier"> salt</span> rs<span class="Identifier"> iterations</span> <span class="Constant">2000</span><span class="Identifier"> init-vector</span> iv<span class="Identifier"> cache</span>
<span class="Statement">         @</span>The encrypted string is <span class="Statement">&lt;&lt;p-out</span> enc_str<span class="Statement">&gt;&gt;</span>
         <span class="Comment">// Decrypt data</span>
<span class="Statement">         decrypt-data</span> enc_str<span class="Identifier"> password</span> <span class="Constant">&quot;my_password&quot;</span><span class="Identifier"> salt</span> rs<span class="Identifier"> iterations</span> <span class="Constant">2000</span><span class="Identifier"> init-vector</span> iv<span class="Type"> to</span> dec_str<span class="Identifier"> cache</span>
<span class="Statement">         p-out</span> dec_str
<span class="Statement">         @</span>
<span class="Statement">     end-loop</span>
<span class="Statement"> end-handler</span></pre>
<span id=golf_copied_55 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_55' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_55, code_55, golf_copied_55)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Make the application:<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_38'>
gg <span class="Special">-q</span></pre>
<span id=golf_copied_38 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_38' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_38, code_38, golf_copied_38)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Run it a few times:<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_39'>
gg <span class="Special">-r</span> <span class="Special">--req</span><span class="Statement">=</span><span class="Statement">&quot;</span><span class="Constant">/encrypt</span><span class="Statement">&quot;</span> <span class="Special">--silent-header</span> <span class="Special">--exec</span>
gg <span class="Special">-r</span> <span class="Special">--req</span><span class="Statement">=</span><span class="Statement">&quot;</span><span class="Constant">/encrypt</span><span class="Statement">&quot;</span> <span class="Special">--silent-header</span> <span class="Special">--exec</span>
gg <span class="Special">-r</span> <span class="Special">--req</span><span class="Statement">=</span><span class="Statement">&quot;</span><span class="Constant">/encrypt</span><span class="Statement">&quot;</span> <span class="Special">--silent-header</span> <span class="Special">--exec</span></pre>
<span id=golf_copied_39 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_39' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_39, code_39, golf_copied_39)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
The result may be:<br/>
<div class='ncode' style='position:relative;padding-right:16px;'>
<pre id='code_58'>
The encrypted string is 787909d332fd84ba939c594e24c421b00ba46d9c9a776c47d3d0a9ca6fccb1a2
The same message
The encrypted string is 7fae887e3ae469b666cff79a68270ea3d11b771dc58a299971d5b49a1f7db1be
The same message
The encrypted string is 59f95c3e4457d89f611c4f8bd53dd5fa9f8c3bbe748ed7d5aeb939ad633199d7
The same message
The encrypted string is 00f218d0bbe7b618a0c2970da0b09e043a47798004502b76bc4a3f6afc626056
The same message
The encrypted string is 6819349496b9f573743f5ef65e27ac26f0d64574d39227cc4e85e517f108a5dd
The same message
The encrypted string is a2833338cf636602881377a024c974906caa16d1f7c47c78d9efdff128918d58
The same message
The encrypted string is 04c914cd9338fcba9acb550a79188bebbbb134c34441dfd540473dd8a1e6be40
The same message
The encrypted string is 05f0d51561d59edf05befd9fad243e0737e4a98af357a9764cba84bcc55cf4d5
The same message
The encrypted string is ae594c4d6e72c05c186383e63c89d93880c8a8a085bf9367bdfd772e3c163458
The same message
The encrypted string is 2b28cdf5a67a5a036139fd410112735aa96bc341a170dafb56818dc78efe2e00
The same message</pre>
<span id=golf_copied_58 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_58' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_58, code_58, golf_copied_58)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
You can see that the same message appears different when encrypted, though when decrypted it's again the same. Of course, the password, salt, number of iterations, and init-vector must be the same for both encryption and decryption.<br/>
<br/>
Note the use of "cache" clause in encrypt-data and decrypt-data. It effectively caches the computed key (given password, salt, cipher/digest algorithms and number of iterations), so it's not computed each time through the loop. With "cache" the key is computed once, and then a different IV (in "init-vector" clause) is used for each message. <br/>
<br/>
If you want to occasionally rebuild the key, use "clear-cache" clause, which supplies a boolean. If true, the key is recomputed, otherwise it's left alone. See <a href='/encrypt-data.html'>encrypt-data</a> for more on this.<br/>
<div class="vsub"><a id="Conclusion"></a>Conclusion</div>
You have learned how to encrypt and decrypt data using different ciphers, digests, salt and IV values in Golf. You can also create a human-readable encrypted value and a binary output, as well as encrypt both strings and binary values (like documents).<br/>
<a id='article-file-manager.html'></a>
Uploading and download files in web browser is a common task in virtually any web application or service. This article shows how to do this with very little coding - in less than 100 lines of code. The database used is PostgreSQL, and the web server is Nginx.<br/>
<br/>
You will use Golf as an application server and the programming language. It will run behind the web server for performance and security, as well as to enable richer web functionality. This way end-user cannot talk to your application server directly because all such requests go through the web server, while your back-end application can talk directly to your application server for better performance.<br/>
<br/>
Assuming your currently logged-on Linux user will own the application, create a source code directory and also create Golf application named "file-manager":<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_64'>
<span class="Statement">mkdir</span> filemgr
<span class="Statement">cd</span> filemgr
gg <span class="Special">-k</span> file-manager</pre>
<span id=golf_copied_64 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_64' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_64, code_64, golf_copied_64)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Next, create PostgreSQL database named "db_file_manager", owned by currently logged-on user (i.e. passwordless setup):<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_66'>
<span class="Statement">echo</span><span class="Constant"> </span><span class="Statement">&quot;</span><span class="Constant">create user </span><span class="PreProc">$(</span><span class="Special">whoami</span><span class="PreProc">)</span><span class="Constant">;</span>
<span class="Constant">create database db_file_manager with owner=</span><span class="PreProc">$(</span><span class="Special">whoami</span><span class="PreProc">)</span><span class="Constant">;</span>
<span class="Constant">grant all on database db_file_manager to </span><span class="PreProc">$(</span><span class="Special">whoami</span><span class="PreProc">)</span><span class="Constant">;</span>
<span class="Constant">\q</span><span class="Statement">&quot;</span><span class="Constant">  </span>| sudo <span class="Special">-u</span> postgres psql</pre>
<span id=golf_copied_66 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_66' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_66, code_66, golf_copied_66)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Create database configuration file used by Golf that describes the database (it's a file "db"):<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_68'>
<span class="Statement">echo</span><span class="Constant"> </span><span class="Statement">&quot;</span><span class="Constant">user=</span><span class="PreProc">$(</span><span class="Special">whoami</span><span class="PreProc">)</span><span class="Constant"> dbname=db_file_manager</span><span class="Statement">&quot;</span><span class="Constant"> </span><span class="Statement">&gt;</span> db</pre>
<span id=golf_copied_68 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_68' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_68, code_68, golf_copied_68)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Create SQL table that will hold files currently stored on the server:<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_70'>
<span class="Statement">echo</span><span class="Constant"> </span><span class="Statement">&quot;</span><span class="Constant">create table if not exists files (fileName varchar(100), localPath varchar(300), extension varchar(10), description varchar(200), fileSize int, fileID bigserial primary key);</span><span class="Statement">&quot;</span><span class="Constant"> </span>| psql <span class="Special">-d</span> db_file_manager</pre>
<span id=golf_copied_70 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_70' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_70, code_70, golf_copied_70)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Finally, create source Golf files. First create "start.golf" file and copy and paste:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_62'>
<span class="Statement"> begin-handler</span> /start<span class="Identifier"> public</span>
<span class="Statement">    @</span>&lt;h2&gt;File Manager&lt;/h2&gt;
<span class="Statement">    @</span>To manage the uploaded files, &lt;a href=&quot;<span class="Statement">&lt;&lt;p-path</span> <span class="Constant">&quot;/list&quot;</span><span class="Statement">&gt;&gt;</span>&quot;&gt;click here.&lt;/a&gt;&lt;br/&gt;
<span class="Statement">    @</span>&lt;br/&gt;
<span class="Statement">    @</span>&lt;form action=&quot;<span class="Statement">&lt;&lt;p-path</span> <span class="Constant">&quot;/upload&quot;</span><span class="Statement">&gt;&gt;</span>&quot; method=&quot;POST&quot; enctype=&quot;multipart/form-data&quot;&gt;
<span class="Statement">    @</span>    &lt;label for=&quot;file_description&quot;&gt;File description:&lt;/label&gt;&lt;br&gt;
<span class="Statement">    @</span>    &lt;textarea name=&quot;filedesc&quot; rows=&quot;<span class="Constant">3</span>&quot; columns=&quot;<span class="Constant">50</span>&quot;&gt;&lt;/textarea&gt;&lt;br/&gt;
<span class="Statement">    @</span>    &lt;br/&gt;
<span class="Statement">    @</span>    &lt;label for=&quot;filename&quot;&gt;File:&lt;/label&gt;
<span class="Statement">    @</span>    &lt;input type=&quot;file&quot; name=&quot;file&quot; value=&quot;&quot;&gt;&lt;br&gt;&lt;br&gt;
<span class="Statement">    @</span>    &lt;input type=&quot;submit&quot; value=&quot;Submit&quot;&gt;
<span class="Statement">    @</span>&lt;/form&gt;
<span class="Statement"> end-handler</span></pre>
<span id=golf_copied_62 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_62' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_62, code_62, golf_copied_62)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Create "list.golf" file and copy and paste:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_65'>
<span class="Statement"> begin-handler</span> /list<span class="Identifier"> public</span>
<span class="Statement">     @</span>&lt;h2&gt;List of files&lt;/h2&gt;
<span class="Statement">     @</span>To add a file, &lt;a href=&quot;<span class="Statement">&lt;&lt;p-path</span> <span class="Constant">&quot;/start&quot;</span><span class="Statement">&gt;&gt;</span>&quot;&gt;click here&lt;/a&gt;&lt;br/&gt;&lt;br/&gt;
<span class="Statement">     @</span>&lt;table border=&quot;<span class="Constant">1</span>&quot;&gt;
<span class="Statement">     @</span>&lt;tr&gt;
<span class="Statement">     @</span>    &lt;td&gt;File&lt;/td&gt;&lt;td&gt;Description&lt;/td&gt;&lt;td&gt;Size&lt;/td&gt;&lt;td&gt;Show&lt;/td&gt;&lt;td&gt;Delete&lt;/td&gt;
<span class="Statement">     @</span>&lt;/tr&gt;
<span class="Statement">     run-query</span> @db= \
         <span class="Constant">&quot;select fileName, description, fileSize, fileID from files order by fileSize desc&quot;</span> \
        <span class="Type"> output</span> file_name, description<span class="Identifier"> noencode</span>, file_size, file_ID
<span class="Statement">         @</span>&lt;tr&gt;
<span class="Statement">         @</span>    &lt;td&gt;<span class="Statement">&lt;&lt;p-web</span> file_name<span class="Statement">&gt;&gt;</span>&lt;/td&gt;&lt;td&gt;<span class="Statement">&lt;&lt;p-web</span> description<span class="Statement">&gt;&gt;</span>&lt;td&gt;<span class="Statement">&lt;&lt;p-web</span> file_size<span class="Statement">&gt;&gt;</span>&lt;/td&gt;
<span class="Statement">         @</span>    &lt;td&gt;&lt;a href=&quot;<span class="Statement">&lt;&lt;p-path</span> <span class="Constant">&quot;/download&quot;</span><span class="Statement">&gt;&gt;</span>/file_id=<span class="Statement">&lt;&lt;p-url</span> file_ID<span class="Statement">&gt;&gt;</span>&quot;&gt;Show&lt;/a&gt;&lt;/td&gt;
<span class="Statement">         @</span>    &lt;td&gt;&lt;a href=&quot;<span class="Statement">&lt;&lt;p-path</span> <span class="Constant">&quot;/delete&quot;</span><span class="Statement">&gt;&gt;</span>/action=confirm/file_id=<span class="Statement">&lt;&lt;p-url</span> file_ID<span class="Statement">&gt;&gt;</span>&quot;&gt;Delete&lt;/a&gt;&lt;/td&gt;
<span class="Statement">         @</span>&lt;/tr&gt;
<span class="Statement">     end-query</span>
<span class="Statement">     @</span>&lt;/table&gt;
<span class="Statement"> end-handler</span></pre>
<span id=golf_copied_65 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_65' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_65, code_65, golf_copied_65)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Create "upload.golf" file and copy and paste:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_67'>
<span class="Statement"> begin-handler</span> /upload<span class="Identifier"> public</span>
<span class="Statement">    get-param</span> filedesc      <span class="Comment">// file description from the upload form</span>
<span class="Statement">    get-param</span> file_filename <span class="Comment">// file name</span>
<span class="Statement">    get-param</span> file_location <span class="Comment">// the path to uploaded file</span>
<span class="Statement">    get-param</span> file_size     <span class="Comment">// size in bytes</span>
<span class="Statement">    get-param</span> file_ext      <span class="Comment">// the file extension</span>
<span class="Statement">    @</span>&lt;h2&gt;Uploading file&lt;/h2&gt;
<span class="Statement">    run-query</span> @db= \
         <span class="Constant">&quot;insert into files (fileName, localPath, extension, description, fileSize) </span><span class="Special">\</span>
<span class="Constant">             values ('</span><span class="Special">%s</span><span class="Constant">', '</span><span class="Special">%s</span><span class="Constant">', '</span><span class="Special">%s</span><span class="Constant">', '</span><span class="Special">%s</span><span class="Constant">', '</span><span class="Special">%s</span><span class="Constant">')&quot;</span> \
        <span class="Identifier"> input</span> file_filename, file_location, file_ext, filedesc, file_size
<span class="Statement">    end-query</span>
<span class="Statement">    @</span>File <span class="Statement">&lt;&lt;p-web</span> file_filename<span class="Statement">&gt;&gt;</span> of size <span class="Statement">&lt;&lt;p-web</span> file_size<span class="Statement">&gt;&gt;</span> \
         is stored on server at <span class="Statement">&lt;&lt;p-web</span> file_location<span class="Statement">&gt;&gt;</span>. \
         File description is <span class="Statement">&lt;&lt;p-web</span> filedesc<span class="Statement">&gt;&gt;</span>.&lt;hr/&gt;
<span class="Statement"> end-handler</span></pre>
<span id=golf_copied_67 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_67' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_67, code_67, golf_copied_67)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Create "download.golf" file and copy and paste:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_69'>
<span class="Statement"> begin-handler</span> /download<span class="Identifier"> public</span>
<span class="Statement">     get-param</span> file_id
<span class="Statement">     run-query</span> @db= \
         <span class="Constant">&quot;select localPath,extension from files where fileID='</span><span class="Special">%s</span><span class="Constant">'&quot;</span> \
        <span class="Identifier"> input</span> file_id \
        <span class="Type"> output</span> local_path, ext \
        <span class="Type"> row-count</span> num_files
<span class="Statement">             if-true</span> ext<span class="Identifier"> equal</span> <span class="Constant">&quot;.jpg&quot;</span>
<span class="Statement">                 send-file</span> local_path<span class="Identifier"> headers content-type</span> <span class="Constant">&quot;image/jpg&quot;</span>
<span class="Statement">             else-if</span> ext<span class="Identifier"> equal</span> <span class="Constant">&quot;.pdf&quot;</span>
<span class="Statement">                 send-file</span> local_path<span class="Identifier"> headers content-type</span> <span class="Constant">&quot;application/pdf&quot;</span>
<span class="Statement">             else-if</span>
<span class="Statement">                 send-file</span> local_path<span class="Identifier"> headers content-type</span> <span class="Constant">&quot;application/octet-stream&quot;</span><span class="Identifier"> download</span>
<span class="Statement">             end-if</span>
<span class="Statement">     end-query</span>
<span class="Statement">     if-true</span> num_files<span class="Identifier"> not-equal</span> <span class="Constant">1</span>
<span class="Statement">         @</span>Cannot find this file!&lt;hr/&gt;
<span class="Statement">         exit-handler</span>
<span class="Statement">     end-if</span>
<span class="Statement"> end-handler</span></pre>
<span id=golf_copied_69 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_69' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_69, code_69, golf_copied_69)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Create "delete.golf" file and copy and paste:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_71'>
<span class="Statement"> begin-handler</span> /delete<span class="Identifier"> public</span>
<span class="Statement">    @</span>&lt;h2&gt;Delete a file&lt;/h2&gt;
<span class="Statement">    get-param</span> action
<span class="Statement">    get-param</span> file_id
<span class="Statement">    run-query</span> @db=<span class="Constant">&quot;select fileName, localPath, description  from files where fileID='</span><span class="Special">%s</span><span class="Constant">'&quot;</span><span class="Type"> output</span> file_name, local_path, desc<span class="Identifier"> input</span> file_id
<span class="Statement">         if-true</span> action<span class="Identifier"> equal</span> <span class="Constant">&quot;confirm&quot;</span> <span class="Comment">// get file information to confirm what will be deleted</span>
<span class="Statement">            @</span>Are you sure you want to delete file <span class="Statement">&lt;&lt;p-web</span> file_name<span class="Statement">&gt;&gt;</span> (<span class="Statement">&lt;&lt;p-web</span> desc<span class="Statement">&gt;&gt;</span>)? Click &lt;a href=&quot;<span class="Statement">&lt;&lt;p-path</span> <span class="Constant">&quot;/delete&quot;</span><span class="Statement">&gt;&gt;</span>?action=delete&amp;amp;file_id=<span class="Statement">&lt;&lt;p-url</span> file_id<span class="Statement">&gt;&gt;</span>&quot;&gt;Delete&lt;/a&gt; or click the browser's Back button to go back.&lt;br/&gt;
<span class="Statement">         else-if</span> action<span class="Identifier"> equal</span> <span class="Constant">&quot;delete&quot;</span>  <span class="Comment">// actual delete file, once confirmed</span>
<span class="Statement">            begin-transaction</span> @db
<span class="Statement">            run-query</span> @db= <span class="Constant">&quot;delete from files where fileID='</span><span class="Special">%s</span><span class="Constant">'&quot;</span><span class="Identifier"> input</span> file_id<span class="Type"> error</span> err<span class="Identifier"> no-loop</span>
<span class="Statement">            if-true</span> err<span class="Identifier"> not-equal</span> <span class="Constant">&quot;0&quot;</span>
<span class="Statement">                @</span>Could not delete the file (error <span class="Statement">&lt;&lt;p-web</span> err<span class="Statement">&gt;&gt;</span>)
<span class="Statement">                rollback-transaction</span> @db
<span class="Statement">            else-if</span>
<span class="Statement">                delete-file</span> local_path<span class="Type"> status</span> st
<span class="Statement">                if-true</span> st<span class="Identifier"> equal</span> GG_OKAY
<span class="Statement">                    commit-transaction</span> @db
<span class="Statement">                    @</span>File deleted. Go back to &lt;a href=&quot;<span class="Statement">&lt;&lt;p-path</span> <span class="Constant">&quot;/start&quot;</span><span class="Statement">&gt;&gt;</span>&quot;&gt;start page&lt;/a&gt;
<span class="Statement">                else-if</span>
<span class="Statement">                    rollback-transaction</span> @db
<span class="Statement">                    @</span>File could not be deleted, error <span class="Statement">&lt;&lt;p-num</span> st<span class="Statement">&gt;&gt;</span>
<span class="Statement">                end-if</span>
<span class="Statement">            end-if</span>
<span class="Statement">         else-if</span>
<span class="Statement">            @</span>Unrecognized action <span class="Statement">&lt;&lt;p-web</span> action<span class="Statement">&gt;&gt;</span>
<span class="Statement">         end-if</span>
<span class="Statement">    end-query</span>
<span class="Statement"> end-handler</span></pre>
<span id=golf_copied_71 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_71' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_71, code_71, golf_copied_71)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Make the application:<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_72'>
gg <span class="Special">-q</span> <span class="Special">--db</span><span class="Statement">=</span>postgres:db</pre>
<span id=golf_copied_72 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_72' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_72, code_72, golf_copied_72)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Run your application server:<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_73'>
mgrg file-manager</pre>
<span id=golf_copied_73 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_73' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_73, code_73, golf_copied_73)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
A web server sits in front of Golf application server, so it needs to be setup. This example is for Ubuntu, so edit Nginx config file there:<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_74'>
sudo vi /etc/nginx/sites-enabled/default</pre>
<span id=golf_copied_74 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_74' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_74, code_74, golf_copied_74)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Add this in "server {}" section ("client_max_body_size" allows for images of typical sizes to be uploaded):<br/>
<div class='ncode' style='position:relative;padding-right:16px;'>
<pre id='code_63'>
location /file-manager/ { include /etc/nginx/fastcgi_params; fastcgi_pass  unix:///var/lib/gg/file-manager/sock/sock; }
client_max_body_size 100M;</pre>
<span id=golf_copied_63 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_63' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_63, code_63, golf_copied_63)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Restart Nginx:<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_75'>
sudo systemctl restart nginx</pre>
<span id=golf_copied_75 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_75' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_75, code_75, golf_copied_75)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Go to your web browser, and enter:<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_76'>
<a href="http://">http://</a><span class="Constant">127</span>.<span class="Constant">0</span>.<span class="Constant">0</span>.<span class="Constant">1</span>/file-manager/start</pre>
<span id=golf_copied_76 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_76' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_76, code_76, golf_copied_76)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
This is what the end result looks like. Obviously, we used just bare-bone HTML, but that's not the point here at all. You can use any kind of front-end technology, the point is to demonstrate Golf as a back-end server for web applications/services.<br/>
<br/>
Here's the home screen, with the form to upload a file and a link to list of files:<br/>
<br/><div class='vimg'><img class='imgs' src='file-manager-home.png' alt='Golf'></img>
</div><br/>
Listing files:<br/>
<br/><div class='vimg'><img class='imgs' src='file-manager-list.png' alt='Golf'></img>
</div><br/>
Asking to delete a file:<br/>
<br/><div class='vimg'><img class='imgs' src='file-manager-delete.png' alt='Golf'></img>
</div><br/>
Confirmation of deletion:<br/>
<br/><div class='vimg'><img class='imgs' src='file-manager-delete-done.png' alt='Golf'></img>
</div><br/>
<a id='article-hello-world.html'></a>
<br/>
Create a directory for your Hello World application and then switch to it:<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_79'>
<span class="Statement">mkdir</span> hello-world
<span class="Statement">cd</span> hello-world</pre>
<span id=golf_copied_79 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_79' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_79, code_79, golf_copied_79)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Create the application:<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_80'>
sudo mgrg <span class="Special">-i</span> <span class="Special">-u</span> <span class="PreProc">$(</span><span class="Special">whoami</span><span class="PreProc">)</span> hello</pre>
<span id=golf_copied_80 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_80' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_80, code_80, golf_copied_80)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Create a file hello-world.golf:<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_81'>
vim hello-world.golf</pre>
<span id=golf_copied_81 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_81' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_81, code_81, golf_copied_81)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
and copy this code to it:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_77'>
<span class="Statement"> begin-handler</span> /hello-world<span class="Identifier"> public</span>
<span class="Statement">     get-param</span> name
<span class="Statement">     @</span>This is Hello World from <span class="Statement">&lt;&lt;p-out</span> name<span class="Statement">&gt;&gt;</span>
<span class="Statement"> end-handler</span></pre>
<span id=golf_copied_77 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_77' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_77, code_77, golf_copied_77)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
This service takes input parameter "name" (see <a href='/get-param.html'>get-param</a>), and then outputs it along with a greeting message (see <a href='/output-statement.html'>output-statement</a>).<br/>
<br/>
Compile the application:<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_82'>
gg <span class="Special">-q</span></pre>
<span id=golf_copied_82 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_82' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_82, code_82, golf_copied_82)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Run the application by executing this service from command line. Note passing the input parameter "name" with value "Mike":<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_83'>
gg <span class="Special">-r</span> <span class="Special">--req</span><span class="Statement">=</span><span class="Statement">&quot;</span><span class="Constant">/hello-world/name=Mike</span><span class="Statement">&quot;</span> <span class="Special">--exec</span> <span class="Special">--silent-header</span></pre>
<span id=golf_copied_83 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_83' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_83, code_83, golf_copied_83)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
The output is:<br/>
<div class='ncode' style='position:relative;padding-right:16px;'>
<pre id='code_78'>
This is Hello World from Mike</pre>
<span id=golf_copied_78 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_78' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_78, code_78, golf_copied_78)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Golf is at <a href='https://golf-lang.github.io/'>https://golf-lang.github.io/</a>.<br/>
<a id='article-hello-world-service.html'></a>
<br/>
Writing a <a href='/service.html'>service</a> is the same as writing a <a href='/command-line.html'>command-line</a> program in Gliim. Both take the same input and produce the same output, so you can test with either one to begin with.<br/>
<br/>
For that reason, create first <a href='https://golf-lang.blogspot.com/2024/09/hello-world-in-golf.html'>Hello World</a> as a command-line program.<br/>
<br/>
The only thing to do afterwards is to start up Hello World as application server:<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_85'>
mgrg hello</pre>
<span id=golf_copied_85 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_85' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_85, code_85, golf_copied_85)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Now there's a number of resident processes running, expecting clients requests. You can see those processes:<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_87'>
ps <span class="Special">-ef</span>|<span class="Statement">grep</span> hello</pre>
<span id=golf_copied_87 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_87' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_87, code_87, golf_copied_87)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
The result:<br/>
<div class='ncode' style='position:relative;padding-right:16px;'>
<pre id='code_84'>
bear       25772    2311  0 13:04 ?        00:00:00 mgrg hello
bear       25773   25772  0 13:04 ?        00:00:00 /var/lib/gg/bld/hello/hello.srvc
bear       25774   25772  0 13:04 ?        00:00:00 /var/lib/gg/bld/hello/hello.srvc
bear       25775   25772  0 13:04 ?        00:00:00 /var/lib/gg/bld/hello/hello.srvc
bear       25776   25772  0 13:04 ?        00:00:00 /var/lib/gg/bld/hello/hello.srvc
bear       25777   25772  0 13:04 ?        00:00:00 /var/lib/gg/bld/hello/hello.srvc</pre>
<span id=golf_copied_84 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_84' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_84, code_84, golf_copied_84)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
"mgrg hello" runs the Gliim process manager for application "hello". A number of ".../hello.srvc" processes are server processes that will handle service request sent to application "hello".<br/>
<br/>
Now, to test your service, you can send a request to the server from command line (by using "--service" option):<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_88'>
gg <span class="Special">-r</span> <span class="Special">--req</span><span class="Statement">=</span><span class="Statement">&quot;</span><span class="Constant">/hello-world/name=Mike</span><span class="Statement">&quot;</span> <span class="Special">--exec</span> <span class="Special">--silent-header</span> <span class="Special">--service</span></pre>
<span id=golf_copied_88 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_88' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_88, code_88, golf_copied_88)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
The above will make a request to one of the processes above, which will then reply:<br/>
<div class='ncode' style='position:relative;padding-right:16px;'>
<pre id='code_86'>
This is Hello World from Mike</pre>
<span id=golf_copied_86 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_86' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_86, code_86, golf_copied_86)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<a id='article-hello-world-service-web.html'></a>
<br/>
To access a Gliim service on the web, you need to have a web server or load balancer (think Apache, Nginx, HAProxy etc.).<br/>
<br/>
This assumes you have completed the <a href='https://golf-lang.blogspot.com/2024/09/hello-world-as-service.html'>Hello World as a Service</a>, with a service built and tested via command line.<br/>
<br/>
In this example, Nginx web server is used; edit its configuration file. For Ubuntu and similar:<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_90'>
sudo vi /etc/nginx/sites-enabled/default</pre>
<span id=golf_copied_90 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_90' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_90, code_90, golf_copied_90)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
while on Fedora and other systems it might be:<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_91'>
sudo vi /etc/nginx/nginx.conf</pre>
<span id=golf_copied_91 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_91' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_91, code_91, golf_copied_91)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Add the following in the "server {}" section:<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_92'>
location /hello/ <span class="Special">{</span> include /etc/nginx/fastcgi_params<span class="Statement">;</span> fastcgi_pass  unix:///var/lib/gg/hello/sock/sock<span class="Statement">;</span> <span class="Special">}</span></pre>
<span id=golf_copied_92 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_92' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_92, code_92, golf_copied_92)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
"hello" refers to your Hello World application. Finally, restart Nginx:<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_93'>
sudo systemctl restart nginx</pre>
<span id=golf_copied_93 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_93' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_93, code_93, golf_copied_93)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Now you can call your web service, from the web. In this case it's probably a local server (127.0.0.1) if you're doing this on your own computer. The URL would be:<br/>
<div class='ncode' style='position:relative;padding-right:16px;'>
<pre id='code_89'>
http://127.0.0.1/hello/hello-world/name=Mike</pre>
<span id=golf_copied_89 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_89' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_89, code_89, golf_copied_89)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Note the URL <a href='/request.html'>request</a> structure: first comes the application path ("/hello") followed by request path ("/hello-world") followed by URL parameters ("/name=Mike"). The result:<br/>
<a id='article-json.html'></a>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_96'>
<span class="Statement">mkdir</span> <span class="Special">-p</span> json
<span class="Statement">cd</span> json</pre>
<span id=golf_copied_96 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_96' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_96, code_96, golf_copied_96)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<br/>
Save this JSON into a file "countries.json":<br/>
<div class='ncode' style='position:relative;padding-right:16px;'>
<pre id='code_95'>
{ &quot;country&quot;: [
    { 
        &quot;name&quot;: &quot;USA&quot;,
        &quot;state&quot;: [
            { 
                &quot;name&quot;: &quot;Arizona&quot;,
                &quot;city&quot;: [
                    {
                        &quot;name&quot; : &quot;Phoenix&quot;,
                        &quot;population&quot;: 5000000
            	    } ,
                    {
                        &quot;name&quot; : &quot;Tuscon&quot;,
                        &quot;population&quot;: 1000000
            	    } 

                ]
            } ,
            { 
                &quot;name&quot;: &quot;California&quot;,
                &quot;city&quot;: [
                    {
                        &quot;name&quot; : &quot;Los Angeles&quot;,
                        &quot;population&quot;: 19000000
            	    },
                    {
                        &quot;name&quot; : &quot;Irvine&quot;
            	    }
                ]
            } 
        ] 
    } ,
    { 
        &quot;name&quot;: &quot;Mexico&quot;,
        &quot;state&quot;: [
            { 
                &quot;name&quot;: &quot;Veracruz&quot;,
                &quot;city&quot;: [
                    {
                        &quot;name&quot; : &quot;Xalapa-Enrquez&quot;,
                        &quot;population&quot;: 8000000
            	    },
                    {
                        &quot;name&quot; : &quot;C\u00F3rdoba&quot;,
                        &quot;population&quot;: 220000
            	    }
                ]
            } ,
            { 
                &quot;name&quot;: &quot;Sinaloa&quot;,
                &quot;city&quot;: [
                    {
                        &quot;name&quot; : &quot;Culiac\u00E1n Rosales&quot;,
                        &quot;population&quot;: 3000000
            	    }
                ]
            } 
        ] 
    }
    ]
}</pre>
<span id=golf_copied_95 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_95' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_95, code_95, golf_copied_95)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<br/>
Save this code to "parse-json.golf":<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_94'>
<span class="Statement"> begin-handler</span> /parse-json<span class="Identifier"> public</span>
<span class="Statement">     read-file</span> <span class="Constant">&quot;countries.json&quot;</span><span class="Type"> to</span> countries<span class="Type"> status</span> st
<span class="Statement">     if-true</span> st<span class="Identifier"> lesser-equal</span> <span class="Constant">0</span>
<span class="Statement">         @</span>Cannot read file or file empty
<span class="Statement">         exit-handler</span> -<span class="Constant">1</span>
<span class="Statement">     end-if</span>

<span class="Statement">     json-doc</span> countries<span class="Identifier"> no-enum</span><span class="Type"> status</span> st<span class="Type"> error-text</span> et<span class="Type"> error-position</span> ep<span class="Type"> to</span> json

<span class="Statement">     if-true</span> st<span class="Identifier"> not-equal</span> GG_OKAY
<span class="Statement">         @</span>Error [<span class="Statement">&lt;&lt;p-out</span> et<span class="Statement">&gt;&gt;</span>] at [<span class="Statement">&lt;&lt;p-num</span> ep<span class="Statement">&gt;&gt;</span>]
<span class="Statement">         exit-handler</span> -<span class="Constant">2</span>
<span class="Statement">     end-if</span>

<span class="Statement">     set-string</span> city_name<span class="Identifier"> unquoted</span> =<span class="Constant">&quot;country&quot;</span>.<span class="Constant">&quot;state&quot;</span>.<span class="Constant">&quot;city&quot;</span>.<span class="Constant">&quot;name&quot;</span>
<span class="Statement">     start-loop</span>
<span class="Statement">         read-json</span> json<span class="Type"> key</span> k<span class="Type"> type</span> t
<span class="Statement">         if-true</span> t<span class="Identifier"> equal</span> GG_JSON_TYPE_NONE
<span class="Statement">             break-loop</span>
<span class="Statement">         end-if</span>
<span class="Statement">         count-substring</span> city_name<span class="Identifier"> in</span> k<span class="Type"> to</span> count
<span class="Statement">         if-true</span> count<span class="Identifier"> equal</span> <span class="Constant">1</span>
<span class="Statement">             read-json</span> json<span class="Type"> value</span> v
<span class="Statement">             @</span>Value [<span class="Statement">&lt;&lt;p-out</span> v<span class="Statement">&gt;&gt;</span>]
<span class="Statement">             @</span>--------
<span class="Statement">         end-if</span>
<span class="Statement">         read-json</span> json<span class="Identifier"> next</span>
<span class="Statement">     end-loop</span>

<span class="Statement">     json-doc</span><span class="Identifier"> delete</span> json
<span class="Statement"> end-handler</span></pre>
<span id=golf_copied_94 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_94' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_94, code_94, golf_copied_94)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_97'>
gg <span class="Special">-k</span> <span class="Special">-q</span> json</pre>
<span id=golf_copied_97 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_97' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_97, code_97, golf_copied_97)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_98'>
<span class="Statement">cp</span> countries.json /var/lib/gg/json/app</pre>
<span id=golf_copied_98 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_98' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_98, code_98, golf_copied_98)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_99'>
gg <span class="Special">-r</span> <span class="Special">--req</span><span class="Statement">=</span><span class="Statement">&quot;</span><span class="Constant">/parse-json</span><span class="Statement">&quot;</span> <span class="Special">--exec</span></pre>
<span id=golf_copied_99 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_99' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_99, code_99, golf_copied_99)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<a id='article-mariadb.html'></a>
Create a directory for your project, it'll be where this example takes place. Also create Golf application "stock":<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_102'>
<span class="Statement">mkdir</span> <span class="Special">-p</span> stock-app
<span class="Statement">cd</span> stock-app
sudo mgrg <span class="Special">-i</span> <span class="Special">-u</span> <span class="PreProc">$(</span><span class="Special">whoami</span><span class="PreProc">)</span> stock</pre>
<span id=golf_copied_102 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_102' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_102, code_102, golf_copied_102)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Start MariaDB command line interface:<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_106'>
sudo mysql</pre>
<span id=golf_copied_106 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_106' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_106, code_106, golf_copied_106)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Create an application user, database and a stock table (with stock name and price):<br/>
<div class='sqlcode' style='position:relative;padding-right:16px;'>
<pre id='code_103'>
<span class="Statement">create</span> <span class="Identifier">user</span> stock_user;
<span class="Statement">create</span> database stock_db;
<span class="Statement">grant</span> <span class="Statement">all</span> <span class="Special">privileges</span> <span class="Special">on</span> stock_db.* <span class="Special">to</span> stock_user@localhost <span class="Special">identified</span> <span class="Special">by</span> <span class="Special">'</span><span class="Constant">stock_pwd</span><span class="Special">'</span>;
use stock_db
<span class="Statement">create</span> <span class="Special">table</span> <span class="Special">if</span> <span class="Statement">not</span> <span class="Statement">exists</span> stock (stock_name <span class="Type">varchar</span>(<span class="Constant">100</span>) primary key, stock_price bigint);</pre>
<span id=golf_copied_103 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_103' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_103, code_103, golf_copied_103)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Golf wants you to describe the database: the user name and password, database name, and the rest is the default setup for MariaDB database connection. So create a file "db_stock" (which is your database configuration file, one per each you use):<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_108'>
vi db_stock</pre>
<span id=golf_copied_108 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_108' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_108, code_108, golf_copied_108)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
and copy and paste this:<br/>
<div class='ncode' style='position:relative;padding-right:16px;'>
<pre id='code_101'>
[client]
user=stock_user
password=stock_pwd
database=stock_db
protocol=TCP
host=127.0.0.1
port=3306</pre>
<span id=golf_copied_101 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_101' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_101, code_101, golf_copied_101)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Now to the code. Here's the web service to insert stock name and price into the stock table - create file "add-stock.golf":<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_109'>
vi add-stock.golf</pre>
<span id=golf_copied_109 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_109' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_109, code_109, golf_copied_109)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
and copy and paste this:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_100'>
<span class="Statement"> %%</span> /add-stock<span class="Identifier"> public</span>
<span class="Statement">     @</span>&lt;html&gt;
<span class="Statement">         @</span>&lt;body&gt;
<span class="Statement">         get-param</span> name
<span class="Statement">         get-param</span> price
         <span class="Comment">// Add data to stock table, update if the stock exists</span>
<span class="Statement">         run-query</span> @db_stock = <span class="Constant">&quot;insert into stock (stock_name, stock_price) values ('</span><span class="Special">%s</span><span class="Constant">', '</span><span class="Special">%s</span><span class="Constant">') on duplicate key update stock_price='</span><span class="Special">%s</span><span class="Constant">'&quot;</span> \
            <span class="Identifier"> input</span> name, price, price<span class="Type"> error</span> err<span class="Identifier"> no-loop</span>
<span class="Statement">         if-true</span> err<span class="Identifier"> not-equal</span> <span class="Constant">&quot;0&quot;</span>
<span class="Statement">             report-error</span> <span class="Constant">&quot;Cannot update stock price, error [</span><span class="Special">%s</span><span class="Constant">]&quot;</span>, err
<span class="Statement">         end-if</span>
<span class="Statement">         @</span>&lt;div&gt;
<span class="Statement">             @</span>Stock price updated!
<span class="Statement">         @</span>&lt;/div&gt;
<span class="Statement">         @</span>&lt;/body&gt;
<span class="Statement">     @</span>&lt;/html&gt;
<span class="Statement"> %%</span></pre>
<span id=golf_copied_100 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_100' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_100, code_100, golf_copied_100)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Next is the web service to display a web page with all stock names and prices from the stock table - create file "show-stock.golf":<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_110'>
vi show-stock.golf</pre>
<span id=golf_copied_110 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_110' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_110, code_110, golf_copied_110)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
and copy and paste this:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_104'>
<span class="Statement"> %%</span> /show-stock<span class="Identifier"> public</span>
<span class="Statement">     @</span>&lt;html&gt;
<span class="Statement">         @</span>&lt;body&gt;
<span class="Statement">             @</span>&lt;table&gt;
<span class="Statement">                 @</span>&lt;tr&gt;
<span class="Statement">                     @</span>&lt;td&gt;Stock name&lt;/td&gt;
<span class="Statement">                     @</span>&lt;td&gt;Stock price&lt;/td&gt;
<span class="Statement">                 @</span>&lt;/tr&gt;
<span class="Statement">                 run-query</span> @db_stock = <span class="Constant">&quot;select stock_name, stock_price from stock&quot;</span><span class="Type"> output</span> stock_name, stock_price
<span class="Statement">                     @</span>&lt;tr&gt;
<span class="Statement">                         @</span>&lt;td&gt;
<span class="Statement">                         p-out</span> stock_name
<span class="Statement">                         @</span>&lt;/td&gt;
<span class="Statement">                         @</span>&lt;td&gt;
<span class="Statement">                         p-out</span>  stock_price
<span class="Statement">                         @</span>&lt;/td&gt;
<span class="Statement">                     @</span>&lt;/tr&gt;
<span class="Statement">                 end-query</span>
<span class="Statement">             @</span>&lt;/table&gt;
<span class="Statement">         @</span>&lt;/body&gt;
<span class="Statement">     @</span>&lt;/html&gt;
<span class="Statement"> %%</span></pre>
<span id=golf_copied_104 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_104' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_104, code_104, golf_copied_104)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
You're done! Now it's time to make your application. You need to tell Golf that your database configuration file "db_stock" is MariaDB (because you could use PostgreSQL or SQLite for instance):<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_111'>
gg <span class="Special">-q</span> <span class="Special">--db</span><span class="Statement">=</span><span class="Statement">&quot;</span><span class="Constant">mariadb:db_stock</span><span class="Statement">&quot;</span></pre>
<span id=golf_copied_111 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_111' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_111, code_111, golf_copied_111)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Test your web service. Here you'd run it as a command line program. That's neat because you can test your web services without even using a web server or a browser:<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_112'>
gg <span class="Special">-r</span> <span class="Special">--req</span><span class="Statement">=</span><span class="Statement">&quot;</span><span class="Constant">/add-stock/name=ABC/price=882</span><span class="Statement">&quot;</span> <span class="Special">--exec</span>
gg <span class="Special">-r</span> <span class="Special">--req</span><span class="Statement">=</span><span class="Statement">&quot;</span><span class="Constant">/add-stock/name=XYZ/price=112</span><span class="Statement">&quot;</span> <span class="Special">--exec</span></pre>
<span id=golf_copied_112 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_112' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_112, code_112, golf_copied_112)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
The result for each:<br/>
<div class='ncode' style='position:relative;padding-right:16px;'>
<pre id='code_105'>
Content-Type: text/html;charset=utf-8
Cache-Control: max-age=0, no-cache
Pragma: no-cache
Status: 200 OK

&lt;html&gt;
&lt;body&gt;
&lt;div&gt;
Stock price updated!
&lt;/div&gt;
&lt;/body&gt;
&lt;/html&gt;</pre>
<span id=golf_copied_105 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_105' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_105, code_105, golf_copied_105)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
And to test the list of stocks:<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_113'>
gg <span class="Special">-r</span> <span class="Special">--req</span><span class="Statement">=</span><span class="Statement">&quot;</span><span class="Constant">/show-stock</span><span class="Statement">&quot;</span> <span class="Special">--exe</span></pre>
<span id=golf_copied_113 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_113' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_113, code_113, golf_copied_113)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
The result:<br/>
<div class='ncode' style='position:relative;padding-right:16px;'>
<pre id='code_107'>
Content-Type: text/html;charset=utf-8
Cache-Control: max-age=0, no-cache
Pragma: no-cache
Status: 200 OK

&lt;html&gt;
&lt;body&gt;
&lt;table&gt;
&lt;tr&gt;
&lt;td&gt;Stock name&lt;/td&gt;
&lt;td&gt;Stock price&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;
ABC&lt;/td&gt;
&lt;td&gt;
882&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;
XYZ&lt;/td&gt;
&lt;td&gt;
112&lt;/td&gt;
&lt;/tr&gt;
&lt;/table&gt;
&lt;/body&gt;
&lt;/html&gt;</pre>
<span id=golf_copied_107 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_107' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_107, code_107, golf_copied_107)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
You can see the actual response, the way it would be sent to a browser, or an API web client, or any other kind of web client.<br/>
<a id='article-memory-safety.html'></a>
Golf is a high-performance memory-safe language. A string variable is the actual pointer to a string (whether it's a text or binary). This eliminates at least one extra memory read, making string access as fast as in C. Bytes before the string constitute the ID to a memory table entry, with additional info used by memory-safety mechanisms:<br/>
<ul><li>Length (in bytes) of the string,<br/>
</li><li>"Ref count" (Reference count), stating how many Golf variables point to string,<br/>
</li><li>Status is used to describe string, such as whether it's scope is process-wide, if it's a string literal etc,<br/>
</li><li>"Next free" points to the next available string block (if this one was freed too),<br/>
</li><li>"Data ptr" points back to the string, which is used to speed up access.</li></ul>
Memory is always null-terminated, regardless of whether it's text or binary. Here's what that looks like in a picture:<br/>
<br/><div class='vimg'><img class='imgs' src='golf-memory.png' alt='Golf'></img>
</div><br/>
Each memory block (ID+string+trailing null) is a memory allocated by standard C'd memory allocation, while memory table is a continuous block that's frequently cached to produce fast access to string's properties.<br/>
<br/>
Golf performs memory-safety check only at the entrance of a statement, meaning at input and output points (if needed). The actual implementation of any Golf statement does not use memory safety internally, because each is implemented in C as a memory safe algorithm to begin with. Because vast majority (probably close to 100%) of the functionality and computation happens inside statements, the actual cost of memory safety is very small.<br/>
<br/>
This is in contrast to general purpose memory-safe languages where libraries, modules, methods etc. are implemented in the memory-safe language and the entire implementation is subject to memory-safe instrumentation and/or other methods, such as bounds checking etc. It means that inherently such languages will perform more work doing such safe-memory checks and likely experience lower performance.<br/>
<br/>
Finally, by default memory is not deallocated immediately after it's out of scope. Rather, the freeing happens when a request is complete, because the <a href='/request.html'>request</a> is really the "unit" of work in a web-service based language like Golf. However, if your available memory is very low to begin with, you can use "--optimize-memory" flag when compiling your application with <a href='/gg.html'>gg</a> tool; this will free memory as soon as it's out of scope. Note that this option is not default for a few reasons: the overall performance is better when memory is released in a single go at the end of the request, and more frequent memory checks slow down the performance; hence use this option sparingly and only when necessary.<br/>
<a id='article-memory-safety-web.html'></a>
<br/>
Memory safety guards against software security risks and malfunctions by assuring data isn't written to or read from unintended areas of memory. It prevents leaks, and that's important for web services which are long-running processes - memory leaks usually lead to running out of memory and crashes.<br/>
<br/>
But what of the performance cost of memory safety? &nbsp;Golf is a very high level programming language. It's not like other languages, and you can intuitively experience that just by looking at the code. It feels more like speaking in English than moving bits and bytes or calling APIs. <br/>
<br/>
So when you build your web services, you won't write a lot of code, rather you'd express what you want done in a declarative language, and natively-compiled high-performance C code will do the rest. This code is designed to be memory safe, but because it's C, it avoids the penalty of being implemented in a general-purpose memory-safe language, where everything that's done, from bottom up and top down, would be subject to memory-safety checks. <br/>
<br/>
As a result, the cost incurred on memory safety is mostly in checking input data of such statements and not in the actual implementation which is where most of the performance penalty would be. In addition, the output of Golf statements is generally new immutable memory, hence it needs no checking. This means memory safety checks are truly minimal, and likely close to a theoretical minimum.<br/>
<br/>
Golf also has a light implementation of memory safety. One example is that any memory used in a request is by default released at the end of it, and not every time the memory's out of scope, which saves a lot of run-time checks. You can still have the "heavy" implementation if you're short on RAM memory, but chances are you won't need it. In short, "light" is good because the best way not to pay a heavy price for a slow memory-safe system is not to have one.<br/>
<br/>
In summary, the choices made when designing and implementing a memory safe programming language profoundly affect the resulting performance.<br/>
<a id='article-notes-postgres.html'></a>
This is a complete SaaS example (Software-as-a-Service) using PostgreSQL as a database, and Golf as a web service engine; it includes user signup/login/logout with an email and password, separate user accounts and data, and a notes application. All in about 200 lines of code!<br/>
<br/>
First create a directory for your application, where the source code will be:<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_123'>
<span class="Statement">mkdir</span> <span class="Special">-p</span> notes
<span class="Statement">cd</span> notes</pre>
<span id=golf_copied_123 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_123' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_123, code_123, golf_copied_123)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<div class="vsub"><a id="Setup Postgres database"></a>Setup Postgres database</div>
Create PostgreSQL user (with the same name as your logged on Linux user, so no password needed), and the database "db_app":<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_125'>
<span class="Statement">echo</span><span class="Constant"> </span><span class="Statement">&quot;</span><span class="Constant">create user </span><span class="PreProc">$(</span><span class="Special">whoami</span><span class="PreProc">)</span><span class="Constant">;</span>
<span class="Constant">create database db_app with owner=</span><span class="PreProc">$(</span><span class="Special">whoami</span><span class="PreProc">)</span><span class="Constant">;</span>
<span class="Constant">grant all on database db_app to </span><span class="PreProc">$(</span><span class="Special">whoami</span><span class="PreProc">)</span><span class="Constant">;</span>
<span class="Constant">\q</span><span class="Statement">&quot;</span><span class="Constant">  </span>| sudo <span class="Special">-u</span> postgres psql</pre>
<span id=golf_copied_125 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_125' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_125, code_125, golf_copied_125)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Create a database configuration file to describe your PostgreSQL database above:<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_127'>
<span class="Statement">echo</span><span class="Constant"> </span><span class="Statement">&quot;</span><span class="Constant">user=</span><span class="PreProc">$(</span><span class="Special">whoami</span><span class="PreProc">)</span><span class="Constant"> dbname=db_app</span><span class="Statement">&quot;</span><span class="Constant"> </span><span class="Statement">&gt;</span> db_app</pre>
<span id=golf_copied_127 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_127' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_127, code_127, golf_copied_127)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Create database objects we'll need - users table for application users, and notes table to hold their notes:<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_128'>
<span class="Statement">echo</span><span class="Constant"> </span><span class="Statement">&quot;</span><span class="Constant">create table if not exists notes (dateOf timestamp, noteId bigserial primary key, userId bigint, note varchar(1000));</span>
<span class="Constant">create table if not exists users (userId bigserial primary key, email varchar(100), hashed_pwd varchar(100), verified smallint, verify_token varchar(30), session varchar(100));</span>
<span class="Constant">create unique index if not exists users1 on users (email);</span><span class="Statement">&quot;</span><span class="Constant"> </span>| psql <span class="Special">-d</span> db_app</pre>
<span id=golf_copied_128 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_128' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_128, code_128, golf_copied_128)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<div class="vsub"><a id="Create Golf application"></a>Create Golf application</div>
Create application "notes" owned by your Linux user:<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_129'>
sudo mgrg <span class="Special">-i</span> <span class="Special">-u</span> <span class="PreProc">$(</span><span class="Special">whoami</span><span class="PreProc">)</span> notes</pre>
<span id=golf_copied_129 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_129' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_129, code_129, golf_copied_129)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<div class="vsub"><a id="Source code"></a>Source code</div>
This executes before any other handler in an application, making sure all requests are authorized, file "before-handler.golf":<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_130'>
vi before-handler.golf</pre>
<span id=golf_copied_130 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_130' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_130, code_130, golf_copied_130)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Copy and paste:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_121'>
<span class="Statement"> before-handler</span>
<span class="Statement">     set-param</span> displayed_logout = <span class="Constant">false</span>, is_logged_in = <span class="Constant">false</span>
<span class="Statement">     call-handler</span> <span class="Constant">&quot;/session/check&quot;</span>
<span class="Statement"> end-before-handler</span></pre>
<span id=golf_copied_121 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_121' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_121, code_121, golf_copied_121)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<br/>
<span style="font-weight:bold;">- Signup users, login, logout</span><br/>
<br/>
This is a generic session management web service that handles user creation, verification, login and logout. Create file "session.golf":<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_131'>
vi session.golf</pre>
<span id=golf_copied_131 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_131' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_131, code_131, golf_copied_131)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Copy and paste:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_124'>
 <span class="Comment">// Display link to login or signup</span>
<span class="Statement"> %%</span> /session/login-or-signup<span class="Identifier"> private</span>
<span class="Statement">     @</span>&lt;a href=&quot;<span class="Statement">&lt;&lt;p-path</span> <span class="Constant">&quot;/session/user/login&quot;</span><span class="Statement">&gt;&gt;</span>&quot;&gt;Login&lt;/a&gt; &amp;nbsp; &amp;nbsp; &lt;a href=&quot;<span class="Statement">&lt;&lt;p-path</span> <span class="Constant">&quot;/session/user/new/form&quot;</span><span class="Statement">&gt;&gt;</span>&quot;&gt;Sign Up&lt;/a&gt;&lt;hr/&gt;
<span class="Statement"> %%</span>
 <span class="Comment">// Login with email and password, and create a new session, then display home pag</span>
<span class="Statement"> %%</span> /session/login<span class="Identifier"> public</span>
<span class="Statement">     get-param</span> pwd, email
<span class="Statement">     hash-string</span> pwd<span class="Type"> to</span> hashed_pwd
<span class="Statement">     random-string</span><span class="Type"> to</span> sess_id<span class="Identifier"> length</span> <span class="Constant">30</span>
<span class="Statement">     run-query</span> @db_app = <span class="Constant">&quot;select userId from users where email='</span><span class="Special">%s</span><span class="Constant">' and hashed_pwd='</span><span class="Special">%s</span><span class="Constant">'&quot;</span><span class="Type"> output</span> sess_user_id<span class="Identifier"> :</span> email, hashed_pwd
<span class="Statement">         run-query</span> @db_app<span class="Identifier"> no-loop</span> = <span class="Constant">&quot;update users set session='</span><span class="Special">%s</span><span class="Constant">' where userId='</span><span class="Special">%s</span><span class="Constant">'&quot;</span><span class="Identifier"> input</span> sess_id, sess_user_id<span class="Type"> affected-rows</span> arows
<span class="Statement">         if-true</span> arows<span class="Identifier"> not-equal</span> <span class="Constant">1</span>
<span class="Statement">             @</span>Could not create a session. Please try again. <span class="Statement">&lt;&lt;call-handler</span> <span class="Constant">&quot;/session/login-or-signup&quot;</span><span class="Statement">&gt;&gt;</span> &lt;hr/&gt;
<span class="Statement">             exit-handler</span>
<span class="Statement">         end-if</span>
<span class="Statement">         set-cookie</span> <span class="Constant">&quot;sess_user_id&quot;</span> = sess_user_id<span class="Identifier"> path</span> <span class="Constant">&quot;/&quot;</span>, <span class="Constant">&quot;sess_id&quot;</span> = sess_id<span class="Identifier"> path</span> <span class="Constant">&quot;/&quot;</span>
<span class="Statement">         call-handler</span> <span class="Constant">&quot;/session/check&quot;</span>
<span class="Statement">         call-handler</span> <span class="Constant">&quot;/session/show-home&quot;</span>
<span class="Statement">         exit-handler</span>
<span class="Statement">     end-query</span>
<span class="Statement">     @</span>Email or password are not correct. <span class="Statement">&lt;&lt;call-handler</span> <span class="Constant">&quot;/session/login-or-signup&quot;</span><span class="Statement">&gt;&gt;</span>&lt;hr/&gt;
<span class="Statement"> %%</span>
 <span class="Comment">// Starting point of the application. Either display login form or a home page:</span>
<span class="Statement"> %%</span> /session/start<span class="Identifier"> public</span>
<span class="Statement">     get-param</span> action, is_logged_in<span class="Identifier"> type bool</span>
<span class="Statement">     if-true</span> is_logged_in<span class="Identifier"> equal</span> <span class="Constant">true</span>
<span class="Statement">         if-true</span> action<span class="Identifier"> not-equal</span> <span class="Constant">&quot;logout&quot;</span>
<span class="Statement">             call-handler</span> <span class="Constant">&quot;/session/show-home&quot;</span>
<span class="Statement">             exit-handler</span>
<span class="Statement">         end-if</span>
<span class="Statement">     end-if</span>
<span class="Statement">     call-handler</span> <span class="Constant">&quot;/session/user/login&quot;</span>
<span class="Statement"> %%</span>
 <span class="Comment">// Generic home page, you can call anything from here, in this case a list of note</span>
<span class="Statement"> %%</span> /session/show-home<span class="Identifier"> private</span>
<span class="Statement">     call-handler</span> <span class="Constant">&quot;/notes/list&quot;</span>
<span class="Statement"> %%</span>
 <span class="Comment">// Logout user and display home, which will ask to either login or signup</span>
<span class="Statement"> %%</span> /session/logout<span class="Identifier"> public</span>
<span class="Statement">     get-param</span> is_logged_in<span class="Identifier"> type bool</span>
<span class="Statement">     if-true</span> is_logged_in<span class="Identifier"> equal</span> <span class="Constant">true</span>
<span class="Statement">         get-param</span> sess_user_id
<span class="Statement">         run-query</span> @db_app = <span class="Constant">&quot;update users set session='' where userId='</span><span class="Special">%s</span><span class="Constant">'&quot;</span><span class="Identifier"> input</span> sess_user_id<span class="Identifier"> no-loop</span><span class="Type"> affected-rows</span> arows
<span class="Statement">         if-true</span> arows<span class="Identifier"> equal</span> <span class="Constant">1</span>
<span class="Statement">             set-param</span> is_logged_in = <span class="Constant">false</span>
<span class="Statement">             @</span>You have been logged out.&lt;hr/&gt;
<span class="Statement">             commit-transaction</span> @db_app
<span class="Statement">         end-if</span>
<span class="Statement">     end-if</span>
<span class="Statement">     call-handler</span> <span class="Constant">&quot;/session/show-home&quot;</span>
<span class="Statement"> %%</span>
 <span class="Comment">// Check session based on session cookie. If session cookie corresponds to the email address, the request is a part of an authorized session</span>
<span class="Statement"> %%</span> /session/check<span class="Identifier"> private</span>
<span class="Statement">     get-cookie</span> sess_user_id=<span class="Constant">&quot;sess_user_id&quot;</span>, sess_id=<span class="Constant">&quot;sess_id&quot;</span>
<span class="Statement">     set-param</span> sess_id, sess_user_id
<span class="Statement">     if-true</span> sess_id<span class="Identifier"> not-equal</span> <span class="Constant">&quot;&quot;</span>
<span class="Statement">         set-param</span> is_logged_in = <span class="Constant">false</span>
<span class="Statement">         run-query</span> @db_app = <span class="Constant">&quot;select email from users where userId='</span><span class="Special">%s</span><span class="Constant">' and session='</span><span class="Special">%s</span><span class="Constant">'&quot;</span><span class="Type"> output</span> email<span class="Identifier"> input</span> sess_user_id, sess_id<span class="Type"> row-count</span> rcount
<span class="Statement">             set-param</span> is_logged_in = <span class="Constant">true</span>
<span class="Statement">             get-param</span> displayed_logout<span class="Identifier"> type bool</span>
<span class="Statement">             if-true</span> displayed_logout<span class="Identifier"> equal</span> <span class="Constant">false</span>
<span class="Statement">                 get-param</span> action
<span class="Statement">                 if-true</span> action<span class="Identifier"> not-equal</span> <span class="Constant">&quot;logout&quot;</span>
<span class="Statement">                     @</span>Hi <span class="Statement">&lt;&lt;p-out</span> email<span class="Statement">&gt;&gt;</span>! &lt;a href=&quot;<span class="Statement">&lt;&lt;p-path</span> <span class="Constant">&quot;/session/logout&quot;</span><span class="Statement">&gt;&gt;</span>&quot;&gt;Logout&lt;/a&gt;&lt;br/&gt;
<span class="Statement">                 end-if</span>
<span class="Statement">                 set-param</span> displayed_logout = <span class="Constant">true</span>
<span class="Statement">             end-if</span>
<span class="Statement">         end-query</span>
<span class="Statement">         if-true</span> rcount<span class="Identifier"> not-equal</span> <span class="Constant">1</span>
<span class="Statement">             set-param</span> is_logged_in = <span class="Constant">false</span>
<span class="Statement">         end-if</span>
<span class="Statement">     end-if</span>
<span class="Statement"> %%</span>
 <span class="Comment">// Check that email verification token is the one actually sent to the email address</span>
<span class="Statement"> %%</span> /session/verify-signup<span class="Identifier"> public</span>
<span class="Statement">     get-param</span> code, email
<span class="Statement">     run-query</span> @db_app = <span class="Constant">&quot;select verify_token from users where email='</span><span class="Special">%s</span><span class="Constant">'&quot;</span><span class="Type"> output</span> db_verify<span class="Identifier"> :</span> email
<span class="Statement">         if-true</span>  code<span class="Identifier"> equal</span> db_verify
<span class="Statement">             @</span>Your email has been verifed. Please &lt;a href=&quot;<span class="Statement">&lt;&lt;p-path</span> <span class="Constant">&quot;/session/user/login&quot;</span><span class="Statement">&gt;&gt;</span>&quot;&gt;Login&lt;/a&gt;.
<span class="Statement">             run-query</span> @db_app<span class="Identifier"> no-loop</span> = <span class="Constant">&quot;update users set verified=1 where email='</span><span class="Special">%s</span><span class="Constant">'&quot;</span><span class="Identifier"> :</span> email
<span class="Statement">             exit-handler</span>
<span class="Statement">         end-if</span>
<span class="Statement">     end-query</span>
<span class="Statement">     @</span>Could not verify the code. Please try &lt;a href=&quot;<span class="Statement">&lt;&lt;p-path</span> <span class="Constant">&quot;/session/user/new/verify-form&quot;</span><span class="Statement">&gt;&gt;</span>&quot;&gt;again&lt;/a&gt;.
<span class="Statement">     exit-handler</span>
<span class="Statement"> %%</span>
 <span class="Comment">// Display login form that asks for email and password</span>
<span class="Statement"> %%</span> /session/user/login<span class="Identifier"> public</span>
<span class="Statement">     call-handler</span> <span class="Constant">&quot;/session/login-or-signup&quot;</span>
<span class="Statement">     @</span>Please Login:&lt;hr/&gt;
<span class="Statement">     @</span>&lt;form action=&quot;<span class="Statement">&lt;&lt;p-path</span> <span class="Constant">&quot;/session/login&quot;</span><span class="Statement">&gt;&gt;</span>&quot; method=&quot;POST&quot;&gt;
<span class="Statement">     @</span>&lt;input name=&quot;email&quot; type=&quot;text&quot; value=&quot;&quot; size=&quot;<span class="Constant">50</span>&quot; maxlength=&quot;<span class="Constant">50</span>&quot; required autofocus placeholder=&quot;Email&quot;&gt;
<span class="Statement">     @</span>&lt;input name=&quot;pwd&quot; type=&quot;password&quot; value=&quot;&quot; size=&quot;<span class="Constant">50</span>&quot; maxlength=&quot;<span class="Constant">50</span>&quot; required placeholder=&quot;Password&quot;&gt;
<span class="Statement">     @</span>&lt;button type=&quot;submit&quot;&gt;Go&lt;/button&gt;
<span class="Statement">     @</span>&lt;/form&gt;
<span class="Statement"> %%</span>
 <span class="Comment">// Display form for a new user, asking for an email and password</span>
<span class="Statement"> %%</span> /session/user/new/form<span class="Identifier"> public</span>
<span class="Statement">     @</span>Create New User&lt;hr/&gt;
<span class="Statement">     @</span>&lt;form action=&quot;<span class="Statement">&lt;&lt;p-path</span> <span class="Constant">&quot;/session/user/new/create&quot;</span><span class="Statement">&gt;&gt;</span>&quot; method=&quot;POST&quot;&gt;
<span class="Statement">     @</span>&lt;input name=&quot;email&quot; type=&quot;text&quot; value=&quot;&quot; size=&quot;<span class="Constant">50</span>&quot; maxlength=&quot;<span class="Constant">50</span>&quot; required autofocus placeholder=&quot;Email&quot;&gt;
<span class="Statement">     @</span>&lt;input name=&quot;pwd&quot; type=&quot;password&quot; value=&quot;&quot; size=&quot;<span class="Constant">50</span>&quot; maxlength=&quot;<span class="Constant">50</span>&quot; required placeholder=&quot;Password&quot;&gt;
<span class="Statement">     @</span>&lt;input type=&quot;submit&quot; value=&quot;Sign Up&quot;&gt;
<span class="Statement">     @</span>&lt;/form&gt;
<span class="Statement"> %%</span>
 <span class="Comment">// Send verification email</span>
<span class="Statement"> %%</span> /session/user/new/send-verify<span class="Identifier"> private</span>
<span class="Statement">     get-param</span> email, verify
<span class="Statement">     write-string</span> msg
<span class="Statement">         @</span>From: service@your-service.com
<span class="Statement">         @</span>To: <span class="Statement">&lt;&lt;p-out</span> email<span class="Statement">&gt;&gt;</span>
<span class="Statement">         @</span>Subject: verify your account
<span class="Statement">         @</span>
<span class="Statement">         @</span>Your verification code is: <span class="Statement">&lt;&lt;p-out</span> verify<span class="Statement">&gt;&gt;</span>
<span class="Statement">     end-write-string</span>
<span class="Statement">     exec-program</span> <span class="Constant">&quot;/usr/sbin/sendmail&quot;</span><span class="Identifier"> args</span> <span class="Constant">&quot;-i&quot;</span>, <span class="Constant">&quot;-t&quot;</span><span class="Identifier"> input</span> msg<span class="Type"> status</span> st
<span class="Statement">     if-true</span> st<span class="Identifier"> not-equal</span> <span class="Constant">0</span><span class="Identifier"> or</span> <span class="Constant">true</span><span class="Identifier"> equal</span> <span class="Constant">false</span>
<span class="Statement">         @</span>Could not send email to <span class="Statement">&lt;&lt;p-out</span> email<span class="Statement">&gt;&gt;</span>, code is <span class="Statement">&lt;&lt;p-out</span> verify<span class="Statement">&gt;&gt;</span>
<span class="Statement">         set-param</span> verify_sent = <span class="Constant">false</span>
<span class="Statement">     else-if</span>
<span class="Statement">         set-param</span> verify_sent = <span class="Constant">true</span>
<span class="Statement">     end-if</span>
<span class="Statement"> %%</span>
 <span class="Comment">// Create new user from email and password</span>
<span class="Statement"> %%</span> /session/user/new/create<span class="Identifier"> public</span>
<span class="Statement">     get-param</span> email, pwd
<span class="Statement">     hash-string</span> pwd<span class="Type"> to</span> hashed_pwd
<span class="Statement">     random-string</span><span class="Type"> to</span> verify<span class="Identifier"> length</span> <span class="Constant">5</span><span class="Identifier"> number</span>
<span class="Statement">     begin-transaction</span> @db_app
<span class="Statement">     run-query</span> @db_app<span class="Identifier"> no-loop</span> = <span class="Constant">&quot;insert into users (email, hashed_pwd, verified, verify_token, session) values ('</span><span class="Special">%s</span><span class="Constant">', '</span><span class="Special">%s</span><span class="Constant">', '0', '</span><span class="Special">%s</span><span class="Constant">', '')&quot;</span><span class="Identifier"> input</span> email, hashed_pwd, verify<span class="Type"> affected-rows</span> arows<span class="Type"> error</span> err<span class="Identifier"> on-error-continue</span>
<span class="Statement">     if-true</span> err<span class="Identifier"> not-equal</span> <span class="Constant">&quot;0&quot;</span><span class="Identifier"> or</span> arows<span class="Identifier"> not-equal</span> <span class="Constant">1</span>
<span class="Statement">         call-handler</span> <span class="Constant">&quot;/session/login-or-signup&quot;</span>
<span class="Statement">         @</span>User with this email already exists.
<span class="Statement">         rollback-transaction</span> @db_app
<span class="Statement">     else-if</span>
<span class="Statement">         set-param</span> email, verify
<span class="Statement">         call-handler</span> <span class="Constant">&quot;/session/user/new/send-verify&quot;</span>
<span class="Statement">         get-param</span> verify_sent<span class="Identifier"> type bool</span>
<span class="Statement">         if-true</span> verify_sent<span class="Identifier"> equal</span> <span class="Constant">false</span>
<span class="Statement">             rollback-transaction</span> @db_app
<span class="Statement">             exit-handler</span>
<span class="Statement">         end-if</span>
<span class="Statement">         commit-transaction</span> @db_app
<span class="Statement">         call-handler</span> <span class="Constant">&quot;/session/user/new/verify-form&quot;</span>
<span class="Statement">     end-if</span>
<span class="Statement"> %%</span>
 <span class="Comment">// Display form to enter the code emailed to user to verify the email address</span>
<span class="Statement"> %%</span> /session/user/new/verify-form<span class="Identifier"> public</span>
<span class="Statement">     get-param</span> email
<span class="Statement">     @</span>Please check your email and enter verification code here:
<span class="Statement">     @</span>&lt;form action=&quot;<span class="Statement">&lt;&lt;p-path</span> <span class="Constant">&quot;/session/verify-signup&quot;</span><span class="Statement">&gt;&gt;</span>&quot; method=&quot;POST&quot;&gt;
<span class="Statement">     @</span>&lt;input name=&quot;email&quot; type=&quot;hidden&quot; value=&quot;<span class="Statement">&lt;&lt;p-out</span> email<span class="Statement">&gt;&gt;</span>&quot;&gt;
<span class="Statement">     @</span>&lt;input name=&quot;code&quot; type=&quot;text&quot; value=&quot;&quot; size=&quot;<span class="Constant">50</span>&quot; maxlength=&quot;<span class="Constant">50</span>&quot; required autofocus placeholder=&quot;Verification code&quot;&gt;
<span class="Statement">     @</span>&lt;button type=&quot;submit&quot;&gt;Verify&lt;/button&gt;
<span class="Statement">     @</span>&lt;/form&gt;
<span class="Statement"> %%</span></pre>
<span id=golf_copied_124 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_124' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_124, code_124, golf_copied_124)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<span style="font-weight:bold;">- Notes application</span><br/>
<br/>
This is the actual application that uses above session management services. Create file "notes.golf":<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_132'>
vi notes.golf</pre>
<span id=golf_copied_132 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_132' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_132, code_132, golf_copied_132)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Copy and paste:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_126'>
 <span class="Comment">// Delete a note</span>
<span class="Statement"> %%</span> /notes/delete<span class="Identifier"> public</span>
<span class="Statement">     call-handler</span> <span class="Constant">&quot;/notes/header&quot;</span>
<span class="Statement">     get-param</span> sess_user_id, note_id
<span class="Statement">     run-query</span> @db_app = <span class="Constant">&quot;delete from notes where noteId='</span><span class="Special">%s</span><span class="Constant">' and userId='</span><span class="Special">%s</span><span class="Constant">'&quot;</span><span class="Identifier"> :</span> note_id, sess_user_id \
            <span class="Type"> affected-rows</span> arows<span class="Identifier"> no-loop</span><span class="Type"> error</span> errnote
<span class="Statement">     if-true</span> arows<span class="Identifier"> equal</span> <span class="Constant">1</span>
<span class="Statement">         @</span>Note deleted
<span class="Statement">     else-if</span>
<span class="Statement">         @</span>Could not delete note (<span class="Statement">&lt;&lt;p-out</span> errnote<span class="Statement">&gt;&gt;</span>)
<span class="Statement">     end-if</span>
<span class="Statement"> %%</span>
 <span class="Comment">// Display a form to add a note</span>
<span class="Statement"> %%</span> /notes/form-add <span class="Identifier"> public</span>
<span class="Statement">     call-handler</span> <span class="Constant">&quot;/notes/header&quot;</span>
<span class="Statement">     @</span>Add New Note
<span class="Statement">     @</span>&lt;form action=&quot;<span class="Statement">&lt;&lt;p-path</span> <span class="Constant">&quot;/notes/add&quot;</span><span class="Statement">&gt;&gt;</span>&quot; method=&quot;POST&quot;&gt;
<span class="Statement">     @</span>&lt;textarea name=&quot;note&quot; rows=&quot;<span class="Constant">5</span>&quot; cols=&quot;<span class="Constant">50</span>&quot; required autofocus placeholder=&quot;Enter Note&quot;&gt;&lt;/textarea&gt;
<span class="Statement">     @</span>&lt;button type=&quot;submit&quot;&gt;Create&lt;/button&gt;
<span class="Statement">     @</span>&lt;/form&gt;
<span class="Statement"> %%</span>
 <span class="Comment">// Add a note</span>
<span class="Statement"> %%</span> /notes/add<span class="Identifier"> public</span>
<span class="Statement">     call-handler</span> <span class="Constant">&quot;/notes/header&quot;</span>
<span class="Statement">     get-param</span> note, sess_user_id
<span class="Statement">     run-query</span> @db_app = <span class="Constant">&quot;insert into notes (dateOf, userId, note) values (now(), '</span><span class="Special">%s</span><span class="Constant">', '</span><span class="Special">%s</span><span class="Constant">')&quot;</span><span class="Identifier"> :</span> sess_user_id, note \
            <span class="Type"> affected-rows</span> arows<span class="Identifier"> no-loop</span><span class="Type"> error</span> errnote
<span class="Statement">     if-true</span> arows<span class="Identifier"> equal</span> <span class="Constant">1</span>
<span class="Statement">         @</span>Note added
<span class="Statement">     else-if</span>
<span class="Statement">         @</span>Could not add note (<span class="Statement">&lt;&lt;p-out</span> errnote<span class="Statement">&gt;&gt;</span>)
<span class="Statement">     end-if</span>
<span class="Statement"> %%</span>
 <span class="Comment">// List all notes</span>
<span class="Statement"> %%</span> /notes/list<span class="Identifier"> public</span>
<span class="Statement">     call-handler</span> <span class="Constant">&quot;/notes/header&quot;</span>
<span class="Statement">     get-param</span> sess_user_id
<span class="Statement">     run-query</span> @db_app = <span class="Constant">&quot;select dateOf, note, noteId from notes where userId='</span><span class="Special">%s</span><span class="Constant">' order by dateOf desc&quot;</span> \
            <span class="Identifier"> input</span> sess_user_id<span class="Type"> output</span> dateOf, note, noteId
<span class="Statement">         match-regex</span> <span class="Constant">&quot;</span><span class="Special">\n</span><span class="Constant">&quot;</span><span class="Identifier"> in</span> note<span class="Identifier"> replace-with</span> <span class="Constant">&quot;&lt;br/&gt;</span><span class="Special">\n</span><span class="Constant">&quot;</span><span class="Type"> result</span> with_breaks<span class="Type"> status</span> st<span class="Identifier"> cache</span>
<span class="Statement">         if-true</span> st<span class="Identifier"> equal</span> <span class="Constant">0</span>
<span class="Statement">             set-string</span> with_breaks = note
<span class="Statement">         end-if</span>
<span class="Statement">         @</span>Date: <span class="Statement">&lt;&lt;p-out</span> dateOf<span class="Statement">&gt;&gt;</span> (&lt;a href=&quot;<span class="Statement">&lt;&lt;p-path</span> <span class="Constant">&quot;/notes/ask-delete&quot;</span><span class="Statement">&gt;&gt;</span>?note_id=<span class="Statement">&lt;&lt;p-out</span> noteId<span class="Statement">&gt;&gt;</span>&quot;&gt;delete note&lt;/a&gt;)&lt;br/&gt;
<span class="Statement">         @</span>Note: <span class="Statement">&lt;&lt;p-out</span> with_breaks<span class="Statement">&gt;&gt;</span>&lt;br/&gt;
<span class="Statement">         @</span>&lt;hr/&gt;
<span class="Statement">     end-query</span>
<span class="Statement"> %%</span>
 <span class="Comment">// Display a question whether to delete a note or not</span>
<span class="Statement"> %%</span> /notes/ask-delete<span class="Identifier"> public</span>
<span class="Statement">     call-handler</span> <span class="Constant">&quot;/notes/header&quot;</span>
<span class="Statement">     get-param</span> note_id
<span class="Statement">     @</span>Are you sure you want to delete a note? Use Back button to go back,\
        or &lt;a href=&quot;<span class="Statement">&lt;&lt;p-path</span> <span class="Constant">&quot;/notes/delete&quot;</span><span class="Statement">&gt;&gt;</span>?note_id=<span class="Statement">&lt;&lt;p-out</span> note_id<span class="Statement">&gt;&gt;</span>&quot;&gt;delete note now&lt;/a&gt;.
<span class="Statement"> %%</span>
 <span class="Comment">// Check if session is authorized, and display an appropriate header</span>
<span class="Statement"> %%</span> /notes/header<span class="Identifier"> private</span>
<span class="Statement">     get-param</span> is_logged_in<span class="Identifier"> type bool</span>
<span class="Statement">     if-true</span> is_logged_in<span class="Identifier"> equal</span> <span class="Constant">false</span>
<span class="Statement">         call-handler</span> <span class="Constant">&quot;/session/login-or-signup&quot;</span>
<span class="Statement">     end-if</span>
<span class="Statement">     @</span>&lt;h1&gt;Welcome to Notes!&lt;/h1&gt;&lt;hr/&gt;
<span class="Statement">     if-true</span> is_logged_in<span class="Identifier"> equal</span> <span class="Constant">false</span>
<span class="Statement">         exit-handler</span>
<span class="Statement">     end-if</span>
<span class="Statement">     @</span>&lt;a href=&quot;<span class="Statement">&lt;&lt;p-path</span> <span class="Constant">&quot;/notes/form-add&quot;</span><span class="Statement">&gt;&gt;</span>&quot;&gt;Add Note&lt;/a&gt; &lt;a href=&quot;<span class="Statement">&lt;&lt;p-path</span> <span class="Constant">&quot;/notes/list&quot;</span><span class="Statement">&gt;&gt;</span>&quot;&gt;List Notes&lt;/a&gt;&lt;hr/&gt;
<span class="Statement"> %%</span></pre>
<span id=golf_copied_126 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_126' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_126, code_126, golf_copied_126)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<div class="vsub"><a id="Build application"></a>Build application</div>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_133'>
gg <span class="Special">-q</span> <span class="Special">--db</span><span class="Statement">=</span>postgres:db_app</pre>
<span id=golf_copied_133 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_133' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_133, code_133, golf_copied_133)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<div class="vsub"><a id="Run web services application server"></a>Run web services application server</div>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_114'>
mgrg notes</pre>
<span id=golf_copied_114 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_114' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_114, code_114, golf_copied_114)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<div class="vsub"><a id="Emailing"></a>Emailing</div>
In order to use this example, you need to be able to email local users, which means email addresses such as \"myuser@localhost\". To do that, install postfix (or sendmail). On Debian systems (like Ubuntu):<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_115'>
sudo apt install postfix
sudo systemctl start postfix</pre>
<span id=golf_copied_115 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_115' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_115, code_115, golf_copied_115)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
and on Fedora systems (like RedHat):<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_116'>
sudo dnf install postfix
sudo systemctl start postfix</pre>
<span id=golf_copied_116 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_116' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_116, code_116, golf_copied_116)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
When the application sends an email to a local user, such as &lt;OS user&gt;@localhost, then you can see the email sent at:<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_117'>
sudo vi /var/mail/<span class="Statement">&lt;</span>OS user<span class="Statement">&gt;</span></pre>
<span id=golf_copied_117 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_117' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_117, code_117, golf_copied_117)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<div class="vsub"><a id="Setup Nginx"></a>Setup Nginx</div>
A web server sits in front of Golf application server, so it needs to be setup. This example is for Ubuntu, so edit Nginx config file there:<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_118'>
sudo vi /etc/nginx/sites-enabled/default</pre>
<span id=golf_copied_118 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_118' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_118, code_118, golf_copied_118)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Add this in "server {}" section:<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_119'>
location /notes/ <span class="Special">{</span> include /etc/nginx/fastcgi_params<span class="Statement">;</span> fastcgi_pass  unix:///var/lib/gg/notes/sock/sock<span class="Statement">;</span> <span class="Special">}</span></pre>
<span id=golf_copied_119 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_119' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_119, code_119, golf_copied_119)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Restart Nginx:<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_120'>
sudo systemctl restart nginx</pre>
<span id=golf_copied_120 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_120' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_120, code_120, golf_copied_120)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<div class="vsub"><a id="You're done, run it!"></a>You're done, run it!</div>
Go to your web browser, and enter:<br/>
<div class='ncode' style='position:relative;padding-right:16px;'>
<pre id='code_122'>
http://127.0.0.1/notes/session/start</pre>
<span id=golf_copied_122 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_122' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_122, code_122, golf_copied_122)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<a id='article-remote-call.html'></a>
<br/>
A web service doesn't necessarily need to be called from "the web", meaning from the web browser or via API across the web. It can be called from another web service that's on a local network.<br/>
<br/>
Typically, when called from the web, HTTPS protocol is used to ensure safety of that call. However, local networks are usually secure, meaning no one else has access to it but your own web services.<br/>
<br/>
Thus, communication between local web services will be much faster if it doesn't use a secure protocol as it incurs the performance cost. Simple, fast and unburdened protocols, such as FastCGI, may be better.<br/>
<br/>
FastCGI is interesting because it actually carries the same information as HTTP, so a web service can operate normally, using GET/POST/etc. request methods, passing parameters in URL, request body, environment variables etc. But at the same time, FastCGI is a fast binary protocol that doesn't incur cost of safety - and for local web-service to web-service communication, that's a good thing.<br/>
<br/>
Just like HTTP, FastCGI can separate standard output from standard error, allowing both streams to be intermixed, but retrieved separately.<br/>
<br/>
Overall, inter-web-service communication can be implemented with the aforementioned protocols in a way that preserves high-level HTTP functionality innate to web services, but with overall better performance.<br/>
<a id='article-request-function.html'></a>
In Golf, there are no "functions" or "methods" as you may be used to in other languages. Any encapsulation is a request handler - you can think of it as a simple function that executes to handle a request - it can be called from an outside caller (such as web browser, web API, or from a command-line), or from another handler. <br/>
<br/>
By the same token, there are no formal parameters in a way that you may be used to. Instead, there are named parameters, basically name/value pairs, which you can set or get anywhere during the request execution. In addition, your request handler can handle the request body, environment variables, the specific request method etc. (see <a href='/request.html'>request</a>). Here though, we'll focus on parameters only.<br/>
<br/>
You'll use <a href='/set-param.html'>set-param</a> to set a parameter, which can then be obtained anywhere in the current request, including in the current handler's caller or callee. Use <a href='/get-param.html'>get-param</a> to obtain a parameter that's set with set-param. <br/>
<br/>
Parameters are very fast - they are static creatures implemented at compile time, meaning only fixed memory locations are used to store them (making for great CPU caching), and any name-based resolution is used only when necessary, and always with fast hash tables and static caching. <br/>
<div class="vsub"><a id="Calling one handler from another"></a>Calling one handler from another</div>
In this article, we'll talk about <a href='/call-handler.html'>call-handler</a> which is used to call a handler from within another handler.<br/>
<br/>
Here you'll see a few examples of passing input and output parameters between requests handlers. These handlers are both running in the same process of an application (note that application can run as many processes working in parallel). To begin, create an application:<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_136'>
<span class="Statement">mkdir</span> param
<span class="Statement">cd</span> param
gg <span class="Special">-k</span> param</pre>
<span id=golf_copied_136 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_136' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_136, code_136, golf_copied_136)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
You'll also create two source files ("local.golf" and "some.golf") a bit later with the code below.<br/>
<div class="vsub"><a id="Simple service"></a>Simple service</div>
Let's start with a simple service that provides current time based on a timezone as an input parameter (in file "local.golf"):<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_134'>
<span class="Statement"> begin-handler</span> /local/time
<span class="Statement">     get-param</span> tzone <span class="Comment">// get time zone as input parameter (i.e. </span><span class="Constant">&quot;EST&quot;</span><span class="Comment">, </span><span class="Constant">&quot;MST&quot;</span><span class="Comment">, </span><span class="Constant">&quot;PST&quot;</span><span class="Comment"> etc.)</span>
<span class="Statement">     get-time</span><span class="Type"> to</span> curr_time<span class="Identifier"> timezone</span> tzone
<span class="Statement">     @</span>&lt;div&gt;Current time is <span class="Statement">&lt;&lt;p-out</span> curr_time<span class="Statement">&gt;&gt;</span>&lt;/div&gt;
<span class="Statement"> end-handler</span></pre>
<span id=golf_copied_134 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_134' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_134, code_134, golf_copied_134)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
In this case, HTML code is output. Make the application:<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_139'>
gg <span class="Special">-q</span> <span class="Special">--public</span></pre>
<span id=golf_copied_139 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_139' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_139, code_139, golf_copied_139)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
and run it from command line (just as if it were called from a web browser):<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_141'>
gg <span class="Special">-r</span> <span class="Special">--req</span><span class="Statement">=</span><span class="Statement">&quot;</span><span class="Constant">/local/time</span><span class="Statement">&quot;</span> <span class="Special">--silent-header</span> <span class="Special">--exec</span></pre>
<span id=golf_copied_141 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_141' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_141, code_141, golf_copied_141)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
with the result something like:<br/>
<div class='ncode' style='position:relative;padding-right:16px;'>
<pre id='code_135'>
&lt;div&gt;Current time is Mon, 02 Dec 2024 16:27:03 EST&lt;/div&gt;</pre>
<span id=golf_copied_135 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_135' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_135, code_135, golf_copied_135)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<div class="vsub"><a id="Calling request from another, example #1"></a>Calling request from another, example #1</div>
In this example, one request handler calls another from within the same process of an application using <a href='/call-handler.html'>call-handler</a>.<br/>
<br/>
For instance, here's the caller code which calls the above "/local/time" service (in file "some.golf"):<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_137'>
<span class="Statement"> begin-handler</span> /some/service
<span class="Statement">     set-param</span> tzone=<span class="Constant">&quot;EST&quot;</span> <span class="Comment">// set the input parameter to be obtained by /local/time handler</span>
<span class="Statement">     call-handler</span> <span class="Constant">&quot;/local/time&quot;</span>
<span class="Statement"> end-handler</span></pre>
<span id=golf_copied_137 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_137' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_137, code_137, golf_copied_137)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
and in this case the output of the "/local/time" would simply become output of "/some/service" (and be presumably sent to a client like web browser). <br/>
<br/>
You can also, however, return the string to the caller using <a href='/set-param.html'>set-param</a> - here's the reworked "/local/time" service (in file "local.golf"):<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_140'>
<span class="Statement"> begin-handler</span> /local/time
<span class="Statement">     get-param</span> tzone
<span class="Statement">     get-time</span><span class="Type"> to</span> curr_time<span class="Identifier"> timezone</span> tzone
<span class="Statement">     set-param</span> curr_time <span class="Comment">// set the return parameter to be obtained by the caller</span>
<span class="Statement"> end-handler</span></pre>
<span id=golf_copied_140 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_140' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_140, code_140, golf_copied_140)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
The result parameter will be obtained in the caller, and then output as HTML from there (we could save it to a file instead, or whatever), so here's what it'd be now in file "some.golf":<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_142'>
<span class="Statement"> begin-handler</span> /some/service
<span class="Statement">     set-param</span> tzone=<span class="Constant">&quot;EST&quot;</span> <span class="Comment">// set input parameter used by </span><span class="Constant">&quot;/local/time&quot;</span>
<span class="Statement">     call-handler</span> <span class="Constant">&quot;/local/time&quot;</span>
<span class="Statement">     get-param</span> curr_time <span class="Comment">// get parameter that was set by </span><span class="Constant">&quot;/local/time&quot;</span>
<span class="Statement">     @</span>&lt;div&gt;Current time is <span class="Statement">&lt;&lt;p-out</span> curr_time<span class="Statement">&gt;&gt;</span>&lt;/div&gt;
<span class="Statement"> end-handler</span></pre>
<span id=golf_copied_142 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_142' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_142, code_142, golf_copied_142)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Make the project and run it:<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_143'>
gg <span class="Special">-q</span> <span class="Special">--public</span>
gg <span class="Special">-r</span> <span class="Special">--req</span><span class="Statement">=</span><span class="Statement">&quot;</span><span class="Constant">/some/service</span><span class="Statement">&quot;</span> <span class="Special">--silent-header</span> <span class="Special">--exec</span></pre>
<span id=golf_copied_143 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_143' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_143, code_143, golf_copied_143)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
with the similar end result.<br/>
<div class="vsub"><a id="Calling request from another, example #2"></a>Calling request from another, example #2</div>
Consider this handler, which checks if number is even, and returns true or false (file "check.golf"):<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_144'>
<span class="Statement"> begin-handler</span> /check/even
<span class="Statement">     get-param</span> num<span class="Identifier"> type number</span> <span class="Comment">// get input parameter</span>
<span class="Statement">     if-true</span> num<span class="Identifier"> every</span> <span class="Constant">2</span>
<span class="Statement">         set-param</span> is_even = <span class="Constant">true</span> <span class="Comment">// set output parameter</span>
<span class="Statement">     else-if</span>
<span class="Statement">         set-param</span> is_even = <span class="Constant">false</span> <span class="Comment">// set output parameter</span>
<span class="Statement">     end-if</span>
<span class="Statement"> end-handler</span></pre>
<span id=golf_copied_144 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_144' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_144, code_144, golf_copied_144)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Here's calling it from another handler: <br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_146'>
<span class="Statement"> begin-handler</span> /some/task
<span class="Statement">     set-param</span> num = <span class="Constant">23</span> <span class="Comment">// set input parameter for /check/even</span>
<span class="Statement">     call-handler</span> <span class="Constant">&quot;/check/even&quot;</span>
<span class="Statement">     get-param</span> is_even<span class="Identifier"> type bool</span> <span class="Comment">//get output from /check/even</span>
<span class="Statement">     if-true</span> is_even<span class="Identifier"> equal</span> <span class="Constant">true</span>
<span class="Statement">         @</span>EVEN
<span class="Statement">     else-if</span>
<span class="Statement">         @</span>ODD
<span class="Statement">     end-if</span>
<span class="Statement"> end-handler</span></pre>
<span id=golf_copied_146 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_146' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_146, code_146, golf_copied_146)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Make the project and run it:<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_145'>
gg <span class="Special">-q</span> <span class="Special">--public</span>
gg <span class="Special">-r</span> <span class="Special">--req</span><span class="Statement">=</span><span class="Statement">&quot;</span><span class="Constant">/some/task</span><span class="Statement">&quot;</span> <span class="Special">--silent-header</span> <span class="Special">--exec</span></pre>
<span id=golf_copied_145 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_145' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_145, code_145, golf_copied_145)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
with the result (since 23 is an odd number):<br/>
<div class='ncode' style='position:relative;padding-right:16px;'>
<pre id='code_138'>
ODD</pre>
<span id=golf_copied_138 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_138' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_138, code_138, golf_copied_138)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<div class="vsub"><a id="Conclusion"></a>Conclusion</div>
Golf is a language and a platform built to provide native web services, and everything in it is centered around the notion of handling service calls. Simple high-performance name/value constructs rule the communication between handlers on the network as well as locally. Suffice it to say, Golf's not a classic C-like programming language (though ironically is built in C and compiles to C).<br/>
<a id='article-security.html'></a>
The security of web services is a broad subject, but there are a few common topics that one should be well aware. They affect if your web application, or an API service, will be a success or not.<br/>
<br/>
Many web services provide an interface to a database. SQL injection is a very old, but nonetheless important issue. A naive implementation of SQL execution inside your code could open the door for a malicious actor to drop your tables, insert/update/delete records etc. Be sure that your back-end software is SQL injection proof.<br/>
<br/>
No matter how careful you are about writing your web service code, memory safety is an important feature to have. It avoids exploitations such as buffer overwrites or underwrites, which can cause unexpected behavior. In addition, proper memory leak detection and prevention is important, especially because back-end services typically run as long-running processes, often times weeks and months without down-time. A leak could crash such a process simply because it would run out of memory, or could no longer open a new file.<br/>
<br/>
A common issue is one of the security design. Some services are internal (or private), and some are external (or public). This means some are not meant to be called by an end-user from a web browser, or via an API from an outside caller. In fact, calling such service could be huge security hole. Imagine if you had a service that updates your internal application data. Such a service clearly must never be called by an outside actor, rather it should only be accessible to your own services acting on behalf of such outside actors. Be sure that the back-end software you use has simple and clearly-defined ability to handle such scenarios. Even if so, sometimes overly complicated security schemes can be hard to implement correctly and can be just as detrimental.<br/>
<br/>
Virtually all web services authenticate their users. It usually means using email address and password for login, as well as cookies for browser users, or tokens otherwise. Never keep passwords in plain text or even obscured, only as a one-way hash. This way even if your user database is stolen, passwords cannot be (easily) recovered. <br/>
<a id='article-server.html'></a>
Every Golf application is built as both an application server and a command-line program. You can use both, depending on what's the nature of your application. Some programs are meant to be used in scripts, or executed directly from command line. Others need to stay in memory and execute user requests as servers. The nice thing is that they both work the same, meaning you can run from command line anything that an application server does, and vice versa. This is also handy for testing; it makes writing tests for an application server much easier because you can run such tests in a plain bash script.<br/>
<br/>
What is an application server? It is a set of background resident processes. Each such process can be contacted via socket with a request, and it will provide a reply. An application server often sits behind a web server which accepts user requests, passes them to the application server, receives its reply and the passes this reply back to the user. This is a "reverse proxy" configuration. Note that this configuration, though typical, isn't a hard rule; end users can talk to an application server directly in some cases, such as on a secure local network.<br/>
<br/>
A socket is always opened by an application server and it's listening for user requests. In fact, each application server process listens on the same socket, and an incoming user request will be automatically routed by the Operating System to the first available server process. This reduces contention and makes the serving of processes very fast, without unnecessary delays.<br/>
<br/>
The socket used can be a Unix or TCP socket. Unix socket is the default one, and it works locally, meaning the caller and the application server must be on the same physical server. This is the most common scenario, and it's also the fastest method of delivering requests and replies. TCP sockets are used when the caller and the application server are on two separate machines - their performance depends on the bandwidth and especially the latency of network connection. A Unix socket is a kind of a special kernel file, while TCP socket is the the same kind of socket most network/internet programs use.<br/>
<br/>
Golf application server uses FastCGI protocol over TCP, a fast binary multiplexing protocol built for performance. It doesn't have any built-in security, and for the purpose it's used for it shouldn't have any. Essentially, standard input, output and error streams can be sent simultaneously (but retrieved separately). This makes for sturdier and more streamlined architecture because these are standard streams any program will understand. This protocol is widely supported by web languages and web servers (PHP, Apache, Nginx, HAProxy etc.).<br/>
<br/>
A Golf server process can serve an unlimited number of requests without having to be restarted and without having to spawn any new processes or threads - meaning lightening fast. Any number of such processes comprises the application server, which can then serve incoming requests truly in parallel. The number of server processes is typically determined by the number of available CPUs.<br/>
<a id='article-sqlite.html'></a>
<br/>
This example will create a service that inserts key and value into SQLite table. It's tested from command line.<br/>
<br/>
Create a directory and then switch to it:<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_149'>
<span class="Statement">mkdir</span> sqlite
<span class="Statement">cd</span> sqlite</pre>
<span id=golf_copied_149 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_149' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_149, code_149, golf_copied_149)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Setup SQLite database in file "mydata.db":<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_151'>
<span class="Statement">echo</span><span class="Constant"> </span><span class="Statement">'</span><span class="Constant">drop table if exists key_value; </span>
<span class="Constant">create table if not exists key_value (key varchar(50) primary key, value varchar(100));</span><span class="Statement">'</span><span class="Constant"> </span>| sqlite3 mydata.db</pre>
<span id=golf_copied_151 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_151' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_151, code_151, golf_copied_151)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Create configuration file "mydb" that describes the SQLite database "mydata.db":<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_152'>
<span class="Statement">echo</span><span class="Constant"> </span><span class="Statement">&quot;</span><span class="PreProc">$(</span><span class="Statement">pwd</span><span class="PreProc">)</span><span class="Constant">/mydata.db</span><span class="Statement">&quot;</span><span class="Statement">&gt;</span> mydb</pre>
<span id=golf_copied_152 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_152' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_152, code_152, golf_copied_152)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Create the application:<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_153'>
sudo mgrg <span class="Special">-i</span> <span class="Special">-u</span> <span class="PreProc">$(</span><span class="Special">whoami</span><span class="PreProc">)</span> sqlite</pre>
<span id=golf_copied_153 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_153' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_153, code_153, golf_copied_153)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Create file insert.golf:<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_154'>
vim insert.golf</pre>
<span id=golf_copied_154 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_154' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_154, code_154, golf_copied_154)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Copy and paste to it (note use of database configuration "mydb" in @mydb):<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_147'>
<span class="Statement"> %%</span> /insert<span class="Identifier"> public</span>
<span class="Statement">     get-param</span> key
<span class="Statement">     get-param</span> value
<span class="Statement">     run-query</span> @mydb = <span class="Constant">&quot;insert into key_value(key,value) values ('</span><span class="Special">%s</span><span class="Constant">', '</span><span class="Special">%s</span><span class="Constant">')&quot;</span><span class="Identifier"> input</span> key, value<span class="Type"> error</span> err<span class="Type"> affected-rows</span> aff_rows<span class="Identifier"> no-loop</span>
<span class="Statement">     @</span>Error <span class="Statement">&lt;&lt;p-out</span> err<span class="Statement">&gt;&gt;</span>, affected rows <span class="Statement">&lt;&lt;p-num</span> aff_rows<span class="Statement">&gt;&gt;</span>
<span class="Statement"> %%</span></pre>
<span id=golf_copied_147 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_147' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_147, code_147, golf_copied_147)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Compile the application - we specify that file "mydb" is describing SQLite database:<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_155'>
gg <span class="Special">-q</span> <span class="Special">--db</span><span class="Statement">=</span>sqlite:mydb</pre>
<span id=golf_copied_155 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_155' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_155, code_155, golf_copied_155)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Run the application by executing this service from command line. Note passing the input parameters "key" and "value" to it:<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_156'>
gg <span class="Special">-r</span> <span class="Special">--req</span><span class="Statement">=</span><span class="Statement">&quot;</span><span class="Constant">/insert/key=1/value=one</span><span class="Statement">&quot;</span> <span class="Special">--exec</span> <span class="Special">--silent-header</span></pre>
<span id=golf_copied_156 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_156' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_156, code_156, golf_copied_156)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
The output is:<br/>
<div class='ncode' style='position:relative;padding-right:16px;'>
<pre id='code_148'>
Error 0, affected rows 1</pre>
<span id=golf_copied_148 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_148' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_148, code_148, golf_copied_148)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Verify data inserted:<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_157'>
<span class="Statement">echo</span><span class="Constant"> -e </span><span class="Statement">&quot;</span><span class="Constant">.headers off</span><span class="Special">\n</span><span class="Constant">.mode line</span><span class="Special">\n</span><span class="Constant">select key </span><span class="Statement">&quot;</span><span class="Constant">Key</span><span class="Statement">&quot;</span><span class="Constant">, value </span><span class="Statement">&quot;</span><span class="Constant">Value</span><span class="Statement">&quot;</span><span class="Constant"> from key_value</span><span class="Statement">&quot;</span>|sqlite3 mydata.db</pre>
<span id=golf_copied_157 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_157' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_157, code_157, golf_copied_157)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
The result:<br/>
<div class='ncode' style='position:relative;padding-right:16px;'>
<pre id='code_150'>
Key = 1
Value = one</pre>
<span id=golf_copied_150 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_150' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_150, code_150, golf_copied_150)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<a id='article-statements.html'></a>
<br/>
Golf is a new programming language and framework for developing web services and web applications. The reason for Golf is to make software development easier, more reliable and to improve run-time performance. To do this, Golf is a very high level language yet it's a high performance one; those two qualities aren't usually together.<br/>
<br/>
Golf is a declarative language designed for simplicity. That means top-down approach, rather than bottom-up: it's more about describing what to do than coding it. It's a modeling language where pieces are assembled together quickly and with confidence. It's about the framework to create and deploy web services based on what they need to do from human perspective, more so than the technical one.<br/>
<br/>
Underlying Golf's functionality are industry-standard Open Source libraries, such as SSL, Curl, MariaDB and others, in addition to native Golf's. <br/>
<br/>
In extended mode, Golf is extensible with any standard libraries. You can also include C files directly in your project to compile with it. In this mode, Golf (obviously) does not guaratee memory safety, but it does not necessarily mean it's not safe either.<br/>
<br/>
Golf is very simple to work with - it doesn't even have expressions in a sense other languages do, save for very basic integer expressions (with plus, minus, divide, multiply). This is by design to reduce comlexity and improve performance. Golf's statements aim to deliver complete functionality without complicated coding, and are customizable to a great extent, statically optimized at compile-time for performance.<br/>
<a id='article-tree.html'></a>
<br/>
This is a cache server that can add, delete and query key/value pairs, with their number limited only by available memory. <br/>
<br/>
We'll use "tree" type, which is a high-performance data structure. For example, with 1,000,000 keys it will take only about 20 comparisons to find any key; and the range search is just one hop. Index is based on a modified AVL/B tree.<br/>
<br/>
Create new "tree" application first, in a new directory (you can name it anything you like):<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_160'>
<span class="Statement">mkdir</span> <span class="Special">-p</span> tree
<span class="Statement">cd</span> tree</pre>
<span id=golf_copied_160 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_160' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_160, code_160, golf_copied_160)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
The <a href='/mgrg.html'>mgrg</a> command is a Golf service manager and here it will create a new application named "tree" (it can be different from the directory it's in):<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_161'>
sudo mgrg <span class="Special">-i</span> <span class="Special">-u</span> <span class="PreProc">$(</span><span class="Special">whoami</span><span class="PreProc">)</span> tree</pre>
<span id=golf_copied_161 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_161' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_161, code_161, golf_copied_161)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Create a source code file "srv.golf":<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_162'>
vi srv.golf</pre>
<span id=golf_copied_162 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_162' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_162, code_162, golf_copied_162)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
and copy and paste this:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_158'>
<span class="Statement"> begin-handler</span> /srv<span class="Identifier"> public</span>
<span class="Statement">     do-once</span>
<span class="Statement">         new-tree</span> ind<span class="Identifier"> process-scope</span>
<span class="Statement">     end-do-once</span>
<span class="Statement">     get-param</span> op
<span class="Statement">     get-param</span> key
<span class="Statement">     get-param</span> data
<span class="Statement">     if-true</span> op<span class="Identifier"> equal</span> <span class="Constant">&quot;add&quot;</span>
<span class="Statement">         write-tree</span> ind<span class="Identifier"> key</span> (key)<span class="Identifier"> value</span> data<span class="Type"> status</span> st
<span class="Statement">         if-true</span> st<span class="Identifier"> equal</span> GG_ERR_EXIST
<span class="Statement">             @</span>Key exists [<span class="Statement">&lt;&lt;p-out</span> key<span class="Statement">&gt;&gt;</span>]
<span class="Statement">         else-if</span>
<span class="Statement">             @</span>Added [<span class="Statement">&lt;&lt;p-out</span> key<span class="Statement">&gt;&gt;</span>]
<span class="Statement">         end-if</span>
<span class="Statement">     else-if</span> op<span class="Identifier"> equal</span> <span class="Constant">&quot;delete&quot;</span>
<span class="Statement">         delete-tree</span> ind<span class="Identifier"> key</span> (key)<span class="Type"> value</span> val<span class="Type"> status</span> st
<span class="Statement">         if-true</span> st<span class="Identifier"> equal</span> GG_ERR_EXIST
<span class="Statement">             @</span>Not found [<span class="Statement">&lt;&lt;p-out</span> key<span class="Statement">&gt;&gt;</span>]
<span class="Statement">         else-if</span>
<span class="Statement">             @</span>Deleted, old value was [<span class="Statement">&lt;&lt;p-out</span> val<span class="Statement">&gt;&gt;</span>]
<span class="Statement">         end-if</span>
<span class="Statement">     else-if</span> op<span class="Identifier"> equal</span> <span class="Constant">&quot;query&quot;</span>
<span class="Statement">         read-tree</span> ind<span class="Identifier"> equal</span> (key)<span class="Type"> value</span> val<span class="Type"> status</span> st
<span class="Statement">         if-true</span> st<span class="Identifier"> equal</span> GG_ERR_EXIST
<span class="Statement">             @</span>Not found, queried [<span class="Statement">&lt;&lt;p-out</span> key<span class="Statement">&gt;&gt;</span>]
<span class="Statement">         else-if</span>
<span class="Statement">             @</span>Value [<span class="Statement">&lt;&lt;p-out</span> val<span class="Statement">&gt;&gt;</span>]
<span class="Statement">         end-if</span>
<span class="Statement">     end-if</span>
<span class="Statement"> end-handler</span></pre>
<span id=golf_copied_158 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_158' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_158, code_158, golf_copied_158)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
A service will run as a single process because each operation is handled very fast, even with large number of concurrent requests.<br/>
<div class="vsub"><a id="Build a service"></a>Build a service</div>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_163'>
gg <span class="Special">-q</span></pre>
<span id=golf_copied_163 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_163' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_163, code_163, golf_copied_163)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<div class="vsub"><a id="Run as service"></a>Run as service</div>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_164'>
mgrg <span class="Special">-w</span> <span class="Constant">1</span> tree</pre>
<span id=golf_copied_164 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_164' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_164, code_164, golf_copied_164)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
The above will start a single server process (-w 1) to serve incoming requests.<br/>
<div class="vsub"><a id="Test it"></a>Test it</div>
This is a bash test script to insert 3 keys into your cache server, query them, then delete them. Create "test_tree" file:<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_165'>
vi test_tree</pre>
<span id=golf_copied_165 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_165' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_165, code_165, golf_copied_165)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
And copy/paste the following:<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_166'>
<span class="Comment">#Add 3 key/data pairs. Key value is 0,1,2... and data values are &quot;data_0&quot;, &quot;data_1&quot;, &quot;data_2&quot; etc.</span>
<span class="Statement">for</span> i <span class="Statement">in</span> <span class="Special">{</span><span class="Constant">1</span>..<span class="Constant">3</span><span class="Special">}</span>; <span class="Statement">do</span>
   gg <span class="Statement">-r</span> <span class="Special">--req</span><span class="Statement">=</span><span class="Statement">&quot;</span><span class="Constant">/srv/op=add/key=</span><span class="PreProc">$i</span><span class="Constant">/data=data_</span><span class="PreProc">$i</span><span class="Statement">&quot;</span> <span class="Special">--exec</span> <span class="Special">--service</span> <span class="Special">--app</span><span class="Statement">=</span><span class="Statement">&quot;</span><span class="Constant">/tree</span><span class="Statement">&quot;</span> <span class="Special">--silent-header</span>
<span class="Statement">done</span>
<span class="Statement">echo</span><span class="Constant"> </span><span class="Statement">&quot;</span><span class="Constant">Keys added</span><span class="Statement">&quot;</span>

<span class="Comment">#Query all 3 keys and check that values retrieved are the correct ones.</span>
<span class="Statement">for</span> i <span class="Statement">in</span> <span class="Special">{</span><span class="Constant">1</span>..<span class="Constant">3</span><span class="Special">}</span>; <span class="Statement">do</span>
   gg <span class="Statement">-r</span> <span class="Special">--req</span><span class="Statement">=</span><span class="Statement">&quot;</span><span class="Constant">/srv/op=query/key=</span><span class="PreProc">$i</span><span class="Statement">&quot;</span> <span class="Special">--exec</span> <span class="Special">--service</span> <span class="Special">--app</span><span class="Statement">=</span><span class="Statement">&quot;</span><span class="Constant">/tree</span><span class="Statement">&quot;</span> <span class="Special">--silent-header</span>
<span class="Statement">done</span>
<span class="Statement">echo</span><span class="Constant"> </span><span class="Statement">&quot;</span><span class="Constant">Keys queried</span><span class="Statement">&quot;</span>

<span class="Comment">#Delete all 3 keys</span>
<span class="Identifier">ERR</span>=<span class="Statement">&quot;</span><span class="Constant">0</span><span class="Statement">&quot;</span>
<span class="Statement">for</span> i <span class="Statement">in</span> <span class="Special">{</span><span class="Constant">1</span>..<span class="Constant">3</span><span class="Special">}</span>; <span class="Statement">do</span>
   gg <span class="Statement">-r</span> <span class="Special">--req</span><span class="Statement">=</span><span class="Statement">&quot;</span><span class="Constant">/srv/op=delete/key=</span><span class="PreProc">$i</span><span class="Statement">&quot;</span> <span class="Special">--exec</span> <span class="Special">--service</span> <span class="Special">--app</span><span class="Statement">=</span><span class="Statement">&quot;</span><span class="Constant">/tree</span><span class="Statement">&quot;</span> <span class="Special">--silent-header</span>
<span class="Statement">done</span>
<span class="Statement">echo</span><span class="Constant"> </span><span class="Statement">&quot;</span><span class="Constant">Keys deleted</span><span class="Statement">&quot;</span></pre>
<span id=golf_copied_166 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_166' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_166, code_166, golf_copied_166)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Make sure it's executable and run it:<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_167'>
<span class="Statement">chmod</span> <span class="Special">+x</span> test_tree
./test_tree</pre>
<span id=golf_copied_167 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_167' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_167, code_167, golf_copied_167)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
The result is this:<br/>
<div class='ncode' style='position:relative;padding-right:16px;'>
<pre id='code_159'>
Added [1]
Added [2]
Added [3]
Keys added
Value [data_1]
Value [data_2]
Value [data_3]
Keys queried
Deleted, old value was [data_1]
Deleted, old value was [data_2]
Deleted, old value was [data_3]
Keys deleted</pre>
<span id=golf_copied_159 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_159' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_159, code_159, golf_copied_159)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<a id='article-tree-web.html'></a>
<br/>
This example shows Apache as the front-end (or "reverse proxy") for <a href='https://golf-lang.blogspot.com/2024/10/cache-server-as-web-service-in-30-lines.html'>cache server</a> - it's assumed you've completed it first. Three steps to setting up Apache quickly:<br/>
<ol><li><span style="font-weight:bold;">Enable FastCGI proxy</span> used to communicate with Golf services - this is one time only:<br/>
<ul><li>If you use Ubuntu and similar:<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_169'>
sudo a2enmod proxy
sudo a2enmod proxy_fcgi</pre>
<span id=golf_copied_169 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_169' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_169, code_169, golf_copied_169)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
</li><li>If you use Fedora and similar:<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_171'>
sudo vi /etc/httpd/conf/httpd.conf</pre>
<span id=golf_copied_171 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_171' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_171, code_171, golf_copied_171)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
and if you use OpenSUSE:<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_173'>
sudo vi /etc/httpd/conf/httpd.conf</pre>
<span id=golf_copied_173 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_173' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_173, code_173, golf_copied_173)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Add the following at the end of httpd.conf:<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_175'>
LoadModule proxy_module modules/mod_proxy.so
LoadModule proxy_fcgi_module modules/mod_proxy_fcgi.so</pre>
<span id=golf_copied_175 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_175' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_175, code_175, golf_copied_175)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
</li></ul>
</li><li><span style="font-weight:bold;">Edit Apache configuration file:</span><br/>
<ul><li>If you use Debian (such as Ubuntu):<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_176'>
sudo vi /etc/apache2/apache2.conf</pre>
<span id=golf_copied_176 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_176' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_176, code_176, golf_copied_176)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
</li>
<li>If you use Fedora (such as RedHat), Archlinux:<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_177'>
sudo vi /etc/httpd/conf/httpd.conf</pre>
<span id=golf_copied_177 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_177' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_177, code_177, golf_copied_177)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
</li>
<li>If you use OpenSUSE:<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_178'>
sudo vi /etc/apache2/httpd.conf</pre>
<span id=golf_copied_178 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_178' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_178, code_178, golf_copied_178)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
</li></ul>
Add this to the end of the configuration file - note "tree" is the application name you created in the above example:<br/>
<div class='ncode' style='position:relative;padding-right:16px;'>
<pre id='code_168'>
ProxyPass &quot;/tree/&quot; unix:///var/lib/gg/tree/sock/sock|fcgi://localhost/tree</pre>
<span id=golf_copied_168 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_168' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_168, code_168, golf_copied_168)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
</li><li><span style="font-weight:bold;">Restart Apache</span>. <br/>
<ul><li>On Debian systems (like Ubuntu) or OpenSUSE:<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_179'>
sudo systemctl restart apache2</pre>
<span id=golf_copied_179 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_179' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_179, code_179, golf_copied_179)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
</li><li>On Fedora systems (like RedHat) and Arch Linux:<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_180'>
sudo systemctl restart httpd</pre>
<span id=golf_copied_180 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_180' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_180, code_180, golf_copied_180)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
</li></ul>
</li></ol><span style="font-weight:bold;">- Test web service</span><br/>
<br/>
Now you can call your web service, from the web. In this case it's probably a local server (127.0.0.1) if you're doing this on your own computer. The URLs would be, for example to add, query and delete a key/value pair:<br/>
<div class='ncode' style='position:relative;padding-right:16px;'>
<pre id='code_170'>
http://127.0.0.1/tree/srv/op=add/key=1/data=d_1</pre>
<span id=golf_copied_170 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_170' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_170, code_170, golf_copied_170)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<div class='ncode' style='position:relative;padding-right:16px;'>
<pre id='code_172'>
http://127.0.0.1/tree/srv/op=query/key=1</pre>
<span id=golf_copied_172 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_172' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_172, code_172, golf_copied_172)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<div class='ncode' style='position:relative;padding-right:16px;'>
<pre id='code_174'>
http://127.0.0.1/tree/srv/op=delete/key=1</pre>
<span id=golf_copied_174 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_174' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_174, code_174, golf_copied_174)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Note the URL <a href='/request.html'>request</a> structure: first comes the application path ("/tree") followed by request path ("/srv") followed by URL parameters (such as "/op=add/key=1/data=d_1"). The result in web browser are messages informing you that the key was added, queried or deleted.<br/>
<a id='article-vim-coloring.html'></a>
<br/>
Golf installation comes with a Vim module for highlighting Golf code. After installing Golf, run this to install the Vim module:<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_181'>
gg <span class="Special">-m</span></pre>
<span id=golf_copied_181 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_181' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_181, code_181, golf_copied_181)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
The default color scheme looks like this:<br/>
To change color scheme, type ":colorscheme " in command mode, then press Tab to see available color schemes. Press Enter to choose one. For instance, in 'darkblue' color scheme, it may look like:<br/>
To make the change permanent, edit file ".vimrc" in home directory:<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_182'>
vi ~/.vimrc</pre>
<span id=golf_copied_182 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_182' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_182, code_182, golf_copied_182)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
and append line:<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_183'>
colorscheme darkblue</pre>
<span id=golf_copied_183 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_183' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_183, code_183, golf_copied_183)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<a id='article-web-services-how-works.html'></a>
<br/>
<a id='article-what-is-golf.html'></a>
<br/>
Golf is a new programming language and framework for developing web services and web applications. It is: <br/>
<ul><li>declarative language designed for simplicity,<br/>
</li><li>memory-safe,<br/>
</li><li>functional statically-typed,<br/>
</li><li>high-performance compiled language, designed to create fast and small native executables without interpreters or p-code, <br/>
</li><li>built on top of industry-standard Open Source libraries, such as SSL, Curl, MariaDB and others, in addition to native Golf's, <br/>
</li><li>extensible with any standard libraries,<br/>
</li><li>very simple to work with by design to reduce comlexity and improve performance.</li></ul>
Golf is at <a href='https://golf-lang.github.io/'>https://golf-lang.github.io/</a>.<br/>
<a id='article-what-is-golf-long.html'></a>
<br/>
Golf is a new programming language and framework for developing web services and web applications. The reason for Golf is to make software development easier, more reliable and to improve run-time performance. To do this, Golf is a very high level language yet it's a high performance one; those two qualities aren't usually together.<br/>
<br/>
Golf is a declarative language designed for simplicity. That means top-down approach, rather than bottom-up: it's more about describing what to do than coding it. It's a modeling language where pieces are assembled together quickly and with confidence. It's about the framework to create and deploy web services with less effort and faster.<br/>
<br/>
Golf is a memory-safe language. Your program is safe from overwriting memory it shouldn't overwrite, and it won't leave dangling pointers hanging around. Golf is a static-typed language with only three basic types (strings, numbers and boolean) and (currently) the following structured types: service, message, array, hash, tree, tree-cursor, fifo, lifo, list, split-string and file.<br/>
<br/>
Golf is also a high-performance compiled language, designed to create fast and small native executables without interpreters or p-code. <br/>
<br/>
Memory safe languages often suffer performance bottlenecks due to the fact that range checking, garbage collection and other memory management techniques do take their toll.<br/>
<br/>
Golf is designed from ground up to alleviate these issues. Firstly, the best way not to lose performance on expensive memory management is not to have one. By default, Golf has a light-weight memory safety implementation, and you can expand it if your system is short on memory. In addition, its run-time libraries are written entirely in C and the run-time overhead comes at the input and output of Golf statements, and not within libraries itself. Since libraries do most of the run-time work, the impact of imposing memory safety is minimal. <br/>
<br/>
Underlying Golf's functionality are industry-standard Open Source libraries, such as SSL, Curl, MariaDB and others, in addition to native Golf's. <br/>
<br/>
In extended mode, Golf is extensible with any standard libraries (with C interop), which means most programming languages (including C/C++, Rust etc.). In this mode, Golf (obviously) does not guaratee memory safety, but it does not necessarily mean it's not safe either.<br/>
<br/>
Golf is very simple to work with - it doesn't even have expressions in a sense other languages do, save for very basic integer expressions (with plus, minus, divide, multiply). This is by design to reduce comlexity and improve performance. Golf's statements aim to deliver complete functionality without complicated coding, and are customizable to a great extent, statically optimized at compile-time for performance.<br/>
<a id='article-what-is-web-service.html'></a>
<br/>
Web service is code that responds to a request and provides a reply over HTTP protocol. It doesn't need to work over the web, despite its name. You can run a web service locally on a server or on a local network. You can even run a web service from command line. In fact, that's an easy way to test them.<br/>
<br/>
The input comes from an HTTP request - this means via URL parameters plus (optional) request body. <br/>
<br/>
The parameters could be in URL's path (such as "/a=b/c=d/...") or in its query string (such as "?a=b&amp;c=d...") or both - this data is typically limited in size to 2KB. Additional parameters could be appended to the request body - this is for instance how files are uploaded in an HTML form. &nbsp; <br/>
<br/>
Request body itself can be any data of any size really - web services typically have an adjustable size limit for this data just to avoid mistakenly (or maliciously) huge ones. A request body could contain for example a JSON document, or some other kind of data.<br/>
<br/>
The output of web service can be HTML code, JSON, XML, an image such as JPG or just about anything really. It's up to the caller of web service to interpret it. One such caller is web browser, another one could be API from an application etc.<br/>
<br/>
What's the difference between a web application and a web service? Well, technically a web application should be a collection of web services, which are typically more basic service providers. That's why web services are often used as endpoints for remote APIs. They generally have a well defined input and output and are not too big. They serve a specialized purpose most of the time. <br/>
<a id='before-handler.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:right;background-color:white;'><a href='https://golf-lang.com' style='border-bottom:0px'><img src='https://golf-lang.com/golf.png'/></a></div><div class='vhub' style='margin-top:10px;'>&nbsp;Before handler</div><hr/><span style="font-weight:bold;">Purpose</span>: Execute your code before a request is handled.<br/>
<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_184'>
<span class="Statement"> before-handler</span>
<span class="Statement"> .</span>..
<span class="Statement"> end-before-handler</span></pre>
<span id=golf_copied_184 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_184' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_184, code_184, golf_copied_184)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Every Golf request goes through a request dispatcher (see <a href='/request.html'>request</a>()), which is auto-generated. In order to specify your code to execute before a request is handled, create source file "before-handler.golf" and implement code that starts with "before-handler" and ends with "end-before-handler", which will be automatically picked up and compiled with your application. <br/>
<br/>
If no request executes (for example if your application does not handle a given <a href='/request.html'>request</a>), before-handler handler does not execute either. <br/>
<div class="vsub"><a id="Examples"></a>Examples</div>
Here is a simple implementation of before-handler handler that just outputs "Getting Started!!":<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_185'>
<span class="Statement"> before-handler</span>
<span class="Statement">     @</span>Getting Started!!
<span class="Statement"> end-before-handler</span></pre>
<span id=golf_copied_185 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_185' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_185, code_185, golf_copied_185)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<!--BEFSAL13--><div class="vsub"><a id="See also"></a>See also</div>
 <a name='Service processing'></a><span style="font-weight:bold;">Service processing</span><br/>
<a href='/after-handler.html'>after-handler</a> &nbsp;<br/>
<a href='/before-handler.html'>before-handler</a> &nbsp;<br/>
<a href='/begin-handler.html'>begin-handler</a> &nbsp;<br/>
<a href='/call-handler.html'>call-handler</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='/documentation.html'>documentation</a><br/>
<a id='begin-handler.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:right;background-color:white;'><a href='https://golf-lang.com' style='border-bottom:0px'><img src='https://golf-lang.com/golf.png'/></a></div><div class='vhub' style='margin-top:10px;'>&nbsp;Begin handler</div><hr/><span style="font-weight:bold;">Purpose</span>: Define a request handler.<br/>
<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_186'>
<span class="Statement"> begin-handler</span> &lt;request path&gt; [<span class="Identifier"> private</span> |<span class="Identifier"> public</span> ]
     &lt;any code&gt;
<span class="Statement"> end-handler</span></pre>
<span id=golf_copied_186 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_186' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_186, code_186, golf_copied_186)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
begin-handler starts the implementation of a <a href='/request.html'>request</a> handler for &lt;request path&gt; (see <a href='/request.html'>request</a>), which is &lt;any code&gt; up to end-handler. &lt;request path&gt; is not quoted.<br/>
<br/>
A &lt;request path&gt; is a path consisting of any number of path segments. A request path can have alphanumeric characters, hyphens and forward slashes, and can start only with a forward slash.<br/>
<br/>
For example, a &lt;request path&gt; can be "/wine-items" or "/items/wine" etc. In general, it represents the nature of a request, such as an action on an object, a resource path handled by it etc. There is no specific way to interpret a request path, and you can construct it in a way that works for you.<br/>
<br/>
The source ".golf" file name that implements a given begin-handler matches its path and name, fully or partially (see <a href='/request.html'>request</a>). For example, &lt;request path&gt; of "/items/wine" might be implemented in &nbsp;"items/wine.golf" file (meaning in file "wine.golf" in subdirectory "items").<br/>
<br/>
Note that you can also use "%%" instead of either begin-handler or end-handler or both. <br/>
<div class="vsub"><a id="Security of request calls"></a>Security of request calls</div>
If "public" clause is used, then a handler can be called from an outside caller, be it a web browser, some web service, <a href='/service.html'>service</a> call or <a href='/command-line.html'>command-line</a> program. <br/>
<br/>
If "private" clause is used, then a handler cannot be called from an outside caller; it can only be called from another handler by using <a href='/call-handler.html'>call-handler</a> statement. <br/>
<br/>
If neither "public" nor "private" is used, then the default is "private". This default mechanism automatically guards direct execution by outside callers of all handlers not marked "public"; it provides automatic safety guard. <br/>
<br/>
You can change this default behavior with "--public" option in <a href='/gg.html'>gg</a>, in which case the default is "public". This is useful if either all request handlers should be public, or if only a handful fixed ones are private.<br/>
<div class="vsub"><a id="Examples"></a>Examples</div>
The following begin-handler is implemented in file "items/wines/red-wine.golf":<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_187'>
<span class="Statement"> begin-handler</span>  /items/wines/red-wine<span class="Identifier"> public</span>
<span class="Statement">     @</span>This is a request handler to display a list of red wines!
<span class="Statement"> end-handler</span></pre>
<span id=golf_copied_187 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_187' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_187, code_187, golf_copied_187)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Another way to write this is:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_188'>
<span class="Statement"> %%</span>  /items/wines/red-wine<span class="Identifier"> public</span>
<span class="Statement">     @</span>This is a request handler to display a list of red wines!
<span class="Statement"> %%</span></pre>
<span id=golf_copied_188 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_188' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_188, code_188, golf_copied_188)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<!--BEFSAL13--><div class="vsub"><a id="See also"></a>See also</div>
 <a name='Service processing'></a><span style="font-weight:bold;">Service processing</span><br/>
<a href='/after-handler.html'>after-handler</a> &nbsp;<br/>
<a href='/before-handler.html'>before-handler</a> &nbsp;<br/>
<a href='/begin-handler.html'>begin-handler</a> &nbsp;<br/>
<a href='/call-handler.html'>call-handler</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='/documentation.html'>documentation</a><br/>
<a id='begin-transaction.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:right;background-color:white;'><a href='https://golf-lang.com' style='border-bottom:0px'><img src='https://golf-lang.com/golf.png'/></a></div><div class='vhub' style='margin-top:10px;'>&nbsp;Begin transaction</div><hr/><span style="font-weight:bold;">Purpose</span>: Begins database transaction.<br/>
<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_189'>
<span class="Statement"> begin-transaction</span> [ @&lt;database&gt; ] \
     [<span class="Identifier"> on-error-continue</span> |<span class="Identifier"> on-error-exit</span> ] \
     [<span class="Type"> error</span> &lt;error&gt; ] [<span class="Type"> error-text</span> &lt;error text&gt; ] \
     [<span class="Identifier"> options</span> &lt;options&gt; ]</pre>
<span id=golf_copied_189 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_189' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_189, code_189, golf_copied_189)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
This statement begins a database transaction. <br/>
<br/>
&lt;options&gt; (in "options" clause) is any additional options to send to database you wish to supply for this functionality.<br/>
<br/>
Once you start a transaction with <a href='/begin-transaction.html'>begin-transaction</a>, you must either commit it with <a href='/commit-transaction.html'>commit-transaction</a> or rollback with <a href='/rollback-transaction.html'>rollback-transaction</a>. If you do neither, your transaction will be rolled back once the <a href='/request.html'>request</a> has completed and your program will stop with an error message. This is because opening a transaction and leaving without committing or a rollback is a bug in your program. &nbsp;<br/>
<br/>
You must use begin-transaction, commit-transaction and rollback-transaction instead of calling this functionality through <a href='/run-query.html'>run-query</a>.<br/>
<div class="vsub"><a id="Database"></a>Database</div>
&lt;database&gt; is specified in "@" clause and is the name of the <a href='/database-config-file.html'>database-config-file</a>. If ommited, your program must use exactly one database (see --db option in <a href='/gg.html'>gg</a>).<br/>
<div class="vsub"><a id="Error handling"></a>Error handling</div>
The error code is available in &lt;error&gt; variable in "error" clause - this code is always "0" if successful. The &lt;error&gt; code may or may not be a number but is always returned as a string value. In case of error, error text is available in "error-text" clause in &lt;error text&gt; string.<br/>
<br/>
"on-error-continue" clause specifies that <a href='/request.html'>request</a> processing will continue in case of an error, whereas "on-error-exit" clause specifies that it will exit. This setting overrides database-level <a href='/db-error.html'>db-error</a> for this specific statement only. If you use "on-error-continue", be sure to check the error code.<br/>
<br/>
Note that if database connection was lost, and could not be reestablished, the request will error out (see <a href='/error-handling.html'>error-handling</a>).<br/>
<div class="vsub"><a id="Examples"></a>Examples</div>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_190'>
<span class="Statement"> begin-transaction</span> @mydb
<span class="Statement"> run-query</span> @mydb=<span class="Constant">&quot;insert into employee (name, dateOfHire) values ('</span><span class="Special">%s</span><span class="Constant">', now())&quot;</span><span class="Identifier"> input</span> <span class="Constant">&quot;Terry&quot;</span><span class="Identifier"> no-loop</span>
<span class="Statement"> commit-transaction</span> @mydb</pre>
<span id=golf_copied_190 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_190' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_190, code_190, golf_copied_190)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<!--BEFSAL13--><div class="vsub"><a id="See also"></a>See also</div>
 <a name='Database'></a><span style="font-weight:bold;">Database</span><br/>
<a href='/begin-transaction.html'>begin-transaction</a> &nbsp;<br/>
<a href='/commit-transaction.html'>commit-transaction</a> &nbsp;<br/>
<a href='/current-row.html'>current-row</a> &nbsp;<br/>
<a href='/database-config-file.html'>database-config-file</a> &nbsp;<br/>
<a href='/db-error.html'>db-error</a> &nbsp;<br/>
<a href='/mariadb-database.html'>mariadb-database</a> &nbsp;<br/>
<a href='/postgresql-database.html'>postgresql-database</a> &nbsp;<br/>
<a href='/rollback-transaction.html'>rollback-transaction</a> &nbsp;<br/>
<a href='/run-query.html'>run-query</a> &nbsp;<br/>
<a href='/sqlite-database.html'>sqlite-database</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='/documentation.html'>documentation</a><br/>
<a id='break-loop.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:right;background-color:white;'><a href='https://golf-lang.com' style='border-bottom:0px'><img src='https://golf-lang.com/golf.png'/></a></div><div class='vhub' style='margin-top:10px;'>&nbsp;Break loop</div><hr/><span style="font-weight:bold;">Purpose</span>: Exit a loop.<br/>
<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_191'>
<span class="Statement"> break-loop</span></pre>
<span id=golf_copied_191 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_191' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_191, code_191, golf_copied_191)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
break-loop will exit a loop between <a href='/start-loop.html'>start-loop</a> and end-loop, <a href='/run-query.html'>run-query</a> and end-query, or <a href='/read-line.html'>read-line</a> and end-read-line statements. Execution continues right after the end of the loop.<br/>
<div class="vsub"><a id="Examples"></a>Examples</div>
Exit the loop after 300 loops:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_192'>
<span class="Statement"> set-number</span> max_loop = <span class="Constant">300</span>
<span class="Statement"> start-loop</span><span class="Identifier"> repeat</span> <span class="Constant">1000</span><span class="Type"> use</span> i<span class="Identifier"> start-with</span> <span class="Constant">1</span>
<span class="Statement">     @</span>Completed <span class="Statement">&lt;&lt;p-num</span> i<span class="Statement">&gt;&gt;</span> loops so far
<span class="Statement">     if-true</span> i<span class="Identifier"> equal</span> max_loop
<span class="Statement">         break-loop</span>
<span class="Statement">     end-if</span>
<span class="Statement"> end-loop</span></pre>
<span id=golf_copied_192 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_192' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_192, code_192, golf_copied_192)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<!--BEFSAL13--><div class="vsub"><a id="See also"></a>See also</div>
 <a name='Program flow'></a><span style="font-weight:bold;">Program flow</span><br/>
<a href='/break-loop.html'>break-loop</a> &nbsp;<br/>
<a href='/code-blocks.html'>code-blocks</a> &nbsp;<br/>
<a href='/continue-loop.html'>continue-loop</a> &nbsp;<br/>
<a href='/do-once.html'>do-once</a> &nbsp;<br/>
<a href='/exit-handler.html'>exit-handler</a> &nbsp;<br/>
<a href='/if-defined.html'>if-defined</a> &nbsp;<br/>
<a href='/if-true.html'>if-true</a> &nbsp;<br/>
<a href='/return-handler.html'>return-handler</a> &nbsp;<br/>
<a href='/set-bool.html'>set-bool</a> &nbsp;<br/>
<a href='/start-loop.html'>start-loop</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='/documentation.html'>documentation</a><br/>
<a id='call-extended.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:right;background-color:white;'><a href='https://golf-lang.com' style='border-bottom:0px'><img src='https://golf-lang.com/golf.png'/></a></div><div class='vhub' style='margin-top:10px;'>&nbsp;Call extended</div><hr/><span style="font-weight:bold;">Purpose</span>: Call external function or macro (extended mode only).<br/>
<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_193'>
<span class="Statement"> call-extended</span> &lt;function&gt; <span class="Constant">&quot;( &quot;</span> [ &amp; ]&lt;variable&gt;  [ , ... ]  <span class="Constant">&quot; )&quot;</span></pre>
<span id=golf_copied_193 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_193' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_193, code_193, golf_copied_193)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
call-extended calls &lt;function&gt; (which can be a function or macro) with a list of parameter variables. The &lt;function&gt; is defined either in:<br/>
<ul><li>a library with C interop - note that such library can be written in many different languages. Most compiled languages can produce such libraries (such as Rust, C/C++ and others),<br/>
</li><li>a ".c" file residing in the directory that contains application source code - again such a C file can in turn call code from libraries produced by any language that supports C interop (most do).<br/>
</li><li>if a macro, in a ".h" file residing in the directory that contains application source code.</li></ul>
The &lt;function&gt; must be declared via C-style declaration in a ".h" file residing in the application source code directory. You can use "--lflag" and "--cflag" options of <a href='/gg.html'>gg</a> to supply libraries used. In addition, if you need to, you can also have any number of ".c" and ".h" files which will be automatically included in your project. A macro must be defined in ".h" file.<br/>
<br/>
call-extended statement can only be used in extended mode (see <a href='/extended-mode.html'>extended-mode</a>). By default, Golf code runs in safe mode which does not allow use of call-extended statement. Note that using call-extended statement does not automatically make your application unsafe; rather, extended code can be written in a memory-safe language (such as Rust), or even if written in C it can be made in such a way not to cause out-of-band memory reads and writes. <br/>
<div class="vsub"><a id="C signature, input/output variables, types"></a>C signature, input/output variables, types</div>
Each &lt;variable&gt; can be of C type (or a pointer to C type):<br/>
<ul><li>"gg_num" which is a signed integer 8 bytes in length (int64_t type). This represents Golf number.<br/>
</li><li>"char *" which is a pointer to an array of characters. This represents Golf string value.<br/>
</li><li>"bool" which is a boolean variable. This represents Golf boolean.</li></ul>
A &lt;function&gt; should not return a value. Rather, use a variable passed as a pointer if you wish to pass the function's output back to your Golf code.<br/>
<div class="vsub"><a id="Examples"></a>Examples</div>
For instance, consider C file "calc.c":<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_194'>
 <span class="PreProc">#include </span><span class="Constant">&quot;gliim.h&quot;</span>

 <span class="Comment">// Compute factorial of f, and store result into res</span>
 <span class="Type">void</span> factorial(gg_num f, gg_num *res)
<span class="Statement"> {</span>
     *res = <span class="Constant">1</span>;
     gg_num i;
     <span class="Statement">for</span> (i = <span class="Constant">2</span>; i &lt;= f; i++) {
         *res *= i;
<span class="Statement">     }</span>
<span class="Statement"> }</span></pre>
<span id=golf_copied_194 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_194' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_194, code_194, golf_copied_194)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Declare this C function in a header file, for instance "calc.h":<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_195'>
 <span class="Type">void</span> factorial(gg_num f, gg_num *res);</pre>
<span id=golf_copied_195 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_195' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_195, code_195, golf_copied_195)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
You can also have macros in a header file, so for example "calc.h" could be:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_196'>
 <span class="Type">void</span> factorial(gg_num f, gg_num *res);

 <span class="PreProc">#</span>define<span class="PreProc"> </span>mod10<span class="PreProc">(n, m) m=(n)%</span><span class="Constant">10</span></pre>
<span id=golf_copied_196 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_196' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_196, code_196, golf_copied_196)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
In this case you have defined a macro that calculates the moduo of 10 and stores a result into another variable.<br/>
<br/>
Use these in your Golf code with call-extended statement, for instance to use a function "factorial()":<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_197'>
<span class="Statement"> extended-mode</span>

<span class="Statement"> begin-handler</span> /fact<span class="Identifier"> public</span>
<span class="Statement">     set-number</span> fact
<span class="Statement">     call-extended</span> factorial (<span class="Constant">10</span>, &amp;fact)
<span class="Statement">     p-num</span> fact
<span class="Statement"> end-handler</span></pre>
<span id=golf_copied_197 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_197' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_197, code_197, golf_copied_197)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
In the above example, number "fact" is passed by reference (as a pointer), and it will contain the value of factorial of 10 on return. The result printed out is "3628800".<br/>
<br/>
To use macro "mod10()":<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_198'>
<span class="Statement"> extended-mode</span>

<span class="Statement"> begin-handler</span> /mod<span class="Identifier"> public</span>
<span class="Statement">     set-number</span> mod
<span class="Statement">     call-extended</span> mod10(<span class="Constant">103</span>, mod)
<span class="Statement">     p-num</span> mod
<span class="Statement"> end-handler</span></pre>
<span id=golf_copied_198 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_198' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_198, code_198, golf_copied_198)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
In this example, you are using a C macro, so number "fact" is assigned a value directly, per C language rules. The result printed out is "3".<br/>
<!--BEFSAL13--><div class="vsub"><a id="See also"></a>See also</div>
 <a name='Safety'></a><span style="font-weight:bold;">Safety</span><br/>
<a href='/call-extended.html'>call-extended</a> &nbsp;<br/>
<a href='/extended-mode.html'>extended-mode</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='/documentation.html'>documentation</a><br/>
<a id='call-handler.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:right;background-color:white;'><a href='https://golf-lang.com' style='border-bottom:0px'><img src='https://golf-lang.com/golf.png'/></a></div><div class='vhub' style='margin-top:10px;'>&nbsp;Call handler</div><hr/><span style="font-weight:bold;">Purpose</span>: Call another handler within the same process.<br/>
<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_199'>
<span class="Statement"> call-handler</span> &lt;request path&gt;</pre>
<span id=golf_copied_199 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_199' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_199, code_199, golf_copied_199)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Calls another handler within the same request in the same process. You can call any handler within the same application. "Calling a handler" means executing it solely within the context of the top handler currently running; no before-handler or after-handler will execute for the called handler.<br/>
<br/>
&lt;request path&gt; is the <a href='/request.html'>request</a> path served by the handler being called. It can be a string variable or a constant.<br/>
<br/>
Use <a href='/set-param.html'>set-param</a> and <a href='/get-param.html'>get-param</a> to pass parameters between the caller and callee handlers.<br/>
<br/>
call-handler uses the same high-performance hash table used by a <a href='/request.html'>request</a> to route requests by name; if &lt;request path&gt; is a constant string, then a hash table lookup is performed only once for the life of the process and all subsequent calls use a cached address of the request handler.<br/>
<div class="vsub"><a id="Examples"></a>Examples</div>
The following example demonstrate calling a call-handler twice, and also using its output inline in the caller. An input parameter is passed to it, and an output obtained:<br/>
<br/>
Copy to file "callsub.golf":<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_202'>
<span class="Statement"> %%</span> /callsub<span class="Identifier"> public</span>
     <span class="Comment">//</span>
     <span class="Comment">// First call to call-handler</span>
     <span class="Comment">//</span>
     <span class="Comment">// Set input for call-handler</span>
<span class="Statement">     set-param</span> inp = <span class="Constant">&quot;some string&quot;</span>
<span class="Statement">     ((</span> s
<span class="Statement">     call-handler</span> <span class="Constant">&quot;/sub/service&quot;</span>
<span class="Statement">     ))</span>
     <span class="Comment">// Get output from call-handler</span>
<span class="Statement">     get-param</span> out<span class="Identifier"> type string</span>
<span class="Statement">     @</span><span class="Statement">&lt;&lt;p-out</span> s<span class="Statement">&gt;&gt;</span> with output [<span class="Statement">&lt;&lt;p-out</span> out<span class="Statement">&gt;&gt;</span>]

     <span class="Comment">//</span>
     <span class="Comment">// Second call to call-handler</span>
     <span class="Comment">//</span>
     <span class="Comment">// Set input for call-handler called as inline code</span>
<span class="Statement">     set-param</span> inp = <span class="Constant">&quot;new string&quot;</span>
<span class="Statement">     ((</span> s
<span class="Statement">     @</span>Output: <span class="Statement">&lt;&lt;call-handler</span> <span class="Constant">&quot;/sub/service&quot;</span><span class="Statement">&gt;&gt;</span>
<span class="Statement">     ))</span>
     <span class="Comment">// Get output from call-handler</span>
<span class="Statement">     get-param</span> out<span class="Identifier"> type string</span>
<span class="Statement">     @</span><span class="Statement">&lt;&lt;p-out</span> s<span class="Statement">&gt;&gt;</span> with output [<span class="Statement">&lt;&lt;p-out</span> out<span class="Statement">&gt;&gt;</span>]
<span class="Statement"> %%</span></pre>
<span id=golf_copied_202 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_202' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_202, code_202, golf_copied_202)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
And in "sub/service.golf" file (meaning file "service.golf" in subdirectory "sub"):<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_204'>
<span class="Statement"> %%</span> /sub/service<span class="Identifier"> private</span>
<span class="Statement">     @</span>This is sub!
<span class="Statement">     get-param</span> inp
<span class="Statement">     ((</span> out
<span class="Statement">     @</span>got input: <span class="Statement">&lt;&lt;p-out</span> inp<span class="Statement">&gt;&gt;</span>
<span class="Statement">     ))</span>
<span class="Statement">     set-param</span> out = out
<span class="Statement"> %%</span></pre>
<span id=golf_copied_204 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_204' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_204, code_204, golf_copied_204)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Create and build an application:<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_201'>
gg <span class="Special">-k</span> subhandler
gg <span class="Special">-q</span></pre>
<span id=golf_copied_201 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_201' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_201, code_201, golf_copied_201)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Run it:<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_203'>
gg <span class="Special">-r</span> <span class="Special">--req</span><span class="Statement">=</span><span class="Statement">&quot;</span><span class="Constant">/callsub</span><span class="Statement">&quot;</span> <span class="Special">--exec</span> <span class="Special">--silent-header</span></pre>
<span id=golf_copied_203 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_203' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_203, code_203, golf_copied_203)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
The output:<br/>
<div class='ncode' style='position:relative;padding-right:16px;'>
<pre id='code_200'>
This is sub! with output [got input: some string]
Output: This is sub! with output [got input: new string]</pre>
<span id=golf_copied_200 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_200' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_200, code_200, golf_copied_200)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<!--BEFSAL13--><div class="vsub"><a id="See also"></a>See also</div>
 <a name='Service processing'></a><span style="font-weight:bold;">Service processing</span><br/>
<a href='/after-handler.html'>after-handler</a> &nbsp;<br/>
<a href='/before-handler.html'>before-handler</a> &nbsp;<br/>
<a href='/begin-handler.html'>begin-handler</a> &nbsp;<br/>
<a href='/call-handler.html'>call-handler</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='/documentation.html'>documentation</a><br/>
<a id='call-remote.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:right;background-color:white;'><a href='https://golf-lang.com' style='border-bottom:0px'><img src='https://golf-lang.com/golf.png'/></a></div><div class='vhub' style='margin-top:10px;'>&nbsp;Call remote</div><hr/><span style="font-weight:bold;">Purpose</span>: Make a remote service call.<br/>
<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_205'>
<span class="Statement"> call-remote</span> &lt;service&gt; [ ,... ]   \
     [<span class="Type"> status</span> &lt;status&gt; ]  \
     [<span class="Type"> started</span> &lt;started&gt; ] \
     [<span class="Type"> finished-okay</span> &lt;finished okay&gt; ]</pre>
<span id=golf_copied_205 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_205' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_205, code_205, golf_copied_205)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
call-remote will make service call(s) as described in a single &lt;service&gt; or a list of &lt;service&gt;s. Unless only a single &lt;service&gt; is specified, each call will execute in parallel with others (as multiple threads). call-remote finishes when all &lt;service&gt; calls do. Each &lt;service&gt; must have beed created with <a href='/new-remote.html'>new-remote</a>.<br/>
<br/>
A &lt;service&gt; call is made to a remote service. "Remote service" means a process accepting requests that is not the same process executing call-remote; it may be running on the same or a different computer, or it may be a different process started by the very same application. <br/>
<br/>
<span style="font-weight:bold;">- Multiple service calls in parallel</span><br/>
Executing multiple &lt;service&gt; calls in parallel is possible by specifying a list of &lt;service&gt;s separated by a comma.<br/>
<br/>
There is no limit on how many &lt;service&gt;s you can call at the same time; it is limited only by the underlying Operating System resources, such as threads/processes and sockets.<br/>
<br/>
<span style="font-weight:bold;">- Call status</span><br/>
&lt;status&gt; number (in "status" clause) will be GG_OKAY if all &lt;service&gt; calls have each returned GG_OKAY; this means all have started and all have finished with a valid message from the service; or GG_ERR_FAILED if at least one did not (for example if the service could not be contacted, if there was a network error etc.); or GG_ERR_MEMORY if out of memory; or GG_ERR_TOO_MANY if there is too many calls (more than 1,000,000). <br/>
<br/>
Note that GG_OKAY does not mean that the reply is considered a success in any logical sense; only that the request was made and a reply was received according to the service protocol. <br/>
<br/>
<span style="font-weight:bold;">- Request(s) status</span><br/>
Note that the actual application status for each &lt;service&gt;, as well as data returned and any application errors can be obtained via "handler-status", "data" and "error" clauses of <a href='/read-remote.html'>read-remote</a> statement, respectively.<br/>
<br/>
<span style="font-weight:bold;">- Request(s) duration</span><br/>
call-remote will wait for all &lt;service&gt; requests to finish. For that reason, it is a good idea to specify "timeout" clause in <a href='/new-remote.html'>new-remote</a> for each &lt;service&gt; used, in order to limit the time you would wait. Use <a href='/read-remote.html'>read-remote</a> to detect a timeout, in which case "handler-status" clause would produce GG_CLI_ERR_TIMEOUT.<br/>
<br/>
<span style="font-weight:bold;">- How many calls started and finished</span><br/>
&lt;started&gt; (in "started" clause) will be the number of service calls that have started. &lt;finished okay&gt; (in "finished-okay" clause) is the number of calls that have finished with return value of GG_OKAY as described above. By using &lt;status&gt;, &lt;started&gt; and &lt;finished okay&gt; you may surmise whether the results of call-remote meet your expectations.<br/>
<br/>
<span style="font-weight:bold;">- Performance, security</span><br/>
call-remote is faster than <a href='/call-web.html'>call-web</a> because it does not use HTTP protocol; rather it only uses small and binary protocol, which is extremenly fast, especially when using Unix sockets on the same machine (see <a href='/new-remote.html'>new-remote</a>). Note that the binary protocol does not have any inherent security built-in; that is part of the reason why it is fast. As such, it is very well suited for remote service calls on the same machine or between networked machines on a secure network. <br/>
<div class="vsub"><a id="Examples"></a>Examples</div>
This example will connect to local Unix socket file "/var/lib/gg/app_name/sock/sock" (a Golf application named "app_name"), and make a request named "server" (i.e. it will be processed by source code file "server.golf") with URL path of "/op=add/key=2" (meaning with input parameters "op=add" and "key=2"). Then, service reply is read and displayed.<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_206'>
 <span class="Comment">// Create single call</span>
<span class="Statement"> new-remote</span> srv<span class="Identifier"> location</span> <span class="Constant">&quot;/var/lib/gg/app_name/sock/sock&quot;</span> \
    <span class="Identifier"> method</span> <span class="Constant">&quot;GET&quot;</span><span class="Identifier"> app-path</span> <span class="Constant">&quot;/app_name&quot;</span><span class="Identifier"> request-path</span> <span class="Constant">&quot;/server&quot;</span> \
    <span class="Identifier"> url-params</span> <span class="Constant">&quot;/op=add/key=2&quot;</span>
 <span class="Comment">// Call single service call</span>
<span class="Statement"> call-remote</span> srv<span class="Type"> finished-okay</span> sfok
 <span class="Comment">// Get results of a remote service call</span>
<span class="Statement"> read-remote</span> srv<span class="Type"> data</span> rdata
 <span class="Comment">// Display results</span>
<span class="Statement"> @</span>Data from service is <span class="Statement">&lt;&lt;p-out</span> rdata<span class="Statement">&gt;&gt;</span></pre>
<span id=golf_copied_206 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_206' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_206, code_206, golf_copied_206)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
If you are connecting to a service via TCP (and not with a Unix socket like in the example above), the "location" clause in <a href='/new-remote.html'>new-remote</a> might be:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_207'>
<span class="Statement"> new-remote</span> srv<span class="Identifier"> location</span> <span class="Constant">&quot;192.168.0.28:2400&quot;</span> \
    <span class="Identifier"> method</span> <span class="Constant">&quot;GET&quot;</span><span class="Identifier"> app-path</span> <span class="Constant">&quot;/app_name&quot;</span><span class="Identifier"> request-path</span> <span class="Constant">&quot;/server&quot;</span> \
    <span class="Identifier"> url-params</span> <span class="Constant">&quot;/op=add/key=2&quot;</span></pre>
<span id=golf_copied_207 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_207' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_207, code_207, golf_copied_207)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
In this case, you are connecting to another service (running on IP "192.168.0.28") on port 2400. See <a href='/mgrg.html'>mgrg</a> on how to start a service that listens on a TCP port. You would likely use TCP connectivity only if a service you're connecting to is on a different computer.<br/>
<br/>
See also <a href='/new-remote.html'>new-remote</a>.<br/>
<!--BEFSAL13--><div class="vsub"><a id="See also"></a>See also</div>
 <a name='Distributed computing'></a><span style="font-weight:bold;">Distributed computing</span><br/>
<a href='/call-remote.html'>call-remote</a> &nbsp;<br/>
<a href='/new-remote.html'>new-remote</a> &nbsp;<br/>
<a href='/read-remote.html'>read-remote</a> &nbsp;<br/>
<a href='/run-remote.html'>run-remote</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='/documentation.html'>documentation</a><br/>
<a id='call-web.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:right;background-color:white;'><a href='https://golf-lang.com' style='border-bottom:0px'><img src='https://golf-lang.com/golf.png'/></a></div><div class='vhub' style='margin-top:10px;'>&nbsp;Call web</div><hr/><span style="font-weight:bold;">Purpose</span>: Get content of URL resource (call a web address).<br/>
<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_210'>
<span class="Statement"> call-web</span> &lt;URL&gt; \
    <span class="Type"> response</span> &lt;result&gt; \
     [<span class="Type"> response-code</span> &lt;response code&gt; ] \
     [<span class="Type"> response-headers</span> &lt;headers&gt; ] \
     [<span class="Type"> status</span> &lt;status&gt; ] \
     [<span class="Identifier"> method</span> &lt;request method&gt; ] \
     [<span class="Identifier"> request-headers</span> \
         [<span class="Identifier"> content-type</span> &lt;content type&gt; ] \
         [<span class="Identifier"> content-length</span> &lt;content length&gt; ] \
        <span class="Identifier"> custom</span> &lt;header name&gt;=&lt;header value&gt; [ , ... ] ] \
     [<span class="Identifier"> request-body</span> \
         ( [<span class="Identifier"> fields</span> &lt;field name&gt;=&lt;field value&gt; [ , ... ] ] \
             [<span class="Identifier"> files</span> &lt;file name&gt;=&lt;file location&gt; [ , ... ] ] ) \
         | \
         (<span class="Identifier"> content</span> &lt;body content&gt; ) \
     ] \
     [<span class="Type"> error</span> &lt;error&gt; ] \
     [<span class="Identifier"> cert</span> &lt;certificate&gt; |<span class="Identifier"> no-cert</span> ] \
     [<span class="Identifier"> cookie-jar</span> &lt;cookie jar&gt; ] \
     [<span class="Identifier"> timeout</span> &lt;timeout&gt; ]</pre>
<span id=golf_copied_210 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_210' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_210, code_210, golf_copied_210)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
With call-web, you can get the content of any accessible URL resource, for example web page, image, PDF document, XML document, REST API etc. It allows you to programmatically download URL's content, including the header. For instance, you might want to obtain (i.e. download) the source code of a web page and its HTTP headers. You can then save such downloaded items into files, analyze them, or do anything else.<br/>
<br/>
&lt;URL&gt; is the resource locator, for example "https://some.web.page.com" or if you are downloading an image (for instance) it could be "https://web.page.com/image.jpg". Anything you can access from a client (such as web browser), you can also obtain programmatically. You can specify any URL parameters, for example "https://some.web.page.com?par1=val1&amp;par2=val2".<br/>
<div class="vsub"><a id="Response and headers"></a>Response and headers</div>
The result is obtained via "response" clause into variable &lt;result&gt;, and the length (in bytes) of such response is obtained via "status" clause in &lt;status&gt; variable. <br/>
<br/>
The response code (such as 200 for "OK", 404 for "Not Found" etc.) is available via "response-code" clause in number &lt;response code&gt;; the default value is 0 if response code is unavailable (due to error for instance).<br/>
<br/>
"response-headers" clause allows for retrieval of response headers (such as HTTP headers) in &lt;headers&gt; variable, as a single string variable. <br/>
<div class="vsub"><a id="Request method"></a>Request method</div>
You can specify the request method using "method" clause. &lt;method&gt; has a string value of the request method, such as "GET", "POST", "PUT", "PATCH", "DELETE" or any other.<br/>
<div class="vsub"><a id="Status"></a>Status</div>
In case of error, &lt;status&gt; is negative, and has value of GG_ERR_FAILED (typically indicating system issue, such as lack of memory, library or system issue or local permissions), GG_ERR_WEB_CALL (error in accessing URL or obtaining data) - otherwise &lt;status&gt; is the length in bytes of the response (0 or positive). Optionally, you can obtain the error message (if any) via "error" clause in &lt;error&gt; variable. Error is an empty string ("") if there is no error.<br/>
<div class="vsub"><a id="Timeout"></a>Timeout</div>
If "timeout" clause is specified, call-web will timeout if operation has not completed within &lt;timeout&gt; seconds. If this clause is not specified, the default timeout is 120 seconds. If timeout occurs, &lt;status&gt; will be GG_ERR_WEB_CALL and &lt;error&gt; will indicate timeout. Timeout cannot be negative nor greater than 86400 seconds.<br/>
<div class="vsub"><a id="HTTPS and certificates"></a>HTTPS and certificates</div>
You can call any valid URL that uses protocol supported by the underlying library (cURL). If you're using https protocol (or any other that requires a SSL/TSL certificate), you can either use the local CA (certificate authority) issued, specify the location of a certificate with "cert" clause, or if you do not want it checked, use "no-cert". By default, the locally installed certificates are used; if the URL you are visiting is not trusted via those certificates, and you still want to visit it, use "no-cert"; and if you do have a no-CA (i.e. self-signed certificate) for that URL, use "cert" to provide it as a file name (either a full path or a name relative to current working directory, see <a href='/directories.html'>directories</a>).<br/>
<div class="vsub"><a id="Cookies"></a>Cookies</div>
If you'd like to obtain cookies (for example to maintain session or examine their values), use "cookie-jar" clause. &lt;cookie jar&gt; specifies the location of a file holding cookies. Cookies are read from this file (which can be empty or non-existent to begin with) before making a call-web and any changes to cookies are reflected in this file after the call. This way, multiple calls to the same server maintain cookies the same way browser would do. Make sure the same &lt;cookie jar&gt; file is not used across different application spaces, meaning it should be under the application home directory (see <a href='/directories.html'>directories</a>), which is the most likely method of implementation.<br/>
<div class="vsub"><a id="Binary result"></a>Binary result</div>
The result of call-web (which is &lt;result&gt;) can be a text value or a binary value (for example if getting "JPG", "PNG", "PDF" or other documents). Either way, &lt;status&gt; is the number of bytes in a buffer that holds the value, which is also the value's <a href='/string-length.html'>string-length</a>.<br/>
<div class="vsub"><a id="Request body, sending files and arbitrary content"></a>Request body, sending files and arbitrary content</div>
In order to include request body, for instance to send files, use "request-body" clause. Request body is typically used with POST, PUT or PATCH methods. Even though not common, you can also use it with GET, DELETE or any other custom method, such as for example if the resource you wish to identify requires binary data; perhaps a disposable image is used to identify the resource. <br/>
<br/>
<span style="font-weight:bold;">- Structured content</span><br/>
Use "fields" and/or "files" subclauses to send a structured body request in the form of name/value pairs, the same as sent from an HTML form. To do that, you can specify fields with "fields" subclause in the form of &lt;field name&gt;=&lt;field value&gt; pairs separated by a comma. For instance, here two fields are set (field "source" with value "web" and field "act" with value "setcookie"):<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_211'>
<span class="Statement"> call-web</span> <span class="Constant">&quot;<a href="http://website.com/app_name/some_request">http://website.com/app_name/some_request</a>&quot;</span><span class="Type"> response</span> resp<span class="Type"> response-code</span> rc<span class="Type"> status</span> len \
    <span class="Identifier"> request-body fields</span> <span class="Constant">&quot;source&quot;</span>=<span class="Constant">&quot;web&quot;</span>,<span class="Constant">&quot;act&quot;</span>=<span class="Constant">&quot;setcookie&quot;</span></pre>
<span id=golf_copied_211 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_211' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_211, code_211, golf_copied_211)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
To include files, use "files" subclause in the form of &lt;file name&gt;=&lt;file location&gt; separated by commas. For example, here "file1" is the file name sent (which can be anything), and local file "uploadtest.jpg" is the file whose contents is sent; and "file23" is the file name sent (which can be anything), &nbsp;and "fileup4.pdf" is the actual local file read and sent. In this case files are in the application home directory (see <a href='/directories.html'>directories</a>), but in general you can specify a relative or absolute path:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_212'>
<span class="Statement"> call-web</span> <span class="Constant">&quot;<a href="http://website.com">http://website.com</a>&quot;</span><span class="Type"> response</span> resp<span class="Type"> response-code</span> rc<span class="Type"> status</span> len \
    <span class="Identifier"> request-body files</span> <span class="Constant">&quot;file1&quot;</span>=<span class="Constant">&quot;uploadtest.jpg&quot;</span>, <span class="Constant">&quot;file23&quot;</span>=<span class="Constant">&quot;fileup4.pdf&quot;</span></pre>
<span id=golf_copied_212 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_212' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_212, code_212, golf_copied_212)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
You can specify both "files" and "fields" fields, for instance (along with getting error text and status):<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_213'>
<span class="Statement"> call-web</span> <span class="Constant">&quot;<a href="http://website.com/app_name/some_request">http://website.com/app_name/some_request</a>&quot;</span><span class="Type"> response</span> resp<span class="Type"> response-code</span> rc
<span class="Statement">     request-body</span> fields <span class="Constant">&quot;source&quot;</span>=<span class="Constant">&quot;web&quot;</span>,<span class="Constant">&quot;act&quot;</span>=<span class="Constant">&quot;setcookie&quot;</span> \
         files <span class="Constant">&quot;file1&quot;</span>=<span class="Constant">&quot;uploadtest.jpg&quot;</span>, <span class="Constant">&quot;file23&quot;</span>=<span class="Constant">&quot;fileup4.pdf&quot;</span> \
     status st error err</pre>
<span id=golf_copied_213 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_213' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_213, code_213, golf_copied_213)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
There is no limit on the number of files and fields you can specify, other than of the underlying HTTP protocol.<br/>
<br/>
<span style="font-weight:bold;">- Non-structured content</span><br/>
To send any arbitrary (non-structured) content in the request body, such as JSON text for example, use "content" subclause:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_214'>
<span class="Statement"> call-web</span> <span class="Constant">&quot;<a href="https://website.com">https://website.com</a>&quot;</span><span class="Type"> response</span> resp \
    <span class="Identifier"> request-headers content-type</span> <span class="Constant">&quot;application/json&quot;</span> \
    <span class="Identifier"> request-body content</span> <span class="Constant">&quot;{ </span><span class="Special">\</span>
<span class="Constant">         </span><span class="Special">\&quot;</span><span class="Constant">employee</span><span class="Special">\&quot;</span><span class="Constant">: { </span><span class="Special">\</span>
<span class="Constant">             </span><span class="Special">\&quot;</span><span class="Constant">name</span><span class="Special">\&quot;</span><span class="Constant">:       </span><span class="Special">\&quot;</span><span class="Constant">sonoo</span><span class="Special">\&quot;</span><span class="Constant">, </span><span class="Special">\</span>
<span class="Constant">             </span><span class="Special">\&quot;</span><span class="Constant">salary</span><span class="Special">\&quot;</span><span class="Constant">:      56000, </span><span class="Special">\</span>
<span class="Constant">             </span><span class="Special">\&quot;</span><span class="Constant">married</span><span class="Special">\&quot;</span><span class="Constant">:    true </span><span class="Special">\</span>
<span class="Constant">         } </span><span class="Special">\</span>
<span class="Constant">     }&quot;</span></pre>
<span id=golf_copied_214 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_214' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_214, code_214, golf_copied_214)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
&lt;content length&gt; number in "content-length" subclause (in "request-headers" clause) can be specified to denote the length of body content:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_215'>
<span class="Statement"> read-file</span> <span class="Constant">&quot;somefile&quot;</span><span class="Type"> to</span> file_contents<span class="Type"> status</span> file_length
<span class="Statement"> call-web</span> <span class="Constant">&quot;<a href="https://website.com">https://website.com</a>&quot;</span><span class="Type"> response</span> resp \
    <span class="Identifier"> request-headers content-type</span> <span class="Constant">&quot;image/jpeg&quot;</span> \
    <span class="Identifier"> request-headers content-length</span> file_length \
    <span class="Identifier"> request-body content</span> file_contents</pre>
<span id=golf_copied_215 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_215' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_215, code_215, golf_copied_215)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
If "content-length" is not used, then it is assumed to be the length of string &lt;content&gt;.<br/>
<div class="vsub"><a id="Request headers"></a>Request headers</div>
If your request has a body (i.e. "request-body" clause is used), you can set the content type with "content-type" subclause of a request-headers clause:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_216'>
<span class="Statement"> call-web</span> <span class="Constant">&quot;<a href="https://">https://</a>&lt;web address&gt;/resource&quot;</span> \
    <span class="Identifier"> request-headers content-type</span> <span class="Constant">&quot;application/json&quot;</span> \
    <span class="Identifier"> request-body content</span> some_json</pre>
<span id=golf_copied_216 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_216' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_216, code_216, golf_copied_216)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Note that using "content-type" without the request body may be ignored by the server processing your request or may cause it to consider the request invalid. If "content-type" is not used, the default is "multipart/form-data" if "fields" or "files" subclause(s) are used with "body-request" clause. Otherwise, if you use "content" subclause to send other types of data, you must set content type explicitly via "content-type" subclause of "request-headers" clause.<br/>
<br/>
You can also specify custom request headers with "request-headers" clause, using "custom" subclause with a list of &lt;header name&gt;=&lt;header value&gt; pairs separated by a comma. For example, here custom header "Golf-header" has value of "Some_ID", and "Another-Header" a value of "New_ID":<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_217'>
<span class="Statement"> call-web</span> <span class="Constant">&quot;<a href="http://website.com/">http://website.com/</a>&lt;app name&gt;/&lt;request name&gt;?act=get_file&quot;</span><span class="Type"> response</span> resp<span class="Type"> response-code</span> rc<span class="Type"> status</span> len \
    <span class="Identifier"> request-headers custom</span> <span class="Constant">&quot;Golf-header&quot;</span>=<span class="Constant">&quot;Some_ID&quot;</span>, <span class="Constant">&quot;Another-Header&quot;</span>=<span class="Constant">&quot;New_ID&quot;</span></pre>
<span id=golf_copied_217 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_217' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_217, code_217, golf_copied_217)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
On the receiving side you can get any such custom header by using "header" clause of the <a href='/get-req.html'>get-req</a> statement:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_218'>
<span class="Statement"> get-req</span><span class="Identifier"> header</span> <span class="Constant">&quot;Golf-header&quot;</span><span class="Type"> to</span> hvh0
<span class="Statement"> get-req</span><span class="Identifier"> header</span> <span class="Constant">&quot;Another-Header&quot;</span><span class="Type"> to</span> hvh1</pre>
<span id=golf_copied_218 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_218' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_218, code_218, golf_copied_218)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<div class="vsub"><a id="Examples"></a>Examples</div>
Get the web page and print it out:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_208'>
<span class="Statement"> call-web</span> <span class="Constant">&quot;<a href="https://website.com/page.html">https://website.com/page.html</a>&quot;</span><span class="Type"> response</span> resp
<span class="Statement"> p-out</span> resp</pre>
<span id=golf_copied_208 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_208' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_208, code_208, golf_copied_208)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Get the "JPG" image from the web and save it to a file "pic.jpg":<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_209'>
<span class="Statement"> call-web</span> <span class="Constant">&quot;<a href="https://website.com/images/someimg.jpg">https://website.com/images/someimg.jpg</a>&quot;</span><span class="Type"> status</span> wlen<span class="Type"> response</span> resp
<span class="Statement"> write-file</span> <span class="Constant">&quot;pic.jpg&quot;</span><span class="Identifier"> from</span> resp<span class="Identifier"> length</span> wlen</pre>
<span id=golf_copied_209 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_209' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_209, code_209, golf_copied_209)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<!--BEFSAL13--><div class="vsub"><a id="See also"></a>See also</div>
 <a name='Web'></a><span style="font-weight:bold;">Web</span><br/>
<a href='/call-web.html'>call-web</a> &nbsp;<br/>
<a href='/out-header.html'>out-header</a> &nbsp;<br/>
<a href='/send-file.html'>send-file</a> &nbsp;<br/>
<a href='/silent-header.html'>silent-header</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='/documentation.html'>documentation</a><br/>
<a id='CGI.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:right;background-color:white;'><a href='https://golf-lang.com' style='border-bottom:0px'><img src='https://golf-lang.com/golf.png'/></a></div><div class='vhub' style='margin-top:10px;'>&nbsp;CGI</div><hr/>You can run Golf application as a CGI (Common Gateway Interface) program, if your web server supports CGI. This is not recommended in general, as CGI programs do not exhibit great performance. However in some cases you may need to use CGI, such as when performance is not of critical importance, or when other methods of execution are not feasible.<br/>
<br/>
To run your application with CGI, use <a href='/command-line.html'>command-line</a> program. Since Golf applications require running in the security context of the user who owns the application, you must use "suexec" (or similar feature) of your web server.<br/>
<br/>
The following script sets up an application named "func_test" (any kind of application will do) to run as CGI (after it's been compiled with <a href='/gg.html'>gg</a>) on Apache web server running on Ubuntu 18 and up. For other web servers/distros, consult their documentation on how to setup CGI for a program.<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_219'>
<span class="Comment">#prep repos</span>
    sudo apt update

<span class="Comment">#enable CGI on apache</span>
    sudo a2enmod cgid
    sudo service apache2 restart

<span class="Comment">#Install suexec-custom for Apache</span>
    sudo apt-get <span class="Special">-y</span> install apache2-suexec-custom
    sudo a2enmod suexec
    sudo service apache2 restart

<span class="Comment">#setup a &quot;gg&quot; directory under cgi-bin where your application can run</span>
    sudo <span class="Statement">mkdir</span> <span class="Special">-p</span> /usr/lib/cgi-bin/gg
    sudo chown <span class="PreProc">$(</span><span class="Special">whoami</span><span class="PreProc">)</span>:<span class="PreProc">$(</span><span class="Special">whoami</span><span class="PreProc">)</span>  /usr/lib/cgi-bin/gg
    sudo <span class="Statement">sed</span> <span class="Special">-i</span> <span class="Statement">'</span><span class="Constant">1c\/usr/lib/cgi-bin/gg</span><span class="Statement">'</span> /etc/apache2/suexec/www-data

<span class="Comment">#copy your program to &quot;gg&quot; directory</span>
    sudo <span class="Statement">mv</span> /var/lib/gg/bld/func-test/func-test /usr/lib/cgi-bin/gg
    sudo chown <span class="PreProc">$(</span><span class="Special">whoami</span><span class="PreProc">)</span>:<span class="PreProc">$(</span><span class="Special">whoami</span><span class="PreProc">)</span>  /usr/lib/cgi-bin/gg/func-test
    sudo <span class="Statement">chmod</span> <span class="Constant">700</span>  /usr/lib/cgi-bin/gg/func-test

<span class="Comment">#add user/group of Gliim application user to suexec    </span>
    sudo <span class="Statement">sed</span> <span class="Special">-i</span> <span class="Statement">&quot;</span><span class="Constant">/SuexecUserGroup/d</span><span class="Statement">&quot;</span> /etc/apache2/sites-enabled/000-default.conf
    sudo <span class="Statement">sed</span> <span class="Special">-i</span> <span class="Statement">&quot;</span><span class="Constant">s/&lt;</span><span class="Special">\/</span><span class="Constant">VirtualHost&gt;/SuexecUserGroup </span><span class="PreProc">$(</span><span class="Special">whoami</span><span class="PreProc">)</span><span class="Constant"> </span><span class="PreProc">$(</span><span class="Special">whoami</span><span class="PreProc">)</span><span class="Special">\n</span><span class="Constant">&lt;</span><span class="Special">\/</span><span class="Constant">VirtualHost&gt;/g</span><span class="Statement">&quot;</span> /etc/apache2/sites-enabled/000-default.conf
    sudo service apache2 restart

<span class="Comment">#the application is at <a href="http://127.0.0.1/cgi-bin/gg/func-test?...">http://127.0.0.1/cgi-bin/gg/func-test?...</a></span>
<span class="Comment">#substitute 127.0.0.1 for your web address</span></pre>
<span id=golf_copied_219 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_219' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_219, code_219, golf_copied_219)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<!--BEFSAL13--><div class="vsub"><a id="See also"></a>See also</div>
 <a name='Running application'></a><span style="font-weight:bold;">Running application</span><br/>
<a href='/application-setup.html'>application-setup</a> &nbsp;<br/>
<a href='/CGI.html'>CGI</a> &nbsp;<br/>
<a href='/command-line.html'>command-line</a> &nbsp;<br/>
<a href='/service.html'>service</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='/documentation.html'>documentation</a><br/>
<a id='Client-API.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:right;background-color:white;'><a href='https://golf-lang.com' style='border-bottom:0px'><img src='https://golf-lang.com/golf.png'/></a></div><div class='vhub' style='margin-top:10px;'>&nbsp;Client API</div><hr/>You can use C API client library to connect to Golf:<br/>
<ul><li>The API has only a few functions, and the main one is "gg_cli_request()", which makes a call to the service.<br/>
</li><li>There is only a single data type used, which is "gg_cli" and it is used to specify a request and its options, as well as to retrieve results.<br/>
</li><li>There is a single include file ("gcli.h"). <br/>
</li><li>When building your client executable, you can either specify build flags by using the result of "gg -i" (if you have Golf installed), or use self-contained source files directly.<br/>
</li><li>It is MT-safe, so you can use it in multi-threaded applications, such as to make many requests in parallel.</li></ul>
See Examples section below for detailed examples.<br/>
<div class="vsub"><a id="Sending a request to Golf service"></a>Sending a request to Golf service</div>
The following function is used to make a call using C API:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_230'>
 <span class="Type">int</span> gg_cli_request (gg_cli *req);</pre>
<span id=golf_copied_230 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_230' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_230, code_230, golf_copied_230)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
All input and output is contained in a single variable of type "gg_cli", the pointer to which is passed to "gg_cli_request()" function that sends a request to the service. A variable of type "gg_cli" must be initialized to zero before using it (such as with {0} initialization, "memset()" or "calloc()"), or otherwise some of its members may have random values:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_233'>
 <span class="Comment">// Define and initialize request variable</span>
 gg_cli req = {<span class="Constant">0</span>};
 <span class="Comment">// You could also do:</span>
 <span class="Comment">// memset ((char*)&amp;req, </span><span class="Constant">0</span><span class="Comment">, sizeof(gg_cli));</span>
<span class="Statement"> .</span>..
 <span class="Comment">// Set members of 'req' variable (see below)</span>
<span class="Statement"> .</span>..
 <span class="Comment">// Make a call</span>
 <span class="Type">int</span> result = gg_cli_request (&amp;req);</pre>
<span id=golf_copied_233 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_233' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_233, code_233, golf_copied_233)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Type "gg_cli" is defined as (i.e. public members of it):<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_235'>
 <span class="Type">typedef</span> <span class="Type">struct</span> {
     <span class="Type">const</span> <span class="Type">char</span> *server; <span class="Comment">// the IP:port/socket_path to server</span>
     <span class="Type">const</span> <span class="Type">char</span> *req_method; <span class="Comment">// request method</span>
     <span class="Type">const</span> <span class="Type">char</span> *app_path; <span class="Comment">// application path</span>
     <span class="Type">const</span> <span class="Type">char</span> *req; <span class="Comment">// request name</span>
     <span class="Type">const</span> <span class="Type">char</span> *url_params; <span class="Comment">// URL params (path+query string)</span>
     <span class="Type">const</span> <span class="Type">char</span> *content_type; <span class="Comment">// content type</span>
     <span class="Type">int</span> content_len; <span class="Comment">// content len</span>
     <span class="Type">const</span> <span class="Type">char</span> *req_body; <span class="Comment">// request body (i.e. content)</span>
     <span class="Type">char</span> **env; <span class="Comment">// environment to pass to servicde</span>
     <span class="Type">int</span> timeout; <span class="Comment">// timeout for request</span>
     <span class="Type">int</span> req_status; <span class="Comment">// status of request from service</span>
     <span class="Type">int</span> data_len; <span class="Comment">// length of response from service</span>
     <span class="Type">int</span> error_len; <span class="Comment">// length of error from service</span>
     <span class="Type">char</span> *errm; <span class="Comment">// error message when gg_cli_request returns other than GG_OKAY</span>
     gg_cli_out_hook out_hook; <span class="Comment">// hook to get data output as soon as it arrives</span>
     gg_cli_err_hook err_hook; <span class="Comment">// hook get error output as soon as it arrives</span>
     gg_cli_done_hook done_hook; <span class="Comment">// get all data when request is complete</span>
     <span class="Type">int</span> thread_id; <span class="Comment">// custom ID when executing in a multithreaded fashion</span>
     <span class="Type">volatile</span> <span class="Type">char</span> done; <span class="Comment">// indicator that the request has completed</span>
     <span class="Type">int</span> return_code; <span class="Comment">// the return code from gg_cli_request()</span>
<span class="Statement"> }</span> gg_cli;</pre>
<span id=golf_copied_235 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_235' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_235, code_235, golf_copied_235)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<br/>
<span style="font-weight:bold;">- Mandatory input</span><br/>
The following members of "gg_cli" type must be supplied in order to make a call to a service:<br/>
<ul><li>"server" represents either a Unix socket or a TCP socket, and is:<br/>
<ul><li>for a Unix socket, a fully qualified name to a Unix socket file used to communicate with the service (for a Golf service, it's "/var/lib/gg/&lt;app name&gt;/sock/sock", where &lt;app name&gt; is the application name), or<br/>
</li><li>for a TCP socket, a host name and port name in the form of "&lt;host name&gt;:&lt;port number&gt;", specifying where is the server listening on (for instance "127.0.0.1:2301" if the Golf service is local and runs on TCP port 2301).</li></ul>
</li><li>"req_method" is a request method, such as "GET", "POST", "PUT", "DELETE" or any other.<br/>
</li><li>"app_path" is an application path (see <a href='/request.html'>request</a>). By default it's "/&lt;application name&gt;". <br/>
</li><li>"req" is a request path, i.e. a request name preceded by a forward slash, as in "/&lt;request name&gt;" (see <a href='/request.html'>request</a>).</li></ul>
<span style="font-weight:bold;">- URL parameters</span><br/>
"url_params" is the URL parameters, meaning input parameters (as path segments and query string, see <a href='/request.html'>request</a>). URL parameters can be NULL or empty, in which case it is not used.<br/>
<br/>
<span style="font-weight:bold;">- Request body (content)</span><br/>
"req_body" is the request body, which can be any text or binary data. "content_type" is the content type of request body (for instance "application/json" or "image/jpg"). "content_len" is the length of request body in bytes. A request body is sent only if "content_type" and "req_body" are not NULL and not empty, and if "content_len" is greater than zero.<br/>
<br/>
<span style="font-weight:bold;">- Passing environment to service</span><br/>
"env" is any environment variables that should be passed along to the service. You can access those in Golf via "environment" clause of <a href='/get-sys.html'>get-sys</a> statement. This is an array of strings, where name/value pairs are specified one after the other, and which always must end with NULL. For example, if you want to use variable "REMOTE_USER" with value "John" and variable "MY_VARIABLE" with value "8000", then it might look like this:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_237'>
 <span class="Type">char</span> *env[<span class="Constant">5</span>];
 env[<span class="Constant">0</span>] = <span class="Constant">&quot;REMOTE_USER&quot;</span>;
 env[<span class="Constant">1</span>] = <span class="Constant">&quot;John&quot;</span>
 env[<span class="Constant">2</span>] = <span class="Constant">&quot;MY_VARIABLE&quot;</span>;
 env[<span class="Constant">3</span>] = <span class="Constant">&quot;8000&quot;</span>
 env[<span class="Constant">4</span>] = <span class="Constant">NULL</span>;</pre>
<span id=golf_copied_237 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_237' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_237, code_237, golf_copied_237)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Thus, if you are passing N environment variables to the service, you must size "env" as "char*" array with 2*N+1 elements. <br/>
<br/>
Note that in order to suppress output of HTTP headers from the service, you can include environment variable "GG_SILENT_HEADER" with value "yes"; to let the service control headers output (either by default, with "-z" option of <a href='/mgrg.html'>mgrg</a> or with <a href='/silent-header.html'>silent-header</a>) simply omit this environment variable.<br/>
<br/>
<span style="font-weight:bold;">- Timeout</span><br/>
"timeout" is the number of seconds a call to the service should not exceed. For instance if the remote service is taking too long or if the network connection is too slow, you can limit how long to wait for a reply. If there is no timeout, then "timeout" value should be zero. Note that DNS resolution of the host name (in case you are using a TCP socket) is not counted in timeout. Maximum value for timeout is 86400.<br/>
<br/>
Even if timeout is set to 0, a service call may eventually timeout due to underlying socket and network settings. Note that even if your service call times out, the actual service executing may continue until it's done.<br/>
<span style="font-weight:bold;">- Thread ID</span><br/>
"thread_id" is an integer that you can set and use when your program is multithreaded. By default it's 0. This number is set by you and passed to hooks (your functions called when request is complete or data available). You can use this number to differentiate the data with regards to which thread it belongs to.<br/>
<br/>
<span style="font-weight:bold;">- Completion indicator and return code</span><br/>
When your program is multithreaded, it may be useful to know when (and if) a request has completed. "done" is set to to "true" when a request completes, and "return_code" is the return value from gg_cli_request() (see below for a list). In a single-threaded program, this information is self-evident, but if you are running more than one request at the same time (in different threads), you can use these to check on each request executing in parallel (for instance in a loop in the main thread).<br/>
<br/>
Note that "done" is "true" specifically when all the results of a request are available and the request is about to be completed. In a multithreaded program, it means the thread is very soon to terminate or has already terminated; it does not mean that thread has positively terminated. Use standard "pthread_join()" function to make sure the thread has terminated if that is important to you. <br/>
<div class="vsub"><a id="Return value of gg_cli_request()"></a>Return value of gg_cli_request()</div>
The following are possible return values from "gg_cli_request()" (available in "return_code" member of "gg_cli" type):<br/>
<ul><li>GG_OKAY if request succeeded,<br/>
</li><li>GG_CLI_ERR_RESOLVE_ADDR if host name for TCP connection cannot be resolved,<br/>
</li><li>GG_CLI_ERR_PATH_TOO_LONG if path name of Unix socket is too long,<br/>
</li><li>GG_CLI_ERR_SOCKET if cannot create a socket (for instance they are exhausted for the process or system),<br/>
</li><li>GG_CLI_ERR_CONNECT if cannot connect to server (TCP or Unix alike),<br/>
</li><li>GG_CLI_ERR_SOCK_WRITE if cannot write data to server (for instance if server has encountered an error or is down, or if network connection is no longer available),<br/>
</li><li>GG_CLI_ERR_SOCK_READ if cannot read data from server (for instance if server has encountered an error or is down, or if network connection is no longer available),<br/>
</li><li>GG_CLI_ERR_PROT_ERR if there is a protocol error, which indicates a protocol issue on either or both sides,<br/>
</li><li>GG_CLI_ERR_BAD_VER if either side does not support protocol used by the other,<br/>
</li><li>GG_CLI_ERR_SRV if server cannot complete the request,<br/>
</li><li>GG_CLI_ERR_UNK if server does not recognize record types used by the client,<br/>
</li><li>GG_CLI_ERR_OUT_MEM if client is out of memory,<br/>
</li><li>GG_CLI_ERR_ENV_TOO_LONG if the combined length of all environment variables is too long,<br/>
</li><li>GG_CLI_ERR_ENV_ODD if the number of supplied environment name/value pairs is incorrect,<br/>
</li><li>GG_CLI_ERR_BAD_TIMEOUT if the value for timeout is incorrect,<br/>
</li><li>GG_CLI_ERR_TIMEOUT if the request timed out based on "timeout" parameter or otherwise if the underlying Operating System libraries declared their own timeout.</li></ul>
You can obtain the error message (corresponding to the above return values) in "errm" member of "gg_cli" type.<br/>
<div class="vsub"><a id="Server reply"></a>Server reply</div>
The service reply is split in two. One part is the actual result of processing (called "stdout" or standard output), and that is "data". The other is the error messages (called "stderr" or standard error), and that's "error". All of service output goes to "data", except from <a href='/report-error.html'>report-error</a> and <a href='/pf-out.html'>pf-out</a>/<a href='/pf-url.html'>pf-url</a>/<a href='/pf-web.html'>pf-web</a> (with "to-error" clause) which goes to "error". Note that "data" and "error" streams can be co-mingled when output by the service, but they will be obtained separately. This allows for clean separation of output from any error messages.<br/>
<br/>
You can obtain service reply when it's ready in its entirety (likely most often used), or as it comes alone bit by bit (see more about asynchronous hooks futher here).<br/>
<div class="vsub"><a id="Status of request execution"></a>Status of request execution</div>
"req_status" member of "gg_cli" type is the request status when a request had executed; it is somewhat similar to an exit status of a program. A Golf service request returns status by means of <a href='/handler-status.html'>handler-status</a> statement. Note that "req_status" is valid only if "gg_cli_request()" returned GG_OKAY (or if "return_code" is GG_OKAY for multi-threaded programs).<br/>
<div class="vsub"><a id="Getting data reply (stdout)"></a>Getting data reply (stdout)</div>
Data returned from a request is valid only if "gg_cli_request()" returned GG_OKAY (or if "return_code" is GG_OKAY for multi-threaded programs). In that case, use "gg_cli_data()" function, for example:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_239'>
 <span class="Comment">// Declare and initialize request variable</span>
 gg_cli req = {<span class="Constant">0</span>};
 <span class="Comment">// Setup the req variable</span>
<span class="Statement"> .</span>..
 <span class="Comment">// Execute request</span>
 <span class="Statement">if</span> (gg_cli_request (&amp;req) == GG_OKAY) {
     <span class="Type">char</span> *data = gg_cli_data (req); <span class="Comment">// data response</span>
     <span class="Type">int</span> data_len = req-&gt;data_len; <span class="Comment">// length of data response in bytes</span>
<span class="Statement"> }</span></pre>
<span id=golf_copied_239 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_239' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_239, code_239, golf_copied_239)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
"data_len" member of "gg_cli" type will have the length of data response in bytes. The reply is always null-terminated as a courtesy, and "data_len" does not include the terminating null byte.<br/>
<br/>
"gg_cli_data()" returns the actual response (i.e. data output) from service as passed to "data" stream. Any output from service will go there, except when "to-error" clause is used in <a href='/pf-out.html'>pf-out</a>, <a href='/pf-url.html'>pf-url</a> and <a href='/pf-web.html'>pf-web</a> - use these constructs to output errors without stopping the service execution. Additionaly, the output of <a href='/report-error.html'>report-error</a> will also not go to data output.<br/>
<div class="vsub"><a id="Getting error reply (stderr)"></a>Getting error reply (stderr)</div>
An error reply returned from a service is valid only if "gg_cli_request()" returned GG_OKAY (or if "return_code" is GG_OKAY for multi-threaded programs). In that case, use "gg_cli_error()" function, for example:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_241'>
 <span class="Comment">// Declare and initialize request variable</span>
 gg_cli req = {<span class="Constant">0</span>};
 <span class="Comment">// Setup the req variable</span>
<span class="Statement"> .</span>..
 <span class="Comment">// Execute request</span>
 <span class="Statement">if</span> (gg_cli_request (&amp;req) == GG_OKAY) {
     <span class="Type">char</span> *err = gg_cli_error (req); <span class="Comment">// error response</span>
     <span class="Type">int</span> err_len = req-&gt;error_len; <span class="Comment">// length of error response in bytes</span>
<span class="Statement"> }</span></pre>
<span id=golf_copied_241 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_241' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_241, code_241, golf_copied_241)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
"gg_cli_error()" returns any error messages from a service response, i.e. data passed to "error" stream. It is comprised of any service output when "to-error" clause is used in <a href='/pf-out.html'>pf-out</a>, <a href='/pf-url.html'>pf-url</a> and <a href='/pf-web.html'>pf-web</a>, as well as any output from <a href='/report-error.html'>report-error</a>. <br/>
<br/>
"error_len" member (of "gg_cli" type above) will have the length of error response in bytes. The response is always null-terminated as a courtesy, and "error_len" does not include the terminating null byte.<br/>
<div class="vsub"><a id="Freeing the result of a request"></a>Freeing the result of a request</div>
Once you have obtained the result of a request, and when no longer needed, you should free it by using "gg_cli_delete()":<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_243'>
 <span class="Comment">// Declare and initialize request variable</span>
 gg_cli req = {<span class="Constant">0</span>};
 <span class="Comment">// Setup the req variable</span>
<span class="Statement"> .</span>..
 <span class="Comment">// Execute request</span>
 gg_cli_request (&amp;req);
 <span class="Comment">// .. Use the result ..</span>
 <span class="Comment">// Free request output (data and error streams)</span>
 gg_cli_delete (&amp;req);</pre>
<span id=golf_copied_243 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_243' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_243, code_243, golf_copied_243)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
If you do not free the result, your program may experience a memory leak. If your program exits right after issuing any request(s), you may skip freeing results as that is automatically done on exit by the Operating System. <br/>
<br/>
You can use "gg_cli_delete()" regardless of whether "gg_cli_request()" returned GG_OKAY or not.<br/>
<div class="vsub"><a id="Completion hook"></a>Completion hook</div>
A function you wrote can be called when a request has completed. This is useful in multithreaded invocations, where you may want to receive complete request's results as they are available. To specify a completion hook, you must write a C function with the following signature and assign it to "done_hook" member of "gg_cli" typed variable:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_244'>
 <span class="Type">typedef</span> <span class="Type">void</span> (*gg_cli_done_hook)(<span class="Type">char</span> *recv, <span class="Type">int</span> recv_len, <span class="Type">char</span> *err, <span class="Type">int</span> err_len, gg_cli *req);</pre>
<span id=golf_copied_244 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_244' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_244, code_244, golf_copied_244)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
"recv" is the request's data output, "recv_len" is its length in bytes, "err" is the request's error output, and "err_len" is its length in bytes. "req" is the request itself which you can use to obtain any other information about the request. In a single threaded environment, these are available as members of the request variable of "gg_cli" type used in the request, and there is not much use for a completion hook. <br/>
<br/>
See an example with asynchronous hooks.<br/>
<div class="vsub"><a id="Asynchronous hooks"></a>Asynchronous hooks</div>
You can obtain the service's reply as it arrives by specifying read hooks. This is useful if the service supplies partial replies over a period of time, and your application can get those partial replies as they become available.<br/>
<br/>
To specify a hook for data output (i.e. from stdout), you must write a C function with the following signature and assign it to "out_hook":<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_245'>
 <span class="Type">typedef</span> <span class="Type">void</span> (*gg_cli_out_hook)(<span class="Type">char</span> *recv, <span class="Type">int</span> recv_len, gg_cli *req);</pre>
<span id=golf_copied_245 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_245' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_245, code_245, golf_copied_245)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
"recv" is the data received and "recv_len" is its length.<br/>
<br/>
To specify a hook for error output (i.e. from stderr), you must write a C function with the following signature and assign it to "err_hook":<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_220'>
 <span class="Type">typedef</span> <span class="Type">void</span> (*gg_cli_err_hook)(<span class="Type">char</span> *err, <span class="Type">int</span> err_len, gg_cli *req);</pre>
<span id=golf_copied_220 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_220' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_220, code_220, golf_copied_220)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
"err" is the error received and "err_len" is its length.<br/>
<br/>
"req" (in both hooks) is the request itself which you can use to obtain any other information about the request.<br/>
<br/>
To register these functions with "gg_cli_request()" function, assign their pointers to "out_hook" and "err_hook" members of request variable of type "gg_cli" respectively. Note that the output hook (i.e. hook function of type "gg_cli_out_hook") will receive empty string ("") in "recv" and "recv_len" will be 0 when the request has completed, meaning all service output (including error) has been received. <br/>
<br/>
For example, functions "get_output()" and "get_err()" will capture data as it arrives and print it out, and get_complete() will print the final result:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_221'>
 <span class="Comment">// Output hook</span>
 <span class="Type">void</span> get_output(<span class="Type">char</span> *d, <span class="Type">int</span> l, gg_cli *req)
<span class="Statement"> {</span>
     printf(<span class="Constant">&quot;Got output of [</span><span class="Special">%.*s</span><span class="Constant">] of length [</span><span class="Special">%d</span><span class="Constant">] in thread [</span><span class="Special">%d</span><span class="Constant">]&quot;</span>, l, d, l, req-&gt;thread_id);
<span class="Statement"> }</span>

 <span class="Comment">// Error hook</span>
 <span class="Type">void</span> get_err(<span class="Type">char</span> *d, <span class="Type">int</span> l, gg_cli *req)
<span class="Statement"> {</span>
     printf(<span class="Constant">&quot;Got error of [</span><span class="Special">%.*s</span><span class="Constant">] of length [</span><span class="Special">%d</span><span class="Constant">], status [</span><span class="Special">%d</span><span class="Constant">]&quot;</span>, l, d, l, req-&gt;req_status);
<span class="Statement"> }</span>

 <span class="Comment">// Completion hook</span>
 <span class="Type">void</span> get_complete(<span class="Type">char</span> *data, <span class="Type">int</span> data_len, <span class="Type">char</span> *err, <span class="Type">int</span> err_len, gg_cli *req)
<span class="Statement"> {</span>
     printf(<span class="Constant">&quot;Got data [</span><span class="Special">%.*s</span><span class="Constant">] of length [</span><span class="Special">%d</span><span class="Constant">] and error of [</span><span class="Special">%.*s</span><span class="Constant">] of length [</span><span class="Special">%d</span><span class="Constant">], status [</span><span class="Special">%d</span><span class="Constant">], thread [</span><span class="Special">%d</span><span class="Constant">]</span><span class="Special">\n</span><span class="Constant">&quot;</span>, data_len, data, data_len, err_len, err, err_len, req-&gt;req_status, req-&gt;thread_id);
<span class="Statement"> }</span>

<span class="Statement"> .</span>..

 gg_cli req = {<span class="Constant">0</span>};
<span class="Statement"> .</span>..
 <span class="Comment">// Register output and error hooks, as well as a completion hook</span>
 req.out_hook = &amp;get_output;
 req.err_hook = &amp;get_err;
 req.done_hook = &amp;get_complete;</pre>
<span id=golf_copied_221 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_221' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_221, code_221, golf_copied_221)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<div class="vsub"><a id="Multithreading"></a>Multithreading</div>
The Golf client is MT-safe, meaning you can use it both in single-threaded and multi-threaded programs. Note that each thread must have its own copy of "gg_cli" request variable, since it provides both input and output parameters to a request call and as such cannot be shared between the threads.<br/>
<div class="vsub"><a id="Usage"></a>Usage</div>
Do not use this API directly with Golf - use <a href='/call-remote.html'>call-remote</a> instead which is made specifically for use in .golf files. Otherwise, you can use this API with any program.<br/>
<div class="vsub"><a id="Using API without Golf"></a>Using API without Golf</div>
You can use API without installing Golf. To do that:<br/>
<ul><li>get the Golf source code,<br/>
</li><li>copy source files "gcli.c" and "gcli.h" to where you need to build your program,<br/>
</li><li>add the content of Golf's "LICENSE" file to your own in order to include the license for these source files,<br/>
</li><li>then make your application:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_222'>
 gcc -o cli cli.c gcli.c</pre>
<span id=golf_copied_222 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_222' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_222, code_222, golf_copied_222)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
</li></ul>
Note that you do not need to install any other dependencies, as API is entirely contained in the aforementioned source files.<br/>
<div class="vsub"><a id="Examples"></a>Examples</div>
<div class="vsub"><a id="Simple example"></a>Simple example</div>
The following example is a simple demonstration, with minimum of options used. Copy the C code to file "cli.c" in a directory of its own:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_223'>
 <span class="PreProc">#include </span><span class="Constant">&quot;gcli.h&quot;</span>

 <span class="Type">void</span> main ()
<span class="Statement"> {</span>
     <span class="Comment">// Request type gg_cli - create a request variable and zero it out</span>
     gg_cli req = {<span class="Constant">0</span>};

     req.server = <span class="Constant">&quot;/var/lib/gg/helloworld/sock/sock&quot;</span>; <span class="Comment">// Unix socket</span>
     req.req_method = <span class="Constant">&quot;GET&quot;</span>; <span class="Comment">// GET HTTP method</span>
     req.app_path = <span class="Constant">&quot;/helloworld&quot;</span>; <span class="Comment">// application path</span>
     req.req = <span class="Constant">&quot;/hello-simple&quot;</span>; <span class="Comment">// request name</span>

     <span class="Comment">// Make a request</span>
     <span class="Type">int</span> res = gg_cli_request (&amp;req);

     <span class="Comment">// Check return status, and if there's an error, display error code and the</span>
     <span class="Comment">// corresponding error message. Otherwise, print out service response.</span>
     <span class="Statement">if</span> (res != GG_OKAY) printf(<span class="Constant">&quot;Request failed [</span><span class="Special">%d</span><span class="Constant">] [</span><span class="Special">%s</span><span class="Constant">]</span><span class="Special">\n</span><span class="Constant">&quot;</span>, res, req.errm);
     <span class="Statement">else</span> printf(<span class="Constant">&quot;</span><span class="Special">%s</span><span class="Constant">&quot;</span>, gg_cli_data(&amp;req));

     <span class="Comment">// Free up resources so there are no memory leaks</span>
     gg_cli_delete(&amp;req);
<span class="Statement"> }</span></pre>
<span id=golf_copied_223 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_223' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_223, code_223, golf_copied_223)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
To make this client application:<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_232'>
gcc <span class="Special">-o</span> cli cli.c <span class="PreProc">$(</span><span class="Special">gg </span><span class="Special">-i</span><span class="PreProc">)</span></pre>
<span id=golf_copied_232 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_232' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_232, code_232, golf_copied_232)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
In this case, you're using a Unix socket to communicate with the Golf service. To test with a Golf service handler, copy the following code to "hello_simple.golf" file in a separate directory:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_224'>
<span class="Statement"> begin-handler</span> /hello_simple<span class="Identifier"> public</span>
<span class="Statement">    silent-header</span>
<span class="Statement">    @</span>Hi there!
<span class="Statement"> end-handler</span></pre>
<span id=golf_copied_224 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_224' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_224, code_224, golf_copied_224)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Create and make the Golf application and run it via local Unix socket:<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_234'>
sudo mgrg <span class="Special">-i</span> <span class="Special">-u</span> <span class="PreProc">$(</span><span class="Special">whoami</span><span class="PreProc">)</span> helloworld
gg <span class="Special">-q</span>
mgrg <span class="Special">-m</span> quit helloworld
mgrg <span class="Special">-w</span> <span class="Constant">1</span> helloworld</pre>
<span id=golf_copied_234 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_234' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_234, code_234, golf_copied_234)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Run the client:<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_236'>
./cli</pre>
<span id=golf_copied_236 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_236' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_236, code_236, golf_copied_236)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
The output is, as expected:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_225'>
 Hi there!</pre>
<span id=golf_copied_225 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_225' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_225, code_225, golf_copied_225)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<div class="vsub"><a id="Example with more options"></a>Example with more options</div>
This example demonstrates using multiple options, including using TCP sockets connecting to a host and port number, environment variables, query string, request body and request execution timeout. It will also show the separation of "data" and "error" (i.e. stdout and stderr) streams from the service.<br/>
<br/>
Copy this to file "cli1.c" in a directory of its own - note that in this example a server will run on localhost (127.0.0.1) and TCP port 2301:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_226'>
 <span class="PreProc">#include </span><span class="Constant">&quot;gcli.h&quot;</span>

 <span class="Type">void</span> main ()
<span class="Statement"> {</span>
     <span class="Comment">// Request type gg_cli - create a request variable</span>
     gg_cli req;
     <span class="Comment">// Initialize request</span>
     memset (&amp;req, <span class="Constant">0</span>, <span class="Statement">sizeof</span>(req));

     <span class="Comment">// Add </span><span class="Constant">3</span><span class="Comment"> environment variables (in the form of name, value, name, value, ... , NULL)</span>
     <span class="Type">char</span> *env[] = { <span class="Constant">&quot;REMOTE_USER&quot;</span>, <span class="Constant">&quot;John&quot;</span>, <span class="Constant">&quot;SOME_VAR&quot;</span>, <span class="Constant">&quot;SOME</span><span class="Special">\n</span><span class="Constant">VALUE&quot;</span>, <span class="Constant">&quot;NEW_VAR&quot;</span>, <span class="Constant">&quot;1000&quot;</span>, <span class="Constant">NULL</span> };

     <span class="Comment">// Create a request</span>
     <span class="Comment">// Environment variables to pass to service request</span>
     req.env = env;
     <span class="Comment">// Server IP and port</span>
     req.server = <span class="Constant">&quot;127.0.0.1:2301&quot;</span>;
     <span class="Comment">// Request method</span>
     req.req_method = <span class="Constant">&quot;GET&quot;</span>;
     <span class="Comment">// Application path</span>
     req.app_path = <span class="Constant">&quot;/helloworld&quot;</span>;
     <span class="Comment">// Request</span>
     req.req = <span class="Constant">&quot;/hello&quot;</span>;
     <span class="Comment">// URL parameters (path and query string)</span>
     req.url_params = <span class="Constant">&quot;par1=val1&amp;par2=91&quot;</span>;
     <span class="Comment">// Content type</span>
     req.content_type = <span class="Constant">&quot;application/json&quot;</span>;
     <span class="Comment">// Content (i.e. request body)</span>
     req.req_body = <span class="Constant">&quot;This is request body&quot;</span>;
     <span class="Comment">// Content length</span>
     req.content_len = strlen (req.req_body);
     <span class="Comment">// No timeout (set to </span><span class="Constant">0</span><span class="Comment">)</span>
     req.timeout = <span class="Constant">0</span>;

     <span class="Comment">// Make a request</span>
     <span class="Type">int</span> res = gg_cli_request (&amp;req);

     <span class="Comment">// Check return status, and if there's an error, display error code and the</span>
     <span class="Comment">// corresponding error message</span>
     <span class="Statement">if</span> (res != GG_OKAY) printf(<span class="Constant">&quot;Request failed [</span><span class="Special">%d</span><span class="Constant">] [</span><span class="Special">%s</span><span class="Constant">]</span><span class="Special">\n</span><span class="Constant">&quot;</span>, res, req.errm);
     <span class="Statement">else</span> {
        <span class="Comment">// If successful, display request results</span>
        <span class="Comment">// Exit code from the service processing</span>
        printf(<span class="Constant">&quot;Server status </span><span class="Special">%d</span><span class="Special">\n</span><span class="Constant">&quot;</span>, req.req_status);
        <span class="Comment">// Length of reply from service</span>
        printf(<span class="Constant">&quot;Len of data </span><span class="Special">%d</span><span class="Special">\n</span><span class="Constant">&quot;</span>, req.data_len);
        <span class="Comment">// Length of any error from service</span>
        printf(<span class="Constant">&quot;Len of error </span><span class="Special">%d</span><span class="Special">\n</span><span class="Constant">&quot;</span>, req.error_len);
        <span class="Comment">// Reply from service</span>
        printf(<span class="Constant">&quot;Data [</span><span class="Special">%s</span><span class="Constant">]</span><span class="Special">\n</span><span class="Constant">&quot;</span>, gg_cli_data(&amp;req));
        <span class="Comment">// Any error message from service</span>
        printf(<span class="Constant">&quot;Error [</span><span class="Special">%s</span><span class="Constant">]</span><span class="Special">\n</span><span class="Constant">&quot;</span>, gg_cli_error(&amp;req));
<span class="Statement">     }</span>

     <span class="Comment">// Free up resources so there are no memory leaks</span>
     gg_cli_delete(&amp;req);
<span class="Statement"> }</span></pre>
<span id=golf_copied_226 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_226' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_226, code_226, golf_copied_226)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Note that the URL parameters (i.e. "req.url_params") could have been written as a combination of a path segment and query string (see <a href='/request.html'>request</a>):<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_227'>
 req.url_params = <span class="Constant">&quot;/par1/val1?par2=91&quot;</span>;</pre>
<span id=golf_copied_227 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_227' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_227, code_227, golf_copied_227)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
or just as a path segment:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_228'>
 req.url_params = <span class="Constant">&quot;/par1=val1/par2=91&quot;</span>;</pre>
<span id=golf_copied_228 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_228' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_228, code_228, golf_copied_228)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
To make this client application:<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_238'>
gcc <span class="Special">-o</span> cli1 cli1.c <span class="PreProc">$(</span><span class="Special">gg </span><span class="Special">-i</span><span class="PreProc">)</span></pre>
<span id=golf_copied_238 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_238' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_238, code_238, golf_copied_238)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
To test it, you can create a Golf application. Copy this to "hello.golf" file in a separate directory:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_229'>
<span class="Statement"> begin-handler</span> /hello<span class="Identifier"> public</span>
<span class="Statement">     silent-header</span>

     <span class="Comment">// Get request body</span>
<span class="Statement">     request-body</span> rb

     <span class="Comment">// Input params</span>
<span class="Statement">     get-param</span> par1
<span class="Statement">     get-param</span> par2

     <span class="Comment">// Get environment variables passed on from the client</span>
<span class="Statement">     get-sys</span><span class="Identifier"> environment</span> <span class="Constant">&quot;REMOTE_USER&quot;</span><span class="Type"> to</span> ruser
<span class="Statement">     get-sys</span><span class="Identifier"> environment</span> <span class="Constant">&quot;SOME_VAR&quot;</span><span class="Type"> to</span> somev
<span class="Statement">     get-sys</span><span class="Identifier"> environment</span> <span class="Constant">&quot;NEW_VAR&quot;</span><span class="Type"> to</span> newv

     <span class="Comment">// Output, print the environment variables, the PID of server process and the request body received from the client</span>
<span class="Statement">     get-req</span><span class="Identifier"> process-id</span><span class="Type"> to</span> pid
<span class="Statement">     @</span>Hello World! [<span class="Statement">&lt;&lt;p-out</span> ruser<span class="Statement">&gt;&gt;</span>] [<span class="Statement">&lt;&lt;p-out</span> somev<span class="Statement">&gt;&gt;</span>] [<span class="Statement">&lt;&lt;p-out</span> newv<span class="Statement">&gt;&gt;</span>] [<span class="Statement">&lt;&lt;p-out</span> par1<span class="Statement">&gt;&gt;</span>] [<span class="Statement">&lt;&lt;p-out</span> par2<span class="Statement">&gt;&gt;</span>] <span class="Statement">&lt;&lt;p-num</span> pid<span class="Statement">&gt;&gt;</span> <span class="Statement">&lt;&lt;p-out</span> rb<span class="Statement">&gt;&gt;</span>

     <span class="Comment">// Output back a number of lines, generally as </span><span class="Constant">&quot;Output line #&lt;num of line&gt;&quot;</span>
     <span class="Comment">// After line #</span><span class="Constant">1418</span><span class="Comment">, print out </span><span class="Constant">&quot;Line 1419 has an error&quot;</span><span class="Comment"> to stderr</span>
     <span class="Comment">// After line #</span><span class="Constant">4418</span><span class="Comment">, report an error and exit</span>
     <span class="Comment">// This demostrates outputting data to both stdout and stderr</span>
<span class="Statement">     start-loop</span><span class="Identifier"> repeat</span> <span class="Constant">8000</span><span class="Type"> use</span> i<span class="Identifier"> start-with</span> <span class="Constant">0</span>
<span class="Statement">         @</span>Output line #<span class="Statement">&lt;&lt;p-num</span> i<span class="Statement">&gt;&gt;</span>
<span class="Statement">         if-true</span> i<span class="Identifier"> equal</span> <span class="Constant">1419</span>
<span class="Statement">             pf-out</span> <span class="Constant">&quot;Line </span><span class="Special">%ld</span><span class="Constant"> has an error</span><span class="Special">\n</span><span class="Constant">&quot;</span>, i<span class="Identifier"> to-error</span>
<span class="Statement">         end-if</span>
<span class="Statement">         if-true</span> i<span class="Identifier"> equal</span> <span class="Constant">4419</span>
             <span class="Comment">// Exit code of the service execution</span>
<span class="Statement">             handler-status</span> <span class="Constant">82</span>
<span class="Statement">             report-error</span> <span class="Constant">&quot;</span><span class="Special">%s</span><span class="Constant">&quot;</span>, <span class="Constant">&quot;Some error!&quot;</span>
<span class="Statement">         end-if</span>
<span class="Statement">     end-loop</span>
<span class="Statement"> end-handler</span></pre>
<span id=golf_copied_229 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_229' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_229, code_229, golf_copied_229)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Create and make the Golf application and run it on local TCP port 2301 to match the client above:<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_240'>
sudo mgrg <span class="Special">-i</span> <span class="Special">-u</span> <span class="PreProc">$(</span><span class="Special">whoami</span><span class="PreProc">)</span> helloworld
gg <span class="Special">-q</span>
mgrg <span class="Special">-m</span> quit helloworld
mgrg <span class="Special">-w</span> <span class="Constant">1</span> <span class="Special">-p</span> <span class="Constant">2301</span> helloworld</pre>
<span id=golf_copied_240 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_240' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_240, code_240, golf_copied_240)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Run the client:<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_242'>
./cli1</pre>
<span id=golf_copied_242 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_242' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_242, code_242, golf_copied_242)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
The output:<br/>
<div class='ncode' style='position:relative;padding-right:16px;'>
<pre id='code_231'>
Server status 82
Len of data 78530
Len of error 35
Data [Hello World! [John] [SOME
VALUE] [1000] [val1] [91] 263002 This is request body
Output line #0
Output line #1
Output line #2
Output line #3
Output line #4
Output line #5
Output line #6
Output line #7

...
Output line #4413
Output line #4414
Output line #4415
Output line #4416
Output line #4417
Output line #4418
Output line #4419
]
Error [Line 1419 has an error
Some error!
]</pre>
<span id=golf_copied_231 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_231' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_231, code_231, golf_copied_231)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
The output shows service exit code (82, see <a href='/handler-status.html'>handler-status</a> in the Golf code above), length of data output, and other information which includes environment variables passed to the service from the client, the PID of server process, the request body from the client, and then the error output. Note that the data output (stdout) and the error output (stderr) are separated, since the protocol does use separate streams over the same connection. This makes working with the output easy, while the data transfer is fast at the same time.<br/>
<!--BEFSAL13--><div class="vsub"><a id="See also"></a>See also</div>
 <a name='API'></a><span style="font-weight:bold;">API</span><br/>
<a href='/Client-API.html'>Client-API</a> &nbsp;<br/>
<a href='/Server-API.html'>Server-API</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='/documentation.html'>documentation</a><br/>
<a id='close-file.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:right;background-color:white;'><a href='https://golf-lang.com' style='border-bottom:0px'><img src='https://golf-lang.com/golf.png'/></a></div><div class='vhub' style='margin-top:10px;'>&nbsp;Close file</div><hr/><span style="font-weight:bold;">Purpose</span>: Close file.<br/>
<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_246'>
<span class="Statement"> close-file</span><span class="Identifier"> file-id</span> &lt;file id&gt; \
     [<span class="Type"> status</span> &lt;status&gt; ]</pre>
<span id=golf_copied_246 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_246' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_246, code_246, golf_copied_246)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
close-file closes file &lt;file id&gt; previously opened with <a href='/open-file.html'>open-file</a>, where &lt;file id&gt; is an open file identifier.<br/>
<br/>
You can obtain the status of file closing via &lt;status&gt; number (in "status" clause). The &lt;status&gt; is GG_OKAY if file is closed, or GG_ERR_CLOSE if could not close file.<br/>
<br/>
If you do not close a file opened with open-file, Golf will automatically close it when the request ends.<br/>
<div class="vsub"><a id="Examples"></a>Examples</div>
See <a href='/open-file.html'>open-file</a>.<br/>
<!--BEFSAL13--><div class="vsub"><a id="See also"></a>See also</div>
 <a name='Files'></a><span style="font-weight:bold;">Files</span><br/>
<a href='/close-file.html'>close-file</a> &nbsp;<br/>
<a href='/copy-file.html'>copy-file</a> &nbsp;<br/>
<a href='/delete-file.html'>delete-file</a> &nbsp;<br/>
<a href='/file-position.html'>file-position</a> &nbsp;<br/>
<a href='/file-storage.html'>file-storage</a> &nbsp;<br/>
<a href='/file-uploading.html'>file-uploading</a> &nbsp;<br/>
<a href='/lock-file.html'>lock-file</a> &nbsp;<br/>
<a href='/open-file.html'>open-file</a> &nbsp;<br/>
<a href='/read-file.html'>read-file</a> &nbsp;<br/>
<a href='/read-line.html'>read-line</a> &nbsp;<br/>
<a href='/rename-file.html'>rename-file</a> &nbsp;<br/>
<a href='/stat-file.html'>stat-file</a> &nbsp;<br/>
<a href='/temporary-file.html'>temporary-file</a> &nbsp;<br/>
<a href='/uniq-file.html'>uniq-file</a> &nbsp;<br/>
<a href='/unlock-file.html'>unlock-file</a> &nbsp;<br/>
<a href='/write-file.html'>write-file</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='/documentation.html'>documentation</a><br/>
<a id='code-blocks.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:right;background-color:white;'><a href='https://golf-lang.com' style='border-bottom:0px'><img src='https://golf-lang.com/golf.png'/></a></div><div class='vhub' style='margin-top:10px;'>&nbsp;Code blocks</div><hr/><div class="vsub"><a id="Code blocks"></a>Code blocks</div>
Use curly braces ("{" and "}") to open and close a code block. They create a separate scope for previously non-existing variables defined within them, which begins with "{" and ends with "}". Note that if a variable existed in an outer scope, it cannot be created in the inner scope.<br/>
<br/>
Note that <a href='/if-true.html'>if-true</a>, <a href='/run-query.html'>run-query</a>, <a href='/start-loop.html'>start-loop</a> and <a href='/read-line.html'>read-line</a> statements contain implicit code blocks, meaning the code between them and the accompanying end-statement is within implicit "{" and "}".<br/>
<div class="vsub"><a id="Examples"></a>Examples</div>
The following code will first print out "outside" and then "inside" twice, illustrating the fact that variable "s1" is defined only in the outer scope once. Variable "s2" exists only in inner scope:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_247'>
<span class="Statement"> begin-handler</span> /scope<span class="Identifier"> public</span>
<span class="Statement">     @</span><span class="Statement">&lt;&lt;p-out</span> s1<span class="Statement">&gt;&gt;</span>
<span class="Statement">     set-string</span> s1=<span class="Constant">&quot;outside&quot;</span>
<span class="Statement">     {</span>
<span class="Statement">         set-string</span> s2=<span class="Constant">&quot;inner variable&quot;</span>
<span class="Statement">         set-string</span> s1=<span class="Constant">&quot;inside&quot;</span>
<span class="Statement">         @</span><span class="Statement">&lt;&lt;p-out</span> s1<span class="Statement">&gt;&gt;</span>
<span class="Statement">     }</span>
<span class="Statement">     @</span><span class="Statement">&lt;&lt;p-out</span> s1<span class="Statement">&gt;&gt;</span>
<span class="Statement"> end-handler</span></pre>
<span id=golf_copied_247 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_247' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_247, code_247, golf_copied_247)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<!--BEFSAL13--><div class="vsub"><a id="See also"></a>See also</div>
 <a name='Program flow'></a><span style="font-weight:bold;">Program flow</span><br/>
<a href='/break-loop.html'>break-loop</a> &nbsp;<br/>
<a href='/code-blocks.html'>code-blocks</a> &nbsp;<br/>
<a href='/continue-loop.html'>continue-loop</a> &nbsp;<br/>
<a href='/do-once.html'>do-once</a> &nbsp;<br/>
<a href='/exit-handler.html'>exit-handler</a> &nbsp;<br/>
<a href='/if-defined.html'>if-defined</a> &nbsp;<br/>
<a href='/if-true.html'>if-true</a> &nbsp;<br/>
<a href='/return-handler.html'>return-handler</a> &nbsp;<br/>
<a href='/set-bool.html'>set-bool</a> &nbsp;<br/>
<a href='/start-loop.html'>start-loop</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='/documentation.html'>documentation</a><br/>
<a id='command-line.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:right;background-color:white;'><a href='https://golf-lang.com' style='border-bottom:0px'><img src='https://golf-lang.com/golf.png'/></a></div><div class='vhub' style='margin-top:10px;'>&nbsp;Command line</div><hr/>A Golf application can run as a web application or a command-line program, or both - such as when some requests can be either fulfilled through web interface or executed otherwise (such as on the command line). Note that Golf produces two separate executables: a <a href='/service.html'>service</a> one and a command-line one - they are different because command-line program does not need the service library and thus is smaller. <br/>
<br/>
The name of the command-line executable is the same as the application name, and its path is (assuming &lt;app name&gt; is the application name):<br/>
<div class='ncode' style='position:relative;padding-right:16px;'>
<pre id='code_248'>
/var/lib/gg/bld/&lt;app name&gt;/&lt;app name&gt;</pre>
<span id=golf_copied_248 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_248' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_248, code_248, golf_copied_248)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<div class="vsub"><a id="Output"></a>Output</div>
A command-line program works the same way as a service executable, and the output is the same, except that it is directed to stdout (standard output) and stderr (standard error). <br/>
<div class="vsub"><a id="Exit code"></a>Exit code</div>
To specify the exit code of a command-line program, use <a href='/handler-status.html'>handler-status</a>. To exit the program, use <a href='/exit-handler.html'>exit-handler</a>, or otherwise the program will exit when it reaches the end of a <a href='/request.html'>request</a>.<br/>
<div class="vsub"><a id="Executing a request"></a>Executing a request</div>
Here is how to execute a request "add-stock" in application "stock" with parameters "name" having a value of "ABC" and "price" a value of "300":<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_249'>
gg <span class="Special">-r</span> <span class="Special">--app</span><span class="Statement">=</span><span class="Statement">&quot;</span><span class="Constant">/stock</span><span class="Statement">&quot;</span> <span class="Special">--req</span><span class="Statement">=</span><span class="Statement">&quot;</span><span class="Constant">/add-stock?name=ABC&amp;price=300</span><span class="Statement">&quot;</span> <span class="Special">--exec</span></pre>
<span id=golf_copied_249 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_249' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_249, code_249, golf_copied_249)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Note that you if specify parameters as part of the path, you could write the above the same way as in a URL:<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_250'>
gg <span class="Special">-r</span> <span class="Special">--app</span><span class="Statement">=</span><span class="Statement">&quot;</span><span class="Constant">/stock</span><span class="Statement">&quot;</span> <span class="Special">--req</span><span class="Statement">=</span><span class="Statement">&quot;</span><span class="Constant">/add-stock/name=ABC/price=300</span><span class="Statement">&quot;</span> <span class="Special">--exec</span></pre>
<span id=golf_copied_250 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_250' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_250, code_250, golf_copied_250)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
You can generate the shell code to execute the above without using <a href='/gg.html'>gg</a> by omitting "--exec" option, for instance:<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_251'>
gg <span class="Special">-r</span> <span class="Special">--app</span><span class="Statement">=</span><span class="Statement">&quot;</span><span class="Constant">/stock</span><span class="Statement">&quot;</span> <span class="Special">--req</span><span class="Statement">=</span><span class="Statement">&quot;</span><span class="Constant">/add-stock/name=ABC/price=300</span><span class="Statement">&quot;</span></pre>
<span id=golf_copied_251 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_251' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_251, code_251, golf_copied_251)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<div class="vsub"><a id="Including a request body"></a>Including a request body</div>
You can include a request body when executing a singe-run program. It is always included as the standard input (stdin) to the program. <br/>
<br/>
You must provide the length of this input and the type of input, as well as a request method (such as POST, PUT, PATCH, GET, DELETE or any other).<br/>
<br/>
Here is an example of using a request body to make a POST request on the command line - the application name is "json" and request name is "process". File "prices.json" is sent as request body:<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_252'>
gg <span class="Special">-r</span> <span class="Special">--app</span><span class="Statement">=</span>/json <span class="Special">--req</span><span class="Statement">=</span><span class="Statement">'</span><span class="Constant">/process?act=get_total&amp;period=YTD</span><span class="Statement">'</span> <span class="Special">--method</span><span class="Statement">=</span>POST <span class="Special">--content</span><span class="Statement">=</span>prices.json <span class="Special">--content-type</span><span class="Statement">=</span>application/json <span class="Special">--exec</span></pre>
<span id=golf_copied_252 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_252' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_252, code_252, golf_copied_252)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
You can generate the shell code for the above by omitting "--exec" option of <a href='/gg.html'>gg</a> utility.<br/>
<br/>
Note that you can also include any other headers as environment variables by using the "HTTP_" convention, where custom headers are capitalized with use of underscore for dashes and prefixed with "HTTP_", for example header "Golf-Header" would be set as:<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_253'>
<span class="Statement">export</span> <span class="Identifier">HTTP_GOLF_HEADER</span>=<span class="Statement">&quot;</span><span class="Constant">some value</span><span class="Statement">&quot;</span></pre>
<span id=golf_copied_253 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_253' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_253, code_253, golf_copied_253)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
You would set the "HTTP_" variable(s) prior to executing the program.<br/>
<div class="vsub"><a id="Suppressing HTTP header output for the entire application"></a>Suppressing HTTP header output for the entire application</div>
If you wish to suppress the output of HTTP headers for all requests, use "--silent-header" option in "gg -r":<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_254'>
gg <span class="Special">-r</span> <span class="Special">--app</span><span class="Statement">=</span><span class="Statement">&quot;</span><span class="Constant">/stock</span><span class="Statement">&quot;</span> <span class="Special">--req</span><span class="Statement">=</span><span class="Statement">&quot;</span><span class="Constant">/add-stock/name=ABC/price=300</span><span class="Statement">&quot;</span> <span class="Special">--exec</span> <span class="Special">--silent-header</span></pre>
<span id=golf_copied_254 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_254' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_254, code_254, golf_copied_254)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
This will suppress the output of HTTP headers (either the default or with <a href='/out-header.html'>out-header</a>), or for any other case where headers are output. This has the same effect as <a href='/silent-header.html'>silent-header</a>, the only difference is that the environment variable applies to the entire application.<br/>
<div class="vsub"><a id="URL-encoding the input"></a>URL-encoding the input</div>
Any data in "--req" option (and consequently in PATH_INFO or QUERY_STRING environment vairables if calling directly from shell) must be formatted to be a valid URL; for example, data that contains special characters (like "&amp;" or "?") must be URL-encoded, for instance:<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_255'>
gg <span class="Special">-r</span> <span class="Special">--app</span><span class="Statement">=</span><span class="Statement">&quot;</span><span class="Constant">/stock</span><span class="Statement">&quot;</span> <span class="Special">--req</span><span class="Statement">=</span><span class="Statement">&quot;</span><span class="Constant">/add-stock/name=ABC%3F/price=300</span><span class="Statement">&quot;</span></pre>
<span id=golf_copied_255 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_255' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_255, code_255, golf_copied_255)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
In this case, parameter "name" has value of "ABC?", where special character "?" is encoded as "%3F". <br/>
<br/>
To make sure all your input parameters are properly URL-encoded, you can use Golf's v1 code processor:<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_256'>
<span class="PreProc">$($(</span><span class="Special">gg </span><span class="Special">-l</span><span class="PreProc">)</span><span class="Special">/v1 </span><span class="Special">-urlencode</span><span class="Special"> </span><span class="Statement">'</span><span class="Constant">&lt;your data&gt;</span><span class="Statement">'</span><span class="PreProc">)</span></pre>
<span id=golf_copied_256 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_256' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_256, code_256, golf_copied_256)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
For instance, to encode "a?=b" as a parameter:<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_257'>
gg <span class="Special">-r</span> <span class="Special">--app</span><span class="Statement">=</span><span class="Statement">&quot;</span><span class="Constant">/stock</span><span class="Statement">&quot;</span> <span class="Special">--req</span><span class="Statement">=</span><span class="Statement">&quot;</span><span class="Constant">/add-stock/name=</span><span class="PreProc">$($(</span><span class="Special">gg </span><span class="Special">-l</span><span class="PreProc">)</span><span class="Special">/v1 </span><span class="Special">-urlencode</span><span class="Special"> </span><span class="Statement">'</span><span class="Constant">AB?</span><span class="Statement">'</span><span class="PreProc">)</span><span class="Constant">/price=300</span><span class="Statement">&quot;</span></pre>
<span id=golf_copied_257 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_257' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_257, code_257, golf_copied_257)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
If your parameters do not contain characters that need URL encoding, then you can skip this.<br/>
<div class="vsub"><a id="CGI"></a>CGI</div>
You can also use a command-line program with <a href='/CGI.html'>CGI</a> (Common Gateway Interface). <br/>
<!--BEFSAL13--><div class="vsub"><a id="See also"></a>See also</div>
 <a name='Running application'></a><span style="font-weight:bold;">Running application</span><br/>
<a href='/application-setup.html'>application-setup</a> &nbsp;<br/>
<a href='/CGI.html'>CGI</a> &nbsp;<br/>
<a href='/command-line.html'>command-line</a> &nbsp;<br/>
<a href='/service.html'>service</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='/documentation.html'>documentation</a><br/>
<a id='commit-transaction.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:right;background-color:white;'><a href='https://golf-lang.com' style='border-bottom:0px'><img src='https://golf-lang.com/golf.png'/></a></div><div class='vhub' style='margin-top:10px;'>&nbsp;Commit transaction</div><hr/><span style="font-weight:bold;">Purpose</span>: Commits a database transaction.<br/>
<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_258'>
<span class="Statement"> commit-transaction</span> [ @&lt;database&gt; ] \
     [<span class="Identifier"> on-error-continue</span> |<span class="Identifier"> on-error-exit</span> ] \
     [<span class="Type"> error</span> &lt;error&gt; ] [<span class="Type"> error-text</span> &lt;error text&gt; ] \
     [<span class="Identifier"> options</span> &lt;options&gt; ]</pre>
<span id=golf_copied_258 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_258' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_258, code_258, golf_copied_258)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Database transaction started with <a href='/begin-transaction.html'>begin-transaction</a> is committed with commit-transaction. <br/>
<br/>
&lt;options&gt; (in "options" clause) is any additional options to send to database you wish to supply for this functionality.<br/>
<br/>
Once you start a transaction with <a href='/begin-transaction.html'>begin-transaction</a>, you must either commit it with <a href='/commit-transaction.html'>commit-transaction</a> or rollback with <a href='/rollback-transaction.html'>rollback-transaction</a>. If you do neither, your transaction will be rolled back once the <a href='/request.html'>request</a> has completed and your program will stop with an error message. This is because opening a transaction and leaving without committing or a rollback is a bug in your program. &nbsp;<br/>
<br/>
You must use begin-transaction, commit-transaction and rollback-transaction instead of calling this functionality through <a href='/run-query.html'>run-query</a>.<br/>
<div class="vsub"><a id="Database"></a>Database</div>
&lt;database&gt; is specified in "@" clause and is the name of the <a href='/database-config-file.html'>database-config-file</a>. If ommited, your program must use exactly one database (see --db option in <a href='/gg.html'>gg</a>).<br/>
<div class="vsub"><a id="Error handling"></a>Error handling</div>
The error code is available in &lt;error&gt; variable in "error" clause - this code is always "0" if successful. The &lt;error&gt; code may or may not be a number but is always returned as a string value. In case of error, error text is available in "error-text" clause in &lt;error text&gt; string.<br/>
<br/>
"on-error-continue" clause specifies that <a href='/request.html'>request</a> processing will continue in case of an error, whereas "on-error-exit" clause specifies that it will exit. This setting overrides database-level <a href='/db-error.html'>db-error</a> for this specific statement only. If you use "on-error-continue", be sure to check the error code.<br/>
<br/>
Note that if database connection was lost, and could not be reestablished, the request will error out (see <a href='/error-handling.html'>error-handling</a>).<br/>
<div class="vsub"><a id="Examples"></a>Examples</div>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_259'>
<span class="Statement"> begin-transaction</span> @mydb
<span class="Statement"> run-query</span> @mydb=<span class="Constant">&quot;insert into employee (name, dateOfHire) values ('Terry', now())&quot;</span>
<span class="Statement"> run-query</span> @mydb=<span class="Constant">&quot;insert into payroll (name, salary) values ('Terry', 100000)&quot;</span>
<span class="Statement"> commit-transaction</span> @mydb</pre>
<span id=golf_copied_259 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_259' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_259, code_259, golf_copied_259)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<!--BEFSAL13--><div class="vsub"><a id="See also"></a>See also</div>
 <a name='Database'></a><span style="font-weight:bold;">Database</span><br/>
<a href='/begin-transaction.html'>begin-transaction</a> &nbsp;<br/>
<a href='/commit-transaction.html'>commit-transaction</a> &nbsp;<br/>
<a href='/current-row.html'>current-row</a> &nbsp;<br/>
<a href='/database-config-file.html'>database-config-file</a> &nbsp;<br/>
<a href='/db-error.html'>db-error</a> &nbsp;<br/>
<a href='/mariadb-database.html'>mariadb-database</a> &nbsp;<br/>
<a href='/postgresql-database.html'>postgresql-database</a> &nbsp;<br/>
<a href='/rollback-transaction.html'>rollback-transaction</a> &nbsp;<br/>
<a href='/run-query.html'>run-query</a> &nbsp;<br/>
<a href='/sqlite-database.html'>sqlite-database</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='/documentation.html'>documentation</a><br/>
<a id='connect-apache-tcp-socket.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:right;background-color:white;'><a href='https://golf-lang.com' style='border-bottom:0px'><img src='https://golf-lang.com/golf.png'/></a></div><div class='vhub' style='margin-top:10px;'>&nbsp;Connect apache tcp socket</div><hr/>This shows how to connect your application listening on TCP port &lt;port number&gt; (started with "-p" option in <a href='/mgrg.html'>mgrg</a>) to Apache web server.<br/>
<br/>
<span style="font-weight:bold;">- Step 1</span>:<br/>
To setup Apache as a reverse proxy and connect your application to it, you need to enable FastCGI proxy support, which generally means "proxy" and "proxy_fcgi" modules - this is done <span style="font-style:italic">only once</span>:<br/>
<ul><li>For Debian (like Ubuntu) and OpenSUSE systems you need to enable proxy and proxy_fcgi modules:<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_261'>
sudo a2enmod proxy
sudo a2enmod proxy_fcgi</pre>
<span id=golf_copied_261 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_261' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_261, code_261, golf_copied_261)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
</li>
<li>For Fedora systems (or others like Archlinux) enable proxy and proxy_fcgi modules by adding (or uncommenting) LoadModule directives in the Apache configuration file - the default location of this file on Linux depends on the distribution. For Fedora (such as RedHat), Archlinux:<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_263'>
sudo vi /etc/httpd/conf/httpd.conf</pre>
<span id=golf_copied_263 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_263' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_263, code_263, golf_copied_263)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
For OpenSUSE:<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_264'>
sudo vi /etc/apache2/httpd.conf</pre>
<span id=golf_copied_264 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_264' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_264, code_264, golf_copied_264)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Add this to the end of the file:<br/>
<div class='ncode' style='position:relative;padding-right:16px;'>
<pre id='code_260'>
LoadModule proxy_module modules/mod_proxy.so
LoadModule proxy_fcgi_module modules/mod_proxy_fcgi.so</pre>
<span id=golf_copied_260 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_260' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_260, code_260, golf_copied_260)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
</li></ul>
<span style="font-weight:bold;">- Step 2</span>:<br/>
Edit the Apache configuration file:<br/>
<ul><li>For Debian (such as Ubuntu):<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_265'>
sudo vi /etc/apache2/apache2.conf</pre>
<span id=golf_copied_265 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_265' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_265, code_265, golf_copied_265)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
</li>
<li>for Fedora (such as RedHat), Archlinux:<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_266'>
sudo vi /etc/httpd/conf/httpd.conf</pre>
<span id=golf_copied_266 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_266' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_266, code_266, golf_copied_266)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
</li>
<li>and for OpenSUSE:<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_267'>
sudo vi /etc/apache2/httpd.conf</pre>
<span id=golf_copied_267 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_267' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_267, code_267, golf_copied_267)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
</li></ul>
Add this to the end of file ("/&lt;app path&gt;" is the application path, see <a href='/request.html'>request</a>):<br/>
<div class='ncode' style='position:relative;padding-right:16px;'>
<pre id='code_262'>
ProxyPass &quot;/&lt;app path&gt;/&quot; fcgi://127.0.0.1:&lt;port number&gt;/</pre>
<span id=golf_copied_262 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_262' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_262, code_262, golf_copied_262)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<span style="font-weight:bold;">- Step 3</span>:<br/>
Finally, restart Apache. On Debian systems (like Ubuntu) or OpenSUSE:<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_268'>
sudo systemctl restart apache2</pre>
<span id=golf_copied_268 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_268' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_268, code_268, golf_copied_268)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
On Fedora systems (like RedHat) and Arch Linux:<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_269'>
sudo systemctl restart httpd</pre>
<span id=golf_copied_269 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_269' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_269, code_269, golf_copied_269)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Note: you must not have any other URL resource that starts with "/&lt;app path&gt;/" (such as for example "/&lt;app path&gt;/something") as the web server will attempt to pass them as a reverse proxy request, and they will likely not work. If you need to, you can change the application path to be different from "/&lt;app path&gt;", see <a href='/request.html'>request</a>.<br/>
<!--BEFSAL13--><div class="vsub"><a id="See also"></a>See also</div>
 <a name='Web servers'></a><span style="font-weight:bold;">Web servers</span><br/>
<a href='/connect-apache-tcp-socket.html'>connect-apache-tcp-socket</a> &nbsp;<br/>
<a href='/connect-apache-unix-socket.html'>connect-apache-unix-socket</a> &nbsp;<br/>
<a href='/connect-haproxy-tcp-socket.html'>connect-haproxy-tcp-socket</a> &nbsp;<br/>
<a href='/connect-nginx-tcp-socket.html'>connect-nginx-tcp-socket</a> &nbsp;<br/>
<a href='/connect-nginx-unix-socket.html'>connect-nginx-unix-socket</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='/documentation.html'>documentation</a><br/>
<a id='connect-apache-unix-socket.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:right;background-color:white;'><a href='https://golf-lang.com' style='border-bottom:0px'><img src='https://golf-lang.com/golf.png'/></a></div><div class='vhub' style='margin-top:10px;'>&nbsp;Connect apache unix socket</div><hr/>This shows how to connect your application listening on a Unix socket (started with <a href='/mgrg.html'>mgrg</a>) to Apache web server.<br/>
<br/>
<span style="font-weight:bold;">- Step 1</span>:<br/>
To setup Apache as a reverse proxy and connect your application to it, you need to enable FastCGI proxy support, which generally means "proxy" and "proxy_fcgi" modules - this is done <span style="font-style:italic">only once</span>:<br/>
<ul><li>For Debian (like Ubuntu) and OpenSUSE systems you need to enable proxy and proxy_fcgi modules:<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_271'>
sudo a2enmod proxy
sudo a2enmod proxy_fcgi</pre>
<span id=golf_copied_271 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_271' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_271, code_271, golf_copied_271)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
</li>
<li>For Fedora systems (or others like Archlinux) enable proxy and proxy_fcgi modules by adding (or uncommenting) LoadModule directives in the Apache configuration file - the default location of this file on Linux depends on the distribution. For Fedora (such as RedHat), Archlinux:<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_273'>
sudo vi /etc/httpd/conf/httpd.conf</pre>
<span id=golf_copied_273 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_273' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_273, code_273, golf_copied_273)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
For OpenSUSE:<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_274'>
sudo vi /etc/apache2/httpd.conf</pre>
<span id=golf_copied_274 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_274' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_274, code_274, golf_copied_274)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Add this to the end of the file:<br/>
<div class='ncode' style='position:relative;padding-right:16px;'>
<pre id='code_270'>
LoadModule proxy_module modules/mod_proxy.so
LoadModule proxy_fcgi_module modules/mod_proxy_fcgi.so</pre>
<span id=golf_copied_270 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_270' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_270, code_270, golf_copied_270)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
</li></ul>
<span style="font-weight:bold;">- Step 2</span>:<br/>
Edit the Apache configuration file:<br/>
<ul><li>For Debian (such as Ubuntu):<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_275'>
sudo vi /etc/apache2/apache2.conf</pre>
<span id=golf_copied_275 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_275' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_275, code_275, golf_copied_275)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
</li>
<li>for Fedora (such as RedHat), Archlinux:<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_276'>
sudo vi /etc/httpd/conf/httpd.conf</pre>
<span id=golf_copied_276 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_276' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_276, code_276, golf_copied_276)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
</li>
<li>and for OpenSUSE:<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_277'>
sudo vi /etc/apache2/httpd.conf</pre>
<span id=golf_copied_277 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_277' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_277, code_277, golf_copied_277)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
</li></ul>
Add this to the end of file ("/&lt;app path&gt;" is the application path (see <a href='/request.html'>request</a>) and "&lt;app name&gt;" is your application name):<br/>
<div class='ncode' style='position:relative;padding-right:16px;'>
<pre id='code_272'>
ProxyPass &quot;/&lt;app path&gt;/&quot; unix:///var/lib/gg/&lt;app name&gt;/sock/sock|fcgi://localhost/&lt;app path&gt;</pre>
<span id=golf_copied_272 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_272' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_272, code_272, golf_copied_272)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<span style="font-weight:bold;">- Step 3</span>:<br/>
Finally, restart Apache. On Debian systems (like Ubuntu) or OpenSUSE:<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_278'>
sudo systemctl restart apache2</pre>
<span id=golf_copied_278 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_278' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_278, code_278, golf_copied_278)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
On Fedora systems (like RedHat) and Arch Linux:<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_279'>
sudo systemctl restart httpd</pre>
<span id=golf_copied_279 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_279' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_279, code_279, golf_copied_279)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Note: you must not have any other URL resource that starts with "/&lt;app path&gt;/" (such as for example "/&lt;app path&gt;/something") as the web server will attempt to pass them as a reverse proxy request, and they will likely not work. If you need to, you can change the application path to be different from "/&lt;app path&gt;", see <a href='/request.html'>request</a>.<br/>
<!--BEFSAL13--><div class="vsub"><a id="See also"></a>See also</div>
 <a name='Web servers'></a><span style="font-weight:bold;">Web servers</span><br/>
<a href='/connect-apache-tcp-socket.html'>connect-apache-tcp-socket</a> &nbsp;<br/>
<a href='/connect-apache-unix-socket.html'>connect-apache-unix-socket</a> &nbsp;<br/>
<a href='/connect-haproxy-tcp-socket.html'>connect-haproxy-tcp-socket</a> &nbsp;<br/>
<a href='/connect-nginx-tcp-socket.html'>connect-nginx-tcp-socket</a> &nbsp;<br/>
<a href='/connect-nginx-unix-socket.html'>connect-nginx-unix-socket</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='/documentation.html'>documentation</a><br/>
<a id='connect-haproxy-tcp-socket.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:right;background-color:white;'><a href='https://golf-lang.com' style='border-bottom:0px'><img src='https://golf-lang.com/golf.png'/></a></div><div class='vhub' style='margin-top:10px;'>&nbsp;Connect haproxy tcp socket</div><hr/>This shows how to connect your application listening on TCP port &lt;port number&gt; (started with "-p" option in <a href='/mgrg.html'>mgrg</a>) to HAProxy load balancer.<br/>
<br/>
HAProxy can balance the load between different web servers, which in turn are connected to your applications. Since in this case HAProxy does not directly communicate with a Golf application (which is behind a web server), you may lookup examples of this online.<br/>
<br/>
When you want HAProxy to directly communicate with a Golf application server, you may use configuration similar to this (shown is just a bare-bone setup needed to accomplish the goal):<br/>
<div class='ncode' style='position:relative;padding-right:16px;'>
<pre id='code_280'>
global
    user haproxy
    group haproxy
    daemon

defaults
    mode    http
    timeout connect 5000
    timeout client  50000
    timeout server  50000
    errorfile 400 /etc/haproxy/errors/400.http
    errorfile 403 /etc/haproxy/errors/403.http
    errorfile 408 /etc/haproxy/errors/408.http
    errorfile 500 /etc/haproxy/errors/500.http
    errorfile 502 /etc/haproxy/errors/502.http
    errorfile 503 /etc/haproxy/errors/503.http
    errorfile 504 /etc/haproxy/errors/504.http

frontend front_server
    mode http
    bind *:90
    use_backend backend_servers if { path_reg -i ^.*\/func_test\/.*$ } 
    option forwardfor

fcgi-app gliim-fcgi
    log-stderr global
    docroot /var/lib/gg/func_test/app
    path-info ^.+(/func_test)(/.+)$ 

backend backend_servers                                                                                                                     
    mode http
    filter fcgi-app gliim-fcgi
    use-fcgi-app gliim-fcgi
    server s1 127.0.0.1:2301 proto fcgi</pre>
<span id=golf_copied_280 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_280' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_280, code_280, golf_copied_280)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Restart HAProxy:<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_281'>
sudo systemctl restart haproxy</pre>
<span id=golf_copied_281 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_281' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_281, code_281, golf_copied_281)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Note that Golf application path is "/func_test" (and the application name may or may not be the same, see <a href='/request.html'>request</a>). The TCP port of the application is "2301" (could be any port number you choose that's greater than 1000 and lower than 65535). <br/>
<br/>
HAProxy itself is bound to port 90, and "path_reg" specifies which URLs will be passed to your Golf application (i.e. they must have "/func_test/" in the URL). "path-info" specifies SCRIPT_NAME and PATH_INFO (as "()" regular sub-expressions), which are as such passed to your Golf application. "docroot" is set to the application home directory (see <a href='/directories.html'>directories</a>).<br/>
<br/>
A Golf aplication (named "func_test") would have been started with (using the same application name "func_test" and TCP port "2301"):<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_282'>
mgrg <span class="Special">-p</span> <span class="Constant">2301</span> func_test</pre>
<span id=golf_copied_282 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_282' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_282, code_282, golf_copied_282)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Now you should be able to connect and load-balance your Golf application servers directly from HAProxy.<br/>
<!--BEFSAL13--><div class="vsub"><a id="See also"></a>See also</div>
 <a name='Web servers'></a><span style="font-weight:bold;">Web servers</span><br/>
<a href='/connect-apache-tcp-socket.html'>connect-apache-tcp-socket</a> &nbsp;<br/>
<a href='/connect-apache-unix-socket.html'>connect-apache-unix-socket</a> &nbsp;<br/>
<a href='/connect-haproxy-tcp-socket.html'>connect-haproxy-tcp-socket</a> &nbsp;<br/>
<a href='/connect-nginx-tcp-socket.html'>connect-nginx-tcp-socket</a> &nbsp;<br/>
<a href='/connect-nginx-unix-socket.html'>connect-nginx-unix-socket</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='/documentation.html'>documentation</a><br/>
<a id='connect-nginx-tcp-socket.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:right;background-color:white;'><a href='https://golf-lang.com' style='border-bottom:0px'><img src='https://golf-lang.com/golf.png'/></a></div><div class='vhub' style='margin-top:10px;'>&nbsp;Connect nginx tcp socket</div><hr/>This shows how to connect your application listening on TCP port &lt;port number&gt; (started with "-p" option in <a href='/mgrg.html'>mgrg</a>) to Nginx web server.<br/>
<br/>
<span style="font-weight:bold;">- Step 1</span>:<br/>
You will need to edit the Nginx configuration file. For Ubuntu and similar:<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_284'>
sudo vi /etc/nginx/sites-enabled/default</pre>
<span id=golf_copied_284 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_284' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_284, code_284, golf_copied_284)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
while on Fedora and other systems it might be at:<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_285'>
sudo vi /etc/nginx/nginx.conf</pre>
<span id=golf_copied_285 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_285' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_285, code_285, golf_copied_285)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<br/>
Add the following in the "server {}" section ("/&lt;app path&gt;" is the application path, see <a href='/request.html'>request</a>):<br/>
<div class='ncode' style='position:relative;padding-right:16px;'>
<pre id='code_283'>
location /&lt;app path&gt;/ { include /etc/nginx/fastcgi_params; fastcgi_pass  127.0.0.1:&lt;port number&gt;; }</pre>
<span id=golf_copied_283 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_283' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_283, code_283, golf_copied_283)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<span style="font-weight:bold;">- Step 2</span>:<br/>
Finally, restart Nginx:<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_286'>
sudo systemctl restart nginx</pre>
<span id=golf_copied_286 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_286' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_286, code_286, golf_copied_286)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Note: you must not have any other URL resource that starts with "/&lt;app path&gt;/" (such as for example "/&lt;app path&gt;/something") as the web server will attempt to pass them as a reverse proxy request, and they will likely not work. If you need to, you can change the application path to be different from "/&lt;app path&gt;", see <a href='/request.html'>request</a>.<br/>
<!--BEFSAL13--><div class="vsub"><a id="See also"></a>See also</div>
 <a name='Web servers'></a><span style="font-weight:bold;">Web servers</span><br/>
<a href='/connect-apache-tcp-socket.html'>connect-apache-tcp-socket</a> &nbsp;<br/>
<a href='/connect-apache-unix-socket.html'>connect-apache-unix-socket</a> &nbsp;<br/>
<a href='/connect-haproxy-tcp-socket.html'>connect-haproxy-tcp-socket</a> &nbsp;<br/>
<a href='/connect-nginx-tcp-socket.html'>connect-nginx-tcp-socket</a> &nbsp;<br/>
<a href='/connect-nginx-unix-socket.html'>connect-nginx-unix-socket</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='/documentation.html'>documentation</a><br/>
<a id='connect-nginx-unix-socket.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:right;background-color:white;'><a href='https://golf-lang.com' style='border-bottom:0px'><img src='https://golf-lang.com/golf.png'/></a></div><div class='vhub' style='margin-top:10px;'>&nbsp;Connect nginx unix socket</div><hr/>This shows how to connect your application listening on a Unix socket (started with <a href='/mgrg.html'>mgrg</a>) to Nginx web server.<br/>
<br/>
<span style="font-weight:bold;">- Step 1</span>:<br/>
You will need to edit the Nginx configuration file. For Ubuntu and similar:<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_288'>
sudo vi /etc/nginx/sites-enabled/default</pre>
<span id=golf_copied_288 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_288' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_288, code_288, golf_copied_288)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
while on Fedora and other systems it might be at:<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_289'>
sudo vi /etc/nginx/nginx.conf</pre>
<span id=golf_copied_289 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_289' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_289, code_289, golf_copied_289)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<br/>
Add the following in the "server {}" section ("/&lt;app path&gt;" is the application path (see <a href='/request.html'>request</a>) and "&lt;app name&gt;" is your application name):<br/>
<div class='ncode' style='position:relative;padding-right:16px;'>
<pre id='code_287'>
location /&lt;app path&gt;/ { include /etc/nginx/fastcgi_params; fastcgi_pass  unix:///var/lib/gg/&lt;app name&gt;/sock/sock; }</pre>
<span id=golf_copied_287 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_287' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_287, code_287, golf_copied_287)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<span style="font-weight:bold;">- Step 2</span>:<br/>
Finally, restart Nginx:<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_290'>
sudo systemctl restart nginx</pre>
<span id=golf_copied_290 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_290' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_290, code_290, golf_copied_290)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Note: you must not have any other URL resource that starts with "/&lt;app path&gt;/" (such as for example "/&lt;app path&gt;/something") as the web server will attempt to pass them as a reverse proxy request, and they will likely not work. If you need to, you can change the application path to be different from "/&lt;app path&gt;", see <a href='/request.html'>request</a>.<br/>
<!--BEFSAL13--><div class="vsub"><a id="See also"></a>See also</div>
 <a name='Web servers'></a><span style="font-weight:bold;">Web servers</span><br/>
<a href='/connect-apache-tcp-socket.html'>connect-apache-tcp-socket</a> &nbsp;<br/>
<a href='/connect-apache-unix-socket.html'>connect-apache-unix-socket</a> &nbsp;<br/>
<a href='/connect-haproxy-tcp-socket.html'>connect-haproxy-tcp-socket</a> &nbsp;<br/>
<a href='/connect-nginx-tcp-socket.html'>connect-nginx-tcp-socket</a> &nbsp;<br/>
<a href='/connect-nginx-unix-socket.html'>connect-nginx-unix-socket</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='/documentation.html'>documentation</a><br/>
<a id='continue-loop.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:right;background-color:white;'><a href='https://golf-lang.com' style='border-bottom:0px'><img src='https://golf-lang.com/golf.png'/></a></div><div class='vhub' style='margin-top:10px;'>&nbsp;Continue loop</div><hr/><span style="font-weight:bold;">Purpose</span>: Continue to the top of a loop.<br/>
<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_291'>
<span class="Statement"> continue-loop</span></pre>
<span id=golf_copied_291 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_291' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_291, code_291, golf_copied_291)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
continue-loop will continue execution at the top of the loop at <a href='/start-loop.html'>start-loop</a>, <a href='/run-query.html'>run-query</a>, or <a href='/read-line.html'>read-line</a> statements. <br/>
<div class="vsub"><a id="Examples"></a>Examples</div>
Skip the processing if it's the loop #300:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_292'>
 define-number cont_loop = <span class="Constant">300</span>
<span class="Statement"> start-loop</span><span class="Identifier"> repeat</span> <span class="Constant">1000</span><span class="Type"> use</span> i<span class="Identifier"> start-with</span> <span class="Constant">1</span>
<span class="Statement">     if-true</span> i<span class="Identifier"> equal</span> cont_loop
<span class="Statement">         continue-loop</span>
<span class="Statement">     end-if</span>
<span class="Statement">     @</span>Completed <span class="Statement">&lt;&lt;p-num</span> i<span class="Statement">&gt;&gt;</span> loops so far
<span class="Statement"> end-loop</span></pre>
<span id=golf_copied_292 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_292' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_292, code_292, golf_copied_292)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<!--BEFSAL13--><div class="vsub"><a id="See also"></a>See also</div>
 <a name='Program flow'></a><span style="font-weight:bold;">Program flow</span><br/>
<a href='/break-loop.html'>break-loop</a> &nbsp;<br/>
<a href='/code-blocks.html'>code-blocks</a> &nbsp;<br/>
<a href='/continue-loop.html'>continue-loop</a> &nbsp;<br/>
<a href='/do-once.html'>do-once</a> &nbsp;<br/>
<a href='/exit-handler.html'>exit-handler</a> &nbsp;<br/>
<a href='/if-defined.html'>if-defined</a> &nbsp;<br/>
<a href='/if-true.html'>if-true</a> &nbsp;<br/>
<a href='/return-handler.html'>return-handler</a> &nbsp;<br/>
<a href='/set-bool.html'>set-bool</a> &nbsp;<br/>
<a href='/start-loop.html'>start-loop</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='/documentation.html'>documentation</a><br/>
<a id='copy-file.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:right;background-color:white;'><a href='https://golf-lang.com' style='border-bottom:0px'><img src='https://golf-lang.com/golf.png'/></a></div><div class='vhub' style='margin-top:10px;'>&nbsp;Copy file</div><hr/><span style="font-weight:bold;">Purpose</span>: Copies one file to another.<br/>
<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_293'>
<span class="Statement"> copy-file</span> &lt;source file&gt;<span class="Identifier"> to</span> &lt;target file&gt; [<span class="Type"> status</span> &lt;status&gt; ]</pre>
<span id=golf_copied_293 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_293' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_293, code_293, golf_copied_293)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
File &lt;source file&gt; is copied into &lt;target file&gt;, which is created if it does not exist. <br/>
<br/>
Status can be obtained in &lt;status&gt; variable, which is GG_ERR_OPEN if cannot open source file, GG_ERR_CREATE if cannot create target file, GG_ERR_READ if cannot read source file, GG_ERR_WRITE if cannot write target file, or number of bytes copied (including 0) on success. <br/>
<div class="vsub"><a id="Examples"></a>Examples</div>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_294'>
<span class="Statement"> copy-file</span> <span class="Constant">&quot;/home/user/source_file&quot;</span><span class="Identifier"> to</span> <span class="Constant">&quot;/home/user/target_file&quot;</span><span class="Type"> status</span> st</pre>
<span id=golf_copied_294 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_294' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_294, code_294, golf_copied_294)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<!--BEFSAL13--><div class="vsub"><a id="See also"></a>See also</div>
 <a name='Files'></a><span style="font-weight:bold;">Files</span><br/>
<a href='/close-file.html'>close-file</a> &nbsp;<br/>
<a href='/copy-file.html'>copy-file</a> &nbsp;<br/>
<a href='/delete-file.html'>delete-file</a> &nbsp;<br/>
<a href='/file-position.html'>file-position</a> &nbsp;<br/>
<a href='/file-storage.html'>file-storage</a> &nbsp;<br/>
<a href='/file-uploading.html'>file-uploading</a> &nbsp;<br/>
<a href='/lock-file.html'>lock-file</a> &nbsp;<br/>
<a href='/open-file.html'>open-file</a> &nbsp;<br/>
<a href='/read-file.html'>read-file</a> &nbsp;<br/>
<a href='/read-line.html'>read-line</a> &nbsp;<br/>
<a href='/rename-file.html'>rename-file</a> &nbsp;<br/>
<a href='/stat-file.html'>stat-file</a> &nbsp;<br/>
<a href='/temporary-file.html'>temporary-file</a> &nbsp;<br/>
<a href='/uniq-file.html'>uniq-file</a> &nbsp;<br/>
<a href='/unlock-file.html'>unlock-file</a> &nbsp;<br/>
<a href='/write-file.html'>write-file</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='/documentation.html'>documentation</a><br/>
<a id='copy-string.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:right;background-color:white;'><a href='https://golf-lang.com' style='border-bottom:0px'><img src='https://golf-lang.com/golf.png'/></a></div><div class='vhub' style='margin-top:10px;'>&nbsp;Copy string</div><hr/><span style="font-weight:bold;">Purpose</span>: Copies string to another string.<br/>
<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_295'>
<span class="Statement"> copy-string</span> &lt;source string&gt;<span class="Type"> to</span> &lt;dest string&gt; \
     [<span class="Identifier"> start-with</span> &lt;start with&gt; ] \
     [<span class="Identifier"> length</span> &lt;length&gt; ]</pre>
<span id=golf_copied_295 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_295' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_295, code_295, golf_copied_295)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Use copy-string to copy &lt;source string&gt; to &lt;dest string&gt;.<br/>
<br/>
&lt;start with&gt; number (in "start-with" clause) is the position in &lt;source string&gt; to start copying from, with 0 being the first byte.<br/>
<br/>
Without "length" clause, the whole of &lt;source string&gt; is copied. With "length" clause, exactly &lt;length&gt; bytes are copied into &lt;dest string&gt;.<br/>
<br/>
You can copy a string to itself. In this case, the original string remains and the new string references a copy:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_296'>
<span class="Statement"> set-string</span> str = <span class="Constant">&quot;original string&quot;</span> <span class="Comment">// string to change</span>

<span class="Statement"> set-string</span> orig = str <span class="Comment">// references original copy of the string to change</span>

<span class="Statement"> copy-string</span> str<span class="Type"> to</span> str <span class="Comment">// make a copy of string to change and assign it to itself</span>

<span class="Statement"> upper-string</span> str <span class="Comment">// change the copy</span>

 <span class="Comment">// Now </span><span class="Constant">&quot;str&quot;</span><span class="Comment"> references </span><span class="Constant">&quot;ORIGINAL STRING&quot;</span><span class="Comment"> </span>
 <span class="Comment">// and </span><span class="Constant">&quot;orig&quot;</span><span class="Comment"> references </span><span class="Constant">&quot;original string&quot;</span></pre>
<span id=golf_copied_296 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_296' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_296, code_296, golf_copied_296)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<div class="vsub"><a id="Examples"></a>Examples</div>
After copy-string below, "my_str" will be a copy of string "some value":<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_297'>
<span class="Statement"> set-string</span> other_string=<span class="Constant">&quot;some value&quot;</span>
<span class="Statement"> copy-string</span> other_string<span class="Type"> to</span> my_str</pre>
<span id=golf_copied_297 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_297' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_297, code_297, golf_copied_297)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Copy certain number of bytes, the result in "my_str" will be "ome":<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_298'>
<span class="Statement"> set-string</span> other_string=<span class="Constant">&quot;some value&quot;</span>
<span class="Statement"> copy-string</span> other_string<span class="Type"> to</span> my_str<span class="Identifier"> length</span> <span class="Constant">3</span><span class="Identifier"> start-with</span> <span class="Constant">1</span></pre>
<span id=golf_copied_298 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_298' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_298, code_298, golf_copied_298)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<!--BEFSAL13--><div class="vsub"><a id="See also"></a>See also</div>
 <a name='Strings'></a><span style="font-weight:bold;">Strings</span><br/>
<a href='/copy-string.html'>copy-string</a> &nbsp;<br/>
<a href='/count-substring.html'>count-substring</a> &nbsp;<br/>
<a href='/delete-string.html'>delete-string</a> &nbsp;<br/>
<a href='/lower-string.html'>lower-string</a> &nbsp;<br/>
<a href='/read-split.html'>read-split</a> &nbsp;<br/>
<a href='/replace-string.html'>replace-string</a> &nbsp;<br/>
<a href='/set-string.html'>set-string</a> &nbsp;<br/>
<a href='/split-string.html'>split-string</a> &nbsp;<br/>
<a href='/string-length.html'>string-length</a> &nbsp;<br/>
<a href='/trim-string.html'>trim-string</a> &nbsp;<br/>
<a href='/upper-string.html'>upper-string</a> &nbsp;<br/>
<a href='/write-string.html'>write-string</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='/documentation.html'>documentation</a><br/>
<a id='count-substring.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:right;background-color:white;'><a href='https://golf-lang.com' style='border-bottom:0px'><img src='https://golf-lang.com/golf.png'/></a></div><div class='vhub' style='margin-top:10px;'>&nbsp;Count substring</div><hr/><span style="font-weight:bold;">Purpose</span>: Count substrings.<br/>
<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_299'>
<span class="Statement"> count-substring</span> &lt;substring&gt;<span class="Identifier"> in</span> &lt;string&gt;<span class="Type"> to</span> &lt;count&gt; [<span class="Identifier"> case-insensitive</span> [ &lt;case insensitive&gt; ] ]</pre>
<span id=golf_copied_299 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_299' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_299, code_299, golf_copied_299)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
count-substring counts the number of occurrences of &lt;substring&gt; in &lt;string&gt; and stores the result in &lt;count&gt; (specified in "to" clause). By default, search is case-sensitive. If you use "case-insensitive" clause without boolean variable &lt;case insensitive&gt;, or if &lt;case insensitive&gt; evaluates to true, then the search is case-insensitive.<br/>
<br/>
If &lt;substring&gt; is empty (""), &lt;count&gt; is 0.<br/>
<div class="vsub"><a id="Examples"></a>Examples</div>
In the following example, 1 occurrence will be found after the first count-substring, and 2 after the second (since case insensitive search is used there):<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_300'>
<span class="Statement"> set-string</span> sub = <span class="Constant">&quot;world&quot;</span>
<span class="Statement"> set-string</span> str = <span class="Constant">&quot;Hello world and hello World!&quot;</span>

<span class="Statement"> count-substring</span> sub<span class="Identifier"> in</span> str<span class="Type"> to</span> num_occ
<span class="Statement"> pf-out</span> <span class="Constant">&quot;Found </span><span class="Special">%ld</span><span class="Constant"> occurrences!</span><span class="Special">\n</span><span class="Constant">&quot;</span>, num_occ

<span class="Statement"> count-substring</span> sub<span class="Identifier"> in</span> str<span class="Type"> to</span> num_occ<span class="Identifier"> case-insensitive</span>
<span class="Statement"> pf-out</span> <span class="Constant">&quot;Found </span><span class="Special">%ld</span><span class="Constant"> occurrences!</span><span class="Special">\n</span><span class="Constant">&quot;</span>, num_occ</pre>
<span id=golf_copied_300 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_300' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_300, code_300, golf_copied_300)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<!--BEFSAL13--><div class="vsub"><a id="See also"></a>See also</div>
 <a name='Strings'></a><span style="font-weight:bold;">Strings</span><br/>
<a href='/copy-string.html'>copy-string</a> &nbsp;<br/>
<a href='/count-substring.html'>count-substring</a> &nbsp;<br/>
<a href='/delete-string.html'>delete-string</a> &nbsp;<br/>
<a href='/lower-string.html'>lower-string</a> &nbsp;<br/>
<a href='/read-split.html'>read-split</a> &nbsp;<br/>
<a href='/replace-string.html'>replace-string</a> &nbsp;<br/>
<a href='/set-string.html'>set-string</a> &nbsp;<br/>
<a href='/split-string.html'>split-string</a> &nbsp;<br/>
<a href='/string-length.html'>string-length</a> &nbsp;<br/>
<a href='/trim-string.html'>trim-string</a> &nbsp;<br/>
<a href='/upper-string.html'>upper-string</a> &nbsp;<br/>
<a href='/write-string.html'>write-string</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='/documentation.html'>documentation</a><br/>
<a id='current-row.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:right;background-color:white;'><a href='https://golf-lang.com' style='border-bottom:0px'><img src='https://golf-lang.com/golf.png'/></a></div><div class='vhub' style='margin-top:10px;'>&nbsp;Current row</div><hr/><span style="font-weight:bold;">Purpose</span>: Get or print out the row number of a current row in the result-set of a query.<br/>
<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_301'>
<span class="Statement"> current-row</span> [<span class="Identifier"> to</span> &lt;current row&gt; ]</pre>
<span id=golf_copied_301 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_301' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_301, code_301, golf_copied_301)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Without "to" clause, current-row will print out the current row number. First row is numbered 1. With "to" clause, the row number is stored into variable &lt;current row&gt;. current-row must be within a <a href='/run-query.html'>run-query</a> loop, and it always refers to the most inner one.<br/>
<div class="vsub"><a id="Examples"></a>Examples</div>
Display row number before a line with first and last name for each employee:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_302'>
<span class="Statement"> run-query</span> @mydb=<span class="Constant">&quot;select firstName, lastName from employee&quot;</span><span class="Type"> output</span> firstName, lastName
<span class="Statement">     @</span>Row #<span class="Statement">&lt;&lt;current-row&gt;&gt;</span>&lt;br/&gt;
<span class="Statement">     p-out</span> firstName
<span class="Statement">     @</span>,
<span class="Statement">     p-out</span> lastName
<span class="Statement">     @</span>&lt;br/&gt;
<span class="Statement"> end-query</span></pre>
<span id=golf_copied_302 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_302' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_302, code_302, golf_copied_302)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<!--BEFSAL13--><div class="vsub"><a id="See also"></a>See also</div>
 <a name='Database'></a><span style="font-weight:bold;">Database</span><br/>
<a href='/begin-transaction.html'>begin-transaction</a> &nbsp;<br/>
<a href='/commit-transaction.html'>commit-transaction</a> &nbsp;<br/>
<a href='/current-row.html'>current-row</a> &nbsp;<br/>
<a href='/database-config-file.html'>database-config-file</a> &nbsp;<br/>
<a href='/db-error.html'>db-error</a> &nbsp;<br/>
<a href='/mariadb-database.html'>mariadb-database</a> &nbsp;<br/>
<a href='/postgresql-database.html'>postgresql-database</a> &nbsp;<br/>
<a href='/rollback-transaction.html'>rollback-transaction</a> &nbsp;<br/>
<a href='/run-query.html'>run-query</a> &nbsp;<br/>
<a href='/sqlite-database.html'>sqlite-database</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='/documentation.html'>documentation</a><br/>
<a id='database-config-file.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:right;background-color:white;'><a href='https://golf-lang.com' style='border-bottom:0px'><img src='https://golf-lang.com/golf.png'/></a></div><div class='vhub' style='margin-top:10px;'>&nbsp;Database config file</div><hr/>Golf application can use any number of databases, with each specified by a database configuration file. This file provides database name, login and connection settings and preferences.<br/>
<br/>
When making a Golf application, you specify a database vendor and the database configuration file for each database your application uses (see <a href='/gg.html'>gg</a>), for instance:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_303'>
 gg ... --db=<span class="Constant">&quot;mariadb:db1 postgres:db2 sqlite:db3&quot;</span>  ...</pre>
<span id=golf_copied_303 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_303' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_303, code_303, golf_copied_303)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
in which case there are three database configuration files (db1, db2 and db3), with db1 being MariaDB, db2 being PostgreSQL and db3 being SQLite database.<br/>
<br/>
You must create a database configuration file for each database your application uses, and this file must be placed with your source code. Such file will be copied to locations specified and used by Golf to connect to database(s) (see <a href='/directories.html'>directories</a>). <br/>
<br/>
Each such file contains connection information and authentication to a database, which Golf uses to login. The names of these configuration files are used in queries. There is no limit on how many databases can be used in your application and those from different vendors can be used in the same application.<br/>
<br/>
An example of database configuration file (in this case MariaDB):<br/>
<div class='ncode' style='position:relative;padding-right:16px;'>
<pre id='code_304'>
[client]
user=mydbuser
password=somepwd
database=mydbname
protocol=TCP
host=127.0.0.1
port=3306</pre>
<span id=golf_copied_304 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_304' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_304, code_304, golf_copied_304)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<div class="vsub"><a id="Using in your queries"></a>Using in your queries</div>
Database statements that perform queries (such as <a href='/run-query.html'>run-query</a>) must specify the database configuration file used, unless your application uses only a single database. Such configuration is given by "@&lt;database config file&gt;" (for instance in <a href='/run-query.html'>run-query</a> or <a href='/begin-transaction.html'>begin-transaction</a>). For example, in:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_306'>
<span class="Statement"> run-query</span> @mydb=<span class="Constant">&quot;select name from employees&quot;</span>
<span class="Statement"> .</span>..
<span class="Statement"> end-query</span></pre>
<span id=golf_copied_306 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_306' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_306, code_306, golf_copied_306)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
the query is performed on a database specified by the configuration file "mydb", as in (assuming it's PostgreSQL database):<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_309'>
 gg ... --db=<span class="Constant">&quot;postgres:mydb&quot;</span>  ...</pre>
<span id=golf_copied_309 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_309' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_309, code_309, golf_copied_309)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
You do not need to manually connect to the database; when your application uses it for the first time, a connection is automatically established, and lost connection is automatically re-established when needed. <br/>
<br/>
If a database is the only one used by your application, you can omit it, as in:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_311'>
<span class="Statement"> run-query</span> =<span class="Constant">&quot;select name from employees&quot;</span>
<span class="Statement"> .</span>..
<span class="Statement"> end-query</span></pre>
<span id=golf_copied_311 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_311' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_311, code_311, golf_copied_311)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<div class="vsub"><a id="Connection settings"></a>Connection settings</div>
The contents of a configuration file depends on the database used:<br/>
<ul><li>MariaDB: see <a href='/mariadb-database.html'>mariadb-database</a><br/>
</li><li>Postgres: see <a href='/postgresql-database.html'>postgresql-database</a><br/>
</li><li>SQLite: see <a href='/sqlite-database.html'>sqlite-database</a><br/>
</li></ul>
<div class="vsub"><a id="Substituting environment variables"></a>Substituting environment variables</div>
You can use environment variables in database configuration files by means of substitution, in the form of "${VAR_NAME}". For example in file "mydb":<br/>
<div class='ncode' style='position:relative;padding-right:16px;'>
<pre id='code_307'>
[client]
user=${DB_USER}
password=${DB_PWD}
database=${DB_NAME}
protocol=TCP
host=127.0.0.1
port=${DB_PORT}</pre>
<span id=golf_copied_307 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_307' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_307, code_307, golf_copied_307)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Here, environment variables DB_USER, DB_PWD, DB_NAME and DB_PORT are used. They must be defined in the shell environment prior to calling <a href='/gg.html'>gg</a> to make your application (if not defined the value will be empty):<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_305'>
<span class="Comment">#Define environment variables for a configuration file</span>
<span class="Statement">export</span> <span class="Identifier">DB_USER</span>=<span class="Statement">&quot;</span><span class="Constant">my_user</span><span class="Statement">&quot;</span>
<span class="Statement">export</span> <span class="Identifier">DB_PWD</span>=<span class="Statement">&quot;</span><span class="Constant">my_password</span><span class="Statement">&quot;</span>
<span class="Statement">export</span> <span class="Identifier">DB_NAME</span>=<span class="Statement">&quot;</span><span class="Constant">my_database</span><span class="Statement">&quot;</span>
<span class="Statement">export</span> <span class="Identifier">DB_PORT</span>=<span class="Statement">&quot;</span><span class="Constant">3307</span><span class="Statement">&quot;</span>

<span class="Comment">#Make application using the above database configuration file with the environment variables specified</span>
gg <span class="Special">-q</span> <span class="Special">--db</span><span class="Statement">=</span>mariadb:mydb</pre>
<span id=golf_copied_305 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_305' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_305, code_305, golf_copied_305)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
which results in file /var/lib/gg/&lt;app name&gt;/app/db/mydb:<br/>
<div class='ncode' style='position:relative;padding-right:16px;'>
<pre id='code_310'>
[client]
user=my_user
password=my_password
database=my_database
protocol=TCP
host=127.0.0.1
port=3307</pre>
<span id=golf_copied_310 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_310' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_310, code_310, golf_copied_310)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Besides making application deployment easier, this also adds to its security as the information such as above (including the database password) does not need to be a part of source code and reside in source code control system (such as git).<br/>
<br/>
Your environment variables can have any names, except that they cannot start with an underscore ("_") or be prefixed by "GG_" or "GG_", because those variable names are reserved by Golf.<br/>
<br/>
Note that if your data actually has a dollar sign and is a part of the configuration file, then you can create a variable for it:<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_308'>
<span class="Statement">export</span> <span class="Identifier">DOLLAR_SIGN</span>=<span class="Statement">'</span><span class="Constant">$</span><span class="Statement">'</span></pre>
<span id=golf_copied_308 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_308' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_308, code_308, golf_copied_308)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
and in the configuration file:<br/>
<div class='ncode' style='position:relative;padding-right:16px;'>
<pre id='code_312'>
..
database=my${DOLLAR_SIGN}database
..</pre>
<span id=golf_copied_312 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_312' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_312, code_312, golf_copied_312)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
In this case the database name is "my$database".<br/>
<!--BEFSAL13--><div class="vsub"><a id="See also"></a>See also</div>
 <a name='Database'></a><span style="font-weight:bold;">Database</span><br/>
<a href='/begin-transaction.html'>begin-transaction</a> &nbsp;<br/>
<a href='/commit-transaction.html'>commit-transaction</a> &nbsp;<br/>
<a href='/current-row.html'>current-row</a> &nbsp;<br/>
<a href='/database-config-file.html'>database-config-file</a> &nbsp;<br/>
<a href='/db-error.html'>db-error</a> &nbsp;<br/>
<a href='/mariadb-database.html'>mariadb-database</a> &nbsp;<br/>
<a href='/postgresql-database.html'>postgresql-database</a> &nbsp;<br/>
<a href='/rollback-transaction.html'>rollback-transaction</a> &nbsp;<br/>
<a href='/run-query.html'>run-query</a> &nbsp;<br/>
<a href='/sqlite-database.html'>sqlite-database</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='/documentation.html'>documentation</a><br/>
<a id='db-error.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:right;background-color:white;'><a href='https://golf-lang.com' style='border-bottom:0px'><img src='https://golf-lang.com/golf.png'/></a></div><div class='vhub' style='margin-top:10px;'>&nbsp;Db error</div><hr/><span style="font-weight:bold;">Purpose</span>: Either exit request or continue processing when there is an error in a database statement.<br/>
<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_313'>
<span class="Statement"> db-error</span> [ @&lt;database&gt; ] (<span class="Identifier"> exit</span> |<span class="Identifier"> continue</span> )</pre>
<span id=golf_copied_313 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_313' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_313, code_313, golf_copied_313)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
db-error sets the response to the failure of database statements. You can change this response at run-time with each execution of db-error.<br/>
<br/>
When a database statement (like <a href='/run-query.html'>run-query</a>) fails, Golf will either exit request processing if "exit" is used, or continue if "continue" is used. "Exiting" is equivalent to calling <a href='/report-error.html'>report-error</a> with the message containing details about the error. "Continuing" means that your program will continue but you should examine error code (see for instance "error" clause in <a href='/run-query.html'>run-query</a>).<br/>
<br/>
The default action is "exit". You can switch back and forth between "exit" and "continue". Typically, "exit" is preferable because errors in database statemets generally mean application or setup issues, however "continue" may be used when application wants to attempt to recover from errors or perform other actions.<br/>
<br/>
Note that you can override the effect of db-error for a specific database statement by using clauses like "on-error-continue" and "on-error-exit" in <a href='/run-query.html'>run-query</a>.<br/>
<div class="vsub"><a id="Database"></a>Database</div>
&lt;database&gt; is specified in "@" clause and is the name of the <a href='/database-config-file.html'>database-config-file</a>. If ommited, your program must use exactly one database (see --db option in <a href='/gg.html'>gg</a>).<br/>
<div class="vsub"><a id="Examples"></a>Examples</div>
The following will not exit when errors happen going forward, but rather continue execution (and you should check every error henceforth):<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_314'>
<span class="Statement"> db-error</span> @mydb<span class="Identifier"> continue</span></pre>
<span id=golf_copied_314 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_314' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_314, code_314, golf_copied_314)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<!--BEFSAL13--><div class="vsub"><a id="See also"></a>See also</div>
 <a name='Database'></a><span style="font-weight:bold;">Database</span><br/>
<a href='/begin-transaction.html'>begin-transaction</a> &nbsp;<br/>
<a href='/commit-transaction.html'>commit-transaction</a> &nbsp;<br/>
<a href='/current-row.html'>current-row</a> &nbsp;<br/>
<a href='/database-config-file.html'>database-config-file</a> &nbsp;<br/>
<a href='/db-error.html'>db-error</a> &nbsp;<br/>
<a href='/mariadb-database.html'>mariadb-database</a> &nbsp;<br/>
<a href='/postgresql-database.html'>postgresql-database</a> &nbsp;<br/>
<a href='/rollback-transaction.html'>rollback-transaction</a> &nbsp;<br/>
<a href='/run-query.html'>run-query</a> &nbsp;<br/>
<a href='/sqlite-database.html'>sqlite-database</a> &nbsp; <br/>
 <a name='Error handling'></a><span style="font-weight:bold;">Error handling</span><br/>
<a href='/db-error.html'>db-error</a> &nbsp;<br/>
<a href='/error-code.html'>error-code</a> &nbsp;<br/>
<a href='/error-handling.html'>error-handling</a> &nbsp;<br/>
<a href='/report-error.html'>report-error</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='/documentation.html'>documentation</a><br/>
<a id='debugging.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:right;background-color:white;'><a href='https://golf-lang.com' style='border-bottom:0px'><img src='https://golf-lang.com/golf.png'/></a></div><div class='vhub' style='margin-top:10px;'>&nbsp;Debugging</div><hr/><div class="vsub"><a id="Tracing and Backtrace file"></a>Tracing and Backtrace file</div>
To see any errors reported by Golf, use -e option of <a href='/gg.html'>gg</a> and check backtrace file. For example, to see the last 3 error messages:<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_316'>
gg <span class="Special">-e</span> <span class="Constant">3</span></pre>
<span id=golf_copied_316 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_316' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_316, code_316, golf_copied_316)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
You can use <a href='/trace-run.html'>trace-run</a> statement to create run-time traces (see <a href='/directories.html'>directories</a> for directory location). To quickly find the location of recently written-to trace files, use -t option of <a href='/gg.html'>gg</a>, for example for 5 most recently used trace files:<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_318'>
gg <span class="Special">-t</span> <span class="Constant">5</span></pre>
<span id=golf_copied_318 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_318' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_318, code_318, golf_copied_318)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Use <a href='/get-req.html'>get-req</a> to get the trace file location at run-time from your application.<br/>
<div class="vsub"><a id="Output from Golf application without web server"></a>Output from Golf application without web server</div>
Use <a href='/gg.html'>gg</a> (see -r option) to send a request from command line, and receive reply from your <a href='/service.html'>service</a>s. This is useful in debugging issues and automating tests.<br/>
<div class="vsub"><a id="Issues in starting mgrg"></a>Issues in starting mgrg</div>
<a href='/mgrg.html'>mgrg</a> starts your web application, running as <a href='/service.html'>service</a> processes. If you're having issues with mgrg, check out its log. Assuming your application name is "app_name", the log file is:<br/>
<div class='ncode' style='position:relative;padding-right:16px;'>
<pre id='code_315'>
/var/lib/gg/app_name/mgrglog/log</pre>
<span id=golf_copied_315 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_315' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_315, code_315, golf_copied_315)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<div class="vsub"><a id="Web server error log"></a>Web server error log</div>
If you are using a web server as a reverse proxy, check its error log, which would store the error messages emitted. Typically, such files are in the following location:<br/>
<div class='ncode' style='position:relative;padding-right:16px;'>
<pre id='code_317'>
/var/log/&lt;web server&gt;</pre>
<span id=golf_copied_317 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_317' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_317, code_317, golf_copied_317)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
(for example /var/log/apache2), but the location may vary - consult your web server's documentation.<br/>
<div class="vsub"><a id="Using gdb debugger"></a>Using gdb debugger</div>
In order to use gdb debugger, you must make your application with "--debug" flag (see <a href='/gg.html'>gg</a>). Do not use "--debug" in any other case, because performance will be considerably affected.<br/>
<br/>
Ultimately, you can attach a debugger to a running Golf process. If your application name is "app_name", first find the PID (process ID) of its process(es):<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_320'>
ps <span class="Special">-ef</span>|<span class="Statement">grep</span> app_name.srvc</pre>
<span id=golf_copied_320 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_320' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_320, code_320, golf_copied_320)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Note that you can control the number of worker processes started, and thus have only a single worker process (or the minimum necessary), which will make attaching to the process that actually processes a request easier (see <a href='/gg.html'>gg</a>).<br/>
<br/>
Use gdb to load your program:<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_322'>
sudo gdb /var/lib/gg/bld/app_name/app_name.srvc</pre>
<span id=golf_copied_322 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_322' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_322, code_322, golf_copied_322)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
and then attach to the process (&lt;PID&gt; is the process ID you obtained above):<br/>
<div class='ncode' style='position:relative;padding-right:16px;'>
<pre id='code_319'>
att &lt;PID&gt;</pre>
<span id=golf_copied_319 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_319' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_319, code_319, golf_copied_319)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Once attached, you can break in the request you're debugging:<br/>
<div class='ncode' style='position:relative;padding-right:16px;'>
<pre id='code_321'>
br &lt;request name&gt;</pre>
<span id=golf_copied_321 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_321' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_321, code_321, golf_copied_321)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
or in general Golf request dispatcher:<br/>
<div class='ncode' style='position:relative;padding-right:16px;'>
<pre id='code_323'>
br gg_dispatch_request</pre>
<span id=golf_copied_323 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_323' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_323, code_323, golf_copied_323)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
which would handle any request to your application.<br/>
<br/>
Note that by default, gdb will show Golf code and you can step through it as you've written it, which is easy to follow and understand. <br/>
<br/>
However, if you wish to step through the underlying C libraries, use "--c-lines" option in <a href='/gg.html'>gg</a> when making your application. In addition, you can use "--plain-diag" option to see diagnostics for underlying C code alone. These options should be used only if you're trying to debug issues with Golf itself, or to find and report a bug in Golf.<br/>
<br/>
Debugging version of Golf, as well as using "--debug" option to compile, will considerably slow down run-time performance (in some tests about 50-55%); do not use Golf build with debugging symbols (see <a href='/install.html'>install</a>) nor "--debug" (see <a href='/gg.html'>gg</a>) in production.<br/>
<!--BEFSAL13--><div class="vsub"><a id="See also"></a>See also</div>
 <a name='Debugging'></a><span style="font-weight:bold;">Debugging</span><br/>
<a href='/debugging.html'>debugging</a> &nbsp;<br/>
<a href='/trace-run.html'>trace-run</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='/documentation.html'>documentation</a><br/>
<a id='decode-base64.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:right;background-color:white;'><a href='https://golf-lang.com' style='border-bottom:0px'><img src='https://golf-lang.com/golf.png'/></a></div><div class='vhub' style='margin-top:10px;'>&nbsp;Decode base64</div><hr/><span style="font-weight:bold;">Purpose</span>: Base64 decode.<br/>
<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_324'>
<span class="Statement"> decode-base64</span> &lt;data&gt;<span class="Type"> to</span> &lt;output data&gt; \
     [<span class="Identifier"> input-length</span> &lt;input length&gt; ]</pre>
<span id=golf_copied_324 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_324' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_324, code_324, golf_copied_324)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
decode-base64 will decode string &lt;data&gt; into &lt;output data&gt;, which can be binary string. <br/>
<br/>
If "input-length" clause is used, then &lt;input length&gt; is the number of bytes decoded, otherwise the entirety of &lt;data&gt; is decoded.<br/>
<br/>
The result is stored in &lt;output data&gt; (in "to" clause).<br/>
<br/>
Note that the string to decode can have whitespaces before it (such as spaces or tabs), and whitespaces and new lines after it, which will all be ignored for the purpose of decoding.<br/>
<div class="vsub"><a id="Examples"></a>Examples</div>
See <a href='/encode-base64.html'>encode-base64</a>.<br/>
<!--BEFSAL13--><div class="vsub"><a id="See also"></a>See also</div>
 <a name='Base64'></a><span style="font-weight:bold;">Base64</span><br/>
<a href='/decode-base64.html'>decode-base64</a> &nbsp;<br/>
<a href='/encode-base64.html'>encode-base64</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='/documentation.html'>documentation</a><br/>
<a id='decode-hex.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:right;background-color:white;'><a href='https://golf-lang.com' style='border-bottom:0px'><img src='https://golf-lang.com/golf.png'/></a></div><div class='vhub' style='margin-top:10px;'>&nbsp;Decode hex</div><hr/><span style="font-weight:bold;">Purpose</span>: Decode hexadecimal string into data.<br/>
<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_325'>
<span class="Statement"> decode-hex</span> &lt;data&gt;<span class="Type"> to</span> &lt;output&gt; \
     [<span class="Identifier"> input-length</span> &lt;input length&gt; ]</pre>
<span id=golf_copied_325 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_325' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_325, code_325, golf_copied_325)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
decode-hex will decode hexadecimal string &lt;data&gt; to string &lt;output&gt; given in "to" clause. <br/>
<br/>
&lt;data&gt; must consist of an even number of digits 0-9 and letters A-F or a-f. The length of &lt;data&gt; may be given by &lt;input length&gt; number in "input-length" clause, otherwise it is assumed to be the string length of &lt;data&gt;. <br/>
<div class="vsub"><a id="Examples"></a>Examples</div>
Get the original binary data from a hexadecimal string "hexdata". The output string "binout" is created:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_326'>
<span class="Statement"> set-string</span> hexdata = <span class="Constant">&quot;0041000F414200&quot;</span>
<span class="Statement"> decode-hex</span> hexdata<span class="Type"> to</span> binout</pre>
<span id=golf_copied_326 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_326' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_326, code_326, golf_copied_326)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
The value of "binout" will be binary data equal to this C literal:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_327'>
 <span class="Constant">&quot;</span><span class="Special">\x00</span><span class="Constant">&quot;&quot;A&quot;&quot;</span><span class="Special">\x00</span><span class="Constant">&quot;&quot;</span><span class="Special">\xF</span><span class="Constant">&quot;&quot;AB&quot;&quot;</span><span class="Special">\x00</span><span class="Constant">&quot;&quot;</span><span class="Special">\x04</span><span class="Constant">&quot;</span></pre>
<span id=golf_copied_327 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_327' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_327, code_327, golf_copied_327)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<!--BEFSAL13--><div class="vsub"><a id="See also"></a>See also</div>
 <a name='Hex encoding'></a><span style="font-weight:bold;">Hex encoding</span><br/>
<a href='/decode-hex.html'>decode-hex</a> &nbsp;<br/>
<a href='/encode-hex.html'>encode-hex</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='/documentation.html'>documentation</a><br/>
<a id='decode-url.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:right;background-color:white;'><a href='https://golf-lang.com' style='border-bottom:0px'><img src='https://golf-lang.com/golf.png'/></a></div><div class='vhub' style='margin-top:10px;'>&nbsp;Decode url</div><hr/><span style="font-weight:bold;">Purpose</span>: Decode URL-encoded string.<br/>
<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_328'>
<span class="Statement"> decode-url</span> &lt;string&gt; [<span class="Identifier"> input-length</span> &lt;length&gt; ] [<span class="Identifier"> status</span> &lt;status&gt; ]</pre>
<span id=golf_copied_328 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_328' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_328, code_328, golf_copied_328)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
decode-url will decode &lt;string&gt; (created by <a href='/encode-url.html'>encode-url</a> or other URL-encoding software) and store the result back into &lt;string&gt;. If you need &lt;string&gt; unchanged, make a copy of it first with <a href='/copy-string.html'>copy-string</a>. &lt;length&gt; in "input-length" clause specifies the number of bytes to decode; if omitted or negative, it is the string length of &lt;string&gt;.<br/>
<br/>
All encoded values (starting with %) are decoded, and "+" (plus sign) is converted to space. <br/>
<br/>
&lt;status&gt; number (in "status" clause) is GG_OKAY if all bytes decoded successfully, or in case of an error it is the index of the byte that could not be decoded (first byte is indexed "0"). If there is an error (for example hexadecimal value following % is invalid), the decoding stops and whatever was decoded up to that point is the result.<br/>
<div class="vsub"><a id="Examples"></a>Examples</div>
Decode URL-encoded string "str", after which it will hold a decoded string. <br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_329'>
<span class="Statement"> decode-url</span> str</pre>
<span id=golf_copied_329 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_329' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_329, code_329, golf_copied_329)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<!--BEFSAL13--><div class="vsub"><a id="See also"></a>See also</div>
 <a name='URL encoding'></a><span style="font-weight:bold;">URL encoding</span><br/>
<a href='/decode-url.html'>decode-url</a> &nbsp;<br/>
<a href='/encode-url.html'>encode-url</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='/documentation.html'>documentation</a><br/>
<a id='decode-web.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:right;background-color:white;'><a href='https://golf-lang.com' style='border-bottom:0px'><img src='https://golf-lang.com/golf.png'/></a></div><div class='vhub' style='margin-top:10px;'>&nbsp;Decode web</div><hr/><span style="font-weight:bold;">Purpose</span>: Decode web(HTML)-encoded string.<br/>
<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_330'>
<span class="Statement"> decode-web</span> &lt;string&gt; [<span class="Identifier"> input-length</span> &lt;length&gt; ]</pre>
<span id=golf_copied_330 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_330' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_330, code_330, golf_copied_330)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
decode-web will decode &lt;string&gt; (created by <a href='/encode-web.html'>encode-web</a> or other web-encoding software) and store the result back into it. If you need &lt;string&gt; unchanged, make a copy of it first with <a href='/copy-string.html'>copy-string</a>. To decode only a number of leading bytes in &lt;string&gt;, use "input-length" clause and specify &lt;length&gt;.<br/>
<br/>
See <a href='/encode-web.html'>encode-web</a>.<br/>
<div class="vsub"><a id="Examples"></a>Examples</div>
Decode web-encoded string "str", after which it will hold a decoded string. <br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_331'>
<span class="Statement"> decode-web</span> str</pre>
<span id=golf_copied_331 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_331' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_331, code_331, golf_copied_331)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<!--BEFSAL13--><div class="vsub"><a id="See also"></a>See also</div>
 <a name='Web encoding'></a><span style="font-weight:bold;">Web encoding</span><br/>
<a href='/decode-web.html'>decode-web</a> &nbsp;<br/>
<a href='/encode-web.html'>encode-web</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='/documentation.html'>documentation</a><br/>
<a id='decrypt-data.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:right;background-color:white;'><a href='https://golf-lang.com' style='border-bottom:0px'><img src='https://golf-lang.com/golf.png'/></a></div><div class='vhub' style='margin-top:10px;'>&nbsp;Decrypt data</div><hr/><span style="font-weight:bold;">Purpose</span>: Decrypt data.<br/>
<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_332'>
<span class="Statement"> decrypt-data</span> &lt;data&gt;<span class="Type"> to</span> &lt;result&gt; \
     [<span class="Identifier"> input-length</span> &lt;input length&gt; ] \
     [<span class="Identifier"> binary</span> [ &lt;binary&gt; ] ] \
     (<span class="Identifier"> password</span> &lt;password&gt; \
         [<span class="Identifier"> salt</span> &lt;salt&gt; [<span class="Identifier"> salt-length</span> &lt;salt length&gt; ] ] \
         [<span class="Identifier"> iterations</span> &lt;iterations&gt; ] \
         [<span class="Identifier"> cipher</span> &lt;cipher algorithm&gt; ] \
         [<span class="Identifier"> digest</span> &lt;digest algorithm&gt; ]
         [<span class="Identifier"> cache</span> ]
         [<span class="Identifier"> clear-cache</span> &lt;clear cache&gt; <span class="Error">)</span> \
     [<span class="Identifier"> init-vector</span> &lt;init vector&gt; ]</pre>
<span id=golf_copied_332 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_332' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_332, code_332, golf_copied_332)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
decrypt-data will decrypt &lt;data&gt; which must have been encrypted with <a href='/encrypt-data.html'>encrypt-data</a>, or other software using the same algorithms and clauses as specified. <br/>
<br/>
If "input-length" clause is not used, then the number of bytes decrypted is the length of &lt;data&gt; (see <a href='/string-length.html'>string-length</a>); if "input-length" is specified, then exactly &lt;input length&gt; bytes are decrypted. Password used for decryption is string &lt;password&gt; (in "password" clause) and it must match the password used in <a href='/encrypt-data.html'>encrypt-data</a>. If "salt" clause is used, then string &lt;salt&gt; must match the salt used in encryption. If "init-vector" clause is used, then string &lt;init vector&gt; must match the IV (initialization vector) used in encryption. If "iterations" clause is used, then &lt;iterations&gt; must match the number used in encryption.<br/>
<br/>
The result of decryption is in &lt;result&gt; (in "to" clause).<br/>
<br/>
If data was encrypted in binary mode (see <a href='/encrypt-data.html'>encrypt-data</a>), you must decrypt it with the same, and if it wasn't, then you must not use it in decrypt-data either. The reason for this is obvious - binary mode of encryption is encrypted data in its shortest form, and character mode (without "binary" or if &lt;binary&gt; evaluates to false) is the same data converted to a hexadecimal string - thus decryption must first convert such data back to binary before decrypting.<br/>
<br/>
The cipher and digest algorithms (if specified as &lt;cipher algorithm&gt; and &lt;digest algorithm&gt; in "cipher" and "digest" clauses respectively) must match what was used in <a href='/encrypt-data.html'>encrypt-data</a>.<br/>
<br/>
"cache" clause is used to cache the result of key computation, so it is not computed each time decryption takes place, while "clear-cache" allows key to be re-computed every time &lt;clear cache&gt; evaluates to boolean true; re-computation of a key, if used, must match the usage during encryption. For more on "cache" and "clear-cache" clauses, as well as safety of encrypting/decrypting, see "Caching key" and "Safety" in <a href='/encrypt-data.html'>encrypt-data</a>.<br/>
<div class="vsub"><a id="Examples"></a>Examples</div>
See <a href='/encrypt-data.html'>encrypt-data</a>.<br/>
<!--BEFSAL13--><div class="vsub"><a id="See also"></a>See also</div>
 <a name='Encryption'></a><span style="font-weight:bold;">Encryption</span><br/>
<a href='/decrypt-data.html'>decrypt-data</a> &nbsp;<br/>
<a href='/derive-key.html'>derive-key</a> &nbsp;<br/>
<a href='/encrypt-data.html'>encrypt-data</a> &nbsp;<br/>
<a href='/hash-string.html'>hash-string</a> &nbsp;<br/>
<a href='/hmac-string.html'>hmac-string</a> &nbsp;<br/>
<a href='/random-crypto.html'>random-crypto</a> &nbsp;<br/>
<a href='/random-string.html'>random-string</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='/documentation.html'>documentation</a><br/>
<a id='delete-cookie.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:right;background-color:white;'><a href='https://golf-lang.com' style='border-bottom:0px'><img src='https://golf-lang.com/golf.png'/></a></div><div class='vhub' style='margin-top:10px;'>&nbsp;Delete cookie</div><hr/><span style="font-weight:bold;">Purpose</span>: Deletes a cookie.<br/>
<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_333'>
<span class="Statement"> delete-cookie</span> &lt;cookie name&gt; [<span class="Identifier"> path</span> &lt;cookie path&gt; ] [<span class="Type"> status</span> &lt;status&gt; ] [<span class="Identifier"> secure</span> &lt;secure&gt; ]</pre>
<span id=golf_copied_333 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_333' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_333, code_333, golf_copied_333)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
delete-cookie marks a cookie named &lt;cookie name&gt; for deletion, so it is sent back in the reply telling the client (such as browser) to delete it. <br/>
<br/>
Newer client implementations require a cookie deletion to use a secure context if the cookie is considered secure, and it is recommended to use "secure" clause to delete such a cookie. This is the case when either "secure" clause is used without boolean variable &lt;secure&gt;, or if &lt;secure&gt; evaluates to true.<br/>
<br/>
&lt;cookie name&gt; is a cookie that was either received from the client as a part of the request, or was added with <a href='/set-cookie.html'>set-cookie</a>. <br/>
<br/>
A cookie can be deleted before or after header is sent out (see <a href='/out-header.html'>out-header</a>). However a cookie must be deleted prior to outputting any actual response (such as with <a href='/output-statement.html'>output-statement</a> or <a href='/p-out.html'>p-out</a> for example), or the request will error out (see <a href='/error-handling.html'>error-handling</a>).<br/>
<br/>
&lt;status&gt; (in "status" clause) is the number that will be GG_ERR_EXIST if the cookie did not exist, or 0 or greater if it did.<br/>
<br/>
The same cookie name may be stored under different URL paths. You can use "path" clause to specify &lt;cookie path&gt; to ensure the desired cookie is deleted. <br/>
<div class="vsub"><a id="Examples"></a>Examples</div>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_334'>
<span class="Statement"> delete-cookie</span> <span class="Constant">&quot;my_cookie&quot;</span>
<span class="Statement"> set-bool</span> is_secure = <span class="Constant">true</span>
<span class="Statement"> delete-cookie</span> <span class="Constant">&quot;my_cookie&quot;</span><span class="Identifier"> path</span> <span class="Constant">&quot;/path&quot;</span><span class="Identifier"> secure</span> is_secure</pre>
<span id=golf_copied_334 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_334' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_334, code_334, golf_copied_334)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<!--BEFSAL13--><div class="vsub"><a id="See also"></a>See also</div>
 <a name='Cookies'></a><span style="font-weight:bold;">Cookies</span><br/>
<a href='/delete-cookie.html'>delete-cookie</a> &nbsp;<br/>
<a href='/get-cookie.html'>get-cookie</a> &nbsp;<br/>
<a href='/set-cookie.html'>set-cookie</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='/documentation.html'>documentation</a><br/>
<a id='delete-fifo.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:right;background-color:white;'><a href='https://golf-lang.com' style='border-bottom:0px'><img src='https://golf-lang.com/golf.png'/></a></div><div class='vhub' style='margin-top:10px;'>&nbsp;Delete fifo</div><hr/><span style="font-weight:bold;">Purpose</span>: Delete FIFO list elements up to the last one read, including.<br/>
<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_335'>
<span class="Statement"> delete-fifo</span> &lt;list&gt;</pre>
<span id=golf_copied_335 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_335' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_335, code_335, golf_copied_335)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
delete-fifo will delete all leading elements from the FIFO &lt;list&gt; up to the last one read, including. &lt;list&gt; was created by <a href='/new-fifo.html'>new-fifo</a>. <br/>
<br/>
Right after <a href='/rewind-fifo.html'>rewind-fifo</a>, no element was read yet, and delete-fifo will have no effect. After any <a href='/read-fifo.html'>read-fifo</a>, delete-fifo wil delete all elements up to the element read, including that element.<br/>
<div class="vsub"><a id="Examples"></a>Examples</div>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_336'>
<span class="Statement"> new-fifo</span> mylist

 <span class="Comment">// Add data to the list</span>
<span class="Statement"> write-fifo</span> mylist<span class="Identifier"> key</span> <span class="Constant">&quot;key1&quot;</span><span class="Identifier"> value</span> <span class="Constant">&quot;value1&quot;</span>
<span class="Statement"> write-fifo</span> mylist<span class="Identifier"> key</span> <span class="Constant">&quot;some2&quot;</span><span class="Identifier"> value</span> <span class="Constant">&quot;other2&quot;</span>

 <span class="Comment">// Get first data from the list</span>
<span class="Statement"> read-fifo</span> mylist<span class="Type"> key</span> k<span class="Type"> value</span> v

 <span class="Comment">// Delete first element from the list, so list will have only </span><span class="Constant">&quot;some2&quot;</span><span class="Comment"> key</span>
<span class="Statement"> delete-fifo</span> mylist</pre>
<span id=golf_copied_336 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_336' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_336, code_336, golf_copied_336)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<!--BEFSAL13--><div class="vsub"><a id="See also"></a>See also</div>
 <a name='FIFO'></a><span style="font-weight:bold;">FIFO</span><br/>
<a href='/delete-fifo.html'>delete-fifo</a> &nbsp;<br/>
<a href='/new-fifo.html'>new-fifo</a> &nbsp;<br/>
<a href='/purge-fifo.html'>purge-fifo</a> &nbsp;<br/>
<a href='/read-fifo.html'>read-fifo</a> &nbsp;<br/>
<a href='/rewind-fifo.html'>rewind-fifo</a> &nbsp;<br/>
<a href='/write-fifo.html'>write-fifo</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='/documentation.html'>documentation</a><br/>
<a id='delete-file.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:right;background-color:white;'><a href='https://golf-lang.com' style='border-bottom:0px'><img src='https://golf-lang.com/golf.png'/></a></div><div class='vhub' style='margin-top:10px;'>&nbsp;Delete file</div><hr/><span style="font-weight:bold;">Purpose</span>: Deletes a file.<br/>
<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_337'>
<span class="Statement"> delete-file</span> &lt;file location&gt; [<span class="Type"> status</span> &lt;status var&gt; ]</pre>
<span id=golf_copied_337 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_337' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_337, code_337, golf_copied_337)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
File specified with &lt;file location&gt; is deleted. &lt;file location&gt; can be given with an absolute path or relative to the application home directory (see <a href='/directories.html'>directories</a>). <br/>
<br/>
If "status" is specified, the status is stored into &lt;status var&gt;. The status is GG_OKAY on success or if the file did not exist, and GG_ERR_DELETE on failure. <br/>
<div class="vsub"><a id="Examples"></a>Examples</div>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_338'>
<span class="Statement"> delete-file</span> <span class="Constant">&quot;/home/user/some_file&quot;</span><span class="Type"> status</span> st</pre>
<span id=golf_copied_338 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_338' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_338, code_338, golf_copied_338)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<!--BEFSAL13--><div class="vsub"><a id="See also"></a>See also</div>
 <a name='Files'></a><span style="font-weight:bold;">Files</span><br/>
<a href='/close-file.html'>close-file</a> &nbsp;<br/>
<a href='/copy-file.html'>copy-file</a> &nbsp;<br/>
<a href='/delete-file.html'>delete-file</a> &nbsp;<br/>
<a href='/file-position.html'>file-position</a> &nbsp;<br/>
<a href='/file-storage.html'>file-storage</a> &nbsp;<br/>
<a href='/file-uploading.html'>file-uploading</a> &nbsp;<br/>
<a href='/lock-file.html'>lock-file</a> &nbsp;<br/>
<a href='/open-file.html'>open-file</a> &nbsp;<br/>
<a href='/read-file.html'>read-file</a> &nbsp;<br/>
<a href='/read-line.html'>read-line</a> &nbsp;<br/>
<a href='/rename-file.html'>rename-file</a> &nbsp;<br/>
<a href='/stat-file.html'>stat-file</a> &nbsp;<br/>
<a href='/temporary-file.html'>temporary-file</a> &nbsp;<br/>
<a href='/uniq-file.html'>uniq-file</a> &nbsp;<br/>
<a href='/unlock-file.html'>unlock-file</a> &nbsp;<br/>
<a href='/write-file.html'>write-file</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='/documentation.html'>documentation</a><br/>
<a id='delete-lifo.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:right;background-color:white;'><a href='https://golf-lang.com' style='border-bottom:0px'><img src='https://golf-lang.com/golf.png'/></a></div><div class='vhub' style='margin-top:10px;'>&nbsp;Delete lifo</div><hr/><span style="font-weight:bold;">Purpose</span>: Delete LIFO list elements.<br/>
<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_339'>
<span class="Statement"> delete-lifo</span> &lt;list&gt;</pre>
<span id=golf_copied_339 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_339' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_339, code_339, golf_copied_339)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
delete-lifo will delete the most recently added elements to the LIFO &lt;list&gt; up to the last one read, including. &lt;list&gt; was created by <a href='/new-lifo.html'>new-lifo</a>. <br/>
<br/>
Right after <a href='/rewind-lifo.html'>rewind-lifo</a>, no element was read yet, and delete-lifo will have no effect. Note that <a href='/write-lifo.html'>write-lifo</a> also performs an implicit <a href='/rewind-lifo.html'>rewind-lifo</a>.<br/>
<br/>
After any <a href='/read-lifo.html'>read-lifo</a>, delete-lifo wil delete all elements up to the element read, including that element.<br/>
<div class="vsub"><a id="Examples"></a>Examples</div>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_340'>
<span class="Statement"> new-lifo</span> mylist

 <span class="Comment">// Add data to the list</span>
<span class="Statement"> write-lifo</span> mylist<span class="Identifier"> key</span> <span class="Constant">&quot;key1&quot;</span><span class="Identifier"> value</span> <span class="Constant">&quot;value1&quot;</span>
<span class="Statement"> write-lifo</span> mylist<span class="Identifier"> key</span> <span class="Constant">&quot;some2&quot;</span><span class="Identifier"> value</span> <span class="Constant">&quot;other2&quot;</span>

 <span class="Comment">// Get first data from the list, it will be </span><span class="Constant">&quot;some2&quot;</span><span class="Comment"> key</span>
<span class="Statement"> read-lifo</span> mylist<span class="Type"> key</span> k<span class="Type"> value</span> v

 <span class="Comment">// Delete first element from the list, so list will have only </span><span class="Constant">&quot;key1&quot;</span><span class="Comment"> key</span>
<span class="Statement"> delete-lifo</span> mylist</pre>
<span id=golf_copied_340 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_340' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_340, code_340, golf_copied_340)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<!--BEFSAL13--><div class="vsub"><a id="See also"></a>See also</div>
 <a name='LIFO'></a><span style="font-weight:bold;">LIFO</span><br/>
<a href='/delete-lifo.html'>delete-lifo</a> &nbsp;<br/>
<a href='/new-lifo.html'>new-lifo</a> &nbsp;<br/>
<a href='/purge-lifo.html'>purge-lifo</a> &nbsp;<br/>
<a href='/read-lifo.html'>read-lifo</a> &nbsp;<br/>
<a href='/rewind-lifo.html'>rewind-lifo</a> &nbsp;<br/>
<a href='/write-lifo.html'>write-lifo</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='/documentation.html'>documentation</a><br/>
<a id='delete-list.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:right;background-color:white;'><a href='https://golf-lang.com' style='border-bottom:0px'><img src='https://golf-lang.com/golf.png'/></a></div><div class='vhub' style='margin-top:10px;'>&nbsp;Delete list</div><hr/><span style="font-weight:bold;">Purpose</span>: Delete current linked list element.<br/>
<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_341'>
<span class="Statement"> delete-list</span> &lt;list&gt; [<span class="Type"> status</span> &lt;status&gt; ]</pre>
<span id=golf_copied_341 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_341' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_341, code_341, golf_copied_341)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
delete-list will delete current element in linked &lt;list&gt; created with <a href='/new-list.html'>new-list</a>. A current list element is the one that will be subject to statements like <a href='/read-list.html'>read-list</a> and <a href='/write-list.html'>write-list</a>. See <a href='/position-list.html'>position-list</a> for more details on the current element.<br/>
<br/>
&lt;status&gt; (in "status" clause) is GG_OKAY if element is deleted, or GG_ERR_EXIST if could not delete element (this can happen if the list is empty, or if current list element is beyond the last element, such as for instance if "end" clause is used in position-list statement).<br/>
<br/>
Once an element is deleted, the current element becomes either the next one (if the current element wasn't the last one), or the previous one (if the current element was the last one).<br/>
<div class="vsub"><a id="Examples"></a>Examples</div>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_342'>
<span class="Statement"> delete-list</span> mylist<span class="Type"> status</span> st</pre>
<span id=golf_copied_342 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_342' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_342, code_342, golf_copied_342)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<!--BEFSAL13--><div class="vsub"><a id="See also"></a>See also</div>
 <a name='Linked list'></a><span style="font-weight:bold;">Linked list</span><br/>
<a href='/delete-list.html'>delete-list</a> &nbsp;<br/>
<a href='/get-list.html'>get-list</a> &nbsp;<br/>
<a href='/new-list.html'>new-list</a> &nbsp;<br/>
<a href='/position-list.html'>position-list</a> &nbsp;<br/>
<a href='/purge-list.html'>purge-list</a> &nbsp;<br/>
<a href='/read-list.html'>read-list</a> &nbsp;<br/>
<a href='/write-list.html'>write-list</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='/documentation.html'>documentation</a><br/>
<a id='delete-string.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:right;background-color:white;'><a href='https://golf-lang.com' style='border-bottom:0px'><img src='https://golf-lang.com/golf.png'/></a></div><div class='vhub' style='margin-top:10px;'>&nbsp;Delete string</div><hr/><span style="font-weight:bold;">Purpose</span>: Free string memory.<br/>
<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_343'>
<span class="Statement"> delete-string</span> &lt;string&gt;</pre>
<span id=golf_copied_343 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_343' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_343, code_343, golf_copied_343)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
delete-string frees &lt;string&gt; variable previously allocated by a Golf statement. <br/>
<br/>
Note that freeing memory is in most cases unnecessary as Golf will automatically do so at the end of each request. You should have a good reason for using delete-string otherwise.<br/>
<br/>
Golf keeps count of &lt;string&gt; references. So if &lt;string&gt; is referenced by other Golf statements (for instance it was assigned to another string variable in <a href='/set-string.html'>set-string</a>, or was used in statements like <a href='/write-tree.html'>write-tree</a> or <a href='/write-hash.html'>write-hash</a>), then &lt;string&gt; may not be deleted; in such a case, unless string was declared to be of process-scope and still used in such statements, it will be deleted when the <a href='/request.html'>request</a> ends. Otherwise, &lt;string&gt; becomes an empty string ("") after it was deleted.<br/>
<div class="vsub"><a id="Examples"></a>Examples</div>
Allocate and free random string:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_344'>
<span class="Statement"> random-string</span><span class="Type"> to</span> ran_str
<span class="Statement"> .</span>..
<span class="Statement"> delete-string</span> ran_str</pre>
<span id=golf_copied_344 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_344' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_344, code_344, golf_copied_344)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Free string allocated by write-string (consisting of 100 "Hello World"s):<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_345'>
<span class="Statement"> write-string</span> ws
<span class="Statement">     start-loop</span><span class="Identifier"> repeat</span> <span class="Constant">100</span>
<span class="Statement">         @</span>Hello World
<span class="Statement">     end-loop</span>
<span class="Statement"> end-write-string</span>
<span class="Statement"> .</span>..
<span class="Statement"> delete-string</span> ws</pre>
<span id=golf_copied_345 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_345' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_345, code_345, golf_copied_345)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<!--BEFSAL13--><div class="vsub"><a id="See also"></a>See also</div>
 <a name='Strings'></a><span style="font-weight:bold;">Strings</span><br/>
<a href='/copy-string.html'>copy-string</a> &nbsp;<br/>
<a href='/count-substring.html'>count-substring</a> &nbsp;<br/>
<a href='/delete-string.html'>delete-string</a> &nbsp;<br/>
<a href='/lower-string.html'>lower-string</a> &nbsp;<br/>
<a href='/read-split.html'>read-split</a> &nbsp;<br/>
<a href='/replace-string.html'>replace-string</a> &nbsp;<br/>
<a href='/set-string.html'>set-string</a> &nbsp;<br/>
<a href='/split-string.html'>split-string</a> &nbsp;<br/>
<a href='/string-length.html'>string-length</a> &nbsp;<br/>
<a href='/trim-string.html'>trim-string</a> &nbsp;<br/>
<a href='/upper-string.html'>upper-string</a> &nbsp;<br/>
<a href='/write-string.html'>write-string</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='/documentation.html'>documentation</a><br/>
<a id='delete-tree.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:right;background-color:white;'><a href='https://golf-lang.com' style='border-bottom:0px'><img src='https://golf-lang.com/golf.png'/></a></div><div class='vhub' style='margin-top:10px;'>&nbsp;Delete tree</div><hr/><span style="font-weight:bold;">Purpose</span>: Delete a node from a tree.<br/>
<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_346'>
<span class="Statement"> delete-tree</span> &lt;tree&gt;<span class="Identifier"> key</span> &lt;key&gt; \
     [<span class="Type"> status</span> &lt;status&gt; ] \
     [<span class="Type"> value</span> &lt;value&gt; ] \</pre>
<span id=golf_copied_346 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_346' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_346, code_346, golf_copied_346)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
delete-tree will search &lt;tree&gt; for string &lt;key&gt; and if found, delete its node (including the key in it), set &lt;value&gt; (in "value" clause) to node's value, and set &lt;status&gt; number (in "status" clause) to GG_OKAY. If &lt;key&gt; is not found, &lt;status&gt; will be GG_ERR_EXIST. If &lt;status&gt; is not GG_OKAY, &lt;value&gt; is unchanged.<br/>
<div class="vsub"><a id="Examples"></a>Examples</div>
Delete node with key "123", and obtain its value:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_347'>
<span class="Statement"> set-string</span> k = <span class="Constant">&quot;123&quot;</span>
<span class="Statement"> delete-tree</span> mytree<span class="Identifier"> key</span> k<span class="Type"> value</span> val<span class="Type"> status</span> st
<span class="Statement"> if-true</span> st<span class="Identifier"> not-equal</span> GG_OKAY
<span class="Statement">    @</span>Could not find key <span class="Statement">&lt;&lt;p-out</span> k<span class="Statement">&gt;&gt;</span>
<span class="Statement">    exit-handler</span>
<span class="Statement"> end-if</span>
 <span class="Comment">// display key/value deleted</span>
<span class="Statement"> @</span>Deleted key <span class="Statement">&lt;&lt;p-out</span> k<span class="Statement">&gt;&gt;</span> with value <span class="Statement">&lt;&lt;p-out</span> val<span class="Statement">&gt;&gt;</span>
 <span class="Comment">// delete the original value</span>
<span class="Statement"> delete-string</span> val</pre>
<span id=golf_copied_347 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_347' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_347, code_347, golf_copied_347)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<!--BEFSAL13--><div class="vsub"><a id="See also"></a>See also</div>
 <a name='Tree'></a><span style="font-weight:bold;">Tree</span><br/>
<a href='/delete-tree.html'>delete-tree</a> &nbsp;<br/>
<a href='/get-tree.html'>get-tree</a> &nbsp;<br/>
<a href='/new-tree.html'>new-tree</a> &nbsp;<br/>
<a href='/purge-tree.html'>purge-tree</a> &nbsp;<br/>
<a href='/read-tree.html'>read-tree</a> &nbsp;<br/>
<a href='/use-cursor.html'>use-cursor</a> &nbsp;<br/>
<a href='/write-tree.html'>write-tree</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='/documentation.html'>documentation</a><br/>
<a id='derive-key.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:right;background-color:white;'><a href='https://golf-lang.com' style='border-bottom:0px'><img src='https://golf-lang.com/golf.png'/></a></div><div class='vhub' style='margin-top:10px;'>&nbsp;Derive key</div><hr/><span style="font-weight:bold;">Purpose</span>: Derive a key.<br/>
<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_348'>
<span class="Statement"> derive-key</span> &lt;key&gt;<span class="Identifier"> from</span> &lt;source&gt;<span class="Identifier"> length</span> &lt;length&gt; \
     [<span class="Identifier"> binary</span> [ &lt;binary&gt; ] ] \
     [<span class="Identifier"> from-length</span> &lt;source length&gt; ] \
     [<span class="Identifier"> digest</span> &lt;digest algorithm&gt; ] \
     [<span class="Identifier"> salt</span> &lt;salt&gt; [<span class="Identifier"> salt-length</span> &lt;salt length&gt; ] ] \
     [<span class="Identifier"> iterations</span> &lt;iterations&gt; ]</pre>
<span id=golf_copied_348 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_348' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_348, code_348, golf_copied_348)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
derive-key derives &lt;key&gt; from string &lt;source&gt; in "from" clause. If &lt;source length&gt; in "from-length" clause is specified, exactly &lt;source length&gt; bytes of &lt;source&gt; are used. Otherwise, the length of &lt;source&gt; string is used as the number of bytes (see <a href='/string-length.html'>string-length</a>). <br/>
<br/>
The desired length of derived key is given by &lt;length&gt; in "length" clause. The method for key generation is PBKDF2. By default the digest used is "SHA256". You can use a different &lt;digest algorithm&gt; in "digest" clause (for example "SHA3-256"). To see a list of available digests:<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_349'>
<span class="Comment">#get digests</span>
openssl list <span class="Special">-digest-algorithms</span></pre>
<span id=golf_copied_349 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_349' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_349, code_349, golf_copied_349)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
The salt for key derivation can be given with &lt;salt&gt; in "salt" clause. If "salt-length" clause is not specified, then the entire length of salt is used (see <a href='/string-length.html'>string-length</a>), otherwise &lt;salt length&gt; bytes are used as salt.<br/>
<br/>
The number of iterations is given by &lt;iterations&gt; in "iterations" clause. The default is 1000 per <a href='https://www.rfc-editor.org/rfc/rfc8018'>RFC8018</a>, though depending on your needs and the quality of &lt;source&gt; you may choose a different value.<br/>
<br/>
By default, the derived key is produced in a hexadecimal form, where each byte is encoded as two-character hexadecimal characters, so its length is 2*&lt;length&gt;. If "binary" clause is used without boolean variable &lt;binary&gt;, or if &lt;binary&gt; evaluates to true, then the output is a binary string of &lt;length&gt; bytes.<br/>
<br/>
Key derivation is often used when storing password-derivatives in the database (with salt), and also for symmetrical key generation.<br/>
<div class="vsub"><a id="Examples"></a>Examples</div>
Derived key is in variable "mk":<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_350'>
<span class="Statement"> random-string</span><span class="Type"> to</span> rs9<span class="Identifier"> length</span> <span class="Constant">16</span>
<span class="Statement"> derive-key</span> mk<span class="Identifier"> from</span> <span class="Constant">&quot;clave secreta&quot;</span><span class="Identifier"> digest</span> <span class="Constant">&quot;sha-256&quot;</span><span class="Identifier"> salt</span> rs9<span class="Identifier"> salt-length</span> <span class="Constant">10</span><span class="Identifier"> iterations</span> <span class="Constant">2000</span><span class="Identifier"> length</span> <span class="Constant">16</span></pre>
<span id=golf_copied_350 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_350' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_350, code_350, golf_copied_350)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<!--BEFSAL13--><div class="vsub"><a id="See also"></a>See also</div>
 <a name='Encryption'></a><span style="font-weight:bold;">Encryption</span><br/>
<a href='/decrypt-data.html'>decrypt-data</a> &nbsp;<br/>
<a href='/derive-key.html'>derive-key</a> &nbsp;<br/>
<a href='/encrypt-data.html'>encrypt-data</a> &nbsp;<br/>
<a href='/hash-string.html'>hash-string</a> &nbsp;<br/>
<a href='/hmac-string.html'>hmac-string</a> &nbsp;<br/>
<a href='/random-crypto.html'>random-crypto</a> &nbsp;<br/>
<a href='/random-string.html'>random-string</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='/documentation.html'>documentation</a><br/>
<a id='directories.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:right;background-color:white;'><a href='https://golf-lang.com' style='border-bottom:0px'><img src='https://golf-lang.com/golf.png'/></a></div><div class='vhub' style='margin-top:10px;'>&nbsp;Directories</div><hr/><div class="vsub"><a id="Application directory structure"></a>Application directory structure</div>
<a href='/mgrg.html'>mgrg</a> will create a Golf directory structure (see "-i" option) when you create your application. While you can keep and compile Golf source files in any directory, the directories used by Golf are always under /var/lib/gg directory.<br/>
<br/>
A Golf application is always owned by a single Operating System user (see "-u" option in mgrg), while different applications can be owned by different users. This is the directory structure:<br/>
<ul><li>/var/lib/gg/bld/&lt;app name&gt;<br/>
Build directory is where your application executables are built, with name &lt;app name&gt;.srvc for a <a href='/service.html'>service</a> and &lt;app name&gt; for a <a href='/command-line.html'>command-line</a> program. This is a scratch-pad directory, so do not alter files in it, or use for anything else.<br/>
<br/>
</li><li>/var/lib/gg/&lt;app name&gt;<br/>
Application directory. All application data, including internals such as sockets, are kept here. Each such directory is owned by its owner with 700 privileges, preventing other users from accessing its files.<br/>
<br/>
</li><li>/var/lib/gg/&lt;app name&gt;/app<br/>
Application home directory. This is the current working directory when your application runs. Copy/move here any files and directories your application needs.<br/>
<br/>
</li><li>/var/lib/gg/&lt;app name&gt;/app/file<br/>
This is <a href='/file-storage.html'>file-storage</a> used for uploads and new document creation. Do not write there directly; Golf does that for you, such as with <a href='/uniq-file.html'>uniq-file</a> for instance, or when uploading files.<br/>
<br/>
</li><li>/var/lib/gg/&lt;app name&gt;/app/trace<br/>
Process tracing is written in per-process files if "--trace" option is used (see <a href='/gg.html'>gg</a>). Note that a special file "backtrace" is appended to when program crashes (or <a href='/report-error.html'>report-error</a> statement is used), and this file shows a full source backtrace, allowing for easier debugging. In order to see Golf source code lines, you must use "--debug" option, and to see a backtrace, Golf must be built with debugging information included. You can use "--c-lines" in order to show the source code lines of the generated C code, instead of Golf code.<br/>
<br/>
</li><li>/var/lib/gg/&lt;app name&gt;/app/db<br/>
Database configuration directory contains the <a href='/database-config-file.html'>database-config-file</a>s used by Golf to connect to databases; this directory is maintained by Golf and you should not use it.</li></ul>
While Golf directories are fixed, you can effectively change their location by creating a soft link. This way, your directories and files can be elsewhere, even on a different disk. For example, to house your file storage on a different disk:<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_351'>
ln <span class="Special">-s</span> /home/disk0/file /var/lib/gg/<span class="Statement">&lt;</span>app name<span class="Statement">&gt;</span>/app/file</pre>
<span id=golf_copied_351 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_351' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_351, code_351, golf_copied_351)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<!--BEFSAL13--><div class="vsub"><a id="See also"></a>See also</div>
 <a name='General'></a><span style="font-weight:bold;">General</span><br/>
<a href='/about-golf.html'>about-golf</a> &nbsp;<br/>
<a href='/directories.html'>directories</a> &nbsp;<br/>
<a href='/SELinux.html'>SELinux</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='/documentation.html'>documentation</a><br/>
<a id='documentation.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:right;background-color:white;'><a href='https://golf-lang.com' style='border-bottom:0px'><img src='https://golf-lang.com/golf.png'/></a></div><div class='vhub' style='margin-top:10px;'>&nbsp;Documentation</div><hr/><div class="vsub"><a id="Reference for Golf version 191"></a>Reference for Golf version 191</div>
<span style="font-weight:bold;">Note</span>: All the topics below are available as a <a href='/golfdoc.html'>single-page documentation</a>. <br/>
Browse by topic: &nbsp; &nbsp;<a href='#API'>API</a>, &nbsp; <a href='#Application information'>Application information</a>, &nbsp; <a href='#Array'>Array</a>, &nbsp; <a href='#Base64'>Base64</a>, &nbsp; <a href='#Cookies'>Cookies</a>, &nbsp; <a href='#Database'>Database</a>, &nbsp; <a href='#Debugging'>Debugging</a>, &nbsp; <a href='#Distributed computing'>Distributed computing</a>, &nbsp; <a href='#Documentation'>Documentation</a>, &nbsp; <a href='#Download and build'>Download and build</a>, &nbsp; <a href='#Encryption'>Encryption</a>, &nbsp; <a href='#Error handling'>Error handling</a>, &nbsp; <a href='#FIFO'>FIFO</a>, &nbsp; <a href='#Files'>Files</a>, &nbsp; <a href='#General'>General</a>, &nbsp; <a href='#Golf compiler and utility'>Golf compiler and utility</a>, &nbsp; <a href='#Hash'>Hash</a>, &nbsp; <a href='#Hex encoding'>Hex encoding</a>, &nbsp; <a href='#JSON parsing'>JSON parsing</a>, &nbsp; <a href='#Language'>Language</a>, &nbsp; <a href='#License'>License</a>, &nbsp; <a href='#LIFO'>LIFO</a>, &nbsp; <a href='#Linked list'>Linked list</a>, &nbsp; <a href='#Memory'>Memory</a>, &nbsp; <a href='#Messages'>Messages</a>, &nbsp; <a href='#Numbers'>Numbers</a>, &nbsp; <a href='#Output'>Output</a>, &nbsp; <a href='#Program execution'>Program execution</a>, &nbsp; <a href='#Program flow'>Program flow</a>, &nbsp; <a href='#Quick start'>Quick start</a>, &nbsp; <a href='#Regex'>Regex</a>, &nbsp; <a href='#Request data'>Request data</a>, &nbsp; <a href='#Request information'>Request information</a>, &nbsp; <a href='#Requests'>Requests</a>, &nbsp; <a href='#Running application'>Running application</a>, &nbsp; <a href='#Safety'>Safety</a>, &nbsp; <a href='#Service manager'>Service manager</a>, &nbsp; <a href='#Service processing'>Service processing</a>, &nbsp; <a href='#Strings'>Strings</a>, &nbsp; <a href='#System information'>System information</a>, &nbsp; <a href='#Time'>Time</a>, &nbsp; <a href='#Tree'>Tree</a>, &nbsp; <a href='#URL encoding'>URL encoding</a>, &nbsp; <a href='#UTF8'>UTF8</a>, &nbsp; <a href='#Web'>Web</a>, &nbsp; <a href='#Web encoding'>Web encoding</a>, &nbsp; <a href='#Web servers'>Web servers</a><br/>
<br/>
<ul><br/>
<li><a name='API'></a><span style="font-weight:bold;">API</span><br/>
<a href='/Client-API.html'>Client-API</a> &nbsp;<br/>
<a href='/Server-API.html'>Server-API</a> &nbsp; </li>
<br/>
<li><a name='Application information'></a><span style="font-weight:bold;">Application information</span><br/>
<a href='/get-app.html'>get-app</a> &nbsp; </li>
<br/>
<li><a name='Array'></a><span style="font-weight:bold;">Array</span><br/>
<a href='/new-array.html'>new-array</a> &nbsp;<br/>
<a href='/purge-array.html'>purge-array</a> &nbsp;<br/>
<a href='/read-array.html'>read-array</a> &nbsp;<br/>
<a href='/write-array.html'>write-array</a> &nbsp; </li>
<br/>
<li><a name='Base64'></a><span style="font-weight:bold;">Base64</span><br/>
<a href='/decode-base64.html'>decode-base64</a> &nbsp;<br/>
<a href='/encode-base64.html'>encode-base64</a> &nbsp; </li>
<br/>
<li><a name='Cookies'></a><span style="font-weight:bold;">Cookies</span><br/>
<a href='/delete-cookie.html'>delete-cookie</a> &nbsp;<br/>
<a href='/get-cookie.html'>get-cookie</a> &nbsp;<br/>
<a href='/set-cookie.html'>set-cookie</a> &nbsp; </li>
<br/>
<li><a name='Database'></a><span style="font-weight:bold;">Database</span><br/>
<a href='/begin-transaction.html'>begin-transaction</a> &nbsp;<br/>
<a href='/commit-transaction.html'>commit-transaction</a> &nbsp;<br/>
<a href='/current-row.html'>current-row</a> &nbsp;<br/>
<a href='/database-config-file.html'>database-config-file</a> &nbsp;<br/>
<a href='/db-error.html'>db-error</a> &nbsp;<br/>
<a href='/mariadb-database.html'>mariadb-database</a> &nbsp;<br/>
<a href='/postgresql-database.html'>postgresql-database</a> &nbsp;<br/>
<a href='/rollback-transaction.html'>rollback-transaction</a> &nbsp;<br/>
<a href='/run-query.html'>run-query</a> &nbsp;<br/>
<a href='/sqlite-database.html'>sqlite-database</a> &nbsp; </li>
<br/>
<li><a name='Debugging'></a><span style="font-weight:bold;">Debugging</span><br/>
<a href='/debugging.html'>debugging</a> &nbsp;<br/>
<a href='/trace-run.html'>trace-run</a> &nbsp; </li>
<br/>
<li><a name='Distributed computing'></a><span style="font-weight:bold;">Distributed computing</span><br/>
<a href='/call-remote.html'>call-remote</a> &nbsp;<br/>
<a href='/new-remote.html'>new-remote</a> &nbsp;<br/>
<a href='/read-remote.html'>read-remote</a> &nbsp;<br/>
<a href='/run-remote.html'>run-remote</a> &nbsp; </li>
<br/>
<li><a name='Documentation'></a><span style="font-weight:bold;">Documentation</span><br/>
<a href='/documentation.html'>documentation</a> &nbsp; </li>
<br/>
<li><a name='Download and build'></a><span style="font-weight:bold;">Download and build</span><br/>
<a href='/install.html'>install</a> &nbsp;<br/>
<a href='/install-arch.html'>install-arch</a> &nbsp;<br/>
<a href='/install-debian.html'>install-debian</a> &nbsp;<br/>
<a href='/install-fedora.html'>install-fedora</a> &nbsp;<br/>
<a href='/install-opensuse.html'>install-opensuse</a> &nbsp;<br/>
<a href='/uninstall.html'>uninstall</a> &nbsp; </li>
<br/>
<li><a name='Encryption'></a><span style="font-weight:bold;">Encryption</span><br/>
<a href='/decrypt-data.html'>decrypt-data</a> &nbsp;<br/>
<a href='/derive-key.html'>derive-key</a> &nbsp;<br/>
<a href='/encrypt-data.html'>encrypt-data</a> &nbsp;<br/>
<a href='/hash-string.html'>hash-string</a> &nbsp;<br/>
<a href='/hmac-string.html'>hmac-string</a> &nbsp;<br/>
<a href='/random-crypto.html'>random-crypto</a> &nbsp;<br/>
<a href='/random-string.html'>random-string</a> &nbsp; </li>
<br/>
<li><a name='Error handling'></a><span style="font-weight:bold;">Error handling</span><br/>
<a href='/db-error.html'>db-error</a> &nbsp;<br/>
<a href='/error-code.html'>error-code</a> &nbsp;<br/>
<a href='/error-handling.html'>error-handling</a> &nbsp;<br/>
<a href='/report-error.html'>report-error</a> &nbsp; </li>
<br/>
<li><a name='FIFO'></a><span style="font-weight:bold;">FIFO</span><br/>
<a href='/delete-fifo.html'>delete-fifo</a> &nbsp;<br/>
<a href='/new-fifo.html'>new-fifo</a> &nbsp;<br/>
<a href='/purge-fifo.html'>purge-fifo</a> &nbsp;<br/>
<a href='/read-fifo.html'>read-fifo</a> &nbsp;<br/>
<a href='/rewind-fifo.html'>rewind-fifo</a> &nbsp;<br/>
<a href='/write-fifo.html'>write-fifo</a> &nbsp; </li>
<br/>
<li><a name='Files'></a><span style="font-weight:bold;">Files</span><br/>
<a href='/close-file.html'>close-file</a> &nbsp;<br/>
<a href='/copy-file.html'>copy-file</a> &nbsp;<br/>
<a href='/delete-file.html'>delete-file</a> &nbsp;<br/>
<a href='/file-position.html'>file-position</a> &nbsp;<br/>
<a href='/file-storage.html'>file-storage</a> &nbsp;<br/>
<a href='/file-uploading.html'>file-uploading</a> &nbsp;<br/>
<a href='/lock-file.html'>lock-file</a> &nbsp;<br/>
<a href='/open-file.html'>open-file</a> &nbsp;<br/>
<a href='/read-file.html'>read-file</a> &nbsp;<br/>
<a href='/read-line.html'>read-line</a> &nbsp;<br/>
<a href='/rename-file.html'>rename-file</a> &nbsp;<br/>
<a href='/stat-file.html'>stat-file</a> &nbsp;<br/>
<a href='/temporary-file.html'>temporary-file</a> &nbsp;<br/>
<a href='/uniq-file.html'>uniq-file</a> &nbsp;<br/>
<a href='/unlock-file.html'>unlock-file</a> &nbsp;<br/>
<a href='/write-file.html'>write-file</a> &nbsp; </li>
<br/>
<li><a name='General'></a><span style="font-weight:bold;">General</span><br/>
<a href='/about-golf.html'>about-golf</a> &nbsp;<br/>
<a href='/directories.html'>directories</a> &nbsp;<br/>
<a href='/SELinux.html'>SELinux</a> &nbsp; </li>
<br/>
<li><a name='Golf compiler and utility'></a><span style="font-weight:bold;">Golf compiler and utility</span><br/>
<a href='/gg.html'>gg</a> &nbsp; </li>
<br/>
<li><a name='Hash'></a><span style="font-weight:bold;">Hash</span><br/>
<a href='/get-hash.html'>get-hash</a> &nbsp;<br/>
<a href='/new-hash.html'>new-hash</a> &nbsp;<br/>
<a href='/purge-hash.html'>purge-hash</a> &nbsp;<br/>
<a href='/read-hash.html'>read-hash</a> &nbsp;<br/>
<a href='/resize-hash.html'>resize-hash</a> &nbsp;<br/>
<a href='/write-hash.html'>write-hash</a> &nbsp; </li>
<br/>
<li><a name='Hex encoding'></a><span style="font-weight:bold;">Hex encoding</span><br/>
<a href='/decode-hex.html'>decode-hex</a> &nbsp;<br/>
<a href='/encode-hex.html'>encode-hex</a> &nbsp; </li>
<br/>
<li><a name='JSON parsing'></a><span style="font-weight:bold;">JSON parsing</span><br/>
<a href='/json-doc.html'>json-doc</a> &nbsp;<br/>
<a href='/read-json.html'>read-json</a> &nbsp; </li>
<br/>
<li><a name='Language'></a><span style="font-weight:bold;">Language</span><br/>
<a href='/inline-code.html'>inline-code</a> &nbsp;<br/>
<a href='/statements.html'>statements</a> &nbsp;<br/>
<a href='/syntax-highlighting.html'>syntax-highlighting</a> &nbsp;<br/>
<a href='/unused-var.html'>unused-var</a> &nbsp;<br/>
<a href='/variable-scope.html'>variable-scope</a> &nbsp; </li>
<br/>
<li><a name='License'></a><span style="font-weight:bold;">License</span><br/>
<a href='/license.html'>license</a> &nbsp; </li>
<br/>
<li><a name='LIFO'></a><span style="font-weight:bold;">LIFO</span><br/>
<a href='/delete-lifo.html'>delete-lifo</a> &nbsp;<br/>
<a href='/new-lifo.html'>new-lifo</a> &nbsp;<br/>
<a href='/purge-lifo.html'>purge-lifo</a> &nbsp;<br/>
<a href='/read-lifo.html'>read-lifo</a> &nbsp;<br/>
<a href='/rewind-lifo.html'>rewind-lifo</a> &nbsp;<br/>
<a href='/write-lifo.html'>write-lifo</a> &nbsp; </li>
<br/>
<li><a name='Linked list'></a><span style="font-weight:bold;">Linked list</span><br/>
<a href='/delete-list.html'>delete-list</a> &nbsp;<br/>
<a href='/get-list.html'>get-list</a> &nbsp;<br/>
<a href='/new-list.html'>new-list</a> &nbsp;<br/>
<a href='/position-list.html'>position-list</a> &nbsp;<br/>
<a href='/purge-list.html'>purge-list</a> &nbsp;<br/>
<a href='/read-list.html'>read-list</a> &nbsp;<br/>
<a href='/write-list.html'>write-list</a> &nbsp; </li>
<br/>
<li><a name='Memory'></a><span style="font-weight:bold;">Memory</span><br/>
<a href='/memory-handling.html'>memory-handling</a> &nbsp; </li>
<br/>
<li><a name='Messages'></a><span style="font-weight:bold;">Messages</span><br/>
<a href='/get-message.html'>get-message</a> &nbsp;<br/>
<a href='/new-message.html'>new-message</a> &nbsp;<br/>
<a href='/read-message.html'>read-message</a> &nbsp;<br/>
<a href='/SEMI.html'>SEMI</a> &nbsp;<br/>
<a href='/write-message.html'>write-message</a> &nbsp; </li>
<br/>
<li><a name='Numbers'></a><span style="font-weight:bold;">Numbers</span><br/>
<a href='/number-expressions.html'>number-expressions</a> &nbsp;<br/>
<a href='/number-string.html'>number-string</a> &nbsp;<br/>
<a href='/set-number.html'>set-number</a> &nbsp;<br/>
<a href='/string-number.html'>string-number</a> &nbsp; </li>
<br/>
<li><a name='Output'></a><span style="font-weight:bold;">Output</span><br/>
<a href='/finish-output.html'>finish-output</a> &nbsp;<br/>
<a href='/flush-output.html'>flush-output</a> &nbsp;<br/>
<a href='/output-statement.html'>output-statement</a> &nbsp;<br/>
<a href='/pf-out.html'>pf-out</a> &nbsp;<br/>
<a href='/pf-url.html'>pf-url</a> &nbsp;<br/>
<a href='/pf-web.html'>pf-web</a> &nbsp;<br/>
<a href='/p-num.html'>p-num</a> &nbsp;<br/>
<a href='/p-out.html'>p-out</a> &nbsp;<br/>
<a href='/p-path.html'>p-path</a> &nbsp;<br/>
<a href='/p-source-file.html'>p-source-file</a> &nbsp;<br/>
<a href='/p-source-line.html'>p-source-line</a> &nbsp;<br/>
<a href='/p-url.html'>p-url</a> &nbsp;<br/>
<a href='/p-web.html'>p-web</a> &nbsp; </li>
<br/>
<li><a name='Program execution'></a><span style="font-weight:bold;">Program execution</span><br/>
<a href='/exec-program.html'>exec-program</a> &nbsp;<br/>
<a href='/handler-status.html'>handler-status</a> &nbsp; </li>
<br/>
<li><a name='Program flow'></a><span style="font-weight:bold;">Program flow</span><br/>
<a href='/break-loop.html'>break-loop</a> &nbsp;<br/>
<a href='/code-blocks.html'>code-blocks</a> &nbsp;<br/>
<a href='/continue-loop.html'>continue-loop</a> &nbsp;<br/>
<a href='/do-once.html'>do-once</a> &nbsp;<br/>
<a href='/exit-handler.html'>exit-handler</a> &nbsp;<br/>
<a href='/if-defined.html'>if-defined</a> &nbsp;<br/>
<a href='/if-true.html'>if-true</a> &nbsp;<br/>
<a href='/return-handler.html'>return-handler</a> &nbsp;<br/>
<a href='/set-bool.html'>set-bool</a> &nbsp;<br/>
<a href='/start-loop.html'>start-loop</a> &nbsp; </li>
<br/>
<li><a name='Quick start'></a><span style="font-weight:bold;">Quick start</span><br/>
<a href='/123-hello-world.html'>123-hello-world</a> &nbsp; </li>
<br/>
<li><a name='Regex'></a><span style="font-weight:bold;">Regex</span><br/>
<a href='/match-regex.html'>match-regex</a> &nbsp; </li>
<br/>
<li><a name='Request data'></a><span style="font-weight:bold;">Request data</span><br/>
<a href='/get-param.html'>get-param</a> &nbsp;<br/>
<a href='/request-body.html'>request-body</a> &nbsp;<br/>
<a href='/set-param.html'>set-param</a> &nbsp; </li>
<br/>
<li><a name='Request information'></a><span style="font-weight:bold;">Request information</span><br/>
<a href='/get-req.html'>get-req</a> &nbsp; </li>
<br/>
<li><a name='Requests'></a><span style="font-weight:bold;">Requests</span><br/>
<a href='/request.html'>request</a> &nbsp; </li>
<br/>
<li><a name='Running application'></a><span style="font-weight:bold;">Running application</span><br/>
<a href='/application-setup.html'>application-setup</a> &nbsp;<br/>
<a href='/CGI.html'>CGI</a> &nbsp;<br/>
<a href='/command-line.html'>command-line</a> &nbsp;<br/>
<a href='/service.html'>service</a> &nbsp; </li>
<br/>
<li><a name='Safety'></a><span style="font-weight:bold;">Safety</span><br/>
<a href='/call-extended.html'>call-extended</a> &nbsp;<br/>
<a href='/extended-mode.html'>extended-mode</a> &nbsp; </li>
<br/>
<li><a name='Service manager'></a><span style="font-weight:bold;">Service manager</span><br/>
<a href='/mgrg.html'>mgrg</a> &nbsp; </li>
<br/>
<li><a name='Service processing'></a><span style="font-weight:bold;">Service processing</span><br/>
<a href='/after-handler.html'>after-handler</a> &nbsp;<br/>
<a href='/before-handler.html'>before-handler</a> &nbsp;<br/>
<a href='/begin-handler.html'>begin-handler</a> &nbsp;<br/>
<a href='/call-handler.html'>call-handler</a> &nbsp; </li>
<br/>
<li><a name='Strings'></a><span style="font-weight:bold;">Strings</span><br/>
<a href='/copy-string.html'>copy-string</a> &nbsp;<br/>
<a href='/count-substring.html'>count-substring</a> &nbsp;<br/>
<a href='/delete-string.html'>delete-string</a> &nbsp;<br/>
<a href='/lower-string.html'>lower-string</a> &nbsp;<br/>
<a href='/read-split.html'>read-split</a> &nbsp;<br/>
<a href='/replace-string.html'>replace-string</a> &nbsp;<br/>
<a href='/set-string.html'>set-string</a> &nbsp;<br/>
<a href='/split-string.html'>split-string</a> &nbsp;<br/>
<a href='/string-length.html'>string-length</a> &nbsp;<br/>
<a href='/trim-string.html'>trim-string</a> &nbsp;<br/>
<a href='/upper-string.html'>upper-string</a> &nbsp;<br/>
<a href='/write-string.html'>write-string</a> &nbsp; </li>
<br/>
<li><a name='System information'></a><span style="font-weight:bold;">System information</span><br/>
<a href='/get-sys.html'>get-sys</a> &nbsp; </li>
<br/>
<li><a name='Time'></a><span style="font-weight:bold;">Time</span><br/>
<a href='/get-time.html'>get-time</a> &nbsp;<br/>
<a href='/pause-program.html'>pause-program</a> &nbsp; </li>
<br/>
<li><a name='Tree'></a><span style="font-weight:bold;">Tree</span><br/>
<a href='/delete-tree.html'>delete-tree</a> &nbsp;<br/>
<a href='/get-tree.html'>get-tree</a> &nbsp;<br/>
<a href='/new-tree.html'>new-tree</a> &nbsp;<br/>
<a href='/purge-tree.html'>purge-tree</a> &nbsp;<br/>
<a href='/read-tree.html'>read-tree</a> &nbsp;<br/>
<a href='/use-cursor.html'>use-cursor</a> &nbsp;<br/>
<a href='/write-tree.html'>write-tree</a> &nbsp; </li>
<br/>
<li><a name='URL encoding'></a><span style="font-weight:bold;">URL encoding</span><br/>
<a href='/decode-url.html'>decode-url</a> &nbsp;<br/>
<a href='/encode-url.html'>encode-url</a> &nbsp; </li>
<br/>
<li><a name='UTF8'></a><span style="font-weight:bold;">UTF8</span><br/>
<a href='/text-utf8.html'>text-utf8</a> &nbsp;<br/>
<a href='/utf8-text.html'>utf8-text</a> &nbsp; </li>
<br/>
<li><a name='Web'></a><span style="font-weight:bold;">Web</span><br/>
<a href='/call-web.html'>call-web</a> &nbsp;<br/>
<a href='/out-header.html'>out-header</a> &nbsp;<br/>
<a href='/send-file.html'>send-file</a> &nbsp;<br/>
<a href='/silent-header.html'>silent-header</a> &nbsp; </li>
<br/>
<li><a name='Web encoding'></a><span style="font-weight:bold;">Web encoding</span><br/>
<a href='/decode-web.html'>decode-web</a> &nbsp;<br/>
<a href='/encode-web.html'>encode-web</a> &nbsp; </li>
<br/>
<li><a name='Web servers'></a><span style="font-weight:bold;">Web servers</span><br/>
<a href='/connect-apache-tcp-socket.html'>connect-apache-tcp-socket</a> &nbsp;<br/>
<a href='/connect-apache-unix-socket.html'>connect-apache-unix-socket</a> &nbsp;<br/>
<a href='/connect-haproxy-tcp-socket.html'>connect-haproxy-tcp-socket</a> &nbsp;<br/>
<a href='/connect-nginx-tcp-socket.html'>connect-nginx-tcp-socket</a> &nbsp;<br/>
<a href='/connect-nginx-unix-socket.html'>connect-nginx-unix-socket</a> &nbsp; </li>
<br/>
</ul>
<div class="vsub"><a id="Man pages"></a>Man pages</div>
Golf documentation is available online, and also as man pages (i.e. manual pages). You can take any of the topics above and type it in man, for example<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_352'>
man run-query</pre>
<span id=golf_copied_352 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_352' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_352, code_352, golf_copied_352)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
The Golf section is '2gg', so in case of other software having conflicting topic names, you can also type<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_353'>
man 2gg run-query</pre>
<span id=golf_copied_353 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_353' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_353, code_353, golf_copied_353)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<!--BEFSAL13--><br/>
<a id='do-once.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:right;background-color:white;'><a href='https://golf-lang.com' style='border-bottom:0px'><img src='https://golf-lang.com/golf.png'/></a></div><div class='vhub' style='margin-top:10px;'>&nbsp;Do once</div><hr/><span style="font-weight:bold;">Purpose</span>: Execute statements only once in a process.<br/>
<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_354'>
<span class="Statement">  do-once</span>
     &lt;any statements&gt;
<span class="Statement">     .</span>..
<span class="Statement">  end-do-once</span></pre>
<span id=golf_copied_354 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_354' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_354, code_354, golf_copied_354)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
do-once will execute &lt;any statements&gt; only once in a single process regardless of how many requests that process serves. &lt;any statements&gt; end with end-do-once. The first time a process reaches do-once, &lt;any statements&gt; will execute; in all subsequent cases the program control will skip to immediately after end-do-once.<br/>
<br/>
do-once cannot be nested, but otherwise can be used any number of times. <br/>
<br/>
Typical use of do-once may be making any calls that need to be performed only once per process, or it may be a one-time setup of process-scoped variables, or anything else that needs to execute just once for all requests served by the same process.<br/>
<br/>
&lt;any statements&gt; execute in the nested scope relative to the code surrounding do-once/end-do-once, except that any process-scoped variables are created in the same scope as the code surrounding do-once/end-do-once; this simplifies creation of process-scoped variables, if needed.<br/>
<div class="vsub"><a id="Examples"></a>Examples</div>
In this example, a process-scoped hash (that is available to multiple requests of a single process) is created in the very first request a process serves and data is written to it; the subsequent requests do not create a new hash but rather just write to it.<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_355'>
<span class="Statement"> .</span>..
<span class="Statement">  do-once</span>
<span class="Statement">     new-hash</span> my_hash<span class="Identifier"> hash-size</span> <span class="Constant">1024</span><span class="Identifier"> process-scope</span>
<span class="Statement">  end-do-once</span>
<span class="Statement">  write-hash</span> my_hash<span class="Identifier"> key</span> my_key<span class="Identifier"> value</span> my_data
<span class="Statement">  .</span>..</pre>
<span id=golf_copied_355 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_355' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_355, code_355, golf_copied_355)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<!--BEFSAL13--><div class="vsub"><a id="See also"></a>See also</div>
 <a name='Program flow'></a><span style="font-weight:bold;">Program flow</span><br/>
<a href='/break-loop.html'>break-loop</a> &nbsp;<br/>
<a href='/code-blocks.html'>code-blocks</a> &nbsp;<br/>
<a href='/continue-loop.html'>continue-loop</a> &nbsp;<br/>
<a href='/do-once.html'>do-once</a> &nbsp;<br/>
<a href='/exit-handler.html'>exit-handler</a> &nbsp;<br/>
<a href='/if-defined.html'>if-defined</a> &nbsp;<br/>
<a href='/if-true.html'>if-true</a> &nbsp;<br/>
<a href='/return-handler.html'>return-handler</a> &nbsp;<br/>
<a href='/set-bool.html'>set-bool</a> &nbsp;<br/>
<a href='/start-loop.html'>start-loop</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='/documentation.html'>documentation</a><br/>
<a id='encode-base64.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:right;background-color:white;'><a href='https://golf-lang.com' style='border-bottom:0px'><img src='https://golf-lang.com/golf.png'/></a></div><div class='vhub' style='margin-top:10px;'>&nbsp;Encode base64</div><hr/><span style="font-weight:bold;">Purpose</span>: Base64 encode.<br/>
<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_356'>
<span class="Statement"> encode-base64</span> &lt;data&gt;<span class="Type"> to</span> &lt;output data&gt; \
     [<span class="Identifier"> input-length</span> &lt;input length&gt; ]</pre>
<span id=golf_copied_356 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_356' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_356, code_356, golf_copied_356)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
encode-base64 will encode string &lt;data&gt; into base64 string &lt;output data&gt;.<br/>
<br/>
If "input-length" clause is used, then &lt;input length&gt; is the number of bytes encoded, otherwise the entirety of &lt;data&gt; is encoded. <br/>
<br/>
The result is stored in &lt;output data&gt; (in "to" clause).<br/>
<br/>
Base64-encoded strings are often used where binary data needs to be in a format that complies with certain text-based protocols, such as in attaching documents in email, or embedding binary documents (such as "JPG" images for example) in web pages with "data:image/jpg;base64..." specified, etc.<br/>
<div class="vsub"><a id="Examples"></a>Examples</div>
An example that encodes a string, decodes, and finally checks if they match:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_357'>
 <span class="Comment">// Original string, generally this would be binary data in most cases</span>
<span class="Statement"> set-string</span> dt =<span class="Constant">&quot;  oh well  &quot;</span>

 <span class="Comment">// Encode in base64</span>
<span class="Statement"> encode-base64</span> dt<span class="Type"> to</span> out_dt

<span class="Statement"> decode-base64</span> out_dt<span class="Type"> to</span> new_dt

<span class="Statement"> if-true</span> dt<span class="Identifier"> equal</span> new_dt
<span class="Statement">     @</span>Success!
<span class="Statement"> else-if</span>
<span class="Statement">     @</span>Failure!
<span class="Statement"> end-if</span></pre>
<span id=golf_copied_357 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_357' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_357, code_357, golf_copied_357)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
In the next example, "input-length" clause is used, and only a partial of the input string is encoded, then later compared to the original:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_358'>
 <span class="Comment">// Original string, generally this would be binary data in most cases</span>
<span class="Statement"> set-string</span> dt =<span class="Constant">&quot;  oh well  &quot;</span>

 <span class="Comment">// Encode in base64, encode only </span><span class="Constant">6</span><span class="Comment"> bytes</span>
<span class="Statement"> encode-base64</span> dt<span class="Identifier"> input-length</span> <span class="Constant">6</span><span class="Type"> to</span> out_dt

<span class="Statement"> decode-base64</span> out_dt<span class="Type"> to</span> new_dt

 <span class="Comment">// Get length of decoded string</span>
<span class="Statement"> string-length</span> new_dt<span class="Type"> to</span> new_len

<span class="Statement"> if-true</span> new_len<span class="Identifier"> not-equal</span> <span class="Constant">6</span>
<span class="Statement">     @</span>Failure!
<span class="Statement"> else-if</span>
<span class="Statement">     @</span>Success!
<span class="Statement"> end-if</span>

<span class="Statement"> if-true</span> dt<span class="Identifier"> equal</span> new_dt<span class="Identifier"> length</span> new_len
<span class="Statement">     @</span>Success!
<span class="Statement"> else-if</span>
<span class="Statement">     @</span>Failure! [<span class="Statement">&lt;&lt;p-out</span> dt<span class="Statement">&gt;&gt;</span>] [<span class="Statement">&lt;&lt;p-out</span> new_dt<span class="Statement">&gt;&gt;</span>]
<span class="Statement"> end-if</span></pre>
<span id=golf_copied_358 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_358' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_358, code_358, golf_copied_358)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<!--BEFSAL13--><div class="vsub"><a id="See also"></a>See also</div>
 <a name='Base64'></a><span style="font-weight:bold;">Base64</span><br/>
<a href='/decode-base64.html'>decode-base64</a> &nbsp;<br/>
<a href='/encode-base64.html'>encode-base64</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='/documentation.html'>documentation</a><br/>
<a id='encode-hex.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:right;background-color:white;'><a href='https://golf-lang.com' style='border-bottom:0px'><img src='https://golf-lang.com/golf.png'/></a></div><div class='vhub' style='margin-top:10px;'>&nbsp;Encode hex</div><hr/><span style="font-weight:bold;">Purpose</span>: Encode data into hexadecimal string.<br/>
<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_359'>
<span class="Statement"> encode-hex</span> &lt;data&gt;<span class="Type"> to</span> &lt;output&gt; \
     [<span class="Identifier"> input-length</span> &lt;input length&gt; ] \
     [<span class="Identifier"> prefix</span> &lt;prefix&gt; ]</pre>
<span id=golf_copied_359 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_359' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_359, code_359, golf_copied_359)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
encode-hex will encode string &lt;data&gt; to hexadecimal string &lt;output&gt; given in "to" clause which consists of digits "0"-"9" and letters "a"-"f". <br/>
<br/>
The length of &lt;data&gt; to encode may be given with &lt;input length&gt; number in "input-length" clause; if not the whole string &lt;data&gt; is used. If you wish to prefix the output with a string &lt;prefix&gt;, you can specify it in "prefix" clause with &lt;prefix&gt;; otherwise no prefix is prepended.<br/>
<div class="vsub"><a id="Examples"></a>Examples</div>
Create hexadecimal string from binary data "mydata" of length 7, prefixed with string "\\\\x" (which is typically needed for PostgreSQL binary input to queries). The output string "hexout" is created:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_360'>
<span class="Statement"> set-string</span> mydata = <span class="Constant">&quot;</span><span class="Special">\x00</span><span class="Constant">&quot;&quot;A&quot;&quot;</span><span class="Special">\x00</span><span class="Constant">&quot;&quot;</span><span class="Special">\xF</span><span class="Constant">&quot;&quot;AB&quot;&quot;</span><span class="Special">\x00</span><span class="Constant">&quot;&quot;</span><span class="Special">\x04</span><span class="Constant">&quot;</span>
<span class="Statement"> encode-hex</span> mydata<span class="Type"> to</span> hexout<span class="Identifier"> input-length</span> <span class="Constant">7</span><span class="Identifier"> prefix</span> <span class="Constant">&quot;</span><span class="Special">\\\\</span><span class="Constant">x&quot;</span></pre>
<span id=golf_copied_360 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_360' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_360, code_360, golf_copied_360)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
The value of "hexout" will be:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_361'>
 \\x0041000F414200</pre>
<span id=golf_copied_361 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_361' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_361, code_361, golf_copied_361)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<!--BEFSAL13--><div class="vsub"><a id="See also"></a>See also</div>
 <a name='Hex encoding'></a><span style="font-weight:bold;">Hex encoding</span><br/>
<a href='/decode-hex.html'>decode-hex</a> &nbsp;<br/>
<a href='/encode-hex.html'>encode-hex</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='/documentation.html'>documentation</a><br/>
<a id='encode-url.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:right;background-color:white;'><a href='https://golf-lang.com' style='border-bottom:0px'><img src='https://golf-lang.com/golf.png'/></a></div><div class='vhub' style='margin-top:10px;'>&nbsp;Encode url</div><hr/><span style="font-weight:bold;">Purpose</span>: URL-encode string.<br/>
<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_362'>
<span class="Statement"> encode-url</span> &lt;string&gt;<span class="Type"> to</span> &lt;encoded string&gt; \
     [<span class="Identifier"> input-length</span> &lt;length&gt; ]</pre>
<span id=golf_copied_362 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_362' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_362, code_362, golf_copied_362)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
encode-url URL-encodes &lt;string&gt; and stores the result in &lt;encoded string&gt;. <br/>
<br/>
&lt;length&gt; in "input-length" clause lets you specify the number of bytes in &lt;string&gt; that will be encoded - if not specified or negative, it is the string length. <br/>
<br/>
All bytes except alphanumeric and those from "-._~" (i.e. dash, dot, underscore and tilde) are encoded.<br/>
<div class="vsub"><a id="Examples"></a>Examples</div>
In this example, a string "str" is URL encoded and the result is in a "result" string variable:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_363'>
<span class="Statement"> set-string</span> str=<span class="Constant">&quot;  x=y?z&amp;  &quot;</span>
<span class="Statement"> encode-url</span> str<span class="Type"> to</span> result</pre>
<span id=golf_copied_363 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_363' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_363, code_363, golf_copied_363)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
The "result" is "%20%20x%3Dy%3Fz%26%20%20".<br/>
<!--BEFSAL13--><div class="vsub"><a id="See also"></a>See also</div>
 <a name='URL encoding'></a><span style="font-weight:bold;">URL encoding</span><br/>
<a href='/decode-url.html'>decode-url</a> &nbsp;<br/>
<a href='/encode-url.html'>encode-url</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='/documentation.html'>documentation</a><br/>
<a id='encode-web.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:right;background-color:white;'><a href='https://golf-lang.com' style='border-bottom:0px'><img src='https://golf-lang.com/golf.png'/></a></div><div class='vhub' style='margin-top:10px;'>&nbsp;Encode web</div><hr/><span style="font-weight:bold;">Purpose</span>: Web(HTML)-encode string.<br/>
<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_364'>
<span class="Statement"> encode-web</span> &lt;string&gt;<span class="Type"> to</span> &lt;encoded string&gt; \
     [<span class="Identifier"> input-length</span> &lt;length&gt; ]</pre>
<span id=golf_copied_364 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_364' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_364, code_364, golf_copied_364)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
encode-web encodes &lt;string&gt; so it can be used in a HTML-like markup text (such as a web page or an XML/XHTML document), and stores the result in &lt;encoded string&gt;. <br/>
<br/>
You can encode only the first &lt;length&gt; bytes, given by "input-length" clause.<br/>
<div class="vsub"><a id="Examples"></a>Examples</div>
In this example, a string "str" will be web-encoded and the result is in "result" variable:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_365'>
<span class="Statement"> set-string</span> str=<span class="Constant">&quot;  x&lt;y&gt;z&amp;</span><span class="Special">\&quot;</span><span class="Constant">'  &quot;</span>
<span class="Statement"> encode-web</span> str<span class="Type"> to</span> result</pre>
<span id=golf_copied_365 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_365' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_365, code_365, golf_copied_365)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
The "result" is " &nbsp; x&amp;lt;y&amp;gt;z&amp;amp;&amp;quot;&amp;apos; &nbsp;".<br/>
<!--BEFSAL13--><div class="vsub"><a id="See also"></a>See also</div>
 <a name='Web encoding'></a><span style="font-weight:bold;">Web encoding</span><br/>
<a href='/decode-web.html'>decode-web</a> &nbsp;<br/>
<a href='/encode-web.html'>encode-web</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='/documentation.html'>documentation</a><br/>
<a id='encrypt-data.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:right;background-color:white;'><a href='https://golf-lang.com' style='border-bottom:0px'><img src='https://golf-lang.com/golf.png'/></a></div><div class='vhub' style='margin-top:10px;'>&nbsp;Encrypt data</div><hr/><span style="font-weight:bold;">Purpose</span>: Encrypt data.<br/>
<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_366'>
<span class="Statement"> encrypt-data</span> &lt;data&gt;<span class="Type"> to</span> &lt;result&gt; \
     [<span class="Identifier"> input-length</span> &lt;input length&gt; ] \
     [<span class="Identifier"> binary</span> [ &lt;binary&gt; ] ] \
     (<span class="Identifier"> password</span> &lt;password&gt; \
         [<span class="Identifier"> salt</span> &lt;salt&gt; [<span class="Identifier"> salt-length</span> &lt;salt length&gt; ] ] \
         [<span class="Identifier"> iterations</span> &lt;iterations&gt; ] \
         [<span class="Identifier"> cipher</span> &lt;cipher algorithm&gt; ] \
         [<span class="Identifier"> digest</span> &lt;digest algorithm&gt; ]
         [<span class="Identifier"> cache</span> ]
         [<span class="Identifier"> clear-cache</span> &lt;clear cache&gt; <span class="Error">)</span> \
     [<span class="Identifier"> init-vector</span> &lt;init vector&gt; ]</pre>
<span id=golf_copied_366 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_366' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_366, code_366, golf_copied_366)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
encrypt-data encrypts &lt;data&gt; and stores the ciphertext to &lt;result&gt; specified by "to" clause.<br/>
<div class="vsub"><a id="Cipher and digest"></a>Cipher and digest</div>
By default, AES-256-CBC encryption and SHA256 hashing is used. You can however specify different cipher and digest algorithms with &lt;cipher algorithm&gt; (in "cipher" clause) and &lt;digest algorithm&gt; (in "digest" clause) as long as <a href='https://www.openssl.org/'>OpenSSL</a> supports them, or you have added them to OpenSSL. You can see the available ones by using:<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_367'>
<span class="Comment">#get list of cipher providers</span>
openssl list <span class="Special">-cipher-algorithms</span>

<span class="Comment">#get list of digest providers</span>
openssl list <span class="Special">-digest-algorithms</span></pre>
<span id=golf_copied_367 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_367' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_367, code_367, golf_copied_367)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Note that the default algorithms will typically suffice. If you use different algorithms, you should have a specific reason. If you use a specific cipher and digest for encoding, you must use the same for decoding. The key derivation method is PBKDF2.<br/>
<div class="vsub"><a id="Data to be encrypted"></a>Data to be encrypted</div>
If "input-length" clause is missing, then the number of bytes encrypted is the length of &lt;data&gt; (see <a href='/string-length.html'>string-length</a>). If "input-length" clause is used, then &lt;input length&gt; bytes are encrypted.<br/>
<div class="vsub"><a id="Password"></a>Password</div>
String &lt;password&gt; (in "password" clause) is the password used to encrypt and it must be a null-terminated string. <br/>
<div class="vsub"><a id="Salt"></a>Salt</div>
String &lt;salt&gt; (in "salt" clause) is the salt used in Key Derivation Function (KDF) when an actual symmetric encryption key is created. If &lt;salt length&gt; (in "salt-length" clause) is not specified, then the salt is null-terminated, otherwise it is a binary value of length &lt;salt length&gt;. See <a href='/random-string.html'>random-string</a> or <a href='/random-crypto.html'>random-crypto</a> for generating a random salt. If you use the "salt" clause, then you must use the exact same &lt;salt&gt; when data is decrypted with <a href='/decrypt-data.html'>decrypt-data</a> - typically salt values are stored or transmitted unencrypted.<br/>
<div class="vsub"><a id="Iterations"></a>Iterations</div>
The number of iterations used in producing a key is specified in &lt;iterations&gt; in "iterations" clause. The default is 1000 per <a href='https://www.rfc-editor.org/rfc/rfc8018'>RFC8018</a>, though depending on your needs and the quality of password you may choose a different value.<br/>
<div class="vsub"><a id="Initialization vector (IV)"></a>Initialization vector (IV)</div>
Different encrypted messages should have a different IV value, which is specified with &lt;init vector&gt; in the "init-vector" clause. See <a href='/random-string.html'>random-string</a> or <a href='/random-crypto.html'>random-crypto</a> for generating IV values. The decrypting side must use the same IV value to decrypt the message. Just like salt, IV is not a secret and is transmitted in plain text. Each cipher algorithm may require a certain number of bytes for IV.<br/>
<div class="vsub"><a id="Encrypted data"></a>Encrypted data</div>
The encrypted data is stored in &lt;result&gt; (in "to" clause). The encrypted data can be a binary data (if "binary" clause is present without boolean variable &lt;binary&gt;, or if &lt;binary&gt; evaluates to true), which is binary-mode encryption; or if not, it will be a null-terminated string, which is character-mode encryption, consisting of hexadecimal characters (i.e. ranging from "0" to "9" and "a" to "f"). Character mode of encryption is convenient if the result of encryption should be a human readable string, or for the purposes of non-binary storage in the database.<br/>
<div class="vsub"><a id="Caching key"></a>Caching key</div>
A key used to actually encrypt/decrypt data is produced by using password, salt, cipher, digest and the number of iterations. Depending on these parameters (especially the number of iterations), computing the key can be a resource intensive and lengthy operation. You can cache the key value and compute it only once (or once in a while) by using "cache" clause. If you need to recompute the key once in a while, use "clear-cache" clause. &lt;clear cache&gt; is a "bool" variable; the key cache is cleared if it is true, and stays if it is false. For example with encrypt-data (the same applies to decrypt-data):<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_368'>
<span class="Statement"> set-bool</span> clear = <span class="Constant">true</span> if-<span class="Constant">true</span> q equal <span class="Constant">0</span>
<span class="Statement"> encrypt-data</span> dt<span class="Identifier"> init-vector</span> non<span class="Identifier"> password</span> pwd \
    <span class="Identifier"> salt</span> rs<span class="Identifier"> salt-length</span> <span class="Constant">10</span><span class="Identifier"> iterations</span> iter<span class="Type"> to</span> \
     dt_enc<span class="Identifier"> cache clear-cache</span> clear</pre>
<span id=golf_copied_368 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_368' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_368, code_368, golf_copied_368)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
In this case, when "q" is 0, cache will be cleared, with values of password, salt and iterations presumably changed, and the new key is computed and then cached. In all other cases, the last computed key stays the same. Normally, with IV usage (in "init-vector" clause), there is no need to change the key often, or at all.<br/>
<br/>
Note that while "cache" clause is in effect, the values for "password", "salt", "cipher", "digest" and "iterations" clauses can change without any effect. Only when "clear-cache" evaluates to "true" are those values taken into account.<br/>
<div class="vsub"><a id="Safety"></a>Safety</div>
Unless you are encrypting/decrypting a single message, you should always use IV in "init-vector" clause. Its purpose is to randomize the data encrypted, so that same messages do not produce the same ciphertext.<br/>
<br/>
If you use salt, a random IV is created with each different salt value. However, different salt values without "cache" clause will regenerate the key, which may be computationally intensive, so it may be better to use a different IV instead for each new encryption and keep the salt value the same with the high number of iterations. In practicality this means using "cache" so that key is computed once per process with the salt, and IV changes with each message. If you need to recompute the key occasionally, use "clear-cache".<br/>
<br/>
Each cipher/digest combination carries separate recommendations about the usage of salt, IV and the number of iterations. Please consult their documentation for more details.<br/>
<div class="vsub"><a id="Examples"></a>Examples</div>
In the following example, the data is encrypted, and then decrypted, producing the very same data:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_369'>
 <span class="Comment">// Original string to encrypt</span>
<span class="Statement"> set-string</span> orig_data=<span class="Constant">&quot;something to encrypt!&quot;</span>

 <span class="Comment">// Encrypted data is in </span><span class="Constant">&quot;res&quot;</span><span class="Comment"> variable</span>
<span class="Statement"> encrypt-data</span> orig_data<span class="Identifier"> password</span> <span class="Constant">&quot;mypass&quot;</span><span class="Type"> to</span> res

 <span class="Comment">// Decrypt what was just encrypted, decrypted data is in </span><span class="Constant">&quot;dec_data&quot;</span>
<span class="Statement"> decrypt-data</span> res<span class="Identifier"> password</span> <span class="Constant">&quot;mypass&quot;</span><span class="Type"> to</span> dec_data

 <span class="Comment">// Check that decrypted data matches the original </span>
 <span class="Statement">if</span> (!strcmp (orig_data, dec_data)) {
<span class="Statement">     @</span>Success!
<span class="Statement"> }</span> else {
<span class="Statement">     @</span>Failure!
<span class="Statement"> }</span></pre>
<span id=golf_copied_369 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_369' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_369, code_369, golf_copied_369)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
A more involved example below encrypts specific number of bytes (6 in this case). <a href='/random-string.html'>random-string</a> is used to produce salt. The length of data to encrypt is given with "input-length" clause. The encrypted data is specified to be "binary" (meaning not as a human-readable string), so the "output-length" of such binary output is specified. The decryption thus uses "input-length" clause to specify the length of data to decrypt, and also "output-length" to get the length of decrypted data. Finally, the original data is compared with the decrypted data, and the length of such data must be the same as the original (meaning 6):<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_370'>
 <span class="Comment">// Original data (only the first </span><span class="Constant">6</span><span class="Comment"> bytes are encrypted)</span>
<span class="Statement"> set-string</span> orig_data=<span class="Constant">&quot;something to encrypt!&quot;</span>

 <span class="Comment">// Get </span><span class="Constant">8</span><span class="Comment"> random binary bytes to be the salt</span>
<span class="Statement"> random-string</span><span class="Type"> to</span> newsalt<span class="Identifier"> length</span> <span class="Constant">8</span><span class="Identifier"> binary</span>

 <span class="Comment">// Encrypt data using salt and produce binary output (meaning it's not a null-terminated character string), with the</span>
 <span class="Comment">// length of such output in </span><span class="Constant">&quot;encrypted_len&quot;</span><span class="Comment"> variable.</span>
<span class="Statement"> encrypt-data</span> orig_data<span class="Identifier"> input-length</span> <span class="Constant">6</span> output-length encrypted_len<span class="Identifier"> password</span> <span class="Constant">&quot;mypass&quot;</span><span class="Identifier"> salt</span> newsalt<span class="Type"> to</span> res<span class="Identifier"> binary</span>

 <span class="Comment">// Decrypt the data encrypted above. The length of encrypted data is passed in </span><span class="Constant">&quot;encrypted_len&quot;</span><span class="Comment"> variable, and then length of decrypted data</span>
 <span class="Comment">// is obtained in </span><span class="Constant">&quot;decrypted_len&quot;</span><span class="Comment"> variable.</span>
<span class="Statement"> decrypt-data</span> res output-length decrypted_len<span class="Identifier"> password</span> <span class="Constant">&quot;mypass&quot;</span><span class="Identifier"> salt</span> newsalt<span class="Type"> to</span> dec_data<span class="Identifier"> input-length</span> encrypted_len<span class="Identifier"> binary</span>

 <span class="Comment">// Check if the </span><span class="Constant">6</span><span class="Comment"> bytes of the original data matches decrypted data, and if exactly </span><span class="Constant">6</span><span class="Comment"> bytes was decrypted</span>
 <span class="Statement">if</span> (!strncmp(orig_data,dec_data, <span class="Constant">6</span>) &amp;&amp; decrypted_len == <span class="Constant">6</span>) {
<span class="Statement">     @</span>Success!
<span class="Statement"> }</span> else {
<span class="Statement">     @</span>Failure!
<span class="Statement"> }</span></pre>
<span id=golf_copied_370 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_370' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_370, code_370, golf_copied_370)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
An example of using different algorithms:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_371'>
<span class="Statement"> encrypt-data</span> <span class="Constant">&quot;some data!&quot;</span><span class="Identifier"> password</span> <span class="Constant">&quot;mypwd&quot;</span><span class="Identifier"> salt</span> rs1<span class="Type"> to</span> encd1<span class="Identifier"> cipher</span> <span class="Constant">&quot;camellia-256-cfb1&quot;</span><span class="Identifier"> digest</span> <span class="Constant">&quot;sha3-256&quot;</span>
<span class="Statement"> decrypt-data</span> encd1<span class="Identifier"> password</span> <span class="Constant">&quot;mypwd&quot;</span><span class="Identifier"> salt</span> rs1<span class="Type"> to</span> decd1<span class="Identifier"> cipher</span> <span class="Constant">&quot;camellia-256-cfb1&quot;</span><span class="Identifier"> digest</span> <span class="Constant">&quot;sha3-256&quot;</span></pre>
<span id=golf_copied_371 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_371' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_371, code_371, golf_copied_371)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<!--BEFSAL13--><div class="vsub"><a id="See also"></a>See also</div>
 <a name='Encryption'></a><span style="font-weight:bold;">Encryption</span><br/>
<a href='/decrypt-data.html'>decrypt-data</a> &nbsp;<br/>
<a href='/derive-key.html'>derive-key</a> &nbsp;<br/>
<a href='/encrypt-data.html'>encrypt-data</a> &nbsp;<br/>
<a href='/hash-string.html'>hash-string</a> &nbsp;<br/>
<a href='/hmac-string.html'>hmac-string</a> &nbsp;<br/>
<a href='/random-crypto.html'>random-crypto</a> &nbsp;<br/>
<a href='/random-string.html'>random-string</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='/documentation.html'>documentation</a><br/>
<a id='error-code.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:right;background-color:white;'><a href='https://golf-lang.com' style='border-bottom:0px'><img src='https://golf-lang.com/golf.png'/></a></div><div class='vhub' style='margin-top:10px;'>&nbsp;Error code</div><hr/>Many Golf statements return status with GG_ERR_... error codes, which are generally descriptive to a point. Such status may not as detailed as the operating system "errno" variable, however you can use "errno" clause in <a href='/get-req.html'>get-req</a> statement to obtain the last known errno value from aforementioned statements. You should obtain this value as soon as possible after the statement because another statement may set it afterwards.<br/>
<br/>
In the following example, a directory is attempted to be deleted via <a href='/delete-file.html'>delete-file</a>, which will fail with GG_ERR_DELETE - however you can get a more specific code via "errno" (which in this case is "21", or "EISDIR", which means that it cannot delete a directory with this statement):<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_372'>
<span class="Statement"> delete-file</span> <span class="Constant">&quot;some_directory&quot;</span><span class="Type"> status</span> stc
<span class="Statement"> if-true</span> stc<span class="Identifier"> equal</span> GG_ERR_DELETE
<span class="Statement">     get-req</span><span class="Identifier"> errno</span><span class="Type"> to</span> e
<span class="Statement">     @</span>Cannot delete file
<span class="Statement">     pf-out</span> <span class="Constant">&quot;Error </span><span class="Special">%ld</span><span class="Special">\n</span><span class="Constant">&quot;</span>, e
<span class="Statement"> end-if</span></pre>
<span id=golf_copied_372 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_372' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_372, code_372, golf_copied_372)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Note that with some GG_ERR_... codes, the "errno" clause in get-req may return 0. This means the error was detected by Golf and not reported by the operating system.<br/>
<!--BEFSAL13--><div class="vsub"><a id="See also"></a>See also</div>
 <a name='Error handling'></a><span style="font-weight:bold;">Error handling</span><br/>
<a href='/db-error.html'>db-error</a> &nbsp;<br/>
<a href='/error-code.html'>error-code</a> &nbsp;<br/>
<a href='/error-handling.html'>error-handling</a> &nbsp;<br/>
<a href='/report-error.html'>report-error</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='/documentation.html'>documentation</a><br/>
<a id='error-handling.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:right;background-color:white;'><a href='https://golf-lang.com' style='border-bottom:0px'><img src='https://golf-lang.com/golf.png'/></a></div><div class='vhub' style='margin-top:10px;'>&nbsp;Error handling</div><hr/><div class="vsub"><a id="When your program errors out"></a>When your program errors out</div>
"Erroring out" means a process handling a request has encountered a difficulty that cannot be handled and it will either:<br/>
<ul><li>Skip the rest of the request, and move on quickly to handle the next request without exiting. Most errors are like this, for example your program has attempted to access memory outside of what's allocated, or you have called <a href='/report-error.html'>report-error</a> statement.<br/>
</li><li>Stop and exit, and it may be automatically restarted if it's a <a href='/service.html'>service</a>. For instance, the process could be out of memory, or the database is permanently down and connection cannot be re-established.</li></ul>. <br/>
Note that if your program is <a href='/command-line.html'>command-line</a>, it will exit in any case since it handles a single request anyway.</li></ul>
<div class="vsub"><a id="When there is a problem in Golf"></a>When there is a problem in Golf</div>
If there is a fatal internal error (i.e. error in Golf code itself that cannot be handled), it will be caught by Golf, and the process will end. If your process is started with <a href='/mgrg.html'>mgrg</a>, it may be automatically restarted.<br/>
<div class="vsub"><a id="Logging the error"></a>Logging the error</div>
Regardless of the type of error and regardless of whether the process exits or not, the error is logged and the program stack with full source code lines (see <a href='/gg.html'>gg</a> for including debug information) will be written to backtrace file (use -e option of <a href='/gg.html'>gg</a> to obtain its location). Note that the program stack is logged only if Golf is built in debugging mode (see "DI=1" option when building Golf); otherwise, production code may be slowed down by stack dumping.<br/>
<br/>
You can see the list of last N errors (and the location of file containing backtrace for them) by using <a href='/gg.html'>gg</a>, for instance to see the last 3 errors:<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_373'>
gg <span class="Special">-e</span> <span class="Constant">3</span></pre>
<span id=golf_copied_373 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_373' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_373, code_373, golf_copied_373)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<!--BEFSAL13--><div class="vsub"><a id="See also"></a>See also</div>
 <a name='Error handling'></a><span style="font-weight:bold;">Error handling</span><br/>
<a href='/db-error.html'>db-error</a> &nbsp;<br/>
<a href='/error-code.html'>error-code</a> &nbsp;<br/>
<a href='/error-handling.html'>error-handling</a> &nbsp;<br/>
<a href='/report-error.html'>report-error</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='/documentation.html'>documentation</a><br/>
<a id='exec-program.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:right;background-color:white;'><a href='https://golf-lang.com' style='border-bottom:0px'><img src='https://golf-lang.com/golf.png'/></a></div><div class='vhub' style='margin-top:10px;'>&nbsp;Exec program</div><hr/><span style="font-weight:bold;">Purpose</span>: Execute a program.<br/>
<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_374'>
<span class="Statement"> exec-program</span> &lt;program path&gt; \
     [<span class="Identifier"> args</span> &lt;program arg&gt; [ , ... ] ] \
     [<span class="Type"> status</span> &lt;exit status&gt; ] \
     [ (<span class="Identifier"> input</span> &lt;input string&gt; [<span class="Identifier"> input-length</span> &lt;string length&gt; ] ) \
         | (<span class="Identifier"> input-file</span> &lt;input file&gt; ) ] \
     [ (<span class="Type"> output</span> &lt;output string&gt;  ) \
         | (<span class="Identifier"> output-file</span> &lt;output file&gt; ) ] \
     [ (<span class="Type"> error</span> &lt;error string&gt; ) | (<span class="Identifier"> error-file</span> &lt;error file&gt; ) ]</pre>
<span id=golf_copied_374 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_374' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_374, code_374, golf_copied_374)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
exec-program executes a program specified in &lt;program path&gt;, which can be a program name without path that exists in the path specified by the PATH environment variable; or an absolute path; or a path relative to the application home directory (see <a href='/directories.html'>directories</a>).<br/>
<br/>
A program can have input arguments (specified as strings with "args" clause), and if there are more than one, they must be separated by a comma. There is no limit on the number of input arguments, other than of the underlying Operating System. <br/>
<br/>
You can specify a status variable &lt;exit status&gt; - this variable will have program's exit status. Note that if the program was terminated by a signal, &lt;exit status&gt; will have a value of 128+signal_number, so for example if the program was terminated with signal 9 (i.e. KILL signal), &lt;exit status&gt; will be 137 (i.e. 128+9). Any other kind of abnormal program termination (i.e. program termination where program did not set the exit code) will return 126 as &lt;exit code&gt;.<br/>
<br/>
Specifying program input and output is optional. If program has output and you are not capturing it in any way, the output is redirected to a temporary file that is deleted after exec-program completes.<br/>
<br/>
You can specify an &lt;input string&gt; to be passed to program's standard input (stdin) via "input" clause. If "input-length" is not used, the length of this input is the string length of &lt;input string&gt;, otherwise &lt;string length&gt; bytes is passed to the program. Alternatively, you can specify a file &lt;input file&gt; (via "input-file" clause) to be opened and directed into program's standard input (stdin). <br/>
<br/>
You can redirect the program's output (which is "stdout") to a file &lt;output file&gt; using "output-file" clause. Alternatively, program's output can be captured in &lt;output string&gt; (via "output" clause).<br/>
<br/>
To get the program's error output (which is "stderr") to file &lt;error file&gt;, use "error-file" clause. Alternatively, program's error output can be captured in &lt;error string&gt; (via "error" clause).<br/>
<br/>
If &lt;input file&gt; cannot be opened, GG_ERR_READ is reported in &lt;exit status&gt;, and if either &lt;output file&gt; or &lt;error file&gt; cannot be opened, the status is GG_ERR_WRITE.<br/>
<div class="vsub"><a id="Examples"></a>Examples</div>
To simply execute a program that is in the path, without any arguments, input or output:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_375'>
<span class="Statement"> exec-program</span> <span class="Constant">&quot;myprogram&quot;</span></pre>
<span id=golf_copied_375 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_375' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_375, code_375, golf_copied_375)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Run "grep" program using a string as its standard input in order to remove a line that contains "bad line" in it, and outputting the result into "ovar" variable:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_376'>
<span class="Statement"> exec-program</span> <span class="Constant">&quot;grep&quot;</span><span class="Identifier"> args</span> <span class="Constant">&quot;-v&quot;</span>, <span class="Constant">&quot;bad line&quot;</span> <span class="Constant">&quot;config&quot;</span><span class="Identifier"> input</span> <span class="Constant">&quot;line 1</span><span class="Special">\n</span><span class="Constant">line 2</span><span class="Special">\n</span><span class="Constant">bad line</span><span class="Special">\n</span><span class="Constant">line 3&quot;</span><span class="Type"> output</span> ovar
<span class="Statement"> p-out</span> ovar</pre>
<span id=golf_copied_376 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_376' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_376, code_376, golf_copied_376)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Get the list of files in the application home directory into buffer "ovar" and then display it:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_377'>
<span class="Statement"> exec-program</span> <span class="Constant">&quot;ls&quot;</span><span class="Type"> output</span> ovar</pre>
<span id=golf_copied_377 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_377' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_377, code_377, golf_copied_377)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Similar to the above example of listing files, but output results to a file (which is then read and the result displayed), and provide options "-a -l -s" to "ls" program:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_378'>
<span class="Statement"> exec-program</span> <span class="Constant">&quot;ls&quot;</span><span class="Identifier"> args</span> <span class="Constant">&quot;-a&quot;</span>, <span class="Constant">&quot;-l&quot;</span>, <span class="Constant">&quot;-s&quot;</span><span class="Identifier"> output-file</span> <span class="Constant">&quot;lsout&quot;</span>
<span class="Statement"> read-file</span> <span class="Constant">&quot;lsout&quot;</span><span class="Type"> to</span> final_res
<span class="Statement"> p-out</span> final_res</pre>
<span id=golf_copied_378 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_378' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_378, code_378, golf_copied_378)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Count the lines of file "config" (which is redirected to the standard output of "wc" program) and store the result in variable "ovar" (by means of redirecting the output of "wc" program to it), and then display: <br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_379'>
<span class="Statement"> exec-program</span> <span class="Constant">&quot;wc&quot;</span><span class="Identifier"> args</span> <span class="Constant">&quot;-l&quot;</span><span class="Identifier"> input-file</span> <span class="Constant">&quot;config&quot;</span><span class="Type"> output</span> ovar
<span class="Statement"> p-out</span> ovar</pre>
<span id=golf_copied_379 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_379' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_379, code_379, golf_copied_379)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<!--BEFSAL13--><div class="vsub"><a id="See also"></a>See also</div>
 <a name='Program execution'></a><span style="font-weight:bold;">Program execution</span><br/>
<a href='/exec-program.html'>exec-program</a> &nbsp;<br/>
<a href='/handler-status.html'>handler-status</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='/documentation.html'>documentation</a><br/>
<a id='exit-handler.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:right;background-color:white;'><a href='https://golf-lang.com' style='border-bottom:0px'><img src='https://golf-lang.com/golf.png'/></a></div><div class='vhub' style='margin-top:10px;'>&nbsp;Exit handler</div><hr/><span style="font-weight:bold;">Purpose</span>: Exit current request processing.<br/>
<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_380'>
<span class="Statement"> exit-handler</span> [ &lt;request status&gt; ]</pre>
<span id=golf_copied_380 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_380' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_380, code_380, golf_copied_380)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Exits current request by transferring control directly after the top-level <a href='/request.html'>request</a> dispatcher. If there is an <a href='/after-handler.html'>after-handler</a>, it will still execute, unless exit-handler is called from <a href='/before-handler.html'>before-handler</a>.<br/>
<br/>
&lt;request status&gt; number is a request status returned to the caller (see <a href='/handler-status.html'>handler-status</a>); if not specified, then it's the value specified in the last executed handler-status statement; if none executed, then it's 0.<br/>
<div class="vsub"><a id="Examples"></a>Examples</div>
Returning status of 20:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_381'>
<span class="Statement"> begin-handler</span> /req-handler<span class="Identifier"> public</span>
<span class="Statement">     .</span>..
<span class="Statement">     handler-status</span> <span class="Constant">20</span>
<span class="Statement">     .</span>..
<span class="Statement">     exit-handler</span>
<span class="Statement">     .</span>..
<span class="Statement"> end-handler</span></pre>
<span id=golf_copied_381 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_381' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_381, code_381, golf_copied_381)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Returning status of 0:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_382'>
<span class="Statement"> begin-handler</span> /req-handler<span class="Identifier"> public</span>
<span class="Statement">     .</span>..
<span class="Statement">     exit-handler</span>
<span class="Statement">     .</span>..
<span class="Statement"> end-handler</span></pre>
<span id=golf_copied_382 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_382' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_382, code_382, golf_copied_382)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Returning status of 10:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_383'>
<span class="Statement"> begin-handler</span> /req-handler<span class="Identifier"> public</span>
<span class="Statement">     .</span>..
<span class="Statement">     exit-handler</span> <span class="Constant">10</span>
<span class="Statement">     .</span>..
<span class="Statement"> end-handler</span></pre>
<span id=golf_copied_383 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_383' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_383, code_383, golf_copied_383)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<!--BEFSAL13--><div class="vsub"><a id="See also"></a>See also</div>
 <a name='Program flow'></a><span style="font-weight:bold;">Program flow</span><br/>
<a href='/break-loop.html'>break-loop</a> &nbsp;<br/>
<a href='/code-blocks.html'>code-blocks</a> &nbsp;<br/>
<a href='/continue-loop.html'>continue-loop</a> &nbsp;<br/>
<a href='/do-once.html'>do-once</a> &nbsp;<br/>
<a href='/exit-handler.html'>exit-handler</a> &nbsp;<br/>
<a href='/if-defined.html'>if-defined</a> &nbsp;<br/>
<a href='/if-true.html'>if-true</a> &nbsp;<br/>
<a href='/return-handler.html'>return-handler</a> &nbsp;<br/>
<a href='/set-bool.html'>set-bool</a> &nbsp;<br/>
<a href='/start-loop.html'>start-loop</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='/documentation.html'>documentation</a><br/>
<a id='extended-mode.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:right;background-color:white;'><a href='https://golf-lang.com' style='border-bottom:0px'><img src='https://golf-lang.com/golf.png'/></a></div><div class='vhub' style='margin-top:10px;'>&nbsp;Extended mode</div><hr/><span style="font-weight:bold;">Purpose</span>: Use external libraries or C code with Golf.<br/>
<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_384'>
<span class="Statement"> extended-mode</span></pre>
<span id=golf_copied_384 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_384' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_384, code_384, golf_copied_384)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
extended-mode, when specified as a very first statement in .golf source file, allows for use of <a href='/call-extended.html'>call-extended</a> statement.<br/>
<div class="vsub"><a id="Examples"></a>Examples</div>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_385'>
<span class="Statement"> extended-mode</span>

<span class="Statement"> begin-handler</span> /my-handler<span class="Identifier"> public</span>
<span class="Statement">     .</span>..
<span class="Statement">     call-extended</span> factorial (<span class="Constant">10</span>, &amp;fact)
<span class="Statement">     .</span>..
<span class="Statement"> end-handler</span></pre>
<span id=golf_copied_385 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_385' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_385, code_385, golf_copied_385)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<!--BEFSAL13--><div class="vsub"><a id="See also"></a>See also</div>
 <a name='Safety'></a><span style="font-weight:bold;">Safety</span><br/>
<a href='/call-extended.html'>call-extended</a> &nbsp;<br/>
<a href='/extended-mode.html'>extended-mode</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='/documentation.html'>documentation</a><br/>
<a id='file-position.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:right;background-color:white;'><a href='https://golf-lang.com' style='border-bottom:0px'><img src='https://golf-lang.com/golf.png'/></a></div><div class='vhub' style='margin-top:10px;'>&nbsp;File position</div><hr/><span style="font-weight:bold;">Purpose</span>: Set a position or get a current position for an open file.<br/>
<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_386'>
<span class="Statement"> file-position</span><span class="Identifier"> file-id</span> &lt;file id&gt; \
     (<span class="Identifier"> set</span> &lt;position&gt; ) | (<span class="Type"> get</span> &lt;position&gt; ) \
     [<span class="Type"> status</span> &lt;status&gt; ]</pre>
<span id=golf_copied_386 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_386' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_386, code_386, golf_copied_386)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
file-position will set or get position for a file opened with <a href='/open-file.html'>open-file</a>, where &lt;file id&gt; is an open file identifier.<br/>
<br/>
If "set" clause is used, file position is set to &lt;position&gt; (with 0 being the first byte). <br/>
<br/>
If "get" clause is used, file position is obtained in &lt;position&gt; (with 0 being the first byte).<br/>
<br/>
&lt;status&gt; number in "status" clause will be GG_OKAY if set/get succeeded, GG_ERR_OPEN if file not open, or GG_ERR_POSITION if not.<br/>
<br/>
Note that setting position past the last byte of file is okay for writing - in this case the bytes between the end of file and the &lt;position&gt; are filled with null-bytes when the write operation occurs.<br/>
<div class="vsub"><a id="Examples"></a>Examples</div>
Open file "testwrite" and set file byte position to 100, then obtain it later:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_387'>
<span class="Statement"> open-file</span> <span class="Constant">&quot;testwrite&quot;</span><span class="Type"> file-id</span> nf
<span class="Statement"> file-position</span><span class="Identifier"> file-id</span> nf<span class="Identifier"> set</span> <span class="Constant">100</span>
<span class="Statement"> .</span>..
<span class="Statement"> file-position</span><span class="Identifier"> file-id</span> nf<span class="Type"> get</span> pos</pre>
<span id=golf_copied_387 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_387' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_387, code_387, golf_copied_387)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
See also <a href='/open-file.html'>open-file</a>.<br/>
<!--BEFSAL13--><div class="vsub"><a id="See also"></a>See also</div>
 <a name='Files'></a><span style="font-weight:bold;">Files</span><br/>
<a href='/close-file.html'>close-file</a> &nbsp;<br/>
<a href='/copy-file.html'>copy-file</a> &nbsp;<br/>
<a href='/delete-file.html'>delete-file</a> &nbsp;<br/>
<a href='/file-position.html'>file-position</a> &nbsp;<br/>
<a href='/file-storage.html'>file-storage</a> &nbsp;<br/>
<a href='/file-uploading.html'>file-uploading</a> &nbsp;<br/>
<a href='/lock-file.html'>lock-file</a> &nbsp;<br/>
<a href='/open-file.html'>open-file</a> &nbsp;<br/>
<a href='/read-file.html'>read-file</a> &nbsp;<br/>
<a href='/read-line.html'>read-line</a> &nbsp;<br/>
<a href='/rename-file.html'>rename-file</a> &nbsp;<br/>
<a href='/stat-file.html'>stat-file</a> &nbsp;<br/>
<a href='/temporary-file.html'>temporary-file</a> &nbsp;<br/>
<a href='/uniq-file.html'>uniq-file</a> &nbsp;<br/>
<a href='/unlock-file.html'>unlock-file</a> &nbsp;<br/>
<a href='/write-file.html'>write-file</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='/documentation.html'>documentation</a><br/>
<a id='file-storage.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:right;background-color:white;'><a href='https://golf-lang.com' style='border-bottom:0px'><img src='https://golf-lang.com/golf.png'/></a></div><div class='vhub' style='margin-top:10px;'>&nbsp;File storage</div><hr/>Golf provides a file directory that you can use for any general purpose, including for storing <a href='/temporary-file.html'>temporary-file</a>s. This directory is also used for automatic upload of files from clients. It provides a two-tier directory system, with sub-directories automatically created to spread the files for faster access.<br/>
<br/>
Files in Golf file directory are located in the sub-directories of:<br/>
<div class='ncode' style='position:relative;padding-right:16px;'>
<pre id='code_388'>
/var/lib/gg/&lt;app_name&gt;/app/file</pre>
<span id=golf_copied_388 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_388' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_388, code_388, golf_copied_388)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
If you wish to place this directory in another physical location, see <a href='/gg.html'>gg</a>.<br/>
<br/>
You can create files here by means of <a href='/uniq-file.html'>uniq-file</a>, where a new unique file is created - with the file name made available to you. This directory is also used for uploading of files from clients (such as web browsers or mobile device cameras) - the uploading is handled automatically by Golf (see <a href='/get-param.html'>get-param</a>).<br/>
<br/>
In general, a number of sub-directories is created within the file directory that contain files, which allows for billions of files to be kept. This scheme also allows for faster access to file nodes due to relatively low number of sub-directories and files randomly spread per each such sub-directory. The random spreading of files across subdirectories is done automatically.<br/>
<br/>
Do not rename file names or sub-directory names stored under file directory.<br/>
<!--BEFSAL13--><div class="vsub"><a id="See also"></a>See also</div>
 <a name='Files'></a><span style="font-weight:bold;">Files</span><br/>
<a href='/close-file.html'>close-file</a> &nbsp;<br/>
<a href='/copy-file.html'>copy-file</a> &nbsp;<br/>
<a href='/delete-file.html'>delete-file</a> &nbsp;<br/>
<a href='/file-position.html'>file-position</a> &nbsp;<br/>
<a href='/file-storage.html'>file-storage</a> &nbsp;<br/>
<a href='/file-uploading.html'>file-uploading</a> &nbsp;<br/>
<a href='/lock-file.html'>lock-file</a> &nbsp;<br/>
<a href='/open-file.html'>open-file</a> &nbsp;<br/>
<a href='/read-file.html'>read-file</a> &nbsp;<br/>
<a href='/read-line.html'>read-line</a> &nbsp;<br/>
<a href='/rename-file.html'>rename-file</a> &nbsp;<br/>
<a href='/stat-file.html'>stat-file</a> &nbsp;<br/>
<a href='/temporary-file.html'>temporary-file</a> &nbsp;<br/>
<a href='/uniq-file.html'>uniq-file</a> &nbsp;<br/>
<a href='/unlock-file.html'>unlock-file</a> &nbsp;<br/>
<a href='/write-file.html'>write-file</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='/documentation.html'>documentation</a><br/>
<a id='file-uploading.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:right;background-color:white;'><a href='https://golf-lang.com' style='border-bottom:0px'><img src='https://golf-lang.com/golf.png'/></a></div><div class='vhub' style='margin-top:10px;'>&nbsp;File uploading</div><hr/><span style="font-weight:bold;">Purpose</span>: Upload a file to server.<br/>
<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_389'>
<span class="Statement"> get-param</span> &lt;name&gt;</pre>
<span id=golf_copied_389 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_389' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_389, code_389, golf_copied_389)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Files uploaded via client (such as a browser, curl etc.) are obtained via <a href='/get-param.html'>get-param</a>. <br/>
<br/>
Golf uploads files via HTML automatically, meaning you do not have to write any code for that specific purpose. An uploaded file will be stored in <a href='/file-storage.html'>file-storage</a>, with path and name of such a file generated by Golf to be unique. For example, a file uploaded might be named "/var/lib/gg/app_name/app//file/d0/f31881". When file is uploaded, the following input parameters can be obtained, in this case assuming "name" attribute of HTML "input" element is "myfile":<br/>
<br/>
<ul> <li>"myfile_filename" is the name of the file as provided by the client.<br/>
</li> <li>"myfile_location" is the full path on the server where file is stored (such as "/var/lib/gg/app_name/app//file/d0/f31881" for example)<br/>
</li> <li>"myfile_ext" is the extension of the file, for example ".jpg" or ".pdf". Note that ".jpeg" is always showing as ".jpg". The extension is always lower case.<br/>
</li> <li>"myfile_size" is the size of the file uploaded, as a string. See <a href='/gg.html'>gg</a> for setting the maximum file upload size.</li></ul>
For example, for an HTML form which is uploading a file named "myfile", such as <br/>
<div class='htmlcode' style='position:relative;padding-right:16px;'>
<pre id='code_390'>
<span class="Identifier">&lt;</span><span class="Statement">input</span><span class="Identifier"> </span><span class="Type">type</span><span class="Identifier">=</span><span class="Constant">'file'</span><span class="Identifier"> </span><span class="Type">name</span><span class="Identifier">=</span><span class="Constant">'myfile'</span><span class="Identifier">&gt;</span></pre>
<span id=golf_copied_390 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_390' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_390, code_390, golf_copied_390)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
your code that handles this might be:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_391'>
<span class="Statement"> get-param</span> myfile_filename
<span class="Statement"> get-param</span> myfile_location
<span class="Statement"> get-param</span> myfile_ext
<span class="Statement"> get-param</span> myfile_size

 You have uploaded file &lt;&lt;p-web myfile_filename&gt;&gt; to a server file at &lt;&lt;p-web myfile_location&gt;&gt;</pre>
<span id=golf_copied_391 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_391' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_391, code_391, golf_copied_391)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<!--BEFSAL13--><div class="vsub"><a id="See also"></a>See also</div>
 <a name='Files'></a><span style="font-weight:bold;">Files</span><br/>
<a href='/close-file.html'>close-file</a> &nbsp;<br/>
<a href='/copy-file.html'>copy-file</a> &nbsp;<br/>
<a href='/delete-file.html'>delete-file</a> &nbsp;<br/>
<a href='/file-position.html'>file-position</a> &nbsp;<br/>
<a href='/file-storage.html'>file-storage</a> &nbsp;<br/>
<a href='/file-uploading.html'>file-uploading</a> &nbsp;<br/>
<a href='/lock-file.html'>lock-file</a> &nbsp;<br/>
<a href='/open-file.html'>open-file</a> &nbsp;<br/>
<a href='/read-file.html'>read-file</a> &nbsp;<br/>
<a href='/read-line.html'>read-line</a> &nbsp;<br/>
<a href='/rename-file.html'>rename-file</a> &nbsp;<br/>
<a href='/stat-file.html'>stat-file</a> &nbsp;<br/>
<a href='/temporary-file.html'>temporary-file</a> &nbsp;<br/>
<a href='/uniq-file.html'>uniq-file</a> &nbsp;<br/>
<a href='/unlock-file.html'>unlock-file</a> &nbsp;<br/>
<a href='/write-file.html'>write-file</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='/documentation.html'>documentation</a><br/>
<a id='finish-output.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:right;background-color:white;'><a href='https://golf-lang.com' style='border-bottom:0px'><img src='https://golf-lang.com/golf.png'/></a></div><div class='vhub' style='margin-top:10px;'>&nbsp;Finish output</div><hr/><span style="font-weight:bold;">Purpose</span>: Finish the output.<br/>
<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_392'>
<span class="Statement"> finish-output</span></pre>
<span id=golf_copied_392 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_392' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_392, code_392, golf_copied_392)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
finish-output will flush out and conclude all output (see <a href='/output-statement.html'>output-statement</a>). Any such output afterwards will silently fail to do so. As far as the client is concerned, all the output is complete.<br/>
<br/>
This statement is useful when you need to continue work after the output is complete. For example, if the task performed is a long-running one, you can inform the client that the job has started, and then take any amount of time to actually complete the job, without worrying about client timeouts. The client can inquire about the job status via a different request, or be informed via email etc.<br/>
<div class="vsub"><a id="Examples"></a>Examples</div>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_393'>
<span class="Statement"> finish-output</span></pre>
<span id=golf_copied_393 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_393' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_393, code_393, golf_copied_393)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<!--BEFSAL13--><div class="vsub"><a id="See also"></a>See also</div>
 <a name='Output'></a><span style="font-weight:bold;">Output</span><br/>
<a href='/finish-output.html'>finish-output</a> &nbsp;<br/>
<a href='/flush-output.html'>flush-output</a> &nbsp;<br/>
<a href='/output-statement.html'>output-statement</a> &nbsp;<br/>
<a href='/pf-out.html'>pf-out</a> &nbsp;<br/>
<a href='/pf-url.html'>pf-url</a> &nbsp;<br/>
<a href='/pf-web.html'>pf-web</a> &nbsp;<br/>
<a href='/p-num.html'>p-num</a> &nbsp;<br/>
<a href='/p-out.html'>p-out</a> &nbsp;<br/>
<a href='/p-path.html'>p-path</a> &nbsp;<br/>
<a href='/p-source-file.html'>p-source-file</a> &nbsp;<br/>
<a href='/p-source-line.html'>p-source-line</a> &nbsp;<br/>
<a href='/p-url.html'>p-url</a> &nbsp;<br/>
<a href='/p-web.html'>p-web</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='/documentation.html'>documentation</a><br/>
<a id='flush-output.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:right;background-color:white;'><a href='https://golf-lang.com' style='border-bottom:0px'><img src='https://golf-lang.com/golf.png'/></a></div><div class='vhub' style='margin-top:10px;'>&nbsp;Flush output</div><hr/><span style="font-weight:bold;">Purpose</span>: Flush output.<br/>
<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_394'>
<span class="Statement"> flush-output</span></pre>
<span id=golf_copied_394 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_394' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_394, code_394, golf_copied_394)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Use flush-output statement to flush any pending output.<br/>
<br/>
This can be useful if the complete output would take longer to produce and intermittent partial output would be needed.<br/>
<div class="vsub"><a id="Examples"></a>Examples</div>
In this case the complete output may take at least 20 seconds. With flush-output, the message "This is partial output" will be flushed out immediately.<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_395'>
<span class="Statement"> @</span>This is partial output
<span class="Statement"> flush-output</span>
 sleep(<span class="Constant">20</span>);
<span class="Statement"> @</span>This is final output</pre>
<span id=golf_copied_395 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_395' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_395, code_395, golf_copied_395)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<!--BEFSAL13--><div class="vsub"><a id="See also"></a>See also</div>
 <a name='Output'></a><span style="font-weight:bold;">Output</span><br/>
<a href='/finish-output.html'>finish-output</a> &nbsp;<br/>
<a href='/flush-output.html'>flush-output</a> &nbsp;<br/>
<a href='/output-statement.html'>output-statement</a> &nbsp;<br/>
<a href='/pf-out.html'>pf-out</a> &nbsp;<br/>
<a href='/pf-url.html'>pf-url</a> &nbsp;<br/>
<a href='/pf-web.html'>pf-web</a> &nbsp;<br/>
<a href='/p-num.html'>p-num</a> &nbsp;<br/>
<a href='/p-out.html'>p-out</a> &nbsp;<br/>
<a href='/p-path.html'>p-path</a> &nbsp;<br/>
<a href='/p-source-file.html'>p-source-file</a> &nbsp;<br/>
<a href='/p-source-line.html'>p-source-line</a> &nbsp;<br/>
<a href='/p-url.html'>p-url</a> &nbsp;<br/>
<a href='/p-web.html'>p-web</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='/documentation.html'>documentation</a><br/>
<a id='get-app.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:right;background-color:white;'><a href='https://golf-lang.com' style='border-bottom:0px'><img src='https://golf-lang.com/golf.png'/></a></div><div class='vhub' style='margin-top:10px;'>&nbsp;Get app</div><hr/><span style="font-weight:bold;">Purpose</span>: Obtain data that describes the application.<br/>
<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_396'>
<span class="Statement"> get-app</span> \
    <span class="Identifier"> name</span> |<span class="Identifier"> directory</span> |<span class="Identifier"> trace-directory</span> |<span class="Identifier"> file-directory</span> \
         |<span class="Identifier"> db-vendor</span> &lt;database configuration&gt; |<span class="Identifier"> upload-size</span> \
         |<span class="Identifier"> path</span> |<span class="Identifier"> is-service</span> \
    <span class="Type"> to</span> &lt;variable&gt;</pre>
<span id=golf_copied_396 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_396' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_396, code_396, golf_copied_396)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Application-related variables can be obtained with get-app statement. The following application variables can be obtained (they are all strings unless indicated otherwise):<br/>
<ul><li>"name" returns the name of your application, as specified when created (see <a href='/mgrg.html'>mgrg</a>). <br/>
</li><li>"directory" is the directory where your application resides, i.e. the application home directory (see <a href='/directories.html'>directories</a>).<br/>
</li><li>"trace-directory" is the directory where your application trace files are written, if enabled (see <a href='/directories.html'>directories</a>).<br/>
</li><li>"is-service" is a boolean variable that is true if your code is running as a <a href='/service.html'>service</a>, or false if it is running as a <a href='/command-line.html'>command-line</a> program.<br/>
</li><li>"file-directory" is the directory where Golf file storage system is, i.e. <a href='/file-storage.html'>file-storage</a>.<br/>
</li><li>"db-vendor" is the database vendor name of database given by &lt;database configuration&gt; (as used for example in <a href='/run-query.html'>run-query</a>). You can use it to create database specific conditions. The database vendor name can be compared against predefined string constants GG_MARIADB (for MariaDB database), GG_POSTGRES (for Postgres database) and GG_SQLITE (for SQLite database).<br/>
</li><li>"path" is the leading path of the URL request that can be used to build web forms and links leading back to your application. It returns the same value as <a href='/p-path.html'>p-path</a>.<br/>
</li><li>"upload-size" is the maximum allowed size of an uploaded file - this is a number (see <a href='/gg.html'>gg</a> for setting this value).</li></ul>
<div class="vsub"><a id="Examples"></a>Examples</div>
Get the name of Golf application:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_397'>
<span class="Statement"> get-app</span><span class="Identifier"> name</span><span class="Type"> to</span> appname</pre>
<span id=golf_copied_397 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_397' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_397, code_397, golf_copied_397)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Get the vendor of database db:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_398'>
<span class="Statement"> get-app</span><span class="Identifier"> db-vendor</span> db<span class="Type"> to</span> dbv
<span class="Statement"> if-true</span> dbv<span class="Identifier"> equal</span> GG_POSTGRES
     <span class="Comment">// do something Postgres specific</span>
<span class="Statement"> end-if</span></pre>
<span id=golf_copied_398 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_398' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_398, code_398, golf_copied_398)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<!--BEFSAL13--><div class="vsub"><a id="See also"></a>See also</div>
 <a name='Application information'></a><span style="font-weight:bold;">Application information</span><br/>
<a href='/get-app.html'>get-app</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='/documentation.html'>documentation</a><br/>
<a id='get-cookie.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:right;background-color:white;'><a href='https://golf-lang.com' style='border-bottom:0px'><img src='https://golf-lang.com/golf.png'/></a></div><div class='vhub' style='margin-top:10px;'>&nbsp;Get cookie</div><hr/><span style="font-weight:bold;">Purpose</span>: Get cookie value.<br/>
<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_399'>
<span class="Statement"> get-cookie</span> ( &lt;cookie value&gt; = &lt;cookie name&gt; ) ,...</pre>
<span id=golf_copied_399 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_399' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_399, code_399, golf_copied_399)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
get-cookie obtains string &lt;cookie value&gt; of a cookie with the name given by string &lt;cookie name&gt;. A cookie would be obtained via incoming request from the client (such as web browser) or it would be set using <a href='/set-cookie.html'>set-cookie</a>.<br/>
<br/>
The value of cookie is stored in &lt;cookie value&gt;. &nbsp;<br/>
<br/>
Cookies are often used to persist user data on the client, such as for maintaining session security or for convenience of identifying the user etc.<br/>
<br/>
You can obtain multiple cookies separated by a comma:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_400'>
<span class="Statement"> get-cookie</span> c = <span class="Constant">&quot;mycookie&quot;</span>, c1 = <span class="Constant">&quot;mycookie1&quot;</span>, c2=<span class="Constant">&quot;mycookie2&quot;</span></pre>
<span id=golf_copied_400 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_400' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_400, code_400, golf_copied_400)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<div class="vsub"><a id="Examples"></a>Examples</div>
Get value of cookie named "my_cookie_name" - variable my_cookie_value will hold its value:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_401'>
<span class="Statement"> get-cookie</span> my_cookie_value=<span class="Constant">&quot;my_cookie_name&quot;</span></pre>
<span id=golf_copied_401 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_401' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_401, code_401, golf_copied_401)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<!--BEFSAL13--><div class="vsub"><a id="See also"></a>See also</div>
 <a name='Cookies'></a><span style="font-weight:bold;">Cookies</span><br/>
<a href='/delete-cookie.html'>delete-cookie</a> &nbsp;<br/>
<a href='/get-cookie.html'>get-cookie</a> &nbsp;<br/>
<a href='/set-cookie.html'>set-cookie</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='/documentation.html'>documentation</a><br/>
<a id='get-hash.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:right;background-color:white;'><a href='https://golf-lang.com' style='border-bottom:0px'><img src='https://golf-lang.com/golf.png'/></a></div><div class='vhub' style='margin-top:10px;'>&nbsp;Get hash</div><hr/><span style="font-weight:bold;">Purpose</span>: Get usage specifics for a hash.<br/>
<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_402'>
<span class="Statement"> get-hash</span>  &lt;hash &gt; \
     (<span class="Type"> length</span> &lt;length&gt; ) \
     | (<span class="Type"> hash-size</span> &lt;hash size&gt; ) \
     | (<span class="Type"> average-reads</span> &lt;reads&gt; )</pre>
<span id=golf_copied_402 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_402' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_402, code_402, golf_copied_402)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
get-hash provides usage specifics of a &lt;hash&gt; (created by <a href='/new-hash.html'>new-hash</a>). <br/>
<br/>
Use "length" clause to obtain its &lt;length&gt; (i.e. the number of elements stored in it), "hash-size" clause to obtain its &lt;hash size&gt; (i.e. the number of "buckets", or possible hash codes in the underlying hash table). <br/>
<br/>
"average-reads" clause will obtain in &lt;reads&gt; the average number of reads (i.e. how many string comparisons are needed on average to find a key) multiplied by 100 (so if an average number of reads was 1.5, it will be 150).<br/>
<br/>
This information may be useful in determining the performance of a hash, and whether <a href='/resize-hash.html'>resize-hash</a> is indicated.<br/>
<div class="vsub"><a id="Examples"></a>Examples</div>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_403'>
<span class="Statement"> get-hash</span> h<span class="Type"> length</span> l<span class="Type"> hash-size</span> s<span class="Type"> average-reads</span> r</pre>
<span id=golf_copied_403 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_403' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_403, code_403, golf_copied_403)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<!--BEFSAL13--><div class="vsub"><a id="See also"></a>See also</div>
 <a name='Hash'></a><span style="font-weight:bold;">Hash</span><br/>
<a href='/get-hash.html'>get-hash</a> &nbsp;<br/>
<a href='/new-hash.html'>new-hash</a> &nbsp;<br/>
<a href='/purge-hash.html'>purge-hash</a> &nbsp;<br/>
<a href='/read-hash.html'>read-hash</a> &nbsp;<br/>
<a href='/resize-hash.html'>resize-hash</a> &nbsp;<br/>
<a href='/write-hash.html'>write-hash</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='/documentation.html'>documentation</a><br/>
<a id='get-list.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:right;background-color:white;'><a href='https://golf-lang.com' style='border-bottom:0px'><img src='https://golf-lang.com/golf.png'/></a></div><div class='vhub' style='margin-top:10px;'>&nbsp;Get list</div><hr/><span style="font-weight:bold;">Purpose</span>: Get information about linked list.<br/>
<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_404'>
<span class="Statement"> get-list</span> &lt;list&gt;<span class="Type"> count</span> &lt;count&gt;</pre>
<span id=golf_copied_404 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_404' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_404, code_404, golf_copied_404)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
get-list will obtain information about linked &lt;list&gt; created with <a href='/new-list.html'>new-list</a>. <br/>
<br/>
&lt;count&gt; (in "count" clause) is the number of elements in the list.<br/>
<div class="vsub"><a id="Examples"></a>Examples</div>
Get the number of elements in list "mylist" in number "size":<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_405'>
<span class="Statement"> get-list</span> mylist<span class="Type"> count</span> size</pre>
<span id=golf_copied_405 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_405' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_405, code_405, golf_copied_405)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<!--BEFSAL13--><div class="vsub"><a id="See also"></a>See also</div>
 <a name='Linked list'></a><span style="font-weight:bold;">Linked list</span><br/>
<a href='/delete-list.html'>delete-list</a> &nbsp;<br/>
<a href='/get-list.html'>get-list</a> &nbsp;<br/>
<a href='/new-list.html'>new-list</a> &nbsp;<br/>
<a href='/position-list.html'>position-list</a> &nbsp;<br/>
<a href='/purge-list.html'>purge-list</a> &nbsp;<br/>
<a href='/read-list.html'>read-list</a> &nbsp;<br/>
<a href='/write-list.html'>write-list</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='/documentation.html'>documentation</a><br/>
<a id='get-message.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:right;background-color:white;'><a href='https://golf-lang.com' style='border-bottom:0px'><img src='https://golf-lang.com/golf.png'/></a></div><div class='vhub' style='margin-top:10px;'>&nbsp;Get message</div><hr/><span style="font-weight:bold;">Purpose</span>: Get string produced by writing a message.<br/>
<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_406'>
<span class="Statement"> get-message</span> &lt;message&gt;<span class="Type"> to</span> &lt;string&gt;</pre>
<span id=golf_copied_406 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_406' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_406, code_406, golf_copied_406)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
get-message will create a &lt;string&gt; from &lt;message&gt; which must have been created with <a href='/new-message.html'>new-message</a>. &lt;string&gt; can then be used elsewhere, for instance sent with a remote call (see <a href='/run-remote.html'>run-remote</a>), written to a file etc.<br/>
<br/>
Once get-message is called, &lt;message&gt; is initialized as if it was just created with <a href='/new-message.html'>new-message</a> without the "from" clause.<br/>
<div class="vsub"><a id="Examples"></a>Examples</div>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_408'>
 <span class="Comment">// Create a message</span>
<span class="Statement"> new-message</span> msg
 <span class="Comment">// Write data</span>
<span class="Statement"> write-message</span> msg<span class="Identifier"> key</span> <span class="Constant">&quot;key1&quot;</span><span class="Identifier"> value</span> <span class="Constant">&quot;value1&quot;</span>
 <span class="Comment">// Get string from message</span>
<span class="Statement"> get-message</span> msg<span class="Type"> to</span> str
<span class="Statement"> .</span>..
 <span class="Comment">// Create a new message from string</span>
<span class="Statement"> new-message</span> new<span class="Identifier"> from</span> str
 <span class="Comment">// Read data</span>
<span class="Statement"> read-message</span> new<span class="Type"> key</span> k<span class="Type"> value</span> v
 <span class="Comment">// Display  data</span>
<span class="Statement"> pf-out</span> <span class="Constant">&quot;[</span><span class="Special">%s</span><span class="Constant">] [</span><span class="Special">%s</span><span class="Constant">]</span><span class="Special">\n</span><span class="Constant">&quot;</span>, k,v</pre>
<span id=golf_copied_408 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_408' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_408, code_408, golf_copied_408)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
The result is:<br/>
<div class='ncode' style='position:relative;padding-right:16px;'>
<pre id='code_407'>
[key1] [value1]</pre>
<span id=golf_copied_407 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_407' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_407, code_407, golf_copied_407)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<!--BEFSAL13--><div class="vsub"><a id="See also"></a>See also</div>
 <a name='Messages'></a><span style="font-weight:bold;">Messages</span><br/>
<a href='/get-message.html'>get-message</a> &nbsp;<br/>
<a href='/new-message.html'>new-message</a> &nbsp;<br/>
<a href='/read-message.html'>read-message</a> &nbsp;<br/>
<a href='/SEMI.html'>SEMI</a> &nbsp;<br/>
<a href='/write-message.html'>write-message</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='/documentation.html'>documentation</a><br/>
<a id='get-param.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:right;background-color:white;'><a href='https://golf-lang.com' style='border-bottom:0px'><img src='https://golf-lang.com/golf.png'/></a></div><div class='vhub' style='margin-top:10px;'>&nbsp;Get param</div><hr/><span style="font-weight:bold;">Purpose</span>: Get a parameter value.<br/>
<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_409'>
<span class="Statement"> get-param</span> ( &lt;name&gt; [<span class="Identifier"> type</span> &lt;type&gt; ] )<span class="Identifier"> ,</span> ...</pre>
<span id=golf_copied_409 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_409' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_409, code_409, golf_copied_409)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
get-param stores a parameter value in variable &lt;name&gt;. A parameter is a name/value pair kept by Golf for each request. The parameter's name must match &lt;name&gt;. A parameter can be of any type. A parameter is set either:<br/>
<ul><li>by the caller in <a href='/request.html'>request URL</a>, or<br/>
</li><li>with <a href='/set-param.html'>set-param</a> statement anywhere during request's execution, including in <a href='/call-handler.html'>call-handler</a>.</li></ul>
If parameter is a string, it is &nbsp;trimmed for whitespaces (both on left and right). You can specify any number of parameters, separated by a comma.<br/>
<div class="vsub"><a id="Types"></a>Types</div>
By default, &lt;name&gt; is a string variable, unless &lt;type&gt; (in "type" clause) is specified. &lt;type&gt; can be "string" for a string variable (the default), "bool" for a boolean variable, "number" for a number variable, "message" for a <a href='/new-message.html'>message</a> variable, "split-string" for a <a href='/split-string.html'>split-string</a> variable, "hash" for an <a href='/new-hash.html'>hash</a> variable, "tree" for an <a href='/new-tree.html'>tree</a> variable, "tree-cursor" for an <a href='/use-cursor.html'>tree cursor</a> variable, "fifo" for a <a href='/new-fifo.html'>FIFO</a> variable, "lifo" for a <a href='/new-lifo.html'>LIFO</a> variable, "list" for a <a href='/new-list.html'>list</a> variable, "file" for a <a href='/open-file.html'>file</a> variable, and "service" for a <a href='/new-remote.html'>service</a> variable.<br/>
<br/>
The value obtained with get-param is checked to be of the proper &lt;type&gt;, and if it isn't, your request will <a href='/error-handling.html'>error out</a>. The exception to this is that a string parameter can be converted into a number or a boolean, assuming the string value represents a valid number or is "true"/"false". &nbsp;Parameters of "number" and "bool" types are obtained by value, and others by reference. It means for instance, that you can pass a tree to call-handler and read and write nodes there, and such changes will be visible in the caller request.<br/>
<div class="vsub"><a id="Input parameters from a caller"></a>Input parameters from a caller</div>
Input parameters from an outside caller are specified as name/value pairs (see <a href='/service.html'>service</a> or <a href='/command-line.html'>command-line</a>). Input parameter name can be made up of alphanumeric characters, hyphen or underscore only and cannot start with a digit. Note that a hyphen is automatically converted to underscore, so for instance an input parameter "some-parameter" in HTTP request will be "some_parameter" in get-param. <br/>
<span style="font-weight:bold;">- File uploads</span><br/>
File uploads are handled as input parameters as well, see <a href='/file-uploading.html'>file-uploading</a>.<br/>
<span style="font-weight:bold;">- Web input parameters</span><br/>
As an example, for HTML form input parameters named "param1" with value "value1" and "param2" with value "value2":<br/>
<div class='htmlcode' style='position:relative;padding-right:16px;'>
<pre id='code_410'>
<span class="Identifier">&lt;</span><span class="Statement">input</span><span class="Identifier"> </span><span class="Type">type</span><span class="Identifier">=</span><span class="Constant">'hidden'</span><span class="Identifier"> </span><span class="Type">name</span><span class="Identifier">=</span><span class="Constant">'param1'</span><span class="Identifier"> </span><span class="Type">value</span><span class="Identifier">=</span><span class="Constant">'value1'</span><span class="Identifier">&gt;</span>
<span class="Identifier">&lt;</span><span class="Statement">input</span><span class="Identifier"> </span><span class="Type">type</span><span class="Identifier">=</span><span class="Constant">'hidden'</span><span class="Identifier"> </span><span class="Type">name</span><span class="Identifier">=</span><span class="Constant">'param2'</span><span class="Identifier"> </span><span class="Type">value</span><span class="Identifier">=</span><span class="Constant">'value2'</span><span class="Identifier">&gt;</span></pre>
<span id=golf_copied_410 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_410' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_410, code_410, golf_copied_410)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
you can get these parameters and print out their values by using:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_412'>
<span class="Statement"> get-param</span> param1, param2</pre>
<span id=golf_copied_412 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_412' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_412, code_412, golf_copied_412)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
A request may be in the form of a web link URL, and getting the parameter values is the same:<br/>
<div class='ncode' style='position:relative;padding-right:16px;'>
<pre id='code_411'>
http://&lt;your web server&gt;/&lt;app name&gt;/&lt;request name&gt;&amp;param1=value1&amp;param2=value2</pre>
<span id=golf_copied_411 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_411' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_411, code_411, golf_copied_411)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<div class="vsub"><a id="Setting parameters during request's execution"></a>Setting parameters during request's execution</div>
Use <a href='/set-param.html'>set-param</a> to replace the value of an existing parameter, or create a new one. For instance:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_414'>
<span class="Statement"> get-param</span> par1
<span class="Statement"> .</span>..
<span class="Statement"> set-param</span> par1=<span class="Constant">&quot;new value&quot;</span></pre>
<span id=golf_copied_414 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_414' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_414, code_414, golf_copied_414)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
In this case the value of an existing parameter "par1" is replaced with "new value". In the following code a new parameter is created, which can be retrieved later with get-param:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_415'>
<span class="Statement"> set-param</span> par1=<span class="Constant">&quot;new value&quot;</span>
<span class="Statement"> get-param</span> par1</pre>
<span id=golf_copied_415 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_415' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_415, code_415, golf_copied_415)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
See <a href='/call-handler.html'>call-handler</a> for more examples.<br/>
<div class="vsub"><a id="Duplicate input parameter names"></a>Duplicate input parameter names</div>
If there are multiple input parameters with the same name set by the request caller, such as <br/>
<div class='ncode' style='position:relative;padding-right:16px;'>
<pre id='code_413'>
http://&lt;web address&gt;/&lt;app name&gt;/&lt;request name&gt;?par=val1&amp;par=val2</pre>
<span id=golf_copied_413 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_413' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_413, code_413, golf_copied_413)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
the value of input parameter "par" is undefined. Do not specify multiple input parameters with the same name.<br/>
<!--BEFSAL13--><div class="vsub"><a id="See also"></a>See also</div>
 <a name='Request data'></a><span style="font-weight:bold;">Request data</span><br/>
<a href='/get-param.html'>get-param</a> &nbsp;<br/>
<a href='/request-body.html'>request-body</a> &nbsp;<br/>
<a href='/set-param.html'>set-param</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='/documentation.html'>documentation</a><br/>
<a id='get-req.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:right;background-color:white;'><a href='https://golf-lang.com' style='border-bottom:0px'><img src='https://golf-lang.com/golf.png'/></a></div><div class='vhub' style='margin-top:10px;'>&nbsp;Get req</div><hr/><span style="font-weight:bold;">Purpose</span>: Obtain data that describes the input request.<br/>
<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_416'>
<span class="Statement"> get-req</span> \
        <span class="Identifier"> errno</span> |<span class="Identifier"> error</span> |<span class="Identifier"> cookie-count</span> |<span class="Identifier"> cookie</span> &lt;cookie index&gt; \
         |<span class="Identifier"> arg-count</span> |<span class="Identifier"> arg-value</span> &lt;arg index&gt; \
         |<span class="Identifier"> header</span> &lt;header&gt; |<span class="Identifier"> referring-url</span> |<span class="Identifier"> method</span> \
         |<span class="Identifier"> content-type</span> |<span class="Identifier"> trace-file</span> |<span class="Identifier"> process-id</span> |<span class="Identifier"> name</span> \
         |<span class="Identifier"> external-call</span>
     to &lt;variable&gt;</pre>
<span id=golf_copied_416 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_416' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_416, code_416, golf_copied_416)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Information related to an input request can be obtained with get-req statement and the result stored into &lt;variable&gt; (in "to" clause). The following can be obtained (all are strings except where stated otherwise):<br/>
<ul><li>"errno" obtains the integer value of operating system "errno" tied to a last Golf statement that can return a status code. The "errno" value is saved internally; and restored here. It means that if "errno" changed for whatever reason since such Golf statement (such as with <a href='/call-extended.html'>call-extended</a>), you will still obtain the correct value. See <a href='/error-code.html'>error-code</a> for an example. Note that errno value is undefined if there is no error, and can be 0 if the error is reported by Golf and not by operating system.<br/>
<br/>
</li><li>"error" returns the error message that correlates to "errno" value. <br/>
<br/>
</li><li>"cookie-count" returns the number of cookies. This means any cookies received from the client plus any cookies added (with <a href='/set-cookie.html'>set-cookie</a>) in the application minus any cookies deleted (with <a href='/delete-cookie.html'>delete-cookie</a>). <br/>
<br/>
</li><li>"cookie" returns the cookie value specified by &lt;cookie index&gt; (a sequential number starting with 1 up to the number of cookies), for instance:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_417'>
<span class="Statement"> get-req</span><span class="Identifier"> cookie-count</span><span class="Type"> to</span> cookie_c
<span class="Statement"> start-loop</span><span class="Identifier"> repeat</span> cookie_c<span class="Type"> use</span> i
<span class="Statement">     get-req</span><span class="Identifier"> cookie</span> i<span class="Type"> to</span> cookie_val
<span class="Statement">     pf-web</span> <span class="Constant">&quot;cookie </span><span class="Special">%s</span><span class="Special">\n</span><span class="Constant">&quot;</span>, cookie_val
<span class="Statement">     @</span>&lt;br/&gt;
<span class="Statement"> end-loop</span></pre>
<span id=golf_copied_417 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_417' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_417, code_417, golf_copied_417)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
In this example, we get the number of cookies, and then print out each cookie value.<br/>
<br/>
</li><li>"arg-count" is the number of input arguments to your application (passed from a program caller, see "-a" option in <a href='/mgrg.html'>mgrg</a> and "--arg" in <a href='/gg.html'>gg</a>).<br/>
<br/>
</li><li>"arg-value" is the string value of a single element from the array of input arguments, specified by &lt;arg_index&gt;. This array is indexed from 1 to the value obtained by "arg-count". Here is an example of using arg-count and arg-value:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_418'>
<span class="Statement"> get-req</span><span class="Identifier"> arg-count</span><span class="Type"> to</span> ac
<span class="Statement"> pf-out</span> <span class="Constant">&quot;Total args [</span><span class="Special">%ld</span><span class="Constant">]&quot;</span>, ac
<span class="Statement"> start-loop</span><span class="Identifier"> repeat</span> ac<span class="Type"> use</span> i
<span class="Statement">     get-req</span><span class="Identifier"> arg-value</span> i<span class="Type"> to</span> av
<span class="Statement">     pf-out</span> <span class="Constant">&quot;</span><span class="Special">%s</span><span class="Special">\n</span><span class="Constant">&quot;</span>, av
<span class="Statement"> end-loop</span></pre>
<span id=golf_copied_418 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_418' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_418, code_418, golf_copied_418)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
This code will display the number of input arguments (as passed to main() function of your program, excluding the first argument which is the name of the program), and then all the arguments. If there are no arguments, then variable 'ac' would be 0. <br/>
<br/>
</li><li>"header" is the value of HTTP request header &lt;header&gt; that is set by the client. For example, if the HTTP request contains header "My-Header:30", then hval would be "30":<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_419'>
<span class="Statement"> get-req</span><span class="Identifier"> header</span> <span class="Constant">&quot;My-Header&quot;</span><span class="Type"> to</span> hval</pre>
<span id=golf_copied_419 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_419' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_419, code_419, golf_copied_419)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Note that not all HTTP request headers are set by the caller. For example, SERVER_NAME or QUERY_STRING are set by the web server, and to get such headers, use <a href='/get-sys.html'>get-sys</a>.<br/>
<br/>
</li><li>"method" is the request method. This is a number with values of GG_GET, GG_POST, GG_PUT, GG_PATCH or GG_DELETE for GET, POST, PUT, PATCH or DELETE requests, respectively. If it is not any of those commonly used ones, then the value is GG_OTHER and you can use <a href='/get-sys.html'>get-sys</a> with "environment" clause to obtain "REQUEST_METHOD" variable.<br/>
<br/>
</li><li>"content-type" is the request content type. It is a string and generally denotes the content type of a <a href='/request-body.html'>request-body</a>, if included in the request. Common examples are "application/x-www-form-urlencoded", "multipart/form-data" or "application/json".<br/>
<br/>
</li><li>"referring-url" is the referring URL (i.e. the page from which this request was called, for example by clicking a link). <br/>
<br/>
</li><li>"trace-file" is the full path of the trace file for this request (if enabled, see <a href='/trace-run.html'>trace-run</a>).<br/>
<br/>
</li><li>"process-id" is the "PID" (process ID) number of the currently executing process, as a number.<br/>
<br/>
</li><li>"external-call" is a boolean that is true if the call to the current request handler is from an external caller, or false if called from another handler.<br/>
<br/>
</li><li>"name" is the request name as specified in the <a href='/request.html'>request</a> URL.</li></ul>
<div class="vsub"><a id="Examples"></a>Examples</div>
Get the name of current trace file:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_420'>
<span class="Statement"> get-req</span><span class="Identifier"> trace-file</span><span class="Type"> to</span> trace_file</pre>
<span id=golf_copied_420 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_420' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_420, code_420, golf_copied_420)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<!--BEFSAL13--><div class="vsub"><a id="See also"></a>See also</div>
 <a name='Request information'></a><span style="font-weight:bold;">Request information</span><br/>
<a href='/get-req.html'>get-req</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='/documentation.html'>documentation</a><br/>
<a id='get-sys.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:right;background-color:white;'><a href='https://golf-lang.com' style='border-bottom:0px'><img src='https://golf-lang.com/golf.png'/></a></div><div class='vhub' style='margin-top:10px;'>&nbsp;Get sys</div><hr/><span style="font-weight:bold;">Purpose</span>: Obtain data that describes the system.<br/>
<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_421'>
<span class="Statement"> get-sys</span> \
    <span class="Identifier"> environment</span> &lt;var name&gt; \
        <span class="Identifier"> directory</span> |<span class="Identifier"> os-name</span> |<span class="Identifier"> os-version</span> \
    <span class="Type"> to</span> &lt;variable&gt;</pre>
<span id=golf_copied_421 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_421' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_421, code_421, golf_copied_421)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
System-describing variables can be obtained with get-sys statement and the result stored into &lt;variable&gt;. The following system variables can be obtained:<br/>
<ul><li>"environment" returns the name of a given environment variable &lt;var name&gt;. If this is a server program, then the environment passed from a remote caller (such as web proxy) is queried. If this is a <a href='/command-line.html'>command-line</a> program, then the environment from the Operating System is queried. In the following example,the QUERY_STRING variable (i.e. the actual query string from URL) is obtained:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_422'>
<span class="Statement"> get-sys</span><span class="Identifier"> environment</span> <span class="Constant">&quot;QUERY_STRING&quot;</span><span class="Type"> to</span> qstr</pre>
<span id=golf_copied_422 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_422' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_422, code_422, golf_copied_422)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<br/>
</li><li>"directory" is the execution directory of the <a href='/command-line.html'>command-line</a> program, i.e. the current working directory when the program was executed. Note that Golf will change the current working directory immediately afterwards to the application home directory (see <a href='/directories.html'>directories</a>). You can use this clause to work with files in the directory where the program was started. If your program runs as a <a href='/service.html'>service</a>, then "directory" clause always returns application home directory, regardless of which directory <a href='/mgrg.html'>mgrg</a> program manager started your application from.<br/>
<br/>
</li><li>"os-name" is the name of Operating System.<br/>
<br/>
</li><li>"os-version" is the version of Operating System.</li></ul>
<div class="vsub"><a id="Examples"></a>Examples</div>
Get the name of the Operating System<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_423'>
<span class="Statement"> get-sys</span><span class="Identifier"> os-name</span><span class="Type"> to</span> os_name</pre>
<span id=golf_copied_423 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_423' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_423, code_423, golf_copied_423)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<!--BEFSAL13--><div class="vsub"><a id="See also"></a>See also</div>
 <a name='System information'></a><span style="font-weight:bold;">System information</span><br/>
<a href='/get-sys.html'>get-sys</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='/documentation.html'>documentation</a><br/>
<a id='get-time.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:right;background-color:white;'><a href='https://golf-lang.com' style='border-bottom:0px'><img src='https://golf-lang.com/golf.png'/></a></div><div class='vhub' style='margin-top:10px;'>&nbsp;Get time</div><hr/><span style="font-weight:bold;">Purpose</span>: Get time.<br/>
<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_424'>
<span class="Statement"> get-time</span><span class="Type"> to</span> &lt;time var&gt; \
     [<span class="Identifier"> timezone</span> &lt;tz&gt; ] \
     [<span class="Identifier"> year</span> &lt;year&gt; ] \
     [<span class="Identifier"> month</span> &lt;month&gt; ] \
     [<span class="Identifier"> day</span> &lt;day&gt; ] \
     [<span class="Identifier"> hour</span> &lt;hour&gt; ] \
     [<span class="Identifier"> minute</span> &lt;minute&gt; ] \
     [<span class="Identifier"> second</span> &lt;second&gt; ] \
     [<span class="Identifier"> format</span> &lt;format&gt; ]</pre>
<span id=golf_copied_424 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_424' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_424, code_424, golf_copied_424)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
get-time produces &lt;time var&gt; variable that contains string with time. &lt;time var&gt; is <a href='/memory-handling.html'>allocated memory</a>.<br/>
<br/>
If none of "year", "month", "day", "hour", "minute" or "second" clauses are used, then current time is produced. <br/>
<br/>
Use timezone to specify that time produced will be in timezone &lt;tz&gt;. For example if &lt;tz&gt; is "EST", that means Eastern Standard Time, while "MST" means Mountain Standard Time. The exact way to get a full list of timezones recognized on your system may vary, but on many systems you can use:<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_425'>
timedatectl list-timezones</pre>
<span id=golf_copied_425 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_425' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_425, code_425, golf_copied_425)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
So for example to get the time in Phoenix, Arizona you could use "America/Phoenix" for &lt;tz&gt;. If timezone clause is omitted, then time is produced in "GMT" timezone by default. DST (Daylight Savings Time) is automatically adjusted.<br/>
<br/>
Each variable specified with "year", "month", "day", "hour", "minute" or "second" is a time to be added or subtracted to/from current date. For example "year 2" means add 2 years to the current date, and "year -4" means subtract 4 years, whereas "hour -4" means &nbsp;subtract 4 hours, etc. So for example, a moment in time that is 2 years into the future minus 5 days minus 1 hour is:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_426'>
<span class="Statement"> get-time</span><span class="Type"> to</span> time_var<span class="Identifier"> year</span> <span class="Constant">2</span><span class="Identifier"> day</span> -<span class="Constant">5</span><span class="Identifier"> hour</span> -<span class="Constant">1</span></pre>
<span id=golf_copied_426 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_426' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_426, code_426, golf_copied_426)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
&lt;format&gt; allows you to get the time in any string format you like, using the specifiers available in C "strftime". For example, if &lt;format&gt; is "%A, %B %d %Y, %l:%M %p %Z", it will produce something like "Sunday, November 28 2021, 9:07 PM MST". The default format is "UTC/GMT" format, which for instance, is suitable for use with cookie timestamps, and looks something like "Mon, 16 Jul 2012 00:03:01 GMT".<br/>
<div class="vsub"><a id="Examples"></a>Examples</div>
To get current time in "GMT" timezone, in a format that is suitable for use with <a href='/set-cookie.html'>set-cookie</a> (for example to set expiration date):<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_427'>
<span class="Statement"> get-time</span><span class="Type"> to</span> mytime</pre>
<span id=golf_copied_427 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_427' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_427, code_427, golf_copied_427)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
To get the time in the same format, only 1 year and 2 months in the future:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_428'>
<span class="Statement"> get-time</span><span class="Type"> to</span> mytime<span class="Identifier"> year</span> <span class="Constant">1</span><span class="Identifier"> month</span> <span class="Constant">2</span></pre>
<span id=golf_copied_428 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_428' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_428, code_428, golf_copied_428)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
An example of a future date (1 year, 3 months, 4 days, 7 hours, 15 minutes and 22 seconds into the future), in a specific format (see "strftime"):<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_429'>
<span class="Statement"> get-time</span><span class="Type"> to</span> time_var<span class="Identifier"> timezone</span> <span class="Constant">&quot;MST&quot;</span><span class="Identifier"> year</span> <span class="Constant">1</span><span class="Identifier"> month</span> <span class="Constant">3</span><span class="Identifier"> day</span> <span class="Constant">4</span><span class="Identifier"> hour</span> <span class="Constant">7</span><span class="Identifier"> minute</span> <span class="Constant">15</span><span class="Identifier"> second</span> <span class="Constant">22</span><span class="Identifier"> format</span> <span class="Constant">&quot;</span><span class="Special">%A</span><span class="Constant">, %B </span><span class="Special">%d</span><span class="Constant"> %Y, %l:%M </span><span class="Special">%p</span><span class="Constant"> %Z&quot;</span></pre>
<span id=golf_copied_429 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_429' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_429, code_429, golf_copied_429)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<!--BEFSAL13--><div class="vsub"><a id="See also"></a>See also</div>
 <a name='Time'></a><span style="font-weight:bold;">Time</span><br/>
<a href='/get-time.html'>get-time</a> &nbsp;<br/>
<a href='/pause-program.html'>pause-program</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='/documentation.html'>documentation</a><br/>
<a id='get-tree.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:right;background-color:white;'><a href='https://golf-lang.com' style='border-bottom:0px'><img src='https://golf-lang.com/golf.png'/></a></div><div class='vhub' style='margin-top:10px;'>&nbsp;Get tree</div><hr/><span style="font-weight:bold;">Purpose</span>: Get information about a tree.<br/>
<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_430'>
<span class="Statement"> get-tree</span> &lt;tree&gt; \
     (<span class="Type"> count</span> &lt;count&gt; ) | (<span class="Type"> hops</span> &lt;hops&gt; )</pre>
<span id=golf_copied_430 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_430' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_430, code_430, golf_copied_430)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
get-tree provides information about &lt;tree&gt; (created by <a href='/new-tree.html'>new-tree</a>):<br/>
<ul><li>&lt;count&gt; (in "count" clause) provides the number of keys (i.e. nodes) in the tree. <br/>
</li><li>&lt;hops&gt; (in "hops" clause) provides the number of nodes accessed to find a key in the last tree statement executed prior to get-tree. Note that &lt;hops&gt; is available only in debug Golf <a href='/install.html'>build</a>; otherwise it is always zero.<br/>
<div class="vsub"><a id="Examples"></a>Examples</div>
Get the number of nodes (keys) in a tree:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_431'>
<span class="Statement"> new-tree</span> mytree
<span class="Statement"> .</span>..
<span class="Statement"> get-tree</span> mytree<span class="Type"> count</span> c</pre>
<span id=golf_copied_431 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_431' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_431, code_431, golf_copied_431)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<!--BEFSAL13--><div class="vsub"><a id="See also"></a>See also</div>
 <a name='Tree'></a><span style="font-weight:bold;">Tree</span><br/>
<a href='/delete-tree.html'>delete-tree</a> &nbsp;<br/>
<a href='/get-tree.html'>get-tree</a> &nbsp;<br/>
<a href='/new-tree.html'>new-tree</a> &nbsp;<br/>
<a href='/purge-tree.html'>purge-tree</a> &nbsp;<br/>
<a href='/read-tree.html'>read-tree</a> &nbsp;<br/>
<a href='/use-cursor.html'>use-cursor</a> &nbsp;<br/>
<a href='/write-tree.html'>write-tree</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='/documentation.html'>documentation</a><br/>
<a id='gg.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:right;background-color:white;'><a href='https://golf-lang.com' style='border-bottom:0px'><img src='https://golf-lang.com/golf.png'/></a></div><div class='vhub' style='margin-top:10px;'>&nbsp;Gg</div><hr/><span style="font-weight:bold;">Purpose</span>: Golf general purpose utility: build, test, run, miscellaneous (pronounced "gigi").<br/>
<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_433'>
gg <span class="Statement">&lt;</span>options<span class="Statement">&gt;</span></pre>
<span id=golf_copied_433 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_433' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_433, code_433, golf_copied_433)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<div class="vsub"><a id="Command-line options"></a>Command-line options</div>
<ul><li>-k &lt;app name&gt;<br/>
Create Golf application &lt;app name&gt; with default settings (see <a href='/mgrg.html'>mgrg</a> with "-i" option on creating applications with non-default settings). The default settings mean that your application is owned by the currently-logged on Operating System user (see "-u" option in mgrg), and that a Unix socket connecting to your application server isn't restricted by any group (see "-r" option in mgrg). You must have sudo privilege to create an application (this is the only option that requires it). This option does nothing if the application already exists. You can combine this option with "-q" to create and then build an application in the same step.<br/>
<br/>
</li><li>-q Build Golf application from source code in the current directory. <a href='/mgrg.html'>mgrg</a> must run first in this directory with "-i" option to create the application. You must have at least one Golf source file (.golf file), with each such file implementing a single <a href='/request.html'>request</a> handler. All application source files must be contained in a flat directory; however, each request handler can handle any hierarchical path, so your API can be fully hierarchical.<br/>
<br/>
The following options can be used when building an application:<br/>
<br/>
<ul><li>--db="&lt;database vendor&gt;:&lt;db config file&gt; ..."<br/>
Specify a list of databases used in your application. Each element of the list is &lt;database vendor&gt; (which is 'mariadb', 'postgres' or 'sqlite'), followed by a colon (:) and then &lt;db config file&gt;, where &lt;db config file&gt; is used to refer to a database in <a href='/statements.html'>statements</a> such as <a href='/run-query.html'>run-query</a>. <br/>
<br/>
Each &lt;database vendor&gt;:&lt;db config file&gt; is separated by a space. You can list any number of databases for use in your application. A file in current directory with name &lt;db config file&gt; must exist and contain the connection parameters for database access, and is copied to Golf's database configuration directory (see <a href='/directories.html'>directories</a>). See <a href='/database-config-file.html'>database-config-file</a> for more details on the content of this file.<br/>
<br/>
</li><li>--lflag=&lt;linker flags&gt;<br/>
If you wish to add any additional linker flags (such as any non-Golf libraries), specify them quoted under this option. <br/>
<br/>
</li><li>--cflag=&lt;C flags&gt;<br/>
If you wish to add any additional C compiler (gcc) flags, specify them quoted under this option. <br/>
<br/>
</li><li>--trace<br/>
If specified, tracing information code will be generated (without it, tracing is not available and <a href='/trace-run.html'>trace-run</a> statement is ignored). Tracing only works when debugging mode is enabled, so --debug option must be used as well.<br/>
<br/>
</li><li>--path=&lt;application path&gt;<br/>
This option lets you specify the <a href='/request.html'>application path</a> for your request URLs. It is a leading path of a URL prior to request name and any parameters. If empty, the default is the application name preceded by a forward slash:<br/>
<div class='ncode' style='position:relative;padding-right:16px;'>
<pre id='code_432'>
/&lt;app name&gt;</pre>
<span id=golf_copied_432 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_432' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_432, code_432, golf_copied_432)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
</li><li>--maxupload=&lt;max upload size&gt;<br/>
Specify maximum upload size for a file (in bytes). The default is approximately 25MB. <br/>
<br/>
</li><li>--max-errors=&lt;max errors&gt;<br/>
During building of an application, emit a maximum of &lt;max errors&gt; diagnostic messages per .golf source file. The default is 5.<br/>
<br/>
</li><li>--debug<br/>
Generate debugging information when compiling your application. Debugging information is required to produce a backtrace file with the stack that contains source code line numbers, in order to pinpoint the exact location where report-error statement was used, or where the application crashed. It is also needed to use gdb for debugging purposes. Note that stack information is produced only when Golf is built in debugging mode (see "DI=1" option when <a href='/install.html'>install</a>ing Golf).<br/>
<br/>
</li><li>--c-lines<br/>
Skip generating line information when compiling .golf files. By default line information is included, which allows errors to be reported with line numbers in .golf files. If you want only generated C code line numbers to be used, use this option. This output will omit certain color-coded and other details that are normally present without this option.<br/>
<br/>
</li><li>--optimize-memory<br/>
Use memory-optimizing garbage collection, which counts memory references and frees memory as soon as possible. Default is without memory optimization, which frees memory at the end of the request. Do not use this option unless your system is seriously starved for memory because it imposes a performance penatly.<br/>
<br/>
</li><li>--public<br/>
Change the default behavior of request handler safety so that request handlers without "public" or "private" clause are by default "public"; see <a href='/begin-handler.html'>begin-handler</a> for more details.<br/>
<br/>
</li><li>--single-file<br/>
A request handler is written in a source file whose path matches fully or partially that of the <a href='/request.html'>request</a>, and such a file can contain any number of request handlers that match, see <a href='/request.html'>request</a>. If, however "--single-file" is used, each request has to be in its own file whose path matches fully the request path, and no other request can be implemented in such file. For example, with "--single-file", request "/myreq" has to be in file "myreq.golf" in the source directory, while request "/other/newreq" has to be in file "other/newreq.golf" (meaning in file "newreq.golf" in subdirectory "other" in the source directory).<br/>
<br/>
</li><li>--exclude-dir<br/>
By default, all ".golf" files (including in all subdirectories regardless of how many levels there may be), are picked up for compilation. If "--exclude-dir" is used, then you can specify any number of subdirectories, separated by commas, to be excluded. <br/>
<br/>
</li><li>--parallel=&lt;threads&gt;<br/>
Use &lt;threads&gt; number of threads to compile application. By default, the number of threads is equal to the number of CPUs (including virtual), allowing each CPU to compile one source files at a time; this is usually the fastest way. You can serialize compilation with "--parallel=1"; or you can set &lt;threads&gt; to any number between 1 and three time the number of CPUs in order to reach your performance and CPU utilization goals.<br/>
<br/>
</li><li>--posix-regex<br/>
Use ERE (Extended Regular Expression) POSIX regex library built into Linux instead of default PCRE2, see <a href='/match-regex.html'>match-regex</a>. While the two are largely compatibile, you can use either one depending on your needs.<br/>
<br/>
</li><li>--plain-diag<br/>
Do not use color-coded and more detailed Golf diagnostic output. While rare, you may need this option in cases when there may be a Golf or underlying compiler bug, or for some other reason.<br/>
<br/>
</li><li>-c,--clean <br/>
Clean all object and other intermediate files, so that consequent application build is a full recompilation. Use it alone and prior to rebuilding the application.</li></ul>
<br/>
Note that when any gg compilation options change, the application is rebuilt (i.e. the change has the effect of "--clean").<br/>
<br/>
</li><li>-i<br/>
Display both include and linking flags for an application that uses <a href='/Client-API.html'>Client-API</a> to connect to Golf <a href='/service.html'>service</a>. The flags are for C compiler (gcc). If "--include" option is used in addition, then only include flags are displayed. If "--link" option is used in addition, then only linking flags are displayed. Use this to automate building of client applications with tools like Makefile.<br/>
<br/>
</li><li>-v<br/>
Display Golf version as well as the Operating System version. <br/>
<br/>
</li><li>-s<br/>
Trace the execution of gg utility and display all the steps in making your application. <br/>
<br/>
</li><li>-e &lt;num of errors&gt;<br/>
Show the last &lt;num of errors&gt; from the backtrace file, which receives error message and stack trace when program crashes or <a href='/report-error.html'>report-error</a> is issued. Also display the path to backtrace file which contains the stack details.<br/>
<br/>
</li><li>-t &lt;num of trace files&gt;<br/>
Show the last &lt;num of trace files&gt; most recent trace files for the application. This is useful when tracing (see <a href='/trace-run.html'>trace-run</a>) to quickly find the trace files where Golf writes to. Also display the path to backtrace file which contains the stack details.<br/>
<br/>
</li><li>-o<br/>
Show documentation directory - web page documentation is located here in the form of a gliimdoc.html file.<br/>
<br/>
</li><li>-l<br/>
Show library directory - Golf's libraries and v1 code processor are located there.<br/>
<br/>
</li><li>-r [ --req="/&lt;request name&gt;[&lt;url parameters&gt;]" <br/>
 &nbsp; &nbsp;[ --app="application path" ] <br/>
 &nbsp; &nbsp;[ --service [ --remote="server:port" ] [ --socket="socket path" ] ] <br/>
 &nbsp; &nbsp;[ --method="&lt;request method&gt;" ] <br/>
 &nbsp; &nbsp;[ --content="&lt;input file&gt;" --content-type="&lt;content type&gt;" ] <br/>
 &nbsp; &nbsp;[ --silent-header ] <br/>
 &nbsp; &nbsp;[ --arg="&lt;arguments&gt;" ] <br/>
 &nbsp; &nbsp;[ --exec ] <br/>
Run a <a href='/command-line.html'>command-line</a> program, or make a <a href='/service.html'>service</a> request, or display bash code to do the same for use in scripts. <br/>
<br/>
If you are not in application's source code directory, then you must specify "--app" option to supply the application path (typically "/&lt;application name&gt;", see <a href='/request.html'>request</a>). You can use "--req" option to specify the request name and optional URL parameters (see <a href='/request.html'>request</a>), for example it may be:<br/>
<div class='ncode' style='position:relative;padding-right:16px;'>
<pre id='code_434'>
gg -r --req=&quot;/encrypt&quot; --exec</pre>
<span id=golf_copied_434 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_434' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_434, code_434, golf_copied_434)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
to execute request "encrypt", or<br/>
<div class='ncode' style='position:relative;padding-right:16px;'>
<pre id='code_436'>
gg -r --req=&quot;/encrypt/data=somedata?method=aes256&quot; --exec</pre>
<span id=golf_copied_436 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_436' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_436, code_436, golf_copied_436)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
where "/encrypt" is the request name, and "/data=somedata?method=aes256" represents the URL parameters. <br/>
<br/>
Use --method to specify the HTTP request method, for instance:<br/>
<div class='ncode' style='position:relative;padding-right:16px;'>
<pre id='code_438'>
gg -r --req=&quot;/encrypt/data=somedata?method=aes256&quot; --method=POST --exec</pre>
<span id=golf_copied_438 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_438' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_438, code_438, golf_copied_438)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
If not specified, the default method is "GET". <br/>
<br/>
If "--service" is not used, then <a href='/command-line.html'>command-line</a> program will execute and you can specify program arguments with "--arg" option, in which case "&lt;arguments&gt;" is a string (double or single quoted) that contains any number of program arguments. To specify arguments for a service see "-a" option in <a href='/mgrg.html'>mgrg</a>.<br/>
<br/>
If "--service" is used, then application server will be contacted to execute a service; in this case if "--remote" is not specified, a local Unix socket is used to contact the server; otherwise "server:port" specified in "--remote" is the IP/name and port of the server to call, separated by a colon (":"). In case of a local Unix socket, the socket path is by default "/var/lib/gg/&lt;app name&gt;/sock/sock", where "/&lt;app name&gt;" is given by the last path segment in "--app" option, or if not specified it is derived from the name of a Golf application built in the current directory; otherwise the socket path is given by "--socket" option.<br/>
<br/>
By default, the output in any case will have the HTTP headers. If you don't want those to appear, use "--silent-header" option.<br/>
<br/>
If "--content" is used, then file &lt;input file&gt; is either piped to the standard input of a command-line program (if "--service" is not used), or sent as a content to the application server (if "--service" is used). You can also specify content type with "--content-type". For example:<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_435'>
gg <span class="Special">-r</span> <span class="Special">-app</span><span class="Statement">=</span><span class="Statement">&quot;</span><span class="Constant">/my_app</span><span class="Statement">&quot;</span> <span class="Special">--req</span><span class="Statement">=</span><span class="Statement">&quot;</span><span class="Constant">/some_request?par1=val1&amp;par2=20&amp;par3=4</span><span class="Statement">&quot;</span> <span class="Special">--method</span><span class="Statement">=</span>PATCH <span class="Special">--content</span><span class="Statement">=</span>something.json <span class="Special">--content-type</span><span class="Statement">=</span>application/json <span class="Special">--exec</span></pre>
<span id=golf_copied_435 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_435' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_435, code_435, golf_copied_435)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Examples of using "-r" option to execute <a href='/command-line.html'>command-line</a> program or to call a <a href='/service.html'>service</a>:<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_437'>
<span class="Comment">#Execute current application as a command-line program, request &quot;json&quot;</span>
gg <span class="Special">-r</span> <span class="Special">--req</span><span class="Statement">=</span><span class="Statement">&quot;</span><span class="Constant">/json</span><span class="Statement">&quot;</span> <span class="Special">--exec</span>

<span class="Comment">#Execute application &quot;app_name&quot;, service &quot;json&quot; by calling the application server running with a Unix socket</span>
gg <span class="Special">-r</span> <span class="Special">--req</span><span class="Statement">=</span><span class="Statement">&quot;</span><span class="Constant">/json</span><span class="Statement">&quot;</span> <span class="Special">--app</span><span class="Statement">=</span><span class="Statement">&quot;</span><span class="Constant">/app_name</span><span class="Statement">&quot;</span> <span class="Special">--service</span>  <span class="Special">--exec</span>

<span class="Comment">#Execute application &quot;app_name&quot;, service &quot;json&quot; by calling the application server running with a Unix socket (specified explicitly)</span>
<span class="Comment">#Request has input parameter &quot;act&quot; with value &quot;perf&quot;</span>
gg <span class="Special">-r</span> <span class="Special">--req</span><span class="Statement">=</span><span class="Statement">&quot;</span><span class="Constant">/json?act=perf</span><span class="Statement">&quot;</span> <span class="Special">--app</span><span class="Statement">=</span><span class="Statement">&quot;</span><span class="Constant">/app_name</span><span class="Statement">&quot;</span> <span class="Special">--service</span> <span class="Special">--socket</span><span class="Statement">=</span><span class="Statement">&quot;</span><span class="Constant">/sock_path/sock</span><span class="Statement">&quot;</span>  <span class="Special">--exec</span>

<span class="Comment">#Execute application &quot;app_name&quot;, service &quot;json&quot; by calling the application server running with a TCP socket on port 2301</span>
<span class="Comment">#Request has input parameter &quot;act&quot; with value &quot;perf&quot;</span>
gg <span class="Special">-r</span> <span class="Special">--req</span><span class="Statement">=</span><span class="Statement">&quot;</span><span class="Constant">/json/act=perf</span><span class="Statement">&quot;</span> <span class="Special">--app</span><span class="Statement">=</span><span class="Statement">&quot;</span><span class="Constant">/app_name</span><span class="Statement">&quot;</span> <span class="Special">--service</span> <span class="Special">--remote</span><span class="Statement">=</span><span class="Statement">&quot;</span><span class="Constant">192.168.0.21:2301</span><span class="Statement">&quot;</span>  <span class="Special">--exec</span></pre>
<span id=golf_copied_437 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_437' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_437, code_437, golf_copied_437)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<span style="font-weight:bold;">- Performance</span><br/>
"gg -r" can be used both for testing and in production, however for maximum performance, skip "--exec" option to display direct bash code that you can copy and paste to use in production. This direct code is about 300% faster than using "gg -r"; keep this in mind if performance of using "gg -r" is important. When "--exec" is not used, the output may look like this:<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_439'>
<span class="Statement">export</span> <span class="Identifier">CONTENT_TYPE</span>=
<span class="Statement">export</span> <span class="Identifier">CONTENT_LENGTH</span>=
<span class="Statement">unset</span><span class="Identifier"> GG_SILENT_HEADER</span>
<span class="Statement">export</span> GG_SILENT_HEADER
<span class="Statement">export</span> <span class="Identifier">REQUEST_METHOD</span>=GET
<span class="Statement">export</span> <span class="Identifier">SCRIPT_NAME</span>=<span class="Statement">&quot;</span><span class="Constant">/enc</span><span class="Statement">&quot;</span>
<span class="Statement">export</span> <span class="Identifier">PATH_INFO</span>=<span class="Statement">&quot;</span><span class="Constant">/encrypt/data/somedata</span><span class="Statement">&quot;</span>
<span class="Statement">export</span> <span class="Identifier">QUERY_STRING</span>=<span class="Statement">&quot;</span><span class="Constant">method=aes256</span><span class="Statement">&quot;</span>
/var/lib/gg/bld/enc/enc</pre>
<span id=golf_copied_439 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_439' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_439, code_439, golf_copied_439)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
If you copy the above and paste into bash shell, it will execute the command line program which handles the request specified (which gg would do when "--exec" is specified, but not as fast). Note that SCRIPT_NAME will be set to whatever application path you use (i.e. the default or if set with "--path" option when making the application; or with "--app" option here), see <a href='/request.html'>request</a>. <br/>
<br/>
If you need to have run-time parameter(s) to "gg -r", escape them when displaying the direct bash code and run with "eval", for instance:<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_440'>
<span class="Identifier">COMM</span>=<span class="PreProc">$(</span><span class="Special">gg </span><span class="Special">-r</span><span class="Special"> </span><span class="Special">--req</span><span class="Statement">=</span><span class="Statement">&quot;</span><span class="Constant">/func_test/update-data/key=</span><span class="Special">\$</span><span class="Constant">i/value=d_</span><span class="Special">\$</span><span class="Constant">i</span><span class="Statement">&quot;</span><span class="Special"> </span><span class="Special">--service</span><span class="Special"> </span><span class="Special">--remote</span><span class="Statement">=</span><span class="Statement">&quot;</span><span class="Constant">127.0.0.1:2301</span><span class="Statement">&quot;</span><span class="PreProc">)</span>
...
<span class="Statement">for</span> i <span class="Statement">in</span> <span class="Special">{</span><span class="Constant">1</span>..<span class="Constant">1000</span><span class="Special">}</span>; <span class="Statement">do</span>
    ...
    <span class="Identifier">RES</span>=<span class="PreProc">$(</span><span class="Statement">eval</span><span class="Special"> </span><span class="Statement">&quot;</span><span class="PreProc">$COMM</span><span class="Statement">&quot;</span><span class="PreProc">)</span>
    ...
    <span class="Statement">echo</span><span class="Constant"> </span><span class="Statement">&quot;</span><span class="Constant">Result is </span><span class="PreProc">$RES</span><span class="Statement">&quot;</span>
<span class="Statement">done</span></pre>
<span id=golf_copied_440 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_440' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_440, code_440, golf_copied_440)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
In this example, the code with "$i" variable is created, and then evaluated in a bash loop of 1000 iterations, with each execution of your service using dynamic run-time input parameter "$i", but without executing "gg -r" 1000 times.<br/>
</li><li>-u <br/>
Read stdin (standard input) and substitute any environment variables in the form of ${&lt;var name&gt;} with their values, and output to stdout (stdout). This is useful in processing configuration files that do not have parameter values hardcoded, but rather take them from the environment.<br/>
<br/>
</li><li>-m<br/>
Add Golf syntax and keyword highlighting rules for files with .golf extension to Vim editor for the currently logged on user. Note that you must have Vim installed; vi alone will not work.<br/>
<br/>
</li><li>-h<br/>
Display help. </li></ul>
<div class="vsub"><a id="Examples"></a>Examples</div>
<ul><li>Make application (-q), use three databases (--db) named mdb (MariaDB database), pdb (PostgreSQL) and sdb (SQLite), produce debugging information (--debug), produce tracing information (--trace):<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_441'>
gg <span class="Special">-q</span> <span class="Special">--db</span><span class="Statement">=</span><span class="Statement">&quot;</span><span class="Constant">mariadb:mdb postgres:pdb sqlite:sdb</span><span class="Statement">&quot;</span> <span class="Special">--debug</span> <span class="Special">--trace</span></pre>
<span id=golf_copied_441 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_441' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_441, code_441, golf_copied_441)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
</li><li>make application, use MariaDB database db (--db), specify linker and C compilation flags, specify maximum upload size of about 18M:<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_442'>
gg <span class="Special">-q</span> <span class="Special">--db</span><span class="Statement">=</span><span class="Statement">&quot;</span><span class="Constant">mariadb:db</span><span class="Statement">&quot;</span> <span class="Special">--lflag</span> <span class="Statement">&quot;</span><span class="Constant">-Wl,-z,defs</span><span class="Statement">&quot;</span> <span class="Special">--cflag</span> <span class="Statement">&quot;</span><span class="Constant">-DXYZ123</span><span class="Statement">&quot;</span> <span class="Special">--maxupload</span> <span class="Constant">18000000</span></pre>
<span id=golf_copied_442 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_442' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_442, code_442, golf_copied_442)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
</li><li>Make application that doesn't use any databases:<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_443'>
gg <span class="Special">-q</span></pre>
<span id=golf_copied_443 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_443' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_443, code_443, golf_copied_443)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
</li></ul>
<!--BEFSAL13--><div class="vsub"><a id="See also"></a>See also</div>
 <a name='Golf compiler and utility'></a><span style="font-weight:bold;">Golf compiler and utility</span><br/>
<a href='/gg.html'>gg</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='/documentation.html'>documentation</a><br/>
<a id='handler-status.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:right;background-color:white;'><a href='https://golf-lang.com' style='border-bottom:0px'><img src='https://golf-lang.com/golf.png'/></a></div><div class='vhub' style='margin-top:10px;'>&nbsp;Handler status</div><hr/><span style="font-weight:bold;">Purpose</span>: Set handler return status.<br/>
<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_444'>
<span class="Statement"> handler-status</span> &lt;request status&gt;</pre>
<span id=golf_copied_444 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_444' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_444, code_444, golf_copied_444)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
handler-status specifies &lt;request status&gt;, which must be a number.<br/>
<br/>
&lt;request status&gt; can be obtained with "handler-status" clause in <a href='/read-remote.html'>read-remote</a> in the service caller.<br/>
<br/>
When the program runs as <a href='/command-line.html'>command-line</a>, &lt;request status&gt; is program's exit code.<br/>
<br/>
handler-status can be specified anywhere in the code, and does not mean exiting the <a href='/request.html'>request</a>'s processing; to do that, either use <a href='/exit-handler.html'>exit-handler</a> or simply allow the handler to reach its end.<br/>
<br/>
When handler-status is not used, the default exit code is 0. When multiple handler-status statements run in a sequence, the request status is that of the last one that executes.<br/>
<br/>
If you want to specify request status and exit request processing at the same time, use <a href='/exit-handler.html'>exit-handler</a>.<br/>
<div class="vsub"><a id="Examples"></a>Examples</div>
When the program exits, its exit code will be 12:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_445'>
<span class="Statement"> handler-status</span> <span class="Constant">12</span>
<span class="Statement"> .</span>..
<span class="Statement"> exit-handler</span></pre>
<span id=golf_copied_445 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_445' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_445, code_445, golf_copied_445)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<!--BEFSAL13--><div class="vsub"><a id="See also"></a>See also</div>
 <a name='Program execution'></a><span style="font-weight:bold;">Program execution</span><br/>
<a href='/exec-program.html'>exec-program</a> &nbsp;<br/>
<a href='/handler-status.html'>handler-status</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='/documentation.html'>documentation</a><br/>
<a id='hash-string.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:right;background-color:white;'><a href='https://golf-lang.com' style='border-bottom:0px'><img src='https://golf-lang.com/golf.png'/></a></div><div class='vhub' style='margin-top:10px;'>&nbsp;Hash string</div><hr/><span style="font-weight:bold;">Purpose</span>: Hash a string.<br/>
<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_446'>
<span class="Statement"> hash-string</span> &lt;string&gt;<span class="Type"> to</span> &lt;result&gt; \
     [<span class="Identifier"> binary</span> [ &lt;binary&gt; ] \
     [<span class="Identifier"> digest</span> &lt;digest algorithm&gt; ]</pre>
<span id=golf_copied_446 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_446' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_446, code_446, golf_copied_446)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
hash-string produces by default a SHA256 hash of &lt;string&gt; (if "digest" clause is not used), and stores the result into &lt;result&gt;. You can use a different &lt;digest algorithm&gt; in "digest" clause (for example "SHA3-256"). To see a list of available digests:<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_447'>
<span class="Comment">#get digests</span>
openssl list <span class="Special">-digest-algorithms</span></pre>
<span id=golf_copied_447 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_447' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_447, code_447, golf_copied_447)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
If "binary" clause is used without boolean variable &lt;binary&gt;, or if &lt;binary&gt; evaluates to true, then the &lt;result&gt; is a binary string that may contain null-characters. With the default SHA256, it is 32 bytes in length, while for instance with SHA3-384 it is 48 bytes in length, etc. <br/>
<br/>
Without "binary" clause, or if &lt;binary&gt; evaluates to false, each binary byte of hashed string is converted to two hexadecimal characters ("0"-"9" and "a"-"f"), hence &lt;result&gt; is twice as long as with "binary" clause. <br/>
<div class="vsub"><a id="Examples"></a>Examples</div>
String "result" will have a hashed value of the given string, an example of which might look like "e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855":<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_448'>
<span class="Statement"> hash-string</span> <span class="Constant">&quot;hello world&quot;</span><span class="Type"> to</span> hash</pre>
<span id=golf_copied_448 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_448' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_448, code_448, golf_copied_448)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Using a different digest:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_449'>
<span class="Statement"> hash-string</span> <span class="Constant">&quot;hello world&quot;</span><span class="Type"> to</span> hash<span class="Identifier"> digest</span> <span class="Constant">&quot;sha3-384&quot;</span></pre>
<span id=golf_copied_449 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_449' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_449, code_449, golf_copied_449)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Producing a binary value instead of a null-terminated hexadecimal string:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_450'>
<span class="Statement"> hash-string</span> <span class="Constant">&quot;hello world&quot;</span><span class="Type"> to</span> hash<span class="Identifier"> digest</span> <span class="Constant">&quot;sha3-384&quot;</span><span class="Identifier"> binary</span></pre>
<span id=golf_copied_450 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_450' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_450, code_450, golf_copied_450)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<!--BEFSAL13--><div class="vsub"><a id="See also"></a>See also</div>
 <a name='Encryption'></a><span style="font-weight:bold;">Encryption</span><br/>
<a href='/decrypt-data.html'>decrypt-data</a> &nbsp;<br/>
<a href='/derive-key.html'>derive-key</a> &nbsp;<br/>
<a href='/encrypt-data.html'>encrypt-data</a> &nbsp;<br/>
<a href='/hash-string.html'>hash-string</a> &nbsp;<br/>
<a href='/hmac-string.html'>hmac-string</a> &nbsp;<br/>
<a href='/random-crypto.html'>random-crypto</a> &nbsp;<br/>
<a href='/random-string.html'>random-string</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='/documentation.html'>documentation</a><br/>
<a id='hmac-string.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:right;background-color:white;'><a href='https://golf-lang.com' style='border-bottom:0px'><img src='https://golf-lang.com/golf.png'/></a></div><div class='vhub' style='margin-top:10px;'>&nbsp;Hmac string</div><hr/><span style="font-weight:bold;">Purpose</span>: Create HMAC.<br/>
<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_451'>
<span class="Statement"> hmac-string</span> &lt;string&gt;<span class="Type"> to</span> &lt;result&gt; \
    <span class="Identifier"> key</span> &lt;key&gt; \
     [<span class="Identifier"> binary</span> [ &lt;binary&gt; ] \
     [<span class="Identifier"> digest</span> &lt;digest algorithm&gt; ]</pre>
<span id=golf_copied_451 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_451' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_451, code_451, golf_copied_451)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
hmac-string produces by default a SHA256-based HMAC (Hash Message Authentication Code) of &lt;string&gt; (if "digest" clause is not used) using secret &lt;key&gt;, and stores the result into &lt;result&gt;. &nbsp;You can use a different &lt;digest algorithm&gt; in "digest" clause (for example "SHA3-256"). To see a list of available digests:<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_452'>
<span class="Comment">#get digests</span>
openssl list <span class="Special">-digest-algorithms</span></pre>
<span id=golf_copied_452 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_452' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_452, code_452, golf_copied_452)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
If "binary" clause is used without boolean variable &lt;binary&gt;, or if &lt;binary&gt; evaluates to true, then the &lt;result&gt; is a binary string that may contain null-characters. With the default SHA256, it is 32 bytes in length, while for instance with SHA3-384 it is 48 bytes in length, etc. <br/>
<br/>
Without "binary" clause, or if &lt;binary&gt; evaluates to false, each binary byte of HMAC is converted to two hexadecimal characters ("0"-"9" and "a"-"f"), hence &lt;result&gt; is twice as long as with "binary" clause. <br/>
<div class="vsub"><a id="Examples"></a>Examples</div>
String "result" will have a HMAC value of a given string, an example of which might look like "2d948cc89148ef96fa4f1876e74af4ce984423d355beb12f7fdba5383143bee0"<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_453'>
<span class="Statement"> hmac-string</span> <span class="Constant">&quot;some data&quot;</span><span class="Identifier"> key</span> <span class="Constant">&quot;mykey&quot;</span><span class="Type"> to</span> result</pre>
<span id=golf_copied_453 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_453' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_453, code_453, golf_copied_453)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Using a different digest:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_454'>
<span class="Statement"> hmac-string</span> <span class="Constant">&quot;some data&quot;</span><span class="Identifier"> key</span> <span class="Constant">&quot;mykey&quot;</span><span class="Type"> to</span> result<span class="Identifier"> digest</span> <span class="Constant">&quot;sha3-384&quot;</span></pre>
<span id=golf_copied_454 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_454' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_454, code_454, golf_copied_454)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Producing a binary value instead of a null-terminated hexadecimal string, and then making a Base64 string out of it:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_455'>
<span class="Statement"> hmac-string</span> <span class="Constant">&quot;some data&quot;</span><span class="Identifier"> key</span> <span class="Constant">&quot;mykey&quot;</span><span class="Identifier"> digest</span> <span class="Constant">&quot;SHA256&quot;</span><span class="Type"> to</span> result<span class="Identifier"> binary</span>
<span class="Statement"> encode-base64</span> result<span class="Type"> to</span> bresult</pre>
<span id=golf_copied_455 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_455' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_455, code_455, golf_copied_455)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<!--BEFSAL13--><div class="vsub"><a id="See also"></a>See also</div>
 <a name='Encryption'></a><span style="font-weight:bold;">Encryption</span><br/>
<a href='/decrypt-data.html'>decrypt-data</a> &nbsp;<br/>
<a href='/derive-key.html'>derive-key</a> &nbsp;<br/>
<a href='/encrypt-data.html'>encrypt-data</a> &nbsp;<br/>
<a href='/hash-string.html'>hash-string</a> &nbsp;<br/>
<a href='/hmac-string.html'>hmac-string</a> &nbsp;<br/>
<a href='/random-crypto.html'>random-crypto</a> &nbsp;<br/>
<a href='/random-string.html'>random-string</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='/documentation.html'>documentation</a><br/>
<a id='if-defined.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:right;background-color:white;'><a href='https://golf-lang.com' style='border-bottom:0px'><img src='https://golf-lang.com/golf.png'/></a></div><div class='vhub' style='margin-top:10px;'>&nbsp;If defined</div><hr/><span style="font-weight:bold;">Purpose</span>: Conditional compilation.<br/>
<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_456'>
<span class="Statement"> if-defined</span> &lt;symbol&gt;
     &lt;any code&gt;
<span class="Statement"> end-defined</span>

<span class="Statement"> if-not-defined</span> &lt;symbol&gt;
     &lt;any code&gt;
<span class="Statement"> end-defined</span></pre>
<span id=golf_copied_456 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_456' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_456, code_456, golf_copied_456)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
if-defined will cause &lt;any code&gt; to be compiled if &lt;symbol&gt; is defined (see "--cflag" option in gg). If &lt;symbol&gt; is not defined, then &lt;any code&gt; is not compiled at all.<br/>
<br/>
if-not-defined will cause &lt;any code&gt; to be compiled if &lt;symbol&gt; is not defined (see "--cflag" option in gg). If &lt;symbol&gt; is defined, then &lt;any code&gt; is compiled.<br/>
<div class="vsub"><a id="Examples"></a>Examples</div>
The following code will have a different output depending on how is application compiled:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_459'>
<span class="Statement"> if-defined</span> DEF1
<span class="Statement">     @</span>Defined
<span class="Statement"> end-defined</span>
<span class="Statement"> if-not-defined</span> DEF1
<span class="Statement">     @</span>Not defined
<span class="Statement"> end-defined</span></pre>
<span id=golf_copied_459 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_459' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_459, code_459, golf_copied_459)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
If compiled with:<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_458'>
gg <span class="Special">-q</span></pre>
<span id=golf_copied_458 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_458' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_458, code_458, golf_copied_458)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
then the output is:<br/>
<div class='ncode' style='position:relative;padding-right:16px;'>
<pre id='code_457'>
Not defined</pre>
<span id=golf_copied_457 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_457' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_457, code_457, golf_copied_457)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
If compiled with:<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_461'>
gg <span class="Special">-q</span> <span class="Special">--cflag</span><span class="Statement">=</span><span class="Statement">&quot;</span><span class="Constant">-DDEF1</span><span class="Statement">&quot;</span></pre>
<span id=golf_copied_461 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_461' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_461, code_461, golf_copied_461)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
then the output is:<br/>
<div class='ncode' style='position:relative;padding-right:16px;'>
<pre id='code_460'>
Defined</pre>
<span id=golf_copied_460 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_460' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_460, code_460, golf_copied_460)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<!--BEFSAL13--><div class="vsub"><a id="See also"></a>See also</div>
 <a name='Program flow'></a><span style="font-weight:bold;">Program flow</span><br/>
<a href='/break-loop.html'>break-loop</a> &nbsp;<br/>
<a href='/code-blocks.html'>code-blocks</a> &nbsp;<br/>
<a href='/continue-loop.html'>continue-loop</a> &nbsp;<br/>
<a href='/do-once.html'>do-once</a> &nbsp;<br/>
<a href='/exit-handler.html'>exit-handler</a> &nbsp;<br/>
<a href='/if-defined.html'>if-defined</a> &nbsp;<br/>
<a href='/if-true.html'>if-true</a> &nbsp;<br/>
<a href='/return-handler.html'>return-handler</a> &nbsp;<br/>
<a href='/set-bool.html'>set-bool</a> &nbsp;<br/>
<a href='/start-loop.html'>start-loop</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='/documentation.html'>documentation</a><br/>
<a id='if-true.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:right;background-color:white;'><a href='https://golf-lang.com' style='border-bottom:0px'><img src='https://golf-lang.com/golf.png'/></a></div><div class='vhub' style='margin-top:10px;'>&nbsp;If true</div><hr/><span style="font-weight:bold;">Purpose</span>: Conditional statement.<br/>
<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_462'>
<span class="Statement"> if-true</span> &lt;condition&gt;
     &lt;any code&gt;
 [
<span class="Statement"> else-if</span> &lt;condition&gt;
     &lt;any code&gt;
 ] ...
 [
<span class="Statement"> else-if</span>
     &lt;any code&gt;
 ]
<span class="Statement"> end-if</span></pre>
<span id=golf_copied_462 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_462' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_462, code_462, golf_copied_462)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
where &lt;condition&gt; is:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_463'>
 ( &lt;comparison&gt; [<span class="Identifier"> and</span> &lt;comparison&gt; [<span class="Statement"> ,</span> ... ] ] )
 |
 ( &lt;comparison&gt; [<span class="Identifier"> or</span> &lt;comparison&gt; [<span class="Statement"> ,</span> ... ] ] )</pre>
<span id=golf_copied_463 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_463' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_463, code_463, golf_copied_463)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
&lt;comparison&gt; is for strings:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_464'>
 &lt;string&gt; \
    (<span class="Identifier"> equal</span> |<span class="Identifier"> not-equal</span> | \
   <span class="Identifier"> lesser-than</span> |<span class="Identifier"> lesser-equal</span> | \
   <span class="Identifier"> greater-than</span> |<span class="Identifier"> greater-equal</span> | \
   <span class="Identifier"> contain</span> |<span class="Identifier"> not-contain</span> ) \
 &lt;check string&gt; \
  [<span class="Identifier"> case-insensitive</span> ] [<span class="Statement"> length</span> &lt;length&gt; ]</pre>
<span id=golf_copied_464 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_464' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_464, code_464, golf_copied_464)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
&lt;comparison&gt; is for numbers<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_465'>
 &lt;number&gt; \
    (<span class="Identifier"> equal</span> |<span class="Identifier"> not-equal</span> | \
   <span class="Identifier"> lesser-than</span> |<span class="Identifier"> lesser-equal</span> | \
   <span class="Identifier"> greater-than</span> |<span class="Identifier"> greater-equal</span> | \
   <span class="Identifier"> every</span> |<span class="Identifier"> not-every</span> ) \
 &lt;check number&gt;  ...</pre>
<span id=golf_copied_465 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_465' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_465, code_465, golf_copied_465)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
&lt;comparison&gt; is for booleans:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_466'>
 &lt;boolean&gt; (<span class="Identifier"> equal</span> |<span class="Identifier"> not-equal</span> ) &lt;check boolean&gt;  ...</pre>
<span id=golf_copied_466 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_466' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_466, code_466, golf_copied_466)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
if-true will evaluate a &lt;condition&gt; and execute code associated with the match. If the &lt;condition&gt; in if-true or "else-if" succeeds, then &lt;any code&gt; below is executed. If it is not a match, then the next condition in "else-if" statement is evaluated, one by one until a match is found and code under that statement executes. If no match is found, then code under "else-if" statement without a &lt;condition&gt; executes (if specified), otherwise program control passes outside of "end-if".<br/>
<br/>
A &lt;condition&gt; is made of one or more &lt;comparison&gt;s, connected by either "and" or "or" clause, but not both in the same &lt;condition&gt;. "and" clause uses logical AND to connect &lt;comparisons&gt; and it succeeds if all &lt;comparison&gt;s succeed. "or" clause uses logical OR to connect &lt;comparisons&gt; and it succeeds if at least one &lt;comparison&gt;s succeeds (if such a &lt;comparison&gt; is found, the following ones are not checked). <br/>
<br/>
Each &lt;comparison&gt; examines either a string, a number or a boolean variable. <br/>
<div class="vsub"><a id="String variable in a comparison"></a>String variable in a comparison</div>
If "equal", "not-equal", "lesser-than", "lesser-equal", "greater-than" or "greater-equal" clause is used, a comparison succeeds if &lt;string&gt; is equal, not equal, lesser, lesser or equal, greater or greater-or-equal than &lt;check string&gt;, respectively. If "contain" or "not-contain" clause is used, a comparison succeeds if &lt;string&gt; is contained or not contained in &lt;check string&gt;, respectively. If "case-insensitive" clause is used, a comparison is performed without case sensitivity. If "length" clause is used, only the first &lt;length&gt; bytes of the strings are compared.<br/>
<div class="vsub"><a id="Number variable in a comparison"></a>Number variable in a comparison</div>
If "equal", "not-equal", "lesser-than", "lesser-equal", "greater-than" or "greater-equal" clause is used, a comparison succeeds if &lt;number&gt; is equal, not equal, lesser, lesser or equal, greater or greater-or-equal than &lt;check number&gt;, respectively. <br/>
<br/>
If "every" is used, then the comparison succeeds if the modulo of &lt;number&gt; and &lt;check number&gt; is 0 - this is useful in executing some code every N times but not the ones in between; with "not-every" the comparison success is this modulo is not 0 which is useful to execute code all the times except every Nth.<br/>
<div class="vsub"><a id="Boolean variable in a comparison"></a>Boolean variable in a comparison</div>
If "equal" or "not-equal" clause is used, a comparison succeeds if &lt;boolean&gt; is equal or not equal than &lt;check boolean&gt;, respectively. <br/>
<div class="vsub"><a id="else-if without a &lt;condition&gt;"></a>else-if without a &lt;condition&gt;</div>
With a given if-true, there can be only one "else-if" statement without a condition, and it must be the last one. <br/>
<div class="vsub"><a id="Nesting"></a>Nesting</div>
if-true can be nested, which can be up to 30 levels deep.<br/>
<div class="vsub"><a id="Examples"></a>Examples</div>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_467'>
<span class="Statement"> %%</span> /if-test<span class="Identifier"> public</span>
<span class="Statement">     get-param</span> inp

<span class="Statement">     if-true</span> inp<span class="Identifier"> equal</span> <span class="Constant">&quot;1&quot;</span>
<span class="Statement">         @</span>Found &quot;<span class="Constant">1</span>&quot; in input
<span class="Statement">     else-if</span> inp<span class="Identifier"> equal</span> <span class="Constant">&quot;2&quot;</span> <span class="Identifier"> or</span> inp<span class="Identifier"> equal</span> <span class="Constant">&quot;3&quot;</span>
<span class="Statement">         @</span>Found &quot;<span class="Constant">2</span>&quot; or &quot;<span class="Constant">3</span>&quot; in input

<span class="Statement">         get-param</span> inp_num
<span class="Statement">         string-number</span> inp_num<span class="Type"> to</span> num
<span class="Statement">         if-true</span> num<span class="Identifier"> equal</span> <span class="Constant">4</span>
<span class="Statement">             @</span>Found <span class="Constant">4</span> in more input
<span class="Statement">         else-if</span> num<span class="Identifier"> equal</span> <span class="Constant">5</span> <span class="Identifier"> and</span>  inp<span class="Identifier"> equal</span> <span class="Constant">&quot;4&quot;</span>
<span class="Statement">             @</span>Found <span class="Constant">5</span> in more input and &quot;<span class="Constant">4</span>&quot; in input
<span class="Statement">         else-if</span>
<span class="Statement">             @</span>Something else
<span class="Statement">         end-if</span>

<span class="Statement">     else-if</span>
<span class="Statement">         @</span>Found something else
<span class="Statement">     end-if</span>
<span class="Statement"> %%</span></pre>
<span id=golf_copied_467 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_467' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_467, code_467, golf_copied_467)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<!--BEFSAL13--><div class="vsub"><a id="See also"></a>See also</div>
 <a name='Program flow'></a><span style="font-weight:bold;">Program flow</span><br/>
<a href='/break-loop.html'>break-loop</a> &nbsp;<br/>
<a href='/code-blocks.html'>code-blocks</a> &nbsp;<br/>
<a href='/continue-loop.html'>continue-loop</a> &nbsp;<br/>
<a href='/do-once.html'>do-once</a> &nbsp;<br/>
<a href='/exit-handler.html'>exit-handler</a> &nbsp;<br/>
<a href='/if-defined.html'>if-defined</a> &nbsp;<br/>
<a href='/if-true.html'>if-true</a> &nbsp;<br/>
<a href='/return-handler.html'>return-handler</a> &nbsp;<br/>
<a href='/set-bool.html'>set-bool</a> &nbsp;<br/>
<a href='/start-loop.html'>start-loop</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='/documentation.html'>documentation</a><br/>
<a id='inline-code.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:right;background-color:white;'><a href='https://golf-lang.com' style='border-bottom:0px'><img src='https://golf-lang.com/golf.png'/></a></div><div class='vhub' style='margin-top:10px;'>&nbsp;Inline code</div><hr/><span style="font-weight:bold;">Purpose</span>: Inline Golf code in an output statement.<br/>
<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_468'>
 &lt;&lt;gliim code&gt;&gt;</pre>
<span id=golf_copied_468 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_468' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_468, code_468, golf_copied_468)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
You can write Golf statements within an <a href='/output-statement.html'>output-statement</a> by using them between &lt;&lt; and &gt;&gt; delimiters. <br/>
<br/>
The following statements can be inlined: <a href='/p-path.html'>p-path</a>,<a href='/p-out.html'>p-out</a>, <a href='/p-web.html'>p-web</a>, <a href='/p-url.html'>p-url</a>, <a href='/pf-out.html'>pf-out</a>, <a href='/pf-web.html'>pf-web</a>, <a href='/pf-url.html'>pf-url</a>, <a href='/p-num.html'>p-num</a>, <a href='/current-row.html'>current-row</a>, <a href='/number-string.html'>number-string</a>, <a href='/string-length.html'>string-length</a>, <a href='/call-handler.html'>call-handler</a>.<br/>
<div class="vsub"><a id="Examples"></a>Examples</div>
<a href='/p-out.html'>p-out</a> statement displays a string, and in the following code it's used to display a result within an <a href='/output-statement.html'>output-statement</a> (i.e. within "@" statement):<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_469'>
<span class="Statement"> run-query</span> =<span class="Constant">&quot;select firstName, lastName from people&quot;</span><span class="Type"> output</span> firstName, lastName
<span class="Statement">    @</span>&lt;tr&gt;
<span class="Statement">    @</span>    &lt;td&gt;
<span class="Statement">    @</span>        First name is <span class="Statement">&lt;&lt;p-out</span>  firstName<span class="Statement">&gt;&gt;</span>
<span class="Statement">    @</span>    &lt;/td&gt;
<span class="Statement">    @</span>    &lt;td&gt;
<span class="Statement">    @</span>        Last name is <span class="Statement">&lt;&lt;p-out</span> lastName<span class="Statement">&gt;&gt;</span>
<span class="Statement">    @</span>    &lt;/td&gt;
<span class="Statement">    @</span>&lt;/tr&gt;
<span class="Statement"> end-query</span></pre>
<span id=golf_copied_469 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_469' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_469, code_469, golf_copied_469)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
In the code below, "some_req" is a request handler that outputs some text, and it's used inline to output "Hello world":<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_470'>
<span class="Statement"> @</span>Hello <span class="Statement">&lt;&lt;call-handler</span> <span class="Constant">&quot;/some-req&quot;</span><span class="Statement">&gt;&gt;</span></pre>
<span id=golf_copied_470 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_470' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_470, code_470, golf_copied_470)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<a href='/call-handler.html'>call-handler</a> "some-req" would simply output "world":<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_471'>
<span class="Statement"> %%</span> /some-req<span class="Identifier"> public</span>
<span class="Statement">     @</span>world
<span class="Statement"> %%</span></pre>
<span id=golf_copied_471 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_471' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_471, code_471, golf_copied_471)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
A <a href='/write-string.html'>write-string</a> is typically used with output statements; in this case we print the value of another string, resulting in "There is 42 minutes left!":<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_472'>
<span class="Statement"> set-string</span> mins=<span class="Constant">&quot;42&quot;</span>
<span class="Statement"> ((</span> my_string
<span class="Statement"> @</span>There is <span class="Statement">&lt;&lt;p-out</span> mins<span class="Statement">&gt;&gt;</span> minutes left!
<span class="Statement"> ))</span></pre>
<span id=golf_copied_472 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_472' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_472, code_472, golf_copied_472)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<!--BEFSAL13--><div class="vsub"><a id="See also"></a>See also</div>
 <a name='Language'></a><span style="font-weight:bold;">Language</span><br/>
<a href='/inline-code.html'>inline-code</a> &nbsp;<br/>
<a href='/statements.html'>statements</a> &nbsp;<br/>
<a href='/syntax-highlighting.html'>syntax-highlighting</a> &nbsp;<br/>
<a href='/unused-var.html'>unused-var</a> &nbsp;<br/>
<a href='/variable-scope.html'>variable-scope</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='/documentation.html'>documentation</a><br/>
<a id='install-arch.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:right;background-color:white;'><a href='https://golf-lang.com' style='border-bottom:0px'><img src='https://golf-lang.com/golf.png'/></a></div><div class='vhub' style='margin-top:10px;'>&nbsp;Install arch</div><hr/><div class="vsub"><a id="Install Golf on Arch"></a>Install Golf on Arch</div>
For Arch-like distributions (like Arch or Manjaro):<br/>
<span style="font-weight:bold;">- Install git</span><br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_473'>
sudo pacman <span class="Special">--noconfirm</span> <span class="Special">-Sy</span> <span class="Special">--overwrite</span> <span class="Statement">&quot;</span><span class="Constant">*</span><span class="Statement">&quot;</span> git</pre>
<span id=golf_copied_473 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_473' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_473, code_473, golf_copied_473)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<span style="font-weight:bold;">- Download Golf</span><br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_474'>
git clone <a href="https://github.com/golf-lang/golf.git">https://github.com/golf-lang/golf.git</a>
<span class="Statement">cd</span> golf
git checkout <span class="Constant">191</span></pre>
<span id=golf_copied_474 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_474' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_474, code_474, golf_copied_474)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<span style="font-weight:bold;">- Install dependencies</span><br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_475'>
sudo pacman <span class="Special">--noconfirm</span> <span class="Special">-Sy</span> <span class="Special">--overwrite</span> <span class="Statement">&quot;</span><span class="Constant">*</span><span class="Statement">&quot;</span> make gcc openssl curl tar pkg-config libxml2 <span class="Statement">'</span><span class="Constant">mariadb-connector-c</span><span class="Statement">'</span> fcgi <span class="Statement">'</span><span class="Constant">postgresql-libs</span><span class="Statement">'</span> sqlite3 pcre2</pre>
<span id=golf_copied_475 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_475' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_475, code_475, golf_copied_475)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<span style="font-weight:bold;">- Build Golf</span><br/>
Use DI=1 to build debug version, leave it as is for production:<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_476'>
make clean
make <span class="Identifier">DI</span>=<span class="Constant">0</span>
sudo make install</pre>
<span id=golf_copied_476 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_476' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_476, code_476, golf_copied_476)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<!--BEFSAL13--><div class="vsub"><a id="See also"></a>See also</div>
 <a name='Download and build'></a><span style="font-weight:bold;">Download and build</span><br/>
<a href='/install.html'>install</a> &nbsp;<br/>
<a href='/install-arch.html'>install-arch</a> &nbsp;<br/>
<a href='/install-debian.html'>install-debian</a> &nbsp;<br/>
<a href='/install-fedora.html'>install-fedora</a> &nbsp;<br/>
<a href='/install-opensuse.html'>install-opensuse</a> &nbsp;<br/>
<a href='/uninstall.html'>uninstall</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='/documentation.html'>documentation</a><br/>
<a id='install-debian.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:right;background-color:white;'><a href='https://golf-lang.com' style='border-bottom:0px'><img src='https://golf-lang.com/golf.png'/></a></div><div class='vhub' style='margin-top:10px;'>&nbsp;Install debian</div><hr/><div class="vsub"><a id="Install Golf on Debian"></a>Install Golf on Debian</div>
For Debian-like distributions (like Ubuntu or LinuxMint):<br/>
<span style="font-weight:bold;">- Install git</span><br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_477'>
sudo apt update
sudo apt <span class="Special">-y</span> install git</pre>
<span id=golf_copied_477 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_477' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_477, code_477, golf_copied_477)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<span style="font-weight:bold;">- Download Golf</span><br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_478'>
git clone <a href="https://github.com/golf-lang/golf.git">https://github.com/golf-lang/golf.git</a>
<span class="Statement">cd</span> golf
git checkout <span class="Constant">191</span></pre>
<span id=golf_copied_478 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_478' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_478, code_478, golf_copied_478)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<span style="font-weight:bold;">- Install dependencies</span><br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_479'>
sudo apt <span class="Special">-y</span> install make gcc libssl-dev curl tar pkg-config libxml2-dev libcurl4 libcurl4-openssl-dev libmariadb-dev zlib1g-dev libfcgi-bin libfcgi-dev libpq-dev libsqlite3-dev libpcre2-dev</pre>
<span id=golf_copied_479 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_479' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_479, code_479, golf_copied_479)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<span style="font-weight:bold;">- Build Golf</span><br/>
Use DI=1 to build debug version, leave it as is for production:<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_480'>
make clean
make <span class="Identifier">DI</span>=<span class="Constant">0</span>
sudo make install</pre>
<span id=golf_copied_480 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_480' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_480, code_480, golf_copied_480)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<!--BEFSAL13--><div class="vsub"><a id="See also"></a>See also</div>
 <a name='Download and build'></a><span style="font-weight:bold;">Download and build</span><br/>
<a href='/install.html'>install</a> &nbsp;<br/>
<a href='/install-arch.html'>install-arch</a> &nbsp;<br/>
<a href='/install-debian.html'>install-debian</a> &nbsp;<br/>
<a href='/install-fedora.html'>install-fedora</a> &nbsp;<br/>
<a href='/install-opensuse.html'>install-opensuse</a> &nbsp;<br/>
<a href='/uninstall.html'>uninstall</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='/documentation.html'>documentation</a><br/>
<a id='install-fedora.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:right;background-color:white;'><a href='https://golf-lang.com' style='border-bottom:0px'><img src='https://golf-lang.com/golf.png'/></a></div><div class='vhub' style='margin-top:10px;'>&nbsp;Install fedora</div><hr/><div class="vsub"><a id="Install Golf on Fedora"></a>Install Golf on Fedora</div>
For Fedora-like distributions (like Rocky or RedHat):<br/>
<span style="font-weight:bold;">- Install git</span><br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_481'>
sudo dnf <span class="Special">-y</span> install git</pre>
<span id=golf_copied_481 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_481' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_481, code_481, golf_copied_481)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<span style="font-weight:bold;">- Download Golf</span><br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_482'>
git clone <a href="https://github.com/golf-lang/golf.git">https://github.com/golf-lang/golf.git</a>
<span class="Statement">cd</span> golf
git checkout <span class="Constant">191</span></pre>
<span id=golf_copied_482 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_482' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_482, code_482, golf_copied_482)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<span style="font-weight:bold;">- Install dependencies</span><br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_483'>
sudo dnf <span class="Special">-y</span> install <a href="https://dl.fedoraproject.org/pub/epel/epel-release-latest-9.noarch.rpm">https://dl.fedoraproject.org/pub/epel/epel-release-latest-9.noarch.rpm</a>
sudo dnf <span class="Special">-y</span> install make gcc openssl-devel curl tar pkg-config libxml2-devel libcurl-devel pcre2-devel fcgi-devel fcgi libpq-devel policycoreutils policycoreutils-devel libselinux-utils sqlite-devel mariadb-connector-c-devel</pre>
<span id=golf_copied_483 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_483' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_483, code_483, golf_copied_483)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<span style="font-weight:bold;">- Build Golf</span><br/>
Use DI=1 to build debug version, leave it as is for production:<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_484'>
make clean
make <span class="Identifier">DI</span>=<span class="Constant">0</span>
sudo make install</pre>
<span id=golf_copied_484 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_484' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_484, code_484, golf_copied_484)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<!--BEFSAL13--><div class="vsub"><a id="See also"></a>See also</div>
 <a name='Download and build'></a><span style="font-weight:bold;">Download and build</span><br/>
<a href='/install.html'>install</a> &nbsp;<br/>
<a href='/install-arch.html'>install-arch</a> &nbsp;<br/>
<a href='/install-debian.html'>install-debian</a> &nbsp;<br/>
<a href='/install-fedora.html'>install-fedora</a> &nbsp;<br/>
<a href='/install-opensuse.html'>install-opensuse</a> &nbsp;<br/>
<a href='/uninstall.html'>uninstall</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='/documentation.html'>documentation</a><br/>
<a id='install.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:right;background-color:white;'><a href='https://golf-lang.com' style='border-bottom:0px'><img src='https://golf-lang.com/golf.png'/></a></div><div class='vhub' style='margin-top:10px;'>&nbsp;Install</div><hr/><div class="vsub"><a id="Installing and un-installing Golf"></a>Installing and un-installing Golf</div>
Use the latest release for the distro you're running:<br/>
<ul><li><a href='/install-debian.html'>install-debian</a><br/>
</li><li><a href='/install-fedora.html'>install-fedora</a><br/>
</li><li><a href='/install-arch.html'>install-arch</a><br/>
</li><li><a href='/install-opensuse.html'>install-opensuse</a></li></ul>
To uninstall Golf, click <a href='/uninstall.html'>uninstall</a>.<br/>
<!--BEFSAL13--><div class="vsub"><a id="See also"></a>See also</div>
 <a name='Download and build'></a><span style="font-weight:bold;">Download and build</span><br/>
<a href='/install.html'>install</a> &nbsp;<br/>
<a href='/install-arch.html'>install-arch</a> &nbsp;<br/>
<a href='/install-debian.html'>install-debian</a> &nbsp;<br/>
<a href='/install-fedora.html'>install-fedora</a> &nbsp;<br/>
<a href='/install-opensuse.html'>install-opensuse</a> &nbsp;<br/>
<a href='/uninstall.html'>uninstall</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='/documentation.html'>documentation</a><br/>
<a id='install-opensuse.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:right;background-color:white;'><a href='https://golf-lang.com' style='border-bottom:0px'><img src='https://golf-lang.com/golf.png'/></a></div><div class='vhub' style='margin-top:10px;'>&nbsp;Install opensuse</div><hr/><div class="vsub"><a id="Install Golf on OpenSUSE"></a>Install Golf on OpenSUSE</div>
For OpenSUSE-like distributions:<br/>
<span style="font-weight:bold;">- Install git</span><br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_485'>
sudo zypper <span class="Special">-n</span> install git</pre>
<span id=golf_copied_485 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_485' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_485, code_485, golf_copied_485)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<span style="font-weight:bold;">- Download Golf</span><br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_486'>
git clone <a href="https://github.com/golf-lang/golf.git">https://github.com/golf-lang/golf.git</a>
<span class="Statement">cd</span> golf
git checkout <span class="Constant">191</span></pre>
<span id=golf_copied_486 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_486' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_486, code_486, golf_copied_486)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<span style="font-weight:bold;">- Install dependencies</span><br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_487'>
sudo zypper <span class="Special">-n</span> install make gcc openssl-devel curl tar pkg-config libxml2-devel libcurl-devel pcre2-devel libmariadb-devel FastCGI FastCGI-devel postgresql-devel sqlite3-devel</pre>
<span id=golf_copied_487 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_487' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_487, code_487, golf_copied_487)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<span style="font-weight:bold;">- Build Golf</span><br/>
Use DI=1 to build debug version, leave it as is for production:<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_488'>
make clean
make <span class="Identifier">DI</span>=<span class="Constant">0</span>
sudo make install</pre>
<span id=golf_copied_488 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_488' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_488, code_488, golf_copied_488)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<!--BEFSAL13--><div class="vsub"><a id="See also"></a>See also</div>
 <a name='Download and build'></a><span style="font-weight:bold;">Download and build</span><br/>
<a href='/install.html'>install</a> &nbsp;<br/>
<a href='/install-arch.html'>install-arch</a> &nbsp;<br/>
<a href='/install-debian.html'>install-debian</a> &nbsp;<br/>
<a href='/install-fedora.html'>install-fedora</a> &nbsp;<br/>
<a href='/install-opensuse.html'>install-opensuse</a> &nbsp;<br/>
<a href='/uninstall.html'>uninstall</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='/documentation.html'>documentation</a><br/>
<a id='json-doc.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:right;background-color:white;'><a href='https://golf-lang.com' style='border-bottom:0px'><img src='https://golf-lang.com/golf.png'/></a></div><div class='vhub' style='margin-top:10px;'>&nbsp;Json doc</div><hr/><span style="font-weight:bold;">Purpose</span>: Parse JSON text.<br/>
<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_489'>
<span class="Statement"> json-doc</span> &lt;text&gt;<span class="Type"> to</span> &lt;json&gt; \
     [<span class="Type"> status</span> &lt;status&gt; ] [<span class="Identifier"> length</span> &lt;length&gt; ] [<span class="Identifier"> noencode</span> ] [<span class="Identifier"> no-enum</span> ] \
     [<span class="Type"> error-text</span> &lt;status&gt; ] [<span class="Type"> error-position</span> &lt;status&gt; ] \

<span class="Statement"> json-doc</span> <span class="Identifier"> delete</span> &lt;json&gt;</pre>
<span id=golf_copied_489 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_489' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_489, code_489, golf_copied_489)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
json-doc will parse JSON &lt;text&gt; into &lt;json&gt; variable, which can be used with <a href='/read-json.html'>read-json</a> to get the data.<br/>
<br/>
The length of &lt;text&gt; may be specified with "length" clause in &lt;length&gt; variable, or if not, it will be the string length of &lt;text&gt;.<br/>
<br/>
The "status" clause specifies the return &lt;status&gt; number, which is GG_OKAY if successful or GG_ERR_JSON if there is an error. The number &lt;error position&gt; in "error-position" clause is the byte position in &lt;text&gt; where error was found (starting with "0"), in which case &lt;error text&gt; in "error-text" clause is the error message.<br/>
<br/>
"noencode" clause will not encode strings, i.e. convert from JSON Unicode strings to UTF8, nor will it perform any validity checks on strings. This may be useful as a performance boost, however it is not recommended in general.<br/>
<br/>
"no-enum" clause will not include indexing of arrays in normalized names (with "[..]"), see <a href='/read-json.html'>read-json</a>. This is useful if you want to check the path of each data element, and not worry about counting them; this happens often when using JSON in a structured way to transfer arrays when data elements repeat in a predictable fashion. Parsing of JSON is also faster with "no-enum".<br/>
<br/>
The maximum depth of nested structures in JSON document (i.e. objects and arrays) is 32, and the maximum length of normalized leaf node name is 1024 (see <a href='/read-json.html'>read-json</a> for more on normalized names). There is no limit on document size.<br/>
<div class="vsub"><a id="Examples"></a>Examples</div>
Parse the following JSON document and display all keys and values from it. You can use them as they come along, or store them into <a href='/new-hash.html'>new-hash</a> or <a href='/new-tree.html'>new-tree</a> for instance for searching of large documents. This also demonstrates usage of UTF8 characters:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_491'>

 <span class="Comment">// JSON to parse</span>
<span class="Statement"> set-string</span> jd<span class="Identifier"> unquoted</span> = {<span class="Constant">&quot;menu&quot;</span>:\
     {<span class="Constant">&quot;id&quot;</span>: <span class="Constant">&quot;file&quot;</span>,\
     <span class="Constant">&quot;value&quot;</span>: <span class="Constant">23091</span>,\
     <span class="Constant">&quot;active&quot;</span>: <span class="Constant">false</span>,\
     <span class="Constant">&quot;popup&quot;</span>:\
         {<span class="Constant">&quot;menuitem&quot;</span>:\
             [{<span class="Constant">&quot;value&quot;</span>: <span class="Constant">&quot;New&quot;</span>, <span class="Constant">&quot;onclick&quot;</span>: <span class="Constant">&quot;CreateNewDoc with</span><span class="Special">\uD834\uDD1E</span><span class="Constant">music&quot;</span>},\
             {<span class="Constant">&quot;value&quot;</span>: <span class="Constant">&quot;Open&quot;</span>, <span class="Constant">&quot;onclick&quot;</span>: <span class="Constant">&quot;OpenDoc() with </span><span class="Special">\uD834\uDD1E\uD834\uDD1E</span><span class="Constant">&quot;</span>},\
             {<span class="Constant">&quot;value&quot;</span>: <span class="Constant">&quot;Close&quot;</span>, <span class="Constant">&quot;onclick&quot;</span>: <span class="Constant">&quot;</span><span class="Special">\uD834\uDD1E</span><span class="Constant">CloseDoc()&quot;</span>}\
             ]\
         }\
     }\
 }

 <span class="Comment">// Parse JSON</span>
<span class="Statement"> json-doc</span> jd<span class="Type"> status</span> st<span class="Type"> error-text</span> et<span class="Type"> error-position</span> ep<span class="Type"> to</span> nj

 <span class="Comment">// Check parsing okay, if not display error details</span>
<span class="Statement"> if-true</span> st<span class="Identifier"> not-equal</span> GG_OKAY
<span class="Statement">     @</span>Error [<span class="Statement">&lt;&lt;p-out</span> et<span class="Statement">&gt;&gt;</span>] at [<span class="Statement">&lt;&lt;p-num</span> ep<span class="Statement">&gt;&gt;</span>]
<span class="Statement">     exit-handler</span> -<span class="Constant">1</span>
<span class="Statement"> end-if</span>

 <span class="Comment">// Display all data elements in order from top to bottom</span>
<span class="Statement"> start-loop</span>
<span class="Statement">     read-json</span> nj<span class="Type"> key</span> k<span class="Type"> value</span> v<span class="Type"> type</span> t<span class="Identifier"> next</span>
<span class="Statement">     if-true</span> t<span class="Identifier"> equal</span> GG_JSON_TYPE_NONE
<span class="Statement">         break-loop</span>
<span class="Statement">     end-if</span>
<span class="Statement">     @</span>Key [<span class="Statement">&lt;&lt;p-out</span> k<span class="Statement">&gt;&gt;</span>]
<span class="Statement">     @</span>Value [<span class="Statement">&lt;&lt;p-out</span> v<span class="Statement">&gt;&gt;</span>]
<span class="Statement">     @</span>Type [<span class="Statement">&lt;&lt;p-num</span> t<span class="Statement">&gt;&gt;</span>]
<span class="Statement">     @</span>--------
<span class="Statement"> end-loop</span>
<span class="Statement"> @</span>

 <span class="Comment">// Delete JSON document</span>
<span class="Statement"> json-doc</span><span class="Identifier"> delete</span> nj</pre>
<span id=golf_copied_491 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_491' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_491, code_491, golf_copied_491)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
The output would be:<br/>
<div class='ncode' style='position:relative;padding-right:16px;'>
<pre id='code_490'>
Key [&quot;menu&quot;.&quot;id&quot;]
Value [file]
Type [0]
--------
Key [&quot;menu&quot;.&quot;value&quot;]
Value [23091]
Type [1]
--------
Key [&quot;menu&quot;.&quot;active&quot;]
Value [false]
Type [3]
--------
Key [&quot;menu&quot;.&quot;popup&quot;.&quot;menuitem&quot;[0].&quot;value&quot;]
Value [New]
Type [0]
--------
Key [&quot;menu&quot;.&quot;popup&quot;.&quot;menuitem&quot;[0].&quot;onclick&quot;]
Value [CreateNewDoc withmusic]
Type [0]
--------
Key [&quot;menu&quot;.&quot;popup&quot;.&quot;menuitem&quot;[1].&quot;value&quot;]
Value [Open]
Type [0]
--------
Key [&quot;menu&quot;.&quot;popup&quot;.&quot;menuitem&quot;[1].&quot;onclick&quot;]
Value [OpenDoc() with ]
Type [0]
--------
Key [&quot;menu&quot;.&quot;popup&quot;.&quot;menuitem&quot;[2].&quot;value&quot;]
Value [Close]
Type [0]
--------
Key [&quot;menu&quot;.&quot;popup&quot;.&quot;menuitem&quot;[2].&quot;onclick&quot;]
Value [CloseDoc()]
Type [0]
--------</pre>
<span id=golf_copied_490 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_490' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_490, code_490, golf_copied_490)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Note that if "no-enum" were used in json-doc, then all keys with arrays would not have "[..]", for instance the very last key above would be "menu"."popup"."menuitem"."onclick", i.e. there would be no indexing of arrays.<br/>
<!--BEFSAL13--><div class="vsub"><a id="See also"></a>See also</div>
 <a name='JSON parsing'></a><span style="font-weight:bold;">JSON parsing</span><br/>
<a href='/json-doc.html'>json-doc</a> &nbsp;<br/>
<a href='/read-json.html'>read-json</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='/documentation.html'>documentation</a><br/>
<a id='license.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:right;background-color:white;'><a href='https://golf-lang.com' style='border-bottom:0px'><img src='https://golf-lang.com/golf.png'/></a></div><div class='vhub' style='margin-top:10px;'>&nbsp;License</div><hr/><div class="vsub"><a id="Licensing and copyright"></a>Licensing and copyright</div>
Golf is Free Open Source software licensed under <a href='https://www.apache.org/licenses/LICENSE-2.0'>Apache License 2</a>. <br/>
<br/>
Golf is copyright (c) 2019-now Gliim LLC. <br/>
<div class="vsub"><a id="Discussion"></a>Discussion</div>
The following discussion is not legal advice. <br/>
<br/>
Golf makes use of the following dynamically-linked libraries (with copyright by their respective owners), and only if your application actually uses them:<br/>
<ul><li><a href='https://spdx.org/licenses/LGPL-2.1-or-later.html'>LGPL-licensed</a> MariaDB C connector (<a href='https://mariadb.com/kb/en/mariadb-connector-c/'>https://mariadb.com/kb/en/mariadb-connector-c/</a>),<br/>
</li><li><a href='https://spdx.org/licenses/PostgreSQL.html'>Postgres-licensed</a> Postgres C library (<a href='https://www.postgresql.org/docs/current/libpq.html'>https://www.postgresql.org/docs/current/libpq.html</a>),<br/>
</li><li><a href='https://www.sqlite.org/copyright.html'>SQLite (public domain)</a> SQLite C library (<a href='https://www.sqlite.org/docs.html'>https://www.sqlite.org/docs.html</a>),<br/>
</li><li><a href='https://spdx.org/licenses/curl.html'>Curl-licensed</a> Curl library (<a href='https://curl.se/'>https://curl.se/</a>),<br/>
</li><li><a href='https://www.pcre.org/licence.txt'>BSD-licensed</a> PCRE2 (regex) library (<a href='https://www.pcre.org/'>https://www.pcre.org/</a>),<br/>
</li><li><a href='https://spdx.org/licenses/OpenSSL.html'>OpenSSL-licensed</a> SSL/crypto library (<a href='https://www.openssl.org/'>https://www.openssl.org/</a>).<br/>
</li><li><a href='https://spdx.org/licenses/preview/OML.html'>Open Market Licensed</a> FastCGI library (<a href='https://fastcgi-archives.github.io/FastCGI_Developers_Kit_FastCGI.html'>https://fastcgi-archives.github.io/FastCGI_Developers_Kit_FastCGI.html</a>).</li></ul>
You would install these libraries yourself (they are not distributed with Golf) as dependencies for compiling the source code. Golf does not link to any outside static libraries. <br/>
<br/>
Golf uses FNV-1a hash function, which is released in the public domain (see <a href='https://en.wikipedia.org/wiki/Fowler%E2%80%93Noll%E2%80%93Vo_hash_function'>wikipedia page</a>) and is not patented (see <a href='http://www.isthe.com/chongo/tech/comp/fnv/index.html'>Landon Noll's</a> web page).<br/>
<br/>
Golf source code uses <a href='https://spdx.dev/'>SPDX</a>, an open ISO standard for communicating sofware bill of material information (such as licenses), to improve on open source licensing compliance for companies and communities.<br/>
<!--BEFSAL13--><div class="vsub"><a id="See also"></a>See also</div>
 <a name='License'></a><span style="font-weight:bold;">License</span><br/>
<a href='/license.html'>license</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='/documentation.html'>documentation</a><br/>
<a id='lock-file.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:right;background-color:white;'><a href='https://golf-lang.com' style='border-bottom:0px'><img src='https://golf-lang.com/golf.png'/></a></div><div class='vhub' style='margin-top:10px;'>&nbsp;Lock file</div><hr/><span style="font-weight:bold;">Purpose</span>: Locks file exclusively.<br/>
<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_492'>
<span class="Statement"> lock-file</span> &lt;file path&gt;<span class="Type"> id</span> &lt;lock id&gt;<span class="Type"> status</span> &lt;status&gt;</pre>
<span id=golf_copied_492 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_492' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_492, code_492, golf_copied_492)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
lock-file attempts to create file with the full path of &lt;file path&gt; (deleting it if existed), and exclusively lock it. If successful, no other process can do the same unless current process ends or calls <a href='/unlock-file.html'>unlock-file</a>. This statement is non-blocking, thus you can check in a sleepy loop for success (see <a href='/pause-program.html'>pause-program</a>). <br/>
<br/>
&lt;file path&gt; should be either an existing or non-existing file with a valid file path. If existing, it will be deleted.<br/>
<br/>
&lt;lock id&gt; (in "id" clause) is a file descriptor associated with locked file. <br/>
<br/>
&lt;status&gt; (in "status" clause) represents the status of file locking: GG_OKAY if successfully locked, GG_ERR_FAILED if cannot lock (likely because another process holds a lock), GG_ERR_INVALID if the path of the file is invalid (i.e. if it is empty), GG_ERR_CREATE if lock file cannot be created. <br/>
<br/>
Generally, this statement is used for process control. A process would use lock-file to start working on a job that only one process can do at a time; once done, by using <a href='/unlock-file.html'>unlock-file</a> statement, another process will be able to issue a successful lock-file call. Typically, lock-file is issued in a sleepy loop (see <a href='/pause-program.html'>pause-program</a>), waiting for a resource to be released.<br/>
<br/>
Note that file lock is not carried across children processes (i.e. if your process creates children, such as with <a href='/exec-program.html'>exec-program</a>, then such children must obtain their own lock). In addition, if a process serving a request terminates before the request could issue <a href='/unlock-file.html'>unlock-file</a>, the lock will be automatically released.<br/>
<br/>
You can use any file name (likely choose a name that signifies the purpose of a lock, as long as you have permissions to create it), and create any number of them. This way you can create as many "binary semaphore"-like objects as you like.<br/>
<div class="vsub"><a id="Examples"></a>Examples</div>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_493'>
<span class="Statement"> %%</span> /locktest<span class="Identifier"> public</span>
     <span class="Comment">// Get application home directory</span>
<span class="Statement">     get-app</span><span class="Identifier"> directory</span><span class="Type"> to</span> dir
     <span class="Comment">// Create lock file name</span>
<span class="Statement">     write-string</span> fname
<span class="Statement">     @</span><span class="Statement">&lt;&lt;p-out</span> dir<span class="Statement">&gt;&gt;</span>/.lock
<span class="Statement">     end-write-string</span>
     <span class="Comment">// Enter loop in which something is done, OR, program waits for others to complete their work before doing its own</span>
<span class="Statement">     set-number</span> lockid
<span class="Statement">     start-loop</span>
         <span class="Comment">// Attempt to lock file</span>
<span class="Statement">         lock-file</span> fname<span class="Type"> id</span> lockid<span class="Type"> status</span> lockst
         <span class="Comment">// Check the status of locking</span>
<span class="Statement">         if-true</span> lockst<span class="Identifier"> equal</span> GG_OKAY
             <span class="Comment">// File successfully locked, simulate working for </span><span class="Constant">20</span><span class="Comment"> seconds</span>
<span class="Statement">             @</span>WORKING
<span class="Statement">             pause-program</span> <span class="Constant">20000</span>
<span class="Statement">             @</span>DONE
             <span class="Comment">// Exit while loop</span>
<span class="Statement">             break-loop</span>
<span class="Statement">         else-if</span> lockst<span class="Identifier"> equal</span> GG_ERR_FAILED
             <span class="Comment">// Another process holds the lock, wait, try again for </span><span class="Constant">1</span><span class="Comment"> second</span>
<span class="Statement">             pause-program</span> <span class="Constant">1000</span>
<span class="Statement">             @</span>WAITING
<span class="Statement">             continue-loop</span>
<span class="Statement">         else-if</span> lockst<span class="Identifier"> equal</span> GG_ERR_OPEN<span class="Identifier"> or</span> lockst<span class="Identifier"> equal</span> GG_ERR_INVALID
             <span class="Comment">// Errors</span>
<span class="Statement">             @</span>BAD LOCK
<span class="Statement">             exit-handler</span>
<span class="Statement">         end-if</span>
<span class="Statement">     end-loop</span>
     <span class="Comment">// Once done, unlock file</span>
<span class="Statement">     unlock-file</span><span class="Identifier"> id</span> lockid
<span class="Statement"> %%</span></pre>
<span id=golf_copied_493 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_493' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_493, code_493, golf_copied_493)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
%%<br/>
<!--BEFSAL13--><div class="vsub"><a id="See also"></a>See also</div>
 <a name='Files'></a><span style="font-weight:bold;">Files</span><br/>
<a href='/close-file.html'>close-file</a> &nbsp;<br/>
<a href='/copy-file.html'>copy-file</a> &nbsp;<br/>
<a href='/delete-file.html'>delete-file</a> &nbsp;<br/>
<a href='/file-position.html'>file-position</a> &nbsp;<br/>
<a href='/file-storage.html'>file-storage</a> &nbsp;<br/>
<a href='/file-uploading.html'>file-uploading</a> &nbsp;<br/>
<a href='/lock-file.html'>lock-file</a> &nbsp;<br/>
<a href='/open-file.html'>open-file</a> &nbsp;<br/>
<a href='/read-file.html'>read-file</a> &nbsp;<br/>
<a href='/read-line.html'>read-line</a> &nbsp;<br/>
<a href='/rename-file.html'>rename-file</a> &nbsp;<br/>
<a href='/stat-file.html'>stat-file</a> &nbsp;<br/>
<a href='/temporary-file.html'>temporary-file</a> &nbsp;<br/>
<a href='/uniq-file.html'>uniq-file</a> &nbsp;<br/>
<a href='/unlock-file.html'>unlock-file</a> &nbsp;<br/>
<a href='/write-file.html'>write-file</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='/documentation.html'>documentation</a><br/>
<a id='lower-string.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:right;background-color:white;'><a href='https://golf-lang.com' style='border-bottom:0px'><img src='https://golf-lang.com/golf.png'/></a></div><div class='vhub' style='margin-top:10px;'>&nbsp;Lower string</div><hr/><span style="font-weight:bold;">Purpose</span>: Lower-case a string.<br/>
<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_494'>
<span class="Statement"> lower-string</span> &lt;string&gt;</pre>
<span id=golf_copied_494 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_494' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_494, code_494, golf_copied_494)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
lower-string converts all &lt;string&gt;'s characters to lower case.<br/>
<div class="vsub"><a id="Examples"></a>Examples</div>
The resulting "str" is "good":<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_495'>
<span class="Statement"> set-string</span> str=<span class="Constant">&quot;GOOD&quot;</span>
<span class="Statement"> lower-string</span> str</pre>
<span id=golf_copied_495 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_495' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_495, code_495, golf_copied_495)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<!--BEFSAL13--><div class="vsub"><a id="See also"></a>See also</div>
 <a name='Strings'></a><span style="font-weight:bold;">Strings</span><br/>
<a href='/copy-string.html'>copy-string</a> &nbsp;<br/>
<a href='/count-substring.html'>count-substring</a> &nbsp;<br/>
<a href='/delete-string.html'>delete-string</a> &nbsp;<br/>
<a href='/lower-string.html'>lower-string</a> &nbsp;<br/>
<a href='/read-split.html'>read-split</a> &nbsp;<br/>
<a href='/replace-string.html'>replace-string</a> &nbsp;<br/>
<a href='/set-string.html'>set-string</a> &nbsp;<br/>
<a href='/split-string.html'>split-string</a> &nbsp;<br/>
<a href='/string-length.html'>string-length</a> &nbsp;<br/>
<a href='/trim-string.html'>trim-string</a> &nbsp;<br/>
<a href='/upper-string.html'>upper-string</a> &nbsp;<br/>
<a href='/write-string.html'>write-string</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='/documentation.html'>documentation</a><br/>
<a id='mariadb-database.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:right;background-color:white;'><a href='https://golf-lang.com' style='border-bottom:0px'><img src='https://golf-lang.com/golf.png'/></a></div><div class='vhub' style='margin-top:10px;'>&nbsp;Mariadb database</div><hr/>MariaDB configuration file is written as a MariaDB client options file. <br/>
<br/>
You can see the parameters available at <a href='https://mariadb.com/kb/en/configuring-mariadb-connectorc-with-option-files/#options'>https://mariadb.com/kb/en/configuring-mariadb-connectorc-with-option-files/#options</a>. <br/>
<br/>
Most of the time, though, you would likely use only a few of those options, as in (for local connection):<br/>
<div class='ncode' style='position:relative;padding-right:16px;'>
<pre id='code_497'>
[client]
user=myuser
password=mypwd 
database=mydb
socket=/run/mysqld/mysqld.sock</pre>
<span id=golf_copied_497 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_497' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_497, code_497, golf_copied_497)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
The above file has fields "user" (MariaDB user), "password" (the password for MariaDB user), "database" (the MariaDB database name) and MariaDB communication "socket" location (assuming your database is local to your computer - if the database is across network you would not use sockets!). <br/>
<br/>
If you use passwordless MariaDB login (such as when the MariaDB user name is the same as your Operating System user name and where unix socket plugin is used for authentication), the password would be empty.<br/>
<br/>
To get the location of the socket, you might use:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_496'>
 sudo mysql -u root -e <span class="Constant">&quot;show variables like 'socket'&quot;</span></pre>
<span id=golf_copied_496 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_496' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_496, code_496, golf_copied_496)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<!--BEFSAL13--><div class="vsub"><a id="See also"></a>See also</div>
 <a name='Database'></a><span style="font-weight:bold;">Database</span><br/>
<a href='/begin-transaction.html'>begin-transaction</a> &nbsp;<br/>
<a href='/commit-transaction.html'>commit-transaction</a> &nbsp;<br/>
<a href='/current-row.html'>current-row</a> &nbsp;<br/>
<a href='/database-config-file.html'>database-config-file</a> &nbsp;<br/>
<a href='/db-error.html'>db-error</a> &nbsp;<br/>
<a href='/mariadb-database.html'>mariadb-database</a> &nbsp;<br/>
<a href='/postgresql-database.html'>postgresql-database</a> &nbsp;<br/>
<a href='/rollback-transaction.html'>rollback-transaction</a> &nbsp;<br/>
<a href='/run-query.html'>run-query</a> &nbsp;<br/>
<a href='/sqlite-database.html'>sqlite-database</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='/documentation.html'>documentation</a><br/>
<a id='match-regex.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:right;background-color:white;'><a href='https://golf-lang.com' style='border-bottom:0px'><img src='https://golf-lang.com/golf.png'/></a></div><div class='vhub' style='margin-top:10px;'>&nbsp;Match regex</div><hr/><span style="font-weight:bold;">Purpose</span>: Find, or find and replace patterns in strings using regex (regular expressions).<br/>
<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_499'>
<span class="Statement"> match-regex</span> &lt;pattern&gt;<span class="Identifier"> in</span> &lt;target&gt; \
     [ \
         (<span class="Identifier"> replace-with</span> &lt;replace pattern&gt; \
            <span class="Type"> result</span> &lt;result&gt; \
             [<span class="Type"> status</span> &lt;status&gt; ] )  \
     | \
         (<span class="Type"> status</span> &lt;status&gt; \
             [<span class="Identifier"> case-insensitive</span> [ &lt;case-insensitive&gt; ] ] \
             [<span class="Identifier"> single-match</span> [ &lt;single-match&gt; ] ] \
             [<span class="Identifier"> utf8</span> [ &lt;utf8&gt; ] ] ) \
     ] \
     [<span class="Identifier"> cache</span> ] \
     [<span class="Identifier"> clear-cache</span> &lt;clear cache&gt; )</pre>
<span id=golf_copied_499 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_499' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_499, code_499, golf_copied_499)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
match-regex searches &lt;target&gt; string for regex &lt;pattern&gt;. If "replace-with" is specified, then instance(s) of &lt;pattern&gt; in &lt;target&gt; are replaced with &lt;replace pattern&gt; string, and the result is stored in &lt;result&gt; string.<br/>
<br/>
The number of found or found/replaced patterns can be obtained in number &lt;status&gt; variable (in "status" clause). <br/>
<br/>
If "replace-with" is not specified, then the number of matched &lt;pattern&gt;s within &lt;target&gt; is given in &lt;status&gt; number, which in this case must be specified.<br/>
<br/>
If "case-insensitive" is used without boolean variable &lt;case-insensitive&gt;, or if &lt;case-insensitive&gt; evaluates to true, then searching for pattern is case insensitive. By default, it is case sensitive.<br/>
<br/>
If "single-match" is specified without boolean variable &lt;single-match&gt;, or if &lt;single-match&gt; evaluates to true, then only the very first occurrence of &lt;pattern&gt; in &lt;target&gt; is processed. Otherwise, all occurrences are processed.<br/>
<br/>
If "utf8" is used, then the pattern itself and all data strings used for matching are treated as UTF-8 strings.<br/>
<br/>
&lt;result&gt; and &lt;status&gt; variables can be created within the statement.<br/>
<br/>
If the pattern is bad (i.e. &lt;pattern&gt; is not a correct regular expression), Golf will <a href='/error-handling.html'>error out</a> with a message.<br/>
<div class="vsub"><a id="PCRE2 and Posix Regex"></a>PCRE2 and Posix Regex</div>
By default, <a href='https://www.pcre.org/current/doc/html/pcre2pattern.html'>PCRE2 regex syntax</a> (Perl-compatible Regular Expressions v2) is used. To use <a href='https://en.wikibooks.org/wiki/Regular_Expressions/POSIX-Extended_Regular_Expressions'>extended regex syntax</a> (Posix ERE), specify "--posix-regex" when building your application with <a href='/gg.html'>gg</a>. See more below in Limitations about differences.<br/>
<div class="vsub"><a id="Caching and performance"></a>Caching and performance</div>
If "cache" clause is used, then regex compilation of &lt;pattern&gt; will be done only once and saved for future use. There is a significant performance benefit when match-regex executes repeatedly with "cache" (such as in case of web applications or in any kind of loop). If &lt;pattern&gt; changes and you need to recompile it once in a while, use "clear-cache" clause. &lt;clear cache&gt; is a "bool" variable; the regex cache is cleared if it is true, and stays if it is false. For example:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_500'>
<span class="Statement"> set-bool</span> cl_c
<span class="Statement"> if-true</span> q<span class="Identifier"> equal</span> <span class="Constant">0</span>
<span class="Statement">     set-bool</span> cl_c = <span class="Constant">true</span>
<span class="Statement"> end-if</span>
<span class="Statement"> match-regex</span> ps<span class="Identifier"> in</span> look_in<span class="Identifier"> replace-with</span> <span class="Constant">&quot;Yes it is </span><span class="Special">\\</span><span class="Constant">1!&quot;</span><span class="Type"> result</span> res<span class="Identifier"> cache clear-cache</span> cl_c</pre>
<span id=golf_copied_500 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_500' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_500, code_500, golf_copied_500)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
In this case, when "q" is 0, cache will be cleared, and the pattern in variable "ps" will be recompiled. In all other cases, the last computed regex stays the same. <br/>
<br/>
While every pattern is different, when using cache, even a relatively small pattern was seen in tests to speed up the match-regex by about 500%, or 5x faster. Use cache whenever possible as it brings parsing performance close to its theoretical limits.<br/>
<div class="vsub"><a id="Subexpressions and back-referencing"></a>Subexpressions and back-referencing</div>
Subexpressions are referenced via a backslash followed by a number. Because in strings a backslash followed by a number is an octal number, you must use double backslash (\\). For example:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_501'>
<span class="Statement"> match-regex</span> <span class="Constant">&quot;(good).*(day)&quot;</span> \
    <span class="Identifier"> in</span> <span class="Constant">&quot;Hello, good day!&quot;</span> \
    <span class="Identifier"> replace-with</span> <span class="Constant">&quot;</span><span class="Special">\\</span><span class="Constant">2 </span><span class="Special">\\</span><span class="Constant">1&quot;</span> \
    <span class="Type"> result</span> res</pre>
<span id=golf_copied_501 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_501' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_501, code_501, golf_copied_501)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
will produce string "Hello, day good!" as a result in "res" variable. Each subexpression is within () parenthesis, so for instance "day" in the above pattern is the 2nd subexpression, and is back-referenced as \\2 in replacement.<br/>
<br/>
There can be a maximum of 23 subexpressions. <br/>
<br/>
Note that backreferences to non-existing subexpressions are ignored - for example \\4 when there are only 3 subexpressions. Golf is "smart" about using two digits and differentiating between \\1 and \\10 for instance - it takes into account the actual number of subexpressions and their validity, and selects a proper subexpression even when two digits are used in a backreference.<br/>
<div class="vsub"><a id="Lookaheads and lookbehinds"></a>Lookaheads and lookbehinds</div>
match-regex supports syntax for lookaheads (i.e. "(?=...)" and "(?!...)") and lookbehinds (i.e. "(?&lt;=...)" and "(?&lt;!...)"). See <a href='https://www.pcre.org/current/doc/html/pcre2pattern.html'>PCRE2 pattern matching</a> for more details. For instance, the following matches "bar" only if preceded by "foo":<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_502'>
<span class="Statement"> match-regex</span> <span class="Constant">&quot;</span><span class="Special">\\</span><span class="Constant">w*(?&lt;=foo)bar&quot;</span><span class="Identifier"> in</span> <span class="Constant">&quot;foobar&quot;</span><span class="Type"> status</span> st<span class="Identifier"> single-match</span></pre>
<span id=golf_copied_502 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_502' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_502, code_502, golf_copied_502)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
and the following matches "foo" if followed by "bar":<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_503'>
<span class="Statement"> match-regex</span> <span class="Constant">&quot;</span><span class="Special">\\</span><span class="Constant">w*foo(?=bar)&quot;</span><span class="Identifier"> in</span> <span class="Constant">&quot;foofoo&quot;</span><span class="Type"> status</span> st<span class="Identifier"> single-match</span></pre>
<span id=golf_copied_503 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_503' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_503, code_503, golf_copied_503)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<div class="vsub"><a id="Limitations"></a>Limitations</div>
If you are using older versions of PCRE2 (10.36 or earlier) such as by default in Debian 10 or Ubuntu 18, then instead of PCRE2, an <a href='https://en.wikibooks.org/wiki/Regular_Expressions/POSIX-Extended_Regular_Expressions'>Extended Regex Expressions</a> (ERE) from the &nbsp;built-in Linux regex library is used, due to older PCRE2 versions having name conflicts with other libraries. In this case, "utf8" clause will have no effect, and lookaheads/lookbehinds functionality will not work; possibly a few others as well, however for the most part the two are compatible. If your system uses an older PCRE2 library, you can upgrade to 10.37 or later to use PCRE2.<br/>
<br/>
In any case, if you need to use Posix ERE instead of PCRE2 (for compatibility, to reduce memory footprint or some other reason), you can use "--posix-regex" option of <a href='/gg.html'>gg</a>; the same limitations as above apply. Note that PCRE2 (the default) is generally faster than ERE.<br/>
<div class="vsub"><a id="Examples"></a>Examples</div>
Use match-regex statement to find out if a string matches a pattern, for example:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_504'>
<span class="Statement"> match-regex</span> <span class="Constant">&quot;SOME (.*) IS (.*)&quot;</span><span class="Identifier"> in</span> <span class="Constant">&quot;WOW SOME THING IS GOOD HERE&quot;</span><span class="Type"> status</span> st</pre>
<span id=golf_copied_504 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_504' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_504, code_504, golf_copied_504)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
In this case, the first parameter ("SOME (.*) IS (.*)") is a pattern and you're matching it with string ("WOW SOME THING IS GOOD HERE"). Since there is a match, status variable (defined on the fly as integer) "st" will be "1" (meaning one match was found) - in general it will contain the number of patterns matched. <br/>
<br/>
Search for patterns and replace them by using replace-with clause, for example:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_505'>
<span class="Statement"> match-regex</span> <span class="Constant">&quot;SOME (.*) IS ([^ ]+)&quot;</span><span class="Identifier"> in</span> <span class="Constant">&quot;WOW SOME THING IS GOOD HERE FOR SURE&quot;</span><span class="Identifier"> replace-with</span> <span class="Constant">&quot;THINGS ARE </span><span class="Special">\\</span><span class="Constant">2 YES!&quot;</span><span class="Type"> result</span> res<span class="Type"> status</span> st</pre>
<span id=golf_copied_505 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_505' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_505, code_505, golf_copied_505)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
In this case, the result from replacement will be in a new string variable "res" specified with the result clause, and it will be <br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_506'>
 WOW THINGS ARE GOOD YES! HERE FOR SURE</pre>
<span id=golf_copied_506 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_506' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_506, code_506, golf_copied_506)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
The above demonstrates a typical use of subexpressions in regex (meaning "()" statements) and their referencing with "\\1", "\\2" etc. in the order in which they appear. Consult regex documentation for more information. &nbsp;Status variable specified with status clause ("st" in this example) will contain the number of patterns matched and replaced. <br/>
<br/>
Matching is by default case sensitive. Use "case-insensitive" clause to change it to case insensitive, for instance:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_507'>
<span class="Statement"> match-regex</span> <span class="Constant">&quot;SOME (.*) IS (.*)&quot;</span><span class="Identifier"> in</span> <span class="Constant">&quot;WOW some THING IS GOOD HERE&quot;</span><span class="Type"> status</span> st<span class="Identifier"> case-insensitive</span></pre>
<span id=golf_copied_507 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_507' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_507, code_507, golf_copied_507)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
In the above case, the pattern would not be found without "case-insensitive" clause because "SOME" and "some" would not match. This clause works the same in matching-only as well as replacing strings.<br/>
<br/>
If you want to match only the first occurrence of a pattern, use "single-match" option:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_498'>
<span class="Statement"> match-regex</span> <span class="Constant">&quot;SOME ([^ ]+) IS ([^ ]+)&quot;</span><span class="Identifier"> in</span> <span class="Constant">&quot;WOW SOME THING IS GOOD HERE AND SOME STUFF IS GOOD TOO&quot;</span><span class="Type"> status</span> st<span class="Identifier"> single-match</span></pre>
<span id=golf_copied_498 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_498' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_498, code_498, golf_copied_498)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
In this case there would be two matches by default ("SOME THING IS GOOD" and "SOME STUFF IS GOOD") but only the first would be found. This clause works the same for replacing as well - only the first occurrence would be replaced.<br/>
<!--BEFSAL13--><div class="vsub"><a id="See also"></a>See also</div>
 <a name='Regex'></a><span style="font-weight:bold;">Regex</span><br/>
<a href='/match-regex.html'>match-regex</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='/documentation.html'>documentation</a><br/>
<a id='memory-handling.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:right;background-color:white;'><a href='https://golf-lang.com' style='border-bottom:0px'><img src='https://golf-lang.com/golf.png'/></a></div><div class='vhub' style='margin-top:10px;'>&nbsp;Memory handling</div><hr/>Golf is a memory-safe language. <br/>
<br/>
Your application cannot access memory outside of valid statement results. Trying to do so will result in your program <a href='/error-handling.html'>erroring out</a>. <br/>
<br/>
Memory allocated by Golf statements is tracked and freed at the end of the request. You can also use a memory-optimizer (see "--optimize-memory" in <a href='/gg.html'>gg</a>) which frees memory as soon as possible, however keep in mind that it comes with a performance penalty and is not recommended unless you have very little available memory. <br/>
<br/>
With Golf there is no need to free memory manually. Memory is automatically freed even if it is no longer accessible to the program, thus preventing memory leaks; this is important for stability of long-running processes. <br/>
<br/>
Some statements (<a href='/new-tree.html'>new-tree</a>, <a href='/new-hash.html'>new-hash</a>, <a href='/new-list.html'>new-list</a> and <a href='/set-string.html'>set-string</a>) have the option of allocating memory that won't get freed at the end of the request and is available to any request served by the same process. This kind of memory is called "process-scoped". A process-scoped string can be manually freed.<br/>
<br/>
Golf handles memory references and assignments automatically, preventing dangling memory.<br/>
<br/>
String results of any Golf <a href='/statements.html'>statements</a> will always create new memory, unless stated otherwise.<br/>
<div class="vsub"><a id="Open file descriptors"></a>Open file descriptors</div>
Any files opened by <a href='/open-file.html'>open-file</a> statement are automatically closed by Golf at the end of the request. This enhances stability of long-running server processes because Linux system by default offers only about 1000 open files to a process. A bug can quickly exhaust this pool and cause a malfunction or a crash - Golf prevents this by closing any such open files when the request ends. <br/>
<!--BEFSAL13--><div class="vsub"><a id="See also"></a>See also</div>
 <a name='Memory'></a><span style="font-weight:bold;">Memory</span><br/>
<a href='/memory-handling.html'>memory-handling</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='/documentation.html'>documentation</a><br/>
<a id='mgrg.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:right;background-color:white;'><a href='https://golf-lang.com' style='border-bottom:0px'><img src='https://golf-lang.com/golf.png'/></a></div><div class='vhub' style='margin-top:10px;'>&nbsp;Mgrg</div><hr/><span style="font-weight:bold;">Purpose</span>: Run and manage services.<br/>
<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_509'>
mgrg <span class="Statement">&lt;</span>options<span class="Statement">&gt;</span> <span class="Statement">&lt;</span>app name<span class="Statement">&gt;</span></pre>
<span id=golf_copied_509 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_509' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_509, code_509, golf_copied_509)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
mgrg (pronounced "em-greg") is a service manager. A service is started as a number of concurrent processes serving application requests, typically from reverse-proxy servers such as Apache, Nginx, HAProxy or others. Use mgrg to create Golf applications, including both service and command-line.<br/>
<br/>
A number of options are available to setup and manage the execution of a Golf program as an application server, which can be accessed either via TCP/IP or a Unix domain socket. <br/>
<br/>
&lt;app name&gt; specifies the name of your application. Each application must have a unique name. &lt;app name&gt; may contain alphanumeric characters and an underscore, must start with a character and its maximum length is 30. <br/>
<br/>
mgrg runs as a light-weight daemon (often requiring only 100-150K of resident RAM), with a separate instance for each application specified by the &lt;app name&gt;. When mgrg starts your service, its current directory is set to /var/lib/gg/&lt;app name&gt;/app. The permissions context is inherited from the caller, so the effective user ID, group ID and any supplemental groups are that of the caller. You can use tools like runuser to specifically set the permissions context.<br/>
<br/>
mgrg will re-start service processes that exited or died, keeping the number of processes as specified, unless -n option is used. The number of worker processes can be specified with a fixed (-w) option, or it can dynamically change based on the load (-d option), including none at all. Hence, it is possible to have no worker processes at all, and they will be started when incoming request(s) come in, and stay up as determined by the request load.<br/>
<br/>
&lt;options&gt; are:<br/>
<ul><li>-i<br/>
Initialize the directory and file structure for application &lt;app name&gt;. If you are building application from source code, this must be executed in the source code directory; mgrg will create file ".golfapp" which identifies the application so <a href='/gg.html'>gg</a> can run in the directory. You must run as root when using this option (and must not run as root otherwise) - this is the only mgrg option requiring sudo. The directory structure is setup in /var/lib/gg/&lt;app name&gt; (see <a href='/directories.html'>directories</a>).<br/>
</li><li>-u &lt;user&gt;<br/>
The owner of your application. This is only used when initializing directory structure used by mgrg (see -i option). Do not use it otherwise. It cannot be root. <br/>
</li><li>-r &lt;proxy group&gt;<br/>
The group of proxy web server (such as Apache or Nginx). This is only used when initializing directory structure used by mgrg (see -i option). Do not use it otherwise. It restricts the ability to connect to your application only to the members of said group (in addition to the user who owns your server) when a Unix socket is used, otherwise anyone can connect.<br/>
</li><li>-f<br/>
Run in the foreground. The process does not return to the command line prompt until it is stopped. Useful for debugging and where foreground processing is required.<br/>
</li><li>-p &lt;port number&gt;<br/>
TCP/IP port number your service program will listen on (and accept connections), if you are using TCP/IP. You typically need to specify ProxyPass, "location" or similar FastCGI directives in your proxy web server so it can connect to your application. If you are using <a href='/Client-API.html'>Client-API</a> or <a href='/call-remote.html'>call-remote</a>, you would use "&lt;host name&gt;:&lt;port number&gt;", for instance "127.0.0.1:2301" if the server is local and &lt;port number&gt; is 2301. You can either use TCP/IP or Unix domain sockets (-x option). Typically, you would use Unix domain sockets if proxy web server runs on the same computer as your application server. If you specify neither -x nor -p, -x (unix domain socket) is the default. See <a href='/SELinux.html'>SELinux</a> if you are using it, as additional steps may be required.<br/>
</li><li>-x<br/>
Use Unix domain socket to connect from proxy web server to your application server. This socket is automatically created by mgrg and its full path name is "/var/lib/gg/&lt;app name&gt;/sock/sock" (you can connect to it via <a href='/Client-API.html'>Client-API</a>, <a href='/call-remote.html'>call-remote</a> etc.). When using a proxy web server (like Apache or Nginx), you typically need to specify ProxyPass, "location" or similar FastCGI directives so it can connect to your application. If you specify neither -x nor -p (TCP/IP socket), then -x (unix domain socket) is the default.<br/>
</li><li>-l &lt;backlog size&gt;<br/>
The size of socket listening backlog for incoming connections. It must be a number between 10 and SOMAXCONN-1, inclusive. The default is 400. Increase it if your system is very busy to improve performance.<br/>
</li><li>-d<br/>
Dynamically change the number of service processes ("worker" processes) to match the request load (adaptive mode). Use with "max-worker" and "min-worker" options. You cannot use -w with this option. The number of processes needed is determined based on any pending connections that are not answered by any running processes. If there are more incoming connections than processes, the number of processes will grow. If no such connections are detected (i.e. existing processes are capable of handling any incoming requests), the number of processes does not grow and will decrease to the point of minimum necessary number of workers. In that case, given release time (-t option), the number of processes will slowly decline until the incoming requests warrant otherwise. The number of running processes thus will fluctuate based on the actual load, these options, as well as --min-worker and --max-worker options. If neither -d nor -w is specified, -d is the default.<br/>
</li><li>--min-worker=&lt;min workers&gt;<br/>
Minimum number of service processes that run in adaptive mode (-d option). The default is 5. You can set this to 0 if needed to save memory. This option can be used only with -d option.<br/>
</li><li>--max-worker=&lt;max workers&gt;<br/>
Maximum number of service processes that run in adaptive mode (-d option). The default is 20. This option can be used only with -d option.<br/>
</li><li>-t &lt;release time&gt;<br/>
Timeout before the number of service processes is reduced to meet the reduced load. The default is 30 seconds, and it can be a value between 5 seconds and 86400 seconds (i.e. a day).<br/>
</li><li>-w &lt;worker processes&gt;<br/>
Number of parallel service processes ("worker" processes) that will be started. These processes do not exit; they serve incoming requests in parallel, one request per process. The number of processes should be guided by the concurrent user demand of your application. If neither -d nor -w is specified, -d is the default.<br/>
</li><li>-m &lt;command&gt;<br/>
Send a command to mgrg daemon serving an application. &lt;command&gt; can be "start" (to start service processes), "stop" (to stop them), "restart" (to restart them), "quit" (to stop mgrg daemon altogether) or "status" (to display status of mgrg). <br/>
</li><li>-n<br/>
Do not restart service processes if they exit or die. However, in adaptive mode (-d option), this option has no effect.<br/>
</li><li>-g<br/>
Do not restart service processes when their executable changes. By default, they will be automatically restarted, which is useful when in development, or upgrading the server executable.<br/>
</li><li>-a &lt;args&gt;<br/>
Specify any command-line arguments for your application (see "arg-count" and "arg-value" clauses in <a href='/get-req.html'>get-req</a>). The &lt;args&gt; should be double-quoted as a whole, while use of single quotes to quote arguments that contain whitespaces is permitted. <br/>
</li><li>-z<br/>
Suppress HTTP headers in all <a href='/service.html'>service</a> handlers in the application. This is equivalent to having <a href='/silent-header.html'>silent-header</a> implied at the beginning of each <a href='/begin-handler.html'>service handler</a>. Use this option only if service is not used as a web service (i.e. the output will not have HTTP headers), or for testing or elsewhere where such headers may not be needed. Otherwise, you can use "--silent-header" option in <a href='/gg.html'>gg</a> or "GG_SILENT_HEADER" environment variable in <a href='/Client-API.html'>Client-API</a> to control from command-line or a client if headers are output or not.<br/>
</li><li>-s &lt;sleep millisecs&gt;<br/>
The basis time period (in milliseconds) that mgrg will sleep before checking for commands (specified by -m option), or check for dead service processes that need restarting. It can be between 100 and 5000 milliseconds. Smaller value will mean higher responsiveness but also higher CPU usage. The default value usually suffices, and should not be changed without due consideration.<br/>
</li><li>-e<br/>
Display verbose messages.<br/>
</li><li>-c &lt;program&gt;<br/>
Full absolute path to your service program. If omitted, the executable /var/lib/gg/bld/&lt;app name&gt;/&lt;app name&gt;.srvc is assumed, which is the standard Golf service executable. If present, but without any slashes in it to indicate path (including current directory as ./), then this executable is assumed to be /var/lib/gg/bld/&lt;app name&gt;/&lt;program&gt;.<br/>
</li><li>-v<br/>
Display mgrg version (which matches Golf version) as well as copyright and license.<br/>
</li><li>-h,--help<br/>
Display help.<br/>
</li></ul>
mgrg writes log file at /var/lib/gg/&lt;app name&gt;/mgrglog/log file. This file is overwritten when mgrg starts, so it contains the log of the current daemon instance only.<br/>
<div class="vsub"><a id="Exit code"></a>Exit code</div>
When starting, mgrg exits with 0 if successful and 1 if it is already running. If service executable cannot run, the exit code is -1. When creating application, mgrg exits with 0 if successful, and -1 if not.<br/>
<div class="vsub"><a id="Process control"></a>Process control</div>
When mgrg is told to stop the application (with "-m stop" arguments), it will send SIGTERM signal to all its children. All Golf processes will complete the current request before exiting, assuming they are currently processing a request; otherwise they will exit immediately. <br/>
<br/>
If mgrg is terminated without "-m stop", (for example with SIGKILL signal), then all its chidlren will immediately terminate with SIGKILL as well, regardless of whether they are currently processing any requests or not.<br/>
<div class="vsub"><a id="Examples"></a>Examples</div>
<ul><li>To begin using mgrg for a specific application, you must initialize it first. For example, if your application name is "myapp" and the user who will run application is the currently logged-on user:<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_510'>
sudo mgrg <span class="Special">-i</span> <span class="Special">-u</span> <span class="PreProc">$(</span><span class="Special">whoami</span><span class="PreProc">)</span> myapp</pre>
<span id=golf_copied_510 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_510' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_510, code_510, golf_copied_510)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
</li><li>The initialization needs to be done only once. Following the above, you can start your service application with 3 server processes:<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_511'>
mgrg <span class="Special">-w</span> <span class="Constant">3</span> myapp</pre>
<span id=golf_copied_511 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_511' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_511, code_511, golf_copied_511)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
</li><li>To stop your service processes:<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_512'>
mgrg <span class="Special">-m</span> <span class="Statement">stop</span> <span class="Special">--</span> myapp</pre>
<span id=golf_copied_512 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_512' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_512, code_512, golf_copied_512)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
</li><li>To restart them:<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_513'>
mgrg <span class="Special">-m</span> restart <span class="Special">--</span> myapp</pre>
<span id=golf_copied_513 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_513' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_513, code_513, golf_copied_513)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
</li><li>To stop the server entirely (meaning to stop the resident mgrg daemon serving your particular application):<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_514'>
mgrg <span class="Special">-m</span> quit <span class="Special">--</span> myapp</pre>
<span id=golf_copied_514 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_514' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_514, code_514, golf_copied_514)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
</li><li>To view status of mgrg daemon for your application:<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_515'>
mgrg <span class="Special">-m</span> status <span class="Special">--</span> myapp</pre>
<span id=golf_copied_515 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_515' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_515, code_515, golf_copied_515)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
</li></ul>
<div class="vsub"><a id="Running your application server on system startup"></a>Running your application server on system startup</div>
If you want your application to run on system startup (so you don't have to run it manually), you can add it to systemd configuration. Here is an example (replace &lt;app name&gt; with your application name and &lt;app owner&gt; with the name of the Operating System user under which your application is installed):<br/>
<div class='ncode' style='position:relative;padding-right:16px;'>
<pre id='code_508'>
[Unit]
Description=Golf Service Program Manager for [&lt;app name&gt;] application.
After=network.target

[Service]
Type=forking
ExecStart=/usr/bin/mgrg &lt;app name&gt;
ExecStop=/usr/bin/mgrg -m quit &lt;app name&gt;
KillMode=process
Restart=on-failure
User=&lt;app owner&gt;

[Install]
WantedBy=multi-user.target</pre>
<span id=golf_copied_508 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_508' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_508, code_508, golf_copied_508)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
The above should be saved in the directory given by the output of the following system command:<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_516'>
pkg-config systemd <span class="Special">--variable</span><span class="Statement">=</span>systemdsystemunitdir</pre>
<span id=golf_copied_516 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_516' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_516, code_516, golf_copied_516)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
The file should be saved as &lt;app name&gt;.service (or similar). Once saved, you can use standard systemctl commands to start, stop and restart your service.<br/>
<!--BEFSAL13--><div class="vsub"><a id="See also"></a>See also</div>
 <a name='Service manager'></a><span style="font-weight:bold;">Service manager</span><br/>
<a href='/mgrg.html'>mgrg</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='/documentation.html'>documentation</a><br/>
<a id='new-array.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:right;background-color:white;'><a href='https://golf-lang.com' style='border-bottom:0px'><img src='https://golf-lang.com/golf.png'/></a></div><div class='vhub' style='margin-top:10px;'>&nbsp;New array</div><hr/><span style="font-weight:bold;">Purpose</span>: Create array.<br/>
<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_517'>
<span class="Statement"> new-array</span> &lt;array&gt; [<span class="Identifier"> max-size</span> &lt;max-size&gt; ] [<span class="Identifier"> process-scope</span> ]</pre>
<span id=golf_copied_517 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_517' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_517, code_517, golf_copied_517)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
new-array creates new &lt;array&gt;. An array is an indexed array, with a number as an index, and with a string as an element in the array. <br/>
<br/>
A Golf array is flexible, which means that it will grow to accomodate your needs. By default, an array allocates room for 256 elements that can grow up to 1,000,000 elements, unless &lt;max-size&gt; number (in "max-size" clause) is specified in which case it can grow up to &lt;max-size&gt; elements. &lt;max-size&gt; must be at least 256.<br/>
<br/>
Note that max-size specifies only the upper limit of allocation. The actual amount of memory allocated can vary greatly, and is only 256 elements for a new array.<br/>
<br/>
With a Golf array, you do not need to pre-size the array; rather when you write an element, it will resize automatically. For instance, you can set an array element arr[0] and then arr[1000] (with nothing in-between), and Golf will automatically extend the array to accomodate. Note that an array will not automatically contract when tailing elements are deleted. Use <a href='/purge-array.html'>purge-array</a> to delete all elements in the array and shrink its memory footprint when your processing is done.<br/>
<div class="vsub"><a id="Scope"></a>Scope</div>
Note that an array is accessible to the current request only, unless "process-scope" clause is used, in which case all requests served by a process can use it (see <a href='/do-once.html'>do-once</a> for a typical way to do this).<br/>
<br/>
If "process-scope" is used, then &lt;array&gt; will keep its data across all requests in a given process. See <a href='/write-array.html'>write-array</a> for an example of a process-scoped array.<br/>
<div class="vsub"><a id="Examples"></a>Examples</div>
Create a new array:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_518'>
<span class="Statement"> new-array</span> arr</pre>
<span id=golf_copied_518 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_518' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_518, code_518, golf_copied_518)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<!--BEFSAL13--><div class="vsub"><a id="See also"></a>See also</div>
 <a name='Array'></a><span style="font-weight:bold;">Array</span><br/>
<a href='/new-array.html'>new-array</a> &nbsp;<br/>
<a href='/purge-array.html'>purge-array</a> &nbsp;<br/>
<a href='/read-array.html'>read-array</a> &nbsp;<br/>
<a href='/write-array.html'>write-array</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='/documentation.html'>documentation</a><br/>
<a id='new-fifo.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:right;background-color:white;'><a href='https://golf-lang.com' style='border-bottom:0px'><img src='https://golf-lang.com/golf.png'/></a></div><div class='vhub' style='margin-top:10px;'>&nbsp;New fifo</div><hr/><span style="font-weight:bold;">Purpose</span>: Create FIFO list.<br/>
<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_519'>
<span class="Statement"> new-fifo</span> &lt;list&gt;</pre>
<span id=golf_copied_519 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_519' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_519, code_519, golf_copied_519)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
new-fifo initializes new FIFO &lt;list&gt; (First In First Out). <br/>
<br/>
&lt;list&gt; contains data stored on a first-in, first out basis. Note that a list is accessible to the current process only.<br/>
<br/>
Information is retrieved (possibly many times, see <a href='/rewind-fifo.html'>rewind-fifo</a>) in the same order in which it was stored.<br/>
<br/>
The internal positions for <a href='/write-fifo.html'>write-fifo</a> and <a href='/read-fifo.html'>read-fifo</a> actions are separate so you can keep writing data to the list, and read it independently of writes in any number of retrieval passes by using <a href='/rewind-fifo.html'>rewind-fifo</a>.<br/>
<div class="vsub"><a id="Examples"></a>Examples</div>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_520'>
<span class="Statement"> new-fifo</span> nf</pre>
<span id=golf_copied_520 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_520' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_520, code_520, golf_copied_520)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<!--BEFSAL13--><div class="vsub"><a id="See also"></a>See also</div>
 <a name='FIFO'></a><span style="font-weight:bold;">FIFO</span><br/>
<a href='/delete-fifo.html'>delete-fifo</a> &nbsp;<br/>
<a href='/new-fifo.html'>new-fifo</a> &nbsp;<br/>
<a href='/purge-fifo.html'>purge-fifo</a> &nbsp;<br/>
<a href='/read-fifo.html'>read-fifo</a> &nbsp;<br/>
<a href='/rewind-fifo.html'>rewind-fifo</a> &nbsp;<br/>
<a href='/write-fifo.html'>write-fifo</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='/documentation.html'>documentation</a><br/>
<a id='new-hash.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:right;background-color:white;'><a href='https://golf-lang.com' style='border-bottom:0px'><img src='https://golf-lang.com/golf.png'/></a></div><div class='vhub' style='margin-top:10px;'>&nbsp;New hash</div><hr/><span style="font-weight:bold;">Purpose</span>: Create hash.<br/>
<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_521'>
<span class="Statement"> new-hash</span> &lt;hash&gt; \
     [<span class="Identifier"> process-scope</span> ] \
     [<span class="Identifier"> hash-size</span> &lt;hash size&gt; ]</pre>
<span id=golf_copied_521 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_521' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_521, code_521, golf_copied_521)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
new-hash creates new &lt;hash&gt;. A hash is a collection of key/value pairs, called "elements". A value of an element is obtained based on its key value.<br/>
<div class="vsub"><a id="Scope"></a>Scope</div>
Note that a hash is accessible to the current request only, unless "process-scope" clause is used, in which case all requests served by a process can use it (see <a href='/do-once.html'>do-once</a> for a typical way to create a hash with a process scope). <br/>
<br/>
If "process-scope" is used, then &lt;hash&gt; will keep its data across all requests in a given process. See <a href='/write-hash.html'>write-hash</a> for an example of a process-scoped hash.<br/>
<div class="vsub"><a id="Sizing a hash"></a>Sizing a hash</div>
A hash can be of any size, as long as there is enough memory for it. The "hash-size" refers to the size of a hash table used to provide high-performance access to its elements based on a key.<br/>
<br/>
&lt;hash size&gt; is the number of "buckets" used by the hash (it is 10 by default). All hash elements with the same hash code are stored in a linked list within the same bucket. Greater &lt;hash size&gt; generally means less elements per bucket and better performance. However, memory usage grows with a bigger hash table, so &lt;hash size&gt; should be balanced based on the program needs.<br/>
<br/>
Golf uses high-performing <a href='https://en.wikipedia.org/wiki/Fowler%E2%80%93Noll%E2%80%93Vo_hash_function'>FNV1_a</a> hash algorithm. Each element in a bucket list is lightweight, containing pointers to a key, value and next element in the linked list.<br/>
<br/>
&lt;hash size&gt; must be at least 256; if less, it will be set to 256.<br/>
<div class="vsub"><a id="Examples"></a>Examples</div>
Create a new hash with 5000 buckets:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_522'>
<span class="Statement"> new-hash</span> h<span class="Identifier"> hash-size</span> <span class="Constant">5000</span></pre>
<span id=golf_copied_522 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_522' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_522, code_522, golf_copied_522)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
See <a href='/read-hash.html'>read-hash</a> for more examples.<br/>
<!--BEFSAL13--><div class="vsub"><a id="See also"></a>See also</div>
 <a name='Hash'></a><span style="font-weight:bold;">Hash</span><br/>
<a href='/get-hash.html'>get-hash</a> &nbsp;<br/>
<a href='/new-hash.html'>new-hash</a> &nbsp;<br/>
<a href='/purge-hash.html'>purge-hash</a> &nbsp;<br/>
<a href='/read-hash.html'>read-hash</a> &nbsp;<br/>
<a href='/resize-hash.html'>resize-hash</a> &nbsp;<br/>
<a href='/write-hash.html'>write-hash</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='/documentation.html'>documentation</a><br/>
<a id='new-lifo.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:right;background-color:white;'><a href='https://golf-lang.com' style='border-bottom:0px'><img src='https://golf-lang.com/golf.png'/></a></div><div class='vhub' style='margin-top:10px;'>&nbsp;New lifo</div><hr/><span style="font-weight:bold;">Purpose</span>: Create LIFO list.<br/>
<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_523'>
<span class="Statement"> new-lifo</span> &lt;list&gt;</pre>
<span id=golf_copied_523 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_523' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_523, code_523, golf_copied_523)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
new-lifo initializes new LIFO &lt;list&gt; (Last In First Out).<br/>
<br/>
&lt;list&gt; contains data stored on a last-in, first-out basis. Note that a list is accessible to the current process only.<br/>
<br/>
Information is retrieved (possibly many times, see <a href='/rewind-lifo.html'>rewind-lifo</a>) in the opposite order in which it was stored.<br/>
<div class="vsub"><a id="Examples"></a>Examples</div>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_524'>
<span class="Statement"> new-lifo</span> mylifo</pre>
<span id=golf_copied_524 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_524' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_524, code_524, golf_copied_524)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<!--BEFSAL13--><div class="vsub"><a id="See also"></a>See also</div>
 <a name='LIFO'></a><span style="font-weight:bold;">LIFO</span><br/>
<a href='/delete-lifo.html'>delete-lifo</a> &nbsp;<br/>
<a href='/new-lifo.html'>new-lifo</a> &nbsp;<br/>
<a href='/purge-lifo.html'>purge-lifo</a> &nbsp;<br/>
<a href='/read-lifo.html'>read-lifo</a> &nbsp;<br/>
<a href='/rewind-lifo.html'>rewind-lifo</a> &nbsp;<br/>
<a href='/write-lifo.html'>write-lifo</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='/documentation.html'>documentation</a><br/>
<a id='new-list.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:right;background-color:white;'><a href='https://golf-lang.com' style='border-bottom:0px'><img src='https://golf-lang.com/golf.png'/></a></div><div class='vhub' style='margin-top:10px;'>&nbsp;New list</div><hr/><span style="font-weight:bold;">Purpose</span>: Create linked list.<br/>
<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_525'>
<span class="Statement"> new-list</span> &lt;list&gt; [<span class="Identifier"> process-scope</span> ]</pre>
<span id=golf_copied_525 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_525' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_525, code_525, golf_copied_525)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
new-list initializes new linked &lt;list&gt;, where each element is connected to the previous and next ones. <br/>
<br/>
In a linked &lt;list&gt; data that can be added anywhere in the list, and also accessed anywhere as well. Access to a list is sequential, meaning you can position to the first, last, next or previous element. Note that a list is accessible to the current process only.<br/>
<br/>
Generally information is stored in a linked list, and retrieved (possibly many times) in any order later.<br/>
<br/>
A list has a current position where an element can be read, updated, inserted or deleted (via <a href='/read-list.html'>read-list</a>, <a href='/write-list.html'>write-list</a> and <a href='/delete-list.html'>delete-list</a>), and this position can be explicitly changed with <a href='/position-list.html'>position-list</a>.<br/>
<div class="vsub"><a id="Scope"></a>Scope</div>
A linked list is accessible to the current process only, unless "process-scope" clause is used, in which case all requests served by the process can use it (see <a href='/do-once.html'>do-once</a> for a typical way to create an object with a process scope). If "process-scope" is used, then elements of the list will keep their value between requests in the same process. <br/>
<br/>
See <a href='/write-list.html'>write-list</a> for an example of a process-scoped list.<br/>
<div class="vsub"><a id="Examples"></a>Examples</div>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_526'>
<span class="Statement"> new-list</span> mylist</pre>
<span id=golf_copied_526 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_526' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_526, code_526, golf_copied_526)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<!--BEFSAL13--><div class="vsub"><a id="See also"></a>See also</div>
 <a name='Linked list'></a><span style="font-weight:bold;">Linked list</span><br/>
<a href='/delete-list.html'>delete-list</a> &nbsp;<br/>
<a href='/get-list.html'>get-list</a> &nbsp;<br/>
<a href='/new-list.html'>new-list</a> &nbsp;<br/>
<a href='/position-list.html'>position-list</a> &nbsp;<br/>
<a href='/purge-list.html'>purge-list</a> &nbsp;<br/>
<a href='/read-list.html'>read-list</a> &nbsp;<br/>
<a href='/write-list.html'>write-list</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='/documentation.html'>documentation</a><br/>
<a id='new-message.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:right;background-color:white;'><a href='https://golf-lang.com' style='border-bottom:0px'><img src='https://golf-lang.com/golf.png'/></a></div><div class='vhub' style='margin-top:10px;'>&nbsp;New message</div><hr/><span style="font-weight:bold;">Purpose</span>: Create new message.<br/>
<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_527'>
<span class="Statement"> new-message</span> &lt;message&gt; [<span class="Identifier"> from</span> &lt;string&gt; ]</pre>
<span id=golf_copied_527 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_527' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_527, code_527, golf_copied_527)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
new-message will create a new &lt;message&gt; object.<br/>
<br/>
If &lt;string&gt; is specified (in "from" clause), then it is used to create a &lt;message&gt; from it. The &lt;string&gt; must be in <a href='/SEMI.html'>SEMI</a> format, which may be in request's input, from <a href='/get-message.html'>get-message</a>, from reading a file etc; in this case &lt;message&gt; can only be read from with <a href='/read-message.html'>read-message</a>.<br/>
<br/>
If new-message is used without "from" clause, data can be added to &lt;message&gt; with <a href='/write-message.html'>write-message</a>. <br/>
<div class="vsub"><a id="Examples"></a>Examples</div>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_528'>
<span class="Statement"> begin-handler</span> /msg<span class="Identifier"> public</span>
<span class="Statement">     new-message</span> msg
<span class="Statement">     write-message</span> msg<span class="Identifier"> key</span> <span class="Constant">&quot;weather&quot;</span><span class="Identifier"> value</span> <span class="Constant">&quot;nice&quot;</span>
<span class="Statement">     write-message</span> msg<span class="Identifier"> key</span> <span class="Constant">&quot;distance&quot;</span><span class="Identifier"> value</span> <span class="Constant">&quot;near&quot;</span>
<span class="Statement">     start-loop</span>
<span class="Statement">         read-message</span> msg<span class="Type"> key</span> k<span class="Type"> value</span> v<span class="Type"> status</span> s
<span class="Statement">         if-true</span> s<span class="Identifier"> not-equal</span> GG_OKAY
<span class="Statement">             break-loop</span>
<span class="Statement">         end-if</span>
<span class="Statement">         @</span>Key is <span class="Statement">&lt;&lt;p-out</span> k<span class="Statement">&gt;&gt;</span> and value is <span class="Statement">&lt;&lt;p-out</span> v<span class="Statement">&gt;&gt;</span>
<span class="Statement">     end-loop</span>
<span class="Statement"> end-handler</span></pre>
<span id=golf_copied_528 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_528' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_528, code_528, golf_copied_528)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<!--BEFSAL13--><div class="vsub"><a id="See also"></a>See also</div>
 <a name='Messages'></a><span style="font-weight:bold;">Messages</span><br/>
<a href='/get-message.html'>get-message</a> &nbsp;<br/>
<a href='/new-message.html'>new-message</a> &nbsp;<br/>
<a href='/read-message.html'>read-message</a> &nbsp;<br/>
<a href='/SEMI.html'>SEMI</a> &nbsp;<br/>
<a href='/write-message.html'>write-message</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='/documentation.html'>documentation</a><br/>
<a id='new-remote.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:right;background-color:white;'><a href='https://golf-lang.com' style='border-bottom:0px'><img src='https://golf-lang.com/golf.png'/></a></div><div class='vhub' style='margin-top:10px;'>&nbsp;New remote</div><hr/><span style="font-weight:bold;">Purpose</span>: Create resources for a service call.<br/>
<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_529'>
<span class="Statement"> new-remote</span> &lt;service&gt; \
     (<span class="Identifier"> local</span> &lt;app name&gt; ) | (<span class="Identifier"> location</span> &lt;location&gt; ) \
    <span class="Identifier"> url-path</span> &lt;service URL&gt; |
         ( \
        <span class="Identifier"> app-path</span> &lt;app path&gt; \
        <span class="Identifier"> request-path</span> &lt;request path&gt; \
         [<span class="Identifier"> url-params</span> &lt;url params&gt; ] \
         ) \
     [<span class="Identifier"> request-body content</span> &lt;content&gt; \
         [<span class="Identifier"> content-length</span> &lt;content length&gt; ] \
         [<span class="Identifier"> content-type</span> &lt;content type&gt; ] ] \
     [<span class="Identifier"> method</span> &lt;request method&gt; ] \
     [<span class="Identifier"> environment</span> &lt;name&gt;=&lt;value&gt; [<span class="Statement"> ,</span> ... ] ] \
     [<span class="Identifier"> timeout</span> &lt;timeout&gt; ]</pre>
<span id=golf_copied_529 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_529' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_529, code_529, golf_copied_529)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
new-remote will create resources needed for a service call (see <a href='/call-remote.html'>call-remote</a>); these resources are contained in variable &lt;service&gt;.<br/>
<div class="vsub"><a id="Local or location"></a>Local or location</div>
If "local" clause is used, then service is a Golf application running on the same computer, and the name of this application is string &lt;app name&gt;. <br/>
<br/>
If "local" is not used, then you must use "location" clause. &lt;location&gt; (in "location" clause) is a string representing either a Unix socket or a TCP socket of a remote service, and is:<br/>
<ul><li>for a Unix socket, a fully qualified name to a Unix socket file used to communicate with the service (for a Golf server, it's "/var/lib/gg/&lt;app name&gt;/sock/sock", where &lt;app name&gt; is the application name), or<br/>
</li><li>for a TCP socket, a host name and a port number in the form of "&lt;host name&gt;:&lt;port number&gt;", specifying where the service is listening on (for instance "127.0.0.1:2301" if the service is local and runs on TCP port 2301).</li></ul>
<div class="vsub"><a id="url-path or its components"></a>url-path or its components</div>
If "url-path" is used, then it's a <a href='/request.html'>URL path</a> to a service. <br/>
<br/>
If "url-path" is not used, then you must use "app-path" and "request-path" clauses with optional "url-params" clause. &lt;app path&gt; string (in "app-path" clause) is the application path used to access a URL resource in service &lt;location&gt;, &lt;request path&gt; string (in "request-path" clause) is the <a href='/request.html'>request</a> path used to access a URL resource in service &lt;location&gt;, while &lt;url params&gt; string (in "url-params" clause) is the URL parameters, see <a href='/request.html'>request</a>.<br/>
<div class="vsub"><a id="Optional"></a>Optional</div>
&lt;request method&gt; string (in "method" clause) is a request method, such as "GET", "POST", "DELETE", "PUT" etc. The default is "GET".<br/>
<br/>
Request body (i.e. body content) is specified via "request-body" clause. Within it, &lt;content&gt; (in "content" subclause) is the actual body content string. &lt;content length&gt; &nbsp;(in "content-length" subclause) specifies the number of bytes in &lt;content&gt;; by default it will be the string length of &lt;content&gt; (see <a href='/string-length.html'>string-length</a>). Mandatory &lt;content type&gt; (in "content-type" subclause) is the body content type (for instance &nbsp;"application/json" or "image/jpg").<br/>
<br/>
&lt;url params&gt; string (in "url-params" clause) is the URL parameters, see <a href='/request.html'>request</a>.<br/>
<br/>
&lt;environment&gt; (in "environment" clause) is the environment passed to a service call, in the form of "name"="value" string list where such environment elements are separated by a comma. This way you can send any environment variables to the request executed remotely. For a Golf server, you can access those variables in a remote request by using "environment" clause of <a href='/get-sys.html'>get-sys</a> statement. There is no limit on the number of environment variables you can use this way, other than the underlying communication library.<br/>
<br/>
&lt;timeout&gt; (in "timeout" clause) is the number of seconds after which a service call will timeout; meaning the duration of a service call should not exceed this period of time. For no timeout, specify 0. Note that time needed for a DNS resolution of &lt;location&gt; is not counted in &lt;timeout&gt;. Maximum value is 86400 seconds. Even though it's optional, it is recommended to specify &lt;timeout&gt; in order to avoid a Golf process waiting for a very long time. Note that even if your service call times out, the actual request executing on the server may continue until it's done.<br/>
<div class="vsub"><a id="Examples"></a>Examples</div>
In this example, 3 service calls are created ("srv1", "srv2" and "srv3"), and they will each make a service request. <br/>
<br/>
Each service request will add a key ("key1" with data "data_1", "key2" with data "data_2" and "key3" with data "data_3"). <br/>
<br/>
All three service calls connect via Unix socket. <br/>
<br/>
A full URL path of a service request (for "srv1" for example), would be "/app/manage-keys/op=add/key=key_1/data=data_1" (note that "app" is the application name and "manage-keys" is the request handler that provides the service).<br/>
<br/>
Copy this to "manage_keys.golf" source file:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_532'>
<span class="Statement"> %%</span> /manage-keys<span class="Identifier"> public</span>
<span class="Statement">    do-once</span>
<span class="Statement">    new-hash</span> h<span class="Identifier"> hash-size</span> <span class="Constant">1024</span><span class="Identifier"> process-scope</span>
<span class="Statement">    end-do-once</span>

    <span class="Comment">// Get input parameters</span>
<span class="Statement">    get-param</span> op
<span class="Statement">    get-param</span> key
<span class="Statement">    get-param</span> data

<span class="Statement">    if-true</span> op<span class="Identifier"> equal</span> <span class="Constant">&quot;add&quot;</span> <span class="Comment">// Add data to hash,</span>
<span class="Statement">        write-hash</span> h<span class="Identifier"> key</span> (key)<span class="Identifier"> value</span> data<span class="Type"> status</span> st
<span class="Statement">        @</span>Added [<span class="Statement">&lt;&lt;p-out</span> key<span class="Statement">&gt;&gt;</span>]
<span class="Statement">    else-if</span> op<span class="Identifier"> equal</span> <span class="Constant">&quot;delete&quot;</span> <span class="Comment">// Delete data and obtain the value deleted</span>
<span class="Statement">        read-hash</span> h<span class="Type"> key</span> (key)<span class="Type"> value</span> val \
           <span class="Identifier"> delete</span> \
           <span class="Type"> status</span> st
<span class="Statement">        if-true</span> st<span class="Identifier"> equal</span> GG_ERR_EXIST
<span class="Statement">            @</span>Not found [<span class="Statement">&lt;&lt;p-out</span> key<span class="Statement">&gt;&gt;</span>]
<span class="Statement">        else-if</span>
            <span class="Comment">// If found, then delete key and value</span>
<span class="Statement">            @</span>Deleted [<span class="Statement">&lt;&lt;p-out</span> val<span class="Statement">&gt;&gt;</span>]
<span class="Statement">            delete-string</span> val
<span class="Statement">        end-if</span>
<span class="Statement">    else-if</span> op<span class="Identifier"> equal</span> <span class="Constant">&quot;query&quot;</span> <span class="Comment">// Query hash based on key value</span>
<span class="Statement">        read-hash</span> h<span class="Type"> key</span> (key)<span class="Type"> value</span> val<span class="Type"> status</span> st
<span class="Statement">        if-true</span> st<span class="Identifier"> equal</span> GG_ERR_EXIST
<span class="Statement">            @</span>Not found, queried [<span class="Statement">&lt;&lt;p-out</span> key<span class="Statement">&gt;&gt;</span>]
<span class="Statement">        else-if</span>
<span class="Statement">            @</span>Value [<span class="Statement">&lt;&lt;p-out</span> val<span class="Statement">&gt;&gt;</span>]
<span class="Statement">        end-if</span>
<span class="Statement">    end-if</span>
<span class="Statement"> %%</span></pre>
<span id=golf_copied_532 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_532' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_532, code_532, golf_copied_532)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Then <a href='/call-remote.html'>call-remote</a> will make three service calls to the above request handler in parallel (i.e. as threads executing at the same time). You can examine if everything went okay, how many threads have started, and how many finished with a reply from the service (this means any kind of reply, even if an error). Finally, the output from each call is displayed (that's "data" clause in <a href='/read-remote.html'>read-remote</a> statement at the end).<br/>
<br/>
Create file "srv.golf" and copy to it this code:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_534'>
<span class="Statement"> begin-handler</span> /srv<span class="Identifier"> public</span>
  <span class="Comment">// Create resources (prepare) for </span><span class="Constant">3</span><span class="Comment"> service calls</span>
  <span class="Comment">// We pass environment variable GG_SILENT_HEADER to these calls</span>
  <span class="Comment">// so they don't emit HTTP header</span>
<span class="Statement">  new-remote</span> srv1<span class="Identifier"> local</span> <span class="Constant">&quot;app&quot;</span> \
     <span class="Identifier"> url-path</span> <span class="Constant">&quot;/app/manage-keys/op=add/key=key1/data=data1&quot;</span> \
     <span class="Identifier"> environment</span> <span class="Constant">&quot;GG_SILENT_HEADER&quot;</span>=<span class="Constant">&quot;yes&quot;</span>
<span class="Statement">  new-remote</span> srv2<span class="Identifier"> local</span> <span class="Constant">&quot;app&quot;</span> \
     <span class="Identifier"> url-path</span> <span class="Constant">&quot;/app/manage-keys/op=add/key=key2/data=data2&quot;</span> \
     <span class="Identifier"> environment</span> <span class="Constant">&quot;GG_SILENT_HEADER&quot;</span>=<span class="Constant">&quot;yes&quot;</span>
<span class="Statement">  new-remote</span> srv3<span class="Identifier"> local</span> <span class="Constant">&quot;app&quot;</span> \
     <span class="Identifier"> url-path</span> <span class="Constant">&quot;/app/manage-keys/op=add/key=key3/data=data3&quot;</span> \
     <span class="Identifier"> environment</span> <span class="Constant">&quot;GG_SILENT_HEADER&quot;</span>=<span class="Constant">&quot;yes&quot;</span>
  <span class="Comment">// Make </span><span class="Constant">3</span><span class="Comment"> service calls in parallel, each in it own thread</span>
<span class="Statement">  call-remote</span> srv1, srv2, srv3<span class="Type"> status</span> st \
     <span class="Type"> started</span> start \
     <span class="Type"> finished-okay</span> fok
  <span class="Comment">// Check if all calls were completed</span>
<span class="Statement">  if-true</span> st<span class="Identifier"> equal</span> GG_OKAY
<span class="Statement">      @</span>No errors from call-remote
<span class="Statement">  end-if</span>
<span class="Statement">  if-true</span> start<span class="Identifier"> equal</span> <span class="Constant">3</span>
<span class="Statement">      @</span>All three service calls started.
<span class="Statement">  end-if</span>
<span class="Statement">  if-true</span> fok<span class="Identifier"> equal</span> <span class="Constant">3</span>
<span class="Statement">      @</span>All three service calls finished.
<span class="Statement">  end-if</span>
<span class="Statement">  read-remote</span> srv1<span class="Type"> data</span> rdata1
<span class="Statement">  read-remote</span> srv2<span class="Type"> data</span> rdata2
<span class="Statement">  read-remote</span> srv3<span class="Type"> data</span> rdata3
<span class="Statement">  p-out</span> rdata1
<span class="Statement">  @</span>
<span class="Statement">  p-out</span> rdata2
<span class="Statement">  @</span>
<span class="Statement">  p-out</span> rdata3
<span class="Statement">  @</span>
<span class="Statement"> end-handler</span></pre>
<span id=golf_copied_534 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_534' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_534, code_534, golf_copied_534)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Create the application:<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_531'>
sudo mgrg <span class="Special">-i</span> <span class="Special">-u</span> <span class="PreProc">$(</span><span class="Special">whoami</span><span class="PreProc">)</span> app</pre>
<span id=golf_copied_531 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_531' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_531, code_531, golf_copied_531)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Make it:<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_533'>
gg <span class="Special">-q</span></pre>
<span id=golf_copied_533 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_533' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_533, code_533, golf_copied_533)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Run it:<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_535'>
mgrg <span class="Special">-w</span> <span class="Constant">1</span> app</pre>
<span id=golf_copied_535 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_535' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_535, code_535, golf_copied_535)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_536'>
gg <span class="Special">-r</span> <span class="Special">--req</span><span class="Statement">=</span><span class="Statement">&quot;</span><span class="Constant">/srv</span><span class="Statement">&quot;</span> <span class="Special">--exec</span> <span class="Special">--silent-header</span></pre>
<span id=golf_copied_536 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_536' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_536, code_536, golf_copied_536)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
And the result is (assuming you have started hash example above):<br/>
<div class='ncode' style='position:relative;padding-right:16px;'>
<pre id='code_530'>
No errors from call-remote
All three service calls started.
All three service calls finished.
Added [key1]

Added [key2]

Added [key3]</pre>
<span id=golf_copied_530 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_530' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_530, code_530, golf_copied_530)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<!--BEFSAL13--><div class="vsub"><a id="See also"></a>See also</div>
 <a name='Distributed computing'></a><span style="font-weight:bold;">Distributed computing</span><br/>
<a href='/call-remote.html'>call-remote</a> &nbsp;<br/>
<a href='/new-remote.html'>new-remote</a> &nbsp;<br/>
<a href='/read-remote.html'>read-remote</a> &nbsp;<br/>
<a href='/run-remote.html'>run-remote</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='/documentation.html'>documentation</a><br/>
<a id='new-tree.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:right;background-color:white;'><a href='https://golf-lang.com' style='border-bottom:0px'><img src='https://golf-lang.com/golf.png'/></a></div><div class='vhub' style='margin-top:10px;'>&nbsp;New tree</div><hr/><span style="font-weight:bold;">Purpose</span>: Create new tree structure for fast key searching.<br/>
<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_537'>
<span class="Statement"> new-tree</span> &lt;tree&gt; \
     [<span class="Identifier"> key-as</span> <span class="Constant">&quot;positive integer&quot;</span> ] \
     [<span class="Identifier"> unsorted</span> ]
     [<span class="Identifier"> process-scope</span> ]</pre>
<span id=golf_copied_537 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_537' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_537, code_537, golf_copied_537)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
new-tree initializes a new &lt;tree&gt;. <br/>
<br/>
An tree is a hierarchical balanced binary tree structure that allows data access in O(log N) time, meaning that at most approximately "log N" comparisons are needed to find a key in it. For instance, that would mean to find a key among 1,000,000 keys it would take at most about 20 comparisons. By default (if "unsorted" is omitted), finding the next lesser or greater key is O(1), meaning iterating in a sorted order is nearly instantaneous. A tree is a hybrid tree structure (taking elements from both B and AVL varieties) optimized for in-memory access.<br/>
<br/>
Information in a tree can be inserted, updated or deleted in any order, and accessed in any order as well.<br/>
<br/>
Information in a tree is organized in nodes. Each node has a key and a value. A key is used to search for a node in a tree. By default (if "unsorted" is omitted), all nodes in a Golf tree are also connected in an ordered linked list, allowing for very fast range searches.<br/>
<div class="vsub"><a id="Keys and data"></a>Keys and data</div>
A node in a tree consists of two strings: key and value. There is no limit on the number of nodes in the tree, other than available memory. Each key in the tree must be unique. Keys should be as short as possible. Generally, longer keys take longer to search for, insert or delete. <br/>
<div class="vsub"><a id="Key comparison"></a>Key comparison</div>
In order for any data tree structure to function, a key comparison must be performed certain number of times in order to find a specific key. Keys are compared using C's strcmp() function, meaning using ASCII lexicographic order.<br/>
<div class="vsub"><a id="Number keys"></a>Number keys</div>
"key-as" clause allows to treat a key as something other than a string when it comes to ordering. When "positive integer" value is used, it will treat a key as a string representation of a positive integer number. Such numbers must be zero or positive integers in the 64 bit range, and they must not contain leading zeros, spaces or other prefix (or suffix) characters. For example, key strings may be "0", "123" or "891347". With this clause, sorting these strings according to their converted numerical values is much faster than using schemes such as prefixing numbers with zeros or spaces.<br/>
<br/>
Note that when using "positive integer", you can use numbers in any base (from 2 to 36). In fact, numbers expressed in a higher base are generally faster to search for, because they are shorter in length.<br/>
<div class="vsub"><a id="Unsorted tree"></a>Unsorted tree</div>
If "unsorted" clause is used, &lt;tree&gt; will not be sorted in a double-linked list, which means that finding the next smaller or next greater node in repetition (i.e. range search) will be done by using the tree structure and not a linked list. This is slower, as each such search is generally done in O(log N) time. Regardless, you can perform range searches in either case (see <a href='/use-cursor.html'>use-cursor</a>).<br/>
<br/>
As a rule of thumb, if you do not need range searches or your memory is scarce, use "unsorted" as it will save 2 pointers (i.e. 16 bytes) per key and insertion/deletion will be a bit faster, but be aware that range searches will be slower. <br/>
<br/>
If you need faster range searches or the extra memory is not an issue (it would be for instance extra 16MB per 1,0000,0000 keys), then do not use "unsorted", as your range searches will be faster. Note that in this case, insertion and deletion are a bit slower because they need to maintain a double linked list, however in general the effect is minimized by faster range searches. <br/>
<div class="vsub"><a id="Scope"></a>Scope</div>
A tree is accessible to the current process only, unless "process-scope" clause is used, in which case all requests served by the process can use it (see <a href='/do-once.html'>do-once</a> for a typical way to create an object with a process scope). If "process-scope" is used, then &lt;tree&gt; that will keep its nodes between all requests served by the same process; otherwise &lt;tree&gt; is purged at the end of request. <br/>
<div class="vsub"><a id="Examples"></a>Examples</div>
Create a new tree:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_538'>
<span class="Statement"> new-tree</span> my_tree</pre>
<span id=golf_copied_538 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_538' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_538, code_538, golf_copied_538)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<!--BEFSAL13--><div class="vsub"><a id="See also"></a>See also</div>
 <a name='Tree'></a><span style="font-weight:bold;">Tree</span><br/>
<a href='/delete-tree.html'>delete-tree</a> &nbsp;<br/>
<a href='/get-tree.html'>get-tree</a> &nbsp;<br/>
<a href='/new-tree.html'>new-tree</a> &nbsp;<br/>
<a href='/purge-tree.html'>purge-tree</a> &nbsp;<br/>
<a href='/read-tree.html'>read-tree</a> &nbsp;<br/>
<a href='/use-cursor.html'>use-cursor</a> &nbsp;<br/>
<a href='/write-tree.html'>write-tree</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='/documentation.html'>documentation</a><br/>
<a id='number-expressions.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:right;background-color:white;'><a href='https://golf-lang.com' style='border-bottom:0px'><img src='https://golf-lang.com/golf.png'/></a></div><div class='vhub' style='margin-top:10px;'>&nbsp;Number expressions</div><hr/>A number expression uses operators plus (+), minus (-), multiply (*), divide (/) and modulus (%), as well as parenthesis (). For example:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_539'>
<span class="Statement"> set-number</span> n1 = <span class="Constant">10</span>+(<span class="Constant">4</span>*n2-<span class="Constant">5</span>)%<span class="Constant">3</span></pre>
<span id=golf_copied_539 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_539' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_539, code_539, golf_copied_539)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
You can use number expressions anywhere number is expected as an input to any statement.<br/>
<br/>
Note that character constants (such as 'A', 'z' etc.) are considered numbers with the value equal to their single-byte ASCII equivalent (i.e. unsigned numbers 0-255), for example this will assign 65 to "num":<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_540'>
<span class="Statement"> set-number</span> num = 'A'</pre>
<span id=golf_copied_540 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_540' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_540, code_540, golf_copied_540)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Any subscripted string is also considered a number, for instance "num" would be 117 (since 's' is 115):<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_541'>
<span class="Statement"> set-string</span> str = 'some'
<span class="Statement"> set-number</span> num = str[<span class="Constant">0</span>] + <span class="Constant">2</span></pre>
<span id=golf_copied_541 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_541' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_541, code_541, golf_copied_541)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<!--BEFSAL13--><div class="vsub"><a id="See also"></a>See also</div>
 <a name='Numbers'></a><span style="font-weight:bold;">Numbers</span><br/>
<a href='/number-expressions.html'>number-expressions</a> &nbsp;<br/>
<a href='/number-string.html'>number-string</a> &nbsp;<br/>
<a href='/set-number.html'>set-number</a> &nbsp;<br/>
<a href='/string-number.html'>string-number</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='/documentation.html'>documentation</a><br/>
<a id='number-string.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:right;background-color:white;'><a href='https://golf-lang.com' style='border-bottom:0px'><img src='https://golf-lang.com/golf.png'/></a></div><div class='vhub' style='margin-top:10px;'>&nbsp;Number string</div><hr/><span style="font-weight:bold;">Purpose</span>: Convert number to string.<br/>
<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_542'>
<span class="Statement"> number-string</span> &lt;number&gt; [<span class="Type"> to</span> &lt;string&gt; ] \
     [<span class="Identifier"> base</span> &lt;base&gt; ] \
     [<span class="Type"> status</span> &lt;status&gt; ]</pre>
<span id=golf_copied_542 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_542' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_542, code_542, golf_copied_542)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
&lt;number&gt; is converted to &lt;string&gt; in "to" clause, using &lt;base&gt; in "base" clause, where &lt;base&gt; is by default 10. &lt;base&gt; can be between 2 and 36, inclusive. &lt;number&gt; can be positive or negative (i.e. signed) and can be of any integer type up to 64-bit (char, int, long, long long etc.). &nbsp;If "to" clause is omitted, then &lt;number&gt; is printed out.<br/>
<br/>
Note that any letters in &lt;string&gt; (depending on the &lt;base&gt;) are always lower-case.<br/>
<br/>
If there is an error, such as if &lt;base&gt; is incorrect, then &lt;status&gt; number (in "status" clause) is GG_ERR_FAILED, otherwise it's GG_OKAY.<br/>
<br/>
Use of number-string (and <a href='/p-num.html'>p-num</a> which is based on it) for converting and outputting numbers is high-performance and recommended if your application needs to do that often. If number-string prints out a number (i.e. "to" clause is omitted), and this is within <a href='/write-string.html'>write-string</a>, then &lt;number&gt; is output into the buffer that builds a new string.<br/>
<div class="vsub"><a id="Examples"></a>Examples</div>
The following will allocate memory for string "x" to be "801":<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_543'>
<span class="Statement"> set-number</span> x = <span class="Constant">801</span>
<span class="Statement"> number-string</span> x<span class="Type"> to</span> res</pre>
<span id=golf_copied_543 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_543' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_543, code_543, golf_copied_543)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
The following will store "-238f" to string "res":<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_544'>
<span class="Statement"> set-number</span> x = -<span class="Constant">9103</span>
<span class="Statement"> number-string</span> x<span class="Type"> to</span> res<span class="Identifier"> base</span> <span class="Constant">16</span></pre>
<span id=golf_copied_544 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_544' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_544, code_544, golf_copied_544)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
To print out a number -131:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_545'>
<span class="Statement"> set-number</span> x = -<span class="Constant">131</span>
<span class="Statement"> number-string</span> x</pre>
<span id=golf_copied_545 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_545' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_545, code_545, golf_copied_545)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<!--BEFSAL13--><div class="vsub"><a id="See also"></a>See also</div>
 <a name='Numbers'></a><span style="font-weight:bold;">Numbers</span><br/>
<a href='/number-expressions.html'>number-expressions</a> &nbsp;<br/>
<a href='/number-string.html'>number-string</a> &nbsp;<br/>
<a href='/set-number.html'>set-number</a> &nbsp;<br/>
<a href='/string-number.html'>string-number</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='/documentation.html'>documentation</a><br/>
<a id='open-file.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:right;background-color:white;'><a href='https://golf-lang.com' style='border-bottom:0px'><img src='https://golf-lang.com/golf.png'/></a></div><div class='vhub' style='margin-top:10px;'>&nbsp;Open file</div><hr/><span style="font-weight:bold;">Purpose</span>: Open file for reading and writing.<br/>
<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_546'>
<span class="Statement"> open-file</span> &lt;file name&gt;<span class="Type"> file-id</span> &lt;file id&gt; \
     [<span class="Identifier"> new-truncate</span> ] \
     [<span class="Type"> status</span> &lt;status&gt; ]</pre>
<span id=golf_copied_546 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_546' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_546, code_546, golf_copied_546)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Opens file given by &lt;file name&gt; for reading and writing and creates an open file variable identified by &lt;file id&gt;.<br/>
<br/>
&lt;file name&gt; can be a full path name, or a path relative to the application home directory (see <a href='/directories.html'>directories</a>).<br/>
<br/>
You can obtain the status of file opening via &lt;status&gt; number (in "status" clause). The &lt;status&gt; is GG_OKAY if file is opened, or GG_ERR_OPEN if could not open file.<br/>
<br/>
If "new-truncate" clause is used, a new file is created if it doesn't exist, or it is truncated if it does.<br/>
<div class="vsub"><a id="Examples"></a>Examples</div>
Create a file (or truncate an existing one), write 25,000 rows and the read back those rows and display them, then close file:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_547'>
<span class="Statement"> %%</span> /ofile<span class="Identifier"> public</span>
     <span class="Comment">// Create new file, or truncate an old file if it exists</span>
<span class="Statement">     open-file</span> <span class="Constant">&quot;testwrite&quot;</span><span class="Type"> file-id</span> nf<span class="Identifier"> new-truncate</span>

     <span class="Comment">// Write </span><span class="Constant">25000</span><span class="Comment"> rows</span>
<span class="Statement">     start-loop</span><span class="Identifier"> repeat</span> <span class="Constant">25000</span><span class="Type"> use</span> i
<span class="Statement">        ((</span> line
<span class="Statement">        @</span>some text in line <span class="Statement">&lt;&lt;p-num</span> i<span class="Statement">&gt;&gt;</span>
<span class="Statement">        ))</span><span class="Identifier"> notrim</span>
<span class="Statement">        string-length</span> line<span class="Type"> to</span> line_len
<span class="Statement">        write-file</span><span class="Identifier"> file-id</span> nf<span class="Identifier"> from</span> line<span class="Identifier"> length</span> line_len
<span class="Statement">     end-loop</span>

     <span class="Comment">// Rewind back to the beginning</span>
<span class="Statement">     file-position</span><span class="Identifier"> set</span> <span class="Constant">0</span><span class="Identifier"> file-id</span> nf

     <span class="Comment">// Read all </span><span class="Constant">25000</span><span class="Comment"> rows back, and print them out</span>
<span class="Statement">     start-loop</span><span class="Identifier"> repeat</span> <span class="Constant">25000</span><span class="Type"> use</span> i
<span class="Statement">        read-file</span><span class="Identifier"> file-id</span> nf <span class="Type"> to</span> one_item
<span class="Statement">        p-out</span> one_item
<span class="Statement">     end-loop</span>

     <span class="Comment">// Close the file</span>
<span class="Statement">     close-file</span><span class="Identifier"> file-id</span> nf
<span class="Statement"> %%</span></pre>
<span id=golf_copied_547 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_547' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_547, code_547, golf_copied_547)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<!--BEFSAL13--><div class="vsub"><a id="See also"></a>See also</div>
 <a name='Files'></a><span style="font-weight:bold;">Files</span><br/>
<a href='/close-file.html'>close-file</a> &nbsp;<br/>
<a href='/copy-file.html'>copy-file</a> &nbsp;<br/>
<a href='/delete-file.html'>delete-file</a> &nbsp;<br/>
<a href='/file-position.html'>file-position</a> &nbsp;<br/>
<a href='/file-storage.html'>file-storage</a> &nbsp;<br/>
<a href='/file-uploading.html'>file-uploading</a> &nbsp;<br/>
<a href='/lock-file.html'>lock-file</a> &nbsp;<br/>
<a href='/open-file.html'>open-file</a> &nbsp;<br/>
<a href='/read-file.html'>read-file</a> &nbsp;<br/>
<a href='/read-line.html'>read-line</a> &nbsp;<br/>
<a href='/rename-file.html'>rename-file</a> &nbsp;<br/>
<a href='/stat-file.html'>stat-file</a> &nbsp;<br/>
<a href='/temporary-file.html'>temporary-file</a> &nbsp;<br/>
<a href='/uniq-file.html'>uniq-file</a> &nbsp;<br/>
<a href='/unlock-file.html'>unlock-file</a> &nbsp;<br/>
<a href='/write-file.html'>write-file</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='/documentation.html'>documentation</a><br/>
<a id='out-header.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:right;background-color:white;'><a href='https://golf-lang.com' style='border-bottom:0px'><img src='https://golf-lang.com/golf.png'/></a></div><div class='vhub' style='margin-top:10px;'>&nbsp;Out header</div><hr/><span style="font-weight:bold;">Purpose</span>: Output HTTP header.<br/>
<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_548'>
<span class="Statement"> out-header</span><span class="Identifier"> default</span>
 |
<span class="Statement"> out-header</span><span class="Identifier"> use</span> \
     [<span class="Identifier"> content-type</span> &lt;content type&gt; ] \
     [<span class="Identifier"> download</span> [ &lt;download&gt; ] ] \
     [<span class="Identifier"> etag</span> [ &lt;etag&gt; ] ] \
     [<span class="Identifier"> file-name</span> &lt;file name&gt; ] \
     [ (<span class="Identifier"> cache-control</span> &lt;cache control&gt; ) |<span class="Identifier"> no-cache</span> ] \
     [<span class="Identifier"> status-id</span> &lt;status id&gt; ] \
     [<span class="Identifier"> status-text</span> &lt;status text&gt; ] \
     [<span class="Identifier"> custom</span> &lt;header name&gt;=&lt;header value&gt; [ , ... ] ]</pre>
<span id=golf_copied_548 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_548' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_548, code_548, golf_copied_548)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
out-header outputs HTTP header and also sends any cookies produced by <a href='/set-cookie.html'>set-cookie</a> and <a href='/delete-cookie.html'>delete-cookie</a>. A web page must have an HTTP header output before any other response. <br/>
<br/>
If out-header is not used, a default HTTP header is sent out just before the very first output (see <a href='/output-statement.html'>output-statement</a>, <a href='/p-out.html'>p-out</a> etc.) at which point any cookie updates are sent as well; this default header is the same as using "out-header default".<br/>
<br/>
If you use out-header multiple times, all but the very first one are ignored.<br/>
<br/>
If you wish to output a file (such as an image or a PDF document), do not use out-header; rather use <a href='/send-file.html'>send-file</a> instead which outputs its own header.<br/>
<br/>
The HTTP header is sent back to a client who initiated a request. You can specify any custom headers with "use" clause.<br/>
<div class="vsub"><a id="Default header"></a>Default header</div>
If no out-header is used, or if "default" clause is in place, a default header is constructed, which uses a status of 200/OK and content type of<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_549'>
 text/html;charset=utf-<span class="Constant">8</span></pre>
<span id=golf_copied_549 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_549' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_549, code_549, golf_copied_549)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
and cache control of<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_550'>
 Cache-Control:max-age=<span class="Constant">0</span>, no-cache; <span class="Statement">Pragma</span>: no-cache</pre>
<span id=golf_copied_550 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_550' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_550, code_550, golf_copied_550)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
The default header is typical for dynamically generated web pages, and most of the time you would use the default header - meaning you don't need to specify out-header statement.<br/>
<div class="vsub"><a id="Headers"></a>Headers</div>
The following are subclauses that allow setting any custom header:<br/>
<ul><li>&lt;content type&gt; is content type (such as "text/html" or "image/jpg" etc.) If you are sending a file to a client for download and you don't know its content type, you can use "application/octet-stream" for a generic binary file.<br/>
</li><li>If "download" is used without boolean variable &lt;download&gt;, or if &lt;download&gt; evaluates to true, then the file is sent to a client for downloading - otherwise the default is to display file in client.<br/>
</li><li>&lt;file name&gt; is the name of the file being sent to a client. This is not the local file name - it is the file name that client will use for its own purposes.<br/>
</li><li>&lt;cache control&gt; is the cache control HTTP header. "no-cache" instructs the client not to cache. Only one of "cache-control" and "no-cache" can be used. An example of &lt;cache control&gt;:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_551'>
<span class="Statement"> send-file</span> <span class="Constant">&quot;somepic.jpg&quot;</span><span class="Identifier"> headers cache-control</span> <span class="Constant">&quot;max-age: 3600&quot;</span></pre>
<span id=golf_copied_551 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_551' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_551, code_551, golf_copied_551)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
</li><li>If "etag" is used without boolean variable &lt;etag&gt;, or if &lt;etag&gt; evaluates to true, then "ETAG" header will be generated (a timestamp) and included, otherwise it is not. The time stamp is of last modification date of the file (and typically used to cache a file on client if it hasn't changed on the server). "etag" is useful to let the client know to download the file only once if it hasn't changed, thus saving network and computing resources. ETAG header is used only for <a href='/send-file.html'>send-file</a>.<br/>
</li><li>&lt;status id&gt; and &lt;status text&gt; are status settings for the response, as strings (such as "425" for "status-id" and "Too early" for "status-text"). <br/>
</li><li>To set any type of generic HTTP header, use "custom" subclause, where &lt;header name&gt; and &lt;header value&gt; represent the name and value of a single header. Multiple headers are separated by a comma. There is no limit on the maximum number of such headers, other than of the underyling HTTP protocol. You must not use "custom" to set headers already set elsewhere (such as "etag" for instance), as that may cause unpredictable behavior. For instance this sets two custom headers:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_552'>
<span class="Statement"> out-header</span><span class="Identifier"> use custom</span> <span class="Constant">&quot;CustomOption3&quot;</span>=<span class="Constant">&quot;CustomValue3&quot;</span>, <span class="Constant">&quot;Status&quot;</span>=<span class="Constant">&quot;418 I'm a teapot&quot;</span></pre>
<span id=golf_copied_552 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_552' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_552, code_552, golf_copied_552)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
"custom" subclause lets you use any custom headers that exist today or may be added in the future, as well as any headers of your own design.</li></ul>
You can use <a href='/silent-header.html'>silent-header</a> before output-header in order to suppress its output.<br/>
<div class="vsub"><a id="Examples"></a>Examples</div>
Sometimes you may want to output the default header immediately, for instance if the first output produces may take some time:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_553'>
<span class="Statement"> out-header</span><span class="Identifier"> default</span></pre>
<span id=golf_copied_553 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_553' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_553, code_553, golf_copied_553)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
To set a custom header for a web page that changes cache control and adds two new headers:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_554'>
<span class="Statement"> out-header</span><span class="Identifier"> use content-type</span> <span class="Constant">&quot;text/html&quot;</span><span class="Identifier"> cache-control</span> <span class="Constant">&quot;max-age:3600&quot;</span><span class="Identifier"> custom</span> <span class="Constant">&quot;some_HTTP_option&quot;</span>=<span class="Constant">&quot;value_for_some_HTTP_option&quot;</span>, <span class="Constant">&quot;some_HTTP_option_1&quot;</span>=<span class="Constant">&quot;value_for_some_HTTP_option_1&quot;</span></pre>
<span id=golf_copied_554 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_554' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_554, code_554, golf_copied_554)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<!--BEFSAL13--><div class="vsub"><a id="See also"></a>See also</div>
 <a name='Web'></a><span style="font-weight:bold;">Web</span><br/>
<a href='/call-web.html'>call-web</a> &nbsp;<br/>
<a href='/out-header.html'>out-header</a> &nbsp;<br/>
<a href='/send-file.html'>send-file</a> &nbsp;<br/>
<a href='/silent-header.html'>silent-header</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='/documentation.html'>documentation</a><br/>
<a id='output-statement.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:right;background-color:white;'><a href='https://golf-lang.com' style='border-bottom:0px'><img src='https://golf-lang.com/golf.png'/></a></div><div class='vhub' style='margin-top:10px;'>&nbsp;Output statement</div><hr/><span style="font-weight:bold;">Purpose</span>: Output text.<br/>
<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_555'>
<span class="Statement"> @</span>&lt;text&gt;

<span class="Statement"> !</span>&lt;verbatim text&gt;</pre>
<span id=golf_copied_555 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_555' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_555, code_555, golf_copied_555)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Outputting free form text is done by starting the line with "@" or "!". The text is output unencoded with a new line appended.<br/>
<br/>
With "@" statement, any <a href='/inline-code.html'>inline-code</a> executes and any output from those statements is output.<br/>
<br/>
With "!" statement, all text is output verbatim, and any inline code is not executed. This is useful when the text printed out should not be checked for any <a href='/inline-code.html'>inline-code</a>.<br/>
<br/>
All trailing whitespaces are trimmed from each source code line. If you need to write trailing whitespaces, with "@" statement you can use <a href='/p-out.html'>p-out</a> as <a href='/inline-code.html'>inline-code</a>. Maximum line length is 8KB - this is the source code line length, the actual run-time output length is unlimited.<br/>
<br/>
Note that all characters are output as they are written, including the escape character (\). If you wish to output characters requiring an escape character, such as new line and tab (as is done in C by using \n, \t etc.), use <a href='/p-out.html'>p-out</a> as <a href='/inline-code.html'>inline-code</a>.<br/>
<div class="vsub"><a id="Examples"></a>Examples</div>
Outputting "Hello there": <br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_557'>
<span class="Statement"> @</span>Hello there</pre>
<span id=golf_copied_557 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_557' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_557, code_557, golf_copied_557)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
You can use other Golf statements inlined and mixed with the text you are outputting:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_559'>
<span class="Statement"> set-string</span> weatherType=<span class="Constant">&quot;sunny&quot;</span>
<span class="Statement"> @</span>Today's weather is <span class="Statement">&lt;&lt;p-out</span> weatherType<span class="Statement">&gt;&gt;</span></pre>
<span id=golf_copied_559 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_559' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_559, code_559, golf_copied_559)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
which would output <br/>
<div class='ncode' style='position:relative;padding-right:16px;'>
<pre id='code_556'>
Today&apos;s weather is sunny</pre>
<span id=golf_copied_556 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_556' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_556, code_556, golf_copied_556)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
With "!" statement, the text is also output, and this example produces the same "Hello there" output as "@":<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_560'>
<span class="Statement"> !</span>Hello there</pre>
<span id=golf_copied_560 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_560' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_560, code_560, golf_copied_560)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
In contrast to "@" statement, "!" statement outputs all texts verbatim &nbsp;and does not execute any inline code:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_561'>
<span class="Statement"> set-string</span> weatherType=<span class="Constant">&quot;sunny&quot;</span>
<span class="Statement"> !</span>Today's weather is &lt;&lt;p-out weatherType&gt;&gt;</pre>
<span id=golf_copied_561 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_561' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_561, code_561, golf_copied_561)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
which would output <br/>
<div class='ncode' style='position:relative;padding-right:16px;'>
<pre id='code_558'>
Today&apos;s weather is &lt;&lt;p-out weatherType&gt;&gt;</pre>
<span id=golf_copied_558 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_558' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_558, code_558, golf_copied_558)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<!--BEFSAL13--><div class="vsub"><a id="See also"></a>See also</div>
 <a name='Output'></a><span style="font-weight:bold;">Output</span><br/>
<a href='/finish-output.html'>finish-output</a> &nbsp;<br/>
<a href='/flush-output.html'>flush-output</a> &nbsp;<br/>
<a href='/output-statement.html'>output-statement</a> &nbsp;<br/>
<a href='/pf-out.html'>pf-out</a> &nbsp;<br/>
<a href='/pf-url.html'>pf-url</a> &nbsp;<br/>
<a href='/pf-web.html'>pf-web</a> &nbsp;<br/>
<a href='/p-num.html'>p-num</a> &nbsp;<br/>
<a href='/p-out.html'>p-out</a> &nbsp;<br/>
<a href='/p-path.html'>p-path</a> &nbsp;<br/>
<a href='/p-source-file.html'>p-source-file</a> &nbsp;<br/>
<a href='/p-source-line.html'>p-source-line</a> &nbsp;<br/>
<a href='/p-url.html'>p-url</a> &nbsp;<br/>
<a href='/p-web.html'>p-web</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='/documentation.html'>documentation</a><br/>
<a id='pause-program.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:right;background-color:white;'><a href='https://golf-lang.com' style='border-bottom:0px'><img src='https://golf-lang.com/golf.png'/></a></div><div class='vhub' style='margin-top:10px;'>&nbsp;Pause program</div><hr/><span style="font-weight:bold;">Purpose</span>: Pause request execution.<br/>
<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_562'>
<span class="Statement"> pause-program</span> &lt;milli seconds&gt;</pre>
<span id=golf_copied_562 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_562' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_562, code_562, golf_copied_562)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
pause-program will delay request execution (i.e. sleep, meaning not utilize computing resources) for a number of &lt;milli seconds&gt;. For instance:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_563'>
<span class="Statement"> pause-program</span> <span class="Constant">1500</span></pre>
<span id=golf_copied_563 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_563' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_563, code_563, golf_copied_563)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
will pause for 1.5 seconds.<br/>
<div class="vsub"><a id="Examples"></a>Examples</div>
Pause execution for 0.25 seconds:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_564'>
<span class="Statement"> pause-program</span> <span class="Constant">250</span></pre>
<span id=golf_copied_564 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_564' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_564, code_564, golf_copied_564)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<!--BEFSAL13--><div class="vsub"><a id="See also"></a>See also</div>
 <a name='Time'></a><span style="font-weight:bold;">Time</span><br/>
<a href='/get-time.html'>get-time</a> &nbsp;<br/>
<a href='/pause-program.html'>pause-program</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='/documentation.html'>documentation</a><br/>
<a id='pf-out.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:right;background-color:white;'><a href='https://golf-lang.com' style='border-bottom:0px'><img src='https://golf-lang.com/golf.png'/></a></div><div class='vhub' style='margin-top:10px;'>&nbsp;Pf out</div><hr/><span style="font-weight:bold;">Purpose</span>: Outputs a formatted string without encoding.<br/>
<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_565'>
<span class="Statement"> pf-out</span> &lt;format&gt;<span class="Identifier"> ,</span> &lt;variable&gt; [<span class="Identifier"> ,</span> &lt;variable&gt; ]... \
     [<span class="Identifier"> to-error</span> ] \
     [<span class="Type"> to</span> &lt;string&gt; ]</pre>
<span id=golf_copied_565 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_565' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_565, code_565, golf_copied_565)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
pf-out formats a string according to the &lt;format&gt; string and a list of &lt;variable&gt;s and then outputs the result without any encoding (meaning a string is output exactly as it is, and the client may interpret such text in any way it sees fit). <br/>
<div class="vsub"><a id="Format"></a>Format</div>
&lt;format&gt; string must be a literal. Variables must follow &lt;format&gt; separated by commas in the same order as placeholders. If you use any placeholders other than specified below, or the type of variables you use do not match the type of a correspoding placeholder in &lt;format&gt;, your program will <a href='/error-handling.html'>error out</a>. You can use the following placeholders in &lt;format&gt; (see <a href='/trace-run.html'>trace-run</a> for an example of usage):<br/>
<ul><li>%s for a string<br/>
</li><li>%&lt;number&gt;s for a string output with a width of at least &lt;number&gt; (any excess filled with spaces to the left),<br/>
</li><li>%ld for a number<br/>
</li><li>%&lt;number&gt;ld for a number output with a width of at least &lt;number&gt; (any excess filled with spaces to the left)</li></ul>
&lt;format&gt; string must be present and there must be at least one &lt;variable&gt; (it means if you want to print out a simple string literal you still have to use "%s" as format).<br/>
<br/>
If "to-error" clause is used, the output is sent to "stderr", or standard output stream.<br/>
<br/>
If "to" clause is used, then the output of pf-out is stored into &lt;string&gt;. <br/>
<div class="vsub"><a id="Examples"></a>Examples</div>
To output data (the string output is "the number is 20"):<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_566'>
<span class="Statement"> pf-out</span> <span class="Constant">&quot;</span><span class="Special">%s</span><span class="Constant"> is </span><span class="Special">%d</span><span class="Constant">&quot;</span>, <span class="Constant">&quot;the number&quot;</span>, <span class="Constant">20</span></pre>
<span id=golf_copied_566 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_566' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_566, code_566, golf_copied_566)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Create a query text string by means of <a href='/write-string.html'>write-string</a> statement:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_567'>
 <span class="Comment">//</span>
 / Construct the run-time text of dynamic SQL
 <span class="Comment">//</span>
<span class="Statement"> write-string</span> qry_txt
<span class="Statement"> @</span>select * from <span class="Statement">&lt;&lt;pf-out</span> <span class="Constant">&quot;</span><span class="Special">%s</span><span class="Constant"> where id=&quot;</span><span class="Special">%ld</span><span class="Constant">&quot;, table_name, id_num&gt;&gt;</span>
<span class="Constant"> end-write-string</span></pre>
<span id=golf_copied_567 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_567' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_567, code_567, golf_copied_567)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<!--BEFSAL13--><div class="vsub"><a id="See also"></a>See also</div>
 <a name='Output'></a><span style="font-weight:bold;">Output</span><br/>
<a href='/finish-output.html'>finish-output</a> &nbsp;<br/>
<a href='/flush-output.html'>flush-output</a> &nbsp;<br/>
<a href='/output-statement.html'>output-statement</a> &nbsp;<br/>
<a href='/pf-out.html'>pf-out</a> &nbsp;<br/>
<a href='/pf-url.html'>pf-url</a> &nbsp;<br/>
<a href='/pf-web.html'>pf-web</a> &nbsp;<br/>
<a href='/p-num.html'>p-num</a> &nbsp;<br/>
<a href='/p-out.html'>p-out</a> &nbsp;<br/>
<a href='/p-path.html'>p-path</a> &nbsp;<br/>
<a href='/p-source-file.html'>p-source-file</a> &nbsp;<br/>
<a href='/p-source-line.html'>p-source-line</a> &nbsp;<br/>
<a href='/p-url.html'>p-url</a> &nbsp;<br/>
<a href='/p-web.html'>p-web</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='/documentation.html'>documentation</a><br/>
<a id='pf-url.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:right;background-color:white;'><a href='https://golf-lang.com' style='border-bottom:0px'><img src='https://golf-lang.com/golf.png'/></a></div><div class='vhub' style='margin-top:10px;'>&nbsp;Pf url</div><hr/><span style="font-weight:bold;">Purpose</span>: Outputs a URL-encoded formatted string.<br/>
<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_568'>
<span class="Statement"> pf-url</span> &lt;format&gt;<span class="Identifier"> ,</span> &lt;variable&gt; [<span class="Identifier"> ,</span> &lt;variable&gt; ]... \
     [<span class="Identifier"> to-error</span> ] \
     [<span class="Type"> to</span> &lt;string&gt; ]</pre>
<span id=golf_copied_568 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_568' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_568, code_568, golf_copied_568)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
pf-url is the same as <a href='/pf-out.html'>pf-out</a>, except that the output is URL-encoded. This means such output is suited for use in URL parameters.<br/>
<div class="vsub"><a id="Examples"></a>Examples</div>
Create a URL based on arbitrary strings used as URL parameters - for instance space would be encoded as "%20" in the final output:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_569'>
<span class="Statement"> @</span>&lt;a href='&lt;&lt;p-path&gt;&gt;/update?val=<span class="Statement">&lt;&lt;pf-url</span> <span class="Constant">&quot;Purchased </span><span class="Special">%s</span><span class="Constant"> for </span><span class="Special">%ld</span><span class="Constant"> dollars&quot;</span>, piece_desc, price<span class="Statement">&gt;&gt;</span>'&gt;Log transaction&lt;/a&gt;</pre>
<span id=golf_copied_569 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_569' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_569, code_569, golf_copied_569)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
See <a href='/pf-out.html'>pf-out</a> for more examples.<br/>
<!--BEFSAL13--><div class="vsub"><a id="See also"></a>See also</div>
 <a name='Output'></a><span style="font-weight:bold;">Output</span><br/>
<a href='/finish-output.html'>finish-output</a> &nbsp;<br/>
<a href='/flush-output.html'>flush-output</a> &nbsp;<br/>
<a href='/output-statement.html'>output-statement</a> &nbsp;<br/>
<a href='/pf-out.html'>pf-out</a> &nbsp;<br/>
<a href='/pf-url.html'>pf-url</a> &nbsp;<br/>
<a href='/pf-web.html'>pf-web</a> &nbsp;<br/>
<a href='/p-num.html'>p-num</a> &nbsp;<br/>
<a href='/p-out.html'>p-out</a> &nbsp;<br/>
<a href='/p-path.html'>p-path</a> &nbsp;<br/>
<a href='/p-source-file.html'>p-source-file</a> &nbsp;<br/>
<a href='/p-source-line.html'>p-source-line</a> &nbsp;<br/>
<a href='/p-url.html'>p-url</a> &nbsp;<br/>
<a href='/p-web.html'>p-web</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='/documentation.html'>documentation</a><br/>
<a id='pf-web.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:right;background-color:white;'><a href='https://golf-lang.com' style='border-bottom:0px'><img src='https://golf-lang.com/golf.png'/></a></div><div class='vhub' style='margin-top:10px;'>&nbsp;Pf web</div><hr/><span style="font-weight:bold;">Purpose</span>: Outputs a web-encoded formatted string.<br/>
<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_570'>
<span class="Statement"> pf-web</span> &lt;format&gt;<span class="Identifier"> ,</span> &lt;variable&gt; [<span class="Identifier"> ,</span> &lt;variable&gt; ]... \
     [<span class="Identifier"> to-error</span> ] \
     [<span class="Type"> to</span> &lt;string&gt; ]</pre>
<span id=golf_copied_570 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_570' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_570, code_570, golf_copied_570)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
pf-web is the same as <a href='/pf-out.html'>pf-out</a>, except that the output is web-encoded (or HTML-encoded). This means such output is suited for use in web pages - meaning any HTML-markup will be properly encoded.<br/>
<div class="vsub"><a id="Examples"></a>Examples</div>
Display text containing HTML tags without them being rendered in the browser:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_571'>
<span class="Statement"> pf-web</span> <span class="Constant">&quot;We use </span><span class="Special">%s</span><span class="Constant"> markup&quot;</span>, <span class="Constant">&quot;&lt;hr/&gt;&quot;</span></pre>
<span id=golf_copied_571 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_571' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_571, code_571, golf_copied_571)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
See <a href='/pf-out.html'>pf-out</a> for more examples.<br/>
<!--BEFSAL13--><div class="vsub"><a id="See also"></a>See also</div>
 <a name='Output'></a><span style="font-weight:bold;">Output</span><br/>
<a href='/finish-output.html'>finish-output</a> &nbsp;<br/>
<a href='/flush-output.html'>flush-output</a> &nbsp;<br/>
<a href='/output-statement.html'>output-statement</a> &nbsp;<br/>
<a href='/pf-out.html'>pf-out</a> &nbsp;<br/>
<a href='/pf-url.html'>pf-url</a> &nbsp;<br/>
<a href='/pf-web.html'>pf-web</a> &nbsp;<br/>
<a href='/p-num.html'>p-num</a> &nbsp;<br/>
<a href='/p-out.html'>p-out</a> &nbsp;<br/>
<a href='/p-path.html'>p-path</a> &nbsp;<br/>
<a href='/p-source-file.html'>p-source-file</a> &nbsp;<br/>
<a href='/p-source-line.html'>p-source-line</a> &nbsp;<br/>
<a href='/p-url.html'>p-url</a> &nbsp;<br/>
<a href='/p-web.html'>p-web</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='/documentation.html'>documentation</a><br/>
<a id='p-num.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:right;background-color:white;'><a href='https://golf-lang.com' style='border-bottom:0px'><img src='https://golf-lang.com/golf.png'/></a></div><div class='vhub' style='margin-top:10px;'>&nbsp;P num</div><hr/><span style="font-weight:bold;">Purpose</span>: Outputs a number.<br/>
<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_572'>
<span class="Statement"> p-num</span> &lt;number&gt;  [<span class="Identifier"> new-line</span> ]</pre>
<span id=golf_copied_572 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_572' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_572, code_572, golf_copied_572)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
p-num outputs a number given by &lt;number&gt; variable. <br/>
<br/>
If "new-line" clause is used, then a new line ("\n") is output after &lt;number&gt;.<br/>
<div class="vsub"><a id="Examples"></a>Examples</div>
To output a number to a client:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_573'>
<span class="Statement"> set-number</span> x = <span class="Constant">100</span>
<span class="Statement"> p-num</span> x</pre>
<span id=golf_copied_573 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_573' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_573, code_573, golf_copied_573)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<!--BEFSAL13--><div class="vsub"><a id="See also"></a>See also</div>
 <a name='Output'></a><span style="font-weight:bold;">Output</span><br/>
<a href='/finish-output.html'>finish-output</a> &nbsp;<br/>
<a href='/flush-output.html'>flush-output</a> &nbsp;<br/>
<a href='/output-statement.html'>output-statement</a> &nbsp;<br/>
<a href='/pf-out.html'>pf-out</a> &nbsp;<br/>
<a href='/pf-url.html'>pf-url</a> &nbsp;<br/>
<a href='/pf-web.html'>pf-web</a> &nbsp;<br/>
<a href='/p-num.html'>p-num</a> &nbsp;<br/>
<a href='/p-out.html'>p-out</a> &nbsp;<br/>
<a href='/p-path.html'>p-path</a> &nbsp;<br/>
<a href='/p-source-file.html'>p-source-file</a> &nbsp;<br/>
<a href='/p-source-line.html'>p-source-line</a> &nbsp;<br/>
<a href='/p-url.html'>p-url</a> &nbsp;<br/>
<a href='/p-web.html'>p-web</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='/documentation.html'>documentation</a><br/>
<a id='position-list.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:right;background-color:white;'><a href='https://golf-lang.com' style='border-bottom:0px'><img src='https://golf-lang.com/golf.png'/></a></div><div class='vhub' style='margin-top:10px;'>&nbsp;Position list</div><hr/><span style="font-weight:bold;">Purpose</span>: Set current element in a linked list.<br/>
<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_574'>
<span class="Statement"> position-list</span> &lt;list&gt; \
     [<span class="Identifier"> first</span> |<span class="Identifier"> last</span> |<span class="Identifier"> end</span> |<span class="Identifier"> previous</span> |<span class="Identifier"> next</span> | \
     [<span class="Type"> status</span> &lt;status&gt; ]</pre>
<span id=golf_copied_574 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_574' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_574, code_574, golf_copied_574)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
position-list changes the current element of linked &lt;list&gt;. A current element is the one that is read with <a href='/read-list.html'>read-list</a>. A newly added element is written with <a href='/write-list.html'>write-list</a> by inserting it just before the current element, thus becoming a new current element. Reading from &lt;list&gt; does not change its current element; use position-list to explicitly change it.<br/>
<br/>
To position to the first element, use "first" clause. Use "last" clause to make the last element the current one. Use "previous" and "next" to change the current element to just before or just after it. <br/>
<br/>
A position just beyond the last element in &lt;list&gt; is considered the "end" of it; in this case write-list will append an element to &lt;list&gt; and this element becomes its last, which is equivalent to using write-list statement with "append" clause. <br/>
<br/>
Use "end" clause to set current element to &lt;list&gt;'s end. Note that "end" clause is equivalent to using "next" clause on the the last element in &lt;list&gt;.<br/>
<br/>
If you attempt to position prior to the first element, after the end of &lt;list&gt;, or anywhere in an empty list, then &lt;status&gt; number (in "status" clause") is GG_ERR_EXIST, otherwise it is GG_OKAY. Note that if &lt;status&gt; is GG_ERR_EXIST, the current element will not change.<br/>
<div class="vsub"><a id="Examples"></a>Examples</div>
Position to the next element in list:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_575'>
<span class="Statement"> position-list</span> mylist<span class="Identifier"> next</span><span class="Type"> status</span> st
<span class="Statement"> if-true</span> st<span class="Identifier"> equal</span> GG_ERR_EXIST
<span class="Statement">     @</span>Beyond the end of list
<span class="Statement"> end-if</span></pre>
<span id=golf_copied_575 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_575' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_575, code_575, golf_copied_575)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Position to the first element in list:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_576'>
<span class="Statement"> position-list</span> mylist<span class="Identifier"> first</span></pre>
<span id=golf_copied_576 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_576' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_576, code_576, golf_copied_576)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<!--BEFSAL13--><div class="vsub"><a id="See also"></a>See also</div>
 <a name='Linked list'></a><span style="font-weight:bold;">Linked list</span><br/>
<a href='/delete-list.html'>delete-list</a> &nbsp;<br/>
<a href='/get-list.html'>get-list</a> &nbsp;<br/>
<a href='/new-list.html'>new-list</a> &nbsp;<br/>
<a href='/position-list.html'>position-list</a> &nbsp;<br/>
<a href='/purge-list.html'>purge-list</a> &nbsp;<br/>
<a href='/read-list.html'>read-list</a> &nbsp;<br/>
<a href='/write-list.html'>write-list</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='/documentation.html'>documentation</a><br/>
<a id='postgresql-database.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:right;background-color:white;'><a href='https://golf-lang.com' style='border-bottom:0px'><img src='https://golf-lang.com/golf.png'/></a></div><div class='vhub' style='margin-top:10px;'>&nbsp;Postgresql database</div><hr/>Postgres database configuration file has a Postgres connection string. <br/>
<br/>
You can see the parameters available at <a href='https://www.postgresql.org/docs/14/libpq-connect.html#LIBPQ-CONNSTRING'>https://www.postgresql.org/docs/14/libpq-connect.html#LIBPQ-CONNSTRING</a>. <br/>
<br/>
Most of the time, though, you may be using only a few of those options, as in:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_577'>
 user=myuser password=mypwd dbname=mydb</pre>
<span id=golf_copied_577 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_577' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_577, code_577, golf_copied_577)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
The above file has parameters "user" (Postgres user), "password" (the password for Postgres user), "dbname" (the Postgres database name). If you use peer-authenticated (i.e. passwordless) login, then omit "password" - this is when the Postgres user name is the same as your Operating System user name and where local unix domain socket is used for authentication.<br/>
<!--BEFSAL13--><div class="vsub"><a id="See also"></a>See also</div>
 <a name='Database'></a><span style="font-weight:bold;">Database</span><br/>
<a href='/begin-transaction.html'>begin-transaction</a> &nbsp;<br/>
<a href='/commit-transaction.html'>commit-transaction</a> &nbsp;<br/>
<a href='/current-row.html'>current-row</a> &nbsp;<br/>
<a href='/database-config-file.html'>database-config-file</a> &nbsp;<br/>
<a href='/db-error.html'>db-error</a> &nbsp;<br/>
<a href='/mariadb-database.html'>mariadb-database</a> &nbsp;<br/>
<a href='/postgresql-database.html'>postgresql-database</a> &nbsp;<br/>
<a href='/rollback-transaction.html'>rollback-transaction</a> &nbsp;<br/>
<a href='/run-query.html'>run-query</a> &nbsp;<br/>
<a href='/sqlite-database.html'>sqlite-database</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='/documentation.html'>documentation</a><br/>
<a id='p-out.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:right;background-color:white;'><a href='https://golf-lang.com' style='border-bottom:0px'><img src='https://golf-lang.com/golf.png'/></a></div><div class='vhub' style='margin-top:10px;'>&nbsp;P out</div><hr/><span style="font-weight:bold;">Purpose</span>: Outputs a string without encoding.<br/>
<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_578'>
<span class="Statement"> p-out</span> &lt;string&gt; [<span class="Identifier"> length</span> &lt;length&gt; ] [<span class="Identifier"> new-line</span> ]</pre>
<span id=golf_copied_578 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_578' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_578, code_578, golf_copied_578)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
p-out outputs a &lt;string&gt;, without any encoding (meaning a string is output exactly as it appears). <br/>
<br/>
If "length" clause is used, then only &lt;length&gt; leading bytes of &lt;string&gt; are output. <br/>
<br/>
If "new-line" clause is used, then a new line ("\n") is output after &lt;string&gt;.<br/>
<br/>
Note that all bytes of &lt;string&gt; are output, even if &lt;string&gt; contains null-bytes.<br/>
<div class="vsub"><a id="Examples"></a>Examples</div>
To output data verbatim to a client:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_579'>
<span class="Statement"> set-string</span> mydata=<span class="Constant">&quot;Hello world&quot;</span>
<span class="Statement"> p-out</span> mydata</pre>
<span id=golf_copied_579 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_579' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_579, code_579, golf_copied_579)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Writing to client, outputting text followed by a horizontal rule - the text is output to a client (such as browser) as it is, and the browser will interpret tags "&lt;br/&gt;" and "&lt;hr/&gt;" as a line break and a horizonal line and display them as such:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_580'>
<span class="Statement"> p-out</span> <span class="Constant">&quot;This is a non-encoded output&lt;br/&gt;&quot;</span><span class="Identifier"> new-line</span>
<span class="Statement"> p-out</span> <span class="Constant">&quot;&lt;hr/&gt;&quot;</span></pre>
<span id=golf_copied_580 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_580' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_580, code_580, golf_copied_580)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Create a query text string by means of <a href='/write-string.html'>write-string</a> statement:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_581'>
 <span class="Comment">//</span>
 <span class="Comment">// Construct the run-time text of dynamic SQL</span>
 <span class="Comment">//</span>
<span class="Statement"> write-string</span> qry_txt
<span class="Statement">    @</span>select * from <span class="Statement">&lt;&lt;p-out</span> table_name<span class="Statement">&gt;&gt;</span>
<span class="Statement"> end-write-string</span></pre>
<span id=golf_copied_581 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_581' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_581, code_581, golf_copied_581)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<!--BEFSAL13--><div class="vsub"><a id="See also"></a>See also</div>
 <a name='Output'></a><span style="font-weight:bold;">Output</span><br/>
<a href='/finish-output.html'>finish-output</a> &nbsp;<br/>
<a href='/flush-output.html'>flush-output</a> &nbsp;<br/>
<a href='/output-statement.html'>output-statement</a> &nbsp;<br/>
<a href='/pf-out.html'>pf-out</a> &nbsp;<br/>
<a href='/pf-url.html'>pf-url</a> &nbsp;<br/>
<a href='/pf-web.html'>pf-web</a> &nbsp;<br/>
<a href='/p-num.html'>p-num</a> &nbsp;<br/>
<a href='/p-out.html'>p-out</a> &nbsp;<br/>
<a href='/p-path.html'>p-path</a> &nbsp;<br/>
<a href='/p-source-file.html'>p-source-file</a> &nbsp;<br/>
<a href='/p-source-line.html'>p-source-line</a> &nbsp;<br/>
<a href='/p-url.html'>p-url</a> &nbsp;<br/>
<a href='/p-web.html'>p-web</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='/documentation.html'>documentation</a><br/>
<a id='p-path.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:right;background-color:white;'><a href='https://golf-lang.com' style='border-bottom:0px'><img src='https://golf-lang.com/golf.png'/></a></div><div class='vhub' style='margin-top:10px;'>&nbsp;P path</div><hr/><span style="font-weight:bold;">Purpose</span>: Outputs URL application and request path of a request handler.<br/>
<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_582'>
<span class="Statement"> p-path</span> &lt;request path&gt; [<span class="Identifier"> new-line</span> ]</pre>
<span id=golf_copied_582 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_582' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_582, code_582, golf_copied_582)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
p-path outputs a URL application path (see <a href='/request.html'>request</a>) with &lt;request path&gt; following immediately afterwards.<br/>
<br/>
If no "--path" option in <a href='/gg.html'>gg</a> is used to specify URL application path, then it is the same as application name prepended with a forward slash:<br/>
<div class='ncode' style='position:relative;padding-right:16px;'>
<pre id='code_584'>
/&lt;app name&gt;</pre>
<span id=golf_copied_584 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_584' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_584, code_584, golf_copied_584)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
p-path is used in construction of URLs or HTML forms (either for HTML or API) to refer back to the same application.<br/>
<br/>
Use <a href='/p-path.html'>p-path</a> to create the absolute URL path to refer back to your service so you can issue <a href='/request.html'>request</a>s to it. <br/>
<br/>
For example, this is a link that specifies request to service "show-notes":<br/>
<div class='htmlcode' style='position:relative;padding-right:16px;'>
<pre id='code_583'>
@<span class="Identifier">&lt;</span><span class="Statement">a</span><span class="Identifier"> </span><span class="Type">href</span><span class="Identifier">=</span><span class="Constant">&quot;&lt;&lt;p-path &quot;</span><span class="Identifier">/show-notes</span><span class="Constant">&quot;&gt;&gt;?date=yesterday&quot;</span><span class="Identifier">&gt;</span><span class="Underlined">Show Notes</span><span class="Identifier">&lt;/</span><span class="Statement">a</span><span class="Identifier">&gt;</span></pre>
<span id=golf_copied_583 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_583' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_583, code_583, golf_copied_583)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
If you are building HTML forms, you can add a note with:<br/>
<div class='htmlcode' style='position:relative;padding-right:16px;'>
<pre id='code_585'>
@<span class="Identifier">&lt;</span><span class="Statement">form</span><span class="Identifier"> </span><span class="Type">action</span><span class="Identifier">=</span><span class="Constant">'&lt;&lt;p-path &quot;/add-note&quot;&gt;&gt;'</span><span class="Identifier"> </span><span class="Type">method</span><span class="Identifier">=</span><span class="Constant">&quot;POST&quot;</span><span class="Identifier">&gt;</span>
@<span class="Identifier">&lt;</span><span class="Statement">input</span><span class="Identifier"> </span><span class="Type">type</span><span class="Identifier">=</span><span class="Constant">&quot;text&quot;</span><span class="Identifier"> </span><span class="Type">name</span><span class="Identifier">=</span><span class="Constant">&quot;note&quot;</span><span class="Identifier"> </span><span class="Type">value</span><span class="Identifier">=</span><span class="Constant">&quot;&quot;</span><span class="Identifier">&gt;</span>
@<span class="Identifier">&lt;/</span><span class="Statement">form</span><span class="Identifier">&gt;</span></pre>
<span id=golf_copied_585 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_585' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_585, code_585, golf_copied_585)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
See <a href='/request.html'>request</a> for more on URL structure.<br/>
<br/>
If "new-line" clause is used, then a new line ("\n") is output after the URL path.<br/>
<!--BEFSAL13--><div class="vsub"><a id="See also"></a>See also</div>
 <a name='Output'></a><span style="font-weight:bold;">Output</span><br/>
<a href='/finish-output.html'>finish-output</a> &nbsp;<br/>
<a href='/flush-output.html'>flush-output</a> &nbsp;<br/>
<a href='/output-statement.html'>output-statement</a> &nbsp;<br/>
<a href='/pf-out.html'>pf-out</a> &nbsp;<br/>
<a href='/pf-url.html'>pf-url</a> &nbsp;<br/>
<a href='/pf-web.html'>pf-web</a> &nbsp;<br/>
<a href='/p-num.html'>p-num</a> &nbsp;<br/>
<a href='/p-out.html'>p-out</a> &nbsp;<br/>
<a href='/p-path.html'>p-path</a> &nbsp;<br/>
<a href='/p-source-file.html'>p-source-file</a> &nbsp;<br/>
<a href='/p-source-line.html'>p-source-line</a> &nbsp;<br/>
<a href='/p-url.html'>p-url</a> &nbsp;<br/>
<a href='/p-web.html'>p-web</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='/documentation.html'>documentation</a><br/>
<a id='p-source-file.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:right;background-color:white;'><a href='https://golf-lang.com' style='border-bottom:0px'><img src='https://golf-lang.com/golf.png'/></a></div><div class='vhub' style='margin-top:10px;'>&nbsp;P source file</div><hr/><span style="font-weight:bold;">Purpose</span>: Outputs the file name of the current source file.<br/>
<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_586'>
<span class="Statement"> p-source-file</span> [<span class="Identifier"> new-line</span> ]</pre>
<span id=golf_copied_586 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_586' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_586, code_586, golf_copied_586)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
p-source-file outputs the file name (relative to the source code directory) of the source file where the statement is located; this is often used for debugging.<br/>
<br/>
If "new-line" clause is used, then a new line ("\n") is output afterwards.<br/>
<div class="vsub"><a id="Examples"></a>Examples</div>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_587'>
<span class="Statement"> @</span>This file is <span class="Statement">&lt;&lt;p-source-file&gt;&gt;</span></pre>
<span id=golf_copied_587 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_587' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_587, code_587, golf_copied_587)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<!--BEFSAL13--><div class="vsub"><a id="See also"></a>See also</div>
 <a name='Output'></a><span style="font-weight:bold;">Output</span><br/>
<a href='/finish-output.html'>finish-output</a> &nbsp;<br/>
<a href='/flush-output.html'>flush-output</a> &nbsp;<br/>
<a href='/output-statement.html'>output-statement</a> &nbsp;<br/>
<a href='/pf-out.html'>pf-out</a> &nbsp;<br/>
<a href='/pf-url.html'>pf-url</a> &nbsp;<br/>
<a href='/pf-web.html'>pf-web</a> &nbsp;<br/>
<a href='/p-num.html'>p-num</a> &nbsp;<br/>
<a href='/p-out.html'>p-out</a> &nbsp;<br/>
<a href='/p-path.html'>p-path</a> &nbsp;<br/>
<a href='/p-source-file.html'>p-source-file</a> &nbsp;<br/>
<a href='/p-source-line.html'>p-source-line</a> &nbsp;<br/>
<a href='/p-url.html'>p-url</a> &nbsp;<br/>
<a href='/p-web.html'>p-web</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='/documentation.html'>documentation</a><br/>
<a id='p-source-line.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:right;background-color:white;'><a href='https://golf-lang.com' style='border-bottom:0px'><img src='https://golf-lang.com/golf.png'/></a></div><div class='vhub' style='margin-top:10px;'>&nbsp;P source line</div><hr/><span style="font-weight:bold;">Purpose</span>: Outputs current line number in the source file.<br/>
<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_588'>
<span class="Statement"> p-source-line</span> [<span class="Identifier"> new-line</span> ]</pre>
<span id=golf_copied_588 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_588' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_588, code_588, golf_copied_588)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
p-source-line outputs the line number in the source file where the statement is located. It is often used for debugging purposes.<br/>
<br/>
If "new-line" clause is used, then a new line ("\n") is output afterwards.<br/>
<div class="vsub"><a id="Examples"></a>Examples</div>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_589'>
<span class="Statement"> @</span>This line is #<span class="Statement">&lt;&lt;p-source-line&gt;&gt;</span></pre>
<span id=golf_copied_589 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_589' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_589, code_589, golf_copied_589)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<!--BEFSAL13--><div class="vsub"><a id="See also"></a>See also</div>
 <a name='Output'></a><span style="font-weight:bold;">Output</span><br/>
<a href='/finish-output.html'>finish-output</a> &nbsp;<br/>
<a href='/flush-output.html'>flush-output</a> &nbsp;<br/>
<a href='/output-statement.html'>output-statement</a> &nbsp;<br/>
<a href='/pf-out.html'>pf-out</a> &nbsp;<br/>
<a href='/pf-url.html'>pf-url</a> &nbsp;<br/>
<a href='/pf-web.html'>pf-web</a> &nbsp;<br/>
<a href='/p-num.html'>p-num</a> &nbsp;<br/>
<a href='/p-out.html'>p-out</a> &nbsp;<br/>
<a href='/p-path.html'>p-path</a> &nbsp;<br/>
<a href='/p-source-file.html'>p-source-file</a> &nbsp;<br/>
<a href='/p-source-line.html'>p-source-line</a> &nbsp;<br/>
<a href='/p-url.html'>p-url</a> &nbsp;<br/>
<a href='/p-web.html'>p-web</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='/documentation.html'>documentation</a><br/>
<a id='purge-array.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:right;background-color:white;'><a href='https://golf-lang.com' style='border-bottom:0px'><img src='https://golf-lang.com/golf.png'/></a></div><div class='vhub' style='margin-top:10px;'>&nbsp;Purge array</div><hr/><span style="font-weight:bold;">Purpose</span>: Purge an array.<br/>
<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_590'>
<span class="Statement"> purge-array</span> &lt;array&gt;</pre>
<span id=golf_copied_590 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_590' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_590, code_590, golf_copied_590)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
purge-array deletes all elements from &lt;array&gt; that was created with <a href='/new-array.html'>new-array</a>. <br/>
<br/>
After purge-array, you can use it without calling <a href='/new-array.html'>new-array</a> again; the array is initialized as if it was just created that way.<br/>
<div class="vsub"><a id="Examples"></a>Examples</div>
Create an array, put some data in it and then delete the data:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_591'>
<span class="Statement"> new-array</span> arr
<span class="Statement"> write-array</span> arr<span class="Identifier"> key</span> <span class="Constant">50</span><span class="Identifier"> value</span> <span class="Constant">&quot;myvalue&quot;</span>
<span class="Statement"> purge-array</span> arr</pre>
<span id=golf_copied_591 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_591' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_591, code_591, golf_copied_591)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
See <a href='/read-array.html'>read-array</a> for more examples.<br/>
<!--BEFSAL13--><div class="vsub"><a id="See also"></a>See also</div>
 <a name='Array'></a><span style="font-weight:bold;">Array</span><br/>
<a href='/new-array.html'>new-array</a> &nbsp;<br/>
<a href='/purge-array.html'>purge-array</a> &nbsp;<br/>
<a href='/read-array.html'>read-array</a> &nbsp;<br/>
<a href='/write-array.html'>write-array</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='/documentation.html'>documentation</a><br/>
<a id='purge-fifo.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:right;background-color:white;'><a href='https://golf-lang.com' style='border-bottom:0px'><img src='https://golf-lang.com/golf.png'/></a></div><div class='vhub' style='margin-top:10px;'>&nbsp;Purge fifo</div><hr/><span style="font-weight:bold;">Purpose</span>: Delete FIFO list data.<br/>
<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_592'>
<span class="Statement"> purge-fifo</span> &lt;list&gt;</pre>
<span id=golf_copied_592 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_592' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_592, code_592, golf_copied_592)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
purge-fifo will delete all elements from the FIFO &lt;list&gt;, created by <a href='/new-fifo.html'>new-fifo</a>. The list is then empty and you can still put data into it, and get data from it afterwards, without having to call <a href='/new-fifo.html'>new-fifo</a> again.<br/>
<br/>
All keys or values stored in the list are also deleted.<br/>
<div class="vsub"><a id="Examples"></a>Examples</div>
See <a href='/read-fifo.html'>read-fifo</a>.<br/>
<!--BEFSAL13--><div class="vsub"><a id="See also"></a>See also</div>
 <a name='FIFO'></a><span style="font-weight:bold;">FIFO</span><br/>
<a href='/delete-fifo.html'>delete-fifo</a> &nbsp;<br/>
<a href='/new-fifo.html'>new-fifo</a> &nbsp;<br/>
<a href='/purge-fifo.html'>purge-fifo</a> &nbsp;<br/>
<a href='/read-fifo.html'>read-fifo</a> &nbsp;<br/>
<a href='/rewind-fifo.html'>rewind-fifo</a> &nbsp;<br/>
<a href='/write-fifo.html'>write-fifo</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='/documentation.html'>documentation</a><br/>
<a id='purge-hash.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:right;background-color:white;'><a href='https://golf-lang.com' style='border-bottom:0px'><img src='https://golf-lang.com/golf.png'/></a></div><div class='vhub' style='margin-top:10px;'>&nbsp;Purge hash</div><hr/><span style="font-weight:bold;">Purpose</span>: Purge a hash.<br/>
<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_593'>
<span class="Statement"> purge-hash</span> &lt;hash&gt;</pre>
<span id=golf_copied_593 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_593' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_593, code_593, golf_copied_593)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
purge-hash deletes all elements from &lt;hash&gt; that was created with <a href='/new-hash.html'>new-hash</a>. <br/>
<br/>
After purge-hash, you can use it without calling <a href='/new-hash.html'>new-hash</a> again. Note however, that "average-reads" statistics (see <a href='/get-hash.html'>get-hash</a>) is not reset - it keeps being computed and remains for the life of the hash.<br/>
<div class="vsub"><a id="Examples"></a>Examples</div>
Create a hash, put some data in it and then delete the data:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_594'>
<span class="Statement"> new-hash</span> h
<span class="Statement"> write-hash</span> h<span class="Identifier"> key</span> <span class="Constant">&quot;mykey&quot;</span><span class="Identifier"> value</span> <span class="Constant">&quot;myvalue&quot;</span>
<span class="Statement"> purge-hash</span> h</pre>
<span id=golf_copied_594 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_594' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_594, code_594, golf_copied_594)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
See <a href='/read-hash.html'>read-hash</a> for more examples.<br/>
<!--BEFSAL13--><div class="vsub"><a id="See also"></a>See also</div>
 <a name='Hash'></a><span style="font-weight:bold;">Hash</span><br/>
<a href='/get-hash.html'>get-hash</a> &nbsp;<br/>
<a href='/new-hash.html'>new-hash</a> &nbsp;<br/>
<a href='/purge-hash.html'>purge-hash</a> &nbsp;<br/>
<a href='/read-hash.html'>read-hash</a> &nbsp;<br/>
<a href='/resize-hash.html'>resize-hash</a> &nbsp;<br/>
<a href='/write-hash.html'>write-hash</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='/documentation.html'>documentation</a><br/>
<a id='purge-lifo.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:right;background-color:white;'><a href='https://golf-lang.com' style='border-bottom:0px'><img src='https://golf-lang.com/golf.png'/></a></div><div class='vhub' style='margin-top:10px;'>&nbsp;Purge lifo</div><hr/><span style="font-weight:bold;">Purpose</span>: Delete LIFO list data.<br/>
<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_595'>
<span class="Statement"> purge-lifo</span> &lt;list&gt;</pre>
<span id=golf_copied_595 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_595' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_595, code_595, golf_copied_595)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
purge-lifo will delete all elements from the LIFO &lt;list&gt; created by <a href='/new-lifo.html'>new-lifo</a>, including all keys and values. The list is then empty and you can still put data into it, and get data from it afterwards, without having to call <a href='/new-lifo.html'>new-lifo</a> again.<br/>
<div class="vsub"><a id="Examples"></a>Examples</div>
See <a href='/read-lifo.html'>read-lifo</a>.<br/>
<!--BEFSAL13--><div class="vsub"><a id="See also"></a>See also</div>
 <a name='LIFO'></a><span style="font-weight:bold;">LIFO</span><br/>
<a href='/delete-lifo.html'>delete-lifo</a> &nbsp;<br/>
<a href='/new-lifo.html'>new-lifo</a> &nbsp;<br/>
<a href='/purge-lifo.html'>purge-lifo</a> &nbsp;<br/>
<a href='/read-lifo.html'>read-lifo</a> &nbsp;<br/>
<a href='/rewind-lifo.html'>rewind-lifo</a> &nbsp;<br/>
<a href='/write-lifo.html'>write-lifo</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='/documentation.html'>documentation</a><br/>
<a id='purge-list.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:right;background-color:white;'><a href='https://golf-lang.com' style='border-bottom:0px'><img src='https://golf-lang.com/golf.png'/></a></div><div class='vhub' style='margin-top:10px;'>&nbsp;Purge list</div><hr/><span style="font-weight:bold;">Purpose</span>: Delete linked list data.<br/>
<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_596'>
<span class="Statement"> purge-list</span> &lt;list&gt;</pre>
<span id=golf_copied_596 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_596' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_596, code_596, golf_copied_596)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
purge-list will delete all elements (including their keys and values) from the linked &lt;list&gt;, created by <a href='/new-list.html'>new-list</a>. The list is then empty and you can still put data into it, and get data from it afterwards, without having to call <a href='/new-list.html'>new-list</a> again.<br/>
<div class="vsub"><a id="Examples"></a>Examples</div>
See <a href='/read-list.html'>read-list</a>.<br/>
<!--BEFSAL13--><div class="vsub"><a id="See also"></a>See also</div>
 <a name='Linked list'></a><span style="font-weight:bold;">Linked list</span><br/>
<a href='/delete-list.html'>delete-list</a> &nbsp;<br/>
<a href='/get-list.html'>get-list</a> &nbsp;<br/>
<a href='/new-list.html'>new-list</a> &nbsp;<br/>
<a href='/position-list.html'>position-list</a> &nbsp;<br/>
<a href='/purge-list.html'>purge-list</a> &nbsp;<br/>
<a href='/read-list.html'>read-list</a> &nbsp;<br/>
<a href='/write-list.html'>write-list</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='/documentation.html'>documentation</a><br/>
<a id='purge-tree.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:right;background-color:white;'><a href='https://golf-lang.com' style='border-bottom:0px'><img src='https://golf-lang.com/golf.png'/></a></div><div class='vhub' style='margin-top:10px;'>&nbsp;Purge tree</div><hr/><span style="font-weight:bold;">Purpose</span>: Delete all tree nodes.<br/>
<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_597'>
<span class="Statement"> purge-tree</span> &lt;tree&gt;</pre>
<span id=golf_copied_597 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_597' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_597, code_597, golf_copied_597)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
purge-tree will delete all &lt;tree&gt; nodes; &lt;tree&gt; must have been created with <a href='/new-tree.html'>new-tree</a>. All of &lt;tree&gt;'s nodes, and their keys/values all deleted.<br/>
<br/>
After purge-tree, the tree is empty and you can use it again (write into it, read from it etc.).<br/>
<div class="vsub"><a id="Examples"></a>Examples</div>
Delete all tree data:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_598'>
<span class="Statement"> new-tree</span> mytree
<span class="Statement"> .</span>..
<span class="Statement"> purge-tree</span> mytree</pre>
<span id=golf_copied_598 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_598' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_598, code_598, golf_copied_598)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<!--BEFSAL13--><div class="vsub"><a id="See also"></a>See also</div>
 <a name='Tree'></a><span style="font-weight:bold;">Tree</span><br/>
<a href='/delete-tree.html'>delete-tree</a> &nbsp;<br/>
<a href='/get-tree.html'>get-tree</a> &nbsp;<br/>
<a href='/new-tree.html'>new-tree</a> &nbsp;<br/>
<a href='/purge-tree.html'>purge-tree</a> &nbsp;<br/>
<a href='/read-tree.html'>read-tree</a> &nbsp;<br/>
<a href='/use-cursor.html'>use-cursor</a> &nbsp;<br/>
<a href='/write-tree.html'>write-tree</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='/documentation.html'>documentation</a><br/>
<a id='p-url.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:right;background-color:white;'><a href='https://golf-lang.com' style='border-bottom:0px'><img src='https://golf-lang.com/golf.png'/></a></div><div class='vhub' style='margin-top:10px;'>&nbsp;P url</div><hr/><span style="font-weight:bold;">Purpose</span>: Outputs a URL-encoded string.<br/>
<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_599'>
<span class="Statement"> p-url</span> &lt;string&gt; [<span class="Identifier"> length</span> &lt;length&gt; ]  [<span class="Identifier"> new-line</span> ]</pre>
<span id=golf_copied_599 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_599' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_599, code_599, golf_copied_599)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
p-url is the same as <a href='/p-out.html'>p-out</a>, except that the output is URL-encoded. This means such output is suited for use in URL parameters.<br/>
<br/>
If "length" clause is used, then only &lt;length&gt; leading bytes of &lt;string&gt; are URL-encoded and then output. <br/>
<br/>
If "new-line" clause is used, then a new line ("\n") is output after encoded &lt;string&gt;.<br/>
<div class="vsub"><a id="Examples"></a>Examples</div>
Create a URL based on arbitrary strings used as URL parameters - for instance a space would be encoded as "%20" in the final output:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_600'>
<span class="Statement"> @</span>&lt;a href='&lt;&lt;p-path&gt;&gt;/update?item=<span class="Statement">&lt;&lt;p-url</span> item_name<span class="Statement">&gt;&gt;</span>'&gt;Update&lt;/a&gt;</pre>
<span id=golf_copied_600 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_600' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_600, code_600, golf_copied_600)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
See <a href='/p-out.html'>p-out</a> for more examples.<br/>
<!--BEFSAL13--><div class="vsub"><a id="See also"></a>See also</div>
 <a name='Output'></a><span style="font-weight:bold;">Output</span><br/>
<a href='/finish-output.html'>finish-output</a> &nbsp;<br/>
<a href='/flush-output.html'>flush-output</a> &nbsp;<br/>
<a href='/output-statement.html'>output-statement</a> &nbsp;<br/>
<a href='/pf-out.html'>pf-out</a> &nbsp;<br/>
<a href='/pf-url.html'>pf-url</a> &nbsp;<br/>
<a href='/pf-web.html'>pf-web</a> &nbsp;<br/>
<a href='/p-num.html'>p-num</a> &nbsp;<br/>
<a href='/p-out.html'>p-out</a> &nbsp;<br/>
<a href='/p-path.html'>p-path</a> &nbsp;<br/>
<a href='/p-source-file.html'>p-source-file</a> &nbsp;<br/>
<a href='/p-source-line.html'>p-source-line</a> &nbsp;<br/>
<a href='/p-url.html'>p-url</a> &nbsp;<br/>
<a href='/p-web.html'>p-web</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='/documentation.html'>documentation</a><br/>
<a id='p-web.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:right;background-color:white;'><a href='https://golf-lang.com' style='border-bottom:0px'><img src='https://golf-lang.com/golf.png'/></a></div><div class='vhub' style='margin-top:10px;'>&nbsp;P web</div><hr/><span style="font-weight:bold;">Purpose</span>: Outputs a web-encoded string.<br/>
<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_601'>
<span class="Statement"> p-web</span> &lt;string&gt; [<span class="Identifier"> length</span> &lt;length&gt; ] [<span class="Identifier"> new-line</span> ]</pre>
<span id=golf_copied_601 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_601' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_601, code_601, golf_copied_601)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
p-web is the same as <a href='/p-out.html'>p-out</a>, except that the output is web-encoded (or HTML-encoded). This means such output is suited for use in web pages - the text will be displayed verbatim without HTML-markup being interpreted.<br/>
<br/>
If "length" clause is used, then only &lt;length&gt; leading bytes of &lt;string&gt; are web-encoded and then output. <br/>
<br/>
If "new-line" clause is used, then a new line ("\n") is output after encoded &lt;string&gt;.<br/>
<div class="vsub"><a id="Examples"></a>Examples</div>
Display "We use &lt;hr/&gt; markup" text, without "&lt;hr/&gt;" being displayed as a horizontal line:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_602'>
<span class="Statement"> p-web</span> <span class="Constant">&quot;We use &lt;hr/&gt; markup&quot;</span></pre>
<span id=golf_copied_602 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_602' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_602, code_602, golf_copied_602)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
See <a href='/p-out.html'>p-out</a> for more examples.<br/>
<!--BEFSAL13--><div class="vsub"><a id="See also"></a>See also</div>
 <a name='Output'></a><span style="font-weight:bold;">Output</span><br/>
<a href='/finish-output.html'>finish-output</a> &nbsp;<br/>
<a href='/flush-output.html'>flush-output</a> &nbsp;<br/>
<a href='/output-statement.html'>output-statement</a> &nbsp;<br/>
<a href='/pf-out.html'>pf-out</a> &nbsp;<br/>
<a href='/pf-url.html'>pf-url</a> &nbsp;<br/>
<a href='/pf-web.html'>pf-web</a> &nbsp;<br/>
<a href='/p-num.html'>p-num</a> &nbsp;<br/>
<a href='/p-out.html'>p-out</a> &nbsp;<br/>
<a href='/p-path.html'>p-path</a> &nbsp;<br/>
<a href='/p-source-file.html'>p-source-file</a> &nbsp;<br/>
<a href='/p-source-line.html'>p-source-line</a> &nbsp;<br/>
<a href='/p-url.html'>p-url</a> &nbsp;<br/>
<a href='/p-web.html'>p-web</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='/documentation.html'>documentation</a><br/>
<a id='random-crypto.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:right;background-color:white;'><a href='https://golf-lang.com' style='border-bottom:0px'><img src='https://golf-lang.com/golf.png'/></a></div><div class='vhub' style='margin-top:10px;'>&nbsp;Random crypto</div><hr/><span style="font-weight:bold;">Purpose</span>: Obtain a random string for cryptographic use.<br/>
<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_603'>
<span class="Statement"> random-crypto</span><span class="Type"> to</span> &lt;random string&gt; \
     [<span class="Identifier"> length</span> &lt;string length&gt; ]</pre>
<span id=golf_copied_603 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_603' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_603, code_603, golf_copied_603)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
random-crypto obtains a random string of length &lt;string length&gt;. This statement uses a cryptographically secure pseudo random generator (CSPRNG) from OpenSSL library. &nbsp;If "length" clause is omitted, the length is 20 by default. <br/>
<br/>
The value generated is always binary and may contain null-characters and is null-terminated.<br/>
<br/>
Use this statement only when needed for specific cryptographic uses. In all other cases, use <a href='/random-string.html'>random-string</a> which is considerably faster.<br/>
<div class="vsub"><a id="Examples"></a>Examples</div>
Get a 20-digit long random binary value:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_604'>
<span class="Statement"> random-crypto</span><span class="Type"> to</span> str<span class="Identifier"> length</span> <span class="Constant">20</span></pre>
<span id=golf_copied_604 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_604' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_604, code_604, golf_copied_604)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<!--BEFSAL13--><div class="vsub"><a id="See also"></a>See also</div>
 <a name='Encryption'></a><span style="font-weight:bold;">Encryption</span><br/>
<a href='/decrypt-data.html'>decrypt-data</a> &nbsp;<br/>
<a href='/derive-key.html'>derive-key</a> &nbsp;<br/>
<a href='/encrypt-data.html'>encrypt-data</a> &nbsp;<br/>
<a href='/hash-string.html'>hash-string</a> &nbsp;<br/>
<a href='/hmac-string.html'>hmac-string</a> &nbsp;<br/>
<a href='/random-crypto.html'>random-crypto</a> &nbsp;<br/>
<a href='/random-string.html'>random-string</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='/documentation.html'>documentation</a><br/>
<a id='random-string.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:right;background-color:white;'><a href='https://golf-lang.com' style='border-bottom:0px'><img src='https://golf-lang.com/golf.png'/></a></div><div class='vhub' style='margin-top:10px;'>&nbsp;Random string</div><hr/><span style="font-weight:bold;">Purpose</span>: Obtain a random string.<br/>
<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_605'>
<span class="Statement"> random-string</span><span class="Type"> to</span> &lt;random string&gt; \
     [<span class="Identifier"> length</span> &lt;string length&gt; ] \
     [<span class="Identifier"> number</span> |<span class="Identifier"> binary</span> ]</pre>
<span id=golf_copied_605 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_605' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_605, code_605, golf_copied_605)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
random-string obtains a random string of length &lt;string length&gt;. If "length" clause is omitted, the length is 20 by default. <br/>
<br/>
If "number" clause is used, then the resulting string is composed of digits only ("0" through "9").<br/>
<br/>
If "binary" clause is used, then the resulting string is binary, i.e. each byte can have an unsigned value of 0-255. <br/>
<br/>
By default, if neither "number" or "binary" is used, the resulting string is alphanumeric, i.e. digits ("0" through "9") and alphabet letters ("a"-"z" and "A"-"Z") are used only.<br/>
<br/>
Random generator is based on the Linux random() generator seeded by local process properties such as its PID and time. A single process is seeded once, and thus any number of requests served by the same process will use a subset of the process' random sequence. Due to joint entropy, each result given to any request is random, not just within a single request, but among any number of different requests.<br/>
<div class="vsub"><a id="Examples"></a>Examples</div>
Get a 100-digit long random value (as an alphanumeric string):<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_606'>
<span class="Statement"> random-string</span><span class="Type"> to</span> str<span class="Identifier"> length</span> <span class="Constant">100</span>
<span class="Statement"> pf-out</span> <span class="Constant">&quot;</span><span class="Special">%s</span><span class="Special">\n</span><span class="Constant">&quot;</span>, str</pre>
<span id=golf_copied_606 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_606' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_606, code_606, golf_copied_606)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Get a random number of length 10 in string representation:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_607'>
<span class="Statement"> random-string</span><span class="Type"> to</span> str<span class="Identifier"> length</span> <span class="Constant">10</span><span class="Identifier"> number</span>
<span class="Statement"> pf-out</span> <span class="Constant">&quot;</span><span class="Special">%s</span><span class="Special">\n</span><span class="Constant">&quot;</span>, str</pre>
<span id=golf_copied_607 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_607' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_607, code_607, golf_copied_607)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Get a random binary value that is 8 bytes in length - this value may contain null bytes (i.e. it will contain bytes with values ranging from 0 to 255):<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_608'>
<span class="Statement"> random-string</span><span class="Type"> to</span> str<span class="Identifier"> length</span> <span class="Constant">8</span><span class="Identifier"> binary</span></pre>
<span id=golf_copied_608 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_608' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_608, code_608, golf_copied_608)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<!--BEFSAL13--><div class="vsub"><a id="See also"></a>See also</div>
 <a name='Encryption'></a><span style="font-weight:bold;">Encryption</span><br/>
<a href='/decrypt-data.html'>decrypt-data</a> &nbsp;<br/>
<a href='/derive-key.html'>derive-key</a> &nbsp;<br/>
<a href='/encrypt-data.html'>encrypt-data</a> &nbsp;<br/>
<a href='/hash-string.html'>hash-string</a> &nbsp;<br/>
<a href='/hmac-string.html'>hmac-string</a> &nbsp;<br/>
<a href='/random-crypto.html'>random-crypto</a> &nbsp;<br/>
<a href='/random-string.html'>random-string</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='/documentation.html'>documentation</a><br/>
<a id='read-array.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:right;background-color:white;'><a href='https://golf-lang.com' style='border-bottom:0px'><img src='https://golf-lang.com/golf.png'/></a></div><div class='vhub' style='margin-top:10px;'>&nbsp;Read array</div><hr/><span style="font-weight:bold;">Purpose</span>: Get data from an array.<br/>
<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_609'>
<span class="Statement"> read-array</span> &lt;array&gt; \
    <span class="Identifier"> key</span> &lt;key&gt; \
    <span class="Type"> value</span> &lt;value&gt; \
     [<span class="Identifier"> delete</span> [ &lt;delete&gt; ] ] \
     [<span class="Type"> status</span> &lt;status&gt; ]</pre>
<span id=golf_copied_609 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_609' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_609, code_609, golf_copied_609)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
read-array will obtain an element from &lt;array&gt;, which is a string &lt;value&gt; (in "value" clause) based on a number &lt;key&gt; (in "key" clause). &lt;key&gt; is a number from 0 up to (excluding) the currently allocated array size. Note that array may be allocated beyond the highest index of an element written to it. &lt;array&gt; was created by <a href='/new-array.html'>new-array</a>. <br/>
<br/>
You can also delete an element from the array by using "delete" clause - the &lt;value&gt; is still obtained though it is no longer in the array. The array element is deleted if "delete" clause is used without boolean variable &lt;delete&gt;, or if &lt;delete&gt; evaluates to true.<br/>
<br/>
If no &lt;key&gt; was found in the array (meaning an array element with index &lt;key&gt; was either never written or was deleted), then &lt;status&gt; number (in "status" clause) is GG_ERR_EXIST and &lt;value&gt; is unchanged, otherwise &lt;status&gt; is GG_OKAY. <br/>
<div class="vsub"><a id="Examples"></a>Examples</div>
In this example, a new array is created, a value is written to it, and then the value is obtained and the element deleted; return status is checked:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_610'>
 <span class="Comment">// Create new array</span>
<span class="Statement"> new-array</span> arr

 <span class="Comment">// Write to array</span>
<span class="Statement"> write-array</span> arr<span class="Identifier"> key</span> <span class="Constant">500</span><span class="Identifier"> value</span> <span class="Constant">&quot;some data&quot;</span>

 <span class="Comment">// Read from array</span>
<span class="Statement"> read-array</span> arr<span class="Identifier"> key</span> <span class="Constant">500</span><span class="Type"> value</span> res<span class="Type"> status</span> st<span class="Identifier"> delete</span>
<span class="Statement"> if-true</span> st<span class="Identifier"> equal</span> GG_ERR_EXIST
<span class="Statement">     @</span>No data in the array at index <span class="Constant">500</span>!
<span class="Statement"> else-if</span>
<span class="Statement">     @</span>Deleted value is <span class="Statement">&lt;&lt;p-out</span> res<span class="Statement">&gt;&gt;</span>
<span class="Statement"> end-if</span></pre>
<span id=golf_copied_610 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_610' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_610, code_610, golf_copied_610)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<!--BEFSAL13--><div class="vsub"><a id="See also"></a>See also</div>
 <a name='Array'></a><span style="font-weight:bold;">Array</span><br/>
<a href='/new-array.html'>new-array</a> &nbsp;<br/>
<a href='/purge-array.html'>purge-array</a> &nbsp;<br/>
<a href='/read-array.html'>read-array</a> &nbsp;<br/>
<a href='/write-array.html'>write-array</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='/documentation.html'>documentation</a><br/>
<a id='read-fifo.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:right;background-color:white;'><a href='https://golf-lang.com' style='border-bottom:0px'><img src='https://golf-lang.com/golf.png'/></a></div><div class='vhub' style='margin-top:10px;'>&nbsp;Read fifo</div><hr/><span style="font-weight:bold;">Purpose</span>: Reads key/value pair from a FIFO list.<br/>
<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_611'>
<span class="Statement"> read-fifo</span> &lt;list&gt; \
    <span class="Type"> key</span> &lt;key&gt; \
    <span class="Type"> value</span> &lt;value&gt; \
     [<span class="Type"> status</span> &lt;status&gt; ]</pre>
<span id=golf_copied_611 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_611' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_611, code_611, golf_copied_611)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
read-fifo retrieves an element from the FIFO &lt;list&gt; into &lt;key&gt; string &nbsp;(in "key" clause) and &lt;value&gt; string (in "value" clause).<br/>
<br/>
Once an element has been retrieved, the next use of read-fifo will obtain the following one, in the same order they were put in. read-fifo starts with the first element put in, and moves forward from there, unless <a href='/rewind-fifo.html'>rewind-fifo</a> is called, which positions back to the first one.<br/>
<br/>
If the element is successfuly retrieved, &lt;status&gt; number (in "status" clause) is GG_OKAY, otherwise it is GG_ERR_EXIST, which means there are no more elements to retrieve.<br/>
<div class="vsub"><a id="Examples"></a>Examples</div>
In this example, a FIFO list is created, and two key/value pairs added. They are then retrieved in a loop and printed out (twice with rewind), and then the list is purged:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_612'>
 <span class="Comment">// Create a list</span>
<span class="Statement"> new-fifo</span> mylist

 <span class="Comment">// Add data to the list</span>
<span class="Statement"> write-fifo</span> mylist<span class="Identifier"> key</span> <span class="Constant">&quot;key1&quot;</span><span class="Identifier"> value</span> <span class="Constant">&quot;value1&quot;</span>
<span class="Statement"> write-fifo</span> mylist<span class="Identifier"> key</span> <span class="Constant">&quot;some2&quot;</span><span class="Identifier"> value</span> <span class="Constant">&quot;other2&quot;</span>

<span class="Statement"> start-loop</span>
     <span class="Comment">// Get data from the list</span>
<span class="Statement">     read-fifo</span> mylist<span class="Type"> key</span> k<span class="Type"> value</span> v<span class="Type"> status</span> st

     <span class="Comment">// Check if no more data</span>
<span class="Statement">     if-true</span> st<span class="Identifier"> not-equal</span> GG_OKAY
         <span class="Statement">break</span>
<span class="Statement">     end-if</span>

<span class="Statement">     @</span>Obtained key <span class="Statement">&lt;&lt;p-out</span> k<span class="Statement">&gt;&gt;</span> with value <span class="Statement">&lt;&lt;p-out</span> v<span class="Statement">&gt;&gt;</span>
<span class="Statement"> end-loop</span>

 <span class="Comment">// Go through the list again, use rewind-fifo for that</span>
<span class="Statement"> rewind-fifo</span> mylist

<span class="Statement"> start-loop</span>
<span class="Statement">     read-fifo</span> mylist<span class="Type"> key</span> k<span class="Type"> value</span> v<span class="Type"> status</span> st
<span class="Statement">     if-true</span> st<span class="Identifier"> not-equal</span> GG_OKAY
         <span class="Statement">break</span>
<span class="Statement">     end-if</span>
<span class="Statement">     @</span>Again obtained key <span class="Statement">&lt;&lt;p-out</span> k<span class="Statement">&gt;&gt;</span> with value <span class="Statement">&lt;&lt;p-out</span> v<span class="Statement">&gt;&gt;</span>
<span class="Statement"> end-loop</span>

<span class="Statement"> purge-fifo</span> mylist</pre>
<span id=golf_copied_612 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_612' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_612, code_612, golf_copied_612)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<!--BEFSAL13--><div class="vsub"><a id="See also"></a>See also</div>
 <a name='FIFO'></a><span style="font-weight:bold;">FIFO</span><br/>
<a href='/delete-fifo.html'>delete-fifo</a> &nbsp;<br/>
<a href='/new-fifo.html'>new-fifo</a> &nbsp;<br/>
<a href='/purge-fifo.html'>purge-fifo</a> &nbsp;<br/>
<a href='/read-fifo.html'>read-fifo</a> &nbsp;<br/>
<a href='/rewind-fifo.html'>rewind-fifo</a> &nbsp;<br/>
<a href='/write-fifo.html'>write-fifo</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='/documentation.html'>documentation</a><br/>
<a id='read-file.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:right;background-color:white;'><a href='https://golf-lang.com' style='border-bottom:0px'><img src='https://golf-lang.com/golf.png'/></a></div><div class='vhub' style='margin-top:10px;'>&nbsp;Read file</div><hr/><span style="font-weight:bold;">Purpose</span>: Read file into a string variable.<br/>
<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_613'>
<span class="Statement"> read-file</span> &lt;file&gt; | (<span class="Identifier"> file-id</span> &lt;file id&gt; ) \
    <span class="Type"> to</span> &lt;content&gt; \
     [<span class="Identifier"> position</span> &lt;position&gt; ] \
     [<span class="Identifier"> length</span> &lt;length&gt; ] \
     [<span class="Type"> status</span> &lt;status&gt; ]</pre>
<span id=golf_copied_613 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_613' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_613, code_613, golf_copied_613)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<div class="vsub"><a id="Without file-id"></a>Without file-id</div>
This is a simple method of reading a file. File named &lt;file&gt; is opened, data read, and file is closed. <br/>
<br/>
&lt;file&gt; can be a full path name, or a path relative to the application home directory (see <a href='/directories.html'>directories</a>).<br/>
<br/>
Data read is stored into string &lt;content&gt;. Note that file can be binary or text and &lt;content&gt; may have null-bytes. <br/>
<br/>
If "position" and "length" clauses are not specified, read-file reads the entire &lt;file&gt; into &lt;content&gt;.<br/>
<br/>
If "position" clause is used, then reading starts at byte &lt;position&gt;, otherwise it starts at the beginning of the file. Position of zero (0) represents the beginning of the file. <br/>
<br/>
If "length" clause is used, then &lt;length&gt; number of bytes is read, otherwise the rest of the file is read. If &lt;length&gt; &nbsp;is 0, &lt;content&gt; is empty string and &lt;status&gt; is 0.<br/>
<br/>
If "status" clause is used, then the number of bytes read is stored to &lt;status&gt;, unless error occurred, in which case &lt;status&gt; is negative and has the error code. The error code can be GG_ERR_POSITION (if &lt;position&gt; is negative, outside the file, or file does not support it), GG_ERR_READ (if &lt;length&gt; is negative or there is an error reading file) or GG_ERR_OPEN if file is not open. <br/>
<div class="vsub"><a id="With file-id"></a>With file-id</div>
This method uses a &lt;file id&gt; that was created with <a href='/open-file.html'>open-file</a>. You can then read (and write) file using this &lt;file id&gt; and the file stays open until <a href='/close-file.html'>close-file</a> is called, or the <a href='/request.html'>request</a> ends (i.e. Golf will automatically close any such open files). <br/>
<br/>
Data read is stored into string &lt;content&gt;. Note that file can be binary or text and &lt;content&gt; may have null-bytes. <br/>
<br/>
If "position" clause is used, then data is read starting from byte &lt;position&gt; (with position of 0 being the first byte), otherwise reading starts from the current file position determined by the previous reads/writes or as set by using "set" clause in <a href='/file-position.html'>file-position</a>. Note that after each read or write, the file position is advanced by the number of bytes read or written.<br/>
<br/>
If "length" clause is used, then &lt;length&gt; number of bytes is read, otherwise the rest of the file is read. If &lt;length&gt; &nbsp;is 0, &lt;content&gt; is empty string and &lt;status&gt; is 0.<br/>
<br/>
Note that when you reach the end of file and no more bytes can be read, &lt;status&gt; is 0.<br/>
<br/>
If "status" clause is used, then the number of bytes read is stored to &lt;status&gt;, unless error occurred, in which case &lt;status&gt; has the error code. The error code can be GG_ERR_POSITION (if &lt;position&gt; is negative, outside the file, or file does not support it), GG_ERR_READ (if &lt;length&gt; is negative or there is an error reading file) or GG_ERR_OPEN if file is not open. <br/>
<div class="vsub"><a id="Examples"></a>Examples</div>
To read the entire file and create both the variable that holds its content and the status variable:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_614'>
<span class="Statement"> read-file</span> <span class="Constant">&quot;/home/user/some_file&quot;</span><span class="Type"> to</span> file_content<span class="Type"> status</span> st
<span class="Statement"> if-true</span> st<span class="Identifier"> greater-than</span> <span class="Constant">0</span>
<span class="Statement">     @</span>Read:
<span class="Statement">     @</span>&lt;hr/&gt;
<span class="Statement">     p-web</span> file_content
<span class="Statement">     @</span>&lt;hr/&gt;
<span class="Statement"> else-if</span>
<span class="Statement">     @</span>Could not read (<span class="Statement">&lt;&lt;pf-out</span> <span class="Constant">&quot;</span><span class="Special">%ld</span><span class="Constant">&quot;</span>, st<span class="Statement">&gt;&gt;</span>)
<span class="Statement"> end-if</span></pre>
<span id=golf_copied_614 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_614' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_614, code_614, golf_copied_614)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
To read 10 bytes starting at position 20 (with position 0 being the first byte):<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_615'>
<span class="Statement"> read-file</span> <span class="Constant">&quot;/home/user/some_file&quot;</span><span class="Type"> to</span> file_content<span class="Identifier"> position</span> <span class="Constant">20</span><span class="Identifier"> length</span> <span class="Constant">10</span></pre>
<span id=golf_copied_615 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_615' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_615, code_615, golf_copied_615)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
See <a href='/open-file.html'>open-file</a> for an example with "file-id" clause.<br/>
<!--BEFSAL13--><div class="vsub"><a id="See also"></a>See also</div>
 <a name='Files'></a><span style="font-weight:bold;">Files</span><br/>
<a href='/close-file.html'>close-file</a> &nbsp;<br/>
<a href='/copy-file.html'>copy-file</a> &nbsp;<br/>
<a href='/delete-file.html'>delete-file</a> &nbsp;<br/>
<a href='/file-position.html'>file-position</a> &nbsp;<br/>
<a href='/file-storage.html'>file-storage</a> &nbsp;<br/>
<a href='/file-uploading.html'>file-uploading</a> &nbsp;<br/>
<a href='/lock-file.html'>lock-file</a> &nbsp;<br/>
<a href='/open-file.html'>open-file</a> &nbsp;<br/>
<a href='/read-file.html'>read-file</a> &nbsp;<br/>
<a href='/read-line.html'>read-line</a> &nbsp;<br/>
<a href='/rename-file.html'>rename-file</a> &nbsp;<br/>
<a href='/stat-file.html'>stat-file</a> &nbsp;<br/>
<a href='/temporary-file.html'>temporary-file</a> &nbsp;<br/>
<a href='/uniq-file.html'>uniq-file</a> &nbsp;<br/>
<a href='/unlock-file.html'>unlock-file</a> &nbsp;<br/>
<a href='/write-file.html'>write-file</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='/documentation.html'>documentation</a><br/>
<a id='read-hash.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:right;background-color:white;'><a href='https://golf-lang.com' style='border-bottom:0px'><img src='https://golf-lang.com/golf.png'/></a></div><div class='vhub' style='margin-top:10px;'>&nbsp;Read hash</div><hr/><span style="font-weight:bold;">Purpose</span>: Get data from hash.<br/>
<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_616'>
 <span class="Comment">// Random access to hash data:</span>

<span class="Statement"> read-hash</span> &lt;hash&gt; \
    <span class="Type"> key</span> &lt;key&gt; \
    <span class="Type"> value</span> &lt;value&gt; \
     [<span class="Identifier"> delete</span> [ &lt;delete&gt; ] ] \
     [<span class="Type"> status</span> &lt;status&gt; ]

 <span class="Comment">// Sequential access to hash data:</span>

<span class="Statement"> read-hash</span> &lt;hash&gt;<span class="Identifier"> traverse begin</span>

<span class="Statement"> read-hash</span> &lt;hash&gt;<span class="Identifier"> traverse</span> \
    <span class="Type"> key</span> &lt;key&gt; \
    <span class="Type"> value</span> &lt;value&gt;  \
     [<span class="Identifier"> delete</span> [ &lt;delete&gt; ] ] \
     [<span class="Type"> status</span> &lt;status&gt; ] \</pre>
<span id=golf_copied_616 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_616' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_616, code_616, golf_copied_616)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<div class="vsub"><a id="Without "traverse" clause"></a>Without "traverse" clause</div>
read-hash will obtain an element from &lt;hash&gt;, which is a string &lt;value&gt; (in "value" clause) based on a string &lt;key&gt; (in "key" clause). &lt;hash&gt; was created by <a href='/new-hash.html'>new-hash</a>. <br/>
<br/>
You can also delete an element from the hash by using "delete" clause - the &lt;value&gt; is still obtained though it is no longer in the hash. The hash element is deleted if "delete" clause is used without boolean variable &lt;delete&gt;, or if &lt;delete&gt; evaluates to true.<br/>
<br/>
If no &lt;key&gt; was found in the hash, &lt;status&gt; number (in "status" clause) is GG_ERR_EXIST and &lt;value&gt; is unchanged, otherwise &lt;status&gt; is GG_OKAY. <br/>
<div class="vsub"><a id="With "traverse" clause"></a>With "traverse" clause</div>
read-hash with "traverse" clause obtains &lt;key&gt; and &lt;value&gt; of the current element, and then positions to the next one. You can also delete this element from the hash by using "delete" clause - the &lt;key&gt; and &lt;value&gt; are still obtained though the element is no longer in the hash. The hash element is deleted if "delete" clause is used without boolean variable &lt;delete&gt;, or if &lt;delete&gt; evaluates to true.<br/>
<br/>
Use "begin" clause to position at the very first element. This is useful if you wish to get all the key/value pairs from a hash - note they are not extracted in any particular order. When there are no more elements, &lt;key&gt; and &lt;value&gt; are unchanged and &lt;status&gt; number (in "status" clause) is GG_ERR_EXIST, otherwise &lt;status&gt; is GG_OKAY.<br/>
<br/>
You may search, add or delete elements while traversing a hash, and this will be reflected in all elements not yet traversed.<br/>
<div class="vsub"><a id="Examples"></a>Examples</div>
In this example, a new hash is created, a key/value pair is written to it, and then the value is obtained and the element deleted; return status is checked:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_617'>
 <span class="Comment">// Create new hash</span>
<span class="Statement"> new-hash</span> h

 <span class="Comment">// Write to a hash</span>
<span class="Statement"> write-hash</span> h<span class="Identifier"> key</span> <span class="Constant">&quot;X0029&quot;</span><span class="Identifier"> value</span> <span class="Constant">&quot;some data&quot;</span>

 <span class="Comment">// Read from a hash </span>
<span class="Statement"> read-hash</span> h<span class="Type"> key</span> <span class="Constant">&quot;X0029&quot;</span><span class="Type"> value</span> res<span class="Type"> status</span> f<span class="Identifier"> delete</span>
<span class="Statement"> if-true</span> f<span class="Identifier"> equal</span> GG_ERR_EXIST
<span class="Statement">     @</span>No data in the hash!
<span class="Statement"> else-if</span>
<span class="Statement">     @</span>Deleted value is <span class="Statement">&lt;&lt;p-out</span> res<span class="Statement">&gt;&gt;</span>
<span class="Statement"> end-if</span></pre>
<span id=golf_copied_617 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_617' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_617, code_617, golf_copied_617)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
The following will traverse the entire hash and display all the data:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_618'>
 <span class="Comment">// Position at the beginning of the hash </span>
<span class="Statement"> read-hash</span> h<span class="Identifier"> traverse begin</span>
<span class="Statement"> start-loop</span>
     <span class="Comment">// Get elements, one by one, until NULL returned as a key</span>
<span class="Statement">     read-hash</span> h<span class="Identifier"> traverse</span><span class="Type"> key</span> k<span class="Type"> value</span> r<span class="Type"> status</span> f
<span class="Statement">     if-true</span> f<span class="Identifier"> equal</span> GG_ERR_EXIST
         <span class="Statement">break</span>;
<span class="Statement">     end-if</span>
<span class="Statement">     pf-out</span> <span class="Constant">&quot;Key [</span><span class="Special">%s</span><span class="Constant">] data [</span><span class="Special">%s</span><span class="Constant">]</span><span class="Special">\n</span><span class="Constant">&quot;</span>, k, r
<span class="Statement"> end-loop</span></pre>
<span id=golf_copied_618 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_618' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_618, code_618, golf_copied_618)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<!--BEFSAL13--><div class="vsub"><a id="See also"></a>See also</div>
 <a name='Hash'></a><span style="font-weight:bold;">Hash</span><br/>
<a href='/get-hash.html'>get-hash</a> &nbsp;<br/>
<a href='/new-hash.html'>new-hash</a> &nbsp;<br/>
<a href='/purge-hash.html'>purge-hash</a> &nbsp;<br/>
<a href='/read-hash.html'>read-hash</a> &nbsp;<br/>
<a href='/resize-hash.html'>resize-hash</a> &nbsp;<br/>
<a href='/write-hash.html'>write-hash</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='/documentation.html'>documentation</a><br/>
<a id='read-json.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:right;background-color:white;'><a href='https://golf-lang.com' style='border-bottom:0px'><img src='https://golf-lang.com/golf.png'/></a></div><div class='vhub' style='margin-top:10px;'>&nbsp;Read json</div><hr/><span style="font-weight:bold;">Purpose</span>: Read data elements of JSON document.<br/>
<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_619'>
<span class="Statement"> read-json</span> &lt;json&gt; \
     [<span class="Type"> key</span> &lt;key&gt; ] \
     [<span class="Type"> value</span> &lt;value&gt; ] \
     [<span class="Type"> type</span> &lt;type&gt; ] \
     [<span class="Identifier"> next</span> ]</pre>
<span id=golf_copied_619 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_619' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_619, code_619, golf_copied_619)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
read-json reads data elements from &lt;json&gt; variable, which is created with <a href='/json-doc.html'>json-doc</a>. A data element is a string &lt;key&gt;/&lt;value&gt; pair of a leaf node, where key (in "key" clause) is a normalized key name, which is the value's name preceded with the names of all objects and array members leading up to it, separated by a dot ("."). <br/>
<br/>
The actual &lt;value&gt; is obtained with "value" clause, and the &lt;type&gt; of value can be obtained with "type" clause. <br/>
<br/>
&lt;type&gt; is a number that can be GG_JSON_TYPE_STRING, GG_JSON_TYPE_NUMBER, GG_JSON_TYPE_REAL, GG_JSON_TYPE_BOOL and GG_JSON_TYPE_NULL for string, number, real (floating point), boolean and null values respectively. Note that &lt;value&gt; is always a string representation of these types.<br/>
<br/>
Use "next" clause to move to the next sequential key/value pair in the document, from top down. Typically, you would get a key first, examine if it's of interest to you, and then obtain value. This is because Golf uses "lazy" approach where value is not copied until needed; with this approach JSON parsing is faster.<br/>
<br/>
If there are no more data elements to read, &lt;type&gt; is GG_JSON_TYPE_NONE.<br/>
<br/>
&lt;key&gt; in "key" clause is a normalized name of any given leaf node in JSON text. This means every non-leaf node is included (such as arrays and objects), separated by a dot ("."), and arrays are indexed with "[]". An example would be:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_620'>
 <span class="Constant">&quot;menu&quot;</span>.<span class="Constant">&quot;popup&quot;</span>.<span class="Constant">&quot;menuitem&quot;</span>[<span class="Constant">1</span>].<span class="Constant">&quot;onclick&quot;</span></pre>
<span id=golf_copied_620 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_620' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_620, code_620, golf_copied_620)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<div class="vsub"><a id="Examples"></a>Examples</div>
See <a href='/json-doc.html'>json-doc</a>.<br/>
<!--BEFSAL13--><div class="vsub"><a id="See also"></a>See also</div>
 <a name='JSON parsing'></a><span style="font-weight:bold;">JSON parsing</span><br/>
<a href='/json-doc.html'>json-doc</a> &nbsp;<br/>
<a href='/read-json.html'>read-json</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='/documentation.html'>documentation</a><br/>
<a id='read-lifo.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:right;background-color:white;'><a href='https://golf-lang.com' style='border-bottom:0px'><img src='https://golf-lang.com/golf.png'/></a></div><div class='vhub' style='margin-top:10px;'>&nbsp;Read lifo</div><hr/><span style="font-weight:bold;">Purpose</span>: Reads key/value pair from a LIFO list.<br/>
<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_621'>
<span class="Statement"> read-lifo</span> &lt;list&gt; \
    <span class="Type"> key</span> &lt;key&gt; \
    <span class="Type"> value</span> &lt;value&gt; \
     [<span class="Type"> status</span> &lt;status&gt; ]</pre>
<span id=golf_copied_621 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_621' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_621, code_621, golf_copied_621)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
read-lifo retrieves an element from the LIFO &lt;list&gt; into &lt;key&gt; string &nbsp;(in "key" clause) and &lt;value&gt; string (in "value" clause).<br/>
<br/>
Once an element has been retrieved, the next use of read-lifo will obtain the following one, in the reverse order they were put in. read-lifo starts with the last element put in, and moves backwards from there, unless <a href='/rewind-lifo.html'>rewind-lifo</a> is called, which positions back to the last one. Note that <a href='/write-lifo.html'>write-lifo</a> will cause the next read-lifo to start with the element just written, i.e. it implicitly calls <a href='/rewind-lifo.html'>rewind-lifo</a>.<br/>
<br/>
If the element is successfuly retrieved, &lt;status&gt; number (in "status" clause) is GG_OKAY, otherwise it is GG_ERR_EXIST, which means there are no more elements to retrieve. <br/>
<div class="vsub"><a id="Examples"></a>Examples</div>
In this example, a LIFO list is created, and two key/value pairs added. They are then retrieved in a loop and printed out (twice with rewind), and then the list is purged:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_622'>
<span class="Statement"> %%</span> /lifo<span class="Identifier"> public</span>
<span class="Statement">     new-lifo</span> mylist

     <span class="Comment">// Add data to the list</span>
<span class="Statement">     write-lifo</span> mylist<span class="Identifier"> key</span> <span class="Constant">&quot;key1&quot;</span><span class="Identifier"> value</span> <span class="Constant">&quot;value1&quot;</span>
<span class="Statement">     write-lifo</span> mylist<span class="Identifier"> key</span> <span class="Constant">&quot;some2&quot;</span><span class="Identifier"> value</span> <span class="Constant">&quot;other2&quot;</span>

<span class="Statement">     start-loop</span>
        <span class="Comment">// Get data from the list</span>
<span class="Statement">        read-lifo</span> mylist<span class="Type"> key</span> k<span class="Type"> value</span> v<span class="Type"> status</span> st

        <span class="Comment">// Check if no more data</span>
<span class="Statement">        if-true</span> st<span class="Identifier"> not-equal</span> GG_OKAY
<span class="Statement">            break-loop</span>
<span class="Statement">        end-if</span>

<span class="Statement">        @</span>Obtained key <span class="Statement">&lt;&lt;p-out</span> k<span class="Statement">&gt;&gt;</span> with value <span class="Statement">&lt;&lt;p-out</span> v<span class="Statement">&gt;&gt;</span>
<span class="Statement">     end-loop</span>

     <span class="Comment">// Go through the list again, use rewind-lifo for that</span>
<span class="Statement">     rewind-lifo</span> mylist

<span class="Statement">     start-loop</span>
<span class="Statement">        read-lifo</span> mylist<span class="Type"> key</span> k<span class="Type"> value</span> v<span class="Type"> status</span> st
<span class="Statement">        if-true</span> st<span class="Identifier"> not-equal</span> GG_OKAY
<span class="Statement">            break-loop</span>
<span class="Statement">        end-if</span>
<span class="Statement">        @</span>Again obtained key <span class="Statement">&lt;&lt;p-out</span> k<span class="Statement">&gt;&gt;</span> with value <span class="Statement">&lt;&lt;p-out</span> v<span class="Statement">&gt;&gt;</span>
<span class="Statement">     end-loop</span>

     <span class="Comment">// Delete all in LIFO</span>
<span class="Statement">     purge-lifo</span> mylist
     <span class="Comment">// Verify nothing is left</span>
<span class="Statement">     rewind-lifo</span> mylist
<span class="Statement">     read-lifo</span> mylist<span class="Type"> key</span> k<span class="Type"> value</span> v<span class="Type"> status</span> st
<span class="Statement">     if-true</span> st<span class="Identifier"> not-equal</span> GG_OKAY
<span class="Statement">        @</span>LIFO is empty
<span class="Statement">     end-if</span>
<span class="Statement"> %%</span></pre>
<span id=golf_copied_622 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_622' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_622, code_622, golf_copied_622)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<!--BEFSAL13--><div class="vsub"><a id="See also"></a>See also</div>
 <a name='LIFO'></a><span style="font-weight:bold;">LIFO</span><br/>
<a href='/delete-lifo.html'>delete-lifo</a> &nbsp;<br/>
<a href='/new-lifo.html'>new-lifo</a> &nbsp;<br/>
<a href='/purge-lifo.html'>purge-lifo</a> &nbsp;<br/>
<a href='/read-lifo.html'>read-lifo</a> &nbsp;<br/>
<a href='/rewind-lifo.html'>rewind-lifo</a> &nbsp;<br/>
<a href='/write-lifo.html'>write-lifo</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='/documentation.html'>documentation</a><br/>
<a id='read-line.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:right;background-color:white;'><a href='https://golf-lang.com' style='border-bottom:0px'><img src='https://golf-lang.com/golf.png'/></a></div><div class='vhub' style='margin-top:10px;'>&nbsp;Read line</div><hr/><span style="font-weight:bold;">Purpose</span>: Read text file line by line in a loop.<br/>
<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_623'>
<span class="Statement"> read-line</span> &lt;file&gt;<span class="Type"> to</span> &lt;line content&gt; [<span class="Type"> status</span> &lt;status&gt; ] [<span class="Identifier"> delimiter</span> &lt;delimiter&gt; ]

 &lt;any code&gt;

<span class="Statement"> end-read-line</span></pre>
<span id=golf_copied_623 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_623' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_623, code_623, golf_copied_623)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
read-line starts the loop in which a text &lt;file&gt; is read line by line into string &lt;line content&gt;, with end-read-line ending this loop. Once the end of &lt;file&gt; has been reached, or an error occurs, the loop exits. <br/>
<br/>
&lt;file&gt; can be a full path name, or a path relative to the application home directory (see <a href='/directories.html'>directories</a>). <br/>
<br/>
&lt;status&gt; number will be GG_ERR_READ if there is an error in reading file, or GG_ERR_OPEN if file cannot be opened, or GG_OKAY if end-of-file has been reached. Check for error after end-read-line statement. If a line was read successfully, then &lt;status&gt; is its length. <br/>
<br/>
&lt;line content&gt; is allocated when a line is read and freed just before the next line is read or if there are no more lines to read. If you want to use &lt;line content&gt; outside of this scope, save it or stash it somewhere first.<br/>
<br/>
String &lt;delimiter&gt; separates the lines in the file, and is by default new line, however it can be any character (note that it is a first character of string &lt;delimiter&gt;).<br/>
<br/>
A new line (or a &lt;delimiter&gt;) remains in &lt;line content&gt; if it was present in the file (note that the very last line may not have it). <br/>
<br/>
<br/>
Use <a href='/break-loop.html'>break-loop</a> and <a href='/continue-loop.html'>continue-loop</a> statements to exit and continue the loop.<br/>
<div class="vsub"><a id="Examples"></a>Examples</div>
To read a text file line by line, and display as a web page with line breaks:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_624'>
<span class="Statement"> read-line</span> <span class="Constant">&quot;/home/bear/tmp/ll/filexx&quot;</span><span class="Type"> to</span> one_line<span class="Type"> status</span> st
<span class="Statement">     string-length</span> one_line<span class="Type"> to</span> line_len
<span class="Statement">     @</span>Line length is <span class="Statement">&lt;&lt;p-num</span> line_len<span class="Statement">&gt;&gt;</span>, line is <span class="Statement">&lt;&lt;p-web</span> one_line<span class="Statement">&gt;&gt;</span> status <span class="Statement">&lt;&lt;p-num</span> st<span class="Statement">&gt;&gt;</span>&lt;br/&gt;
<span class="Statement"> end-read-line</span>
<span class="Statement"> if-true</span> st<span class="Identifier"> lesser-than</span> <span class="Constant">0</span>
<span class="Statement">     get-req</span><span class="Identifier"> error</span><span class="Type"> to</span> err
<span class="Statement">     @</span>Error in reading, error [<span class="Statement">&lt;&lt;p-out</span> err<span class="Statement">&gt;&gt;</span>]
<span class="Statement"> end-if</span></pre>
<span id=golf_copied_624 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_624' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_624, code_624, golf_copied_624)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
To read a text file delimited by "|" character:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_625'>
<span class="Statement"> read-line</span> <span class="Constant">&quot;/home/user/dir/file&quot;</span><span class="Type"> to</span> one_line<span class="Type"> status</span> len<span class="Identifier"> delimiter</span> '|'
<span class="Statement"> .</span>..</pre>
<span id=golf_copied_625 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_625' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_625, code_625, golf_copied_625)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<!--BEFSAL13--><div class="vsub"><a id="See also"></a>See also</div>
 <a name='Files'></a><span style="font-weight:bold;">Files</span><br/>
<a href='/close-file.html'>close-file</a> &nbsp;<br/>
<a href='/copy-file.html'>copy-file</a> &nbsp;<br/>
<a href='/delete-file.html'>delete-file</a> &nbsp;<br/>
<a href='/file-position.html'>file-position</a> &nbsp;<br/>
<a href='/file-storage.html'>file-storage</a> &nbsp;<br/>
<a href='/file-uploading.html'>file-uploading</a> &nbsp;<br/>
<a href='/lock-file.html'>lock-file</a> &nbsp;<br/>
<a href='/open-file.html'>open-file</a> &nbsp;<br/>
<a href='/read-file.html'>read-file</a> &nbsp;<br/>
<a href='/read-line.html'>read-line</a> &nbsp;<br/>
<a href='/rename-file.html'>rename-file</a> &nbsp;<br/>
<a href='/stat-file.html'>stat-file</a> &nbsp;<br/>
<a href='/temporary-file.html'>temporary-file</a> &nbsp;<br/>
<a href='/uniq-file.html'>uniq-file</a> &nbsp;<br/>
<a href='/unlock-file.html'>unlock-file</a> &nbsp;<br/>
<a href='/write-file.html'>write-file</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='/documentation.html'>documentation</a><br/>
<a id='read-list.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:right;background-color:white;'><a href='https://golf-lang.com' style='border-bottom:0px'><img src='https://golf-lang.com/golf.png'/></a></div><div class='vhub' style='margin-top:10px;'>&nbsp;Read list</div><hr/><span style="font-weight:bold;">Purpose</span>: Read/update key/value pair from a linked list.<br/>
<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_626'>
<span class="Statement"> read-list</span> &lt;list&gt; \
    <span class="Type"> key</span> &lt;key&gt; \
    <span class="Type"> value</span> &lt;value&gt; \
     [<span class="Identifier"> update-value</span> &lt;update value&gt; ] [<span class="Identifier"> update-key</span> &lt;update key&gt; ] \
     [<span class="Type"> status</span> &lt;status&gt; ]</pre>
<span id=golf_copied_626 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_626' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_626, code_626, golf_copied_626)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
read-list retrieves an element from the linked &lt;list&gt;, storing it into &lt;key&gt; string (in "key" clause) and &lt;value&gt; string (in "value" clause). After each read-list, the list's current element remains at the element read; use <a href='/position-list.html'>position-list</a> to move it (for instance to the next one). <br/>
<br/>
If an element could not be retrieved, &lt;status&gt; number (in "status" clause) will be GG_ERR_EXIST and &lt;key&gt; and &lt;value&gt; will be unchanged (this can happen if current list element is beyond the last element, such as for instance if "end" clause is used in position-list statement), otherwise &lt;status&gt; is GG_OKAY. <br/>
<br/>
Initially when the list is created with <a href='/new-list.html'>new-list</a>, <a href='/read-list.html'>read-list</a> starts with the first element in the list. Use <a href='/position-list.html'>position-list</a> to change the default list's current element.<br/>
<br/>
You can update the element's value with "update-value" clause by specifying &lt;update value&gt; string. This update is performed after a &lt;value&gt; has been retrieved, allowing you to obtain the previous value in the same statement. <br/>
<br/>
You can update the element's key with "update-key" clause by specifying &lt;update key&gt; string. This update is performed after a &lt;key&gt; has been retrieved, allowing you to obtain the previous key in the same statement. <br/>
<div class="vsub"><a id="Examples"></a>Examples</div>
In this example, a linked list is created, and three key/value pairs added. They are then retrieved from the last towards the first element, and then again in the opposite direction:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_627'>
<span class="Statement"> new-list</span> mylist

 <span class="Comment">// Add data to the list</span>
<span class="Statement"> write-list</span> mylist<span class="Identifier"> key</span> <span class="Constant">&quot;key1&quot;</span><span class="Identifier"> value</span> <span class="Constant">&quot;value1&quot;</span>
<span class="Statement"> write-list</span> mylist<span class="Identifier"> key</span> <span class="Constant">&quot;key2&quot;</span><span class="Identifier"> value</span> <span class="Constant">&quot;value2&quot;</span>
<span class="Statement"> write-list</span> mylist<span class="Identifier"> key</span> <span class="Constant">&quot;key3&quot;</span><span class="Identifier"> value</span> <span class="Constant">&quot;value3&quot;</span>

<span class="Statement"> position-list</span> mylist<span class="Identifier"> last</span>
<span class="Statement"> start-loop</span>
    <span class="Comment">// Get data from the list starting with the last one, producing value1, value2, value3</span>
<span class="Statement">    read-list</span> mylist<span class="Type"> key</span> k<span class="Type"> value</span> v
<span class="Statement">    @</span>Obtained key <span class="Statement">&lt;&lt;p-out</span> k<span class="Statement">&gt;&gt;</span> with value <span class="Statement">&lt;&lt;p-out</span> v<span class="Statement">&gt;&gt;</span>
<span class="Statement">    position-list</span> mylist<span class="Identifier"> previous</span><span class="Type"> status</span> s
    <span class="Comment">// Check if no more data</span>
<span class="Statement">    if-true</span> s<span class="Identifier"> equal</span> GG_ERR_EXIST
<span class="Statement">        break-loop</span>
<span class="Statement">    end-if</span>
<span class="Statement"> end-loop</span>

 <span class="Comment">// Now the list is positioned at the first element, reading produces value3, value2, value1</span>
<span class="Statement"> start-loop</span>
<span class="Statement">    read-list</span> mylist<span class="Type"> key</span> k<span class="Type"> value</span> v<span class="Type"> status</span> s
<span class="Statement">    if-true</span> s<span class="Identifier"> equal</span> GG_ERR_EXIST
<span class="Statement">        break-loop</span>
<span class="Statement">    end-if</span>
<span class="Statement">    @</span>Again obtained key <span class="Statement">&lt;&lt;p-out</span> k<span class="Statement">&gt;&gt;</span> with value <span class="Statement">&lt;&lt;p-out</span> v<span class="Statement">&gt;&gt;</span>
<span class="Statement">    position-list</span> mylist<span class="Identifier"> next</span>
<span class="Statement"> end-loop</span>

<span class="Statement"> purge-list</span> mylist</pre>
<span id=golf_copied_627 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_627' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_627, code_627, golf_copied_627)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<!--BEFSAL13--><div class="vsub"><a id="See also"></a>See also</div>
 <a name='Linked list'></a><span style="font-weight:bold;">Linked list</span><br/>
<a href='/delete-list.html'>delete-list</a> &nbsp;<br/>
<a href='/get-list.html'>get-list</a> &nbsp;<br/>
<a href='/new-list.html'>new-list</a> &nbsp;<br/>
<a href='/position-list.html'>position-list</a> &nbsp;<br/>
<a href='/purge-list.html'>purge-list</a> &nbsp;<br/>
<a href='/read-list.html'>read-list</a> &nbsp;<br/>
<a href='/write-list.html'>write-list</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='/documentation.html'>documentation</a><br/>
<a id='read-message.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:right;background-color:white;'><a href='https://golf-lang.com' style='border-bottom:0px'><img src='https://golf-lang.com/golf.png'/></a></div><div class='vhub' style='margin-top:10px;'>&nbsp;Read message</div><hr/><span style="font-weight:bold;">Purpose</span>: Read key/value from message.<br/>
<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_628'>
<span class="Statement"> read-message</span> &lt;message&gt; \
    <span class="Type"> key</span> &lt;key&gt; \
    <span class="Type"> value</span> &lt;value&gt; \
     [<span class="Type"> status</span> &lt;status&gt;</pre>
<span id=golf_copied_628 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_628' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_628, code_628, golf_copied_628)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
read-message reads strings &lt;key&gt; (in "key" clause) and &lt;value&gt; (in "value" clause) from &lt;message&gt;, which must have been created with <a href='/new-message.html'>new-message</a>. <br/>
<br/>
The reading of key/value pairs starts from the beginning of message and proceeds sequentially forward. Once a key/value pair is read it cannot be read again.<br/>
<br/>
&lt;status&gt; number (in "status" clause) will be GG_OKAY for a successful read, GG_ERR_FORMAT if message is not in <a href='/SEMI.html'>SEMI</a> format or GG_ERR_LENGTH if message isn't of proper length.<br/>
<br/>
Once a message is read from, it cannot be written to (see <a href='/write-message.html'>write-message</a>).<br/>
<div class="vsub"><a id="Examples"></a>Examples</div>
See <a href='/new-message.html'>new-message</a>.<br/>
<!--BEFSAL13--><div class="vsub"><a id="See also"></a>See also</div>
 <a name='Messages'></a><span style="font-weight:bold;">Messages</span><br/>
<a href='/get-message.html'>get-message</a> &nbsp;<br/>
<a href='/new-message.html'>new-message</a> &nbsp;<br/>
<a href='/read-message.html'>read-message</a> &nbsp;<br/>
<a href='/SEMI.html'>SEMI</a> &nbsp;<br/>
<a href='/write-message.html'>write-message</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='/documentation.html'>documentation</a><br/>
<a id='read-remote.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:right;background-color:white;'><a href='https://golf-lang.com' style='border-bottom:0px'><img src='https://golf-lang.com/golf.png'/></a></div><div class='vhub' style='margin-top:10px;'>&nbsp;Read remote</div><hr/><span style="font-weight:bold;">Purpose</span>: Get results of a service call.<br/>
<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_629'>
<span class="Statement"> read-remote</span> &lt;service&gt; \
     [<span class="Type"> data</span> &lt;data&gt; ] \
     [<span class="Type"> error</span> &lt;error&gt; ] \
     [<span class="Type"> status</span> &lt;status&gt; ] \
     [<span class="Type"> status-text</span> &lt;status text&gt; ] \
     [<span class="Type"> handler-status</span> &lt;service status&gt; ]</pre>
<span id=golf_copied_629 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_629' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_629, code_629, golf_copied_629)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Use read-remote to get the results of <a href='/call-remote.html'>call-remote</a> created in <a href='/new-remote.html'>new-remote</a>; the same &lt;service&gt; must be used in all.<br/>
<br/>
<span style="font-weight:bold;">- Getting the reply from server</span><br/>
The service reply is split in two. One part is the actual result of processing (called "stdout" or standard output), and that is "data". The other is the error messages (called "stderr" or standard error), and that's "error". The standard output goes to "data", except from <a href='/report-error.html'>report-error</a> and <a href='/pf-out.html'>pf-out</a>/<a href='/pf-url.html'>pf-url</a>/<a href='/pf-web.html'>pf-web</a> (with "to-error" clause) which goes to "error". Note that "data" and "error" streams can be co-mingled when output by the service, but they will be obtained separately. This allows for clean separation of output from any error messages.<br/>
<br/>
&lt;data&gt; is the "data" reply of a service call (in "data" clause). &lt;error&gt; is the "error" reply (in "error" clause). <br/>
<br/>
<span style="font-weight:bold;">- Getting status of a service call</span><br/>
The status of a service call (as a number) can be obtained in &lt;status&gt; (in "status" clause). This is the protocol status, and it may be:<br/>
<ul><li>GG_OKAY if request succeeded,<br/>
</li><li>GG_CLI_ERR_RESOLVE_ADDR if host name for TCP connection cannot be resolved,<br/>
</li><li>GG_CLI_ERR_PATH_TOO_LONG if path name of Unix socket is too long,<br/>
</li><li>GG_CLI_ERR_SOCKET if cannot create a socket (for instance they are exhausted for the process or system),<br/>
</li><li>GG_CLI_ERR_CONNECT if cannot connect to server (TCP or Unix alike),<br/>
</li><li>GG_CLI_ERR_SOCK_WRITE if cannot write data to server (for instance if server has encountered an error or is down, or if network connection is no longer available),<br/>
</li><li>GG_CLI_ERR_SOCK_READ if cannot read data from server (for instance if server has encountered an error or is down, or if network connection is no longer available),<br/>
</li><li>GG_CLI_ERR_PROT_ERR if there is a protocol error, which indicates a protocol issue on either or both sides,<br/>
</li><li>GG_CLI_ERR_BAD_VER if either side does not support protocol used by the other,<br/>
</li><li>GG_CLI_ERR_SRV if server cannot complete the request,<br/>
</li><li>GG_CLI_ERR_UNK if server does not recognize record types used by the client,<br/>
</li><li>GG_CLI_ERR_OUT_MEM if client is out of memory,<br/>
</li><li>GG_CLI_ERR_ENV_TOO_LONG if the combined length of all environment variables is too long,<br/>
</li><li>GG_CLI_ERR_ENV_ODD if the number of supplied environment name/value pairs is incorrect,<br/>
</li><li>GG_CLI_ERR_BAD_TIMEOUT if the value for timeout is incorrect,<br/>
</li><li>GG_CLI_ERR_TIMEOUT if the request timed out based on "timeout" parameter or otherwise if the underlying Operating System libraries declared their own timeout.</li></ul>
You can also obtain the status text in &lt;status text&gt; (in "status-text" clause); this is a human readable status message which is am empty string (i.e. "") if there is no error (meaning if &lt;status&gt; is GG_OKAY).<br/>
<br/>
<span style="font-weight:bold;">- Getting service status</span><br/>
&lt;service status&gt; (in "handler-status" clause) is the return status (as a number) of the code executing a remote service handler; it is conceptually similar to a return value from a function (as a number). The particular service handler you are calling may or may not return the status; it it does, its return status can be sent back via <a href='/handler-status.html'>handler-status</a> and/or <a href='/exit-handler.html'>exit-handler</a> statement.<br/>
<br/>
You must specify at least one value to obtain in read-remote, or any number of them.<br/>
<div class="vsub"><a id="Examples"></a>Examples</div>
See examples in <a href='/new-remote.html'>new-remote</a> and <a href='/call-remote.html'>call-remote</a>.<br/>
<!--BEFSAL13--><div class="vsub"><a id="See also"></a>See also</div>
 <a name='Distributed computing'></a><span style="font-weight:bold;">Distributed computing</span><br/>
<a href='/call-remote.html'>call-remote</a> &nbsp;<br/>
<a href='/new-remote.html'>new-remote</a> &nbsp;<br/>
<a href='/read-remote.html'>read-remote</a> &nbsp;<br/>
<a href='/run-remote.html'>run-remote</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='/documentation.html'>documentation</a><br/>
<a id='read-split.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:right;background-color:white;'><a href='https://golf-lang.com' style='border-bottom:0px'><img src='https://golf-lang.com/golf.png'/></a></div><div class='vhub' style='margin-top:10px;'>&nbsp;Read split</div><hr/><span style="font-weight:bold;">Purpose</span>: Obtain split string pieces.<br/>
<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_630'>
<span class="Statement"> read-split</span> &lt;piece number&gt;<span class="Identifier"> from</span> &lt;split string&gt;<span class="Type"> to</span> &lt;piece&gt; [<span class="Type"> status</span> &lt;status&gt; ]</pre>
<span id=golf_copied_630 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_630' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_630, code_630, golf_copied_630)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
read-split will read split string pieces from &lt;split string&gt; which is produced by <a href='/split-string.html'>split-string</a>. &lt;piece number&gt; is the number (starting with 1) of the piece to retrieve in string &lt;piece&gt;. &lt;status&gt; number (in "status" clause) is GG_OKAY if successful, or GG_ERR_OVERFLOW if &lt;piece number&gt; is not valid (meaning it's outside of the range of pieces parsed by split-string).<br/>
<div class="vsub"><a id="Examples"></a>Examples</div>
See <a href='/split-string.html'>split-string</a>.<br/>
<!--BEFSAL13--><div class="vsub"><a id="See also"></a>See also</div>
 <a name='Strings'></a><span style="font-weight:bold;">Strings</span><br/>
<a href='/copy-string.html'>copy-string</a> &nbsp;<br/>
<a href='/count-substring.html'>count-substring</a> &nbsp;<br/>
<a href='/delete-string.html'>delete-string</a> &nbsp;<br/>
<a href='/lower-string.html'>lower-string</a> &nbsp;<br/>
<a href='/read-split.html'>read-split</a> &nbsp;<br/>
<a href='/replace-string.html'>replace-string</a> &nbsp;<br/>
<a href='/set-string.html'>set-string</a> &nbsp;<br/>
<a href='/split-string.html'>split-string</a> &nbsp;<br/>
<a href='/string-length.html'>string-length</a> &nbsp;<br/>
<a href='/trim-string.html'>trim-string</a> &nbsp;<br/>
<a href='/upper-string.html'>upper-string</a> &nbsp;<br/>
<a href='/write-string.html'>write-string</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='/documentation.html'>documentation</a><br/>
<a id='read-tree.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:right;background-color:white;'><a href='https://golf-lang.com' style='border-bottom:0px'><img src='https://golf-lang.com/golf.png'/></a></div><div class='vhub' style='margin-top:10px;'>&nbsp;Read tree</div><hr/><span style="font-weight:bold;">Purpose</span>: Search/update a tree.<br/>
<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_631'>
<span class="Statement"> read-tree</span> &lt;tree&gt; \
     (<span class="Identifier"> equal</span> &lt;search key&gt; |<span class="Identifier"> lesser</span> &lt;search key&gt; |<span class="Identifier"> greater</span> &lt;search key&gt; | \
        <span class="Identifier"> lesser-equal</span> &lt;search key&gt; |<span class="Identifier"> greater-equal</span> &lt;search key&gt; | \
        <span class="Identifier"> min-key</span> |<span class="Identifier"> max-key</span> ) \
     [<span class="Type"> value</span> &lt;value&gt; ] \
     [<span class="Identifier"> update-value</span> &lt;update value&gt; ] \
     [<span class="Type"> key</span> &lt;key&gt; ] \
     [<span class="Type"> status</span> &lt;status&gt; ] \
     [<span class="Type"> new-cursor</span> &lt;cursor&gt; ]</pre>
<span id=golf_copied_631 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_631' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_631, code_631, golf_copied_631)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
read-tree will search &lt;tree&gt; (created with <a href='/new-tree.html'>new-tree</a>) for a node with the string key that is:<br/>
<ul><li>equal to &lt;search key&gt; ("equal" clause)<br/>
</li><li>lesser than &lt;search key&gt; ("lesser" clause)<br/>
</li><li>greater than &lt;search key&gt; ("greater" clause)<br/>
</li><li>lesser or equal than &lt;search key&gt; ("lesser-equal" clause)<br/>
</li><li>greater or equal than &lt;search key&gt; ("greater-equal" clause)<br/>
</li><li>a minimum key in the tree ("min-key" clause)<br/>
</li><li>a maximum key in the tree ("max-key" clause)</li></ul>
The &lt;status&gt; in "status" clause will be GG_OKAY if a key conforming to one of these criteria is found, and GG_ERR_EXIST if not. <br/>
<br/>
If a key is found, the value associated with the key can be obtained with "value" clause in &lt;value&gt;; an existing key used to originally insert this value into the tree can be obtained with "key" clause in string &lt;key&gt;. If a key is not found, both &lt;value&gt; and &lt;key&gt; are unchanged. <br/>
<br/>
You can update the value associated with a found key with "update-value" clause by specifying &lt;update value&gt; string. This update is performed after &lt;value&gt; has been retrieved, allowing you to obtain the previous value in the same statement. <br/>
<br/>
If you'd like to iterate the ordered list of keys in a tree, create a &lt;cursor&gt; by using "new-cursor" clause, in which case &lt;cursor&gt; will be positioned on a found tree node. See <a href='/use-cursor.html'>use-cursor</a> for more on using cursors. Cursors are useful in range searches; typically you'd find a key that is an upper or lower bound of a range and then keep iterating to a lesser or greater value until some criteria is met, such as when the opposite bound is found. Golf treees are by default constructed so that such iterations are O(1) in complexity, meaning each is a single tree node access (see <a href='/new-tree.html'>new-tree</a>). <br/>
<div class="vsub"><a id="Examples"></a>Examples</div>
In this example, a million key/value pairs are inserted into a tree, and then each of them is searched for and then displayed back (see <a href='/write-tree.html'>write-tree</a> for more on inserting into a tree). Both the key and the data are a numerical value of a key:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_632'>
<span class="Statement"> %%</span> /tree-example<span class="Identifier"> public</span>

<span class="Statement">     new-tree</span> mytree<span class="Identifier"> key-as</span> <span class="Constant">&quot;positive integer&quot;</span> <span class="Comment">// create new tree</span>

<span class="Statement">     set-number</span> i
<span class="Statement">     start-loop</span><span class="Type"> use</span> i<span class="Identifier"> start-with</span> <span class="Constant">0</span><span class="Identifier"> repeat</span> <span class="Constant">1000000</span>
<span class="Statement">         number-string</span> i<span class="Type"> to</span> key
<span class="Statement">         set-string</span> data=key
<span class="Statement">         write-tree</span> mytree<span class="Identifier"> key</span> (key)<span class="Identifier"> value</span> data <span class="Comment">// insert key/data to the tree</span>
<span class="Statement">     end-loop</span>

<span class="Statement">     start-loop</span><span class="Type"> use</span> i<span class="Identifier"> start-with</span> <span class="Constant">0</span><span class="Identifier"> repeat</span> <span class="Constant">1000000</span>
<span class="Statement">         number-string</span> i<span class="Type"> to</span> key
         <span class="Comment">// search tree for each key previously inserted</span>
<span class="Statement">         read-tree</span> mytree<span class="Identifier"> equal</span> (key)<span class="Type"> status</span> st<span class="Type"> value</span> data
<span class="Statement">         if-true</span> st<span class="Identifier"> not-equal</span> GG_OKAY
<span class="Statement">             @</span>Could not find key <span class="Statement">&lt;&lt;p-out</span> key<span class="Statement">&gt;&gt;</span>
<span class="Statement">         else-if</span>
<span class="Statement">             @</span>Found data <span class="Statement">&lt;&lt;p-out</span> data<span class="Statement">&gt;&gt;</span> associated with key <span class="Statement">&lt;&lt;p-out</span> key<span class="Statement">&gt;&gt;</span>
<span class="Statement">         end-if</span>
<span class="Statement">         delete-string</span> key
<span class="Statement">     end-loop</span>
<span class="Statement"> %%</span></pre>
<span id=golf_copied_632 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_632' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_632, code_632, golf_copied_632)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<!--BEFSAL13--><div class="vsub"><a id="See also"></a>See also</div>
 <a name='Tree'></a><span style="font-weight:bold;">Tree</span><br/>
<a href='/delete-tree.html'>delete-tree</a> &nbsp;<br/>
<a href='/get-tree.html'>get-tree</a> &nbsp;<br/>
<a href='/new-tree.html'>new-tree</a> &nbsp;<br/>
<a href='/purge-tree.html'>purge-tree</a> &nbsp;<br/>
<a href='/read-tree.html'>read-tree</a> &nbsp;<br/>
<a href='/use-cursor.html'>use-cursor</a> &nbsp;<br/>
<a href='/write-tree.html'>write-tree</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='/documentation.html'>documentation</a><br/>
<a id='rename-file.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:right;background-color:white;'><a href='https://golf-lang.com' style='border-bottom:0px'><img src='https://golf-lang.com/golf.png'/></a></div><div class='vhub' style='margin-top:10px;'>&nbsp;Rename file</div><hr/><span style="font-weight:bold;">Purpose</span>: Renames a file.<br/>
<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_633'>
<span class="Statement"> rename-file</span> &lt;from file&gt;<span class="Identifier"> to</span> &lt;to file&gt; [<span class="Type"> status</span> &lt;status&gt; ]</pre>
<span id=golf_copied_633 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_633' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_633, code_633, golf_copied_633)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
rename-file will rename &lt;from file&gt; to &lt;to file&gt;. &lt;status&gt; number is GG_OKAY on success and GG_ERR_RENAME on failure.<br/>
<br/>
&lt;from file&gt; and &lt;to file&gt; must be specified with full paths unless they are in the current working directory (see <a href='/directories.html'>directories</a>), in which case a name alone will suffice. &lt;from file&gt; and &lt;to file&gt; can be in different directories. <br/>
<div class="vsub"><a id="Examples"></a>Examples</div>
Rename files:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_634'>
<span class="Statement"> rename-file</span> <span class="Constant">&quot;/home/u1/d1/f1&quot;</span><span class="Identifier"> to</span> <span class="Constant">&quot;/home/u1/d2/f2&quot;</span><span class="Type"> status</span> st
<span class="Statement"> if-true</span> st<span class="Identifier"> equal</span> GG_OKAY
<span class="Statement">     @</span>Rename successful. &lt;br/&gt;
<span class="Statement"> end-if</span></pre>
<span id=golf_copied_634 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_634' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_634, code_634, golf_copied_634)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Rename files in the current working directory:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_635'>
<span class="Statement"> rename-file</span> <span class="Constant">&quot;f1&quot;</span><span class="Identifier"> to</span> <span class="Constant">&quot;f2&quot;</span><span class="Type"> status</span> st
<span class="Statement"> if-true</span> st<span class="Identifier"> equal</span> GG_OKAY
<span class="Statement">     @</span>Rename successful. &lt;br/&gt;
<span class="Statement"> end-if</span></pre>
<span id=golf_copied_635 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_635' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_635, code_635, golf_copied_635)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<!--BEFSAL13--><div class="vsub"><a id="See also"></a>See also</div>
 <a name='Files'></a><span style="font-weight:bold;">Files</span><br/>
<a href='/close-file.html'>close-file</a> &nbsp;<br/>
<a href='/copy-file.html'>copy-file</a> &nbsp;<br/>
<a href='/delete-file.html'>delete-file</a> &nbsp;<br/>
<a href='/file-position.html'>file-position</a> &nbsp;<br/>
<a href='/file-storage.html'>file-storage</a> &nbsp;<br/>
<a href='/file-uploading.html'>file-uploading</a> &nbsp;<br/>
<a href='/lock-file.html'>lock-file</a> &nbsp;<br/>
<a href='/open-file.html'>open-file</a> &nbsp;<br/>
<a href='/read-file.html'>read-file</a> &nbsp;<br/>
<a href='/read-line.html'>read-line</a> &nbsp;<br/>
<a href='/rename-file.html'>rename-file</a> &nbsp;<br/>
<a href='/stat-file.html'>stat-file</a> &nbsp;<br/>
<a href='/temporary-file.html'>temporary-file</a> &nbsp;<br/>
<a href='/uniq-file.html'>uniq-file</a> &nbsp;<br/>
<a href='/unlock-file.html'>unlock-file</a> &nbsp;<br/>
<a href='/write-file.html'>write-file</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='/documentation.html'>documentation</a><br/>
<a id='replace-string.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:right;background-color:white;'><a href='https://golf-lang.com' style='border-bottom:0px'><img src='https://golf-lang.com/golf.png'/></a></div><div class='vhub' style='margin-top:10px;'>&nbsp;Replace string</div><hr/><span style="font-weight:bold;">Purpose</span>: Replaces part of string.<br/>
<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_636'>
<span class="Statement"> replace-string</span> &lt;string&gt; \
     (<span class="Identifier"> copy</span> &lt;replacement&gt; ) | (<span class="Identifier"> copy-end</span> &lt;replacement&gt; ) \
     [<span class="Identifier"> start-with</span> &lt;start with&gt; ] \
     [<span class="Identifier"> length</span> &lt;length&gt; ]</pre>
<span id=golf_copied_636 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_636' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_636, code_636, golf_copied_636)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
replace-string will replace part of &lt;string&gt; with &lt;replacement&gt; string. "copy" clause will make a replacement in the leading part of &lt;string&gt;, while "copy-end" will make a replacement in the trailing part of &lt;string&gt;.<br/>
<br/>
If "length" clause is not used, then the entire &lt;replacement&gt; string is used, otherwise only the &lt;length&gt; leading bytes of it.<br/>
<br/>
If "start-with" clause is used, then &lt;replacement&gt; will be copied starting with byte &lt;start with&gt; in &lt;string&gt; ("0" being the first byte) (with "copy" clause) or starting with &lt;start with&gt; bytes prior to the end of &lt;string&gt; (with "copy-end" clause).<br/>
<br/>
If "start-with" clause is not used, then &lt;replacement&gt; will replace the leading part of &lt;string&gt; (with "copy" clause") or the very last part of &lt;string&gt; (with "copy-end" clause). In either case, the number of bytes copied is determined by whether "length" clause is used or not.<br/>
<br/>
If either "start-with" or "length" is negative, it's the same as if not specified. <br/>
<div class="vsub"><a id="Examples"></a>Examples</div>
After replace-string below, string "a" will be "none string is here":<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_637'>
<span class="Statement"> set-string</span> b=<span class="Constant">&quot;none&quot;</span>
<span class="Statement"> set-string</span> a=<span class="Constant">&quot;some string is here&quot;</span>
<span class="Statement"> replace-string</span> a<span class="Identifier"> copy</span> b</pre>
<span id=golf_copied_637 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_637' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_637, code_637, golf_copied_637)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
After replace-string below, string "a" will be "some string is none":<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_638'>
<span class="Statement"> set-string</span> b=<span class="Constant">&quot;none&quot;</span>
<span class="Statement"> set-string</span> a=<span class="Constant">&quot;some string is here&quot;</span>
<span class="Statement"> replace-string</span> a<span class="Identifier"> copy-end</span> b</pre>
<span id=golf_copied_638 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_638' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_638, code_638, golf_copied_638)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
In this example, "a" will be "somnontring is here":<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_639'>
<span class="Statement"> set-string</span> b=<span class="Constant">&quot;none&quot;</span>
<span class="Statement"> set-string</span> a=<span class="Constant">&quot;some string is here&quot;</span>
<span class="Statement"> replace-string</span> a<span class="Identifier"> copy</span> b<span class="Identifier"> start-with</span> <span class="Constant">3</span><span class="Identifier"> length</span> <span class="Constant">3</span></pre>
<span id=golf_copied_639 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_639' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_639, code_639, golf_copied_639)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
In the following example, "a" will be "some string inohere":<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_640'>
<span class="Statement"> set-string</span> b=<span class="Constant">&quot;none&quot;</span>
<span class="Statement"> set-string</span> a=<span class="Constant">&quot;some string is here&quot;</span>
<span class="Statement"> replace-string</span> a<span class="Identifier"> copy-end</span> b<span class="Identifier"> start-with</span> <span class="Constant">6</span><span class="Identifier"> length</span> <span class="Constant">2</span></pre>
<span id=golf_copied_640 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_640' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_640, code_640, golf_copied_640)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<!--BEFSAL13--><div class="vsub"><a id="See also"></a>See also</div>
 <a name='Strings'></a><span style="font-weight:bold;">Strings</span><br/>
<a href='/copy-string.html'>copy-string</a> &nbsp;<br/>
<a href='/count-substring.html'>count-substring</a> &nbsp;<br/>
<a href='/delete-string.html'>delete-string</a> &nbsp;<br/>
<a href='/lower-string.html'>lower-string</a> &nbsp;<br/>
<a href='/read-split.html'>read-split</a> &nbsp;<br/>
<a href='/replace-string.html'>replace-string</a> &nbsp;<br/>
<a href='/set-string.html'>set-string</a> &nbsp;<br/>
<a href='/split-string.html'>split-string</a> &nbsp;<br/>
<a href='/string-length.html'>string-length</a> &nbsp;<br/>
<a href='/trim-string.html'>trim-string</a> &nbsp;<br/>
<a href='/upper-string.html'>upper-string</a> &nbsp;<br/>
<a href='/write-string.html'>write-string</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='/documentation.html'>documentation</a><br/>
<a id='report-error.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:right;background-color:white;'><a href='https://golf-lang.com' style='border-bottom:0px'><img src='https://golf-lang.com/golf.png'/></a></div><div class='vhub' style='margin-top:10px;'>&nbsp;Report error</div><hr/><span style="font-weight:bold;">Purpose</span>: Reports a fatal error.<br/>
<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_641'>
<span class="Statement"> report-error</span> &lt;format&gt;, &lt;variable&gt; [<span class="Identifier"> ,</span> ... ]</pre>
<span id=golf_copied_641 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_641' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_641, code_641, golf_copied_641)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
report-error will report a fatal error. It will format an error message according to the &lt;format&gt; string and a list of &lt;variable&gt;s and then &nbsp;write it in the trace file (see <a href='/directories.html'>directories</a>); this happens regardless of whether tracing is enabled or not.<br/>
<br/>
See <a href='/error-handling.html'>error-handling</a> when report-error is called.<br/>
<br/>
&lt;format&gt; string must be present and there must be at least one &lt;variable&gt; (it means if you want to trace a simple string literal you still have to use "%s" as format). The reason for this is to avoid formatting errors, and to use formatting in a consistent fashion.<br/>
<br/>
<div class="vsub"><a id="Format"></a>Format</div>
&lt;format&gt; string must be a literal. Variables must follow &lt;format&gt; separated by commas in the same order as placeholders. If you use any placeholders other than specified below, or the type of variables you use do not match the type of a correspoding placeholder in &lt;format&gt;, your program will <a href='/error-handling.html'>error out</a>. You can use the following placeholders in &lt;format&gt; (see <a href='/trace-run.html'>trace-run</a> for an example of usage):<br/>
<ul><li>%s for a string<br/>
</li><li>%&lt;number&gt;s for a string output with a width of at least &lt;number&gt; (any excess filled with spaces to the left),<br/>
</li><li>%ld for a number<br/>
</li><li>%&lt;number&gt;ld for a number output with a width of at least &lt;number&gt; (any excess filled with spaces to the left)</li></ul>
<div class="vsub"><a id="Examples"></a>Examples</div>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_642'>
<span class="Statement"> report-error</span> <span class="Constant">&quot;Too many input parameters for </span><span class="Special">%s</span><span class="Constant">, encountered total of [</span><span class="Special">%ld</span><span class="Constant">]&quot;</span>, <span class="Constant">&quot;customer&quot;</span>, num_count</pre>
<span id=golf_copied_642 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_642' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_642, code_642, golf_copied_642)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<!--BEFSAL13--><div class="vsub"><a id="See also"></a>See also</div>
 <a name='Error handling'></a><span style="font-weight:bold;">Error handling</span><br/>
<a href='/db-error.html'>db-error</a> &nbsp;<br/>
<a href='/error-code.html'>error-code</a> &nbsp;<br/>
<a href='/error-handling.html'>error-handling</a> &nbsp;<br/>
<a href='/report-error.html'>report-error</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='/documentation.html'>documentation</a><br/>
<a id='request-body.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:right;background-color:white;'><a href='https://golf-lang.com' style='border-bottom:0px'><img src='https://golf-lang.com/golf.png'/></a></div><div class='vhub' style='margin-top:10px;'>&nbsp;Request body</div><hr/><span style="font-weight:bold;">Purpose</span>: Get the body of an HTTP request.<br/>
<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_657'>
<span class="Statement"> request-body</span> &lt;request body&gt;</pre>
<span id=golf_copied_657 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_657' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_657, code_657, golf_copied_657)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
request-body stores the request body of an HTTP request into string &lt;request body&gt;.<br/>
<br/>
If the content type of the request is "multipart/form-data", the request body is empty because all the data (including any attached files) can be obtained by using <a href='/get-param.html'>get-param</a> (see <a href='/file-uploading.html'>file-uploading</a> for files). In all other cases, request body is available.<br/>
<br/>
Typical use of request-body is when some text or binary information is attached to the request, such as JSON for example, though it can be anything else, for example an image, some text, or a PDF document. Usually request body is present for POST, PUT or PATCH requests, but you can also obtain it for GET or DELETE requests, if supplied (for instance identifying a resource may require more information than can fit in a query string), or for any custom request method.<br/>
<div class="vsub"><a id="Examples"></a>Examples</div>
String variable "reqb" will hold request body of a request:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_658'>
<span class="Statement"> request-body</span> reqb</pre>
<span id=golf_copied_658 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_658' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_658, code_658, golf_copied_658)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<!--BEFSAL13--><div class="vsub"><a id="See also"></a>See also</div>
 <a name='Request data'></a><span style="font-weight:bold;">Request data</span><br/>
<a href='/get-param.html'>get-param</a> &nbsp;<br/>
<a href='/request-body.html'>request-body</a> &nbsp;<br/>
<a href='/set-param.html'>set-param</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='/documentation.html'>documentation</a><br/>
<a id='request.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:right;background-color:white;'><a href='https://golf-lang.com' style='border-bottom:0px'><img src='https://golf-lang.com/golf.png'/></a></div><div class='vhub' style='margin-top:10px;'>&nbsp;Request</div><hr/>Golf applications run by processing requests. A request always takes form of an HTTP request, meaning a URL, an optional HTTP request body, and any environment variables. This is regardless of whether it's a <a href='/service.html'>service</a> or a <a href='/command-line.html'>command-line</a> program. <br/>
<div class="vsub"><a id="Request URL"></a>Request URL</div>
A "request URL" is a URL that an outside caller (such as a web browser) uses to execute your Golf code. Aside from the scheme, domain and port, it's made up of:<br/>
<ul><li>application path,<br/>
</li><li>request path, and<br/>
</li><li>URL parameters.</li></ul>
Here's a breakdown of URL structure:<br/>
<div class='ncode' style='position:relative;padding-right:16px;'>
<pre id='code_644'>
&lt;scheme&gt;://&lt;domain&gt;[:&lt;port&gt;]&lt;application path&gt;&lt;request path&gt;&lt;parameters&gt;</pre>
<span id=golf_copied_644 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_644' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_644, code_644, golf_copied_644)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
For example, in the following URL:<br/>
<div class='ncode' style='position:relative;padding-right:16px;'>
<pre id='code_647'>
https://your.website.com/my-app/my-request/par1=val1/par2=val2</pre>
<span id=golf_copied_647 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_647' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_647, code_647, golf_copied_647)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
"/my-app" is application path, "/my-request" is request path and "/par1=val1/par2=val2" are parameters "par1" and "par2" with values "val1" and "val2". Together, application path and request path are called URL path.<br/>
<div class="vsub"><a id="Application path"></a>Application path</div>
The leading part of URL's path is called "application path". By default, application path is the application name (see <a href='/mgrg.html'>mgrg</a> with "-i" option) preceded by forward slash ("/"); if it's "shopping", then the default application path is:<br/>
<div class='ncode' style='position:relative;padding-right:16px;'>
<pre id='code_649'>
/shopping</pre>
<span id=golf_copied_649 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_649' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_649, code_649, golf_copied_649)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Application name can contain alphanumerical characters and hyphens.<br/>
<br/>
<span style="font-weight:bold;">- Customizing application path</span><br/>
You can change the application path by specifying it with "--path" parameter in <a href='/gg.html'>gg</a> when building; each application must have its own unique path. Note that whatever it may be, the application name must always be its last path segment. For example, if your application name is "shopping", then the application path may be:<br/>
<div class='ncode' style='position:relative;padding-right:16px;'>
<pre id='code_651'>
/api/v2/shopping</pre>
<span id=golf_copied_651 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_651' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_651, code_651, golf_copied_651)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
An example of specifying the custom application path:<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_645'>
gg <span class="Special">-q</span> <span class="Special">--path</span><span class="Statement">=</span><span class="Statement">&quot;</span><span class="Constant">/api/v2/shopping</span><span class="Statement">&quot;</span></pre>
<span id=golf_copied_645 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_645' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_645, code_645, golf_copied_645)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<div class="vsub"><a id="Request path"></a>Request path</div>
Request path follows the application path, for instance:<br/>
<div class='ncode' style='position:relative;padding-right:16px;'>
<pre id='code_652'>
https://some.web.site/shopping/buy-item</pre>
<span id=golf_copied_652 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_652' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_652, code_652, golf_copied_652)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
In this case the application path is "/shopping" and the request path is "/buy-item". It means that file "buy-item.golf" handles request "/buy-item" by implementing a <a href='/begin-handler.html'>begin-handler</a> "/buy-item" in it. As another example, file "services/manage-home.golf" (meaning "manage-home.golf" file in subdirectory "services") handles request "/services/manage-home" etc.<br/>
<br/>
The request path must match (fully or partially) the path of the file name that implements it, with source directory being the root ("/"). Here is an example of implementing a request "/buy-item" in file "buy-item.golf":<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_643'>
<span class="Statement"> begin-handler</span> /buy-item<span class="Identifier"> public</span>
<span class="Statement">     get-param</span> some_param
<span class="Statement">     @</span>Bought item: <span class="Statement">&lt;&lt;p-out</span> some_param<span class="Statement">&gt;&gt;</span>
<span class="Statement"> end-handler</span></pre>
<span id=golf_copied_643 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_643' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_643, code_643, golf_copied_643)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
As an example of a path hierarchy, such as for example a hierarchy of resources, methods etc, <a href='/begin-handler.html'>begin-handler</a> may be:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_646'>
<span class="Statement"> begin-handler</span> /items/wine-collection/red-wine/buy-item<span class="Identifier"> public</span>
<span class="Statement">     .</span>..
<span class="Statement"> end-handler</span></pre>
<span id=golf_copied_646 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_646' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_646, code_646, golf_copied_646)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
then the URL to call it would be:<br/>
<div class='ncode' style='position:relative;padding-right:16px;'>
<pre id='code_653'>
https://some.web.site/shopping/items/wine-collection/red-wine/buy-item</pre>
<span id=golf_copied_653 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_653' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_653, code_653, golf_copied_653)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
and might be implemented in file "items/wine-collection/red-wine/buy-item.golf", meaning under subdirectory "items", then subdirectory "wine-collection", then subdirectory "red-wine", then file "buy-item.golf".<br/>
<br/>
<span style="font-weight:bold;">- File/path naming conventions</span><br/>
By default, a request handler would be implemented in a source file whose path matches the request path, either fully or partially. <br/>
<br/>
The simplest example is that "/buy-item" request must be implemented in file "buy-item.golf". <br/>
<br/>
As a more involved example, request handler for "/items/wine-collection/red-wine/buy-item" can be implemented in file "items.golf" or file "items/wine-collection.golf" or file "items/wine-collection/red-wine.golf" or file "items/wine-collection/red-wine/buy-item.golf". <br/>
<br/>
Each of these source files can contain any number of matching requests. For instance, file "items.golf" can contain request handlers for both "/items/wine-collection/red-wine/buy-item" and "/items/beer-collection/ipa-beer/buy-item"; while file "items/wine-collection.golf" can contain request handlers for both "items/wine-collection/red-wine" and "items/wine-collection/white-wine". <br/>
<br/>
By the same token, file "items/wine-collection/red-wine/buy-item.golf" can implement both "/items/wine-collection/red-wine/buy-item" and "/items/wine-collection/red-wine/buy-item/sale" requests, as both requests match the file path.<br/>
<br/>
Note that if you use "--single-file" option in <a href='/gg.html'>gg</a>, then each source ".golf" file must contain only a single request, and its request path must match the file path fully. So in this case, request handler for "/items/wine-collection/red-wine/buy-item" must be in file "items/wine-collection/red-wine/buy-item.golf", and no other request can be implemented in it.<br/>
<div class="vsub"><a id="URL parameters"></a>URL parameters</div>
The actual input parameters follow after the request path, and can be specified in a number of ways. A parameter value is generally URL encoded in any case.<br/>
<br/>
<span style="font-weight:bold;">- Path segments</span><br/>
A common way is to specify name and value separated by an equal sign within a single path segment:<br/>
<div class='ncode' style='position:relative;padding-right:16px;'>
<pre id='code_654'>
https://some.web.site/shopping/buy-item/sku=4811/price=600/</pre>
<span id=golf_copied_654 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_654' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_654, code_654, golf_copied_654)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
This way, you have a readable representation of parameter names and values, while still maintaining the hierarchical form which conveys how are the parameters structured.<br/>
<br/>
Here, the required request path is "/buy-item" and there are two input parameters ("sku" and "price") with values of "4811" and "600" respectively. <br/>
<br/>
<span style="font-weight:bold;">- Query string</span><br/>
Parameters can be specified after a question mark in a "name=value" form. For example, the full URL (with the same parameter values as above) may be:<br/>
<div class='ncode' style='position:relative;padding-right:16px;'>
<pre id='code_655'>
https://some.web.site/shopping/buy-item?sku=4811&amp;price=600</pre>
<span id=golf_copied_655 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_655' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_655, code_655, golf_copied_655)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<span style="font-weight:bold;">- Mixed</span><br/>
You can specify a mix of the above ways to write parameters, for instance the above URL can be written as:<br/>
<div class='ncode' style='position:relative;padding-right:16px;'>
<pre id='code_656'>
https://some.web.site/shopping/buy-item/sku=4811?price=600</pre>
<span id=golf_copied_656 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_656' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_656, code_656, golf_copied_656)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<span style="font-weight:bold;">- Parameters</span><br/>
A parameter name can be comprised of alphanumeric characters, hyphens and underscores, and it must start with an alphabet character. Any hyphens are converted to underscores for the purpose of obtaining parameter value, see <a href='/get-param.html'>get-param</a>. Do not use double underscore ("__") in parameter names. <br/>
<br/>
Structuring your parameters, i.e. the order in a query path or path segments, and which ones (if any) are in a query string, is determined by you. Regardless of your choices, the code that handles a request is the same. In the example used here, you can obtain the parameters in request handler source file "buy-item.golf":<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_648'>
<span class="Statement"> begin-handler</span> /buy-item<span class="Identifier"> public</span>
<span class="Statement">     get-param</span> sku
<span class="Statement">     get-param</span> price

<span class="Statement">     run-query</span> @mydb = <span class="Constant">&quot;update wine_items set price='</span><span class="Special">%s</span><span class="Constant">' where sku='</span><span class="Special">%s</span><span class="Constant">'&quot;</span><span class="Identifier"> :</span> price, sku<span class="Identifier"> no-loop</span>
<span class="Statement">     @</span>OKAY
<span class="Statement"> end-handler</span></pre>
<span id=golf_copied_648 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_648' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_648, code_648, golf_copied_648)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
For a hierarchical URL path, you would write the same:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_650'>
<span class="Statement"> begin-handler</span> /items/wine-collection/red-wine/buy-item<span class="Identifier"> public</span>
<span class="Statement">     get-param</span> sku
<span class="Statement">     get-param</span> price

<span class="Statement">     run-query</span> @mydb = <span class="Constant">&quot;update wine_items set price='</span><span class="Special">%s</span><span class="Constant">' where sku='</span><span class="Special">%s</span><span class="Constant">'&quot;</span><span class="Identifier"> :</span> price, sku<span class="Identifier"> no-loop</span>
<span class="Statement"> end-handler</span></pre>
<span id=golf_copied_650 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_650' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_650, code_650, golf_copied_650)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<div class="vsub"><a id="Maximum length"></a>Maximum length</div>
Maximum length of a request URL is 2500 bytes.<br/>
<div class="vsub"><a id="How Golf handles requests"></a>How Golf handles requests</div>
There are generally two kinds of requests, depending on their origin. If a request comes from outside the process that's serving it, then it's an "external" request (such as from a web browser, a web API client, from command line execution etc). Conversely, if a request comes from inside the process that's serving it, it's an "internal" request - meaning one request handler is calling another within one the process(es) serving an application. Internal requests are made using <a href='/call-handler.html'>call-handler</a> statement.<br/>
<br/>
An external request is handled by a first available process:<br/>
<ul><li>For a <a href='/command-line.html'>command-line</a> program, there is only a single process, and it handles a single requests before it exits. <br/>
</li><li>For a <a href='/service.html'>service</a> application, there can be any number of processes running. A process is chosen to service a request if it is currently not serving other requests; this way there are no processes waiting idle unnecessarily. Each process is identical and can serve any request, i.e. it has all request handlers available to it. Thus, when a process is chosen to serve a request, then this process will simply execute its begin-handler.</li></ul>
<span style="font-weight:bold;">- Processing a request</span><br/>
To handle a request, a process first calls a Golf dispatcher, which is automatically generated. It uses a request name to call the appropriate request handler, as explained above. <br/>
<br/>
You can implement two hooks into request handling: one that executes before each request (<a href='/before-handler.html'>before-handler</a>) and one that executes afterwards (<a href='/after-handler.html'>after-handler</a>). <br/>
<br/>
At the end of the request, all request memory and all file handles allocated by Golf will be freed, except for process-scoped memory (see <a href='/memory-handling.html'>memory-handling</a>).<br/>
<br/>
<span style="font-weight:bold;">- Performance</span><br/>
Golf uses a hash table to match a request with a handler function, as well to match parameters. Typically, it takes only a single lookup to find the handler function/parameters, regardless of the number of possible request names/parameters a process may serve (be it 10 or 10,000 different names). Golf pre-generates a hash table at compile time, so no run-time cycles are spent on creating it. Also, the hash table is created as a continuous block of memory in the program's data segment, which loads as a part of the program (as a single memory copy) and is very fast because accessing the data needs no pointer translations. As a result, Golf dispatcher is extremely fast.<br/>
<br/>
<span style="font-weight:bold;">- Unrecognized requests</span><br/>
If no request has been recognized (i.e. request name does not match any request-handling ".golf" source file), then <br/>
<ul><li>no request handler will execute, <br/>
</li><li><a href='/before-handler.html'>before-handler</a> and <a href='/after-handler.html'>after-handler</a> will not execute either,<br/>
</li><li>and a "Request not found" error will be reported via <a href='/report-error.html'>report-error</a>.</li></ul>
<!--BEFSAL13--><div class="vsub"><a id="See also"></a>See also</div>
 <a name='Requests'></a><span style="font-weight:bold;">Requests</span><br/>
<a href='/request.html'>request</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='/documentation.html'>documentation</a><br/>
<a id='resize-hash.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:right;background-color:white;'><a href='https://golf-lang.com' style='border-bottom:0px'><img src='https://golf-lang.com/golf.png'/></a></div><div class='vhub' style='margin-top:10px;'>&nbsp;Resize hash</div><hr/><span style="font-weight:bold;">Purpose</span>: Resize hash table.<br/>
<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_659'>
<span class="Statement"> resize-hash</span> &lt;hash&gt;<span class="Identifier"> hash-size</span> &lt;new size&gt;</pre>
<span id=golf_copied_659 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_659' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_659, code_659, golf_copied_659)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
resize-hash will resize &lt;hash&gt; table (created by <a href='/new-hash.html'>new-hash</a>) to size &lt;new size&gt;, which refers to the number of "buckets", or possible hash codes derived from keys stored.<br/>
<br/>
When a number of elements stored grows, the search performance may decline if hash size remains the same. Consequently, if the number of elements shrinks, the memory allocated by the hash may be wasted. Use <a href='/get-hash.html'>get-hash</a> to obtain its current hash-size, its length (the number of elements currently stored in it) and the statistics (such as average reads) to determine if you need to resize it.<br/>
<br/>
Resizing is generally expensive, so it should not be done too often, and only when needed. The goal is to amortize this expense through future gain of lookup performance. For that reason it may be better to resize proportionally (i.e. by a percentage), unless you have a specific application reason to do otherwise, or to avoid exponential growth.<br/>
<div class="vsub"><a id="Examples"></a>Examples</div>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_660'>
<span class="Statement"> resize-hash</span> h<span class="Identifier"> hash-size</span> <span class="Constant">100000</span></pre>
<span id=golf_copied_660 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_660' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_660, code_660, golf_copied_660)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<!--BEFSAL13--><div class="vsub"><a id="See also"></a>See also</div>
 <a name='Hash'></a><span style="font-weight:bold;">Hash</span><br/>
<a href='/get-hash.html'>get-hash</a> &nbsp;<br/>
<a href='/new-hash.html'>new-hash</a> &nbsp;<br/>
<a href='/purge-hash.html'>purge-hash</a> &nbsp;<br/>
<a href='/read-hash.html'>read-hash</a> &nbsp;<br/>
<a href='/resize-hash.html'>resize-hash</a> &nbsp;<br/>
<a href='/write-hash.html'>write-hash</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='/documentation.html'>documentation</a><br/>
<a id='return-handler.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:right;background-color:white;'><a href='https://golf-lang.com' style='border-bottom:0px'><img src='https://golf-lang.com/golf.png'/></a></div><div class='vhub' style='margin-top:10px;'>&nbsp;Return handler</div><hr/><span style="font-weight:bold;">Purpose</span>: Return from current request handler back to its caller.<br/>
<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_661'>
<span class="Statement"> return-handler</span></pre>
<span id=golf_copied_661 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_661' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_661, code_661, golf_copied_661)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Returns from current request handler by transferring control back to its caller. If the current request handler was called from an outside caller (such as web browser, API, command line etc.), then return-handler is equivalent to <a href='/exit-handler.html'>exit-handler</a>. If the current request handler was called from another request handler with <a href='/call-handler.html'>call-handler</a>, then control transfers back to that handler immediately after call-handler.<br/>
<div class="vsub"><a id="Examples"></a>Examples</div>
In this example, "req-handler" (the caller) will call "other-handler" (the callee), which will return to the caller (immediately after call-handler). Here's the caller:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_662'>
<span class="Statement"> begin-handler</span> /req-handler<span class="Identifier"> public</span>
<span class="Statement">     .</span>..
<span class="Statement">     call-handler</span> other-handler
<span class="Statement">     .</span>..
<span class="Statement"> end-handler</span></pre>
<span id=golf_copied_662 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_662' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_662, code_662, golf_copied_662)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
The callee handler:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_663'>
<span class="Statement"> begin-handler</span> /other-handler<span class="Identifier"> public</span>
<span class="Statement">     .</span>..
<span class="Statement">     return-handler</span>
<span class="Statement">     .</span>..
<span class="Statement"> end-handler</span></pre>
<span id=golf_copied_663 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_663' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_663, code_663, golf_copied_663)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<!--BEFSAL13--><div class="vsub"><a id="See also"></a>See also</div>
 <a name='Program flow'></a><span style="font-weight:bold;">Program flow</span><br/>
<a href='/break-loop.html'>break-loop</a> &nbsp;<br/>
<a href='/code-blocks.html'>code-blocks</a> &nbsp;<br/>
<a href='/continue-loop.html'>continue-loop</a> &nbsp;<br/>
<a href='/do-once.html'>do-once</a> &nbsp;<br/>
<a href='/exit-handler.html'>exit-handler</a> &nbsp;<br/>
<a href='/if-defined.html'>if-defined</a> &nbsp;<br/>
<a href='/if-true.html'>if-true</a> &nbsp;<br/>
<a href='/return-handler.html'>return-handler</a> &nbsp;<br/>
<a href='/set-bool.html'>set-bool</a> &nbsp;<br/>
<a href='/start-loop.html'>start-loop</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='/documentation.html'>documentation</a><br/>
<a id='rewind-fifo.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:right;background-color:white;'><a href='https://golf-lang.com' style='border-bottom:0px'><img src='https://golf-lang.com/golf.png'/></a></div><div class='vhub' style='margin-top:10px;'>&nbsp;Rewind fifo</div><hr/><span style="font-weight:bold;">Purpose</span>: Rewind FIFO list to the beginning.<br/>
<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_664'>
<span class="Statement"> rewind-fifo</span> &lt;list&gt;</pre>
<span id=golf_copied_664 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_664' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_664, code_664, golf_copied_664)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
rewind-fifo will position at the very first data element put into &lt;list&gt; which was created with <a href='/new-fifo.html'>new-fifo</a>. Each time <a href='/read-fifo.html'>read-fifo</a> is used, the internal position moves to the next element in the order they were put in. rewind-fifo rewinds back to the very first one.<br/>
<div class="vsub"><a id="Examples"></a>Examples</div>
See <a href='/read-fifo.html'>read-fifo</a>.<br/>
<!--BEFSAL13--><div class="vsub"><a id="See also"></a>See also</div>
 <a name='FIFO'></a><span style="font-weight:bold;">FIFO</span><br/>
<a href='/delete-fifo.html'>delete-fifo</a> &nbsp;<br/>
<a href='/new-fifo.html'>new-fifo</a> &nbsp;<br/>
<a href='/purge-fifo.html'>purge-fifo</a> &nbsp;<br/>
<a href='/read-fifo.html'>read-fifo</a> &nbsp;<br/>
<a href='/rewind-fifo.html'>rewind-fifo</a> &nbsp;<br/>
<a href='/write-fifo.html'>write-fifo</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='/documentation.html'>documentation</a><br/>
<a id='rewind-lifo.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:right;background-color:white;'><a href='https://golf-lang.com' style='border-bottom:0px'><img src='https://golf-lang.com/golf.png'/></a></div><div class='vhub' style='margin-top:10px;'>&nbsp;Rewind lifo</div><hr/><span style="font-weight:bold;">Purpose</span>: Rewind LIFO list.<br/>
<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_665'>
<span class="Statement"> rewind-lifo</span> &lt;list&gt;</pre>
<span id=golf_copied_665 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_665' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_665, code_665, golf_copied_665)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
rewind-lifo will position at the very last data element put into &lt;list&gt; which was created with <a href='/new-lifo.html'>new-lifo</a>. Each time <a href='/read-lifo.html'>read-lifo</a> is used, the internal position moves to the previous element in the reverse order they were put in.<br/>
<div class="vsub"><a id="Examples"></a>Examples</div>
See <a href='/read-lifo.html'>read-lifo</a>.<br/>
<!--BEFSAL13--><div class="vsub"><a id="See also"></a>See also</div>
 <a name='LIFO'></a><span style="font-weight:bold;">LIFO</span><br/>
<a href='/delete-lifo.html'>delete-lifo</a> &nbsp;<br/>
<a href='/new-lifo.html'>new-lifo</a> &nbsp;<br/>
<a href='/purge-lifo.html'>purge-lifo</a> &nbsp;<br/>
<a href='/read-lifo.html'>read-lifo</a> &nbsp;<br/>
<a href='/rewind-lifo.html'>rewind-lifo</a> &nbsp;<br/>
<a href='/write-lifo.html'>write-lifo</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='/documentation.html'>documentation</a><br/>
<a id='rollback-transaction.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:right;background-color:white;'><a href='https://golf-lang.com' style='border-bottom:0px'><img src='https://golf-lang.com/golf.png'/></a></div><div class='vhub' style='margin-top:10px;'>&nbsp;Rollback transaction</div><hr/><span style="font-weight:bold;">Purpose</span>: Rollbacks a SQL transaction.<br/>
<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_666'>
<span class="Statement"> rollback-transaction</span> [ @&lt;database&gt; ] \
     [<span class="Identifier"> on-error-continue</span> |<span class="Identifier"> on-error-exit</span> ] \
     [<span class="Type"> error</span> &lt;error&gt; ] [<span class="Type"> error-text</span> &lt;error text&gt; ] \
     [<span class="Identifier"> options</span> &lt;options&gt; ]</pre>
<span id=golf_copied_666 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_666' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_666, code_666, golf_copied_666)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
rollback-transaction will roll back a transaction started with <a href='/begin-transaction.html'>begin-transaction</a>. <br/>
<br/>
&lt;options&gt; (in "options" clause) is any additional options to send to database you wish to supply for this functionality.<br/>
<br/>
Once you start a transaction with <a href='/begin-transaction.html'>begin-transaction</a>, you must either commit it with <a href='/commit-transaction.html'>commit-transaction</a> or rollback with <a href='/rollback-transaction.html'>rollback-transaction</a>. If you do neither, your transaction will be rolled back once the <a href='/request.html'>request</a> has completed and your program will stop with an error message. This is because opening a transaction and leaving without committing or a rollback is a bug in your program. &nbsp;<br/>
<br/>
You must use begin-transaction, commit-transaction and rollback-transaction instead of calling this functionality through <a href='/run-query.html'>run-query</a>.<br/>
<div class="vsub"><a id="Database"></a>Database</div>
&lt;database&gt; is specified in "@" clause and is the name of the <a href='/database-config-file.html'>database-config-file</a>. If ommited, your program must use exactly one database (see --db option in <a href='/gg.html'>gg</a>).<br/>
<div class="vsub"><a id="Error handling"></a>Error handling</div>
The error code is available in &lt;error&gt; variable in "error" clause - this code is always "0" if successful. The &lt;error&gt; code may or may not be a number but is always returned as a string value. In case of error, error text is available in "error-text" clause in &lt;error text&gt; string.<br/>
<br/>
"on-error-continue" clause specifies that <a href='/request.html'>request</a> processing will continue in case of an error, whereas "on-error-exit" clause specifies that it will exit. This setting overrides database-level <a href='/db-error.html'>db-error</a> for this specific statement only. If you use "on-error-continue", be sure to check the error code.<br/>
<br/>
Note that if database connection was lost, and could not be reestablished, the request will error out (see <a href='/error-handling.html'>error-handling</a>).<br/>
<div class="vsub"><a id="Examples"></a>Examples</div>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_667'>
<span class="Statement"> begin-transaction</span> @mydb
<span class="Statement"> run-query</span> @mydb=<span class="Constant">&quot;insert into employee (name, dateOfHire) values ('Terry', now())&quot;</span>
<span class="Statement"> run-query</span> @mydb=<span class="Constant">&quot;insert into payroll (name, salary) values ('Terry', 100000)&quot;</span>
<span class="Statement"> rollback-transaction</span> @mydb</pre>
<span id=golf_copied_667 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_667' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_667, code_667, golf_copied_667)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<!--BEFSAL13--><div class="vsub"><a id="See also"></a>See also</div>
 <a name='Database'></a><span style="font-weight:bold;">Database</span><br/>
<a href='/begin-transaction.html'>begin-transaction</a> &nbsp;<br/>
<a href='/commit-transaction.html'>commit-transaction</a> &nbsp;<br/>
<a href='/current-row.html'>current-row</a> &nbsp;<br/>
<a href='/database-config-file.html'>database-config-file</a> &nbsp;<br/>
<a href='/db-error.html'>db-error</a> &nbsp;<br/>
<a href='/mariadb-database.html'>mariadb-database</a> &nbsp;<br/>
<a href='/postgresql-database.html'>postgresql-database</a> &nbsp;<br/>
<a href='/rollback-transaction.html'>rollback-transaction</a> &nbsp;<br/>
<a href='/run-query.html'>run-query</a> &nbsp;<br/>
<a href='/sqlite-database.html'>sqlite-database</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='/documentation.html'>documentation</a><br/>
<a id='run-query.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:right;background-color:white;'><a href='https://golf-lang.com' style='border-bottom:0px'><img src='https://golf-lang.com/golf.png'/></a></div><div class='vhub' style='margin-top:10px;'>&nbsp;Run query</div><hr/><span style="font-weight:bold;">Purpose</span>: Execute a query and loop through result set.<br/>
<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_668'>
<span class="Statement"> run-query</span> \
     [ @&lt;database&gt; ] \
     = &lt;query text&gt; \
     [<span class="Identifier"> input</span> &lt;input parameter&gt; [ , ... ] ] \
     [<span class="Type"> output</span> ( &lt;column name&gt; [<span class="Identifier"> noencode</span> |<span class="Identifier"> urlencode</span> |<span class="Identifier"> webencode</span> ] ) [ , ... ] ] \
     [<span class="Identifier"> no-loop</span> ] \
     [<span class="Type"> error</span> &lt;error&gt; ] \
     [<span class="Type"> error-text</span> &lt;error text&gt; ] \
     [<span class="Type"> affected-rows</span> &lt;affected rows&gt; ] \
     [<span class="Type"> row-count</span> &lt;row count&gt; ] \
     [<span class="Identifier"> on-error-continue</span> |<span class="Identifier"> on-error-exit</span> ]

     &lt;any code&gt;

 [ end-query ]

<span class="Statement"> run-prepared-query</span> \
     ... ( the same as run-query ) ...</pre>
<span id=golf_copied_668 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_668' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_668, code_668, golf_copied_668)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
run-query executes a query specified with string &lt;query text&gt;.<br/>
<div class="vsub"><a id="Database"></a>Database</div>
&lt;database&gt; is specified in "@" clause and is the name of the <a href='/database-config-file.html'>database-config-file</a>. If ommited, your program must use exactly one database (see --db option in <a href='/gg.html'>gg</a>).<br/>
<div class="vsub"><a id="Output"></a>Output</div>
<span style="font-weight:bold;">- output clause</span><br/>
"output" clause is a comma-delimited list of the query's output columns. The column names do not need to match the actual query column names, rather you can name them anyway you want, as long as they positionally correspond. String variables with the same name are created for each column name and query's output assigned to them. For example:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_670'>
<span class="Statement"> run-query</span> @db = <span class="Constant">&quot;select firstName, lastName from employees&quot;</span><span class="Type"> output</span> first_name, last_name
<span class="Statement">     @</span>First name <span class="Statement">&lt;&lt;p-out</span> first_name<span class="Statement">&gt;&gt;</span>
<span class="Statement">     @</span>Last name <span class="Statement">&lt;&lt;p-out</span> last_name<span class="Statement">&gt;&gt;</span>
<span class="Statement"> end-loop</span></pre>
<span id=golf_copied_670 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_670' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_670, code_670, golf_copied_670)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Note that the output is by default web-encoded. You can set the encoding of column output by using either "noencode" (for no encoding), "urlencode" (for URL-encoding) or "webencode" (for web-encoding) clause right after column name (see <a href='/encode-web.html'>encode-web</a>, <a href='/encode-url.html'>encode-url</a> for description of encodings). For example, here the first output column will not be encoded, and the second will be URL-encoded:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_671'>
<span class="Statement"> run-query</span> @db = <span class="Constant">&quot;select firstName, lastName from employees&quot;</span><span class="Type"> output</span> first_name<span class="Identifier"> noencode</span>, last_name<span class="Identifier"> urlencode</span>
<span class="Statement">     @</span>First name <span class="Statement">&lt;&lt;p-out</span> first_name<span class="Statement">&gt;&gt;</span>
<span class="Statement">     @</span>Last name <span class="Statement">&lt;&lt;p-out</span> last_name<span class="Statement">&gt;&gt;</span>
<span class="Statement"> end-loop</span></pre>
<span id=golf_copied_671 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_671' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_671, code_671, golf_copied_671)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<div class="vsub"><a id="Input"></a>Input</div>
The query's input parameters (if any) are specified with '%s' in the &lt;query text&gt; (note that single quotes must be included). The actual input parameters are provided after "input" clause (you can instead use semicolon, i.e. ":"), in a comma-separated list. Each input variable is a string regardless of the actual column type, as the database engine will interpret the data according to its usage. Each input variable is trimmed (left and right) before used in a query. <br/>
<div class="vsub"><a id="Looping through data"></a>Looping through data</div>
"end-query" statement ends the loop in which query results are available through "output" clause. "no-loop" clause includes implicit "end-query", and in that case no "end-query" statement can be used. This is useful if you don't want to access any output columns (or there aren't any), but rather only affected rows (in INSERT or UPDATE for example), row count (in SELECT) or error code. "end-query" is also unnecessary for DDL statements like "CREATE INDEX" for instance.<br/>
<div class="vsub"><a id="Affected rows"></a>Affected rows</div>
"affected-rows" clause provides the number of &lt;affected rows&gt; (such as number of rows inserted by INSERT). The number of rows affected is typically used for DML operations such as INSERT, UPDATE or DELETE. For SELECT, it may or may not be the same as "row-count" which returns the number of rows from a query. See your database documentation for more. <br/>
<div class="vsub"><a id="Rows returned"></a>Rows returned</div>
The number of rows returned by a query can be obtained in &lt;row count&gt; in "row-count" clause. <br/>
<div class="vsub"><a id="Error handling"></a>Error handling</div>
The error code is available in &lt;error&gt; variable in "error" clause - this code is always "0" if successful. The &lt;error&gt; code may or may not be a number but is always returned as a string value. In case of error, error text is available in "error-text" clause in &lt;error text&gt; string.<br/>
<br/>
"on-error-continue" clause specifies that <a href='/request.html'>request</a> processing will continue in case of an error, whereas "on-error-exit" clause specifies that it will exit. This setting overrides database-level <a href='/db-error.html'>db-error</a> for this specific statement only. If you use "on-error-continue", be sure to check the error code.<br/>
<br/>
Note that if database connection was lost, and could not be reestablished, the request will error out (see <a href='/error-handling.html'>error-handling</a>).<br/>
<div class="vsub"><a id="Space before = and @"></a>Space before = and @</div>
"=" and "@" clauses may or may not have a space before the data that follows. So for example, these are both valid:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_672'>
 <span class="Comment">// No space after </span><span class="Constant">&quot;@&quot;</span><span class="Comment"> and </span><span class="Constant">&quot;=&quot;</span>
<span class="Statement"> run-query</span> @db =<span class="Constant">&quot;select firstName, lastName from employee where employeeId='</span><span class="Special">%s</span><span class="Constant">'&quot;</span><span class="Type"> output</span> firstName, lastName<span class="Identifier"> input</span> empid

 <span class="Comment">// Space after </span><span class="Constant">&quot;@&quot;</span><span class="Comment"> and </span><span class="Constant">&quot;=&quot;</span>
<span class="Statement"> run-query</span><span class="Identifier"> @</span> db = <span class="Constant">&quot;select firstName, lastName from employee where employeeId='</span><span class="Special">%s</span><span class="Constant">'&quot;</span><span class="Type"> output</span> firstName, lastName<span class="Identifier"> input</span> empid</pre>
<span id=golf_copied_672 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_672' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_672, code_672, golf_copied_672)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<div class="vsub"><a id="run-prepared-query"></a>run-prepared-query</div>
run-prepared-query is the same as run-query except that a &lt;query&gt; is prepared. That means it is pre-compiled and its execution plan is created once, instead of each time a query executes. The statement is cached going forward for the life of the process (with the rare exception of re-establishing a lost database connection). It means effectively an unlimited number of requests will be reusing the query statement, which generally implies higher performance. Note that databases do not allow prepared queries for DDL (Data Definition Language), as there is not much benefit in general, hence only DML queries (such as INSERT, DELETE etc.) and SELECT can be prepared.<br/>
<br/>
In order for database to cache a query statement, Golf will save query text that actually executes the very first time it runs. Then, regardless of what query text you supply in the following executions, it will not mutate anymore. It means from that moment onward, the query will always execute that very same query text, just with different input parameters. In practicallity it means that &lt;query&gt; should be a string constant if you are using a prepared query (which is usually the case).<br/>
<br/>
In some cases, you might not want to use prepared statements. Some reasons may be: <br/>
<ul><li>your statements are often changing and dynamically constructed to the point where managing a great many equivalent prepared statements may be impractical - for example there may be a part of your query text that comes from outside your code,<br/>
</li><li>your dynamic statements do not execute as many times, which makes prepared statements slower, since they require two trips to the database server to begin with,<br/>
</li><li>your query cannot be written as a prepared statement due to database restrictions,<br/>
</li><li>in some cases prepared statements are slower because the execution plan depends on the actual data used, in which case non-prepared statement may be a better choice,<br/>
</li><li>in some cases the database support for prepared statements may still have issues compared to non-prepared,<br/>
</li><li>typically prepared statements do not use database query cache, so repeating identical queries with identical input data may be faster without them.</li></ul>
Note that in Postgres, with prepared statements you may get an error like "could not determine data type of parameter $N". This is an issue with Postgres server. In this case you can use "::&lt;type&gt;" qualifier, such as for instance to tell Postgres the input parameter is text:<br/>
<div class='sqlcode' style='position:relative;padding-right:16px;'>
<pre id='code_669'>
<span class="Statement">select</span> col1 <span class="Special">from</span> test <span class="Special">where</span> someId&gt;=<span class="Special">'</span><span class="Constant">%s</span><span class="Special">'</span> <span class="Statement">and</span> col1 <span class="Statement">like</span> <span class="Identifier">concat</span>( <span class="Special">'</span><span class="Constant">%s</span><span class="Special">'</span>::text ,<span class="Special">'</span><span class="Constant">%</span><span class="Special">'</span>)</pre>
<span id=golf_copied_669 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_669' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_669, code_669, golf_copied_669)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Note that SQL statements in SQLite are always prepared regardless of whether you use "run-query" or "run-prepared-query" due to how SQLite native interface works.<br/>
<div class="vsub"><a id="Examples"></a>Examples</div>
Select first and last name (output is firstName and lastName) based on employee ID (specified by input parameter empid):<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_673'>
<span class="Statement"> get-param</span> empid
<span class="Statement"> run-query</span> @db = <span class="Constant">&quot;select firstName, lastName from employee where employeeId='</span><span class="Special">%s</span><span class="Constant">'&quot;</span><span class="Type"> output</span> firstName, lastName<span class="Identifier"> input</span> empid
<span class="Statement">     @</span>Employee is <span class="Statement">&lt;&lt;p-out</span>  firstName<span class="Statement">&gt;&gt;</span> <span class="Statement">&lt;&lt;p-out</span> lastName<span class="Statement">&gt;&gt;</span>
<span class="Statement"> end-query</span></pre>
<span id=golf_copied_673 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_673' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_673, code_673, golf_copied_673)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Prepared query without a loop and obtain error code and affected rows:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_674'>
<span class="Statement"> run-prepared-query</span> @db = qry<span class="Identifier"> no-loop</span> \
    <span class="Type"> error</span> ecode<span class="Type"> affected-rows</span> arows<span class="Identifier"> input</span> stock_name, stock_price, stock_price</pre>
<span id=golf_copied_674 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_674' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_674, code_674, golf_copied_674)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<!--BEFSAL13--><div class="vsub"><a id="See also"></a>See also</div>
 <a name='Database'></a><span style="font-weight:bold;">Database</span><br/>
<a href='/begin-transaction.html'>begin-transaction</a> &nbsp;<br/>
<a href='/commit-transaction.html'>commit-transaction</a> &nbsp;<br/>
<a href='/current-row.html'>current-row</a> &nbsp;<br/>
<a href='/database-config-file.html'>database-config-file</a> &nbsp;<br/>
<a href='/db-error.html'>db-error</a> &nbsp;<br/>
<a href='/mariadb-database.html'>mariadb-database</a> &nbsp;<br/>
<a href='/postgresql-database.html'>postgresql-database</a> &nbsp;<br/>
<a href='/rollback-transaction.html'>rollback-transaction</a> &nbsp;<br/>
<a href='/run-query.html'>run-query</a> &nbsp;<br/>
<a href='/sqlite-database.html'>sqlite-database</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='/documentation.html'>documentation</a><br/>
<a id='run-remote.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:right;background-color:white;'><a href='https://golf-lang.com' style='border-bottom:0px'><img src='https://golf-lang.com/golf.png'/></a></div><div class='vhub' style='margin-top:10px;'>&nbsp;Run remote</div><hr/><span style="font-weight:bold;">Purpose</span>: Call a remote service in a single statement.<br/>
<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_675'>
<span class="Statement"> run-remote</span> &lt;service&gt; \
     (<span class="Identifier"> local</span> &lt;app name&gt; ) | (<span class="Identifier"> location</span> &lt;location&gt; ) \
    <span class="Identifier"> url-path</span> &lt;service URL&gt; |
         ( \
        <span class="Identifier"> app-path</span> &lt;app path&gt; \
        <span class="Identifier"> request-path</span> &lt;request path&gt; \
         [<span class="Identifier"> url-params</span> &lt;url params&gt; ] \
         ) \
     [<span class="Identifier"> request-body content</span> &lt;content&gt; \
         [<span class="Identifier"> content-length</span> &lt;content length&gt; ] \
         [<span class="Identifier"> content-type</span> &lt;content type&gt; ] ] \
     [<span class="Identifier"> method</span> &lt;request method&gt; ] \
     [<span class="Identifier"> environment</span> &lt;name&gt;=&lt;value&gt; [<span class="Statement"> ,</span> ... ] ] \
     [<span class="Identifier"> timeout</span> &lt;timeout&gt; ]\
     [<span class="Type"> status</span> &lt;status&gt; ]  \
     [<span class="Type"> started</span> &lt;started&gt; ] \
     [<span class="Type"> finished-okay</span> &lt;finished okay&gt; ]\
     [<span class="Type"> data</span> &lt;data&gt; ] \
     [<span class="Type"> error</span> &lt;error&gt; ] \
     [<span class="Type"> status</span> &lt;status&gt; ] \
     [<span class="Identifier"> status-text</span> &lt;status text&gt; ] \
     [<span class="Type"> handler-status</span> &lt;service status&gt; ]</pre>
<span id=golf_copied_675 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_675' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_675, code_675, golf_copied_675)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<br/>
run-remote is a combination of <a href='/new-remote.html'>new-remote</a>, <a href='/call-remote.html'>call-remote</a> and <a href='/read-remote.html'>read-remote</a> in one. Clauses for each of those can be specified in any order. Only a single &lt;service&gt; can be used. If a call to &lt;service&gt; succeeds, its results are read. Use either:<br/>
<ul><li>&lt;status&gt; (in "status" clause) to check if there are results to be read: if it is GG_OKAY, then you can use the results.<br/>
</li><li>&lt;finished okay&gt; (in "finished-okay" clause) to check if service call executed: if it's 1, then it has.</li></ul>
See details for each clause in <a href='/new-remote.html'>new-remote</a> (for "local" through "timeout" clauses), <a href='/call-remote.html'>call-remote</a> (for "status" through "finished-okay" clauses) and <a href='/read-remote.html'>read-remote</a> (for "data" through "handler-status" clauses).<br/>
<div class="vsub"><a id="Examples"></a>Examples</div>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_676'>
<span class="Statement"> begin-handler</span> /serv<span class="Identifier"> public</span>
<span class="Statement">     run-remote</span> nf<span class="Identifier"> local</span> <span class="Constant">&quot;hash-server-yey&quot;</span> \
        <span class="Identifier"> url-path</span> <span class="Constant">&quot;/hash-server-yey/server/op=add/key=sb_XYZ/data=sdb_123&quot;</span> \
        <span class="Type"> finished-okay</span> sfok \
        <span class="Type"> data</span> rdata<span class="Type"> error</span> edata  \
        <span class="Type"> status</span> st<span class="Type"> handler-status</span> rstatus
<span class="Statement">     if-true</span> sfok <span class="Identifier"> not-equal</span>  <span class="Constant">1</span><span class="Identifier"> or</span> st <span class="Identifier"> not-equal</span>  GG_OKAY
<span class="Statement">         @</span>Call did not succeed
<span class="Statement">     else-if</span>
<span class="Statement">         @</span>Result is <span class="Statement">&lt;&lt;p-out</span> rdata&gt; and (any) error is <span class="Statement">&lt;&lt;p-out</span> edata<span class="Statement">&gt;&gt;</span>
<span class="Statement">     end-if</span>

<span class="Statement"> end-handler</span></pre>
<span id=golf_copied_676 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_676' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_676, code_676, golf_copied_676)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<!--BEFSAL13--><div class="vsub"><a id="See also"></a>See also</div>
 <a name='Distributed computing'></a><span style="font-weight:bold;">Distributed computing</span><br/>
<a href='/call-remote.html'>call-remote</a> &nbsp;<br/>
<a href='/new-remote.html'>new-remote</a> &nbsp;<br/>
<a href='/read-remote.html'>read-remote</a> &nbsp;<br/>
<a href='/run-remote.html'>run-remote</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='/documentation.html'>documentation</a><br/>
<a id='SELinux.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:right;background-color:white;'><a href='https://golf-lang.com' style='border-bottom:0px'><img src='https://golf-lang.com/golf.png'/></a></div><div class='vhub' style='margin-top:10px;'>&nbsp;SELinux</div><hr/>If you do not use SELinux, you can ignore this. <br/>
<br/>
SELinux is MAC (Mandatory Access Control) system, which means anything that isn't allowed is prohibited. This is as opposed to DAC, Discretionary Access Control, where everything is allowed except what's prohibited. MAC generally works on top of DAC, and they are expected to work in a complementary fashion. Golf deploys both methods for enhanced security.<br/>
<br/>
Golf comes with a SELinux policy out-of-the-box, which covers its general functioning. However, you can write any code with Golf, and if you are using SELinux, you may run afoul of its other policies, which may not be conducive to your code. In that case, use temporarily a permissive mode (via setenforce), and then audit2allow to get a clue on what is the issue and then take action to allow what's requested.<br/>
<br/>
Note that OpenSUSE package does not come with SELinux policy as of this release, because OpenSUSE at this time does not come with a default base policy and SELinux installation.<br/>
<br/>
<div class="vsub"><a id="General"></a>General</div>
Golf policy files (including .te, .fc files, while .if file is empty) can be found here:<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_677'>
<span class="Statement">ls</span> <span class="PreProc">$(</span><span class="Special">gg </span><span class="Special">-l</span><span class="PreProc">)</span>/selinux/*.<span class="Special">{</span>te,<span class="Statement">fc</span><span class="Special">}</span></pre>
<span id=golf_copied_677 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_677' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_677, code_677, golf_copied_677)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
As a part of installing Golf, the following SELinux types will be installed:<br/>
<ul><li>ggfile_t: all files within Golf directory (/var/lib/gg) are labeled with this type.<br/>
</li><li>gg_t: domain type (process type) of all Golf executables that communicate with other processes (be it Unix or TCP sockets). Only files labeled ggfile_t can run as this process type.<br/>
</li><li>ggport_t: port type that any Golf process is allowed to bind to, accept and listen. No other process types are allowed to do so.</ul>
Golf policy:<br/>
<ul><li>allows Golf processes unconfined access. This is expected as Golf is a general purpose framework. It means you do not have to do anything to connect to database, use files, connect to other servers etc.<br/>
</li><li>allows web servers (httpd_t domain type) to connect to sockets labeled with ggfile_t, but does not allow any other access. This allows communication between reverse-proxy web servers and Golf applications.<br/>
</li><li>allows web servers to connect to any Golf process that is listening on a TCP port (see <a href='/gg.html'>gg</a>), but does not allow any other access (i.e. to any other ports).</ul>
Golf policy allows normal functioning of Golf features only, but does not introduce any unnecessary privileges to the rest of the system.<br/>
<br/>
Note: Golf installation does not distribute .pp (compile) policy files, because it is not currently part of distro repos. Due to changes in SELinux and difference in versions installed across derived distros, Golf will compile source .te and .fc files during the installation, ensuring the best possibility of successful SELinux policy setup.<br/>
<div class="vsub"><a id="Unix domain sockets"></a>Unix domain sockets</div>
Using Unix domain sockets for Golf processes to communicate with a web server (see <a href='/gg.html'>gg</a>) is the default method and no further action is needed.<br/>
<div class="vsub"><a id="Unix TCP sockets"></a>Unix TCP sockets</div>
Using TCP sockets for Golf processes to communicate with a web server (see <a href='/gg.html'>gg</a>) requires you to label such ports as ggport_t, for example if you plan to use port 2109:<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_678'>
sudo semanage port <span class="Special">-a</span> <span class="Special">-t</span> ggport_t <span class="Special">-p</span> tcp  <span class="Constant">2109</span></pre>
<span id=golf_copied_678 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_678' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_678, code_678, golf_copied_678)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
When you no longer need a port, for example if you are switching to another port (for instance 2209), remove the old one and add the new one:<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_679'>
sudo semanage port <span class="Special">-d</span> <span class="Special">-t</span> ggport_t <span class="Special">-p</span> tcp  <span class="Constant">2109</span>
sudo semanage port <span class="Special">-a</span> <span class="Special">-t</span> ggport_t <span class="Special">-p</span> tcp  <span class="Constant">2209</span></pre>
<span id=golf_copied_679 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_679' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_679, code_679, golf_copied_679)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<div class="vsub"><a id="Changing or adding directories"></a>Changing or adding directories</div>
If you are adding directories to be used by Golf program, or changing a directory, for example using a different storage instead of /var/lib/gg (see <a href='/directories.html'>directories</a>), you need to label files in new directories:<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_680'>
sudo semanage fcontext <span class="Special">-a</span> <span class="Special">-t</span> ggfile_t <span class="Statement">&quot;</span><span class="Constant">/your/new/dir(/.*)?</span><span class="Statement">&quot;</span>
sudo restorecon <span class="Special">-R</span> /your/new/dir</pre>
<span id=golf_copied_680 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_680' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_680, code_680, golf_copied_680)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
To remove context from such directories (if you are not using them anymore), use:<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_681'>
sudo semanage fcontext <span class="Special">-d</span> <span class="Special">-t</span> ggfile_t <span class="Statement">&quot;</span><span class="Constant">/your/new/dir(/.*)?</span><span class="Statement">&quot;</span>
sudo restorecon <span class="Special">-R</span> /your/new/dir</pre>
<span id=golf_copied_681 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_681' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_681, code_681, golf_copied_681)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<!--BEFSAL13--><div class="vsub"><a id="See also"></a>See also</div>
 <a name='General'></a><span style="font-weight:bold;">General</span><br/>
<a href='/about-golf.html'>about-golf</a> &nbsp;<br/>
<a href='/directories.html'>directories</a> &nbsp;<br/>
<a href='/SELinux.html'>SELinux</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='/documentation.html'>documentation</a><br/>
<a id='SEMI.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:right;background-color:white;'><a href='https://golf-lang.com' style='border-bottom:0px'><img src='https://golf-lang.com/golf.png'/></a></div><div class='vhub' style='margin-top:10px;'>&nbsp;SEMI</div><hr/>SEMI (SimplE Message Interface) is a binary format used to write (pack) and read (unpack) messages consisting of key/value pairs in the form of:<br/>
<div class='ncode' style='position:relative;padding-right:16px;'>
<pre id='code_682'>
&lt;key&gt;=&lt;8 byte length of value&gt;&lt;value&gt;</pre>
<span id=golf_copied_682 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_682' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_682, code_682, golf_copied_682)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
&lt;key&gt; can be comprised of any characters other than equal sign("=") or an exclamation point ("!"), and any surrounding whitespaces are trimmed. &nbsp;<br/>
<br/>
Value is always preceded by a 8-byte length of value (as a binary number in big-endian 64bit format), followed by the value itself, followed by the new line ("\n") at the end which is not counted in length. A special &lt;key&gt; is "comment", which is always ignored, and serves the purpose of general commenting. <br/>
<br/>
SEMI implicitly supports binary data without the need for any kind of encoding, and the number of bytes is specified ahead of a value, making parsing efficient. <br/>
<!--BEFSAL13--><div class="vsub"><a id="See also"></a>See also</div>
 <a name='Messages'></a><span style="font-weight:bold;">Messages</span><br/>
<a href='/get-message.html'>get-message</a> &nbsp;<br/>
<a href='/new-message.html'>new-message</a> &nbsp;<br/>
<a href='/read-message.html'>read-message</a> &nbsp;<br/>
<a href='/SEMI.html'>SEMI</a> &nbsp;<br/>
<a href='/write-message.html'>write-message</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='/documentation.html'>documentation</a><br/>
<a id='send-file.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:right;background-color:white;'><a href='https://golf-lang.com' style='border-bottom:0px'><img src='https://golf-lang.com/golf.png'/></a></div><div class='vhub' style='margin-top:10px;'>&nbsp;Send file</div><hr/><span style="font-weight:bold;">Purpose</span>: Send file to client.<br/>
<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_683'>
<span class="Statement"> send-file</span> &lt;file&gt; [<span class="Identifier"> headers</span> \
     [<span class="Identifier"> content-type</span> &lt;content type&gt; ] \
     [<span class="Identifier"> download</span> [ &lt;download&gt; ] ] \
     [<span class="Identifier"> etag</span> [ &lt;etag&gt; ] ] \
     [<span class="Identifier"> file-name</span> &lt;file name&gt; ] \
     [ (<span class="Identifier"> cache-control</span> &lt;cache control&gt; ) |<span class="Identifier"> no-cache</span> ] \
     [<span class="Identifier"> status-id</span> &lt;status id&gt; ] \
     [<span class="Identifier"> status-text</span> &lt;status text&gt; ] \
     [<span class="Identifier"> custom</span> &lt;header name&gt;=&lt;header value&gt; [ , ... ] ]
     <span class="Error">]</span></pre>
<span id=golf_copied_683 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_683' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_683, code_683, golf_copied_683)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
When a client requests download of a file, you can use send-file to provide &lt;file&gt;, which is its location on the server, and is either a full path or relative to the application home directory (see <a href='/directories.html'>directories</a>). Note however that you can never use dot-dot (i.e. "..") in &lt;file&gt; - this is a security measure to avoid path-traversal attacks. Thus the file name should never have ".." in it, and if it does, the program will <a href='/error-handling.html'>error out</a>.<br/>
<div class="vsub"><a id="Headers"></a>Headers</div>
The following are subclauses that allow setting any custom header:<br/>
<ul><li>&lt;content type&gt; is content type (such as "text/html" or "image/jpg" etc.) If you are sending a file to a client for download and you don't know its content type, you can use "application/octet-stream" for a generic binary file.<br/>
</li><li>If "download" is used without boolean variable &lt;download&gt;, or if &lt;download&gt; evaluates to true, then the file is sent to a client for downloading - otherwise the default is to display file in client.<br/>
</li><li>&lt;file name&gt; is the name of the file being sent to a client. This is not the local file name - it is the file name that client will use for its own purposes.<br/>
</li><li>&lt;cache control&gt; is the cache control HTTP header. "no-cache" instructs the client not to cache. Only one of "cache-control" and "no-cache" can be used. An example of &lt;cache control&gt;:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_684'>
<span class="Statement"> send-file</span> <span class="Constant">&quot;somepic.jpg&quot;</span><span class="Identifier"> headers cache-control</span> <span class="Constant">&quot;max-age: 3600&quot;</span></pre>
<span id=golf_copied_684 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_684' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_684, code_684, golf_copied_684)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
</li><li>If "etag" is used without boolean variable &lt;etag&gt;, or if &lt;etag&gt; evaluates to true, then "ETAG" header will be generated (a timestamp) and included, otherwise it is not. The time stamp is of last modification date of the file (and typically used to cache a file on client if it hasn't changed on the server). "etag" is useful to let the client know to download the file only once if it hasn't changed, thus saving network and computing resources. ETAG header is used only for <a href='/send-file.html'>send-file</a>.<br/>
</li><li>&lt;status id&gt; and &lt;status text&gt; are status settings for the response, as strings (such as "425" for "status-id" and "Too early" for "status-text"). <br/>
</li><li>To set any type of generic HTTP header, use "custom" subclause, where &lt;header name&gt; and &lt;header value&gt; represent the name and value of a single header. Multiple headers are separated by a comma. There is no limit on the maximum number of such headers, other than of the underyling HTTP protocol. You must not use "custom" to set headers already set elsewhere (such as "etag" for instance), as that may cause unpredictable behavior. For instance this sets two custom headers:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_685'>
<span class="Statement"> out-header</span><span class="Identifier"> use custom</span> <span class="Constant">&quot;CustomOption3&quot;</span>=<span class="Constant">&quot;CustomValue3&quot;</span>, <span class="Constant">&quot;Status&quot;</span>=<span class="Constant">&quot;418 I'm a teapot&quot;</span></pre>
<span id=golf_copied_685 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_685' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_685, code_685, golf_copied_685)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
"custom" subclause lets you use any custom headers that exist today or may be added in the future, as well as any headers of your own design.</li></ul>
<div class="vsub"><a id="Cookies"></a>Cookies</div>
Any cookies set prior to send-file (see <a href='/set-cookie.html'>set-cookie</a> and <a href='/delete-cookie.html'>delete-cookie</a>) will be sent along with the file to the web client.<br/>
<div class="vsub"><a id="Examples"></a>Examples</div>
To send a document back to the browser and show it (i.e. display):<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_686'>
<span class="Statement"> send-file</span> <span class="Constant">&quot;/home/gliim/files/myfile.jpg&quot;</span><span class="Identifier"> headers content-type</span> <span class="Constant">&quot;image/jpg&quot;</span></pre>
<span id=golf_copied_686 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_686' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_686, code_686, golf_copied_686)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
An example to display a PDF document:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_687'>
<span class="Statement"> set-string</span> pdf_doc=<span class="Constant">&quot;/home/mydir/myfile.pdf&quot;</span>
<span class="Statement"> send-file</span> pdf_doc<span class="Identifier"> headers content-type</span> <span class="Constant">&quot;application/pdf&quot;</span></pre>
<span id=golf_copied_687 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_687' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_687, code_687, golf_copied_687)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
If you want to send a file for download (with the dialog), use "download" clause. This way the document is not displayed but the "Save As" (or similar) window shows up, for example to download a "PDF" document:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_688'>
<span class="Statement"> send-file</span> <span class="Constant">&quot;/home/user/file.pdf&quot;</span><span class="Identifier"> headers download content-type</span> <span class="Constant">&quot;application/pdf&quot;</span></pre>
<span id=golf_copied_688 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_688' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_688, code_688, golf_copied_688)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<!--BEFSAL13--><div class="vsub"><a id="See also"></a>See also</div>
 <a name='Web'></a><span style="font-weight:bold;">Web</span><br/>
<a href='/call-web.html'>call-web</a> &nbsp;<br/>
<a href='/out-header.html'>out-header</a> &nbsp;<br/>
<a href='/send-file.html'>send-file</a> &nbsp;<br/>
<a href='/silent-header.html'>silent-header</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='/documentation.html'>documentation</a><br/>
<a id='Server-API.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:right;background-color:white;'><a href='https://golf-lang.com' style='border-bottom:0px'><img src='https://golf-lang.com/golf.png'/></a></div><div class='vhub' style='margin-top:10px;'>&nbsp;Server API</div><hr/>Golf can be used in <a href='/extended-mode.html'>extended-mode</a>, where non-Golf code or libraries can be linked with your application.<br/>
<br/>
Such code can be from a library (see --llflag and --cflag options in <a href='/gg.html'>gg</a>), or can be written directly as C code, i.e. files with .c and .h extension together with your Golf application. To do this, use <a href='/call-extended.html'>call-extended</a> statement.<br/>
<br/>
Any function with C linkage can be used provided:<br/>
<ul><li>its parameters are (by value or reference) only of type: "int64_t" (number type in Golf), "bool" (bool type in Golf) or "char *" (string type in Golf).<br/>
</li><li>it must not return any value (i.e. it must have a "void" return type).</li></ul>
When allocating strings in extended code, you must use Golf memory management functions. These functions are based on standard C library (such as malloc or free), but are not compatible with them because Golf manages such memory on top of the standard C library.<br/>
<br/>
The functions you can use are:<br/>
<ul><li><span style="font-weight:bold;">char *gg_strdup (char *s)</span> which creates a copy of a null-terminated string "s". A pointer to memory data is returned.<br/>
<br/>
</li><li><span style="font-weight:bold;">char *gg_strdupl (char *s, gg_num from, gg_num l)</span> which creates a copy of memory data pointed to by "s", starting from byte "from" of length "l". Note that "from" is indexed from 0. A pointer to memory data is returned.<br/>
<br/>
</li><li><span style="font-weight:bold;">void *gg_malloc(size_t size)</span> which allocates memory of size "s" and returns a pointer to it.<br/>
<br/>
</li><li><span style="font-weight:bold;">void *gg_calloc(size_t nmemb, size_t size)</span> allocates "nmemb" blocks of memory (each of size "size") and returns a pointer to it. Memory is initialized to all zero bytes.<br/>
<br/>
</li><li><span style="font-weight:bold;">num gg_mem_get_id (void *ptr)</span> returns Golf memory handle for memory "ptr".<br/>
<br/>
</li><li><span style="font-weight:bold;">void *gg_realloc(gg_num r, size_t size)</span> reallocates memory identified with Golf memory handle "r" (see gg_mem_get_id()) to a new size of "size" and returns a pointer to it. Note that you can only reallocate the memory you created with gg_malloc() and gg_calloc() - do not attempt to reallocate Golf memory passed to your function. Golf in general never reallocates any existing memory in any statement.<br/>
<br/>
</li><li><span style="font-weight:bold;">void gg_mem_set_len (gg_num r, gg_num len)</span> sets the length of memory identified with Golf memory handle "r" to "len" bytes. Note that all Golf memory must have a null-byte at the end for consistency, regardless of whether such memory holds pure binary data or an actual null-delimited string. So for example, a string "abc" would have "len" set to 4 to include a null byte, and binary data "\xFF\x00\x01" (which consists of 3 bytes, the middle of which is a null byte) would have "len" also set to 4 and you would place an extra zero byte at the end of it even if it's not part of the actual useful data. Note that whatever memory length you set, it must be lesser or equal to the length of memory you have actually allocated.<br/>
<br/>
</li><li><span style="font-weight:bold;">num gg_mem_get_len (gg_num r)</span> returns the length of memory identified with Golf memory handle "r". The length returned is 1 bytes less than the memory set by gg_mem_set_len(), so for example for string "abc" the return value would be 3, as it would be for "\xFF\x00\x01".</li></ul>
<br/>
You can use gg_malloc(), gg_calloc() and gg_realloc() to create new Golf-compatible memory - and assuming you have set the last byte of any such memory to a null byte, the resulting memory will be properly sized for Golf usage. <br/>
<br/>
If you have memory that's already provided from elsewhere, you can use gg_strdup() or gg_strdupl() to create a copy of it that's compatible with Golf. <br/>
<br/>
If Golf memory you created with these functions has extra unused bytes, you can use either gg_realloc() to reduce its footprint, or you can use gg_mem_set_len() to set its length.<br/>
<br/>
Note that if you use C code included with a Golf project, you must include "gliim.h" file in each of them. You do not need to manually include any other ".h" files (header files), as they will be automatically picked up.<br/>
<div class="vsub"><a id="Examples"></a>Examples</div>
Place the following files in a separate directory for demonstration purposes.<br/>
<br/>
In this example, "example.golf" will use C functions from "example.c", and "example.h" will have declarations of those functions. File "example.c" implements a factorial function, as well as a function that will store the factorial result in an output message that's allocated and passed back to your Golf code:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_689'>
 <span class="PreProc">#include </span><span class="Constant">&quot;gliim.h&quot;</span>

 <span class="Type">void</span> get_factorial(gg_num f, gg_num *res)
<span class="Statement"> {</span>
     *res = <span class="Constant">1</span>;
     gg_num i;
     <span class="Statement">for</span> (i = <span class="Constant">2</span>; i &lt;= f; i++) {
         *res *= i;
<span class="Statement">     }</span>
<span class="Statement"> }</span>

 <span class="PreProc">#</span>define<span class="PreProc"> </span>MEMSIZE<span class="PreProc"> </span><span class="Constant">200</span>
 <span class="Type">void</span> fact_msg (gg_num i, <span class="Type">char</span> **res)
<span class="Statement"> {</span>
     <span class="Comment">// gliim rule: outgoing string must NOT free or realloc its incoming value</span>
     <span class="Comment">// all else is allowed</span>
     <span class="Type">char</span> *r = gg_malloc (MEMSIZE);
     gg_num f;
     get_factorial (i, &amp;f);
     gg_num bw = snprintf(r, MEMSIZE, <span class="Constant">&quot;Factorial value (message from C function) is </span><span class="Special">%ld</span><span class="Constant">&quot;</span>, f) + <span class="Constant">1</span>;
     <span class="Comment">// reduce memory footprint to match the memory used (including the null byte)</span>
     <span class="Comment">// you can also use gg_mem_set_len() with bw as length for higher performance </span>
     <span class="Comment">// (but also higher memory usage)</span>
     *res = gg_realloc (gg_mem_get_id(r), bw);
<span class="Statement"> }</span></pre>
<span id=golf_copied_689 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_689' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_689, code_689, golf_copied_689)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
File "example.h" declares the above functions:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_692'>
 <span class="Type">void</span> get_factorial(gg_num f, gg_num *res);
 <span class="Type">void</span> fact_msg (gg_num i, <span class="Type">char</span> **res);</pre>
<span id=golf_copied_692 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_692' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_692, code_692, golf_copied_692)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
File "example.golf" will call the above functions and display the results:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_694'>
<span class="Statement"> extended-mode</span>

<span class="Statement"> begin-handler</span> /example<span class="Identifier"> public</span>

<span class="Statement">     set-number</span> fact
<span class="Statement">     call-extended</span> get_factorial (<span class="Constant">10</span>, &amp;fact)
<span class="Statement">     @</span>Factorial is <span class="Statement">&lt;&lt;p-num</span> fact<span class="Statement">&gt;&gt;</span>

<span class="Statement">     set-string</span> res
<span class="Statement">     call-extended</span> fact_msg (<span class="Constant">10</span>, &amp;res)
<span class="Statement">     p-out</span> res
<span class="Statement">     @</span>
<span class="Statement"> end-handler</span></pre>
<span id=golf_copied_694 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_694' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_694, code_694, golf_copied_694)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Create application "example":<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_691'>
sudo mgrg <span class="Special">-i</span> <span class="Special">-u</span> <span class="PreProc">$(</span><span class="Special">whoami</span><span class="PreProc">)</span> example</pre>
<span id=golf_copied_691 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_691' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_691, code_691, golf_copied_691)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Make the application:<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_693'>
gg <span class="Special">-q</span></pre>
<span id=golf_copied_693 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_693' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_693, code_693, golf_copied_693)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Run it:<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_695'>
gg <span class="Special">-r</span> <span class="Special">--req</span><span class="Statement">=</span><span class="Statement">&quot;</span><span class="Constant">/example</span><span class="Statement">&quot;</span> <span class="Special">--exec</span> <span class="Special">--silent-header</span></pre>
<span id=golf_copied_695 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_695' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_695, code_695, golf_copied_695)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
The output is, as expected:<br/>
<div class='ncode' style='position:relative;padding-right:16px;'>
<pre id='code_690'>
Factorial is 3628800
Factorial value (message from C function) is 362880</pre>
<span id=golf_copied_690 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_690' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_690, code_690, golf_copied_690)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<!--BEFSAL13--><div class="vsub"><a id="See also"></a>See also</div>
 <a name='API'></a><span style="font-weight:bold;">API</span><br/>
<a href='/Client-API.html'>Client-API</a> &nbsp;<br/>
<a href='/Server-API.html'>Server-API</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='/documentation.html'>documentation</a><br/>
<a id='service.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:right;background-color:white;'><a href='https://golf-lang.com' style='border-bottom:0px'><img src='https://golf-lang.com/golf.png'/></a></div><div class='vhub' style='margin-top:10px;'>&nbsp;Service</div><hr/>You can run a Golf application as a service by using <a href='/mgrg.html'>mgrg</a> program manager. Your application can then use commonly used web servers or load balancers (such as Apache, Nginx or HAProxy) so it becomes available on the web.<br/>
<br/>
You can access your server application by means of:<br/>
<ul><li>A web server (which is probably the most common way). You need to setup a reverse proxy, i.e. a web server that will forward requests and send replies back to clients; see below.<br/>
</li><li>The command line, in which case you can use <a href='/gg.html'>gg</a> (see -r option). <br/>
</li><li><a href='/Client-API.html'>Client-API</a>, which allows any application in any programming language to access your server, as long as it has C linkage (by far most do). This method allows for MT (multithreaded) access to your application, where many client requests can be made in parallel.</ul>
Golf server runs as a number of (zero or more) background processes in parallel, processing requests simultaneously.<br/>
<div class="vsub"><a id="Setting up reverse proxy (web server)"></a>Setting up reverse proxy (web server)</div>
To access your application via a reverse proxy (i.e. web server), generally you need to add a proxy directive and restart the web server. <br/>
<br/>
If you use Apache, you need to connect it to your application, see <a href='/connect-apache-tcp-socket.html'>connect-apache-tcp-socket</a> (for using TCP sockets) and <a href='/connect-apache-unix-socket.html'>connect-apache-unix-socket</a> (for using Unix sockets). If you use Nginx, you need to connect it to your application, see <a href='/connect-nginx-tcp-socket.html'>connect-nginx-tcp-socket</a> (for using TCP sockets) and <a href='/connect-nginx-unix-socket.html'>connect-nginx-unix-socket</a> (for using Unix sockets). For HAProxy, see <a href='/connect-haproxy-tcp-socket.html'>connect-haproxy-tcp-socket</a>. Virtually all web servers/proxies support FastCGI protocol used by Golf; please see your server's documentation.<br/>
<div class="vsub"><a id="Starting Golf server processes"></a>Starting Golf server processes</div>
Use <a href='/mgrg.html'>mgrg</a>, for example:<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_696'>
mgrg <span class="Statement">&lt;</span>app name<span class="Statement">&gt;</span></pre>
<span id=golf_copied_696 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_696' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_696, code_696, golf_copied_696)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
which in general will (based on the request load) start zero or more background resident process(es) (daemons) that process requests in parallel, or for instance:<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_697'>
mgrg <span class="Special">-w</span> <span class="Constant">20</span> <span class="Statement">&lt;</span>app name<span class="Statement">&gt;</span></pre>
<span id=golf_copied_697 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_697' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_697, code_697, golf_copied_697)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
which will start 20 processes.<br/>
<div class="vsub"><a id="Connection timeout"></a>Connection timeout</div>
In a heavy-load environment, a client's connection may be rejected by the server. This may happen if the client runs very slowly due to swapping perhaps. Once a client establishes a connection, it has up to 5 seconds by default to send data; if it doesn't, the server will close the connection. Typically, clients send data right away, but due to a heavy load, this time may be longer. To set the connection timeout in milliseconds, set the following variable before starting the application server, for instance:<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_698'>
<span class="Statement">export</span> <span class="Statement">&quot;</span><span class="Constant">LIBFCGI_IS_AF_UNIX_KEEPER_POLL_TIMEOUT</span><span class="Statement">&quot;</span><span class="Statement">=</span><span class="Statement">&quot;</span><span class="Constant">8000</span><span class="Statement">&quot;</span>
mgrg <span class="Special">-w</span> <span class="Constant">1</span> <span class="Statement">&lt;</span>app name<span class="Statement">&gt;</span></pre>
<span id=golf_copied_698 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_698' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_698, code_698, golf_copied_698)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
In this case, the timeout is set to 8 seconds.<br/>
<!--BEFSAL13--><div class="vsub"><a id="See also"></a>See also</div>
 <a name='Running application'></a><span style="font-weight:bold;">Running application</span><br/>
<a href='/application-setup.html'>application-setup</a> &nbsp;<br/>
<a href='/CGI.html'>CGI</a> &nbsp;<br/>
<a href='/command-line.html'>command-line</a> &nbsp;<br/>
<a href='/service.html'>service</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='/documentation.html'>documentation</a><br/>
<a id='set-bool.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:right;background-color:white;'><a href='https://golf-lang.com' style='border-bottom:0px'><img src='https://golf-lang.com/golf.png'/></a></div><div class='vhub' style='margin-top:10px;'>&nbsp;Set bool</div><hr/><span style="font-weight:bold;">Purpose</span>: Set value of a boolean variable.<br/>
<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_699'>
<span class="Statement"> set-bool</span> &lt;var&gt; [ = &lt;boolean&gt; ] [<span class="Identifier"> process-scope</span> ]</pre>
<span id=golf_copied_699 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_699' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_699, code_699, golf_copied_699)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Boolean variable &lt;var&gt; is either assigned value &lt;boolean&gt; with "=" clause, or it is assigned "false" if equal clause ("=") is omitted.<br/>
<br/>
If "process-scope" clause is used, then boolean is of process scope, meaning its value will persist from one request to another for the life of the process. <br/>
<div class="vsub"><a id="Examples"></a>Examples</div>
Assign "true" value to boolean variable "my_bool":<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_700'>
<span class="Statement"> set-bool</span> my_bool = <span class="Constant">true</span></pre>
<span id=golf_copied_700 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_700' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_700, code_700, golf_copied_700)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<!--BEFSAL13--><div class="vsub"><a id="See also"></a>See also</div>
 <a name='Program flow'></a><span style="font-weight:bold;">Program flow</span><br/>
<a href='/break-loop.html'>break-loop</a> &nbsp;<br/>
<a href='/code-blocks.html'>code-blocks</a> &nbsp;<br/>
<a href='/continue-loop.html'>continue-loop</a> &nbsp;<br/>
<a href='/do-once.html'>do-once</a> &nbsp;<br/>
<a href='/exit-handler.html'>exit-handler</a> &nbsp;<br/>
<a href='/if-defined.html'>if-defined</a> &nbsp;<br/>
<a href='/if-true.html'>if-true</a> &nbsp;<br/>
<a href='/return-handler.html'>return-handler</a> &nbsp;<br/>
<a href='/set-bool.html'>set-bool</a> &nbsp;<br/>
<a href='/start-loop.html'>start-loop</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='/documentation.html'>documentation</a><br/>
<a id='set-cookie.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:right;background-color:white;'><a href='https://golf-lang.com' style='border-bottom:0px'><img src='https://golf-lang.com/golf.png'/></a></div><div class='vhub' style='margin-top:10px;'>&nbsp;Set cookie</div><hr/><span style="font-weight:bold;">Purpose</span>: Set cookie.<br/>
<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_701'>
<span class="Statement"> set-cookie</span> ( &lt;cookie name&gt;=&lt;cookie value&gt; \
     [<span class="Identifier"> expires</span> &lt;expiration&gt; ] \
     [<span class="Identifier"> path</span> &lt;path&gt; ] \
     [<span class="Identifier"> same-site</span> <span class="Constant">&quot;Lax&quot;</span>|<span class="Constant">&quot;Strict&quot;</span>|<span class="Constant">&quot;None&quot;</span> ] \
     [<span class="Identifier"> no-http-only</span> [ &lt;no-http-only&gt; ] ] \
     [<span class="Identifier"> secure</span> [ &lt;secure&gt; ] ] ) ,...</pre>
<span id=golf_copied_701 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_701' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_701, code_701, golf_copied_701)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
To set a cookie named by string &lt;cookie name&gt; to string value &lt;cookie value&gt;, use set-cookie statement. A cookie must be set prior to outputting any actual response (such as with <a href='/output-statement.html'>output-statement</a> or <a href='/p-out.html'>p-out</a> for example), or the program will <a href='/error-handling.html'>error out</a> and stop. <br/>
<br/>
Cookie's &lt;expiration&gt; date (as a a string, see <a href='/get-time.html'>get-time</a>) is given with "expires" clause. The default is session cookie meaning the cookie expires when client session closes.<br/>
<br/>
Cookie's &lt;path&gt; is specified with "path" clause. The default is the URL path of the <a href='/request.html'>request</a> URL.<br/>
<br/>
Whether a cookie applies to the same site is given with "same-site" clause along with possible values of "Lax", "Strict" or "None". <br/>
<br/>
By default a cookie is not accessible to client scripting (i.e. "HttpOnly") -you can change this with "no-http-only" clause. That will be the case if "no-http-only" clause is used without bool expression &lt;no-http-only&gt;, or if &lt;no-http-only&gt; evaluates to true.<br/>
<br/>
Use "secure" if a secure connection (https) is used, in order to specify this cookie is available only with a secure connection. That will be the case if "secure" is used without bool expression &lt;secure&gt;, or if &lt;secure&gt; evaluates to true.<br/>
<br/>
Cookies are commonly used for session maintenance, tracking and other purposes. Use <a href='/get-cookie.html'>get-cookie</a> and <a href='/delete-cookie.html'>delete-cookie</a> together with set-cookie to manage cookies.<br/>
<br/>
You can set multiple cookies separated by a comma:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_702'>
<span class="Statement"> get-time</span><span class="Type"> to</span> tm<span class="Identifier"> year</span> <span class="Constant">1</span>
<span class="Statement"> set-cookie</span> <span class="Constant">&quot;mycookie1&quot;</span>=<span class="Constant">&quot;4900&quot;</span><span class="Identifier"> expires</span> tm<span class="Identifier"> path</span> <span class="Constant">&quot;/&quot;</span>, <span class="Constant">&quot;mycookie2&quot;</span>=<span class="Constant">&quot;900&quot;</span><span class="Identifier"> expires</span> tm <span class="Identifier"> path</span> <span class="Constant">&quot;/my-app&quot;</span><span class="Identifier"> same-site</span> <span class="Constant">&quot;Strict&quot;</span></pre>
<span id=golf_copied_702 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_702' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_702, code_702, golf_copied_702)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<div class="vsub"><a id="Examples"></a>Examples</div>
To set a cookie named "my_cookie_name" to value "XYZ", that will go with the reply and expire in 1 year and 2 months from now, use:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_703'>
<span class="Statement"> get-time</span><span class="Type"> to</span> mytime<span class="Identifier"> year</span> <span class="Constant">1</span><span class="Identifier"> month</span> <span class="Constant">2</span>
<span class="Statement"> set-string</span> my_cookie_value=<span class="Constant">&quot;XYZ&quot;</span>
<span class="Statement"> set-cookie</span> <span class="Constant">&quot;my_cookie_name&quot;</span>=my_cookie_value<span class="Identifier"> expires</span> mytime<span class="Identifier"> path</span> <span class="Constant">&quot;/&quot;</span><span class="Identifier"> same-site</span> <span class="Constant">&quot;Lax&quot;</span></pre>
<span id=golf_copied_703 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_703' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_703, code_703, golf_copied_703)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
A cookie that can be used by JavaScript (meaning we use no-http-only clause):<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_704'>
<span class="Statement"> set-cookie</span> <span class="Constant">&quot;my_cookie_name&quot;</span>=my_cookie_value<span class="Identifier"> no-http-only</span></pre>
<span id=golf_copied_704 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_704' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_704, code_704, golf_copied_704)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<!--BEFSAL13--><div class="vsub"><a id="See also"></a>See also</div>
 <a name='Cookies'></a><span style="font-weight:bold;">Cookies</span><br/>
<a href='/delete-cookie.html'>delete-cookie</a> &nbsp;<br/>
<a href='/get-cookie.html'>get-cookie</a> &nbsp;<br/>
<a href='/set-cookie.html'>set-cookie</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='/documentation.html'>documentation</a><br/>
<a id='set-number.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:right;background-color:white;'><a href='https://golf-lang.com' style='border-bottom:0px'><img src='https://golf-lang.com/golf.png'/></a></div><div class='vhub' style='margin-top:10px;'>&nbsp;Set number</div><hr/><span style="font-weight:bold;">Purpose</span>: Set value of a number variable.<br/>
<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_705'>
<span class="Statement"> set-number</span> &lt;var&gt; [ = &lt;number&gt; ]  [<span class="Identifier"> process-scope</span> ]</pre>
<span id=golf_copied_705 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_705' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_705, code_705, golf_copied_705)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Number variable &lt;var&gt; is either assigned value &lt;number&gt; with "=" clause, or it is assigned 0 if equal clause ("=") is omitted.<br/>
<br/>
If "process-scope" clause is used, then number is of process scope, meaning its value will persist from one request to another for the life of the process. <br/>
<br/>
Note that &lt;number&gt; can also be a string character produced by using "[" and "]" to specify the index within a string (with 0 being the first character), as in:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_706'>
<span class="Statement"> set-string</span> my_str = <span class="Constant">&quot;Some string&quot;</span>
<span class="Statement"> set-number</span> my_num = my_str[<span class="Constant">2</span>]</pre>
<span id=golf_copied_706 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_706' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_706, code_706, golf_copied_706)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
In the above example, "my_num" will be 109, which is the integer representation of character 'm'.<br/>
<div class="vsub"><a id="Examples"></a>Examples</div>
Initialize number "my_num" to 0 and the value of this variable, however it changes, will persist through any number of requests in the same process:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_707'>
<span class="Statement"> set-number</span> my_num<span class="Identifier"> process-scope</span></pre>
<span id=golf_copied_707 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_707' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_707, code_707, golf_copied_707)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Initialize number "my_num" to 10:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_708'>
<span class="Statement"> set-number</span> my_num = <span class="Constant">10</span></pre>
<span id=golf_copied_708 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_708' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_708, code_708, golf_copied_708)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Subtract 5:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_709'>
<span class="Statement"> set-number</span> my_num = my_num-<span class="Constant">5</span></pre>
<span id=golf_copied_709 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_709' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_709, code_709, golf_copied_709)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Assign an expression:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_710'>
<span class="Statement"> set-number</span> my_num = (some_num*<span class="Constant">3</span>+<span class="Constant">1</span>)%<span class="Constant">5</span></pre>
<span id=golf_copied_710 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_710' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_710, code_710, golf_copied_710)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<!--BEFSAL13--><div class="vsub"><a id="See also"></a>See also</div>
 <a name='Numbers'></a><span style="font-weight:bold;">Numbers</span><br/>
<a href='/number-expressions.html'>number-expressions</a> &nbsp;<br/>
<a href='/number-string.html'>number-string</a> &nbsp;<br/>
<a href='/set-number.html'>set-number</a> &nbsp;<br/>
<a href='/string-number.html'>string-number</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='/documentation.html'>documentation</a><br/>
<a id='set-param.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:right;background-color:white;'><a href='https://golf-lang.com' style='border-bottom:0px'><img src='https://golf-lang.com/golf.png'/></a></div><div class='vhub' style='margin-top:10px;'>&nbsp;Set param</div><hr/><span style="font-weight:bold;">Purpose</span>: Set or create a parameter.<br/>
<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_711'>
<span class="Statement"> set-param</span> ( &lt;name&gt; [ = &lt;value&gt; ] )<span class="Identifier"> ,</span> ...</pre>
<span id=golf_copied_711 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_711' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_711, code_711, golf_copied_711)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
set-param sets or creates parameter &lt;name&gt; (see <a href='/get-param.html'>get-param</a>). <br/>
<br/>
If parameter &lt;name&gt; does not exist, it's created with &lt;value&gt;. If it does exist, its value is replaced with &lt;value&gt;. Note that &lt;value&gt; can be of any type. <br/>
<br/>
If equal sign ("=") and &lt;value&gt; are omitted, then &lt;value&gt; is the same as &lt;name&gt;, so:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_712'>
<span class="Statement"> set-param</span> something</pre>
<span id=golf_copied_712 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_712' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_712, code_712, golf_copied_712)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
is the same as:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_713'>
<span class="Statement"> set-param</span> something = something</pre>
<span id=golf_copied_713 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_713' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_713, code_713, golf_copied_713)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
where the first "something" is the parameter set/created, and the second "something" is an actual variable in your code. In this example, the two just happen to have the same name; this generally happens often, so this form is a shortcut for that.<br/>
<br/>
You can specify any number of parameters separated by a comma, for instance in this case par1 is a boolean, par2 is a number and par3 is a string:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_714'>
<span class="Statement"> set-number</span> par2 = <span class="Constant">10</span>
<span class="Statement"> set-param</span> par1=<span class="Constant">true</span>, par, par3=<span class="Constant">&quot;hi&quot;</span></pre>
<span id=golf_copied_714 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_714' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_714, code_714, golf_copied_714)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<div class="vsub"><a id="Examples"></a>Examples</div>
Set the value of parameter "quantity" to "10", which is also the output:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_715'>
<span class="Statement"> set-param</span> quantity = <span class="Constant">&quot;10&quot;</span>
<span class="Statement"> .</span>..
<span class="Statement"> get-param</span> quantity
<span class="Statement"> p-out</span> quantity</pre>
<span id=golf_copied_715 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_715' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_715, code_715, golf_copied_715)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<!--BEFSAL13--><div class="vsub"><a id="See also"></a>See also</div>
 <a name='Request data'></a><span style="font-weight:bold;">Request data</span><br/>
<a href='/get-param.html'>get-param</a> &nbsp;<br/>
<a href='/request-body.html'>request-body</a> &nbsp;<br/>
<a href='/set-param.html'>set-param</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='/documentation.html'>documentation</a><br/>
<a id='set-string.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:right;background-color:white;'><a href='https://golf-lang.com' style='border-bottom:0px'><img src='https://golf-lang.com/golf.png'/></a></div><div class='vhub' style='margin-top:10px;'>&nbsp;Set string</div><hr/><span style="font-weight:bold;">Purpose</span>: Set value of a string variable.<br/>
<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_716'>
<span class="Statement"> set-string</span> &lt;variable&gt; [ = &lt;string&gt; ] [<span class="Identifier"> process-scope</span> ] [<span class="Identifier"> unquoted</span> ]

<span class="Statement"> set-string</span> &lt;variable&gt; [ &lt;index&gt; ] = &lt;number&gt;</pre>
<span id=golf_copied_716 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_716' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_716, code_716, golf_copied_716)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
String variable &lt;variable&gt; will be assigned a value of &lt;string&gt; if clause "=" is present; otherwise &lt;variable&gt; is assigned an empty string.<br/>
<br/>
If "process-scope" clause is used, then &lt;variable&gt; will be of process scope, meaning its value will persist from one <a href='/request.html'>request</a> to another for the life of the process; this clause can only be used if &lt;variable&gt; did not already exist.<br/>
<br/>
If "unquoted" clause is used, then &lt;string&gt; literal is unquoted, and everything from equal clause ("=") to the rest of the line is a &lt;string&gt;; in this case there is no need to escape double quotes or backslashes. Note that in this case, "unquoted" and any other clause must appear prior to equal clause ("=") and after variable, because they wouldn't otherwise be recognized. For instance:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_717'>
<span class="Statement"> set-string</span> my_string<span class="Identifier"> unquoted</span> = this is <span class="Constant">&quot;some&quot;</span> string where there escape characters like \n do <span class="Constant">&quot;not work&quot;</span></pre>
<span id=golf_copied_717 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_717' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_717, code_717, golf_copied_717)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
This is the same as:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_718'>
<span class="Statement"> set-string</span> my_string = <span class="Constant">&quot;this is </span><span class="Special">\&quot;</span><span class="Constant">some</span><span class="Special">\&quot;</span><span class="Constant"> string where there escape characters like </span><span class="Special">\\</span><span class="Constant">n do </span><span class="Special">\&quot;</span><span class="Constant">not work</span><span class="Special">\&quot;</span><span class="Constant">&quot;</span></pre>
<span id=golf_copied_718 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_718' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_718, code_718, golf_copied_718)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
"unquoted" clause is useful when writing string literals that would otherwise need lots of escaping.<br/>
<br/>
You can also use set-string to set a byte in it; in this case &lt;index&gt; byte in &lt;variable&gt; string is set to &lt;number&gt;. &lt;index&gt; starts with 0 for the first byte. For instance, the resulting "str" will be "Aome string" since 65 is a number representation of 'A':<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_719'>
<span class="Statement"> set-string</span> str = <span class="Constant">&quot;some string&quot;</span>
<span class="Statement"> set-string</span> str[<span class="Constant">0</span>] = <span class="Constant">65</span>
 <span class="Comment">// or using a character constant as a number, to the same effect</span>
<span class="Statement"> set-string</span> str[<span class="Constant">0</span>] = 'A'</pre>
<span id=golf_copied_719 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_719' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_719, code_719, golf_copied_719)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<div class="vsub"><a id="Examples"></a>Examples</div>
Initialize "my_string" variable to "":<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_720'>
<span class="Statement"> set-string</span> my_string</pre>
<span id=golf_copied_720 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_720' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_720, code_720, golf_copied_720)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Initialize "my_string" variable to "abc":<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_721'>
<span class="Statement"> set-string</span> my_string = <span class="Constant">&quot;abc&quot;</span></pre>
<span id=golf_copied_721 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_721' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_721, code_721, golf_copied_721)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<!--BEFSAL13--><div class="vsub"><a id="See also"></a>See also</div>
 <a name='Strings'></a><span style="font-weight:bold;">Strings</span><br/>
<a href='/copy-string.html'>copy-string</a> &nbsp;<br/>
<a href='/count-substring.html'>count-substring</a> &nbsp;<br/>
<a href='/delete-string.html'>delete-string</a> &nbsp;<br/>
<a href='/lower-string.html'>lower-string</a> &nbsp;<br/>
<a href='/read-split.html'>read-split</a> &nbsp;<br/>
<a href='/replace-string.html'>replace-string</a> &nbsp;<br/>
<a href='/set-string.html'>set-string</a> &nbsp;<br/>
<a href='/split-string.html'>split-string</a> &nbsp;<br/>
<a href='/string-length.html'>string-length</a> &nbsp;<br/>
<a href='/trim-string.html'>trim-string</a> &nbsp;<br/>
<a href='/upper-string.html'>upper-string</a> &nbsp;<br/>
<a href='/write-string.html'>write-string</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='/documentation.html'>documentation</a><br/>
<a id='silent-header.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:right;background-color:white;'><a href='https://golf-lang.com' style='border-bottom:0px'><img src='https://golf-lang.com/golf.png'/></a></div><div class='vhub' style='margin-top:10px;'>&nbsp;Silent header</div><hr/><span style="font-weight:bold;">Purpose</span>: Do not output HTTP headers.<br/>
<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_722'>
<span class="Statement"> silent-header</span></pre>
<span id=golf_copied_722 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_722' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_722, code_722, golf_copied_722)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
silent-header will suppress the output of HTTP headers, such as with <a href='/out-header.html'>out-header</a>, or in any other case where headers are output. The effect applies to current <a href='/request.html'>request</a> only; if you use it conditionally, then you can have it on or off dynamically. <br/>
<br/>
If you want to suppress the headers for all <a href='/begin-handler.html'>service handlers</a> (as if silent-header were implied at the beginning of each), then for a <a href='/command-line.html'>command-line</a> program, use "--silent-header" option in "gg -r" when running it; to suppress the headers in <a href='/service.html'>service</a>s, use "-z" option in <a href='/mgrg.html'>mgrg</a>.<br/>
<br/>
silent-header must be used prior to outputting headers, meaning either prior to any output (if out-header is not used) or prior to first out-header.<br/>
<br/>
There are many uses for silent-header, among them:<br/>
<ul><li>A command-line program (such as a command line program) may use it to produce generic output, without any headers,<br/>
</li><li>the output from a program may be redirected to a web file (such as html), in case of dynamic content that rarely changes,<br/>
</li><li>a web program may output a completely different (non-HTTP) set of headers, etc.</li></ul>
<div class="vsub"><a id="Examples"></a>Examples</div>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_723'>
<span class="Statement"> silent-header</span>

 <span class="Comment">// No headers output </span></pre>
<span id=golf_copied_723 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_723' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_723, code_723, golf_copied_723)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<!--BEFSAL13--><div class="vsub"><a id="See also"></a>See also</div>
 <a name='Web'></a><span style="font-weight:bold;">Web</span><br/>
<a href='/call-web.html'>call-web</a> &nbsp;<br/>
<a href='/out-header.html'>out-header</a> &nbsp;<br/>
<a href='/send-file.html'>send-file</a> &nbsp;<br/>
<a href='/silent-header.html'>silent-header</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='/documentation.html'>documentation</a><br/>
<a id='split-string.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:right;background-color:white;'><a href='https://golf-lang.com' style='border-bottom:0px'><img src='https://golf-lang.com/golf.png'/></a></div><div class='vhub' style='margin-top:10px;'>&nbsp;Split string</div><hr/><span style="font-weight:bold;">Purpose</span>: Split a string into pieces based on a delimiter.<br/>
<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_724'>
<span class="Statement"> split-string</span>  &lt;string&gt;<span class="Identifier"> with</span> &lt;delimiter&gt;<span class="Type"> to</span> &lt;result&gt;

<span class="Statement"> split-string</span><span class="Identifier"> delete</span> &lt;result&gt;</pre>
<span id=golf_copied_724 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_724' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_724, code_724, golf_copied_724)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
split-string will find all instances of string &lt;delimiter&gt; in &lt;string&gt; and then split it into pieces delimited by string &lt;delimiter&gt;. The &lt;result&gt; can be used with <a href='/read-split.html'>read-split</a> to obtain the pieces and with split-string to delete it (use "delete" clause with &lt;result&gt; to delete it).<br/>
<br/>
All pieces produced will be trimmed both on left and right. If a piece is double quoted, then double quotes are removed. For instance save this code in "ps.golf" in a separate directory:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_727'>
<span class="Statement"> %%</span> /parse<span class="Identifier"> public</span>
<span class="Statement">     set-string</span> clist = <span class="Constant">&quot;a , b, </span><span class="Special">\&quot;</span><span class="Constant">c , d</span><span class="Special">\&quot;</span><span class="Constant"> , e&quot;</span>
<span class="Statement">     split-string</span> clist<span class="Identifier"> with</span> <span class="Constant">&quot;,&quot;</span><span class="Type"> to</span> res<span class="Type"> count</span> tot
<span class="Statement">     start-loop</span><span class="Identifier"> repeat</span> tot<span class="Type"> use</span> i
<span class="Statement">         read-split</span> i<span class="Identifier"> from</span> res<span class="Type"> to</span> item<span class="Type"> status</span> st
<span class="Statement">         if-true</span> st<span class="Identifier"> not-equal</span> GG_OKAY
<span class="Statement">             break-loop</span>
<span class="Statement">         end-if</span>
         <span class="Comment">// Output each item</span>
<span class="Statement">         pf-out</span> <span class="Constant">&quot; [</span><span class="Special">%s</span><span class="Constant">]&quot;</span>, item
<span class="Statement">     end-loop</span>
<span class="Statement"> %%</span></pre>
<span id=golf_copied_727 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_727' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_727, code_727, golf_copied_727)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Create the application, build and run it:<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_726'>
sudo mgrg <span class="Special">-i</span> <span class="Special">-u</span> <span class="PreProc">$(</span><span class="Special">whoami</span><span class="PreProc">)</span> ps
gg <span class="Special">-q</span>
gg <span class="Special">-r</span> <span class="Special">--req</span><span class="Statement">=</span><span class="Statement">&quot;</span><span class="Constant">/parse</span><span class="Statement">&quot;</span> <span class="Special">--exec</span> <span class="Special">--silent-header</span></pre>
<span id=golf_copied_726 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_726' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_726, code_726, golf_copied_726)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
The output would be:<br/>
<div class='ncode' style='position:relative;padding-right:16px;'>
<pre id='code_725'>
 [a] [b] [c , d] [e]</pre>
<span id=golf_copied_725 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_725' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_725, code_725, golf_copied_725)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
split-string is useful for parsing CSV (Comma Separated Values) or any other kind of separated values, where separator can be any string of any length, for example if you're parsing an encoded URL-string, then "&amp;amp;" may be a separator, as in the example below.<br/>
<div class="vsub"><a id="Examples"></a>Examples</div>
The following will parse a string containing name/value pairs (such as "name=value") separated by string "&amp;amp;":<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_729'>
<span class="Statement"> %%</span> /parse-url<span class="Identifier"> public</span>
     <span class="Comment">// Data to parse - data/value pairs delimited by </span><span class="Constant">&quot;&amp;amp;&quot;</span><span class="Comment"> string, and data and value delimited by equal sign:</span>
<span class="Statement">     set-string</span> url =<span class="Constant">&quot;x=23&amp;amp;y=good&amp;amp;z=hello_world&quot;</span>

     <span class="Comment">// Split string first into pieces based on </span><span class="Constant">&quot;amp;&quot;</span>
<span class="Statement">     split-string</span> url<span class="Identifier"> with</span> <span class="Constant">&quot;&amp;amp;&quot;</span><span class="Type"> to</span> url_var<span class="Type"> count</span> tot

     <span class="Comment">// For each of name=value pairs, split it with equal sign</span>
<span class="Statement">     start-loop</span><span class="Identifier"> repeat</span> tot<span class="Type"> use</span> i
         <span class="Comment">// Get a url pair (each separated with </span><span class="Constant">&quot;&amp;amp;&quot;</span><span class="Comment">)</span>
<span class="Statement">         read-split</span> i<span class="Identifier"> from</span> url_var<span class="Type"> to</span> item
         <span class="Comment">// Then split that with </span><span class="Constant">&quot;=&quot;</span><span class="Comment"> </span>
<span class="Statement">         split-string</span> item<span class="Identifier"> with</span> <span class="Constant">&quot;=&quot;</span><span class="Type"> to</span> item_var
         <span class="Comment">// Get name and value</span>
<span class="Statement">         read-split</span> <span class="Constant">1</span><span class="Identifier"> from</span> item_var<span class="Type"> to</span> name
<span class="Statement">         read-split</span> <span class="Constant">2</span><span class="Identifier"> from</span> item_var<span class="Type"> to</span> val
<span class="Statement">         pf-out</span> <span class="Constant">&quot;Variable </span><span class="Special">%s</span><span class="Constant"> has value </span><span class="Special">%s</span><span class="Special">\n</span><span class="Constant">&quot;</span>, name, val
<span class="Statement">     end-loop</span>
<span class="Statement"> %%</span></pre>
<span id=golf_copied_729 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_729' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_729, code_729, golf_copied_729)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
The result is:<br/>
<div class='ncode' style='position:relative;padding-right:16px;'>
<pre id='code_728'>
Variable x has value 23
Variable y has value good
Variable z has value hello_world</pre>
<span id=golf_copied_728 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_728' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_728, code_728, golf_copied_728)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<!--BEFSAL13--><div class="vsub"><a id="See also"></a>See also</div>
 <a name='Strings'></a><span style="font-weight:bold;">Strings</span><br/>
<a href='/copy-string.html'>copy-string</a> &nbsp;<br/>
<a href='/count-substring.html'>count-substring</a> &nbsp;<br/>
<a href='/delete-string.html'>delete-string</a> &nbsp;<br/>
<a href='/lower-string.html'>lower-string</a> &nbsp;<br/>
<a href='/read-split.html'>read-split</a> &nbsp;<br/>
<a href='/replace-string.html'>replace-string</a> &nbsp;<br/>
<a href='/set-string.html'>set-string</a> &nbsp;<br/>
<a href='/split-string.html'>split-string</a> &nbsp;<br/>
<a href='/string-length.html'>string-length</a> &nbsp;<br/>
<a href='/trim-string.html'>trim-string</a> &nbsp;<br/>
<a href='/upper-string.html'>upper-string</a> &nbsp;<br/>
<a href='/write-string.html'>write-string</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='/documentation.html'>documentation</a><br/>
<a id='sqlite-database.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:right;background-color:white;'><a href='https://golf-lang.com' style='border-bottom:0px'><img src='https://golf-lang.com/golf.png'/></a></div><div class='vhub' style='margin-top:10px;'>&nbsp;Sqlite database</div><hr/>SQLite database configuration file should contain a single line of text, and it must be the full path to the SQLite database file used, for example (if you keep it in Golf's application directory):<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_730'>
 /var/lib/gg/&lt;app name&gt;/app/&lt;db name&gt;.db</pre>
<span id=golf_copied_730 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_730' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_730, code_730, golf_copied_730)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<!--BEFSAL13--><div class="vsub"><a id="See also"></a>See also</div>
 <a name='Database'></a><span style="font-weight:bold;">Database</span><br/>
<a href='/begin-transaction.html'>begin-transaction</a> &nbsp;<br/>
<a href='/commit-transaction.html'>commit-transaction</a> &nbsp;<br/>
<a href='/current-row.html'>current-row</a> &nbsp;<br/>
<a href='/database-config-file.html'>database-config-file</a> &nbsp;<br/>
<a href='/db-error.html'>db-error</a> &nbsp;<br/>
<a href='/mariadb-database.html'>mariadb-database</a> &nbsp;<br/>
<a href='/postgresql-database.html'>postgresql-database</a> &nbsp;<br/>
<a href='/rollback-transaction.html'>rollback-transaction</a> &nbsp;<br/>
<a href='/run-query.html'>run-query</a> &nbsp;<br/>
<a href='/sqlite-database.html'>sqlite-database</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='/documentation.html'>documentation</a><br/>
<a id='start-loop.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:right;background-color:white;'><a href='https://golf-lang.com' style='border-bottom:0px'><img src='https://golf-lang.com/golf.png'/></a></div><div class='vhub' style='margin-top:10px;'>&nbsp;Start loop</div><hr/><span style="font-weight:bold;">Purpose</span>: Loop execution based on a condition.<br/>
<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_731'>
<span class="Statement"> start-loop</span>  [<span class="Identifier"> repeat</span> &lt;repeat&gt; ] \
     [<span class="Type"> use</span> &lt;loop counter&gt; \
         [<span class="Identifier"> start-with</span> &lt;start with&gt; ] [<span class="Identifier"> add</span> &lt;add&gt; ] ]

     &lt;any code&gt;

<span class="Statement"> end-loop</span></pre>
<span id=golf_copied_731 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_731' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_731, code_731, golf_copied_731)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
start-loop will execute code between start-loop and "end-loop" clauses certain number of times based on a condition specified and the usage of <a href='/continue-loop.html'>continue-loop</a> and <a href='/break-loop.html'>break-loop</a>, which can be used in-between the two.<br/>
<br/>
&lt;repeat&gt; number (in &lt;repeat&gt; clause) specifies how many times to execute the loop (barring use of <a href='/continue-loop.html'>continue-loop</a> and <a href='/break-loop.html'>break-loop</a>).<br/>
<br/>
&lt;loop counter&gt; (in "use" clause) is a number that by default starts with value of 1, and is incremented by 1 each time execution loops back to start-loop, unless "start-with" and/or "add" clauses are used. <br/>
<br/>
If &lt;start with&gt; (in "start-with" clause) is used, that's the initial value for &lt;loop counter&gt; (instead of the default 1), and if &lt;add&gt; is specified (in "add" clause), then &lt;loop counter&gt; is incremented by &lt;add&gt; each time execution loops back to start-loop (instead of the default 1).<br/>
<br/>
If either of "start-with" or "add" clauses is used, then "use" must be specified.<br/>
<div class="vsub"><a id="Examples"></a>Examples</div>
Print numbers 0 through 19:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_732'>
<span class="Statement"> start-loop</span><span class="Identifier"> repeat</span> <span class="Constant">20</span><span class="Type"> use</span> p<span class="Identifier"> start-with</span> <span class="Constant">0</span>
<span class="Statement">     p-num</span> p
<span class="Statement">     @</span>
<span class="Statement"> end-loop</span></pre>
<span id=golf_copied_732 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_732' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_732, code_732, golf_copied_732)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
A loop that is controlled via <a href='/continue-loop.html'>continue-loop</a> and <a href='/break-loop.html'>break-loop</a> statements, displaying numbers from 1 through 30 but omitting those divisible with 3:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_733'>
<span class="Statement"> set-number</span> n
<span class="Statement"> set-number</span> max = <span class="Constant">30</span>
<span class="Statement"> start-loop</span>
<span class="Statement">     set-number</span> n add <span class="Constant">1</span>
<span class="Statement">     if-true</span> n mod <span class="Constant">3</span>
<span class="Statement">         continue-loop</span>
<span class="Statement">     end-if</span>
<span class="Statement">     if-true</span> n<span class="Identifier"> greater-than</span> max
<span class="Statement">         break-loop</span>
<span class="Statement">     end-if</span>
<span class="Statement">     p-num</span> n
<span class="Statement"> end-loop</span></pre>
<span id=golf_copied_733 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_733' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_733, code_733, golf_copied_733)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<!--BEFSAL13--><div class="vsub"><a id="See also"></a>See also</div>
 <a name='Program flow'></a><span style="font-weight:bold;">Program flow</span><br/>
<a href='/break-loop.html'>break-loop</a> &nbsp;<br/>
<a href='/code-blocks.html'>code-blocks</a> &nbsp;<br/>
<a href='/continue-loop.html'>continue-loop</a> &nbsp;<br/>
<a href='/do-once.html'>do-once</a> &nbsp;<br/>
<a href='/exit-handler.html'>exit-handler</a> &nbsp;<br/>
<a href='/if-defined.html'>if-defined</a> &nbsp;<br/>
<a href='/if-true.html'>if-true</a> &nbsp;<br/>
<a href='/return-handler.html'>return-handler</a> &nbsp;<br/>
<a href='/set-bool.html'>set-bool</a> &nbsp;<br/>
<a href='/start-loop.html'>start-loop</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='/documentation.html'>documentation</a><br/>
<a id='statements.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:right;background-color:white;'><a href='https://golf-lang.com' style='border-bottom:0px'><img src='https://golf-lang.com/golf.png'/></a></div><div class='vhub' style='margin-top:10px;'>&nbsp;Statements</div><hr/><div class="vsub"><a id="Statements"></a>Statements</div>
Golf statements generally have three components separated by space(s):<br/>
<ul><li>a name,<br/>
</li><li>an object,<br/>
</li><li>clauses.</li></ul>
A statement starts with a name, which designates its main purpose. <br/>
<br/>
An object denotes what is referenced by a statement. <br/>
<br/>
Each clause that follows consist of a clause name followed either with no arguments, or with one or more arguments. A clause may have subclauses immediately afterwards, which follow the same structure. Most clauses are separated by space(s), however some (like "=" or "@") may not need space(s) before any data; the statement's documentation would clearly specify this.<br/>
<br/>
An object must immediately follow the statement's name, while clauses may be specified in any order.<br/>
<br/>
For example, in the following Golf code:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_734'>
<span class="Statement"> encrypt-data</span> orig_data<span class="Identifier"> input-length</span> <span class="Constant">6</span><span class="Identifier"> password</span> <span class="Constant">&quot;mypass&quot;</span><span class="Identifier"> salt</span> newsalt<span class="Type"> to</span> res<span class="Identifier"> binary</span></pre>
<span id=golf_copied_734 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_734' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_734, code_734, golf_copied_734)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
encrypt-data is the statement's name, and "orig_data" is its object. The clauses are:<br/>
<ul><li>input-length 6<br/>
</li><li>password "mypass"<br/>
</li><li>salt newsalt<br/>
</li><li>to res <br/>
</li><li>binary</li></ul>
The clauses can be in any order, so the above can be restated as:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_735'>
<span class="Statement"> encrypt-data</span> orig_data<span class="Type"> to</span> res<span class="Identifier"> password</span> <span class="Constant">&quot;mypass&quot;</span><span class="Identifier"> salt</span> newsalt<span class="Identifier"> binary input-length</span> <span class="Constant">6</span></pre>
<span id=golf_copied_735 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_735' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_735, code_735, golf_copied_735)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Golf documentation provides a concise BNF-like notation of how each statement works, which in case of <a href='/encrypt-data.html'>encrypt-data</a> is (backslash simply allows continuing to multiple lines, while two backslashes add a new line in between):<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_736'>
<span class="Statement"> encrypt-data</span> &lt;data&gt;<span class="Type"> to</span> &lt;result&gt; \
     [<span class="Identifier"> input-length</span> &lt;input length&gt; ] \
     [<span class="Identifier"> binary</span> [ &lt;binary&gt; ] ] \
     (<span class="Identifier"> password</span> &lt;password&gt; \
         [<span class="Identifier"> salt</span> &lt;salt&gt; [<span class="Identifier"> salt-length</span> &lt;salt length&gt; ] ] \
         [<span class="Identifier"> iterations</span> &lt;iterations&gt; ] \
         [<span class="Identifier"> cipher</span> &lt;cipher algorithm&gt; ] \
         [<span class="Identifier"> digest</span> &lt;digest algorithm&gt; ]
         [<span class="Identifier"> cache</span> ]
         [<span class="Identifier"> clear-cache</span> &lt;clear cache&gt; <span class="Error">)</span> \
     [<span class="Identifier"> init-vector</span> &lt;init vector&gt; ]</pre>
<span id=golf_copied_736 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_736' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_736, code_736, golf_copied_736)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Note the color scheme: clauses with input data are in blue, and with output data in green.<br/>
<br/>
Optional clauses are enclosed with angle brackets (i.e between "[" and "]").<br/>
<br/>
Arguments (in general variables and constants) are stated between "&lt;" and "&gt;". <br/>
<br/>
If only one of a number of clauses may appear, such clauses are separated by "|".<br/>
<br/>
A group of clauses that cannot be separated, or to remove ambiguity, are enclosed with "(" and ")". <br/>
<br/>
Keywords (other than statement names such as encrypt-data above) are generally specific to each statement. So, keyword "salt", for example, has meaning only within encrypt-data and a few other related statements. In order to have the freedom to choose your variable names, you can simply surround them in parenthesis (i.e. "(" and ")") and use any names you want, even keywords, for example:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_737'>
<span class="Statement"> set-string</span> password = <span class="Constant">&quot;some password&quot;</span>
<span class="Statement"> set-string</span> salt = <span class="Constant">&quot;0123456789012345&quot;</span>
<span class="Statement"> encrypt-data</span> <span class="Constant">&quot;some data&quot;</span><span class="Identifier"> password</span> (password)<span class="Identifier"> salt</span> (salt)<span class="Type"> to</span> enc_data
<span class="Statement"> p-out</span> enc_data</pre>
<span id=golf_copied_737 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_737' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_737, code_737, golf_copied_737)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
In this example, keywords "password" and "salt" are used as variable names as well.<br/>
<br/>
Note that while you can use tab characters at the beginning of the line (such as for indentation), as well as in string literals, do not use tabs in Golf statements otherwise as they are not supported for lack of readability - use plain spaces.<br/>
<div class="vsub"><a id="Splitting statement into multiple lines, space trimming"></a>Splitting statement into multiple lines, space trimming</div>
To split a statement into multiple lines (including string continuations), use a backslash (\), for instance:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_738'>
<span class="Statement"> encrypt-data</span> orig_data<span class="Identifier"> input-length</span> <span class="Constant">6</span> \
    <span class="Identifier"> password</span> <span class="Constant">&quot;my</span><span class="Special">\</span>
<span class="Constant">     pass&quot;</span><span class="Identifier"> salt</span> \
     newsalt<span class="Type"> to</span> res<span class="Identifier"> binary</span></pre>
<span id=golf_copied_738 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_738' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_738, code_738, golf_copied_738)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Note that all statements are always left-trimmed for whitespace. Thus the resulting string literal in the above example is "mypass", and not "my &nbsp; pass", as the whitespaces prior to line starting with "pass" are trimmed first. Also, all statements are right-trimmed for white space, except if backslash is used at the end, in which case any spaces prior to backslash are conserved. For that reason, in the above example there is a space prior to a backslash where clauses need to be separated.<br/>
<br/>
Note that <a href='/begin-handler.html'>begin-handler</a> statement cannot be split with backsplash, i.e. it must always be on a single line for readability.<br/>
<div class="vsub"><a id="Comments"></a>Comments</div>
You can use both C style (i.e. /* ... */) and C++ style (i.e. //) comments with Golf statements, including within statements (with the exception of /*..*/ before statement name for readability), for example:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_739'>
<span class="Statement"> run-query</span> @db = \
     <span class="Constant">&quot;select firstName, lastName from employee where yearOfHire&gt;='</span><span class="Special">%s</span><span class="Constant">'&quot;</span> \
    <span class="Type"> output</span> <span class="Comment">/*</span><span class="Comment"> comment within </span><span class="Comment">*/</span> firstName, lastName<span class="Identifier"> :</span> <span class="Constant">&quot;2015&quot;</span> <span class="Comment">// other comment</span></pre>
<span id=golf_copied_739 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_739' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_739, code_739, golf_copied_739)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<div class="vsub"><a id="Error handling"></a>Error handling</div>
A statement that fails for reasons that are generally irrecoverable will <a href='/error-handling.html'>error out</a>, for example out of memory or disk space, bad input parameters etc. <br/>
<br/>
Golf philosophy is to minimize the need to check for such conditions by preventing the program from continuing. This is preferable, as forgetting to check usually results in unforeseen bugs and safety issues, and the program should have stopped anyway. <br/>
<br/>
Errors that are correctable programmatically are reported and you can check them, for example when opening a file that may or may not exist.<br/>
<br/>
Overall, the goal is to stop execution when necessary and to offer the ability to handle an issue when warranted, in order to increase run-time safety and provide instant clues about conditions that must be corrected.<br/>
<!--BEFSAL13--><div class="vsub"><a id="See also"></a>See also</div>
 <a name='Language'></a><span style="font-weight:bold;">Language</span><br/>
<a href='/inline-code.html'>inline-code</a> &nbsp;<br/>
<a href='/statements.html'>statements</a> &nbsp;<br/>
<a href='/syntax-highlighting.html'>syntax-highlighting</a> &nbsp;<br/>
<a href='/unused-var.html'>unused-var</a> &nbsp;<br/>
<a href='/variable-scope.html'>variable-scope</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='/documentation.html'>documentation</a><br/>
<a id='stat-file.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:right;background-color:white;'><a href='https://golf-lang.com' style='border-bottom:0px'><img src='https://golf-lang.com/golf.png'/></a></div><div class='vhub' style='margin-top:10px;'>&nbsp;Stat file</div><hr/><span style="font-weight:bold;">Purpose</span>: Get information about a file.<br/>
<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_740'>
<span class="Statement"> stat-file</span> &lt;file&gt; \
    <span class="Identifier"> size</span> |<span class="Identifier"> type</span> |<span class="Identifier"> path</span> |<span class="Identifier"> name</span> \
    <span class="Type"> to</span> &lt;variable&gt;</pre>
<span id=golf_copied_740 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_740' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_740, code_740, golf_copied_740)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
stat-file obtains information about &lt;file&gt;, which is either the full path of a file or directory, or a name relative to the application home directory (see <a href='/directories.html'>directories</a>). <br/>
<br/>
Clause "size" will store file's size in bytes to number &lt;variable&gt;, or it will be GG_ERR_FAILED (if operation failed, likely because file does not exist or you have no permissions to access it). <br/>
<br/>
Clause "type" will store file's type to number &lt;variable&gt;, and it can be either GG_FILE (if it's a file) or GG_DIR (if it's a directory) or GG_ERR_FAILED (if operation failed, likely because file does not exist or you have no permissions to access it). <br/>
<br/>
Clause "path" (in string &lt;variable&gt;) obtains the fully resolved path of the &lt;file&gt; (including symbolic links), and "name" is the name (a basename, without the path). If path cannot be resolved, then &lt;variable&gt; is an empty string.<br/>
<div class="vsub"><a id="Examples"></a>Examples</div>
To get file size in variable "sz", which is created here:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_741'>
<span class="Statement"> stat-file</span> <span class="Constant">&quot;/home/user/file&quot;</span><span class="Identifier"> size</span><span class="Type"> to</span> sz</pre>
<span id=golf_copied_741 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_741' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_741, code_741, golf_copied_741)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
To determine if the object is a file or a directory:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_742'>
<span class="Statement"> stat-file</span> <span class="Constant">&quot;/home/user/some_name&quot;</span><span class="Identifier"> type</span><span class="Type"> to</span> what
<span class="Statement"> if-true</span> what<span class="Identifier"> equal</span> GG_FILE
<span class="Statement">    @</span>It's a file!
<span class="Statement"> else-if</span> what<span class="Identifier"> equal</span> GG_DIR
<span class="Statement">    @</span>It's a directory!
<span class="Statement"> else-if</span>
<span class="Statement">    @</span>Doesn't exist!
<span class="Statement"> end-if</span></pre>
<span id=golf_copied_742 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_742' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_742, code_742, golf_copied_742)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Get the fully resolved path of a file to string variable "fp", which is created here.<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_743'>
<span class="Statement"> stat-file</span> <span class="Constant">&quot;../file&quot;</span><span class="Identifier"> path</span><span class="Type"> to</span> fp</pre>
<span id=golf_copied_743 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_743' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_743, code_743, golf_copied_743)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<!--BEFSAL13--><div class="vsub"><a id="See also"></a>See also</div>
 <a name='Files'></a><span style="font-weight:bold;">Files</span><br/>
<a href='/close-file.html'>close-file</a> &nbsp;<br/>
<a href='/copy-file.html'>copy-file</a> &nbsp;<br/>
<a href='/delete-file.html'>delete-file</a> &nbsp;<br/>
<a href='/file-position.html'>file-position</a> &nbsp;<br/>
<a href='/file-storage.html'>file-storage</a> &nbsp;<br/>
<a href='/file-uploading.html'>file-uploading</a> &nbsp;<br/>
<a href='/lock-file.html'>lock-file</a> &nbsp;<br/>
<a href='/open-file.html'>open-file</a> &nbsp;<br/>
<a href='/read-file.html'>read-file</a> &nbsp;<br/>
<a href='/read-line.html'>read-line</a> &nbsp;<br/>
<a href='/rename-file.html'>rename-file</a> &nbsp;<br/>
<a href='/stat-file.html'>stat-file</a> &nbsp;<br/>
<a href='/temporary-file.html'>temporary-file</a> &nbsp;<br/>
<a href='/uniq-file.html'>uniq-file</a> &nbsp;<br/>
<a href='/unlock-file.html'>unlock-file</a> &nbsp;<br/>
<a href='/write-file.html'>write-file</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='/documentation.html'>documentation</a><br/>
<a id='string-length.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:right;background-color:white;'><a href='https://golf-lang.com' style='border-bottom:0px'><img src='https://golf-lang.com/golf.png'/></a></div><div class='vhub' style='margin-top:10px;'>&nbsp;String length</div><hr/><span style="font-weight:bold;">Purpose</span>: Get string length.<br/>
<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_744'>
<span class="Statement"> string-length</span> &lt;string&gt;<span class="Type"> to</span> &lt;length&gt;</pre>
<span id=golf_copied_744 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_744' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_744, code_744, golf_copied_744)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
string-length will place the number of bytes in &lt;string&gt; into number &lt;length&gt;.<br/>
<br/>
Note that &lt;string&gt; does not need to be null-terminated, meaning it can be a binary or text string. &lt;length&gt; is the number of bytes comprising any such string.<br/>
<div class="vsub"><a id="Examples"></a>Examples</div>
Variable "len" will be 6:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_745'>
<span class="Statement"> set-string</span> str = <span class="Constant">&quot;string&quot;</span>
<span class="Statement"> string-length</span> str<span class="Type"> to</span> len</pre>
<span id=golf_copied_745 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_745' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_745, code_745, golf_copied_745)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Variable "len2" will be 18 - the string has a null character in the middle of it:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_746'>
<span class="Statement"> set-string</span> str2 = <span class="Constant">&quot;string&quot;</span> <span class="Constant">&quot;</span><span class="Special">\x00</span><span class="Constant"> after null&quot;</span>
<span class="Statement"> string-length</span> str2<span class="Type"> to</span> len2</pre>
<span id=golf_copied_746 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_746' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_746, code_746, golf_copied_746)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<!--BEFSAL13--><div class="vsub"><a id="See also"></a>See also</div>
 <a name='Strings'></a><span style="font-weight:bold;">Strings</span><br/>
<a href='/copy-string.html'>copy-string</a> &nbsp;<br/>
<a href='/count-substring.html'>count-substring</a> &nbsp;<br/>
<a href='/delete-string.html'>delete-string</a> &nbsp;<br/>
<a href='/lower-string.html'>lower-string</a> &nbsp;<br/>
<a href='/read-split.html'>read-split</a> &nbsp;<br/>
<a href='/replace-string.html'>replace-string</a> &nbsp;<br/>
<a href='/set-string.html'>set-string</a> &nbsp;<br/>
<a href='/split-string.html'>split-string</a> &nbsp;<br/>
<a href='/string-length.html'>string-length</a> &nbsp;<br/>
<a href='/trim-string.html'>trim-string</a> &nbsp;<br/>
<a href='/upper-string.html'>upper-string</a> &nbsp;<br/>
<a href='/write-string.html'>write-string</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='/documentation.html'>documentation</a><br/>
<a id='string-number.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:right;background-color:white;'><a href='https://golf-lang.com' style='border-bottom:0px'><img src='https://golf-lang.com/golf.png'/></a></div><div class='vhub' style='margin-top:10px;'>&nbsp;String number</div><hr/><span style="font-weight:bold;">Purpose</span>: Convert string to number.<br/>
<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_747'>
<span class="Statement"> string-number</span> &lt;string&gt; [<span class="Type"> to</span> &lt;number&gt; ] \
     [<span class="Identifier"> base</span> &lt;base&gt; ] \
     [<span class="Type"> status</span> &lt;status&gt; ]</pre>
<span id=golf_copied_747 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_747' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_747, code_747, golf_copied_747)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
&lt;string&gt; is converted to &lt;number&gt; in "to" clause, using &lt;base&gt; in "base" clause, where &lt;base&gt; is by default either 10, or 16 (if number is prefixed with "0x" or "0X", excluding any leading minus or plus sign) or 8 (if number is prefixed with "0", excluding any leading minus or plus sign). <br/>
<br/>
&lt;base&gt; can be between 2 and 36, inclusive. &lt;number&gt; can be positive or negative (i.e. signed) and can be up to 64-bit in length. If &lt;base&gt; is 0, it is the same as if it is not specified, i.e. default behavior applies.<br/>
<br/>
&lt;status&gt; number (in "status" clause) is GG_OKAY if conversion was successful. If it wasn't successful, &lt;number&gt; is 0 and &lt;status&gt; is GG_ERR_OVERFLOW if &lt;string&gt; represents a number that requires over 64 bits of storage, GG_ERR_INVALID if &lt;base&gt; is incorrect, GG_ERR_EXIST if &lt;string&gt; is empty or no digits specified. <br/>
<br/>
If there are trailing invalid characters (for instance "182xy" for base 10), &lt;number&gt; is the result of conversion up to the first invalid character and &lt;status&gt; is GG_ERR_TOO_MANY. In this example, &lt;number&gt; would be 182.<br/>
<div class="vsub"><a id="Examples"></a>Examples</div>
In this example, number "n" would be 49 and status "st" would be GG_OKAY:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_748'>
<span class="Statement"> string-number</span> <span class="Constant">&quot;49&quot;</span><span class="Type"> to</span> n<span class="Identifier"> base</span> <span class="Constant">10</span><span class="Type"> status</span> st</pre>
<span id=golf_copied_748 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_748' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_748, code_748, golf_copied_748)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<!--BEFSAL13--><div class="vsub"><a id="See also"></a>See also</div>
 <a name='Numbers'></a><span style="font-weight:bold;">Numbers</span><br/>
<a href='/number-expressions.html'>number-expressions</a> &nbsp;<br/>
<a href='/number-string.html'>number-string</a> &nbsp;<br/>
<a href='/set-number.html'>set-number</a> &nbsp;<br/>
<a href='/string-number.html'>string-number</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='/documentation.html'>documentation</a><br/>
<a id='syntax-highlighting.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:right;background-color:white;'><a href='https://golf-lang.com' style='border-bottom:0px'><img src='https://golf-lang.com/golf.png'/></a></div><div class='vhub' style='margin-top:10px;'>&nbsp;Syntax highlighting</div><hr/>For syntax highlighting of Golf programs in Vim, do this once:<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_750'>
gg <span class="Special">-m</span></pre>
<span id=golf_copied_750 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_750' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_750, code_750, golf_copied_750)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
The above will create a syntax file in your local Vim syntax directory:<br/>
<div class='ncode' style='position:relative;padding-right:16px;'>
<pre id='code_749'>
$HOME/.vim/syntax/gliim.vim</pre>
<span id=golf_copied_749 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_749' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_749, code_749, golf_copied_749)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
and also update your local $HOME/.vimrc file to use this syntax for files with .golf extension. All files updated are local, i.e. they affect only the current user. Each user who wants this feature must issue the above command.<br/>
<br/>
You can then change the color scheme to anything you like by using ":colorscheme" directly in editor, or by specifying "colorscheme" in your ".vimrc" file for a persistent change.<br/>
<br/>
The Golf highlighting syntax is tested with Vim 8.1.<br/>
<!--BEFSAL13--><div class="vsub"><a id="See also"></a>See also</div>
 <a name='Language'></a><span style="font-weight:bold;">Language</span><br/>
<a href='/inline-code.html'>inline-code</a> &nbsp;<br/>
<a href='/statements.html'>statements</a> &nbsp;<br/>
<a href='/syntax-highlighting.html'>syntax-highlighting</a> &nbsp;<br/>
<a href='/unused-var.html'>unused-var</a> &nbsp;<br/>
<a href='/variable-scope.html'>variable-scope</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='/documentation.html'>documentation</a><br/>
<a id='temporary-file.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:right;background-color:white;'><a href='https://golf-lang.com' style='border-bottom:0px'><img src='https://golf-lang.com/golf.png'/></a></div><div class='vhub' style='margin-top:10px;'>&nbsp;Temporary file</div><hr/>To create a temporary file, use <a href='/uniq-file.html'>uniq-file</a> with a "temporary" clause. Temporary files are the same as any other files in the <a href='/file-storage.html'>file-storage</a> (and are organized in the same fashion), except that they are all under the subdirectory named "t":<br/>
<div class='ncode' style='position:relative;padding-right:16px;'>
<pre id='code_751'>
/var/lib/gg/&lt;app_name&gt;/app/file/t</pre>
<span id=golf_copied_751 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_751' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_751, code_751, golf_copied_751)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
A temporary file is not automatically deleted - you can remove it with <a href='/delete-file.html'>delete-file</a> statement when not needed (or use a periodic shell script to remove old temporary files). The reason for this is that the nature of temporary files varies, and they may not necessarily span a given time frame (such as a lifetime of a <a href='/request.html'>request</a>, or a lifetime of a process that serves any number of such requests), and they may be used across number of requests for a specific purpose. Thus, it is your responsibility to remove a temporary file when it's appropriate for your application to do so.<br/>
<br/>
The reason for storing temporary files in a separate directory is to gain a separation of temporary files (which likely at some point can be freely deleted) from other files.<br/>
<br/>
See <a href='/uniq-file.html'>uniq-file</a> for an example of creating a temporary file.<br/>
<!--BEFSAL13--><div class="vsub"><a id="See also"></a>See also</div>
 <a name='Files'></a><span style="font-weight:bold;">Files</span><br/>
<a href='/close-file.html'>close-file</a> &nbsp;<br/>
<a href='/copy-file.html'>copy-file</a> &nbsp;<br/>
<a href='/delete-file.html'>delete-file</a> &nbsp;<br/>
<a href='/file-position.html'>file-position</a> &nbsp;<br/>
<a href='/file-storage.html'>file-storage</a> &nbsp;<br/>
<a href='/file-uploading.html'>file-uploading</a> &nbsp;<br/>
<a href='/lock-file.html'>lock-file</a> &nbsp;<br/>
<a href='/open-file.html'>open-file</a> &nbsp;<br/>
<a href='/read-file.html'>read-file</a> &nbsp;<br/>
<a href='/read-line.html'>read-line</a> &nbsp;<br/>
<a href='/rename-file.html'>rename-file</a> &nbsp;<br/>
<a href='/stat-file.html'>stat-file</a> &nbsp;<br/>
<a href='/temporary-file.html'>temporary-file</a> &nbsp;<br/>
<a href='/uniq-file.html'>uniq-file</a> &nbsp;<br/>
<a href='/unlock-file.html'>unlock-file</a> &nbsp;<br/>
<a href='/write-file.html'>write-file</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='/documentation.html'>documentation</a><br/>
<a id='text-utf8.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:right;background-color:white;'><a href='https://golf-lang.com' style='border-bottom:0px'><img src='https://golf-lang.com/golf.png'/></a></div><div class='vhub' style='margin-top:10px;'>&nbsp;Text utf8</div><hr/><span style="font-weight:bold;">Purpose</span>: Convert text to UTF8 string.<br/>
<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_752'>
<span class="Statement"> text-utf8</span> &lt;text&gt; \
     [<span class="Type"> status</span> &lt;status&gt; ] \
     [<span class="Type"> error-text</span> &lt;error text&gt; ]</pre>
<span id=golf_copied_752 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_752' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_752, code_752, golf_copied_752)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
text-utf8 will convert string value &lt;text&gt; to UTF8. &lt;text&gt; itself will hold the resulting UTF8 string. If you don't wish &lt;text&gt; to be modified, make a copy of it first (see <a href='/copy-string.html'>copy-string</a>). See <a href='/utf8-text.html'>utf8-text</a> for the reverse conversion and data standards information.<br/>
<br/>
You can obtain &lt;status&gt; in "status" clause. &lt;status&gt; number is GG_OKAY if successful, or GG_ERR_UTF8 if there was an error, in which case &lt;error text&gt; string in "error-text" clause will contain the error message.<br/>
<div class="vsub"><a id="Examples"></a>Examples</div>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_753'>
 <span class="Comment">// Unicode value to encode to UTF8</span>
<span class="Statement"> set-string</span> txt = <span class="Constant">&quot;</span><span class="Special">\u0459\\\&quot;</span><span class="Constant">Doc</span><span class="Special">\\\&quot;\\</span><span class="Constant">n</span><span class="Special">\\</span><span class="Constant">t</span><span class="Special">\\</span><span class="Constant">b</span><span class="Special">\\</span><span class="Constant">f</span><span class="Special">\\</span><span class="Constant">r</span><span class="Special">\\</span><span class="Constant">t</span><span class="Special">\\</span><span class="Constant">u21d7</span><span class="Special">\\</span><span class="Constant">u21d8</span><span class="Special">\\</span><span class="Constant">t</span><span class="Special">\\</span><span class="Constant">u25b7</span><span class="Special">\\</span><span class="Constant">u25ee</span><span class="Special">\\</span><span class="Constant">uD834</span><span class="Special">\\</span><span class="Constant">uDD1E</span><span class="Special">\\</span><span class="Constant">u13eb</span><span class="Special">\\</span><span class="Constant">u2ca0</span><span class="Special">\\</span><span class="Constant">u0448</span><span class="Special">\\</span><span class="Constant">n</span><span class="Special">\\</span><span class="Constant">/</span><span class="Special">\\\&quot;</span><span class="Constant">()</span><span class="Special">\\</span><span class="Constant">t&quot;</span>

 <span class="Comment">// Convert to UTF8 </span>
<span class="Statement"> text-utf8</span> txt<span class="Type"> status</span> txt_status<span class="Type"> error-text</span> txt_error

 <span class="Comment">// Expected UTF8 result</span>
<span class="Statement"> set-string</span> utf8 = <span class="Constant">&quot;</span><span class="Special">\&quot;</span><span class="Constant">Doc</span><span class="Special">\&quot;\n\t\b\f\r\t</span><span class="Constant"></span><span class="Special">\t</span><span class="Constant"></span><span class="Special">\n</span><span class="Constant">/</span><span class="Special">\&quot;</span><span class="Constant">()</span><span class="Special">\t</span><span class="Constant">&quot;</span>

 <span class="Comment">// Make sure conversion was successful</span>
<span class="Statement"> if-true</span> utf8<span class="Identifier"> not-equal</span> txt<span class="Identifier"> or</span> txt_status<span class="Identifier"> not-equal</span> GG_OKAY<span class="Identifier"> or</span> txt_error<span class="Identifier"> not-equal</span> <span class="Constant">&quot;&quot;</span>
<span class="Statement">     @</span>Error in converting string to UTF8
<span class="Statement"> end-if</span></pre>
<span id=golf_copied_753 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_753' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_753, code_753, golf_copied_753)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<!--BEFSAL13--><div class="vsub"><a id="See also"></a>See also</div>
 <a name='UTF8'></a><span style="font-weight:bold;">UTF8</span><br/>
<a href='/text-utf8.html'>text-utf8</a> &nbsp;<br/>
<a href='/utf8-text.html'>utf8-text</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='/documentation.html'>documentation</a><br/>
<a id='trace-run.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:right;background-color:white;'><a href='https://golf-lang.com' style='border-bottom:0px'><img src='https://golf-lang.com/golf.png'/></a></div><div class='vhub' style='margin-top:10px;'>&nbsp;Trace run</div><hr/><span style="font-weight:bold;">Purpose</span>: Emit trace.<br/>
<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_754'>
<span class="Statement"> trace-run</span> [ &lt;format&gt;, &lt;variable&gt; [<span class="Identifier"> ,</span> ... ] ]</pre>
<span id=golf_copied_754 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_754' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_754, code_754, golf_copied_754)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
trace-run formats a tracing message according to the &lt;format&gt; string and a list of &lt;variable&gt;s and then writes the result into current process' trace file.<br/>
<br/>
trace-run can be used without any clauses, in which case a location (file name and line number) is recorded in the trace file - this is useful when you only want to know if the execution passed through your code.<br/>
<br/>
If trace-run has any other clauses, then &lt;format&gt; string must be present and there must be at least one &lt;variable&gt; (it means if you want to trace a simple string literal you still have to use "%s" as format).<br/>
<br/>
For tracing to have effect, debugging and tracing must be enabled (see "--debug" and "--trace" options in <a href='/gg.html'>gg</a>). For location of trace files, see <a href='/directories.html'>directories</a>.<br/>
<div class="vsub"><a id="Format"></a>Format</div>
&lt;format&gt; string must be a literal. Variables must follow &lt;format&gt; separated by commas in the same order as placeholders. If you use any placeholders other than specified below, or the type of variables you use do not match the type of a correspoding placeholder in &lt;format&gt;, your program will <a href='/error-handling.html'>error out</a>. You can use the following placeholders in &lt;format&gt; (see <a href='/trace-run.html'>trace-run</a> for an example of usage):<br/>
<ul><li>%s for a string<br/>
</li><li>%&lt;number&gt;s for a string output with a width of at least &lt;number&gt; (any excess filled with spaces to the left),<br/>
</li><li>%ld for a number<br/>
</li><li>%&lt;number&gt;ld for a number output with a width of at least &lt;number&gt; (any excess filled with spaces to the left)</li></ul>
Here's an example of using the format placeholders:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_757'>
<span class="Statement"> %%</span> /my-request<span class="Identifier"> public</span>
<span class="Statement">     @</span>Hi
<span class="Statement">     trace-run</span> <span class="Constant">&quot;</span><span class="Special">%s</span><span class="Constant"> it's </span><span class="Special">%ld</span><span class="Constant"> degrees outside, or with minimum width: </span><span class="Special">%20s</span><span class="Constant"> it's </span><span class="Special">%20ld</span><span class="Constant"> outside&quot;</span>, <span class="Constant">&quot;yes&quot;</span>, <span class="Constant">90</span>, <span class="Constant">&quot;yes&quot;</span>, <span class="Constant">90</span>
<span class="Statement"> %%</span></pre>
<span id=golf_copied_757 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_757' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_757, code_757, golf_copied_757)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Create and make the application:<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_756'>
sudo mgrg <span class="Special">-i</span> <span class="Special">-u</span> <span class="PreProc">$(</span><span class="Special">whoami</span><span class="PreProc">)</span> <span class="Statement">test</span>
gg <span class="Special">--trace</span> <span class="Special">--debug</span></pre>
<span id=golf_copied_756 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_756' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_756, code_756, golf_copied_756)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Run it:<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_759'>
gg <span class="Special">-r</span> <span class="Special">--req</span><span class="Statement">=</span><span class="Statement">&quot;</span><span class="Constant">/my-request</span><span class="Statement">&quot;</span> <span class="Special">--exec</span></pre>
<span id=golf_copied_759 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_759' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_759, code_759, golf_copied_759)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
The output is:<br/>
<div class='ncode' style='position:relative;padding-right:16px;'>
<pre id='code_755'>
Hi</pre>
<span id=golf_copied_755 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_755' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_755, code_755, golf_copied_755)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
And to find the location of trace file:<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_761'>
gg <span class="Special">-t</span> <span class="Constant">1</span></pre>
<span id=golf_copied_761 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_761' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_761, code_761, golf_copied_761)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
The line in the trace file output by your trace-run would be similar to:<br/>
<div class='ncode' style='position:relative;padding-right:16px;'>
<pre id='code_758'>
2024-08-01-17-13-55 (my_request.golf:4)| my_request yes it&apos;s 90 degrees outside, or with minimum width:                  yes it&apos;s                   90 outside</pre>
<span id=golf_copied_758 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_758' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_758, code_758, golf_copied_758)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<div class="vsub"><a id="Examples"></a>Examples</div>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_760'>
 <span class="Comment">// Trace information</span>
<span class="Statement"> trace-run</span> <span class="Constant">&quot;Program wrote </span><span class="Special">%ld</span><span class="Constant"> bytes into file </span><span class="Special">%s</span><span class="Constant">&quot;</span>, num_bytes, file_name

 <span class="Comment">// Trace that program execution passed through here</span>
<span class="Statement"> trace-run</span></pre>
<span id=golf_copied_760 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_760' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_760, code_760, golf_copied_760)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<!--BEFSAL13--><div class="vsub"><a id="See also"></a>See also</div>
 <a name='Debugging'></a><span style="font-weight:bold;">Debugging</span><br/>
<a href='/debugging.html'>debugging</a> &nbsp;<br/>
<a href='/trace-run.html'>trace-run</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='/documentation.html'>documentation</a><br/>
<a id='trim-string.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:right;background-color:white;'><a href='https://golf-lang.com' style='border-bottom:0px'><img src='https://golf-lang.com/golf.png'/></a></div><div class='vhub' style='margin-top:10px;'>&nbsp;Trim string</div><hr/><span style="font-weight:bold;">Purpose</span>: Trim a string.<br/>
<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_762'>
<span class="Statement"> trim-string</span> &lt;string&gt;</pre>
<span id=golf_copied_762 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_762' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_762, code_762, golf_copied_762)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
trim-string trims &lt;string&gt;, both on left and right. <br/>
<div class="vsub"><a id="Examples"></a>Examples</div>
The variable "str" will be "some string" after trim-string:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_763'>
<span class="Statement"> set-string</span> str = <span class="Constant">&quot;  some string  &quot;</span>;
<span class="Statement"> trim-string</span> str</pre>
<span id=golf_copied_763 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_763' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_763, code_763, golf_copied_763)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<!--BEFSAL13--><div class="vsub"><a id="See also"></a>See also</div>
 <a name='Strings'></a><span style="font-weight:bold;">Strings</span><br/>
<a href='/copy-string.html'>copy-string</a> &nbsp;<br/>
<a href='/count-substring.html'>count-substring</a> &nbsp;<br/>
<a href='/delete-string.html'>delete-string</a> &nbsp;<br/>
<a href='/lower-string.html'>lower-string</a> &nbsp;<br/>
<a href='/read-split.html'>read-split</a> &nbsp;<br/>
<a href='/replace-string.html'>replace-string</a> &nbsp;<br/>
<a href='/set-string.html'>set-string</a> &nbsp;<br/>
<a href='/split-string.html'>split-string</a> &nbsp;<br/>
<a href='/string-length.html'>string-length</a> &nbsp;<br/>
<a href='/trim-string.html'>trim-string</a> &nbsp;<br/>
<a href='/upper-string.html'>upper-string</a> &nbsp;<br/>
<a href='/write-string.html'>write-string</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='/documentation.html'>documentation</a><br/>
<a id='uninstall.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:right;background-color:white;'><a href='https://golf-lang.com' style='border-bottom:0px'><img src='https://golf-lang.com/golf.png'/></a></div><div class='vhub' style='margin-top:10px;'>&nbsp;Uninstall</div><hr/><div class="vsub"><a id="Uninstall Golf"></a>Uninstall Golf</div>
Run from command line:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_764'>
 sudo make uninstall</pre>
<span id=golf_copied_764 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_764' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_764, code_764, golf_copied_764)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<span style="font-weight:bold;">- Application files</span><br/>
Note that /var/lib/gg directory is not removed, as it generally contains application files. You may move such files or delete them as you see fit.<br/>
<!--BEFSAL13--><div class="vsub"><a id="See also"></a>See also</div>
 <a name='Download and build'></a><span style="font-weight:bold;">Download and build</span><br/>
<a href='/install.html'>install</a> &nbsp;<br/>
<a href='/install-arch.html'>install-arch</a> &nbsp;<br/>
<a href='/install-debian.html'>install-debian</a> &nbsp;<br/>
<a href='/install-fedora.html'>install-fedora</a> &nbsp;<br/>
<a href='/install-opensuse.html'>install-opensuse</a> &nbsp;<br/>
<a href='/uninstall.html'>uninstall</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='/documentation.html'>documentation</a><br/>
<a id='uniq-file.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:right;background-color:white;'><a href='https://golf-lang.com' style='border-bottom:0px'><img src='https://golf-lang.com/golf.png'/></a></div><div class='vhub' style='margin-top:10px;'>&nbsp;Uniq file</div><hr/><span style="font-weight:bold;">Purpose</span>: Create a new empty file with a unique name.<br/>
<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_765'>
<span class="Statement"> uniq-file</span> &lt;file name&gt; [<span class="Identifier"> temporary</span> ]</pre>
<span id=golf_copied_765 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_765' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_765, code_765, golf_copied_765)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
One of the common tasks in many applications is creating a unique file (of any kind, including temporary). uniq-file statement does that - it creates a new unique file of zero size, with &lt;file name&gt; being its fully qualified name, which is always within the <a href='/file-storage.html'>file-storage</a>. <br/>
<br/>
The file itself is created empty. If "temporary" clause is used, then the file created is a <a href='/temporary-file.html'>temporary-file</a>.<br/>
<br/>
The file has no extension. You can rename it after it has been created to reflect its usage or purpose. <br/>
<br/>
All files created are setup with owner and group read/write only permissions.<br/>
<div class="vsub"><a id="Examples"></a>Examples</div>
The following creates an empty file with auto-generated name that will be stored in "mydoc" variable. String variable "mydoc" is defined in the statement. The string "some data" is written to a newly created file:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_766'>
<span class="Statement"> uniq-file</span> mydoc
<span class="Statement"> write-file</span> mydoc<span class="Identifier"> from</span> <span class="Constant">&quot;some data&quot;</span></pre>
<span id=golf_copied_766 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_766' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_766, code_766, golf_copied_766)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
To create a temporary file:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_767'>
<span class="Statement"> uniq-file</span> temp_file<span class="Identifier"> temporary</span>
<span class="Statement"> .</span>..
 <span class="Comment">// use file named </span><span class="Constant">&quot;temp_file&quot;</span>
<span class="Statement"> .</span>.
<span class="Statement"> delete-file</span> temp_file</pre>
<span id=golf_copied_767 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_767' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_767, code_767, golf_copied_767)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<!--BEFSAL13--><div class="vsub"><a id="See also"></a>See also</div>
 <a name='Files'></a><span style="font-weight:bold;">Files</span><br/>
<a href='/close-file.html'>close-file</a> &nbsp;<br/>
<a href='/copy-file.html'>copy-file</a> &nbsp;<br/>
<a href='/delete-file.html'>delete-file</a> &nbsp;<br/>
<a href='/file-position.html'>file-position</a> &nbsp;<br/>
<a href='/file-storage.html'>file-storage</a> &nbsp;<br/>
<a href='/file-uploading.html'>file-uploading</a> &nbsp;<br/>
<a href='/lock-file.html'>lock-file</a> &nbsp;<br/>
<a href='/open-file.html'>open-file</a> &nbsp;<br/>
<a href='/read-file.html'>read-file</a> &nbsp;<br/>
<a href='/read-line.html'>read-line</a> &nbsp;<br/>
<a href='/rename-file.html'>rename-file</a> &nbsp;<br/>
<a href='/stat-file.html'>stat-file</a> &nbsp;<br/>
<a href='/temporary-file.html'>temporary-file</a> &nbsp;<br/>
<a href='/uniq-file.html'>uniq-file</a> &nbsp;<br/>
<a href='/unlock-file.html'>unlock-file</a> &nbsp;<br/>
<a href='/write-file.html'>write-file</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='/documentation.html'>documentation</a><br/>
<a id='unlock-file.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:right;background-color:white;'><a href='https://golf-lang.com' style='border-bottom:0px'><img src='https://golf-lang.com/golf.png'/></a></div><div class='vhub' style='margin-top:10px;'>&nbsp;Unlock file</div><hr/><span style="font-weight:bold;">Purpose</span>: Unlocks file.<br/>
<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_768'>
<span class="Statement"> unlock-file</span><span class="Identifier"> id</span> &lt;lock id&gt;</pre>
<span id=golf_copied_768 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_768' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_768, code_768, golf_copied_768)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
unlock-file will unlock file that was locked with <a href='/lock-file.html'>lock-file</a>. &lt;lock id&gt; is the value obtained in <a href='/lock-file.html'>lock-file</a>'s "id" clause.<br/>
<div class="vsub"><a id="Examples"></a>Examples</div>
See <a href='/lock-file.html'>lock-file</a>.<br/>
<!--BEFSAL13--><div class="vsub"><a id="See also"></a>See also</div>
 <a name='Files'></a><span style="font-weight:bold;">Files</span><br/>
<a href='/close-file.html'>close-file</a> &nbsp;<br/>
<a href='/copy-file.html'>copy-file</a> &nbsp;<br/>
<a href='/delete-file.html'>delete-file</a> &nbsp;<br/>
<a href='/file-position.html'>file-position</a> &nbsp;<br/>
<a href='/file-storage.html'>file-storage</a> &nbsp;<br/>
<a href='/file-uploading.html'>file-uploading</a> &nbsp;<br/>
<a href='/lock-file.html'>lock-file</a> &nbsp;<br/>
<a href='/open-file.html'>open-file</a> &nbsp;<br/>
<a href='/read-file.html'>read-file</a> &nbsp;<br/>
<a href='/read-line.html'>read-line</a> &nbsp;<br/>
<a href='/rename-file.html'>rename-file</a> &nbsp;<br/>
<a href='/stat-file.html'>stat-file</a> &nbsp;<br/>
<a href='/temporary-file.html'>temporary-file</a> &nbsp;<br/>
<a href='/uniq-file.html'>uniq-file</a> &nbsp;<br/>
<a href='/unlock-file.html'>unlock-file</a> &nbsp;<br/>
<a href='/write-file.html'>write-file</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='/documentation.html'>documentation</a><br/>
<a id='unused-var.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:right;background-color:white;'><a href='https://golf-lang.com' style='border-bottom:0px'><img src='https://golf-lang.com/golf.png'/></a></div><div class='vhub' style='margin-top:10px;'>&nbsp;Unused var</div><hr/><span style="font-weight:bold;">Purpose</span>: Prevent compiler error if variable is not used.<br/>
<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_769'>
<span class="Statement"> unused-var</span> &lt;variable name&gt;</pre>
<span id=golf_copied_769 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_769' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_769, code_769, golf_copied_769)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
unused-var prevents <a href='/error-handling.html'>erroring out</a> if &lt;variable name&gt; is unused. Generally, you don't want to have unused variables - they typically indicate bugs or clutter. However, in some cases you might need such variables as a reminder for a future enhancement, or for some other reason it is unavoidable. In any case, you can use unused-var to shield such instances from causing errors.<br/>
<div class="vsub"><a id="Examples"></a>Examples</div>
In the following, variable "hw" is created and initialized. Such variable is not used at the moment, however if you would do so in the future and want to keep it, use unused-var to prevent compiler errors:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_770'>
<span class="Statement"> set-string</span> hw = <span class="Constant">&quot;Hello world&quot;</span>
<span class="Statement"> unused-var</span> hw</pre>
<span id=golf_copied_770 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_770' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_770, code_770, golf_copied_770)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<!--BEFSAL13--><div class="vsub"><a id="See also"></a>See also</div>
 <a name='Language'></a><span style="font-weight:bold;">Language</span><br/>
<a href='/inline-code.html'>inline-code</a> &nbsp;<br/>
<a href='/statements.html'>statements</a> &nbsp;<br/>
<a href='/syntax-highlighting.html'>syntax-highlighting</a> &nbsp;<br/>
<a href='/unused-var.html'>unused-var</a> &nbsp;<br/>
<a href='/variable-scope.html'>variable-scope</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='/documentation.html'>documentation</a><br/>
<a id='upper-string.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:right;background-color:white;'><a href='https://golf-lang.com' style='border-bottom:0px'><img src='https://golf-lang.com/golf.png'/></a></div><div class='vhub' style='margin-top:10px;'>&nbsp;Upper string</div><hr/><span style="font-weight:bold;">Purpose</span>: Upper-case a string.<br/>
<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_771'>
<span class="Statement"> upper-string</span> &lt;string&gt;</pre>
<span id=golf_copied_771 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_771' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_771, code_771, golf_copied_771)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
upper-string converts all &lt;string&gt;'s characters to upper case.<br/>
<div class="vsub"><a id="Examples"></a>Examples</div>
The resulting "str" is "GOOD":<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_772'>
<span class="Statement"> set-string</span> str=<span class="Constant">&quot;good&quot;</span>
<span class="Statement"> upper-string</span> str</pre>
<span id=golf_copied_772 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_772' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_772, code_772, golf_copied_772)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<!--BEFSAL13--><div class="vsub"><a id="See also"></a>See also</div>
 <a name='Strings'></a><span style="font-weight:bold;">Strings</span><br/>
<a href='/copy-string.html'>copy-string</a> &nbsp;<br/>
<a href='/count-substring.html'>count-substring</a> &nbsp;<br/>
<a href='/delete-string.html'>delete-string</a> &nbsp;<br/>
<a href='/lower-string.html'>lower-string</a> &nbsp;<br/>
<a href='/read-split.html'>read-split</a> &nbsp;<br/>
<a href='/replace-string.html'>replace-string</a> &nbsp;<br/>
<a href='/set-string.html'>set-string</a> &nbsp;<br/>
<a href='/split-string.html'>split-string</a> &nbsp;<br/>
<a href='/string-length.html'>string-length</a> &nbsp;<br/>
<a href='/trim-string.html'>trim-string</a> &nbsp;<br/>
<a href='/upper-string.html'>upper-string</a> &nbsp;<br/>
<a href='/write-string.html'>write-string</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='/documentation.html'>documentation</a><br/>
<a id='use-cursor.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:right;background-color:white;'><a href='https://golf-lang.com' style='border-bottom:0px'><img src='https://golf-lang.com/golf.png'/></a></div><div class='vhub' style='margin-top:10px;'>&nbsp;Use cursor</div><hr/><span style="font-weight:bold;">Purpose</span>: Iterate to a lesser or greater key in a tree.<br/>
<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_773'>
<span class="Statement"> use-cursor</span> &lt;cursor&gt; (<span class="Identifier"> current</span> |<span class="Identifier"> get-lesser</span> |<span class="Identifier"> get-greater</span> ) \
     [<span class="Type"> key</span> &lt;key&gt; ] \
     [<span class="Type"> value</span> &lt;value&gt; ] \
     [<span class="Identifier"> update-value</span> &lt;update value&gt; ] \
     [<span class="Type"> status</span> &lt;status&gt; ]</pre>
<span id=golf_copied_773 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_773' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_773, code_773, golf_copied_773)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
use-cursor uses &lt;cursor&gt; previously created (see <a href='/read-tree.html'>read-tree</a>, <a href='/write-tree.html'>write-tree</a>) for iteration over tree nodes with lesser or greater key values. It can also obtain keys and values for such nodes, as well as update their values.<br/>
<div class="vsub"><a id="Current node"></a>Current node</div>
A &lt;cursor&gt; has a current node, which is first computed by using "current", "get-lesser" or "get-greater" clauses, and then any other clauses are applied to it (such as "key", "value" and "update-value"). <br/>
<br/>
The computation of a current node is performed by using a &lt;cursor&gt;'s "previous current node", i.e. the current node just before use-cursor executes. If "current" clause is used, the current node remains the same as previous current node. If "get-lesser" clause is used, a node with a key that is the next lesser from the previous current will become the new current. If "get-greater" clause is used, a node with a key that is the next greater from the previous current will become the new current. <br/>
<br/>
If the new current node can be found, then other use-cursor clauses are applied to it, such as to obtain a &lt;key&gt; or &lt;value&gt;, or to &lt;update value&gt;. If, as a result of either of these clauses, the new current node cannot be found (for instance there is no lesser or greater key in the tree), the current node will be unchanged and &lt;status&gt; (in "status" clause) will be GG_ERR_EXIST.<br/>
<div class="vsub"><a id="Key, value, updating value, status"></a>Key, value, updating value, status</div>
"key" clause will obtain the key in a current node into &lt;key&gt; string. The value of current node can be obtained in &lt;value&gt; in "value" clause; &lt;value&gt; is a string. The value of current node can be updated to &lt;update value&gt; in "update-value" clause; &lt;update value&gt; is a string. This update is performed after &lt;value&gt; has been retrieved, allowing you to obtain the previous value in the same statement. <br/>
<br/>
"status" clause can be used to obtain &lt;status&gt; number, which is GG_ERR_EXIST if the new current node cannot be found, in which case the current node, &lt;key&gt; and &lt;value&gt; are unchanged. Otherwise, &lt;status&gt; is GG_OKAY.<br/>
<div class="vsub"><a id="Examples"></a>Examples</div>
The following will find a value with key "999", and then iterate in the tree to find all lesser values (in descending order):<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_774'>
<span class="Statement"> set-string</span> k = <span class="Constant">&quot;999&quot;</span>
<span class="Statement"> read-tree</span> mytree<span class="Identifier"> equal</span> k<span class="Type"> status</span> st \
    <span class="Type"> value</span> val<span class="Type"> new-cursor</span> cur
<span class="Statement"> start-loop</span>
<span class="Statement">     if-true</span> st<span class="Identifier"> equal</span> GG_OKAY
<span class="Statement">         @</span>Value found is [<span class="Statement">&lt;&lt;p-out</span> val<span class="Statement">&gt;&gt;</span>] for key [<span class="Statement">&lt;&lt;p-out</span> k<span class="Statement">&gt;&gt;</span>]
<span class="Statement">         use-cursor</span> cur<span class="Identifier"> get-lesser</span><span class="Type"> status</span> st<span class="Type"> value</span> val<span class="Type"> key</span> k
<span class="Statement">     else-if</span>
<span class="Statement">         break-loop</span>
<span class="Statement">     end-if</span>
<span class="Statement"> end-loop</span></pre>
<span id=golf_copied_774 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_774' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_774, code_774, golf_copied_774)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
For more examples, see <a href='/new-tree.html'>new-tree</a>.<br/>
<!--BEFSAL13--><div class="vsub"><a id="See also"></a>See also</div>
 <a name='Tree'></a><span style="font-weight:bold;">Tree</span><br/>
<a href='/delete-tree.html'>delete-tree</a> &nbsp;<br/>
<a href='/get-tree.html'>get-tree</a> &nbsp;<br/>
<a href='/new-tree.html'>new-tree</a> &nbsp;<br/>
<a href='/purge-tree.html'>purge-tree</a> &nbsp;<br/>
<a href='/read-tree.html'>read-tree</a> &nbsp;<br/>
<a href='/use-cursor.html'>use-cursor</a> &nbsp;<br/>
<a href='/write-tree.html'>write-tree</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='/documentation.html'>documentation</a><br/>
<a id='utf8-text.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:right;background-color:white;'><a href='https://golf-lang.com' style='border-bottom:0px'><img src='https://golf-lang.com/golf.png'/></a></div><div class='vhub' style='margin-top:10px;'>&nbsp;Utf8 text</div><hr/><span style="font-weight:bold;">Purpose</span>: Convert UTF8 string to text.<br/>
<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_775'>
<span class="Statement"> utf8-text</span> &lt;utf8&gt; \
     [<span class="Type"> to</span> &lt;text&gt; ] \
     [<span class="Identifier"> length</span> &lt;length&gt; ] \
     [<span class="Type"> status</span> &lt;status&gt; ] \
     [<span class="Type"> error-text</span> &lt;error text&gt; ]</pre>
<span id=golf_copied_775 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_775' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_775, code_775, golf_copied_775)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
utf8-text will convert &lt;utf8&gt; text to &lt;text&gt; (specified with "to" clause). If &lt;text&gt; is omitted, then the result of conversion is output.<br/>
<br/>
&lt;utf8&gt; is a string that may contain UTF8 characters (as 2, 3 or 4 bytes representing a unicode character). Encoding creates a string that can be used as a value where text representation of UTF8 is required. utf8-text is performed according to <a href='https://datatracker.ietf.org/doc/html/rfc7159'>RFC7159</a> and <a href='https://www.rfc-editor.org/rfc/rfc3629'>RFC3629</a> (UTF8 standard).<br/>
<br/>
Note that hexadecimal characters used for Unicode (such as \u21d7) are always lowercase. Solidus character ("/") is not escaped, although <a href='/text-utf8.html'>text-utf8</a> will correctly process it if the input has it escaped.<br/>
<br/>
The number of bytes in &lt;utf8&gt; to be converted can be specified with &lt;length&gt; in "length" clause. If &lt;length&gt; is not specified, it is the length of string &lt;utf8&gt;. Note that a single UTF-8 character can be anywhere between 1 to 4 bytes. For example "" is 2 bytes in length. <br/>
<br/>
The status of encoding can be obtained in number &lt;status&gt;. &lt;status&gt; is the string length of the result in &lt;text&gt; (or the number of bytes output if &lt;text&gt; is omitted), or -1 if error occurred (meaning &lt;utf8&gt; is an invalid UTF8) in which case &lt;text&gt; (if specified) is an empty string and the error text can be obtained in &lt;error text&gt; in "error-text" clause.<br/>
<div class="vsub"><a id="Examples"></a>Examples</div>
Convert UTF8 string to text and verify the expected result:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_776'>
 <span class="Comment">// UTF8 string </span>
<span class="Statement"> set-string</span> utf8_str = <span class="Constant">&quot;</span><span class="Special">\&quot;</span><span class="Constant">Doc</span><span class="Special">\&quot;\n\t\b\f\r\t</span><span class="Constant"></span><span class="Special">\t</span><span class="Constant"></span><span class="Special">\n</span><span class="Constant">/</span><span class="Special">\&quot;</span><span class="Constant">()</span><span class="Special">\t</span><span class="Constant">&quot;</span>

 <span class="Comment">// Convert UTF8 string to text</span>
<span class="Statement"> utf8-text</span> utf8_str<span class="Type"> status</span> encstatus<span class="Type"> to</span> text_text

 <span class="Comment">// This is the text expected</span>
<span class="Statement"> ((</span> expected_result
<span class="Statement"> @</span>\&quot;Doc\&quot;\n\t\b\f\r\t\u21d7\u21d8\t\u25b7\u25ee\ud834\udd1e\u13eb\u2ca0\u0448\n/\&quot;()\t
<span class="Statement"> ))</span>

 <span class="Comment">// Make sure conversion was okay, decs is the length of the result (encj string)</span>
<span class="Statement"> if-true</span> text_text<span class="Identifier"> equal</span> expected_result<span class="Identifier"> and</span> encstatus<span class="Identifier"> not-equal</span> -<span class="Constant">1</span>
<span class="Statement">     @</span>decode-text worked okay
<span class="Statement"> end-if</span></pre>
<span id=golf_copied_776 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_776' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_776, code_776, golf_copied_776)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<!--BEFSAL13--><div class="vsub"><a id="See also"></a>See also</div>
 <a name='UTF8'></a><span style="font-weight:bold;">UTF8</span><br/>
<a href='/text-utf8.html'>text-utf8</a> &nbsp;<br/>
<a href='/utf8-text.html'>utf8-text</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='/documentation.html'>documentation</a><br/>
<a id='variable-scope.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:right;background-color:white;'><a href='https://golf-lang.com' style='border-bottom:0px'><img src='https://golf-lang.com/golf.png'/></a></div><div class='vhub' style='margin-top:10px;'>&nbsp;Variable scope</div><hr/>Golf uses scope rules for variables that is similar to other programming languages.<br/>
<!--BEFSAL13--><div class="vsub"><a id="See also"></a>See also</div>
 <a name='Language'></a><span style="font-weight:bold;">Language</span><br/>
<a href='/inline-code.html'>inline-code</a> &nbsp;<br/>
<a href='/statements.html'>statements</a> &nbsp;<br/>
<a href='/syntax-highlighting.html'>syntax-highlighting</a> &nbsp;<br/>
<a href='/unused-var.html'>unused-var</a> &nbsp;<br/>
<a href='/variable-scope.html'>variable-scope</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='/documentation.html'>documentation</a><br/>
<a id='write-array.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:right;background-color:white;'><a href='https://golf-lang.com' style='border-bottom:0px'><img src='https://golf-lang.com/golf.png'/></a></div><div class='vhub' style='margin-top:10px;'>&nbsp;Write array</div><hr/><span style="font-weight:bold;">Purpose</span>: Store value into an array.<br/>
<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_777'>
<span class="Statement"> write-array</span> &lt;array&gt; \
    <span class="Identifier"> key</span> &lt;key&gt; \
    <span class="Identifier"> value</span> &lt;value&gt; \
     [<span class="Type"> status</span> &lt;status&gt; ] \
     [<span class="Type"> old-value</span> &lt;old value&gt; ]</pre>
<span id=golf_copied_777 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_777' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_777, code_777, golf_copied_777)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
write-array will store string &lt;value&gt; (in "value" clause) under index &lt;key&gt; (in "key" clause) into &lt;array&gt;, which must be created with <a href='/new-array.html'>new-array</a>. &lt;key&gt; is a number from 0 up to (excluding) the currently allocated array size (see <a href='/new-array.html'>new-array</a>).<br/>
<br/>
&lt;key&gt; and &lt;value&gt; are collectively called an "element". <br/>
<br/>
If value under index &lt;key&gt; already exists in the array, then &lt;status&gt; number (in "status" clause) has a value of GG_INFO_EXIST and the old value associated under index &lt;key&gt; is returned in string &lt;old value&gt; (in "old-value" clause) and &lt;value&gt; will replace the old value.<br/>
<br/>
If there was no value under index &lt;key&gt;, &lt;status&gt; will be GG_OKAY and &lt;old value&gt; is unchanged.<br/>
<br/>
If an &lt;array&gt; was created with "process-scope" clause (see <a href='/new-array.html'>new-array</a>), then the element &lt;value&gt; will not be freed when the current request ends, rather it will persist while the process runs, unless deleted (see <a href='/read-array.html'>read-array</a> with delete clause).<br/>
<div class="vsub"><a id="Examples"></a>Examples</div>
Writing data to an array:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_779'>
<span class="Statement"> new-array</span> arr
<span class="Statement"> write-array</span> arr<span class="Identifier"> key</span> <span class="Constant">100</span><span class="Identifier"> value</span> <span class="Constant">&quot;some data&quot;</span></pre>
<span id=golf_copied_779 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_779' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_779, code_779, golf_copied_779)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Writing new value with the same key index and obtaining the previous value (which is "some data"):<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_781'>
<span class="Statement"> write-array</span> arr<span class="Identifier"> key</span> <span class="Constant">100</span><span class="Identifier"> value</span> <span class="Constant">&quot;new data&quot;</span><span class="Type"> status</span> st<span class="Type"> old-value</span> od
<span class="Statement"> if-true</span> st<span class="Identifier"> equal</span> GG_INFO_EXIST
<span class="Statement">     @</span>Previous value for this key index is <span class="Statement">&lt;&lt;p-out</span> od<span class="Statement">&gt;&gt;</span>
<span class="Statement"> end-if</span></pre>
<span id=golf_copied_781 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_781' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_781, code_781, golf_copied_781)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
The following is an array service, where a process-scoped array is created. It provides inserting, deleting and querying indexed keys. Maximum number of keys it holds is 10,000,000 (indexed from 0 to 9,999,999). Such a service process can run indefinitely. Create file arrsrv.golf:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_782'>
<span class="Statement"> %%</span> /arrsrv<span class="Identifier"> public</span>
<span class="Statement">     do-once</span>
<span class="Statement">     new-array</span> arr<span class="Identifier"> max-size</span> <span class="Constant">10000000</span><span class="Identifier"> process-scope</span>
<span class="Statement">     end-do-once</span>

     <span class="Comment">// Get input parameters</span>
<span class="Statement">     get-param</span> op
<span class="Statement">     get-param</span> key
<span class="Statement">     get-param</span> data
     <span class="Comment">// Convert string keye to number</span>
<span class="Statement">     string-number</span> key<span class="Type"> to</span> key_n

<span class="Statement">     if-true</span> op<span class="Identifier"> equal</span> <span class="Constant">&quot;add&quot;</span> <span class="Comment">// Add data to array</span>
<span class="Statement">         write-array</span> arr<span class="Identifier"> key</span> key_n<span class="Identifier"> value</span> data<span class="Type"> old-value</span> old_data<span class="Type"> status</span> st
<span class="Statement">         if-true</span> st<span class="Identifier"> equal</span> GG_INFO_EXIST
<span class="Statement">             @</span>Old data was [<span class="Statement">&lt;&lt;p-out</span> old_data<span class="Statement">&gt;&gt;</span>]
<span class="Statement">             delete-string</span> old_data
<span class="Statement">         end-if</span>
<span class="Statement">         @</span>Added [<span class="Statement">&lt;&lt;p-out</span> key<span class="Statement">&gt;&gt;</span>]
<span class="Statement">     else-if</span> op<span class="Identifier"> equal</span> <span class="Constant">&quot;delete&quot;</span> <span class="Comment">// Delete data and obtain the value deleted</span>
<span class="Statement">         read-array</span> arr<span class="Identifier"> key</span> key_n<span class="Type"> value</span> val<span class="Identifier"> delete</span><span class="Type"> status</span> st
<span class="Statement">         if-true</span> st<span class="Identifier"> equal</span> GG_ERR_EXIST
<span class="Statement">             @</span>Not found [<span class="Statement">&lt;&lt;p-out</span> key<span class="Statement">&gt;&gt;</span>]
<span class="Statement">         else-if</span>
             <span class="Comment">// If found, then delete key and value</span>
<span class="Statement">             @</span>Deleted [<span class="Statement">&lt;&lt;p-out</span> val<span class="Statement">&gt;&gt;</span>]
<span class="Statement">             delete-string</span> val
<span class="Statement">         end-if</span>
<span class="Statement">     else-if</span> op<span class="Identifier"> equal</span> <span class="Constant">&quot;query&quot;</span> <span class="Comment">// Query hash based on key value</span>
<span class="Statement">         read-array</span> arr<span class="Identifier"> key</span> key_n<span class="Type"> value</span> val<span class="Type"> status</span> st
<span class="Statement">         if-true</span> st<span class="Identifier"> equal</span> GG_ERR_EXIST
<span class="Statement">             @</span>Not found, queried [<span class="Statement">&lt;&lt;p-out</span> key<span class="Statement">&gt;&gt;</span>]
<span class="Statement">         else-if</span>
<span class="Statement">             @</span>Value [<span class="Statement">&lt;&lt;p-out</span> val<span class="Statement">&gt;&gt;</span>]
<span class="Statement">         end-if</span>
<span class="Statement">     end-if</span>
<span class="Statement"> %%</span></pre>
<span id=golf_copied_782 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_782' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_782, code_782, golf_copied_782)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Create and make the application, then run it as service:<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_778'>
// Create application
gg <span class="Special">-k</span> arr
// Make application
gg <span class="Special">-q</span>
// Start application <span class="PreProc">(</span><span class="Special">single process key service</span><span class="PreProc">)</span>
mgrg <span class="Special">-w</span> <span class="Constant">1</span> arr</pre>
<span id=golf_copied_778 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_778' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_778, code_778, golf_copied_778)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Try it from a command line client (see <a href='/gg.html'>gg</a>):<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_780'>
// Add data
gg <span class="Special">-r</span> <span class="Special">--req</span><span class="Statement">=</span><span class="Statement">&quot;</span><span class="Constant">/arrsrv/op=add/key=15/data=15</span><span class="Statement">&quot;</span> <span class="Special">--service</span> <span class="Special">--app</span><span class="Statement">=</span><span class="Statement">&quot;</span><span class="Constant">/arr</span><span class="Statement">&quot;</span> <span class="Special">--exec</span>
// Query data
gg <span class="Special">-r</span> <span class="Special">--req</span><span class="Statement">=</span><span class="Statement">&quot;</span><span class="Constant">/arrsrv/op=query/key=15</span><span class="Statement">&quot;</span> <span class="Special">--service</span> <span class="Special">--app</span><span class="Statement">=</span><span class="Statement">&quot;</span><span class="Constant">/arr</span><span class="Statement">&quot;</span> <span class="Special">--exec</span>
// Delete data
gg <span class="Special">-r</span> <span class="Special">--req</span><span class="Statement">=</span><span class="Statement">&quot;</span><span class="Constant">/arrsrv/op=delete/key=15</span><span class="Statement">&quot;</span> <span class="Special">--service</span> <span class="Special">--app</span><span class="Statement">=</span><span class="Statement">&quot;</span><span class="Constant">/arr</span><span class="Statement">&quot;</span> <span class="Special">--exec</span></pre>
<span id=golf_copied_780 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_780' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_780, code_780, golf_copied_780)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
See <a href='/read-array.html'>read-array</a> for more examples.<br/>
<!--BEFSAL13--><div class="vsub"><a id="See also"></a>See also</div>
 <a name='Array'></a><span style="font-weight:bold;">Array</span><br/>
<a href='/new-array.html'>new-array</a> &nbsp;<br/>
<a href='/purge-array.html'>purge-array</a> &nbsp;<br/>
<a href='/read-array.html'>read-array</a> &nbsp;<br/>
<a href='/write-array.html'>write-array</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='/documentation.html'>documentation</a><br/>
<a id='write-fifo.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:right;background-color:white;'><a href='https://golf-lang.com' style='border-bottom:0px'><img src='https://golf-lang.com/golf.png'/></a></div><div class='vhub' style='margin-top:10px;'>&nbsp;Write fifo</div><hr/><span style="font-weight:bold;">Purpose</span>: Write key/value pair into a FIFO list.<br/>
<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_783'>
<span class="Statement"> write-fifo</span> &lt;list&gt; \
    <span class="Identifier"> key</span> &lt;key&gt; \
    <span class="Identifier"> value</span> &lt;value&gt;</pre>
<span id=golf_copied_783 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_783' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_783, code_783, golf_copied_783)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
write-fifo adds a pair of key/value pointers to the FIFO &lt;list&gt;, specified with strings &lt;key&gt; and &lt;value&gt; (in "key" and "value" clauses, collectively called an "element"). <br/>
<br/>
It always adds elements to the end of the list. <br/>
<div class="vsub"><a id="Examples"></a>Examples</div>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_784'>
<span class="Statement"> new-fifo</span> nf
<span class="Statement"> write-fifo</span> nf<span class="Identifier"> key</span> <span class="Constant">&quot;mykey&quot;</span><span class="Identifier"> value</span> <span class="Constant">&quot;myvalue&quot;</span></pre>
<span id=golf_copied_784 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_784' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_784, code_784, golf_copied_784)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<!--BEFSAL13--><div class="vsub"><a id="See also"></a>See also</div>
 <a name='FIFO'></a><span style="font-weight:bold;">FIFO</span><br/>
<a href='/delete-fifo.html'>delete-fifo</a> &nbsp;<br/>
<a href='/new-fifo.html'>new-fifo</a> &nbsp;<br/>
<a href='/purge-fifo.html'>purge-fifo</a> &nbsp;<br/>
<a href='/read-fifo.html'>read-fifo</a> &nbsp;<br/>
<a href='/rewind-fifo.html'>rewind-fifo</a> &nbsp;<br/>
<a href='/write-fifo.html'>write-fifo</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='/documentation.html'>documentation</a><br/>
<a id='write-file.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:right;background-color:white;'><a href='https://golf-lang.com' style='border-bottom:0px'><img src='https://golf-lang.com/golf.png'/></a></div><div class='vhub' style='margin-top:10px;'>&nbsp;Write file</div><hr/><span style="font-weight:bold;">Purpose</span>: Write to a file.<br/>
<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_785'>
<span class="Statement"> write-file</span> &lt;file&gt; | (<span class="Identifier"> file-id</span> &lt;file id&gt; ) \
    <span class="Identifier"> from</span> &lt;content&gt; \
     [<span class="Identifier"> length</span> &lt;length&gt; ] \
     [ (<span class="Identifier"> position</span> &lt;position&gt; ) | (<span class="Identifier"> append</span> [ &lt;append&gt; ] ) ] \
     [<span class="Type"> status</span> &lt;status&gt; ]</pre>
<span id=golf_copied_785 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_785' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_785, code_785, golf_copied_785)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<div class="vsub"><a id="Without file-id"></a>Without file-id</div>
This is a simple method of writing a file. File named &lt;file&gt; is opened, data written, and file is closed. &lt;file&gt; can be a full path name, or a path relative to the application home directory (see <a href='/directories.html'>directories</a>).<br/>
<br/>
write-file writes &lt;content&gt; to &lt;file&gt;. If "append" clause is used without boolean variable &lt;append&gt;, or if &lt;append&gt; evaluates to true, the &lt;content&gt; is appended to the file; otherwise the file is overwritten with &lt;content&gt;, unless "position" clause is used in which case file is not overwritten and &lt;content&gt; is written at byte &lt;position&gt; (with 0 being the first byte). Note that &lt;position&gt; can be beyond the end of file, in which case null-bytes are written between the current end of file and &lt;position&gt;.<br/>
<br/>
File is created if it does not exist (even if "append" is used), unless "position" clause is used in which case file must exist. <br/>
<br/>
If "length" is not used, then a whole string &lt;content&gt; is written to a file, and the number of bytes written is the length of that string. If "length" is specified, then exactly &lt;length&gt; bytes are written.<br/>
<br/>
If "status" clause is used, then the number of bytes written is stored to &lt;status&gt;, unless error occurred, in which case &lt;status&gt; has the error code. The error code can be GG_ERR_POSITION (if &lt;position&gt; is negative or file does not support it), GG_ERR_WRITE (if there is an error writing file) or GG_ERR_OPEN if file cannot be open. Note that no partial data will be written; if all of data cannot be written to the file, then none will be written, and in that case an error of GG_ERR_WRITE will be reported in &lt;status&gt;.<br/>
<br/>
<div class="vsub"><a id="With file-id"></a>With file-id</div>
This method uses a &lt;file id&gt; that was created with <a href='/open-file.html'>open-file</a>. You can then write (and read) file using this &lt;file id&gt; and the file stays open until <a href='/close-file.html'>close-file</a> is called or the request ends. <br/>
<br/>
If "position" clause is used, then data is written starting from byte &lt;position&gt;, otherwise writing starts from the current file position determined by the previous reads/writes or as set by using "set" clause in <a href='/file-position.html'>file-position</a>. After each read or write, the file position is advanced by the number of bytes read or written. Position can be set passed the last byte of the file, in which case writing will fill the space between the current end of file and the current position with null-bytes.<br/>
<br/>
If "length" is not used, then a whole string is written to a file, and the number of bytes written is the length of that string. If "length" is specified, then exactly &lt;length&gt; bytes are written.<br/>
<br/>
If "append" clause is used without boolean variable &lt;append&gt;, or if &lt;append&gt; evaluates to true, then file pointer is set at the end of file and data written.<br/>
<br/>
If "status" clause is used, then the number of bytes written is stored to &lt;status&gt;, unless error occurred, in which case &lt;status&gt; has the error code. The error code can be GG_ERR_POSITION (if &lt;position&gt; is negative or file does not support it), GG_ERR_WRITE (if there is an error writing file) or GG_ERR_OPEN if file is not open. Note that no partial data will be written; if all of data cannot be written to the file, then none will be written, and in that case an error of GG_ERR_WRITE will be reported in &lt;status&gt;.<br/>
<div class="vsub"><a id="Examples"></a>Examples</div>
To overwrite file "/path/to/file" with "Hello World":<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_786'>
<span class="Statement"> write-file</span> <span class="Constant">&quot;/path/to/file&quot;</span><span class="Identifier"> from</span> <span class="Constant">&quot;Hello World&quot;</span></pre>
<span id=golf_copied_786 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_786' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_786, code_786, golf_copied_786)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
To append "Hello World" to file:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_787'>
<span class="Statement"> set-string</span> path=<span class="Constant">&quot;/path/to/file&quot;</span>
<span class="Statement"> set-string</span> cont=<span class="Constant">&quot;Hello World&quot;</span>
<span class="Statement"> write-file</span> path<span class="Identifier"> from</span> cont<span class="Identifier"> append</span></pre>
<span id=golf_copied_787 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_787' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_787, code_787, golf_copied_787)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
To write only 5 bytes (i.e. "Hello") and get status (if successful, number "st" would be "5"):<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_788'>
<span class="Statement"> set-string</span> cont=<span class="Constant">&quot;Hello World&quot;</span>
<span class="Statement"> write-file</span> <span class="Constant">&quot;file&quot;</span><span class="Identifier"> from</span> cont<span class="Identifier"> length</span> <span class="Constant">5</span><span class="Type"> status</span> st</pre>
<span id=golf_copied_788 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_788' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_788, code_788, golf_copied_788)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
To write a string "Hello" at byte position 3 in the existing "file":<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_789'>
<span class="Statement"> set-string</span> cont=<span class="Constant">&quot;Hello&quot;</span>
<span class="Statement"> write-file</span> <span class="Constant">&quot;file&quot;</span><span class="Identifier"> from</span> cont<span class="Identifier"> position</span> <span class="Constant">3</span><span class="Type"> status</span> st</pre>
<span id=golf_copied_789 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_789' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_789, code_789, golf_copied_789)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
See <a href='/open-file.html'>open-file</a> for an example with "file-id" clause.<br/>
<!--BEFSAL13--><div class="vsub"><a id="See also"></a>See also</div>
 <a name='Files'></a><span style="font-weight:bold;">Files</span><br/>
<a href='/close-file.html'>close-file</a> &nbsp;<br/>
<a href='/copy-file.html'>copy-file</a> &nbsp;<br/>
<a href='/delete-file.html'>delete-file</a> &nbsp;<br/>
<a href='/file-position.html'>file-position</a> &nbsp;<br/>
<a href='/file-storage.html'>file-storage</a> &nbsp;<br/>
<a href='/file-uploading.html'>file-uploading</a> &nbsp;<br/>
<a href='/lock-file.html'>lock-file</a> &nbsp;<br/>
<a href='/open-file.html'>open-file</a> &nbsp;<br/>
<a href='/read-file.html'>read-file</a> &nbsp;<br/>
<a href='/read-line.html'>read-line</a> &nbsp;<br/>
<a href='/rename-file.html'>rename-file</a> &nbsp;<br/>
<a href='/stat-file.html'>stat-file</a> &nbsp;<br/>
<a href='/temporary-file.html'>temporary-file</a> &nbsp;<br/>
<a href='/uniq-file.html'>uniq-file</a> &nbsp;<br/>
<a href='/unlock-file.html'>unlock-file</a> &nbsp;<br/>
<a href='/write-file.html'>write-file</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='/documentation.html'>documentation</a><br/>
<a id='write-hash.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:right;background-color:white;'><a href='https://golf-lang.com' style='border-bottom:0px'><img src='https://golf-lang.com/golf.png'/></a></div><div class='vhub' style='margin-top:10px;'>&nbsp;Write hash</div><hr/><span style="font-weight:bold;">Purpose</span>: Store key/value pair into a hash.<br/>
<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_790'>
<span class="Statement"> write-hash</span> &lt;hash&gt; \
    <span class="Identifier"> key</span> &lt;key&gt; \
    <span class="Identifier"> value</span> &lt;value&gt; \
     [<span class="Type"> status</span> &lt;status&gt; ] \
     [<span class="Type"> old-value</span> &lt;old value&gt; ]</pre>
<span id=golf_copied_790 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_790' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_790, code_790, golf_copied_790)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
write-hash will store string &lt;key&gt; (in "key" clause) and &lt;value&gt; (in "value" clause) into &lt;hash&gt;, which must be created with <a href='/new-hash.html'>new-hash</a>. <br/>
<br/>
&lt;key&gt; and &lt;value&gt; are collectively called an "element". <br/>
<br/>
If &lt;key&gt; already exists in the hash, then the old value associated with it is returned in string &lt;old value&gt; (in "old-value" clause) and &lt;value&gt; will replace the old value - in this case &lt;status&gt; number (in "status" clause) has a value of GG_INFO_EXIST. <br/>
<br/>
If &lt;key&gt; did not exist, &lt;status&gt; will be GG_OKAY and &lt;old value&gt; is unchanged.<br/>
<br/>
If a &lt;hash&gt; was created with "process-scope" clause (see <a href='/new-hash.html'>new-hash</a>), then the element (including &lt;key&gt; and &lt;value&gt;) will not be freed when the current request ends, rather it will persist while the process runs, unless deleted (see <a href='/read-hash.html'>read-hash</a> with delete clause).<br/>
<div class="vsub"><a id="Examples"></a>Examples</div>
Writing data to a hash:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_792'>
<span class="Statement"> new-hash</span> h
<span class="Statement"> write-hash</span> h<span class="Identifier"> key</span> <span class="Constant">&quot;mykey&quot;</span><span class="Identifier"> value</span> <span class="Constant">&quot;some data&quot;</span></pre>
<span id=golf_copied_792 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_792' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_792, code_792, golf_copied_792)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Writing new value with the same key and obtaining the previous value (which is "some data"):<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_794'>
<span class="Statement"> write-hash</span> h<span class="Identifier"> key</span> <span class="Constant">&quot;mykey&quot;</span><span class="Identifier"> value</span> <span class="Constant">&quot;new data&quot;</span><span class="Type"> status</span> st<span class="Type"> old-value</span> od
<span class="Statement"> if-true</span> st<span class="Identifier"> equal</span> GG_INFO_EXIST
<span class="Statement">     @</span>Previous value for this key is <span class="Statement">&lt;&lt;p-out</span> od<span class="Statement">&gt;&gt;</span>
<span class="Statement"> end-if</span></pre>
<span id=golf_copied_794 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_794' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_794, code_794, golf_copied_794)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
The following is a key/value service, where a process-scoped hash is created. It provides inserting, deleting and querying key/value pairs. Such a service process can run indefinitely. Create file keysrv.golf:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_795'>
<span class="Statement"> %%</span> /keysrv<span class="Identifier"> public</span>
<span class="Statement">     do-once</span>
<span class="Statement">     new-hash</span> h<span class="Identifier"> hash-size</span> <span class="Constant">1024</span><span class="Identifier"> process-scope</span>
<span class="Statement">     end-do-once</span>

     <span class="Comment">// Get input parameters</span>
<span class="Statement">     get-param</span> op
<span class="Statement">     get-param</span> key
<span class="Statement">     get-param</span> data

<span class="Statement">     if-true</span> op<span class="Identifier"> equal</span> <span class="Constant">&quot;add&quot;</span> <span class="Comment">// Add data to hash </span>
<span class="Statement">         write-hash</span> h<span class="Identifier"> key key value</span> data<span class="Type"> old-value</span> old_data<span class="Type"> status</span> st
<span class="Statement">         if-true</span> st<span class="Identifier"> equal</span> GG_INFO_EXIST
<span class="Statement">             delete-string</span> old_data
<span class="Statement">         end-if</span>
<span class="Statement">         @</span>Added [<span class="Statement">&lt;&lt;p-out</span> key<span class="Statement">&gt;&gt;</span>]
<span class="Statement">     else-if</span> op<span class="Identifier"> equal</span> <span class="Constant">&quot;delete&quot;</span> <span class="Comment">// Delete data and obtain the value deleted</span>
<span class="Statement">         read-hash</span> h<span class="Type"> key</span> (key)<span class="Type"> value</span> val<span class="Identifier"> delete</span><span class="Type"> status</span> st
<span class="Statement">         if-true</span> st<span class="Identifier"> equal</span> GG_ERR_EXIST
<span class="Statement">             @</span>Not found [<span class="Statement">&lt;&lt;p-out</span> key<span class="Statement">&gt;&gt;</span>]
<span class="Statement">         else-if</span>
             <span class="Comment">// If found, then delete key and value</span>
<span class="Statement">             @</span>Deleted [<span class="Statement">&lt;&lt;p-out</span> val<span class="Statement">&gt;&gt;</span>]
<span class="Statement">             delete-string</span> val
<span class="Statement">         end-if</span>
<span class="Statement">     else-if</span> op<span class="Identifier"> equal</span> <span class="Constant">&quot;query&quot;</span> <span class="Comment">// Query hash based on key value</span>
<span class="Statement">         read-hash</span> h<span class="Type"> key</span> (key)<span class="Type"> value</span> val<span class="Type"> status</span> st
<span class="Statement">         if-true</span> st<span class="Identifier"> equal</span> GG_ERR_EXIST
<span class="Statement">             @</span>Not found, queried [<span class="Statement">&lt;&lt;p-out</span> key<span class="Statement">&gt;&gt;</span>]
<span class="Statement">         else-if</span>
<span class="Statement">             @</span>Value [<span class="Statement">&lt;&lt;p-out</span> val<span class="Statement">&gt;&gt;</span>]
<span class="Statement">         end-if</span>
<span class="Statement">     end-if</span>
<span class="Statement"> %%</span></pre>
<span id=golf_copied_795 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_795' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_795, code_795, golf_copied_795)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Create and make the application, then run it as service:<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_791'>
// Create application
gg <span class="Special">-k</span> <span class="Statement">hash</span>
// Make application
gg <span class="Special">-q</span>
// Start application <span class="PreProc">(</span><span class="Special">single process key service</span><span class="PreProc">)</span>
mgrg <span class="Special">-w</span> <span class="Constant">1</span> <span class="Statement">hash</span></pre>
<span id=golf_copied_791 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_791' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_791, code_791, golf_copied_791)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Try it from a command line client (see <a href='/gg.html'>gg</a>):<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_793'>
// Add data
gg <span class="Special">-r</span> <span class="Special">--req</span><span class="Statement">=</span><span class="Statement">&quot;</span><span class="Constant">/keysrv/op=add/key=15/data=15</span><span class="Statement">&quot;</span> <span class="Special">--service</span> <span class="Special">--app</span><span class="Statement">=</span><span class="Statement">&quot;</span><span class="Constant">/hash</span><span class="Statement">&quot;</span> <span class="Special">--exec</span>
// Query data
gg <span class="Special">-r</span> <span class="Special">--req</span><span class="Statement">=</span><span class="Statement">&quot;</span><span class="Constant">/keysrv/op=query/key=15</span><span class="Statement">&quot;</span> <span class="Special">--service</span> <span class="Special">--app</span><span class="Statement">=</span><span class="Statement">&quot;</span><span class="Constant">/hash</span><span class="Statement">&quot;</span> <span class="Special">--exec</span>
// Delete data
gg <span class="Special">-r</span> <span class="Special">--req</span><span class="Statement">=</span><span class="Statement">&quot;</span><span class="Constant">/keysrv/op=delete/key=15</span><span class="Statement">&quot;</span> <span class="Special">--service</span> <span class="Special">--app</span><span class="Statement">=</span><span class="Statement">&quot;</span><span class="Constant">/hash</span><span class="Statement">&quot;</span> <span class="Special">--exec</span></pre>
<span id=golf_copied_793 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_793' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_793, code_793, golf_copied_793)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
See <a href='/read-hash.html'>read-hash</a> for more examples.<br/>
<!--BEFSAL13--><div class="vsub"><a id="See also"></a>See also</div>
 <a name='Hash'></a><span style="font-weight:bold;">Hash</span><br/>
<a href='/get-hash.html'>get-hash</a> &nbsp;<br/>
<a href='/new-hash.html'>new-hash</a> &nbsp;<br/>
<a href='/purge-hash.html'>purge-hash</a> &nbsp;<br/>
<a href='/read-hash.html'>read-hash</a> &nbsp;<br/>
<a href='/resize-hash.html'>resize-hash</a> &nbsp;<br/>
<a href='/write-hash.html'>write-hash</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='/documentation.html'>documentation</a><br/>
<a id='write-lifo.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:right;background-color:white;'><a href='https://golf-lang.com' style='border-bottom:0px'><img src='https://golf-lang.com/golf.png'/></a></div><div class='vhub' style='margin-top:10px;'>&nbsp;Write lifo</div><hr/><span style="font-weight:bold;">Purpose</span>: Write key/value pair into a LIFO list.<br/>
<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_796'>
<span class="Statement"> write-lifo</span> &lt;list&gt; \
    <span class="Identifier"> key</span> &lt;key&gt; \
    <span class="Identifier"> value</span> &lt;value&gt;</pre>
<span id=golf_copied_796 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_796' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_796, code_796, golf_copied_796)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
write-lifo adds a pair of key/value to the LIFO &lt;list&gt;, specified with strings &lt;key&gt; and &lt;value&gt; (in "key" and "value" clauses, collectively called an "element"). <br/>
<br/>
It always adds an element so that the last one written to &lt;list&gt; &nbsp;would be the first to be read with <a href='/read-lifo.html'>read-lifo</a>.<br/>
<div class="vsub"><a id="Examples"></a>Examples</div>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_797'>
<span class="Statement"> new-lifo</span> nf
<span class="Statement"> write-lifo</span> nf<span class="Identifier"> key</span> <span class="Constant">&quot;mykey&quot;</span><span class="Identifier"> value</span> <span class="Constant">&quot;myvalue&quot;</span></pre>
<span id=golf_copied_797 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_797' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_797, code_797, golf_copied_797)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<!--BEFSAL13--><div class="vsub"><a id="See also"></a>See also</div>
 <a name='LIFO'></a><span style="font-weight:bold;">LIFO</span><br/>
<a href='/delete-lifo.html'>delete-lifo</a> &nbsp;<br/>
<a href='/new-lifo.html'>new-lifo</a> &nbsp;<br/>
<a href='/purge-lifo.html'>purge-lifo</a> &nbsp;<br/>
<a href='/read-lifo.html'>read-lifo</a> &nbsp;<br/>
<a href='/rewind-lifo.html'>rewind-lifo</a> &nbsp;<br/>
<a href='/write-lifo.html'>write-lifo</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='/documentation.html'>documentation</a><br/>
<a id='write-list.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:right;background-color:white;'><a href='https://golf-lang.com' style='border-bottom:0px'><img src='https://golf-lang.com/golf.png'/></a></div><div class='vhub' style='margin-top:10px;'>&nbsp;Write list</div><hr/><span style="font-weight:bold;">Purpose</span>: Write key/value pair into a linked list.<br/>
<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_798'>
<span class="Statement"> write-list</span> &lt;list&gt;<span class="Identifier"> key</span> &lt;key&gt; \
    <span class="Identifier"> value</span> &lt;value&gt; \
     [<span class="Identifier"> append</span> [ &lt;append&gt; ] ]</pre>
<span id=golf_copied_798 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_798' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_798, code_798, golf_copied_798)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
write-list adds a pair of key/value strings to the linked &lt;list&gt;, specified with &lt;key&gt; and &lt;value&gt; (in "key" and "value" clauses, collectively called an "element"). <br/>
<br/>
The key/value pair is added just prior to the list's current position, thus becoming a current element. <br/>
<br/>
If "append" clause is used without boolean variable &lt;append&gt;, or if &lt;append&gt; evaluates to true, then the element is added at the end of the list, and the list's current element becomes the newly added one.<br/>
<div class="vsub"><a id="Examples"></a>Examples</div>
Add a key/value pair to the end of the list:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_800'>
<span class="Statement"> new-list</span> mylist
<span class="Statement"> write-list</span> mylist<span class="Identifier"> key</span> <span class="Constant">&quot;mykey&quot;</span><span class="Identifier"> value</span> <span class="Constant">&quot;myvalue&quot;</span><span class="Identifier"> append</span></pre>
<span id=golf_copied_800 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_800' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_800, code_800, golf_copied_800)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
The following is a list that is process-scoped, i.e. it is a linked-list server, which can add, delete, read and position to various elements:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_802'>
<span class="Statement"> %%</span> /llsrv<span class="Identifier"> public</span>
     <span class="Comment">// Create linked list just once for the life of the process</span>
<span class="Statement">     do-once</span>
<span class="Statement">     new-list</span> t<span class="Identifier"> process-scope</span>
<span class="Statement">     end-do-once</span>

     <span class="Comment">// Get input parameters</span>
<span class="Statement">     get-param</span> op
<span class="Statement">     get-param</span> key
<span class="Statement">     get-param</span> data

<span class="Statement">     if-true</span> op<span class="Identifier"> equal</span> <span class="Constant">&quot;add&quot;</span> <span class="Comment">// Add data to list</span>
         <span class="Comment">// Make a copy of key,data so they are Golf-allocated</span>
<span class="Statement">         write-list</span> t<span class="Identifier"> key</span> (key)<span class="Identifier"> value</span> data<span class="Identifier"> append</span>
<span class="Statement">         @</span>Added [<span class="Statement">&lt;&lt;p-out</span> key<span class="Statement">&gt;&gt;</span>] value [<span class="Statement">&lt;&lt;p-out</span> data<span class="Statement">&gt;&gt;</span>]

<span class="Statement">     else-if</span> op<span class="Identifier"> equal</span> <span class="Constant">&quot;delete&quot;</span> <span class="Comment">// Delete first data and obtain the value deleted</span>
<span class="Statement">         position-list</span> t<span class="Identifier"> first</span>
<span class="Statement">         read-list</span> t<span class="Type"> key</span> (key)<span class="Type"> value</span> val<span class="Type"> status</span> st
<span class="Statement">         if-true</span> st<span class="Identifier"> equal</span> GG_ERR_EXIST
<span class="Statement">             @</span>Not found
<span class="Statement">         else-if</span>
             <span class="Comment">// If found, then delete key and value</span>
<span class="Statement">             @</span>Deleted key [<span class="Statement">&lt;&lt;p-out</span> key<span class="Statement">&gt;&gt;</span>], [<span class="Statement">&lt;&lt;p-out</span> val<span class="Statement">&gt;&gt;</span>]
<span class="Statement">             delete-list</span> t
<span class="Statement">         end-if</span>

<span class="Statement">     else-if</span> op<span class="Identifier"> equal</span> <span class="Constant">&quot;next&quot;</span> <span class="Comment">// Position to next element</span>
<span class="Statement">         position-list</span> t<span class="Identifier"> next</span><span class="Type"> status</span> st
<span class="Statement">         if-true</span> st<span class="Identifier"> equal</span> GG_OKAY
<span class="Statement">             @</span>Okay
<span class="Statement">         else-if</span>
<span class="Statement">             @</span>Not found
<span class="Statement">         end-if</span>

<span class="Statement">     else-if</span> op<span class="Identifier"> equal</span> <span class="Constant">&quot;last&quot;</span> <span class="Comment">// Position to last element</span>
<span class="Statement">         position-list</span> t<span class="Identifier"> last</span><span class="Type"> status</span> st
<span class="Statement">         if-true</span> st<span class="Identifier"> equal</span> GG_OKAY
<span class="Statement">             @</span>Okay
<span class="Statement">         else-if</span>
<span class="Statement">             @</span>Not found
<span class="Statement">         end-if</span>

<span class="Statement">     else-if</span> op<span class="Identifier"> equal</span> <span class="Constant">&quot;previous&quot;</span> <span class="Comment">// Position to element</span>
<span class="Statement">         position-list</span> t<span class="Identifier"> previous</span><span class="Type"> status</span> st
<span class="Statement">         if-true</span> st<span class="Identifier"> equal</span> GG_OKAY
<span class="Statement">             @</span>Okay
<span class="Statement">         else-if</span>
<span class="Statement">             @</span>Not found
<span class="Statement">         end-if</span>

<span class="Statement">     else-if</span> op<span class="Identifier"> equal</span> <span class="Constant">&quot;first&quot;</span> <span class="Comment">// Get first element</span>
<span class="Statement">         position-list</span> t<span class="Identifier"> first</span><span class="Type"> status</span> st
<span class="Statement">         if-true</span> st<span class="Identifier"> equal</span> GG_OKAY
<span class="Statement">             @</span>Okay
<span class="Statement">         else-if</span>
<span class="Statement">             @</span>Not found
<span class="Statement">         end-if</span>

<span class="Statement">     else-if</span> op<span class="Identifier"> equal</span> <span class="Constant">&quot;query&quot;</span> <span class="Comment">// Get current element</span>
<span class="Statement">         read-list</span> t<span class="Type"> key</span> (key)<span class="Type"> value</span> val<span class="Type"> status</span> st
<span class="Statement">         if-true</span> st<span class="Identifier"> equal</span> GG_ERR_EXIST
<span class="Statement">             @</span>Not found
<span class="Statement">         else-if</span>
<span class="Statement">             @</span>Key [<span class="Statement">&lt;&lt;p-out</span> key<span class="Statement">&gt;&gt;</span>], value [<span class="Statement">&lt;&lt;p-out</span> val<span class="Statement">&gt;&gt;</span>]
<span class="Statement">         end-if</span>

<span class="Statement">     else-if</span> op<span class="Identifier"> equal</span> <span class="Constant">&quot;purge&quot;</span> <span class="Comment">// remove all, keep the list</span>
<span class="Statement">         purge-list</span> t
<span class="Statement">     end-if</span>
<span class="Statement"> %%</span></pre>
<span id=golf_copied_802 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_802' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_802, code_802, golf_copied_802)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Create application:<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_799'>
sudo mgrg <span class="Special">-i</span> <span class="Special">-u</span> <span class="PreProc">$(</span><span class="Special">whoami</span><span class="PreProc">)</span> linkserver</pre>
<span id=golf_copied_799 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_799' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_799, code_799, golf_copied_799)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Start the server:<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_801'>
mgrg <span class="Special">-w</span> <span class="Constant">1</span> linkserver</pre>
<span id=golf_copied_801 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_801' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_801, code_801, golf_copied_801)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Try it out:<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_803'>
gg <span class="Special">-r</span> <span class="Special">--req</span><span class="Statement">=</span><span class="Statement">&quot;</span><span class="Constant">/llsrv/op=add/key=1/data=1</span><span class="Statement">&quot;</span> <span class="Special">--exec</span> <span class="Special">--service</span>
gg <span class="Special">-r</span> <span class="Special">--req</span><span class="Statement">=</span><span class="Statement">&quot;</span><span class="Constant">/llsrv/op=add/key=2/data=2</span><span class="Statement">&quot;</span> <span class="Special">--exec</span> <span class="Special">--service</span>
gg <span class="Special">-r</span> <span class="Special">--req</span><span class="Statement">=</span><span class="Statement">&quot;</span><span class="Constant">/llsrv/op=query</span><span class="Statement">&quot;</span> <span class="Special">--exec</span> <span class="Special">--service</span>
gg <span class="Special">-r</span> <span class="Special">--req</span><span class="Statement">=</span><span class="Statement">&quot;</span><span class="Constant">/llsrv/op=previous</span><span class="Statement">&quot;</span> <span class="Special">--exec</span> <span class="Special">--service</span>
gg <span class="Special">-r</span> <span class="Special">--req</span><span class="Statement">=</span><span class="Statement">&quot;</span><span class="Constant">/llsrv/op=query</span><span class="Statement">&quot;</span> <span class="Special">--exec</span> <span class="Special">--service</span></pre>
<span id=golf_copied_803 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_803' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_803, code_803, golf_copied_803)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<!--BEFSAL13--><div class="vsub"><a id="See also"></a>See also</div>
 <a name='Linked list'></a><span style="font-weight:bold;">Linked list</span><br/>
<a href='/delete-list.html'>delete-list</a> &nbsp;<br/>
<a href='/get-list.html'>get-list</a> &nbsp;<br/>
<a href='/new-list.html'>new-list</a> &nbsp;<br/>
<a href='/position-list.html'>position-list</a> &nbsp;<br/>
<a href='/purge-list.html'>purge-list</a> &nbsp;<br/>
<a href='/read-list.html'>read-list</a> &nbsp;<br/>
<a href='/write-list.html'>write-list</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='/documentation.html'>documentation</a><br/>
<a id='write-message.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:right;background-color:white;'><a href='https://golf-lang.com' style='border-bottom:0px'><img src='https://golf-lang.com/golf.png'/></a></div><div class='vhub' style='margin-top:10px;'>&nbsp;Write message</div><hr/><span style="font-weight:bold;">Purpose</span>: Write key/value to a message.<br/>
<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_804'>
<span class="Statement"> write-message</span> &lt;message&gt; <span class="Identifier"> key</span> &lt;key&gt;<span class="Identifier"> value</span> &lt;value&gt;</pre>
<span id=golf_copied_804 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_804' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_804, code_804, golf_copied_804)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
write-message will append to &lt;message&gt; a key/value pair, in the form of string &lt;key&gt; (in "key" clause) and string &lt;value&gt; (in "value" clause). <br/>
<br/>
&lt;message&gt; must have been created with <a href='/new-message.html'>new-message</a>. In order to use write-message, a message must not have been read from (see <a href='/read-message.html'>read-message</a>). <br/>
<div class="vsub"><a id="Examples"></a>Examples</div>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_805'>
<span class="Statement"> new-message</span> msg
<span class="Statement"> write-message</span> msg<span class="Identifier"> key</span> <span class="Constant">&quot;key1&quot;</span><span class="Identifier"> value</span> <span class="Constant">&quot;value1&quot;</span></pre>
<span id=golf_copied_805 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_805' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_805, code_805, golf_copied_805)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<!--BEFSAL13--><div class="vsub"><a id="See also"></a>See also</div>
 <a name='Messages'></a><span style="font-weight:bold;">Messages</span><br/>
<a href='/get-message.html'>get-message</a> &nbsp;<br/>
<a href='/new-message.html'>new-message</a> &nbsp;<br/>
<a href='/read-message.html'>read-message</a> &nbsp;<br/>
<a href='/SEMI.html'>SEMI</a> &nbsp;<br/>
<a href='/write-message.html'>write-message</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='/documentation.html'>documentation</a><br/>
<a id='write-string.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:right;background-color:white;'><a href='https://golf-lang.com' style='border-bottom:0px'><img src='https://golf-lang.com/golf.png'/></a></div><div class='vhub' style='margin-top:10px;'>&nbsp;Write string</div><hr/><span style="font-weight:bold;">Purpose</span>: Create complex strings.<br/>
<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_807'>
<span class="Statement"> write-string</span> &lt;string&gt;

 &lt;any code&gt;

<span class="Statement"> end-write-string</span> [<span class="Identifier"> notrim</span> ]</pre>
<span id=golf_copied_807 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_807' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_807, code_807, golf_copied_807)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Output of any Golf code can be written into &lt;string&gt; with write-string. In between write-string and end-write-string you can write &lt;any Golf code&gt;. For instance you can use database queries, conditional statements etc., just as you would for any other Golf code. <br/>
<div class="vsub"><a id="Shortcut code"></a>Shortcut code</div>
Note that instead of write-string you can also use a shortcut "((" &nbsp;(and instead of end-write-string you can use "))" &nbsp;), for example here a string "fname" holds a full path of a file named "config-install.golf" under the application home directory (see <a href='/directories.html'>directories</a>):<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_809'>
<span class="Statement"> get-app</span><span class="Identifier"> directory</span><span class="Type"> to</span> home_dir
<span class="Statement"> ((</span> fname
<span class="Statement"> @</span><span class="Statement">&lt;&lt;p-out</span> home_dir<span class="Statement">&gt;&gt;</span>/config-install.golf
<span class="Statement"> ))</span></pre>
<span id=golf_copied_809 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_809' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_809, code_809, golf_copied_809)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<div class="vsub"><a id="Trimming"></a>Trimming</div>
Just like with all other Golf code, every line is trimmed both on left and write, so this:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_811'>
<span class="Statement"> ((</span> mystr
<span class="Statement"> @</span>Some string
<span class="Statement"> ))</span></pre>
<span id=golf_copied_811 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_811' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_811, code_811, golf_copied_811)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
is the same as:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_813'>
<span class="Statement"> ((</span> mystr
<span class="Statement">         @</span>Some string &lt;whitespaces&gt;
<span class="Statement"> ))</span></pre>
<span id=golf_copied_813 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_813' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_813, code_813, golf_copied_813)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
write-string (or "((") statement must always be on a line by itself (and so does end-write-string, or "))" statement). The string being built starts with the line following write-string, and ends with the line immediately prior to end-write-string. <br/>
<br/>
All trailing empty lines are removed, for example:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_815'>
<span class="Statement"> ((</span> mystr
<span class="Statement">         @</span>My string
<span class="Statement">         @</span>
<span class="Statement">         @</span>
<span class="Statement"> ))</span></pre>
<span id=golf_copied_815 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_815' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_815, code_815, golf_copied_815)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
the above string would have two trailing empty lines, however they will be removed. If you want to skip trimming the trailing whitespaces, use "notrim" clause in end-write-string.<br/>
<div class="vsub"><a id="Examples"></a>Examples</div>
<span style="font-weight:bold;">- Simple</span><br/>
A simple example:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_817'>
<span class="Statement"> set-string</span> my_str=<span class="Constant">&quot;world&quot;</span>
<span class="Statement"> set-string</span> my_str1=<span class="Constant">&quot;and have a nice day too!&quot;</span>

<span class="Statement"> write-string</span> result_str
<span class="Statement"> @</span>Hello <span class="Statement">&lt;&lt;p-out</span> my_str<span class="Statement">&gt;&gt;</span> (<span class="Statement">&lt;&lt;p-out</span> my_str1<span class="Statement">&gt;&gt;</span>)
<span class="Statement"> end-write-string</span>

<span class="Statement"> p-out</span> result_str</pre>
<span id=golf_copied_817 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_817' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_817, code_817, golf_copied_817)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
The output is <br/>
<div class='ncode' style='position:relative;padding-right:16px;'>
<pre id='code_808'>
Hello world (and have a nice day too!)</pre>
<span id=golf_copied_808 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_808' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_808, code_808, golf_copied_808)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<br/>
<span style="font-weight:bold;">- Using code inside</span><br/>
Here is using Golf code inside write-string, including database query and conditional statements to produce different strings at run-time:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_819'>
<span class="Statement"> get-param</span> selector

<span class="Statement"> set-string</span> my_str=<span class="Constant">&quot;world&quot;</span>

<span class="Statement"> write-string</span> result_str
<span class="Statement">     if-true</span> selector<span class="Identifier"> equal</span> <span class="Constant">&quot;simple&quot;</span>
<span class="Statement">         @</span>Hello <span class="Statement">&lt;&lt;p-out</span> my_string<span class="Statement">&gt;&gt;</span> (and have a nice day too!)
<span class="Statement">     else-if</span> selector<span class="Identifier"> equal</span> <span class="Constant">&quot;database&quot;</span>
<span class="Statement">         run-query</span> @db=<span class="Constant">&quot;select name from employee&quot;</span><span class="Type"> output</span> name
<span class="Statement">             @</span>Hello <span class="Statement">&lt;&lt;p-out</span> name<span class="Statement">&gt;&gt;</span>
<span class="Statement">             @</span>&lt;br/&gt;
<span class="Statement">         end-query</span>
<span class="Statement">     else-if</span>
<span class="Statement">         @</span>No message
<span class="Statement">     end-if</span>
<span class="Statement"> end-write-string</span>

<span class="Statement"> p-out</span> result_str</pre>
<span id=golf_copied_819 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_819' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_819, code_819, golf_copied_819)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
If selector variable is "simple", as in URL <br/>
<div class='ncode' style='position:relative;padding-right:16px;'>
<pre id='code_810'>
https://mysite.com/&lt;app name&gt;/some-service?selector=simple</pre>
<span id=golf_copied_810 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_810' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_810, code_810, golf_copied_810)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
the result is <br/>
<div class='ncode' style='position:relative;padding-right:16px;'>
<pre id='code_812'>
Hello world (and have a nice day too!)</pre>
<span id=golf_copied_812 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_812' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_812, code_812, golf_copied_812)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
If selector variable is "database", as in URL <br/>
<div class='ncode' style='position:relative;padding-right:16px;'>
<pre id='code_814'>
https://mysite.com/&lt;app name&gt;/some-service?selector=database</pre>
<span id=golf_copied_814 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_814' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_814, code_814, golf_copied_814)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
the result may be (assuming "Linda" and "John" are the two employees selected):<br/>
<div class='ncode' style='position:relative;padding-right:16px;'>
<pre id='code_816'>
Hello Linda
&lt;br/&gt;
Hello John
&lt;br/&gt;</pre>
<span id=golf_copied_816 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_816' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_816, code_816, golf_copied_816)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
If selector variable is anything else, as in URL <br/>
<div class='ncode' style='position:relative;padding-right:16px;'>
<pre id='code_818'>
https://mysite.com/&lt;app name&gt;/some-service?selector=something_else</pre>
<span id=golf_copied_818 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_818' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_818, code_818, golf_copied_818)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
the result is <br/>
<div class='ncode' style='position:relative;padding-right:16px;'>
<pre id='code_820'>
No message</pre>
<span id=golf_copied_820 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_820' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_820, code_820, golf_copied_820)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<span style="font-weight:bold;">- Using call-handlers calls inside</span><br/>
The following uses a call-handler inside write-string:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_821'>
<span class="Statement"> set-string</span> result_str=<span class="Constant">&quot;&quot;</span>
<span class="Statement"> write-string</span> result_str
<span class="Statement">     @</span><span class="Statement">&lt;&lt;p-out</span> <span class="Constant">&quot;Result from other-service&quot;</span><span class="Statement">&gt;&gt;</span> is <span class="Statement">&lt;&lt;call-handler</span> <span class="Constant">&quot;/other-service&quot;</span><span class="Statement">&gt;&gt;</span>
<span class="Statement"> end-write-string</span>
<span class="Statement"> p-out</span> result_str</pre>
<span id=golf_copied_821 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_821' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_821, code_821, golf_copied_821)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
The "other-service" may be:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_823'>
<span class="Statement"> begin-handler</span> /other-service<span class="Identifier"> public</span>
<span class="Statement">     @</span>&quot;Hello from other service&quot;
<span class="Statement"> end-handler</span></pre>
<span id=golf_copied_823 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_823' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_823, code_823, golf_copied_823)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
The output:<br/>
<div class='ncode' style='position:relative;padding-right:16px;'>
<pre id='code_822'>
Result from other-service is Hello from other service</pre>
<span id=golf_copied_822 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_822' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_822, code_822, golf_copied_822)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<br/>
<span style="font-weight:bold;">- Nesting</span><br/>
An example to nest write-strings:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_806'>
<span class="Statement"> write-string</span> str1
<span class="Statement">     @</span>Hi!
<span class="Statement">     write-string</span> str2
<span class="Statement">         @</span>Hi Again!
<span class="Statement">    end-write-string</span>
<span class="Statement">    p-out</span> str2
<span class="Statement"> end-write-string</span>
<span class="Statement"> p-out</span> str1</pre>
<span id=golf_copied_806 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_806' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_806, code_806, golf_copied_806)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
The result is <br/>
<div class='ncode' style='position:relative;padding-right:16px;'>
<pre id='code_824'>
Hi!
Hi Again!</pre>
<span id=golf_copied_824 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_824' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_824, code_824, golf_copied_824)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<!--BEFSAL13--><div class="vsub"><a id="See also"></a>See also</div>
 <a name='Strings'></a><span style="font-weight:bold;">Strings</span><br/>
<a href='/copy-string.html'>copy-string</a> &nbsp;<br/>
<a href='/count-substring.html'>count-substring</a> &nbsp;<br/>
<a href='/delete-string.html'>delete-string</a> &nbsp;<br/>
<a href='/lower-string.html'>lower-string</a> &nbsp;<br/>
<a href='/read-split.html'>read-split</a> &nbsp;<br/>
<a href='/replace-string.html'>replace-string</a> &nbsp;<br/>
<a href='/set-string.html'>set-string</a> &nbsp;<br/>
<a href='/split-string.html'>split-string</a> &nbsp;<br/>
<a href='/string-length.html'>string-length</a> &nbsp;<br/>
<a href='/trim-string.html'>trim-string</a> &nbsp;<br/>
<a href='/upper-string.html'>upper-string</a> &nbsp;<br/>
<a href='/write-string.html'>write-string</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='/documentation.html'>documentation</a><br/>
<a id='write-tree.html'></a>
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:right;background-color:white;'><a href='https://golf-lang.com' style='border-bottom:0px'><img src='https://golf-lang.com/golf.png'/></a></div><div class='vhub' style='margin-top:10px;'>&nbsp;Write tree</div><hr/><span style="font-weight:bold;">Purpose</span>: Insert a key/value pair into a tree.<br/>
<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_825'>
<span class="Statement"> write-tree</span> &lt;tree&gt;<span class="Identifier"> key</span> &lt;key&gt;<span class="Identifier"> value</span> &lt;value&gt; \
     [<span class="Type"> status</span> &lt;status&gt; ] \
     [<span class="Type"> new-cursor</span> &lt;cursor&gt; ]</pre>
<span id=golf_copied_825 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_825' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_825, code_825, golf_copied_825)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
write-tree inserts string &lt;key&gt; and associated string &lt;value&gt; into &lt;tree&gt; created by <a href='/new-tree.html'>new-tree</a>.<br/>
<br/>
If &lt;key&gt; already exists in &lt;tree&gt;, &lt;status&gt; (in "status" clause) will be GG_ERR_EXIST and nothing is inserted into &lt;tree&gt;, otherwise it is GG_OKAY.<br/>
<br/>
If "new-cursor" clause is used, then a &lt;cursor&gt; will be positioned on a newly inserted tree node. You can use <a href='/use-cursor.html'>use-cursor</a> to iterate to nodes with lesser and greater key values.<br/>
<div class="vsub"><a id="Examples"></a>Examples</div>
Insert key "k" with value "d" into "mytree", and obtain status in "st":<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_828'>
<span class="Statement"> write-tree</span> mytree<span class="Identifier"> key</span> k<span class="Identifier"> value</span> d<span class="Type"> status</span> st</pre>
<span id=golf_copied_828 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_828' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_828, code_828, golf_copied_828)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
The following is an example of a process-scoped tree. Such a tree keeps its data across the requests, for as long as the process is alive.<br/>
<br/>
In a new directory, create file treesrv.golf and copy to it:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_830'>
<span class="Statement"> %%</span> /treesrv<span class="Identifier"> public</span>
<span class="Statement">     do-once</span>
<span class="Statement">     new-tree</span> t<span class="Identifier"> process-scope</span>
<span class="Statement">     end-do-once</span>

     <span class="Comment">// Get input parameters</span>
<span class="Statement">     get-param</span> op
<span class="Statement">     get-param</span> key
<span class="Statement">     get-param</span> data

<span class="Statement">     if-true</span> op<span class="Identifier"> equal</span> <span class="Constant">&quot;add&quot;</span> <span class="Comment">// Add data to tree</span>
<span class="Statement">         write-tree</span> t<span class="Identifier"> key</span> (key)<span class="Identifier"> value</span> data<span class="Type"> status</span> st
<span class="Statement">         if-true</span> st<span class="Identifier"> equal</span> GG_OKAY
<span class="Statement">             @</span>Added [<span class="Statement">&lt;&lt;p-out</span> key<span class="Statement">&gt;&gt;</span>]
<span class="Statement">         else-if</span>
<span class="Statement">             @</span>Key exists
<span class="Statement">         end-if</span>
<span class="Statement">     else-if</span> op<span class="Identifier"> equal</span> <span class="Constant">&quot;delete&quot;</span> <span class="Comment">// Delete data and obtain the value deleted</span>
<span class="Statement">         delete-tree</span> t<span class="Identifier"> key</span> (key)<span class="Type"> value</span> val<span class="Type"> status</span> st
<span class="Statement">         if-true</span> st<span class="Identifier"> equal</span> GG_ERR_EXIST
<span class="Statement">             @</span>Not found [<span class="Statement">&lt;&lt;p-out</span> key<span class="Statement">&gt;&gt;</span>]
<span class="Statement">         else-if</span>
             <span class="Comment">// If found, then delete key and value</span>
<span class="Statement">             @</span>Deleted [<span class="Statement">&lt;&lt;p-out</span> val<span class="Statement">&gt;&gt;</span>]
<span class="Statement">             delete-string</span> val
<span class="Statement">         end-if</span>
<span class="Statement">     else-if</span> op<span class="Identifier"> equal</span> <span class="Constant">&quot;query&quot;</span> <span class="Comment">// Query tree based on key value</span>
<span class="Statement">         read-tree</span> t<span class="Identifier"> equal</span> (key)<span class="Type"> value</span> val<span class="Type"> status</span> st
<span class="Statement">         if-true</span> st<span class="Identifier"> equal</span> GG_ERR_EXIST
<span class="Statement">             @</span>Not found, queried [<span class="Statement">&lt;&lt;p-out</span> key<span class="Statement">&gt;&gt;</span>]
<span class="Statement">         else-if</span>
<span class="Statement">             @</span>Value [<span class="Statement">&lt;&lt;p-out</span> val<span class="Statement">&gt;&gt;</span>]
<span class="Statement">         end-if</span>
<span class="Statement">     end-if</span>
<span class="Statement"> %%</span></pre>
<span id=golf_copied_830 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_830' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_830, code_830, golf_copied_830)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Create new application ("pt" for "process tree"):<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_827'>
sudo mgrg <span class="Special">-i</span> <span class="Special">-u</span> <span class="PreProc">$(</span><span class="Special">whoami</span><span class="PreProc">)</span> pt</pre>
<span id=golf_copied_827 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_827' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_827, code_827, golf_copied_827)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Build application:<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_829'>
gg <span class="Special">-q</span></pre>
<span id=golf_copied_829 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_829' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_829, code_829, golf_copied_829)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Run the tree service:<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_831'>
mgrg <span class="Special">-w</span> <span class="Constant">1</span> pt</pre>
<span id=golf_copied_831 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_831' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_831, code_831, golf_copied_831)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Try it out, add key/value pairs, query, delete, query again:<br/>
<div class='ncode' style='position:relative;padding-right:16px;'>
<pre id='code_826'>
# Add key=1 and data=d1
$ gg -r --req=&quot;/treesrv/op=add/key=1/data=d1&quot; --service --exec --silent-header
Added [1]

# Add key=2 and data=d2
$ gg -r --req=&quot;/treesrv/op=add/key=2/data=d2&quot; --service --exec --silent-header
Added [2]

# Query key=1
$ gg -r --req=&quot;/treesrv/op=query/key=1&quot; --service --exec --silent-header
Value [d1]

# Query key=2
i$ gg -r --req=&quot;/treesrv/op=query/key=2&quot; --service --exec --silent-header
Value [d2]

# Delete key=2
$ gg -r --req=&quot;/treesrv/op=delete/key=2&quot; --service --exec --silent-header
Deleted [d2]

# Query key=2
$ gg -r --req=&quot;/treesrv/op=query/key=2&quot; --service --exec --silent-header
Not found, queried [2]</pre>
<span id=golf_copied_826 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='golft_826' style='position: absolute;left: -500%;'></textarea>
<img src='https://golf-lang.com/golf-copy-small-1.png' id='golfb' onclick='gg_copy(golft_826, code_826, golf_copied_826)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
See <a href='/read-tree.html'>read-tree</a> for more examples.<br/>
<!--BEFSAL13--><div class="vsub"><a id="See also"></a>See also</div>
 <a name='Tree'></a><span style="font-weight:bold;">Tree</span><br/>
<a href='/delete-tree.html'>delete-tree</a> &nbsp;<br/>
<a href='/get-tree.html'>get-tree</a> &nbsp;<br/>
<a href='/new-tree.html'>new-tree</a> &nbsp;<br/>
<a href='/purge-tree.html'>purge-tree</a> &nbsp;<br/>
<a href='/read-tree.html'>read-tree</a> &nbsp;<br/>
<a href='/use-cursor.html'>use-cursor</a> &nbsp;<br/>
<a href='/write-tree.html'>write-tree</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='/documentation.html'>documentation</a><br/>
<br/><div style='width:100%;clear:both;'>
<hr/>
<!--GOLFFOOT77--><span style='font-size:80%'><a href="/copyright.html">Copyright</a> (c) 2019-2025 Gliim LLC. All contents on this web site is "AS IS" without warranties or guarantees of any kind.</span>
</div><br/></body></html>


