<!DOCTYPE html>
<html lang="en">

<head>
<!--__RIM_REDIRECT__-->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Quicksand:wght@300..700&display=swap" rel="stylesheet">

<title>Database config file</title>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
<meta name="HandheldFriendly" content="True"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<link rel="canonical" href="https://rimstone-lang.com/database-config-file.html" />
<style>


body, html {
    font-family: Quicksand,monospace,Helvetica, Arial, sans-serif;
    line-height: 150%;
    font-size:16px;
}

body {
    padding-left:1vw;
    padding-right:1vw;
}
    
.ncode {
    letter-spacing: 0px;
    font-family: monospace;
    font-size:83%;
    display:inline-block;
    max-width:99%;
    min-width:90%;
    margin:0;
    padding:0;
    padding-left:5px;
    padding-top:3px;
    padding-bottom:3px;
    margin-bottom:8px;
    margin-top:8px;
    border: 2px solid #d6d6d6;
    background-color:#f5f7f4;
    white-space:nowrap;
}

.shcode {
    letter-spacing: 0px;
    font-family: monospace;
    font-size:83%;
    display:inline-block;
    max-width:99%;
    min-width:90%;
    margin:0;
    padding:0;
    padding-left:5px;
    padding-top:3px;
    padding-bottom:3px;
    margin-bottom:8px;
    margin-top:8px;
    border: 2px solid #d6d6d6;
    background-color:#f5f7f4;
    white-space:nowrap;
}

.sqlcode {
    letter-spacing: 0px;
    font-family: monospace;
    font-size:83%;
    display:inline-block;
    max-width:99%;
    min-width:90%;
    margin:0;
    padding:0;
    padding-left:5px;
    padding-top:3px;
    padding-bottom:3px;
    margin-bottom:8px;
    margin-top:8px;
    border: 2px solid #d6d6d6;
    background-color:#f5f7f4;
    white-space:nowrap;
}

.htmlcode {
    letter-spacing: 0px;
    font-family: monospace;
    font-size:83%;
    display:inline-block;
    max-width:99%;
    min-width:90%;
    margin:0;
    padding:0;
    padding-left:5px;
    padding-top:3px;
    padding-bottom:3px;
    margin-bottom:8px;
    margin-top:8px;
    border: 2px solid #d6d6d6;
    background-color:#f5f7f4;
    white-space:nowrap;
}

.code {
    letter-spacing: 0px;
    font-family: monospace;
    font-size:83%;
    display:inline-block;
    max-width:99%;
    min-width:90%;
    margin:0;
    padding:0;
    padding-left:5px;
    padding-top:3px;
    padding-bottom:3px;
    margin-bottom:8px;
    margin-top:8px;
    border: 2px solid #d6d6d6;
    background-color:#f5f7f4;
    white-space:nowrap;
}

/*Just like h1 but for pdf conversion it would be indented this way it's not*/
.vhub {
    display: block;
   font-size: 1.6em;
   margin-top: 0.63em;
   margin-bottom: 0.63em;
   margin-left: 0;
   margin-right: 0;
   font-weight: bold;
}

/*Just like h2 but for pdf conversion it would be indented this way it's not*/
.vsub {
    display: block;
   font-size: 1.25em;
   margin-top: 0.53em;
   margin-bottom: 0.53em;
   margin-left: 0;
   margin-right: 0;
   font-weight: bold;
}

ul {
  margin-left: 0.75vw;
  padding-left: 0;
}
li {
  margin-left: 0.75vw;
  padding-left: 0;
}

/* this must be last, as it overrides previous settings, for mobile */
@media (hover: none) {
a {
   display: inline-block;
   padding-top: 3px;
   padding-bottom: 2px;
}
body {
    padding-left:2vw;
    padding-right:2vw;
    letter-spacing: 1px;
}
}

/*The following is for code snippets that are highlighted by 2html vim*/
pre { overflow-x: scroll; margin:0; padding:0; font-family:monospace; }
.Identifier { color: #008b8b; }
.Statement { color: #af5f00; }
.PreProc { color: #5fd7ff; }
.Type { color: #005f00; }
.Comment { color: blue ; }
.Constant { color: #ff00ff; }
/*end of highlighted snippets*/

a {
    text-decoration:none;
    padding-bottom: 0px; 
    color:inherit;
    border-bottom: 2px solid #6cb8f0;
}
a:hover {
    text-decoration: none;
    color:black;
    border-bottom: 1px solid red;
}
/*do not underline links nor should they be active*/
pre a {
    text-decoration:none;
    color:black;
    border-bottom: none;
    pointer-events: none;
    cursor: default;
}


.golfSnippet {display:none;}

ul {
  list-style-type:square;
  list-style-position: outside;
}

</style>


</head>
<body>
<div id="google_translate_element" style='float:right'></div>
<script type="text/javascript" src="//translate.google.com/translate_a/element.js?cb=googleTranslateElementInit"></script>
<script>
function rim_copy(gt, eid, gc) {
  gt.textContent = eid.textContent;
  gt.select();
  document.execCommand("copy");
  gc.style.visibility="visible"
  setTimeout(()=>{ gc.style.visibility="hidden"; }, 1000);
}
function googleTranslateElementInit() {
   new google.translate.TranslateElement({pageLanguage: 'en'}, 'google_translate_element');
}

</script>

<!--RIMMENU13-->

<!--RIMENDMENU13-->



<!--BEGVDOC90-->
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:left;background-color:white;'><a href='https://rimstone-lang.com' style='border-bottom:0px'><img src='https://rimstone-lang.com/rimstone.png' style='width:180px;height:auto'/></a></div><div class='vhub' style='margin-top:10px;'>Database config file</div><hr/>RimStone application can use any number of databases, with each specified by a database configuration file. This file provides database name, login and connection settings and preferences.<br/>
<br/>
When making a RimStone application, you specify a database vendor and the database configuration file for each database your application uses (see <a href='https://rimstone-lang.com/rim.html'>rim</a>), for instance:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_520' class=notranslate>
rim ... --db=<span class="Constant">&quot;mariadb:db1 postgres:db2 sqlite:db3&quot;</span>  ...</pre>
<span id=rimstone_copied_520 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_520' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_520, code_520, rimstone_copied_520)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
in which case there are three database configuration files (db1, db2 and db3), with db1 being MariaDB, db2 being PostgreSQL and db3 being SQLite database.<br/>
<br/>
You must create a database configuration file for each database your application uses, and this file must be placed with your source code. Such file will be copied to locations specified and used by RimStone to connect to database(s) (see <a href='https://rimstone-lang.com/directories.html'>directories</a>). <br/>
<br/>
Each such file contains connection information and authentication to a database, which RimStone uses to login. The names of these configuration files are used in queries. There is no limit on how many databases can be used in your application and those from different vendors can be used in the same application.<br/>
<br/>
An example of database configuration file (in this case MariaDB):<br/>
<div class='ncode' style='position:relative;padding-right:16px;'>
<pre id='code_519' class=notranslate>
[client]
user=mydbuser
password=somepwd
database=mydbname
protocol=TCP
host=127.0.0.1
port=3306</pre>
<span id=rimstone_copied_519 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_519' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_519, code_519, rimstone_copied_519)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<div class="vsub"><a id="Using in your queries"></a>Using in your queries</div>
Database statements that perform queries (such as <a href='https://rimstone-lang.com/run-query.html'>run-query</a>) must specify the database configuration file used, unless your application uses only a single database. Such configuration is given by "@&lt;database config file&gt;" (for instance in <a href='https://rimstone-lang.com/run-query.html'>run-query</a> or <a href='https://rimstone-lang.com/begin-transaction.html'>begin-transaction</a>). For example, in:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_523' class=notranslate>
<span class="Statement">run-query</span> @mydb=<span class="Constant">&quot;select name from employees&quot;</span>
<span class="Statement">.</span>..
<span class="Statement">end-query</span></pre>
<span id=rimstone_copied_523 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_523' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_523, code_523, rimstone_copied_523)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
the query is performed on a database specified by the configuration file "mydb", as in (assuming it's PostgreSQL database):<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_526' class=notranslate>
rim ... --db=<span class="Constant">&quot;postgres:mydb&quot;</span>  ...</pre>
<span id=rimstone_copied_526 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_526' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_526, code_526, rimstone_copied_526)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
You do not need to manually connect to the database; when your application uses it for the first time, a connection is automatically established, and lost connection is automatically re-established when needed. <br/>
<br/>
If a database is the only one used by your application, you can omit it, as in:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_528' class=notranslate>
<span class="Statement">run-query</span> =<span class="Constant">&quot;select name from employees&quot;</span>
<span class="Statement">.</span>..
<span class="Statement">end-query</span></pre>
<span id=rimstone_copied_528 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_528' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_528, code_528, rimstone_copied_528)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<div class="vsub"><a id="Connection settings"></a>Connection settings</div>
The contents of a configuration file depends on the database used:<br/>
<ul><li>MariaDB: see <a href='https://rimstone-lang.com/mariadb-database.html'>mariadb-database</a><br/>
</li><li>Postgres: see <a href='https://rimstone-lang.com/postgresql-database.html'>postgresql-database</a><br/>
</li><li>SQLite: see <a href='https://rimstone-lang.com/sqlite-database.html'>sqlite-database</a><br/>
</li></ul>
<div class="vsub"><a id="Substituting environment variables"></a>Substituting environment variables</div>
You can use environment variables in database configuration files by means of substitution, in the form of "${VAR_NAME}". For example in file "mydb":<br/>
<div class='ncode' style='position:relative;padding-right:16px;'>
<pre id='code_522' class=notranslate>
[client]
user=${DB_USER}
password=${DB_PWD}
database=${DB_NAME}
protocol=TCP
host=127.0.0.1
port=${DB_PORT}</pre>
<span id=rimstone_copied_522 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_522' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_522, code_522, rimstone_copied_522)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Here, environment variables DB_USER, DB_PWD, DB_NAME and DB_PORT are used. They must be defined in the shell environment prior to calling <a href='https://rimstone-lang.com/rim.html'>rim</a> to make your application (if not defined the value will be empty):<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_521' class=notranslate>
<span class="Comment">#Define environment variables for a configuration file</span>
<span class="Statement">export</span> <span class="Identifier">DB_USER</span>=<span class="Statement">&quot;</span><span class="Constant">my_user</span><span class="Statement">&quot;</span>
<span class="Statement">export</span> <span class="Identifier">DB_PWD</span>=<span class="Statement">&quot;</span><span class="Constant">my_password</span><span class="Statement">&quot;</span>
<span class="Statement">export</span> <span class="Identifier">DB_NAME</span>=<span class="Statement">&quot;</span><span class="Constant">my_database</span><span class="Statement">&quot;</span>
<span class="Statement">export</span> <span class="Identifier">DB_PORT</span>=<span class="Statement">&quot;</span><span class="Constant">3307</span><span class="Statement">&quot;</span>

<span class="Comment">#Make application using the above database configuration file with the environment variables specified</span>
rim <span class="Special">-q</span> <span class="Special">--db</span><span class="Statement">=</span>mariadb:mydb</pre>
<span id=rimstone_copied_521 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_521' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_521, code_521, rimstone_copied_521)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
which results in file $HOME/.rimstone/apps/&lt;app name&gt;/app/db/mydb:<br/>
<div class='ncode' style='position:relative;padding-right:16px;'>
<pre id='code_525' class=notranslate>
[client]
user=my_user
password=my_password
database=my_database
protocol=TCP
host=127.0.0.1
port=3307</pre>
<span id=rimstone_copied_525 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_525' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_525, code_525, rimstone_copied_525)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Besides making application deployment easier, this also adds to its security as the information such as above (including the database password) does not need to be a part of source code and reside in source code control system (such as git).<br/>
<br/>
Your environment variables can have any names, except that they cannot start with an underscore ("_") or be prefixed by "RIM_" or "RIM_", because those variable names are reserved by RimStone.<br/>
<br/>
Note that if your data actually has a dollar sign and is a part of the configuration file, then you can create a variable for it:<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_524' class=notranslate>
<span class="Statement">export</span> <span class="Identifier">DOLLAR_SIGN</span>=<span class="Statement">'</span><span class="Constant">$</span><span class="Statement">'</span></pre>
<span id=rimstone_copied_524 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_524' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_524, code_524, rimstone_copied_524)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
and in the configuration file:<br/>
<div class='ncode' style='position:relative;padding-right:16px;'>
<pre id='code_527' class=notranslate>
..
database=my${DOLLAR_SIGN}database
..</pre>
<span id=rimstone_copied_527 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_527' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_527, code_527, rimstone_copied_527)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
In this case the database name is "my$database".<br/>
<div class="vsub"><a id="See also"></a>See also</div>
 <a name='Database'></a><span style="font-weight:bold;">Database</span><br/>
<a href='https://rimstone-lang.com/begin-transaction.html'>begin-transaction</a> &nbsp;<br/>
<a href='https://rimstone-lang.com/commit-transaction.html'>commit-transaction</a> &nbsp;<br/>
<a href='https://rimstone-lang.com/current-row.html'>current-row</a> &nbsp;<br/>
<a href='https://rimstone-lang.com/database-config-file.html'>database-config-file</a> &nbsp;<br/>
<a href='https://rimstone-lang.com/db-error.html'>db-error</a> &nbsp;<br/>
<a href='https://rimstone-lang.com/mariadb-database.html'>mariadb-database</a> &nbsp;<br/>
<a href='https://rimstone-lang.com/postgresql-database.html'>postgresql-database</a> &nbsp;<br/>
<a href='https://rimstone-lang.com/rollback-transaction.html'>rollback-transaction</a> &nbsp;<br/>
<a href='https://rimstone-lang.com/run-query.html'>run-query</a> &nbsp;<br/>
<a href='https://rimstone-lang.com/sqlite-database.html'>sqlite-database</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='https://rimstone-lang.com/documentation.html'>documentation</a><br/>
<!--ENDVDOC90-->
<br/><div style='width:100%;clear:both;'>
<hr/>
<!--GOLFFOOT77--><span style='font-size:80%'><a href="https://rimstone-lang.com/copyright.html">Copyright</a> (c) 2019-2025 Gliim LLC. All contents on this web site is "AS IS" without warranties or guarantees of any kind.</span>
</div><br/></body></html>


