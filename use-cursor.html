<!DOCTYPE html>
<html lang="en">

<head>
<!--__RIM_REDIRECT__-->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Quicksand:wght@300..700&display=swap" rel="stylesheet">

<title>Use cursor</title>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
<meta name="HandheldFriendly" content="True"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<link rel="canonical" href="https://rimstone-lang.com/use-cursor.html" />
<style>


body, html {
    font-family: Quicksand,monospace,Helvetica, Arial, sans-serif;
    line-height: 150%;
    font-size:16px;
}

body {
    padding-left:1vw;
    padding-right:1vw;
}
    
.ncode {
    letter-spacing: 0px;
    font-family: monospace;
    font-size:83%;
    display:inline-block;
    max-width:99%;
    min-width:90%;
    margin:0;
    padding:0;
    padding-left:5px;
    padding-top:3px;
    padding-bottom:3px;
    margin-bottom:8px;
    margin-top:8px;
    border: 2px solid #d6d6d6;
    background-color:#f5f7f4;
    white-space:nowrap;
}

.shcode {
    letter-spacing: 0px;
    font-family: monospace;
    font-size:83%;
    display:inline-block;
    max-width:99%;
    min-width:90%;
    margin:0;
    padding:0;
    padding-left:5px;
    padding-top:3px;
    padding-bottom:3px;
    margin-bottom:8px;
    margin-top:8px;
    border: 2px solid #d6d6d6;
    background-color:#f5f7f4;
    white-space:nowrap;
}

.sqlcode {
    letter-spacing: 0px;
    font-family: monospace;
    font-size:83%;
    display:inline-block;
    max-width:99%;
    min-width:90%;
    margin:0;
    padding:0;
    padding-left:5px;
    padding-top:3px;
    padding-bottom:3px;
    margin-bottom:8px;
    margin-top:8px;
    border: 2px solid #d6d6d6;
    background-color:#f5f7f4;
    white-space:nowrap;
}

.htmlcode {
    letter-spacing: 0px;
    font-family: monospace;
    font-size:83%;
    display:inline-block;
    max-width:99%;
    min-width:90%;
    margin:0;
    padding:0;
    padding-left:5px;
    padding-top:3px;
    padding-bottom:3px;
    margin-bottom:8px;
    margin-top:8px;
    border: 2px solid #d6d6d6;
    background-color:#f5f7f4;
    white-space:nowrap;
}

.code {
    letter-spacing: 0px;
    font-family: monospace;
    font-size:83%;
    display:inline-block;
    max-width:99%;
    min-width:90%;
    margin:0;
    padding:0;
    padding-left:5px;
    padding-top:3px;
    padding-bottom:3px;
    margin-bottom:8px;
    margin-top:8px;
    border: 2px solid #d6d6d6;
    background-color:#f5f7f4;
    white-space:nowrap;
}

/*Just like h1 but for pdf conversion it would be indented this way it's not*/
.vhub {
    display: block;
   font-size: 1.6em;
   margin-top: 0.63em;
   margin-bottom: 0.63em;
   margin-left: 0;
   margin-right: 0;
   font-weight: bold;
}

/*Just like h2 but for pdf conversion it would be indented this way it's not*/
.vsub {
    display: block;
   font-size: 1.25em;
   margin-top: 0.53em;
   margin-bottom: 0.53em;
   margin-left: 0;
   margin-right: 0;
   font-weight: bold;
}

ul {
  margin-left: 0.75vw;
  padding-left: 0;
}
li {
  margin-left: 0.75vw;
  padding-left: 0;
}

/* this must be last, as it overrides previous settings, for mobile */
@media (hover: none) {
a {
   display: inline-block;
   padding-top: 3px;
   padding-bottom: 2px;
}
body {
    padding-left:2vw;
    padding-right:2vw;
    letter-spacing: 1px;
}
}

/*The following is for code snippets that are highlighted by 2html vim*/
pre { overflow-x: scroll; margin:0; padding:0; font-family:monospace; }
.Identifier { color: #008b8b; }
.Statement { color: #af5f00; }
.PreProc { color: #5fd7ff; }
.Type { color: #005f00; }
.Comment { color: blue ; }
.Constant { color: #ff00ff; }
/*end of highlighted snippets*/

a {
    text-decoration:none;
    padding-bottom: 0px; 
    color:inherit;
    border-bottom: 2px solid #6cb8f0;
}
a:hover {
    text-decoration: none;
    color:black;
    border-bottom: 1px solid red;
}
/*do not underline links nor should they be active*/
pre a {
    text-decoration:none;
    color:black;
    border-bottom: none;
    pointer-events: none;
    cursor: default;
}


.golfSnippet {display:none;}

ul {
  list-style-type:square;
  list-style-position: outside;
}

</style>


</head>
<body>
<div id="google_translate_element" style='float:right'></div>
<script type="text/javascript" src="//translate.google.com/translate_a/element.js?cb=googleTranslateElementInit"></script>
<script>
function rim_copy(gt, eid, gc) {
  gt.textContent = eid.textContent;
  gt.select();
  document.execCommand("copy");
  gc.style.visibility="visible"
  setTimeout(()=>{ gc.style.visibility="hidden"; }, 1000);
}
function googleTranslateElementInit() {
   new google.translate.TranslateElement({pageLanguage: 'en'}, 'google_translate_element');
}

</script>

<!--RIMMENU13-->

<!--RIMENDMENU13-->



<!--BEGVDOC90-->
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:left;background-color:white;'><a href='https://rimstone-lang.com' style='border-bottom:0px'><img src='https://rimstone-lang.com/rimstone.png' style='width:180px;height:auto'/></a></div><div class='vhub' style='margin-top:10px;'>Use cursor</div><hr/><span style="font-weight:bold;">Purpose</span>: Iterate to a lesser or greater key in a tree.<br/>
<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_1144' class=notranslate>
<span class="Statement">use-cursor</span> &lt;cursor&gt; (<span class="Identifier"> current</span> |<span class="Identifier"> get-lesser</span> |<span class="Identifier"> get-greater</span> ) \
    [<span class="Type"> key</span> &lt;key&gt; ] \
    [<span class="Type"> value</span> &lt;value&gt; ] \
    [<span class="Identifier"> update-value</span> &lt;update value&gt; ] \
    [<span class="Type"> status</span> &lt;status&gt; ]</pre>
<span id=rimstone_copied_1144 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_1144' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_1144, code_1144, rimstone_copied_1144)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
use-cursor uses &lt;cursor&gt; previously created (see <a href='https://rimstone-lang.com/read-tree.html'>read-tree</a>, <a href='https://rimstone-lang.com/write-tree.html'>write-tree</a>) for iteration over tree nodes with lesser or greater key values. It can also obtain keys and values for such nodes, as well as update their values.<br/>
<div class="vsub"><a id="Current node"></a>Current node</div>
A &lt;cursor&gt; has a current node, which is first computed by using "current", "get-lesser" or "get-greater" clauses, and then any other clauses are applied to it (such as "key", "value" and "update-value"). <br/>
<br/>
The computation of a current node is performed by using a &lt;cursor&gt;'s "previous current node", i.e. the current node just before use-cursor executes. If "current" clause is used, the current node remains the same as previous current node. If "get-lesser" clause is used, a node with a key that is the next lesser from the previous current will become the new current. If "get-greater" clause is used, a node with a key that is the next greater from the previous current will become the new current. <br/>
<br/>
If the new current node can be found, then other use-cursor clauses are applied to it, such as to obtain a &lt;key&gt; or &lt;value&gt;, or to &lt;update value&gt;. If, as a result of either of these clauses, the new current node cannot be found (for instance there is no lesser or greater key in the tree), the current node will be unchanged and &lt;status&gt; (in "status" clause) will be RIM_ERR_EXIST.<br/>
<div class="vsub"><a id="Key, value, updating value, status"></a>Key, value, updating value, status</div>
"key" clause will obtain the key in a current node into &lt;key&gt; string. The value of current node can be obtained in &lt;value&gt; in "value" clause; &lt;value&gt; is a string. The value of current node can be updated to &lt;update value&gt; in "update-value" clause; &lt;update value&gt; is a string. This update is performed after &lt;value&gt; has been retrieved, allowing you to obtain the previous value in the same statement. <br/>
<br/>
"status" clause can be used to obtain &lt;status&gt; number, which is RIM_ERR_EXIST if the new current node cannot be found, in which case the current node, &lt;key&gt; and &lt;value&gt; are unchanged. Otherwise, &lt;status&gt; is RIM_OKAY.<br/>
<div class="vsub"><a id="Examples"></a>Examples</div>
The following will find a value with key "999", and then iterate in the tree to find all lesser values (in descending order):<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_1145' class=notranslate>
<span class="Statement">set-string</span> k = <span class="Constant">&quot;999&quot;</span>
<span class="Statement">read-tree</span> mytree<span class="Identifier"> equal</span> k<span class="Type"> status</span> st \
   <span class="Type"> value</span> val<span class="Type"> new-cursor</span> cur
<span class="Statement">start-loop</span>
<span class="Statement">    if-true</span> st<span class="Identifier"> equal</span> RIM_OKAY
<span class="Statement">        @</span>Value found is [<span class="Statement">&lt;&lt;print-out</span> val<span class="Statement">&gt;&gt;</span>] for key [<span class="Statement">&lt;&lt;print-out</span> k<span class="Statement">&gt;&gt;</span>]
<span class="Statement">        use-cursor</span> cur<span class="Identifier"> get-lesser</span><span class="Type"> status</span> st<span class="Type"> value</span> val<span class="Type"> key</span> k
<span class="Statement">    else-if</span>
<span class="Statement">        break-loop</span>
<span class="Statement">    end-if</span>
<span class="Statement">end-loop</span></pre>
<span id=rimstone_copied_1145 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_1145' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_1145, code_1145, rimstone_copied_1145)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
For more examples, see <a href='https://rimstone-lang.com/new-tree.html'>new-tree</a>.<br/>
<div class="vsub"><a id="See also"></a>See also</div>
 <a name='Tree'></a><span style="font-weight:bold;">Tree</span><br/>
<a href='https://rimstone-lang.com/delete-tree.html'>delete-tree</a> &nbsp;<br/>
<a href='https://rimstone-lang.com/get-tree.html'>get-tree</a> &nbsp;<br/>
<a href='https://rimstone-lang.com/new-tree.html'>new-tree</a> &nbsp;<br/>
<a href='https://rimstone-lang.com/purge-tree.html'>purge-tree</a> &nbsp;<br/>
<a href='https://rimstone-lang.com/read-tree.html'>read-tree</a> &nbsp;<br/>
<a href='https://rimstone-lang.com/use-cursor.html'>use-cursor</a> &nbsp;<br/>
<a href='https://rimstone-lang.com/write-tree.html'>write-tree</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='https://rimstone-lang.com/documentation.html'>documentation</a><br/>
<!--ENDVDOC90-->
<br/><div style='width:100%;clear:both;'>
<hr/>
<!--RIMFOOT77--><span style='font-size:80%'><a href="https://rimstone-lang.com/copyright.html">Copyright</a> (c) 2019-2025 Gliim LLC. All contents on this web site is "AS IS" without warranties or guarantees of any kind.</span>
</div><br/></body></html>


