<!DOCTYPE html>
<html lang="en">

<head>
<!--__RIM_REDIRECT__-->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Quicksand:wght@300..700&display=swap" rel="stylesheet">

<title>Mixing doubles and numbers</title>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
<meta name="HandheldFriendly" content="True"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<link rel="canonical" href="https://rimstone-lang.com/mixing-doubles-and-numbers.html" />
<style>


body, html {
    font-family: Quicksand,monospace,Helvetica, Arial, sans-serif;
    line-height: 150%;
    font-size:16px;
}

body {
    padding-left:1vw;
    padding-right:1vw;
}
    
.ncode {
    letter-spacing: 0px;
    font-family: monospace;
    font-size:83%;
    display:inline-block;
    max-width:99%;
    min-width:90%;
    margin:0;
    padding:0;
    padding-left:5px;
    padding-top:3px;
    padding-bottom:3px;
    margin-bottom:8px;
    margin-top:8px;
    border: 2px solid #d6d6d6;
    background-color:#f5f7f4;
    white-space:nowrap;
}

.shcode {
    letter-spacing: 0px;
    font-family: monospace;
    font-size:83%;
    display:inline-block;
    max-width:99%;
    min-width:90%;
    margin:0;
    padding:0;
    padding-left:5px;
    padding-top:3px;
    padding-bottom:3px;
    margin-bottom:8px;
    margin-top:8px;
    border: 2px solid #d6d6d6;
    background-color:#f5f7f4;
    white-space:nowrap;
}

.sqlcode {
    letter-spacing: 0px;
    font-family: monospace;
    font-size:83%;
    display:inline-block;
    max-width:99%;
    min-width:90%;
    margin:0;
    padding:0;
    padding-left:5px;
    padding-top:3px;
    padding-bottom:3px;
    margin-bottom:8px;
    margin-top:8px;
    border: 2px solid #d6d6d6;
    background-color:#f5f7f4;
    white-space:nowrap;
}

.htmlcode {
    letter-spacing: 0px;
    font-family: monospace;
    font-size:83%;
    display:inline-block;
    max-width:99%;
    min-width:90%;
    margin:0;
    padding:0;
    padding-left:5px;
    padding-top:3px;
    padding-bottom:3px;
    margin-bottom:8px;
    margin-top:8px;
    border: 2px solid #d6d6d6;
    background-color:#f5f7f4;
    white-space:nowrap;
}

.code {
    letter-spacing: 0px;
    font-family: monospace;
    font-size:83%;
    display:inline-block;
    max-width:99%;
    min-width:90%;
    margin:0;
    padding:0;
    padding-left:5px;
    padding-top:3px;
    padding-bottom:3px;
    margin-bottom:8px;
    margin-top:8px;
    border: 2px solid #d6d6d6;
    background-color:#f5f7f4;
    white-space:nowrap;
}

/*Just like h1 but for pdf conversion it would be indented this way it's not*/
.vhub {
    display: block;
   font-size: 1.6em;
   margin-top: 0.63em;
   margin-bottom: 0.63em;
   margin-left: 0;
   margin-right: 0;
   font-weight: bold;
}

/*Just like h2 but for pdf conversion it would be indented this way it's not*/
.vsub {
    display: block;
   font-size: 1.25em;
   margin-top: 0.53em;
   margin-bottom: 0.53em;
   margin-left: 0;
   margin-right: 0;
   font-weight: bold;
}

ul {
  margin-left: 0.75vw;
  padding-left: 0;
}
li {
  margin-left: 0.75vw;
  padding-left: 0;
}

/* this must be last, as it overrides previous settings, for mobile */
@media (hover: none) {
a {
   display: inline-block;
   padding-top: 3px;
   padding-bottom: 2px;
}
body {
    padding-left:2vw;
    padding-right:2vw;
    letter-spacing: 1px;
}
}

/*The following is for code snippets that are highlighted by 2html vim*/
pre { overflow-x: scroll; margin:0; padding:0; font-family:monospace; }
.Identifier { color: #008b8b; }
.Statement { color: #af5f00; }
.PreProc { color: #5fd7ff; }
.Type { color: #005f00; }
.Comment { color: blue ; }
.Constant { color: #ff00ff; }
/*end of highlighted snippets*/

a {
    text-decoration:none;
    padding-bottom: 0px; 
    color:inherit;
    border-bottom: 2px solid #6cb8f0;
}
a:hover {
    text-decoration: none;
    color:black;
    border-bottom: 1px solid red;
}
/*do not underline links nor should they be active*/
pre a {
    text-decoration:none;
    color:black;
    border-bottom: none;
    pointer-events: none;
    cursor: default;
}


.golfSnippet {display:none;}

ul {
  list-style-type:square;
  list-style-position: outside;
}

</style>


</head>
<body>
<div id="google_translate_element" style='float:right'></div>
<script type="text/javascript" src="//translate.google.com/translate_a/element.js?cb=googleTranslateElementInit"></script>
<script>
function rim_copy(gt, eid, gc) {
  gt.textContent = eid.textContent;
  gt.select();
  document.execCommand("copy");
  gc.style.visibility="visible"
  setTimeout(()=>{ gc.style.visibility="hidden"; }, 1000);
}
function googleTranslateElementInit() {
   new google.translate.TranslateElement({pageLanguage: 'en'}, 'google_translate_element');
}

</script>

<!--RIMMENU13-->

<!--RIMENDMENU13-->



<!--BEGVDOC90-->
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:left;background-color:white;'><a href='https://rimstone-lang.com' style='border-bottom:0px'><img src='https://rimstone-lang.com/rimstone.png' style='width:180px;height:auto'/></a></div><div class='vhub' style='margin-top:10px;'>Mixing doubles and numbers</div><hr/>Without conversion functions (see <a href='https://rimstone-lang.com/math-functions.html'>math-functions</a>), double and number expressions do not mix, as they are separate types. One exception to this is using numbers (i.e. whole numbers) in double expressions, since in that case they are automatically promoted; the reason for this is that this conversion is lossless.<br/>
<br/>
The opposite is not true; doubles would generally lose precision when promoted to numbers, and for this you can use floor(), ceil(), round() etc. <br/>
<div class="vsub"><a id="Using numbers in double expressions is fine"></a>Using numbers in double expressions is fine</div>
For example, the following is valid, because a number (3) is promoted to a double:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_797' class=notranslate>
<span class="Statement">set-double</span> d = <span class="Constant">4</span><span class="Constant">.5</span> + <span class="Constant">3</span></pre>
<span id=rimstone_copied_797 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_797' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_797, code_797, rimstone_copied_797)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<div class="vsub"><a id="Using doubles in number expressions is not, however..."></a>Using doubles in number expressions is not, however...</div>
In general, a double cannot be automatically promoted to a number without loss. In some languages, there is an automatic promotion of this kind, however it is a bad idea and a source of potential bugs since the method of demotion can vary and often the developer isn't aware of it:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_798' class=notranslate>
<span class="Statement">set-number</span> n = <span class="Constant">3</span> + <span class="Constant">4</span><span class="Constant">.5</span>  <span class="Comment">// this won't work</span></pre>
<span id=rimstone_copied_798 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_798' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_798, code_798, rimstone_copied_798)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Instead you can use functions like num(), round(), ceil(), floor() etc. (see <a href='https://rimstone-lang.com/math-functions.html'>math-functions</a>):<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_799' class=notranslate>
<span class="Statement">set-number</span> n = <span class="Constant">3</span> + round(<span class="Constant">4</span><span class="Constant">.5</span>)</pre>
<span id=rimstone_copied_799 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_799' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_799, code_799, rimstone_copied_799)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<div class="vsub"><a id="Comparisions"></a>Comparisions</div>
When it comes to comparisons, the type determination is performed from left to right. So the following works:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_800' class=notranslate>
<span class="Statement">if-true</span> <span class="Constant">3</span><span class="Constant">.5</span> &gt; <span class="Constant">3</span>
<span class="Statement">    @</span>Yes
<span class="Statement">end-if</span></pre>
<span id=rimstone_copied_800 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_800' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_800, code_800, rimstone_copied_800)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
because a double (3.5) comes first and then a number (3) is promoted to a double. However, this will not compile:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_801' class=notranslate>
<span class="Statement">if-true</span> <span class="Constant">3</span> &lt; <span class="Constant">3</span><span class="Constant">.5</span>
<span class="Statement">    @</span>Yes
<span class="Statement">end-if</span></pre>
<span id=rimstone_copied_801 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_801' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_801, code_801, rimstone_copied_801)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
because a number (3) comes first and then a double (3.5) cannot be automatically promoted to a number. When writing comparisons between the two, either use the appropriate conversion functions, or write double expressions first. For instance you can use dbl() function (see <a href='https://rimstone-lang.com/math-functions.html'>math-functions</a>):<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_802' class=notranslate>
<span class="Statement">if-true</span> dbl(<span class="Constant">3</span>) &lt; <span class="Constant">3</span><span class="Constant">.5</span>
<span class="Statement">    @</span>Yes
<span class="Statement">end-if</span></pre>
<span id=rimstone_copied_802 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_802' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_802, code_802, rimstone_copied_802)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<div class="vsub"><a id="See also"></a>See also</div>
 <a name='Doubles'></a><span style="font-weight:bold;">Doubles</span><br/>
<a href='https://rimstone-lang.com/abs-double.html'>abs-double</a> &nbsp;<br/>
<a href='https://rimstone-lang.com/double-expressions.html'>double-expressions</a> &nbsp;<br/>
<a href='https://rimstone-lang.com/double-string.html'>double-string</a> &nbsp;<br/>
<a href='https://rimstone-lang.com/mixing-doubles-and-numbers.html'>mixing-doubles-and-numbers</a> &nbsp;<br/>
<a href='https://rimstone-lang.com/set-double.html'>set-double</a> &nbsp;<br/>
<a href='https://rimstone-lang.com/string-double.html'>string-double</a> &nbsp; <br/>
 <a name='Numbers'></a><span style="font-weight:bold;">Numbers</span><br/>
<a href='https://rimstone-lang.com/abs-number.html'>abs-number</a> &nbsp;<br/>
<a href='https://rimstone-lang.com/mixing-doubles-and-numbers.html'>mixing-doubles-and-numbers</a> &nbsp;<br/>
<a href='https://rimstone-lang.com/number-expressions.html'>number-expressions</a> &nbsp;<br/>
<a href='https://rimstone-lang.com/number-string.html'>number-string</a> &nbsp;<br/>
<a href='https://rimstone-lang.com/set-number.html'>set-number</a> &nbsp;<br/>
<a href='https://rimstone-lang.com/string-number.html'>string-number</a> &nbsp; <br/>
<span style="font-weight:bold;">See all</span> <br/>
<a href='https://rimstone-lang.com/documentation.html'>documentation</a><br/>
<!--ENDVDOC90-->
<br/><div style='width:100%;clear:both;'>
<hr/>
<!--RIMFOOT77--><span style='font-size:80%'><a href="https://rimstone-lang.com/copyright.html">Copyright</a> (c) 2019-2025 Gliim LLC. All contents on this web site is "AS IS" without warranties or guarantees of any kind.</span>
</div><br/></body></html>


