<!DOCTYPE html>
<html lang="en">

<head>
<!--__RIM_REDIRECT__-->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Quicksand:wght@300..700&display=swap" rel="stylesheet">

<title>Web framework for C programming language</title>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
<meta name="HandheldFriendly" content="True"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<link rel="canonical" href="https://rimstone-lang.com/article-web-framework-for-c-programming-language.html" />
<style>


body, html {
    font-family: Quicksand,monospace,Helvetica, Arial, sans-serif;
    line-height: 150%;
    font-size:16px;
}

body {
    padding-left:1vw;
    padding-right:1vw;
}
    
.ncode {
    letter-spacing: 0px;
    font-family: monospace;
    font-size:83%;
    display:inline-block;
    max-width:99%;
    min-width:90%;
    margin:0;
    padding:0;
    padding-left:5px;
    padding-top:3px;
    padding-bottom:3px;
    margin-bottom:8px;
    margin-top:8px;
    border: 2px solid #d6d6d6;
    background-color:#f5f7f4;
    white-space:nowrap;
}

.shcode {
    letter-spacing: 0px;
    font-family: monospace;
    font-size:83%;
    display:inline-block;
    max-width:99%;
    min-width:90%;
    margin:0;
    padding:0;
    padding-left:5px;
    padding-top:3px;
    padding-bottom:3px;
    margin-bottom:8px;
    margin-top:8px;
    border: 2px solid #d6d6d6;
    background-color:#f5f7f4;
    white-space:nowrap;
}

.sqlcode {
    letter-spacing: 0px;
    font-family: monospace;
    font-size:83%;
    display:inline-block;
    max-width:99%;
    min-width:90%;
    margin:0;
    padding:0;
    padding-left:5px;
    padding-top:3px;
    padding-bottom:3px;
    margin-bottom:8px;
    margin-top:8px;
    border: 2px solid #d6d6d6;
    background-color:#f5f7f4;
    white-space:nowrap;
}

.htmlcode {
    letter-spacing: 0px;
    font-family: monospace;
    font-size:83%;
    display:inline-block;
    max-width:99%;
    min-width:90%;
    margin:0;
    padding:0;
    padding-left:5px;
    padding-top:3px;
    padding-bottom:3px;
    margin-bottom:8px;
    margin-top:8px;
    border: 2px solid #d6d6d6;
    background-color:#f5f7f4;
    white-space:nowrap;
}

.code {
    letter-spacing: 0px;
    font-family: monospace;
    font-size:83%;
    display:inline-block;
    max-width:99%;
    min-width:90%;
    margin:0;
    padding:0;
    padding-left:5px;
    padding-top:3px;
    padding-bottom:3px;
    margin-bottom:8px;
    margin-top:8px;
    border: 2px solid #d6d6d6;
    background-color:#f5f7f4;
    white-space:nowrap;
}

/*Just like h1 but for pdf conversion it would be indented this way it's not*/
.vhub {
    display: block;
   font-size: 1.6em;
   margin-top: 0.63em;
   margin-bottom: 0.63em;
   margin-left: 0;
   margin-right: 0;
   font-weight: bold;
}

/*Just like h2 but for pdf conversion it would be indented this way it's not*/
.vsub {
    display: block;
   font-size: 1.25em;
   margin-top: 0.53em;
   margin-bottom: 0.53em;
   margin-left: 0;
   margin-right: 0;
   font-weight: bold;
}

ul {
  margin-left: 0.75vw;
  padding-left: 0;
}
li {
  margin-left: 0.75vw;
  padding-left: 0;
}

/* this must be last, as it overrides previous settings, for mobile */
@media (hover: none) {
a {
   display: inline-block;
   padding-top: 3px;
   padding-bottom: 2px;
}
body {
    padding-left:2vw;
    padding-right:2vw;
    letter-spacing: 1px;
}
}

/*The following is for code snippets that are highlighted by 2html vim*/
pre { overflow-x: scroll; margin:0; padding:0; font-family:monospace; }
.Identifier { color: #008b8b; }
.Statement { color: #af5f00; }
.PreProc { color: #5fd7ff; }
.Type { color: #005f00; }
.Comment { color: blue ; }
.Constant { color: #ff00ff; }
/*end of highlighted snippets*/

a {
    text-decoration:none;
    padding-bottom: 0px; 
    color:inherit;
    border-bottom: 2px solid #6cb8f0;
}
a:hover {
    text-decoration: none;
    color:black;
    border-bottom: 1px solid red;
}
/*do not underline links nor should they be active*/
pre a {
    text-decoration:none;
    color:black;
    border-bottom: none;
    pointer-events: none;
    cursor: default;
}


.golfSnippet {display:none;}

ul {
  list-style-type:square;
  list-style-position: outside;
}

</style>


</head>
<body>
<div id="google_translate_element" style='float:right'></div>
<script type="text/javascript" src="//translate.google.com/translate_a/element.js?cb=googleTranslateElementInit"></script>
<script>
function rim_copy(gt, eid, gc) {
  gt.textContent = eid.textContent;
  gt.select();
  document.execCommand("copy");
  gc.style.visibility="visible"
  setTimeout(()=>{ gc.style.visibility="hidden"; }, 1000);
}
function googleTranslateElementInit() {
   new google.translate.TranslateElement({pageLanguage: 'en'}, 'google_translate_element');
}

</script>

<!--RIMMENU13-->

<!--RIMENDMENU13-->



<!--BEGVDOC90-->
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:left;background-color:white;'><a href='https://rimstone-lang.com' style='border-bottom:0px'><img src='https://rimstone-lang.com/rimstone.png' style='width:180px;height:auto'/></a></div><div class='vhub' style='margin-top:10px;'>Web framework for C programming language</div><hr/><br/>
RimStone has an "extended" mode, which allows for C code to be used directly. Normally, this is not allowed, but if you use <a href='https://rimstone-lang.com/extended-mode.html'>extended-mode</a> statement in your .rim file, then you can call C code from it.<br/>
<br/>
In extended mode, RimStone is effectively a <a href='https://rimstone-lang.com/web-framework-for-C-programming-language.html'>web framework for C programming language</a>; read this for more about implications on memory safety.<br/>
<br/>
Here's the example of using RimStone as a web framework for C. In this case it's a simple C function to calculate the factorial of a a number. Then we'll expose this functionality in an equally simple web application. <br/>
<div class="vsub"><a id="Create the RimStone application"></a>Create the RimStone application</div>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_379' class=notranslate>
<span class="Statement">mkdir</span> <span class="Special">-p</span> c-for-web
<span class="Statement">cd</span> c-for-web</pre>
<span id=rimstone_copied_379 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_379' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_379, code_379, rimstone_copied_379)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Create "fact" application ("-k"):<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_382' class=notranslate>
rim <span class="Special">-k</span> fact</pre>
<span id=rimstone_copied_382 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_382' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_382, code_382, rimstone_copied_382)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
The following file "calc-fact.rim" has the web service which will interact with web clients (such as browsers); it will also call the C function we'll create a bit further below:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_378' class=notranslate>
cat &lt;&lt; '<span class="Constant">EOF</span>' &gt; calc-fact.rim
<span class="Statement">extended-mode</span> <span class="Comment">// extended mode in order to call C code</span>

<span class="Statement">%%</span> /calc-fact<span class="Identifier"> public</span>
<span class="Statement">    get-param</span> n<span class="Identifier"> type number</span> <span class="Comment">// get input parameter from URL</span>
<span class="Statement">    set-number</span> result
<span class="Statement">    call-extended</span> factorial(n, &amp;result) <span class="Comment">// call C function</span>
    <span class="Comment">// Output result</span>
<span class="Statement">    @</span>Factorial of <span class="Statement">&lt;&lt;print-out</span> n<span class="Statement">&gt;&gt;</span> is <span class="Statement">&lt;&lt;print-out</span> result<span class="Statement">&gt;&gt;</span>
<span class="Statement">%%</span>
<span class="Constant">EOF</span></pre>
<span id=rimstone_copied_378 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_378' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_378, code_378, rimstone_copied_378)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<div class="vsub"><a id="Add C code to RimStone application"></a>Add C code to RimStone application</div>
Next is C file "factorial.c". This is the C function we're calling from RimStone code above:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_381' class=notranslate>
cat &lt;&lt; '<span class="Constant">EOF</span>' &gt; factorial.c
<span class="PreProc">#include </span><span class="Constant">&quot;rim.h&quot;</span>

<span class="Comment">// Compute factorial of f, and store result into res</span>
<span class="Type">void</span> factorial(rim_num f, rim_num *res)
<span class="Statement">{</span>
    *res = <span class="Constant">1</span>;
    rim_num i;
    <span class="Statement">for</span> (i = <span class="Constant">2</span>; i &lt;= f; i++) {
        *res *= i;
<span class="Statement">    }</span>
<span class="Statement">}</span>
<span class="Constant">EOF</span></pre>
<span id=rimstone_copied_381 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_381' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_381, code_381, rimstone_copied_381)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
And an include file "factorial.h" to declare any function(s) we will use in RimStone code:<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_384' class=notranslate>
cat &lt;&lt; '<span class="Constant">EOF</span>' &gt; factorial.h
<span class="Type">void</span> factorial(rim_num f, rim_num *res);
<span class="Constant">EOF</span></pre>
<span id=rimstone_copied_384 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_384' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_384, code_384, rimstone_copied_384)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<div class="vsub"><a id="Compile and start the server"></a>Compile and start the server</div>
RimStone will pick up all .rim as well as all .c and .h file and make them into an application:<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_385' class=notranslate>
rim <span class="Special">-q</span></pre>
<span id=rimstone_copied_385 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_385' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_385, code_385, rimstone_copied_385)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Start the server:<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_387' class=notranslate>
mrim fact</pre>
<span id=rimstone_copied_387 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_387' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_387, code_387, rimstone_copied_387)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
<div class="vsub"><a id="Test the server from command line"></a>Test the server from command line</div>
You can test this web application from command line (note --service flag!). This is useful because you can develop web applications just from command line:<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_388' class=notranslate>
rim <span class="Special">-r</span> <span class="Special">--req</span><span class="Statement">=</span>/calc-fact/<span class="Identifier">n</span>=<span class="Constant">12</span> <span class="Special">--exec</span> <span class="Special">--service</span></pre>
<span id=rimstone_copied_388 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_388' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_388, code_388, rimstone_copied_388)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
The result is:<br/>
<div class='ncode' style='position:relative;padding-right:16px;'>
<pre id='code_377' class=notranslate>
Content-Type: text/html;charset=utf-8
Cache-Control: max-age=0, no-cache
Pragma: no-cache
Status: 200 OK

Factorial of 12 is 479001600</pre>
<span id=rimstone_copied_377 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_377' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_377, code_377, rimstone_copied_377)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
This is the exact data that would be sent to an actual web client. <br/>
<div class="vsub"><a id="Test the server with web browser"></a>Test the server with web browser</div>
Let's test on an actual web server. In this case we'll use Nginx. Also, we'll do it locally on your computer, since not everyone has a server on the web.<br/>
<br/>
First, edit Nginx config file, which for Ubuntu/Debian is at:<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_389' class=notranslate>
/etc/nginx/sites-enabled/default</pre>
<span id=rimstone_copied_389 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_389' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_389, code_389, rimstone_copied_389)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
and on Fedora/RedHat is at:<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_390' class=notranslate>
/etc/nginx/nginx.conf</pre>
<span id=rimstone_copied_390 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_390' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_390, code_390, rimstone_copied_390)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Note you might have to use "sudo" to edit these files as they're generally not writable by ordinary users.<br/>
<br/>
Find the "server" section, and add this inside it (replace "your-user" with your OS user name):<br/>
<div class='ncode' style='position:relative;padding-right:16px;'>
<pre id='code_380' class=notranslate>
location /fact/ { include /etc/nginx/fastcgi_params; fastcgi_pass  unix:///home/your-user/.rimstone/apps/fact/sock/.sock; }</pre>
<span id=rimstone_copied_380 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_380' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_380, code_380, rimstone_copied_380)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
This will connect Nginx with the "fact" server you started above. Any requests with a URL path that start with "/fact/" will be delivered to your server, and the reply will go in reverse, ultimately being delivered to the client (such as web browser).<br/>
<br/>
Restart Nginx server for this to take effect:<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_391' class=notranslate>
sudo systemctl restart nginx</pre>
<span id=rimstone_copied_391 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_391' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_391, code_391, rimstone_copied_391)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Try it from web browser with this URL:<br/>
<div class='ncode' style='position:relative;padding-right:16px;'>
<pre id='code_383' class=notranslate>
http://127.0.0.1/fact/calc-fact/n=8</pre>
<span id=rimstone_copied_383 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_383' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_383, code_383, rimstone_copied_383)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
If your Nginx runs on another port, specify it, for instance if it runs on port 81, use "127.0.0.1:81" instead.<br/>
<br/>
The result is:<br/>
<div class='ncode' style='position:relative;padding-right:16px;'>
<pre id='code_386' class=notranslate>
Factorial of 8 is 40320</pre>
<span id=rimstone_copied_386 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_386' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='rim_copy(rimstonet_386, code_386, rimstone_copied_386)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Of course, if you have a server on the web, just substitute "127.0.0.1" for your server's web address.<br/>
<!--ENDVDOC90-->
<br/><div style='width:100%;clear:both;'>
<hr/>
<!--RIMFOOT77--><span style='font-size:80%'><a href="https://rimstone-lang.com/copyright.html">Copyright</a> (c) 2019-2025 Gliim LLC. All contents on this web site is "AS IS" without warranties or guarantees of any kind.</span>
</div><br/></body></html>


